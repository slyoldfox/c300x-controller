{"version":3,"file":"homekit-bundle.js","mappings":";;;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,4BAA4B,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,mBAAmB;AACtH,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B;AACA,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,wCAAwC,mBAAO,CAAC,gDAAO;AACvD,iBAAiB,mBAAO,CAAC,sBAAQ;AACjC,sCAAsC,mBAAO,CAAC,gBAAK;AACnD,qBAAqB,mBAAO,CAAC,mGAA4B;AACzD,kBAAkB,mBAAO,CAAC,6FAAyB;AACnD,qBAAqB,mBAAO,CAAC,mGAA4B;AACzD,oBAAoB,mBAAO,CAAC,iGAA2B;AACvD,oBAAoB,mBAAO,CAAC,iGAA2B;AACvD,oBAAoB,mBAAO,CAAC,iGAA2B;AACvD,yBAAyB,mBAAO,CAAC,2FAAwB;AACzD,gBAAgB,mBAAO,CAAC,6DAAS;AACjC,yBAAyB,mBAAO,CAAC,+EAAkB;AACnD,oBAAoB,mBAAO,CAAC,+EAAkB;AAC9C,6CAA6C,mBAAO,CAAC,6FAAyB;AAC9E,2BAA2B,mBAAO,CAAC,6FAAyB;AAC5D;AACA,uDAAuD;AACvD,sDAAsD,GAAG,MAAM;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,mBAAmB,oBAAoB,oBAAoB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,mBAAmB,oBAAoB,oBAAoB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,iBAAiB;AAC9D,IAAI,+BAA+B;AACnC,kCAAkC,iBAAiB;AACnD;AACA;AACA;AACA,6CAA6C,+BAA+B;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,UAAU,4BAA4B,MAAM;AACxF;AACA;AACA;AACA,4CAA4C,UAAU,0CAA0C,OAAO;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,UAAU;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,UAAU;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,YAAY;AAC3B,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF;AACtF;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,oFAAoF,UAAU,gBAAgB,WAAW;AACzH;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,4FAA4F,cAAc,gBAAgB,eAAe;AACzI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,UAAU,GAAG,UAAU;AAC3E,6CAA6C,aAAa,EAAE,YAAY,OAAO,aAAa,IAAI,UAAU,GAAG,YAAY;AACzH;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,kCAAkC,mBAAmB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,UAAU;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;;;;;;;;;;AC5uBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB,GAAG,6BAA6B,GAAG,6BAA6B;AAClF,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,wCAAwC,mBAAO,CAAC,gDAAO;AACvD,wCAAwC,mBAAO,CAAC,oBAAO;AACvD,oBAAoB,mBAAO,CAAC,iFAAmB;AAC/C,yBAAyB,mBAAO,CAAC,+EAAkB;AACnD,2BAA2B,mBAAO,CAAC,6FAAyB;AAC5D,iBAAiB,mBAAO,CAAC,yEAAe;AACxC,wBAAwB,mBAAO,CAAC,uFAAsB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,YAAY,GAAG,eAAe;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G,KAAK;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE,wDAAwD;AACxD,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G,qFAAqF;AACjM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,KAAK,MAAM,YAAY;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;;;;;;;;;;;AC5fa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,2BAA2B,GAAG,iBAAiB,GAAG,gBAAgB;AAC3F,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B;AACA,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,gDAAgD,mBAAO,CAAC,oCAAe;AACvE,wCAAwC,mBAAO,CAAC,gDAAO;AACvD,iBAAiB,mBAAO,CAAC,sBAAQ;AACjC,kDAAkD,mBAAO,CAAC,gEAAiB;AAC3E,sCAAsC,mBAAO,CAAC,gBAAK;AACnD,qCAAqC,mBAAO,CAAC,cAAI;AACjD,2BAA2B,mBAAO,CAAC,6FAAyB;AAC5D;AACA;AACA;AACA;AACA;AACA,CAAC,eAAe,gBAAgB,gBAAgB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gBAAgB,iBAAiB,iBAAiB;AACnD;AACA;AACA;AACA,CAAC,0BAA0B,2BAA2B,2BAA2B;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA,2EAA2E;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2GAA2G;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iGAAiG;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA,gCAAgC,QAAQ,YAAY;AACpD;AACA,mCAAmC,oBAAoB,KAAK,mBAAmB;AAC/E;AACA;AACA,mCAAmC,oBAAoB,KAAK,mBAAmB;AAC/E;AACA;AACA,mCAAmC,oCAAoC,KAAK,mCAAmC;AAC/G;AACA;AACA,mCAAmC,+BAA+B,KAAK,8BAA8B;AACrG;AACA,kCAAkC;AAClC,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,wBAAwB,kDAAkD,cAAc;AACpK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;AACA,kFAAkF,EAAE,KAAK,SAAS;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,QAAQ;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA,iFAAiF,EAAE,KAAK,SAAS;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA,2BAA2B,yBAAyB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,EAAE,KAAK,SAAS;AAC5G;AACA;AACA;AACA;AACA,gFAAgF,EAAE,KAAK,SAAS;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA,kFAAkF,EAAE,KAAK,SAAS;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA,iCAAiC,wBAAwB,4CAA4C,EAAE,KAAK,SAAS;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,MAAM,wBAAwB,cAAc,iBAAiB,oCAAoC,GAAG;AAClL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,MAAM,iCAAiC,oCAAoC,GAAG;AAC5J;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,sBAAsB;AACtB;AACA;AACA,yCAAyC;AACzC;;;;;;;;;;;ACxqBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,wCAAwC,mBAAO,CAAC,gDAAO;AACvD,sBAAsB,mBAAO,CAAC,yEAAe;AAC7C,oBAAoB,mBAAO,CAAC,iFAAmB;AAC/C,mBAAmB,mBAAO,CAAC,+EAAkB;AAC7C,qBAAqB,mBAAO,CAAC,mGAA4B;AACzD,kBAAkB,mBAAO,CAAC,6FAAyB;AACnD,oBAAoB,mBAAO,CAAC,iGAA2B;AACvD,oBAAoB,mBAAO,CAAC,iGAA2B;AACvD,oBAAoB,mBAAO,CAAC,iGAA2B;AACvD,qBAAqB,mBAAO,CAAC,uEAAc;AAC3C,oBAAoB,mBAAO,CAAC,yFAAuB;AACnD,iBAAiB,mBAAO,CAAC,mFAAoB;AAC7C,wBAAwB,mBAAO,CAAC,iGAA2B;AAC3D,yBAAyB,mBAAO,CAAC,mGAA4B;AAC7D,yBAAyB,mBAAO,CAAC,mGAA4B;AAC7D,iBAAiB,mBAAO,CAAC,yEAAe;AACxC,wBAAwB,mBAAO,CAAC,uFAAsB;AACtD,uBAAuB,mBAAO,CAAC,qFAAqB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oCAAoC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,oBAAoB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gBAAgB;AAC/B,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA,gCAAgC,kBAAkB,mCAAmC,OAAO;AAC5F;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,wBAAwB;AACxB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,gCAAgC,kBAAkB,gCAAgC,OAAO;AACzF;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE;AACzE;AACA;AACA,qFAAqF;AACrF;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,kBAAkB,gCAAgC,OAAO;AAC7F;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,2CAA2C;AAC3C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mHAAmH,kBAAkB;AACrI;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,0GAA0G,kBAAkB;AAC5H;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA,iFAAiF,kBAAkB;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,oBAAoB;AACpB;AACA,sFAAsF;AACtF;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,6BAA6B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,2CAA2C;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,kBAAkB;AACrH;AACA,yCAAyC;AACzC;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,mFAAmF;AACnF;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA,gCAAgC,gBAAgB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,2CAA2C;AACnE;AACA;AACA,gCAAgC,2CAA2C;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,cAAc,0GAA0G;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,4BAA4B;AACnG,+EAA+E,gBAAgB;AAC/F,sCAAsC,cAAc;AACpD,wDAAwD,YAAY;AACpE;AACA,eAAe,aAAa;AAC5B,eAAe,cAAc;AAC7B,eAAe,sBAAsB;AACrC,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACz/Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gCAAgC,GAAG,qBAAqB;AACxD,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,wBAAwB,gCAAgC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF;AACrF;AACA,qFAAqF;AACrF,4BAA4B,uBAAuB;AACnD;AACA;AACA,yBAAyB;AACzB;AACA;AACA,4BAA4B,yBAAyB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,wBAAwB,8BAA8B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF;AACrF;AACA,+EAA+E;AAC/E;AACA,4BAA4B,uBAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mBAAmB;AAC/C;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,gCAAgC;AAChC;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,2GAA2G;AAC3G,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E,2BAA2B;AAC3B;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA,wFAAwF;AACxF;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA,wFAAwF;AACxF;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,sBAAsB;AACtB;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,oCAAoC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,4CAA4C;AAC5C,iDAAiD;AACjD,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;;;;;;;;;;;ACnUa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,kBAAkB,GAAG,cAAc,GAAG,cAAc,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,cAAc;AACzI,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,kDAAkD,mBAAO,CAAC,gEAAiB;AAC3E,2BAA2B,mBAAO,CAAC,yFAAoB;AACvD,wBAAwB,mBAAO,CAAC,mFAAiB;AACjD,mBAAmB,mBAAO,CAAC,yEAAY;AACvC,mBAAO,CAAC,6EAAW;AACnB,yBAAyB,mBAAO,CAAC,qFAAkB;AACnD;AACA;AACA;AACA;AACA,CAAC,aAAa,cAAc,cAAc;AAC1C;AACA;AACA;AACA;AACA,CAAC,YAAY,aAAa,aAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,YAAY,aAAa,aAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,YAAY,aAAa,aAAa;AACvC;AACA;AACA;AACA;AACA,CAAC,aAAa,cAAc,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA,CAAC,aAAa,cAAc,cAAc;AAC1C;AACA;AACA;AACA;AACA,CAAC,iBAAiB,kBAAkB,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D,oEAAoE;AACpE;AACA;AACA,aAAa;AACb;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA,iGAAiG;AACjG;AACA;AACA,6FAA6F;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C,2DAA2D;AAC3D,oDAAoD,gCAAgC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,iBAAiB,GAAG,eAAe;AACrH;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,wBAAwB,YAAY;AACpC;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,eAAe;AAChF,mBAAmB,aAAa,iBAAiB,kBAAkB,0BAA0B,yBAAyB,GAAG,cAAc;AACvI;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG;AACvG;AACA;;;;;;;;;;;ACtca;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB,oBAAoB,mBAAO,CAAC,gFAAmB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,iBAAiB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,oBAAoB,WAAW,EAAE,WAAW,EAAE,WAAW;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,2BAA2B;AAC3B;AACA;;;;;;;;;;;AC7Da;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB;AACtB,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,wCAAwC,mBAAO,CAAC,gDAAO;AACvD,oBAAoB,mBAAO,CAAC,gFAAmB;AAC/C,2BAA2B,mBAAO,CAAC,yFAAoB;AACvD,wBAAwB,mBAAO,CAAC,mFAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA,yEAAyE;AACzE;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,WAAW,EAAE,WAAW,EAAE,YAAY,EAAE,oBAAoB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,sDAAsD,EAAE,aAAa,EAAE,YAAY;AAC7I,OAAO,gBAAgB,GAAG,cAAc,aAAa,uCAAuC,KAAK,YAAY;AAC7G,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,oCAAoC;AACpC;AACA,2CAA2C;AAC3C,sCAAsC;AACtC;;;;;;;;;;;ACzKa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;;;;;;;;;;;AC3Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,sCAAsC,mBAAO,CAAC,gBAAK;AACnD,2BAA2B,mBAAO,CAAC,iGAA6B;AAChE,yBAAyB,mBAAO,CAAC,sFAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;;;;;;;;;;AC7Da;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe;AACf,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,sCAAsC,mBAAO,CAAC,gBAAK;AACnD,yBAAyB,mBAAO,CAAC,sFAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;;;;;;;;;;;ACzDa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB;AACnB,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,oBAAoB,mBAAO,CAAC,mFAAsB;AAClD,yBAAyB,mBAAO,CAAC,sFAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;;;;;;;;;;;ACtDa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,kDAAkD,mBAAO,CAAC,gEAAiB;AAC3E,oBAAoB,mBAAO,CAAC,mFAAsB;AAClD,yBAAyB,mBAAO,CAAC,sFAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE;AACzE;AACA;AACA,wDAAwD,iBAAiB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sBAAsB;AACtD;AACA,kCAAkC,SAAS,SAAS;AACpD,mDAAmD;AACnD,uEAAuE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qBAAqB,GAAG,mFAAmF;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;;;;;;;;;;;ACrJa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,kDAAkD,mBAAO,CAAC,gEAAiB;AAC3E,yBAAyB,mBAAO,CAAC,sFAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,gBAAgB,sBAAsB;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qBAAqB,EAAE,oBAAoB,EAAE,kBAAkB,EAAE,4BAA4B,GAAG;AAClH,2BAA2B,UAAU,EAAE,4BAA4B,aAAa;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,oCAAoC;AACpC;AACA;;;;;;;;;;;ACzHa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,oBAAoB,mBAAO,CAAC,mFAAsB;AAClD,yBAAyB,mBAAO,CAAC,sFAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;;;;;;;;;;ACtDa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,oBAAoB,mBAAO,CAAC,mFAAsB;AAClD,yBAAyB,mBAAO,CAAC,sFAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,eAAe;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,eAAe,EAAE,WAAW,EAAE,eAAe,EAAE,YAAY;AAC7E;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;;;;;;;;;;AC9Ea;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,yBAAyB,mBAAO,CAAC,sFAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,mBAAmB,wBAAwB,wBAAwB,aAAa;AAChF;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;;;;;;;;;;ACpEa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB,mBAAO,CAAC,sFAAmB;AACpD,qBAAqB,mBAAO,CAAC,qFAAc;AAC3C,kBAAkB,mBAAO,CAAC,+EAAW;AACrC,sBAAsB,mBAAO,CAAC,uFAAe;AAC7C,qBAAqB,mBAAO,CAAC,qFAAc;AAC3C,oBAAoB,mBAAO,CAAC,mFAAa;AACzC,oBAAoB,mBAAO,CAAC,mFAAa;AACzC,oBAAoB,mBAAO,CAAC,mFAAa;AACzC,oBAAoB,mBAAO,CAAC,mFAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACnBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB,GAAG,gBAAgB;AACvC,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,mBAAO,CAAC,kFAA6B,GAAG;AACxC,wCAAwC,mBAAO,CAAC,gDAAO;AACvD;AACA,gBAAgB,oGAAkC;AAClD,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAO,CAAC,yFAAuB;AAC/B,oBAAoB,mBAAO,CAAC,qEAAa;AACzC,qBAAqB,mBAAO,CAAC,yEAAe;AAC5C,qBAAqB,mBAAO,CAAC,qEAAa;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,eAAe,gBAAgB,gBAAgB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,kBAAe;AACf;AACA;AACA;;;;;;;;;;;ACxDa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,wCAAwC,mBAAO,CAAC,gDAAO;AACvD,oBAAoB,mBAAO,CAAC,kFAAoB;AAChD,qBAAqB,mBAAO,CAAC,wEAAe;AAC5C,wBAAwB,mBAAO,CAAC,wFAAuB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qGAAqG;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,uBAAuB,mBAAmB,2CAA2C;AACxK,gDAAgD,2CAA2C;AAC3F,wBAAwB;AACxB;AACA;AACA;AACA;AACA,sFAAsF,2CAA2C,gBAAgB,uBAAuB;AACxK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;;;;;;;;;;ACzMa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc;AACd,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,wCAAwC,mBAAO,CAAC,gDAAO;AACvD,mBAAmB,mBAAO,CAAC,gFAAmB;AAC9C,qBAAqB,mBAAO,CAAC,wEAAe;AAC5C,yCAAyC,mBAAO,CAAC,oFAAqB;AACtE,sBAAsB,mBAAO,CAAC,oFAAqB;AACnD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,oHAAoH,uBAAuB;AAC3I;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,yGAAyG,uBAAuB;AAChI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;;;;;;;;;;AClQa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,oBAAoB,mBAAO,CAAC,kFAAoB;AAChD;AACA;AACA;AACA,qDAAqD,mCAAmC;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,0BAA0B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;;;;;;;;;;AC5Ga;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,YAAY;AACjE;AACA;AACA;AACA;AACA,iBAAiB,YAAY,yEAAyE,YAAY;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,gCAAgC;AAChC;;;;;;;;;;;AC1Fa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,2BAA2B,GAAG,4BAA4B;AACnF;AACA,iBAAiB,mBAAO,CAAC,sBAAQ;AACjC;AACA;AACA;AACA;AACA;AACA,CAAC,2BAA2B,4BAA4B,4BAA4B;AACpF;AACA;AACA;AACA,CAAC,0BAA0B,2BAA2B,2BAA2B;AACjF;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;;;;;;;;;;;AC9Da;AACb;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB;AACpB;AACA;AACA;AACA;AACA,oBAAoB;AACpB;;;;;;;;;;;ACTa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB,GAAG,sCAAsC,GAAG,mCAAmC,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,iBAAiB,GAAG,sBAAsB,GAAG,iBAAiB,GAAG,iBAAiB;AACrO,gBAAgB,mBAAO,CAAC,iDAAO;AAC/B,yCAAyC,mBAAO,CAAC,sBAAQ;AACzD,sCAAsC,mBAAO,CAAC,gBAAK;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB,cAAc;AACnC;AACA;AACA,iCAAiC,WAAW;AAC5C;AACA,cAAc,OAAO,GAAG,WAAW,IAAI,2CAA2C,GAAG,wBAAwB;AAC7G;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,6BAA6B;AAC5D,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iGAAiG,OAAO;AACxG;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,oBAAoB,oBAAoB;AACxC;AACA;AACA,eAAe,kCAAkC,OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,oBAAoB,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,yBAAyB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,yBAAyB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;;;;;;;;;;ACjPa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB,GAAG,8BAA8B,GAAG,yBAAyB,GAAG,+BAA+B;AACxH,+BAA+B;AAC/B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;;;;;;;;;;ACnBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB;AACtB;AACA;AACA;AACA,KAAK;AACL;AACA,sBAAsB;AACtB;;;;;;;;;;;ACTa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;;;;;;;;;;;AC3Ca;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,yBAAyB,GAAG,oBAAoB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D,oBAAoB,eAAe;AACnC,qDAAqD;AACrD;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB,yBAAyB,yBAAyB;AAC3E;AACA;AACA;AACA;AACA,WAAW,kBAAkB;AAC7B,WAAW,kBAAkB;AAC7B,wBAAwB,wBAAwB;AAChD;AACA;AACA;AACA,oBAAoB,eAAe;AACnC,uDAAuD;AACvD,wDAAwD;AACxD;AACA,4DAA4D;AAC5D,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,sBAAsB;AACtB;;;;;;;;;;ACvEA;;AAEA,qBAAqB,0DAA8B;AACnD,YAAY,mBAAO,CAAC,gBAAK;;AAEzB,kBAAkB,mBAAO,CAAC,gFAAiB;AAC3C,gBAAgB,mBAAO,CAAC,4EAAe;AACvC,wBAAwB,mBAAO,CAAC,gFAAiB;AACjD,wBAAwB,mBAAO,CAAC,8FAAwB;AACxD,mBAAmB,mBAAO,CAAC,oEAAW;AACtC,eAAe,mBAAO,CAAC,0EAAc;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qCAAqC;AACrC,kBAAkB,sBAAsB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mBAAO,CAAC,8IAAiB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mBAAO,CAAC,0DAAc;AAClD,sBAAsB,iEAA8B;AACpD;AACA,0BAA0B,mBAAmB;AAC7C;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,2BAA2B;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA,2BAA2B;AAC3B,gDAAgD;AAChD,gDAAgD;AAChD;;AAEA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA,yBAAyB;AACzB;AACA;;AAEA,0BAA0B;AAC1B,+BAA+B;;AAE/B,2BAA2B;;;;;;;;;;;AC1J3B,eAAe,sFAA6B;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa;;;;;;;;;;;ACXb,qBAAqB,0DAA8B;AACnD,kBAAkB,mBAAO,CAAC,4EAAa;AACvC,sBAAsB,mBAAO,CAAC,4EAAa;AAC3C,mBAAmB,mHAAqC;;AAExD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,sCAAsC;AACtC,UAAU;AACV,gCAAgC,oCAAoC,GAAG;AACvE;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,WAAW,kBAAkB,cAAc;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,qCAAqC,kBAAkB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,iBAAiB;AACvC;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,QAAQ,mDAAmD;AAC3D;AACA;AACA;;AAEA;AACA;AACA,QAAQ,sDAAsD;AAC9D;AACA;AACA;;AAEA;AACA,sBAAsB,iBAAiB;AACvC;;AAEA;AACA;AACA,QAAQ,6DAA6D;AACrE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ,qDAAqD;AAC7D;AACA;AACA;;AAEA;AACA,sBAAsB,qBAAqB;AAC3C;;AAEA;AACA,sBAAsB,gCAAgC;AACtD;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,GAAG;AACzB;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,QAAQ,oEAAoE;AAC5E;AACA;AACA;;AAEA;AACA;AACA,QAAQ,+DAA+D;AACvE;AACA;AACA;;AAEA;AACA;AACA,QAAQ,oEAAoE;AAC5E;AACA;AACA;;AAEA;AACA;AACA,QAAQ,sDAAsD;AAC9D;AACA;AACA;;AAEA;AACA;AACA,QAAQ,sDAAsD;AAC9D;AACA;AACA;AACA;;;;;;;;;;;AC7XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;ACrDA,aAAa,mBAAO,CAAC,sEAAkB;AACvC,uBAAuB,mBAAO,CAAC,4EAAa;;AAE5C;AACA;AACA;AACA,gBAAgB;AAChB,IAAI;AACJ;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,mBAAmB;AACrC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,2CAA2C,EAAE;AAC7C;AACA;;AAEA;;;;;;;;;;;ACrLA,eAAe,sFAA6B;AAC5C,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,WAAW,mBAAO,CAAC,cAAI;AACvB,aAAa,mBAAO,CAAC,kBAAM;;AAE3B,kBAAkB,mBAAO,CAAC,4EAAa;AACvC,iBAAiB,mBAAO,CAAC,0EAAY;;AAErC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kBAAkB;AACxC;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,QAAQ;AACR;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,2BAA2B,YAAY,EAAE,GAAG;AAC5C;AACA;AACA;AACA,2BAA2B,YAAY,EAAE,GAAG;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,MAAM;AACrC;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,WAAW;AAC3D;AACA;AACA;AACA;;;;;;;;;;;ACpIA,eAAe,mBAAO,CAAC,mDAAQ;;AAE/B,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,qBAAqB;AACzC;AACA;AACA;;AAEA,oBAAoB,mBAAmB;AACvC;AACA;AACA;;AAEA,sBAAsB,yCAAyC;AAC/D;AACA;AACA;AACA,wBAAwB,qCAAqC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,6CAA6C;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,6BAA6B;AAC7B,uBAAuB;AACvB,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,gCAAgC,QAAQ,eAAe,OAAO,YAAY,QAAQ;AAClF;;;;;;;;;;;ACtNA,eAAe,mBAAO,CAAC,sBAAQ;;AAE/B,uBAAuB,mBAAO,CAAC,4EAAa;AAC5C,YAAY,mBAAO,CAAC,gEAAiB;AACrC,oBAAoB,mBAAO,CAAC,gFAAe;AAC3C,cAAc,iGAAwB;;AAEtC;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA,QAAQ,cAAc,UAAU;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAmC;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,sBAAsB,iBAAiB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qDAAqD;AACrD;AACA;AACA,iDAAiD;AACjD;AACA,SAAS,WAAW,KAAK;AACzB;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;AC3GA,eAAe,sFAA6B;AAC5C,cAAc,iGAAwB;AACtC,uBAAuB,mBAAO,CAAC,iFAAkB;AACjD,aAAa,mBAAO,CAAC,sEAAkB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,MAAM;AACrC,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,MAAM,kCAAkC,aAAa;AACtE;AACA;;AAEA;AACA,qBAAqB,kBAAkB;AACvC;AACA;AACA,uEAAuE,KAAK;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,MAAM;AACzC,UAAU;AACV,mCAAmC,MAAM;AACzC,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,UAAU;AAC7D;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B,MAAM;AACnC;AACA;AACA,6BAA6B,MAAM;AACnC;AACA;;AAEA;AACA;AACA,6BAA6B,MAAM;AACnC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,+DAA+D,UAAU;AACzE;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA,wCAAwC;AACxC;AACA;AACA;AACA,MAAM;AACN,+DAA+D,UAAU;AACzE;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,IAAI;AACtB;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,6DAA6D,UAAU;AACvE;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,MAAM;AACrC;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,MAAM;AACrC;AACA;AACA;AACA;;;;;;;;;;;ACzUA,eAAe,sFAA6B;AAC5C,iBAAiB,mBAAO,CAAC,0EAAY;AACrC,kBAAkB,mBAAO,CAAC,4EAAa;AACvC,mBAAmB,mBAAO,CAAC,gFAAe;;AAE1C,wBAAwB,mBAAO,CAAC,iGAAyB;;AAEzD,gCAAgC;AAChC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAwB,+BAA+B;AACvD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,kBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;ACrHA,eAAe,sFAA6B;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACtBA,eAAe,sFAA6B;AAC5C,iBAAiB,mBAAO,CAAC,0EAAY;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;ACpCA,aAAa,mBAAO,CAAC,iEAAU;AAC/B,YAAY,mBAAO,CAAC,gBAAK;;AAEzB,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA,6CAA6C,8BAA8B;AAC3E;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;;;;;;;;;ACjBA;;AAEA;AACA,IAAI,KAAK;AACT;AACA;;AAEA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,EAAE,kBAAkB,UAAU;;AAEtE;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gDAAgD,GAAG,GAAG,GAAG,eAAe,GAAG,GAAG,GAAG,gBAAgB,GAAG;AACpG;AACA;;;;;;;;;;;AC5DA,kBAAkB,mBAAO,CAAC,4EAAa;AACvC,uBAAuB,mBAAO,CAAC,4EAAa;;AAE5C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,mCAAmC,sBAAsB;AACzD;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,0CAA0C,KAAK;AAC/C,UAAU;AACV;AACA,0CAA0C,KAAK;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,mCAAmC;AACnC;AACA,MAAM;AACN,qCAAqC,GAAG;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,UAAU;AAC3E;AACA,4BAA4B;AAC5B;AACA,WAAW,UAAU,QAAQ,EAAE,OAAO;AACtC;AACA,KAAK;AACL;AACA,oCAAoC,WAAW;AAC/C;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,aAAa,UAAU,+BAA+B;AACrF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA,uXAAuX,GAAG,+WAA+W,GAAG;;;;;;;;;;;ACxM5uB,eAAe,mBAAO,CAAC,sBAAQ;;AAE/B;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qBAAqB,cAAc;AACnC;AACA;AACA;;AAEA;AACA,qBAAqB,sBAAsB;AAC3C;AACA;AACA;;AAEA;AACA,qBAAqB,+CAA+C;AACpE;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,6CAA6C;AACtE;AACA;AACA;;AAEA;AACA,yBAAyB,gDAAgD;AACzE;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,0CAA0C;AAC/D;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACtGa;;AAEb,gBAAgB,mBAAO,CAAC,kEAAqB;AAC7C;;AAEA,oBAAoB,mBAAO,CAAC,gEAAiB;;AAE7C,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;AACA,GAAG;;;;;;;;;;;;;;;;ACbH;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACtBY;;AAEZ,iBAAiB,mBAAO,CAAC,qEAAmB;AAC5C,eAAe,mBAAO,CAAC,iEAAiB;AACxC,gBAAgB,mBAAO,CAAC,mEAAkB;;AAE1C;AACA,oCAAoC;;AAEpC;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACzCY;;AAEZ,aAAa,mBAAO,CAAC,kBAAM;AAC3B,qBAAqB,0DAA8B;AACnD,oBAAoB,mBAAO,CAAC,wFAA6B;AACzD,iBAAiB,mBAAO,CAAC,0EAAkB;AAC3C,eAAe,mBAAO,CAAC,8EAAoB;;AAE3C;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;;AAET;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;;;;;;;;;;;ACzNY;;AAEZ,iBAAiB,mBAAO,CAAC,0EAAkB;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB,gGAAgG;AAChG,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;;;;ACvEY;;AAEZ,gBAAgB,uGAAgC;AAChD,gBAAgB,mBAAO,CAAC,+DAAc;AACtC,eAAe,mBAAO,CAAC,6DAAa;;AAEpC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA,oBAAoB,2BAA2B,OAAO;AACtD,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;;AAEpC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL,gCAAgC;;AAEhC;;AAEA;AACA,GAAG;;AAEH;AACA,oBAAoB,qBAAqB,OAAO;;AAEhD,cAAc;AACd,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA,wBAAwB;AACxB,GAAG;;AAEH;AACA;;AAEA,yBAAyB,8FAA8F,OAAO;AAC9H,GAAG;;AAEH;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;;;;AChHY;;AAEZ,qBAAqB,mBAAO,CAAC,4DAAe;AAC5C,iBAAiB,mBAAO,CAAC,0EAAkB;AAC3C,gBAAgB,uGAAgC;AAChD,gBAAgB,mBAAO,CAAC,+DAAc;;AAEtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,4BAA4B;AAChD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA,mCAAmC;;AAEnC,oBAAoB,oBAAoB;AACxC;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA,mCAAmC;;AAEnC,oBAAoB,oBAAoB;AACxC;AACA;;AAEA,sCAAsC;;AAEtC;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA,oCAAoC;;AAEpC;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;;;;;;;;;;;;AC5GY;;AAEZ,WAAW,mBAAO,CAAC,cAAI;AACvB,aAAa,mBAAO,CAAC,kBAAM;AAC3B,YAAY,mBAAO,CAAC,gBAAK;AACzB,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,qBAAqB,0DAA8B;AACnD,oBAAoB,mBAAO,CAAC,wFAA6B;AACzD,gBAAgB,mBAAO,CAAC,wEAAiB;;AAEzC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B,UAAU,4BAA4B,MAAM;AAC1E;;AAEA;AACA;AACA,8BAA8B,UAAU,0CAA0C,OAAO;AACzF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA,2BAA2B;;AAE3B;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA,uBAAuB;AACvB;AACA;;AAEA,2BAA2B;;AAE3B;AACA;AACA,GAAG;;AAEH;AACA,2BAA2B;;AAE3B,wBAAwB;;AAExB,sBAAsB;;AAEtB;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,sBAAsB;;AAEtB;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,yBAAyB;;AAEzB;;;;;;;;;;;AC7QA,kBAAkB,mBAAO,CAAC,sDAAY;;AAEtC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACrBY;;AAEZ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;ACZA,WAAW,mBAAO,CAAC,cAAI;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;AChBY;;AAEZ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,sBAAsB;AACtB;AACA,QAAQ,kBAAkB;AAC1B;;AAEA,2BAA2B;AAC3B;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;;;;;;;;;;ACpCA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACvEa;;AAEb,mBAAmB,mBAAO,CAAC,4DAAe;;AAE1C,eAAe,mBAAO,CAAC,6CAAI;;AAE3B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACda;;AAEb,WAAW,mBAAO,CAAC,4DAAe;AAClC,mBAAmB,mBAAO,CAAC,4DAAe;AAC1C,wBAAwB,mBAAO,CAAC,wEAAqB;;AAErD,iBAAiB,mBAAO,CAAC,wDAAgB;AACzC;AACA;AACA;;AAEA,sBAAsB,mBAAO,CAAC,sEAAoB;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4CAA4C,kBAAkB;AAC9D,EAAE;AACF,CAAC,oBAAoB;AACrB;;;;;;;;;;;AClCA;;AAEA;AACA;AACA;;AAEA,kBAAkB;AAClB,YAAY;AACZ,YAAY;AACZ,iBAAiB;AACjB,eAAe;AACf,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;;AAEvD;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA,iBAAiB,mBAAO,CAAC,oDAAU;;AAEnC,OAAO,YAAY;;AAEnB;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;AC3QA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAO,CAAC,sCAAI;AACpC;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,eAAe;AAC3B;AACA;AACA;AACA;;AAEA,kBAAkB,sBAAsB;AACxC;AACA,cAAc;AACd;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uCAAuC;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,cAAc,SAAS;AACvB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8CAA8C,SAAS;AACvD;AACA;AACA;AACA;;AAEA,8CAA8C,SAAS;AACvD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;;;;;;;;ACjRA;AACA;AACA;AACA;;AAEA;AACA,CAAC,+FAAwC;AACzC,EAAE;AACF,CAAC,yFAAqC;AACtC;;;;;;;;;;;ACTA;AACA;AACA;;AAEA,YAAY,mBAAO,CAAC,gBAAK;AACzB,aAAa,mBAAO,CAAC,kBAAM;;AAE3B;AACA;AACA;;AAEA,YAAY;AACZ,WAAW;AACX,kBAAkB;AAClB,YAAY;AACZ,YAAY;AACZ,iBAAiB;AACjB,eAAe;AACf,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA,cAAc;;AAEd;AACA;AACA;AACA,uBAAuB,mBAAO,CAAC,8DAAgB;;AAE/C;AACA,EAAE,cAAc;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,6DAA6D;AAC7D;;AAEA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB;AACnB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,CAAC,IAAI;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,4BAA4B;;AAEpC;AACA;AACA,iDAAiD,EAAE;AACnD,sBAAsB,WAAW,IAAI,MAAM;;AAE3C;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,iBAAiB;AAClC;AACA;AACA;;AAEA,iBAAiB,mBAAO,CAAC,oDAAU;;AAEnC,OAAO,YAAY;;AAEnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACtQa;;AAEb,aAAa,mBAAO,CAAC,4DAAe;AACpC,gBAAgB,mBAAO,CAAC,kEAAqB;AAC7C,YAAY,mBAAO,CAAC,8EAAwB;AAC5C,mBAAmB,mBAAO,CAAC,4DAAe;AAC1C,kBAAkB,mBAAO,CAAC,+DAAiB;AAC3C,qBAAqB,mBAAO,CAAC,0DAAc;AAC3C,SAAS,mBAAO,CAAC,oDAAW;AAC5B,kBAAkB,mBAAO,CAAC,0DAAc;AACxC,cAAc,mBAAO,CAAC,gDAAS;AAC/B,oBAAoB,mBAAO,CAAC,gEAAiB;AAC7C,aAAa,mBAAO,CAAC,8DAAgB;AACrC,cAAc,mBAAO,CAAC,kDAAU;AAChC,0BAA0B,mBAAO,CAAC,8EAAwB;AAC1D,iBAAiB,mBAAO,CAAC,wDAAa;AACtC,0BAA0B,mBAAO,CAAC,4EAAuB;AACzD,sBAAsB,mBAAO,CAAC,kEAAkB;AAChD,sBAAsB,mBAAO,CAAC,oEAAmB;AACjD,iBAAiB,mBAAO,CAAC,kFAA0B;;AAEnD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,UAAU,eAAe;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oEAAoE;AACpE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,oBAAoB;AACpB,sBAAsB;;AAEtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,MAAM;AACN,yBAAyB;AACzB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,0DAA0D,UAAU,eAAe;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+BAA+B;AAC/B,gCAAgC;;AAEhC,6CAA6C;;AAE7C,2CAA2C;;AAE3C;AACA;AACA,+BAA+B;;AAE/B;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,wDAAwD;AACxD;;AAEA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B,4BAA4B;AAC5B,uCAAuC;AACvC;AACA,iDAAiD;;AAEjD;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,iCAAiC;AACjC,gBAAgB,cAAc;AAC9B,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA,iCAAiC;AACjC,gCAAgC;AAChC,iCAAiC;AACjC,gBAAgB,cAAc;AAC9B,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA,2CAA2C;AAC3C,0CAA0C;AAC1C,2CAA2C;AAC3C;AACA;;AAEA;AACA;AACA,2BAA2B;AAC3B,0BAA0B;AAC1B,iDAAiD;AACjD;AACA;;AAEA,+BAA+B;;AAE/B;AACA;AACA;AACA,iCAAiC;;AAEjC;AACA;AACA;AACA;AACA,0BAA0B,QAAQ;AAClC,0BAA0B,gBAAgB;AAC1C;;AAEA;AACA,0BAA0B,QAAQ;AAClC;AACA,6DAA6D;AAC7D;;AAEA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA,+BAA+B;AAC/B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACvYa;;AAEb,sBAAsB,mBAAO,CAAC,sEAAoB;;AAElD,mBAAmB,mBAAO,CAAC,4DAAkB;AAC7C,iBAAiB,mBAAO,CAAC,wDAAgB;;AAEzC,WAAW,mBAAO,CAAC,0CAAM;;AAEzB,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,WAAW,0CAA0C;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,GAAG;AACH;AACA,yBAAyB;AACzB,GAAG;AACH;AACA;AACA;;;;;;;;;;;;ACvDa;;AAEb,WAAW,mBAAO,CAAC,wDAAa;AAChC;;AAEA;AACA;AACA,yBAAyB,mBAAO,CAAC,0EAAsB;;AAEvD;AACA;AACA;;AAEA,0BAA0B,mBAAO,CAAC,kFAA0B;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;;AAEA;;AAEA;;;;;;;;;;;;AC9CY;;AAEZ,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtBY;;AAEZ,eAAe,oDAAwB;AACvC,cAAc,mBAAO,CAAC,mDAAS;AAC/B,eAAe,mBAAO,CAAC,qDAAU;AACjC,gBAAgB,mBAAO,CAAC,uDAAW;AACnC,gBAAgB,mBAAO,CAAC,uDAAW;AACnC,oBAAoB,mBAAO,CAAC,+DAAe;AAC3C,WAAW,mBAAO,CAAC,iFAAyB;;AAE5C;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa,YAAY;;AAEzB,4CAA4C,eAAe,IAAI;AAC/D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;;AAEA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,uCAAuC,eAAe,IAAI;AAC1D;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,iBAAiB,eAAe;;AAEhC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,YAAY,UAAU;;AAEtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,aAAa,WAAW;;AAExB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yCAAyC,YAAY;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,0CAA0C,YAAY;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,aAAa,WAAW;;AAExB;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;AACA;;AAEA,cAAc,eAAY;;AAE1B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,eAAe,aAAa;;AAE5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,aAAa,WAAW;AACxB,eAAe,aAAa;AAC5B,eAAe,aAAa;;AAE5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,aAAa,WAAW;;AAExB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,aAAa,WAAW;;AAExB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,YAAY,UAAU;;AAEtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,WAAW,SAAS;;AAEpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,cAAc,YAAY;;AAE1B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,gBAAgB,cAAc;;AAE9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,YAAY;AAC7D;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,SAAS;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,YAAY;AACvD;;AAEA,aAAa,WAAW;;AAExB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,gBAAgB,cAAc;;AAE9B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,eAAe,aAAa;;AAE5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,YAAY,UAAU;;AAEtB;AACA;AACA;AACA;;AAEA;AACA,+CAA+C,YAAY;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,YAAY;AACrD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,qBAAqB;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,0BAA0B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA,sBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,kBAAkB,qBAAqB;AACvC;AACA;AACA;;AAEA;AACA,cAAc,oBAAoB;AAClC;AACA;AACA;AACA;;AAEA;AACA;;AAEA,cAAc,YAAY;;AAE1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,eAAe,aAAa;;AAE5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,UAAU;;AAEtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,eAAe,aAAa;;AAE5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,eAAe,aAAa;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,YAAY;;AAE1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,aAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,cAAc;;AAE7B;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,gBAAgB;;AAEjC;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,4BAA4B;AAC5B,0BAA0B;AAC1B,yBAAyB;AACzB,2BAA2B;AAC3B,sBAAsB;AACtB,yBAAyB;AACzB,iBAAiB;;AAEjB,cAAc;AACd;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,EAAE,oBAAoB;;AAEtB;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oBAAoB;;AAEpB,cAAc;AACd;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,EAAE,oBAAoB;;AAEtB;AACA;;AAEA,oBAAoB;;AAEpB,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,EAAE,0BAA0B;AAC5B;AACA;;AAEA,0BAA0B;;AAE1B,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,0BAA0B;AAC5B;AACA;;AAEA,0BAA0B;;AAE1B;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;;AAEA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChuDY;;AAEZ;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjDY;;AAEZ,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;;AAEA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC1DY;;AAEZ;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjDY;;AAEZ,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACtGA,aAAa,mBAAO,CAAC,sBAAQ;AAC7B;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,oBAAoB,gBAAgB;AACpC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;ACtFa;;AAEb,mBAAmB,mBAAO,CAAC,4DAAe;;AAE1C,WAAW,aAAa;AACxB;AACA;AACA;AACA,oBAAoB,SAAS,UAAU;AACvC,GAAG;AACH;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACfa;;AAEb,WAAW,kBAAkB;AAC7B;;;;;;;;;;;;ACHa;;AAEb,WAAW,aAAa;AACxB;;;;;;;;;;;;ACHa;;AAEb,WAAW,mBAAmB;AAC9B;;;;;;;;;;;;ACHa;;AAEb,WAAW,iBAAiB;AAC5B;;;;;;;;;;;;ACHa;;AAEb,WAAW,oBAAoB;AAC/B;;;;;;;;;;;;ACHa;;AAEb,WAAW,kBAAkB;AAC7B;;;;;;;;;;;;ACHa;;AAEb,WAAW,iBAAiB;AAC5B;;;;;;;;;;;ACHA;;AAEA;AACA;AACA;;AAEA,aAAa,oDAAwB;AACrC;AACA,cAAc,mBAAO,CAAC,gDAAS;AAC/B,WAAW,mBAAO,CAAC,0CAAM;AACzB,aAAa,mBAAO,CAAC,kDAAU;AAC/B,UAAU,mBAAO,CAAC,sDAAY;AAC9B,YAAY,mBAAO,CAAC,0DAAc;AAClC,YAAY,mBAAO,CAAC,4CAAO;AAC3B,eAAe,mBAAO,CAAC,gEAAiB;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,WAAW;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,IAAI;AACJ;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,iCAAiC,cAAc;;AAE/C;;AAEA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,eAAe,oDAAwB;AACvC;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;;AAEA;AACA;AACA,sCAAsC,gBAAgB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;;;;;;;;;;;AC9Va;;AAEb;;;;AAIA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,UAAU;AACjC;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,UAAU;AAC/B;;AAEA,qBAAqB,UAAU;AAC/B;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,mBAAO,CAAC,sBAAQ;;AAE5B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI,OAAO;AACX;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA,cAAc,SAAS;AACvB;AACA,cAAc,SAAS;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B,QAAQ;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC,oBAAoB,QAAQ;AAC5B;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC;AACA;AACA;AACA,qBAAqB,QAAQ;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,YAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,aAAa;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,yCAAyC;AACzC,2CAA2C;AAC3C,4DAA4D;AAC5D;AACA;AACA,gDAAgD;AAChD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,cAAc;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB;AACtB;AACA;AACA;AACA;;AAEA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,cAAc;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,SAAS;AACzB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,4BAA4B,6BAA6B;AACzD;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;;AAEA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,OAAO;AAClC,+BAA+B,OAAO;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,sCAAsC,SAAS;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,QAAQ;AAC9C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,yCAAyC;AACzC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACriDa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc,GAAG,WAAW;AAC5B;AACA;AACA,mBAAmB,mBAAO,CAAC,8DAAc;AACzC;AACA;AACA;AACA,WAAW;AACX,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,kBAAe;AACf;;;;;;;;;;;ACvNa;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,iBAAiB,GAAG,WAAW;AACnD,iCAAiC,mBAAO,CAAC,sBAAQ;AACjD,iCAAiC,mBAAO,CAAC,sBAAQ;AACjD,mBAAmB,mBAAO,CAAC,8DAAc;AACzC,iBAAiB,mBAAO,CAAC,2DAAU;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,SAAS;AAC1D;AACA;AACA,sDAAsD,SAAS;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,YAAY,YAAY;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,WAAW;AACtB,WAAW,YAAY;AACvB,WAAW,YAAY;AACvB,WAAW,YAAY;AACvB,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,YAAY;AACvB,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,YAAY,YAAY;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,WAAW;AACtB,WAAW,YAAY;AACvB,WAAW,YAAY;AACvB,WAAW,YAAY;AACvB,WAAW,YAAY;AACvB,WAAW,YAAY;AACvB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,YAAY;AACvB,WAAW,YAAY;AACvB,WAAW,YAAY;AACvB,WAAW,YAAY,OAAO;AAC9B,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ,gCAAgC;AACvD,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,iBAAiB;AACvE;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,iBAAiB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,iBAAiB;AACvE;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;;;;;;;;;;AC1fa;;AAEb,iBAAiB,mBAAO,CAAC,wDAAa;;AAEtC;AACA;;AAEA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;;AAEA;;;;;;;;;;;;;AC5Da;;AAEb,aAAa,mBAAO,CAAC,sBAAQ;;AAE7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;;;;;;ACnEa;;AAEb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oBAAoB,cAAc;AAClC;AACA;AACA,oBAAoB,cAAc;AAClC;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qCAAqC,oBAAoB;AACzD;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;;AAEA,iFAAiF,sCAAsC;;AAEvH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;ACnFa;;AAEb,qBAAqB,mBAAO,CAAC,wEAAkB;;AAE/C;;;;;;;;;;;;ACJa;;AAEb;AACA,8BAA8B;AAC9B;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;;AAEA;;AAEA;AACA,8EAA8E;AAC9E;;AAEA;;;;;;;;;;;;AC9Ba;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,SAAS,EAAE,mBAAO,EAAE,sBAAQ;AACpC,QAAQ,yBAAyB,EAAE,mBAAO,EAAE,sBAAQ;;AAEpD;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,WAAW,eAAe;AAC1B,WAAW,SAAS;AACpB,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,uCAAuC,QAAQ,kBAAkB,MAAM;AACvE;;AAEA;AACA;;AAEA,yCAAyC,YAAY;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB;AACrB,yBAAyB;AACzB;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,SAAS;AACpB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA,8BAA8B,mCAAmC,KAAK;AACtE;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,EAAE;;AAEF;;;;;;;;;;;;AC9Ka;;AAEb;;AAEA,aAAa,mBAAO,CAAC,oDAAW;AAChC,iBAAiB,mBAAO,CAAC,wDAAgB;AACzC,kBAAkB,mBAAO,CAAC,0DAAiB;AAC3C,sBAAsB,mBAAO,CAAC,sDAAe;AAC7C,mBAAmB,mBAAO,CAAC,4DAAkB;AAC7C,iBAAiB,mBAAO,CAAC,wDAAgB;AACzC,gBAAgB,mBAAO,CAAC,sDAAe;;AAEvC;;AAEA;AACA;AACA;AACA,kCAAkC,8CAA8C;AAChF,GAAG;AACH;;AAEA;AACA;AACA;AACA,UAAU;AACV,GAAG;AACH,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,IAAI;AACJ;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,EAAE;AACF;;AAEA,iBAAiB,mBAAO,CAAC,wDAAa;AACtC,eAAe,mBAAO,CAAC,oDAAW;;AAElC;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qDAAqD;AACrD,GAAG;AACH,gDAAgD;AAChD,GAAG;AACH,sDAAsD;AACtD,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW,mBAAO,CAAC,4DAAe;AAClC,aAAa,mBAAO,CAAC,8CAAQ;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtWa;;AAEb,mBAAmB,mBAAO,CAAC,4DAAe;;AAE1C;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACfa;AACb;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B,GAAG,kBAAkB,GAAG,8CAA8C,GAAG,2CAA2C,GAAG,iDAAiD,GAAG,sBAAsB,GAAG,iBAAiB,GAAG,+BAA+B,GAAG,iCAAiC,GAAG,uCAAuC,GAAG,0CAA0C,GAAG,gCAAgC,GAAG,kCAAkC,GAAG,+BAA+B,GAAG,2BAA2B,GAAG,wBAAwB,GAAG,4BAA4B,GAAG,+BAA+B,GAAG,gCAAgC,GAAG,iCAAiC,GAAG,gCAAgC,GAAG,6BAA6B,GAAG,2BAA2B,GAAG,4BAA4B,GAAG,8BAA8B,GAAG,6BAA6B,GAAG,mBAAmB,GAAG,6BAA6B,GAAG,4BAA4B,GAAG,oBAAoB,GAAG,iBAAiB,GAAG,mCAAmC,GAAG,gCAAgC,GAAG,wBAAwB,GAAG,oBAAoB,GAAG,uBAAuB,GAAG,kCAAkC,GAAG,8BAA8B,GAAG,qBAAqB,GAAG,mBAAmB,GAAG,2BAA2B,GAAG,qBAAqB,GAAG,yBAAyB,GAAG,qBAAqB,GAAG,qBAAqB,GAAG,wBAAwB,GAAG,wBAAwB,GAAG,iCAAiC,GAAG,kBAAkB,GAAG,oBAAoB;AACzgD,kCAAkC,GAAG,mCAAmC,GAAG,6CAA6C,GAAG,8CAA8C,GAAG,6CAA6C,GAAG,qBAAqB,GAAG,+BAA+B,GAAG,gCAAgC,GAAG,sCAAsC,GAAG,yCAAyC,GAAG,8BAA8B,GAAG,0BAA0B,GAAG,gCAAgC,GAAG,+BAA+B,GAAG,2BAA2B,GAAG,wBAAwB,GAAG,4BAA4B,GAAG,gCAAgC,GAAG,8CAA8C,GAAG,8CAA8C,GAAG,yBAAyB,GAAG,gCAAgC,GAAG,2BAA2B,GAAG,kCAAkC,GAAG,kBAAkB,GAAG,6BAA6B,GAAG,mBAAmB;AACx7B;AACA;AACA;AACA,oBAAoB;AACpB,kBAAkB;AAClB,iCAAiC;AACjC,wBAAwB;AACxB,wBAAwB;AACxB,qBAAqB;AACrB,qBAAqB;AACrB,yBAAyB;AACzB,qBAAqB;AACrB,2BAA2B;AAC3B,mBAAmB;AACnB,qBAAqB;AACrB,8BAA8B;AAC9B,kCAAkC;AAClC;AACA,uBAAuB;AACvB,oBAAoB;AACpB,wBAAwB;AACxB,gCAAgC;AAChC,mCAAmC;AACnC,iBAAiB;AACjB,oBAAoB;AACpB,4BAA4B;AAC5B,6BAA6B;AAC7B,mBAAmB;AACnB,6BAA6B;AAC7B,8BAA8B;AAC9B,4BAA4B;AAC5B,2BAA2B;AAC3B,6BAA6B;AAC7B,gCAAgC;AAChC;AACA,iCAAiC;AACjC,gCAAgC;AAChC,+BAA+B;AAC/B,4BAA4B;AAC5B,wBAAwB;AACxB,2BAA2B;AAC3B,+BAA+B;AAC/B,kCAAkC;AAClC,gCAAgC;AAChC,0CAA0C;AAC1C,uCAAuC;AACvC,iCAAiC;AACjC,+BAA+B;AAC/B,iBAAiB;AACjB,sBAAsB;AACtB,iDAAiD;AACjD,2CAA2C;AAC3C,8CAA8C;AAC9C,kBAAkB;AAClB,0BAA0B;AAC1B,mBAAmB;AACnB,6BAA6B;AAC7B,kBAAkB;AAClB,kCAAkC;AAClC,2BAA2B;AAC3B,gCAAgC;AAChC,yBAAyB;AACzB,8CAA8C;AAC9C,8CAA8C;AAC9C,gCAAgC;AAChC,4BAA4B;AAC5B,wBAAwB;AACxB,2BAA2B;AAC3B,+BAA+B;AAC/B,gCAAgC;AAChC,0BAA0B;AAC1B,8BAA8B;AAC9B,yCAAyC;AACzC,sCAAsC;AACtC,gCAAgC;AAChC,+BAA+B;AAC/B,qBAAqB;AACrB,6CAA6C;AAC7C,8CAA8C;AAC9C,6CAA6C;AAC7C,mCAAmC;AACnC,kCAAkC;AAClC;;;;;;;;;;;ACvFa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,YAAY,GAAG,yBAAyB,GAAG,mBAAmB,GAAG,YAAY,GAAG,uBAAuB;AACvG,cAAc,mBAAO,CAAC,iDAAO;AAC7B,mBAAO,CAAC,kFAA6B,GAAG;AACxC,mBAAO,CAAC,kFAAmB,GAAG;AAC9B,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,mBAAmB,mBAAO,CAAC,sFAAwB;AACnD;AACA;AACA;AACA,uBAAuB,wBAAwB,mBAAO,CAAC,oFAAuB;AAC9E;AACA;AACA;AACA,YAAY,wBAAwB,mBAAO,CAAC,wEAAiB;AAC7D,qBAAqB,mBAAO,CAAC,sFAAwB;AACrD,qBAAqB,mBAAO,CAAC,wEAAiB;AAC9C,qBAAqB,mBAAO,CAAC,kEAAc;AAC3C,qBAAqB,mBAAO,CAAC,oEAAe;AAC5C,qBAAqB,mBAAO,CAAC,kFAAsB;AACnD,qBAAqB,mBAAO,CAAC,oFAAuB;AACpD,qBAAqB,mBAAO,CAAC,wEAAc;AAC3C,qBAAqB,mBAAO,CAAC,0GAAkC;AAC/D,qBAAqB,mBAAO,CAAC,wEAAiB;AAC9C,qBAAqB,mBAAO,CAAC,gFAAkB;AAC/C,qBAAqB,mBAAO,CAAC,gFAAkB;AAC/C,qBAAqB,mBAAO,CAAC,4FAA2B;AACxD,qBAAqB,mBAAO,CAAC,0EAAkB;AAC/C,qBAAqB,mBAAO,CAAC,wEAAiB;AAC9C,qBAAqB,mBAAO,CAAC,sEAAgB;AAC7C,qBAAqB,mBAAO,CAAC,4FAA2B;AACxD,qBAAqB,mBAAO,CAAC,sFAAwB;AACrD,qBAAqB,mBAAO,CAAC,wEAAiB;AAC9C,qBAAqB,mBAAO,CAAC,sFAAwB;AACrD,qBAAqB,mBAAO,CAAC,wDAAS;AACtC;AACA;AACA;AACA,mBAAmB,wBAAwB,mBAAO,CAAC,gFAAqB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mBAAO,CAAC,+DAAiB;AAC/C;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,uCAAuC,uCAAuC;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,oCAAoC,mBAAO,CAAC,kHAAsC;AAClF,2CAA2C,mBAAO,CAAC,gIAA6C;AAChG;;;;;;;;;;;AC5Ea;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB,GAAG,qBAAqB,GAAG,mBAAmB,GAAG,iBAAiB,GAAG,sBAAsB;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D,CAAC,gBAAgB,iBAAiB,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA,2DAA2D,6BAA6B;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,mBAAmB,oBAAoB,oBAAoB;AAC5D;;;;;;;;;;;AC/Ea;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,2BAA2B,GAAG,sBAAsB,GAAG,iCAAiC,GAAG,kBAAkB;AACjI,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,oCAAoC,mBAAO,CAAC,gBAAK;AACjD,mBAAmB,mBAAO,CAAC,sEAAc;AACzC;AACA,eAAe,mBAAO,CAAC,oEAAU;AACjC,uBAAuB,mBAAO,CAAC,8EAAkB;AACjD,mBAAmB,mBAAO,CAAC,4EAAc;AACzC,kBAAkB,mBAAO,CAAC,oEAAa;AACvC,sBAAsB,mBAAO,CAAC,wFAAuB;AACrD,0BAA0B,mBAAO,CAAC,gGAA2B;AAC7D,wBAAwB,mBAAO,CAAC,4FAAyB;AACzD,gBAAgB,mBAAO,CAAC,gEAAW;AACnC,cAAc,mBAAO,CAAC,sEAAc;AACpC,qBAAqB,mBAAO,CAAC,oFAAqB;AAClD,gCAAgC,mBAAO,CAAC,oEAAa;AACrD,aAAa,mBAAO,CAAC,oEAAa;AAClC;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iBAAiB,kBAAkB,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gCAAgC,iCAAiC,iCAAiC;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qBAAqB,sBAAsB,sBAAsB;AAClE;AACA;AACA;AACA;AACA;AACA,CAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,kBAAkB;AAC5F;AACA;AACA;AACA;AACA,oDAAoD,gBAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0BAA0B,2BAA2B,2BAA2B;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,iCAAiC;AACjC,+BAA+B;AAC/B,uCAAuC;AACvC;AACA;AACA;AACA,2CAA2C;AAC3C;AACA,oDAAoD,eAAe;AACnE,2CAA2C,eAAe,oCAAoC,gBAAgB;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,UAAU;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8GAA8G,kBAAkB;AAChI;AACA;AACA;AACA;AACA;AACA,wBAAwB,iCAAiC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA,kHAAkH,kBAAkB;AACpI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,UAAU;AACrF;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,2EAA2E,UAAU;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,UAAU;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kIAAkI,kFAAkF;AACpN;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G,uBAAuB;AACnI;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G,uBAAuB;AACnI;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,yDAAyD,QAAQ;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,UAAU;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,2BAA2B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,uBAAuB;AACzG,YAAY,+BAA+B;AAC3C;AACA;AACA;AACA;AACA,YAAY,+BAA+B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,wBAAwB,SAAS;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA,iGAAiG;AACjG;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,SAAS;AACT,uCAAuC;AACvC;AACA;AACA,iCAAiC;AACjC;AACA;AACA,+EAA+E,kBAAkB;AACjG;AACA;AACA;AACA;AACA,uCAAuC,4BAA4B;AACnE;AACA;AACA,QAAQ,2BAA2B;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,kFAAkF;AAClF,+DAA+D;AAC/D,qCAAqC;AACrC;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD,4CAA4C;AAC5C;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6FAA6F,UAAU;AACvG;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA,6CAA6C;AAC7C,iDAAiD;AACjD,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gCAAgC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,uCAAuC;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,UAAU;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,qFAAqF,UAAU;AAC/F;AACA;AACA;AACA;AACA,yBAAyB,SAAS;AAClC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gGAAgG,uDAAuD;AACvJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,+EAA+E,kBAAkB,IAAI;AACjK;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA,6DAA6D,6CAA6C;AAC1G;AACA;AACA;AACA;AACA,yFAAyF,UAAU;AACnG;AACA;AACA;AACA;AACA,6BAA6B,SAAS;AACtC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F;AAC9F;AACA;AACA,kGAAkG;AAClG,oFAAoF;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,uEAAuE;AACvG;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,yFAAyF,UAAU;AACnG;AACA;AACA;AACA;AACA,6BAA6B,SAAS;AACtC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA,2EAA2E;AAC3E;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,uBAAuB,qHAAqH;AAC5I,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,6EAA6E,+BAA+B;AAC5G;AACA;AACA,uBAAuB,+GAA+G;AACtI;AACA;AACA;AACA;AACA;AACA,4JAA4J,kCAAkC;AAC9L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,SAAS;AACtC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,gKAAgK,kCAAkC;AAClM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,iCAAiC,SAAS;AAC1C;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,0CAA0C,0BAA0B;AACpE,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,yEAAyE,UAAU;AACnF;AACA;AACA;AACA;AACA,yBAAyB,SAAS;AAClC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,yDAAyD;AACrG;AACA,0FAA0F;AAC1F;AACA,4CAA4C,0DAA0D;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,wDAAwD;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iCAAiC;AACjC,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,6CAA6C,uDAAuD;AACpG;AACA;AACA,uBAAuB,+GAA+G;AACtI;AACA;AACA;AACA;AACA;AACA,4JAA4J,kCAAkC;AAC9L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,SAAS;AACtC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,gKAAgK,kCAAkC;AAClM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,iCAAiC,SAAS;AAC1C;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,0CAA0C,8BAA8B;AACxE,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,4BAA4B;AAC5B;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,0FAA0F,UAAU;AACpG;AACA;AACA;AACA;AACA,yBAAyB,SAAS;AAClC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,yDAAyD;AACrG;AACA;AACA,4CAA4C,yDAAyD;AACrG;AACA;AACA,4CAA4C,yDAAyD;AACrG;AACA,uCAAuC;AACvC,yFAAyF;AACzF;AACA,gDAAgD,2DAA2D;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,wDAAwD;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+FAA+F;AAC/F;AACA,gDAAgD,yDAAyD;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,wDAAwD;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,2DAA2D;AAC/G;AACA;AACA;AACA;AACA,gDAAgD,yDAAyD;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qCAAqC;AACrC,yBAAyB;AACzB;AACA,wCAAwC,mCAAmC;AAC3E,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mGAAmG;AAC9H;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,2BAA2B,8DAA8D;AACzF,aAAa;AACb;AACA;AACA;AACA,mBAAmB,mGAAmG;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F,UAAU;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,SAAS;AAClC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8GAA8G,kBAAkB;AAChI;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,mJAAmJ,aAAa,kBAAkB;AAClL;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wHAAwH,0BAA0B;AAClJ;AACA;AACA;AACA;AACA,yBAAyB,SAAS;AAClC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,qGAAqG,UAAU;AAC/G;AACA;AACA;AACA;AACA,6BAA6B,SAAS;AACtC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,gCAAgC,wCAAwC;AACxE;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D,yDAAyD;AACzD;AACA,sEAAsE;AACtE;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA,oGAAoG,mBAAmB;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,SAAS;AAC1C;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB;AACjB;;;;;;;;;;;AC9+Da;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB,GAAG,0BAA0B,GAAG,wBAAwB,GAAG,+BAA+B;AAC/G,cAAc,mBAAO,CAAC,iDAAO;AAC7B,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,mCAAmC,mBAAO,CAAC,cAAI;AAC/C,qCAAqC,mBAAO,CAAC,kBAAM;AACnD,kBAAkB,mBAAO,CAAC,oEAAa;AACvC,uBAAuB,mBAAO,CAAC,8EAAkB;AACjD,gBAAgB,mBAAO,CAAC,gEAAW;AACnC,gCAAgC,mBAAO,CAAC,oEAAa;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,oCAAoC;AACpC,gCAAgC;AAChC,wCAAwC;AACxC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,8EAA8E;AAC9E;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,8EAA8E;AAC9E;AACA;AACA,KAAK;AACL;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,uEAAuE;AACvE;AACA,sFAAsF;AACtF;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,yEAAQ,8BAA8B,CAAC;AACzE;AACA;AACA,6EAA6E;AAC7E;AACA,mDAAmD;AACnD;AACA,oCAAoC,yEAAQ,8BAA8B,CAAC;AAC3E;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,qBAAqB;AACrB;;;;;;;;;;;ACtKa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B,GAAG,uBAAuB,GAAG,uBAAuB,GAAG,4BAA4B,GAAG,sBAAsB,GAAG,uBAAuB,GAAG,0BAA0B,GAAG,kBAAkB;AAClN,cAAc,mBAAO,CAAC,iDAAO;AAC7B;AACA;AACA,qCAAqC,mBAAO,CAAC,sEAAkB;AAC/D,4CAA4C,mBAAO,CAAC,gFAAyB;AAC7E,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,4CAA4C,mBAAO,CAAC,wDAAa;AACjE,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,sBAAsB,mBAAO,CAAC,sFAAsB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iBAAiB,kBAAkB,kBAAkB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yBAAyB,0BAA0B,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB,uBAAuB,uBAAuB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE;AACzE,mFAAmF,yIAAyI;AAC5N;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA,wCAAwC,uBAAuB;AAC/D;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA,wCAAwC,uBAAuB;AAC/D;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,gMAAgM;AACrQ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA,yCAAyC,gFAAgF,eAAe;AACxI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4CAA4C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,0CAA0C;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,yDAAyD,sBAAsB;AAC/E;AACA;AACA;AACA;AACA;AACA,2CAA2C,oHAAoH;AAC/J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,2DAA2D;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,IAAI;AACzD,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;AAC1B;;;;;;;;;;;ACrtBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc;AACd,cAAc,mBAAO,CAAC,iDAAO;AAC7B,kBAAkB,mBAAO,CAAC,oEAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,cAAc;AACd;;;;;;;;;;;ACtBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,gCAAgC,GAAG,oBAAoB,GAAG,cAAc,GAAG,aAAa,GAAG,aAAa,GAAG,eAAe;AACnJ,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,kBAAkB,mBAAO,CAAC,oEAAa;AACvC,cAAc,mBAAO,CAAC,sEAAc;AACpC,uBAAuB,mBAAO,CAAC,wFAAuB;AACtD,aAAa,mBAAO,CAAC,oEAAa;AAClC,qBAAqB,mBAAO,CAAC,oFAAqB;AAClD,aAAa,mBAAO,CAAC,oEAAa;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,cAAc,eAAe,eAAe;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,YAAY,aAAa,aAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,kBAAkB;AAClD;AACA;AACA;AACA,gCAAgC,mBAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,YAAY,aAAa,aAAa;AACvC;AACA,uCAAuC,qBAAqB;AAC5D,uDAAuD,YAAY;AACnE;AACA,kBAAkB,0CAA0C;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,aAAa,cAAc,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,8BAA8B;AACpG;AACA;AACA;AACA,uDAAuD,iCAAiC;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,4CAA4C;AACtE;AACA;AACA,CAAC,mBAAmB,oBAAoB,oBAAoB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,+BAA+B,gCAAgC,gCAAgC;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,eAAe;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,GAAG;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gCAAgC,oCAAoC,YAAY;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,4BAA4B;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gCAAgC,4BAA4B,YAAY;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0BAA0B;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E;AAC1E,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,2BAA2B;AAC/G,qBAAqB,gBAAgB;AACrC,yEAAyE;AACzE,8CAA8C,oCAAoC,KAAK,oCAAoC;AAC3H,WAAW,kCAAkC;AAC7C,kDAAkD;AAClD,wFAAwF,oBAAoB,GAAG,qBAAqB;AACpI,WAAW,sBAAsB,KAAK,qBAAqB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sCAAsC;AACnE;AACA,yBAAyB,sCAAsC;AAC/D;AACA;AACA;AACA,oEAAoE;AACpE;AACA;AACA,YAAY,sCAAsC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,0HAA0H;AAC9L,qBAAqB;AACrB;AACA;AACA,sCAAsC,mBAAmB;AACzD,4BAA4B,oCAAoC,IAAI,aAAa;AACjF;AACA,2DAA2D,kCAAkC,IAAI,6CAA6C;AAC9I;AACA;AACA,uCAAuC,uCAAuC;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,wHAAwH;AAC5L,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD,wFAAwF,uHAAuH;AAC/M;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE,yGAAyG,uHAAuH;AAChO;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF,yHAAyH;AACjN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF,yHAAyH;AACjN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6GAA6G,yHAAyH;AACtO;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,kBAAkB;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kGAAkG;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,sDAAsD;AAC7I;AACA;AACA;AACA,sCAAsC;AACtC;AACA,6GAA6G;AAC7G;AACA,mCAAmC;AACnC;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA,8FAA8F;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,+EAA+E;AACtI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,+EAA+E;AACtI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA,mBAAO,CAAC,4HAAyC;AACjD;;;;;;;;;;;AC39Ca;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB,GAAG,2BAA2B,GAAG,0BAA0B,GAAG,mBAAmB,GAAG,cAAc,GAAG,aAAa,GAAG,6BAA6B,GAAG,iBAAiB,GAAG,oBAAoB;AAC9M,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,qBAAqB,mBAAO,CAAC,4DAAc;AAC3C,0CAA0C,mBAAO,CAAC,wDAAW;AAC7D,YAAY,mBAAO,CAAC,gBAAK;AACzB,uBAAuB,mBAAO,CAAC,2EAAmB;AAClD,oBAAoB,mBAAO,CAAC,kFAAoB;AAChD,qCAAqC,mBAAO,CAAC,8EAAkB;AAC/D,aAAa,mBAAO,CAAC,oEAAa;AAClC,+BAA+B,mBAAO,CAAC,kEAAY;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD,CAAC,mBAAmB,oBAAoB,oBAAoB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,0BAA0B;AAC3E;AACA;AACA;AACA,sDAAsD,yBAAyB;AAC/E;AACA;AACA;AACA,gFAAgF,oBAAoB;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gBAAgB,iBAAiB,iBAAiB;AACnD;AACA,mDAAmD,iBAAiB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,2BAA2B,oBAAoB;AAC/C;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,0BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yBAAyB,0BAA0B,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0BAA0B,2BAA2B,2BAA2B;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,yBAAyB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,qBAAqB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,kCAAkC,SAAS,8CAA8C;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,4BAA4B;AACzE;AACA,6EAA6E;AAC7E;AACA;AACA;AACA,sEAAsE,oEAAoE;AAC1I,8CAA8C,wDAAwD;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,oEAAoE;AAC1J,kDAAkD,8CAA8C,IAAI;AACpG;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,oEAAoE;AACxI,0CAA0C,wDAAwD;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,oEAAoE;AACtJ,8CAA8C,8CAA8C;AAC5F;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,kEAAkE,4CAA4C;AAC9G;AACA;AACA;AACA;AACA;AACA,kEAAkE,4CAA4C;AAC9G;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,4CAA4C;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,4CAA4C;AAC9G;AACA;AACA,SAAS;AACT;AACA,kEAAkE,4CAA4C;AAC9G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,uDAAuD;AACvD,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,4CAA4C;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,4CAA4C;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,4CAA4C;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,4CAA4C;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,4CAA4C;AAClH;AACA;AACA;AACA;AACA;AACA,kEAAkE,4CAA4C;AAC9G;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,4CAA4C;AACvH;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,4CAA4C;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,4CAA4C;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E,kEAAkE,4CAA4C;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,4CAA4C;AAC9G;AACA;AACA;AACA;AACA;AACA,8DAA8D,4CAA4C;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iGAAiG,oEAAoE;AACrK,0CAA0C,wDAAwD;AAClG;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,4CAA4C;AACtH;AACA;AACA;AACA,sEAAsE,4CAA4C;AAClH;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E,4CAA4C;AACtH;AACA;AACA;AACA,sEAAsE,4CAA4C;AAClH;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,0EAA0E,4CAA4C;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,sEAAsE,4EAA4E;AAClJ;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iGAAiG,oEAAoE;AACrK,0CAA0C,wDAAwD;AAClG;AACA;AACA;AACA;AACA;AACA,qDAAqD,oEAAoE;AACzH,8CAA8C,sBAAsB;AACpE;AACA;AACA,+DAA+D,oEAAoE;AACnI;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,iGAAiG,oEAAoE;AACrK,0CAA0C,wDAAwD;AAClG;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,oEAAoE;AAC5I,8CAA8C,yDAAyD;AACvG;AACA;AACA;AACA;AACA,oFAAoF,UAAU,kBAAkB;AAChH;AACA,kDAAkD;AAClD;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,oEAAoE;AAC7H,kDAAkD,sBAAsB;AACxE;AACA;AACA;AACA,2CAA2C;AAC3C;AACA,oIAAoI,2BAA2B;AAC/J;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,qCAAqC;AACrC;AACA,wIAAwI,2BAA2B;AACnK;AACA,kDAAkD;AAClD,2EAA2E;AAC3E;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA,oHAAoH,oEAAoE;AACxL,8CAA8C,kCAAkC;AAChF,aAAa;AACb;AACA;AACA;AACA;AACA,yGAAyG,oEAAoE;AAC7K,kDAAkD,wDAAwD;AAC1G;AACA;AACA;AACA;AACA,wEAAwE,oEAAoE;AAC5I,8CAA8C,yDAAyD;AACvG;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,oEAAoE;AAC7H,kDAAkD,sBAAsB;AACxE;AACA;AACA;AACA;AACA;AACA,oIAAoI,2BAA2B;AAC/J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,6EAA6E,oEAAoE;AACjJ,kDAAkD,kCAAkC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,oEAAoE,oEAAoE,GAAG;AAC3I,0CAA0C,yDAAyD;AACnG;AACA;AACA;AACA;AACA;AACA,iGAAiG,oEAAoE;AACrK,0CAA0C,wDAAwD;AAClG;AACA;AACA;AACA;AACA,wEAAwE,oEAAoE;AAC5I,8CAA8C,yDAAyD;AACvG;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,+DAA+D,oEAAoE;AACnI,8CAA8C,mCAAmC;AACjF;AACA;AACA;AACA,wEAAwE,oEAAoE;AAC5I,8CAA8C,yDAAyD;AACvG;AACA;AACA;AACA,oEAAoE,oEAAoE;AACxI,0CAA0C,yDAAyD;AACnG;AACA;AACA;AACA;AACA;AACA,qGAAqG,oEAAoE;AACzK,8CAA8C,wDAAwD;AACtG;AACA;AACA;AACA;AACA;AACA,wEAAwE,oEAAoE;AAC5I,8CAA8C,yDAAyD;AACvG;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,oEAAoE;AAC7H,kDAAkD,sBAAsB;AACxE;AACA;AACA,mEAAmE,4DAA4D;AAC/H;AACA;AACA,aAAa;AACb;AACA;AACA,oEAAoE,oEAAoE,GAAG;AAC3I,0CAA0C,yDAAyD;AACnG;AACA;AACA;AACA,CAAC;AACD,iBAAiB;AACjB;;;;;;;;;;;ACh5Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,GAAG,yBAAyB;AAC3C,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,uBAAuB,mBAAO,CAAC,8EAAkB;AACjD,aAAa,mBAAO,CAAC,oEAAa;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wBAAwB,yBAAyB,yBAAyB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;AACA,kFAAkF,UAAU;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,UAAU;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,8FAA8F,UAAU;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,UAAU;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,oEAAoE,sEAAsE;AAC1I;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA,SAAS;AACT;AACA,kFAAkF,iDAAiD;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,UAAU;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,UAAU;AAC5F;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F,UAAU;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,gKAAgK,kCAAkC;AAClM;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA,oKAAoK,kCAAkC;AACtM;AACA;AACA;AACA,sGAAsG;AACtG;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,uFAAuF,UAAU;AACjG;AACA;AACA;AACA;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,oDAAoD;AACtI;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF,UAAU;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,SAAS;AACtC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kIAAkI,aAAa,gCAAgC;AAC/K,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oJAAoJ,iCAAiC;AACrL;AACA;AACA;AACA;AACA,yBAAyB,SAAS;AAClC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF,mEAAmE;AACxJ,qGAAqG,mEAAmE;AACxK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,iEAAiE;AAChJ;AACA;AACA,uGAAuG,iEAAiE;AACxK;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;AACf;AACA;AACA;AACA,mBAAO,CAAC,8GAAkC;AAC1C;;;;;;;;;;;AC/lBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC;AACjC;;;;;;;;;;;ACnCa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc,mBAAO,CAAC,iDAAO;AAC7B,sCAAsC,mBAAO,CAAC,oBAAO;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD,kBAAe;AACf;;;;;;;;;;;AClQa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,GAAG,2BAA2B,GAAG,0BAA0B,GAAG,gCAAgC,GAAG,+BAA+B,GAAG,wBAAwB,GAAG,uBAAuB,GAAG,oBAAoB,GAAG,mCAAmC,GAAG,iBAAiB,GAAG,mBAAmB,GAAG,sBAAsB;AAC7U,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,oCAAoC,mBAAO,CAAC,gBAAK;AACjD,uBAAuB,mBAAO,CAAC,+EAAmB;AAClD,mBAAmB,mBAAO,CAAC,6EAAe;AAC1C,gBAAgB,mBAAO,CAAC,iEAAY;AACpC,uBAAuB,mBAAO,CAAC,yFAAwB;AACvD,aAAa,mBAAO,CAAC,qEAAc;AACnC,+BAA+B,mBAAO,CAAC,mEAAa;AACpD,gCAAgC,mBAAO,CAAC,qEAAc;AACtD;AACA,eAAe,mBAAO,CAAC,qEAAU;AACjC,yCAAyC,mBAAO,CAAC,yEAAY;AAC7D;AACA;AACA;AACA;AACA;AACA,CAAC,oDAAoD;AACrD;AACA;AACA;AACA;AACA;AACA,CAAC,0CAA0C;AAC3C;AACA;AACA;AACA;AACA,CAAC,wFAAwF;AACzF;AACA;AACA;AACA;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8DAA8D;AAC/D;AACA;AACA;AACA;AACA;AACA,CAAC,oDAAoD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qBAAqB,sBAAsB,sBAAsB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gBAAgB,iBAAiB,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kCAAkC,mCAAmC,mCAAmC;AACzG;AACA;AACA;AACA;AACA,CAAC,sCAAsC;AACvC;AACA;AACA;AACA;AACA;AACA,CAAC,wFAAwF;AACzF;AACA;AACA;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0CAA0C;AAC3C;AACA;AACA;AACA;AACA;AACA,6FAA6F;AAC7F,CAAC,8DAA8D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,mBAAmB,oBAAoB,oBAAoB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB,uBAAuB,uBAAuB;AACrE;AACA;AACA;AACA;AACA,CAAC,wEAAwE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uBAAuB,wBAAwB,wBAAwB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kDAAkD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oCAAoC;AACrC;AACA;AACA;AACA;AACA,CAAC,4CAA4C;AAC7C;AACA;AACA;AACA;AACA,iFAAiF;AACjF,CAAC,kDAAkD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kEAAkE;AACnE;AACA;AACA;AACA;AACA;AACA,CAAC,oDAAoD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kFAAkF;AACnF;AACA;AACA;AACA;AACA,CAAC,kDAAkD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sDAAsD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0DAA0D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0DAA0D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B,+BAA+B,+BAA+B;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,+BAA+B,gCAAgC,gCAAgC;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yBAAyB,0BAA0B,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,yCAAyC;AACzC,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,QAAQ,8FAA8F;AACpL,wBAAwB,yCAAyC;AACjE;AACA;AACA;AACA;AACA,qEAAqE;AACrE,qHAAqH;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8GAA8G;AAC9G;AACA;AACA;AACA,8DAA8D,oCAAoC;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8GAA8G;AAC9G;AACA;AACA;AACA,mIAAmI;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,yBAAyB;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,yBAAyB;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,gDAAgD;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2IAA2I;AAC3I;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,2BAA2B,qBAAqB;AAC7D;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,oCAAoC;AACxG;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA,qEAAqE,2BAA2B;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;;;;;;;;;;;AC//Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B,GAAG,sBAAsB,GAAG,gCAAgC,GAAG,+BAA+B,GAAG,0BAA0B,GAAG,0BAA0B;AACnL,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,uBAAuB,mBAAO,CAAC,+EAAmB;AAClD,mBAAmB,mBAAO,CAAC,6EAAe;AAC1C,gBAAgB,mBAAO,CAAC,iEAAY;AACpC,uBAAuB,mBAAO,CAAC,yFAAwB;AACvD,+BAA+B,mBAAO,CAAC,mEAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,2BAA2B;AACnC;AACA;AACA;AACA;AACA,CAAC,yBAAyB,0BAA0B,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yBAAyB,0BAA0B,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8DAA8D;AAC/D;AACA;AACA;AACA;AACA;AACA,CAAC,oDAAoD;AACrD;AACA;AACA;AACA;AACA;AACA,CAAC,8FAA8F;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B,+BAA+B,+BAA+B;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,+BAA+B,gCAAgC,gCAAgC;AAChG;AACA;AACA;AACA,CAAC,8FAA8F;AAC/F;AACA;AACA;AACA;AACA;AACA,CAAC,gGAAgG;AACjG;AACA;AACA;AACA;AACA,CAAC,4EAA4E;AAC7E;AACA;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA;AACA;AACA,yGAAyG;AACzG,CAAC,8DAA8D;AAC/D;AACA;AACA;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA,CAAC,8FAA8F;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qBAAqB,sBAAsB,sBAAsB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,4BAA4B,IAAI,8BAA8B;AACzG,6CAA6C,mCAAmC;AAChF,6BAA6B,0CAA0C,yBAAyB,mCAAmC;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4IAA4I,+BAA+B;AAC3K;AACA,oDAAoD;AACpD;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,yCAAyC;AACjE;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA,SAAS;AACT,8EAA8E,QAAQ,8FAA8F;AACpL,wBAAwB,yCAAyC;AACjE;AACA,8EAA8E,QAAQ,8FAA8F;AACpL;AACA;AACA;AACA;AACA;AACA,sFAAsF,UAAU;AAChG;AACA;AACA;AACA;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,wBAAwB,yCAAyC;AACjE;AACA,8EAA8E,QAAQ,8FAA8F;AACpL,wBAAwB,yCAAyC;AACjE;AACA,8EAA8E,QAAQ,8FAA8F;AACpL,wBAAwB,yCAAyC;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA,4DAA4D;AAC5D,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,UAAU;AAC3F;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,UAAU;AAC3F;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kEAAkE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,qCAAqC;AACrC;AACA;AACA,kHAAkH;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,YAAY,yHAAyH;AAC7K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,+DAA+D;AACvG;AACA;AACA;AACA;AACA,wCAAwC,wEAAwE;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,wCAAwC,qEAAqE;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;;;;;;;;;;;AC9zBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc,mBAAO,CAAC,iDAAO;AAC7B,qBAAqB,mBAAO,CAAC,qEAAU;AACvC,qBAAqB,mBAAO,CAAC,yEAAY;AACzC,qBAAqB,mBAAO,CAAC,+FAAuB;AACpD,qBAAqB,mBAAO,CAAC,+FAAuB;AACpD;;;;;;;;;;;ACPa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kCAAkC,GAAG,wCAAwC,GAAG,sCAAsC;AACtH,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,oBAAoB,mBAAO,CAAC,mFAAqB;AACjD,uBAAuB,mBAAO,CAAC,yFAAwB;AACvD,aAAa,mBAAO,CAAC,qEAAc;AACnC,gCAAgC,mBAAO,CAAC,qEAAc;AACtD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,uBAAuB,mBAAO,CAAC,+EAAmB;AAClD,+BAA+B,mBAAO,CAAC,mEAAa;AACpD;AACA;AACA;AACA;AACA,CAAC,8HAA8H;AAC/H;AACA;AACA;AACA;AACA,CAAC,gGAAgG;AACjG;AACA;AACA;AACA;AACA,CAAC,wCAAwC;AACzC;AACA;AACA;AACA;AACA,CAAC,wDAAwD;AACzD;AACA;AACA;AACA,CAAC,4EAA4E;AAC7E;AACA;AACA;AACA,CAAC,4FAA4F;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8EAA8E;AAC/E;AACA;AACA;AACA;AACA;AACA,CAAC,wEAAwE;AACzE;AACA;AACA;AACA;AACA;AACA,CAAC,8EAA8E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oDAAoD;AACrD;AACA;AACA;AACA;AACA,CAAC,kFAAkF;AACnF;AACA;AACA;AACA,CAAC,8FAA8F;AAC/F;AACA;AACA;AACA;AACA;AACA,CAAC,0FAA0F;AAC3F;AACA;AACA;AACA;AACA;AACA,8BAA8B,kCAAkC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qCAAqC,sCAAsC,sCAAsC;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uCAAuC,wCAAwC,wCAAwC;AACxH;AACA;AACA,wCAAwC,uCAAuC;AAC/E,QAAQ,iCAAiC;AACzC,8BAA8B,0BAA0B,KAAK,iCAAiC;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,gDAAgD;AACjH,IAAI,6CAA6C;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,sCAAsC;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F;AAC5F;AACA;AACA;AACA;AACA,qBAAqB,+BAA+B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,+BAA+B;AAC3E;AACA,OAAO,kCAAkC;AACzC,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,8CAA8C;AACtG;AACA;AACA,+DAA+D,oEAAoE;AACnI,qCAAqC,oEAAoE;AACzG,KAAK,6EAA6E;AAClF,qDAAqD,0EAA0E;AAC/H,kBAAkB,+EAA+E;AACjG;AACA,gBAAgB,2DAA2D;AAC3E,mDAAmD,2CAA2C;AAC9F,6EAA6E,sEAAsE;AACnJ,8DAA8D;AAC9D;AACA,sDAAsD,iDAAiD;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,kCAAkC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,gDAAgD;AACnE,WAAW,6CAA6C;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,oCAAoC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2GAA2G;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,iCAAiC;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oGAAoG;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,aAAa;AACb;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,uCAAuC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+KAA+K;AAC/K;AACA;AACA,eAAe,sDAAsD;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mJAAmJ;AACnJ;AACA,aAAa;AACb;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+JAA+J;AAC/J,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G,uBAAuB;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC;AAClC;;;;;;;;;;;ACp2Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,GAAG,8BAA8B,GAAG,6BAA6B;AACzF,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,eAAe,mBAAO,CAAC,qEAAW;AAClC,uBAAuB,mBAAO,CAAC,+EAAmB;AAClD,mBAAmB,mBAAO,CAAC,6EAAe;AAC1C,gBAAgB,mBAAO,CAAC,iEAAY;AACpC,uBAAuB,mBAAO,CAAC,yFAAwB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,6BAA6B,6BAA6B;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6BAA6B,8BAA8B,8BAA8B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,sBAAsB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,MAAM;AAC9B;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA,2BAA2B,sDAAsD;AACjF;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,4HAA4H;AAC5H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oHAAoH,UAAU;AAC9H;AACA;AACA;AACA;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,UAAU;AAC9F;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,yCAAyC;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,UAAU;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F,UAAU;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,UAAU;AACtG;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,UAAU;AAC9F;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,kGAAkG;AAC3I,6DAA6D,uCAAuC;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA,CAAC;AACD,wBAAwB;AACxB;;;;;;;;;;;ACptBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gCAAgC,GAAG,6BAA6B;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,6BAA6B,6BAA6B;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;;;;;;;;;;;ACvBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,0BAA0B;AAC1B,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uBAAuB,mBAAO,CAAC,+EAAmB;AAClD,gBAAgB,mBAAO,CAAC,iEAAY;AACpC,yBAAyB,mBAAO,CAAC,6FAAoB;AACrD;AACA;AACA;AACA,iCAAiC,wBAAwB;AACzD;AACA;AACA;AACA;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,+BAA+B,cAAc,sBAAsB;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,cAAc,GAAG;AAClD;AACA;AACA;AACA,CAAC;AACD,0BAA0B;AAC1B;;;;;;;;;;;ACtGa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,GAAG,8BAA8B,GAAG,+BAA+B,GAAG,wBAAwB,GAAG,8BAA8B,GAAG,qBAAqB,GAAG,uBAAuB,GAAG,mBAAmB,GAAG,sBAAsB,GAAG,kBAAkB;AAC7Q,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,uBAAuB,mBAAO,CAAC,+EAAmB;AAClD,mBAAmB,mBAAO,CAAC,6EAAe;AAC1C,gBAAgB,mBAAO,CAAC,iEAAY;AACpC,+BAA+B,mBAAO,CAAC,mEAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sDAAsD;AACvD;AACA;AACA;AACA;AACA,CAAC,8EAA8E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iBAAiB,kBAAkB,kBAAkB;AACtD;AACA;AACA;AACA;AACA,CAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4DAA4D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qBAAqB,sBAAsB,sBAAsB;AAClE;AACA;AACA;AACA;AACA;AACA,CAAC,4DAA4D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kCAAkC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA,CAAC,gGAAgG;AACjG;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wFAAwF;AACzF;AACA;AACA;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB,uBAAuB,uBAAuB;AACrE;AACA;AACA;AACA;AACA;AACA,6FAA6F;AAC7F,CAAC,8DAA8D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sDAAsD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oBAAoB,qBAAqB,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6BAA6B,8BAA8B,8BAA8B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA,oCAAoC;AACpC,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,wHAAwH;AACzJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG,UAAU;AACjH;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,iCAAiC,qCAAqC;AACtE;AACA;AACA;AACA;AACA;AACA,0BAA0B,qCAAqC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iGAAiG;AAClI,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wHAAwH,UAAU;AAClI;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA,iCAAiC,+GAA+G;AAChJ,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,4IAA4I;AACjL;AACA;AACA;AACA;AACA,qCAAqC,uHAAuH;AAC5J;AACA,qFAAqF;AACrF;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C,iCAAiC,gFAAgF;AACjH,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,uFAAuF;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG,UAAU;AAChH;AACA;AACA;AACA;AACA;AACA;AACA,gIAAgI,UAAU;AAC1I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF,UAAU;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E;AAC3E;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,IAAI;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA,qEAAqE,wBAAwB;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qBAAqB;AACtB,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6BAA6B,8BAA8B,8BAA8B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,kDAAkD;AAClD,gEAAgE;AAChE;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA,oEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,oEAAoE;AACpE,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA,wBAAwB,UAAU;AAClC,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;;;;;;;;;;;ACpuCa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc,mBAAO,CAAC,iDAAO;AAC7B,qBAAqB,mBAAO,CAAC,iFAAc;AAC3C,qBAAqB,mBAAO,CAAC,iHAA8B;AAC3D,qBAAqB,mBAAO,CAAC,6FAAoB;AACjD,qBAAqB,mBAAO,CAAC,6FAAoB;AACjD,qBAAqB,mBAAO,CAAC,iGAAsB;AACnD;;;;;;;;;;;ACRa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,4BAA4B,GAAG,wBAAwB;AACvD,cAAc,mBAAO,CAAC,iDAAO;AAC7B,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,uBAAuB,mBAAO,CAAC,+EAAmB;AAClD,gBAAgB,mBAAO,CAAC,iEAAY;AACpC,+BAA+B,mBAAO,CAAC,mEAAa;AACpD,yBAAyB,mBAAO,CAAC,6FAAoB;AACrD;AACA;AACA;AACA;AACA,CAAC,kFAAkF;AACnF;AACA;AACA;AACA,CAAC,gDAAgD;AACjD;AACA;AACA;AACA;AACA;AACA,CAAC,kEAAkE;AACnE;AACA;AACA;AACA;AACA;AACA,CAAC,8EAA8E;AAC/E;AACA;AACA;AACA,CAAC,sEAAsE;AACvE;AACA;AACA;AACA,CAAC,sCAAsC;AACvC;AACA;AACA;AACA,CAAC,gDAAgD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,uBAAuB,wBAAwB,wBAAwB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E;AAC3E,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,cAAc;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,cAAc;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,cAAc;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,cAAc;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F;AAC1F;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,oDAAoD;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD,4BAA4B;AAC5B;;;;;;;;;;;AC7Ma;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,GAAG,wBAAwB,GAAG,wBAAwB,GAAG,sBAAsB,GAAG,YAAY,GAAG,wBAAwB,GAAG,eAAe,GAAG,eAAe,GAAG,aAAa,GAAG,aAAa,GAAG,aAAa,GAAG,YAAY,GAAG,oBAAoB;AAC3Q,cAAc,mBAAO,CAAC,iDAAO;AAC7B,gCAAgC,mBAAO,CAAC,qEAAc;AACtD,qCAAqC,mBAAO,CAAC,+EAAmB;AAChE,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qBAAqB,sBAAsB,sBAAsB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,YAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,YAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,mDAAmD,gCAAgC,GAAG;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD,wDAAwD;AACxD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,6BAA6B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2F;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,mCAAmC;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA,CAAC;AACD,wBAAwB;AACxB;;;;;;;;;;;AC35Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,4BAA4B,GAAG,0BAA0B,GAAG,8BAA8B,GAAG,iCAAiC,GAAG,wBAAwB,GAAG,6BAA6B,GAAG,mBAAmB,GAAG,wBAAwB,GAAG,sCAAsC,GAAG,iBAAiB,GAAG,cAAc,GAAG,iBAAiB;AAC5U,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,oCAAoC,mBAAO,CAAC,gBAAK;AACjD,qCAAqC,mBAAO,CAAC,+EAAmB;AAChE,yBAAyB,mBAAO,CAAC,6FAAoB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gBAAgB,iBAAiB,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,aAAa,cAAc,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gBAAgB,iBAAiB,iBAAiB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,qCAAqC,sCAAsC,sCAAsC;AAClH;AACA;AACA,oCAAoC,yCAAyC,QAAQ,2BAA2B;AAChH;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,qCAAqC;AACjE,4BAA4B,4CAA4C;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kCAAkC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0CAA0C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,6BAA6B,6BAA6B;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,cAAc;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,cAAc;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,cAAc;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,cAAc;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,uDAAuD;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,gCAAgC,oEAAoE,QAAQ;AACvK;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kCAAkC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA,qFAAqF;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,UAAU;AAC5F;AACA;AACA;AACA;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gCAAgC,iCAAiC,iCAAiC;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6BAA6B,8BAA8B,8BAA8B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,qCAAqC;AACrC,mCAAmC;AACnC;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,cAAc;AACvF;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,cAAc;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA,aAAa;AACb;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD,SAAS,UAAU;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,cAAc;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sHAAsH;AACtH;AACA;AACA,aAAa;AACb;AACA,8FAA8F;AAC9F;AACA;AACA;AACA,eAAe,4BAA4B,gBAAgB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,+BAA+B;AAChE;AACA;AACA;AACA;AACA;AACA,0DAA0D,uCAAuC,OAAO;AACxG,oEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G;AAC5G;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B;AAC5B;;;;;;;;;;;AC93Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc,mBAAO,CAAC,iDAAO;AAC7B,qBAAqB,mBAAO,CAAC,qGAAwB;AACrD,qBAAqB,mBAAO,CAAC,6FAAoB;AACjD,qBAAqB,mBAAO,CAAC,6FAAoB;AACjD;;;;;;;;;;;ACNa;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB,GAAG,0CAA0C,GAAG,kCAAkC,GAAG,kCAAkC,GAAG,gCAAgC,GAAG,uBAAuB,GAAG,wBAAwB,GAAG,gCAAgC,GAAG,+BAA+B,GAAG,kBAAkB,GAAG,mCAAmC,GAAG,0BAA0B,GAAG,sBAAsB,GAAG,uCAAuC,GAAG,iCAAiC,GAAG,0BAA0B,GAAG,wBAAwB,GAAG,sBAAsB,GAAG,qBAAqB,GAAG,4CAA4C,GAAG,gDAAgD,GAAG,gCAAgC,GAAG,gCAAgC,GAAG,gBAAgB,GAAG,+BAA+B,GAAG,2BAA2B,GAAG,8BAA8B,GAAG,8BAA8B,GAAG,0BAA0B,GAAG,6BAA6B,GAAG,oCAAoC,GAAG,mBAAmB,GAAG,kBAAkB,GAAG,oBAAoB,GAAG,qBAAqB,GAAG,4BAA4B,GAAG,6BAA6B,GAAG,kBAAkB,GAAG,qBAAqB,GAAG,0BAA0B,GAAG,6BAA6B,GAAG,+BAA+B,GAAG,wBAAwB,GAAG,wBAAwB,GAAG,cAAc,GAAG,2BAA2B,GAAG,sBAAsB,GAAG,0BAA0B,GAAG,wCAAwC,GAAG,8BAA8B;AAClgD,YAAY,GAAG,uBAAuB,GAAG,4BAA4B,GAAG,yCAAyC,GAAG,2BAA2B,GAAG,wBAAwB,GAAG,wBAAwB,GAAG,oBAAoB,GAAG,mBAAmB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,aAAa,GAAG,uBAAuB,GAAG,uBAAuB,GAAG,qBAAqB,GAAG,sBAAsB,GAAG,gBAAgB,GAAG,kBAAkB,GAAG,WAAW,GAAG,2BAA2B,GAAG,oBAAoB,GAAG,mCAAmC,GAAG,iBAAiB,GAAG,wBAAwB,GAAG,sBAAsB,GAAG,4BAA4B,GAAG,+BAA+B,GAAG,wBAAwB,GAAG,uBAAuB,GAAG,8BAA8B,GAAG,iCAAiC,GAAG,4BAA4B,GAAG,kCAAkC,GAAG,oBAAoB,GAAG,oCAAoC,GAAG,kCAAkC,GAAG,mBAAmB,GAAG,2BAA2B,GAAG,oBAAoB,GAAG,uCAAuC,GAAG,8BAA8B,GAAG,8BAA8B,GAAG,gCAAgC,GAAG,wBAAwB,GAAG,mBAAmB,GAAG,wBAAwB,GAAG,0BAA0B,GAAG,wBAAwB,GAAG,+BAA+B,GAAG,uBAAuB;AAC12C,kBAAkB,GAAG,oBAAoB,GAAG,yBAAyB,GAAG,2CAA2C,GAAG,6CAA6C,GAAG,4BAA4B,GAAG,2BAA2B,GAAG,wCAAwC,GAAG,iBAAiB,GAAG,mBAAmB,GAAG,qCAAqC,GAAG,+BAA+B,GAAG,mBAAmB,GAAG,0BAA0B,GAAG,qBAAqB,GAAG,oBAAoB,GAAG,mBAAmB,GAAG,YAAY,GAAG,mBAAmB,GAAG,+BAA+B,GAAG,uBAAuB,GAAG,kBAAkB,GAAG,iBAAiB,GAAG,uBAAuB,GAAG,oBAAoB,GAAG,mBAAmB,GAAG,mBAAmB,GAAG,8BAA8B,GAAG,UAAU,GAAG,yBAAyB,GAAG,2BAA2B,GAAG,8BAA8B,GAAG,mBAAmB,GAAG,uCAAuC,GAAG,6BAA6B,GAAG,kCAAkC,GAAG,mCAAmC,GAAG,qCAAqC,GAAG,YAAY,GAAG,YAAY,GAAG,2BAA2B,GAAG,sBAAsB,GAAG,aAAa,GAAG,8BAA8B,GAAG,4BAA4B,GAAG,oBAAoB,GAAG,wBAAwB,GAAG,4BAA4B,GAAG,+BAA+B,GAAG,gCAAgC;AACr3C,iCAAiC,GAAG,iDAAiD,GAAG,2DAA2D,GAAG,6CAA6C,GAAG,yCAAyC,GAAG,4CAA4C,GAAG,2BAA2B,GAAG,6BAA6B,GAAG,uBAAuB,GAAG,sBAAsB,GAAG,wBAAwB,GAAG,oBAAoB,GAAG,mBAAmB,GAAG,oBAAoB,GAAG,6BAA6B,GAAG,wBAAwB,GAAG,qBAAqB,GAAG,qBAAqB,GAAG,0BAA0B,GAAG,gBAAgB,GAAG,sBAAsB,GAAG,qBAAqB,GAAG,sBAAsB,GAAG,qBAAqB,GAAG,yBAAyB,GAAG,iCAAiC,GAAG,kBAAkB,GAAG,0BAA0B,GAAG,8BAA8B,GAAG,sBAAsB,GAAG,gCAAgC,GAAG,mBAAmB,GAAG,6BAA6B,GAAG,yBAAyB,GAAG,oBAAoB,GAAG,kCAAkC,GAAG,sCAAsC,GAAG,gCAAgC,GAAG,4CAA4C,GAAG,wCAAwC,GAAG,iCAAiC,GAAG,kCAAkC,GAAG,+BAA+B,GAAG,kBAAkB,GAAG,oBAAoB,GAAG,qBAAqB,GAAG,yBAAyB,GAAG,6BAA6B,GAAG,iBAAiB,GAAG,yBAAyB;AACzgD,yBAAyB,GAAG,sBAAsB,GAAG,yBAAyB,GAAG,cAAc,GAAG,kBAAkB,GAAG,2BAA2B,GAAG,eAAe,GAAG,iBAAiB,GAAG,oCAAoC,GAAG,kCAAkC,GAAG,oCAAoC,GAAG,+BAA+B,GAAG,qBAAqB,GAAG,aAAa,GAAG,kBAAkB,GAAG,oBAAoB,GAAG,+BAA+B,GAAG,8BAA8B,GAAG,0BAA0B,GAAG,8BAA8B,GAAG,+BAA+B,GAAG,6BAA6B,GAAG,+BAA+B,GAAG,uBAAuB,GAAG,yBAAyB,GAAG,uBAAuB,GAAG,8BAA8B,GAAG,sBAAsB,GAAG,wBAAwB,GAAG,yCAAyC,GAAG,iCAAiC,GAAG,iCAAiC,GAAG,+BAA+B,GAAG,sBAAsB,GAAG,uBAAuB,GAAG,2CAA2C,GAAG,yBAAyB,GAAG,wBAAwB,GAAG,8BAA8B,GAAG,eAAe,GAAG,iBAAiB,GAAG,yCAAyC,GAAG,4CAA4C,GAAG,+CAA+C,GAAG,mCAAmC,GAAG,iCAAiC,GAAG,oCAAoC,GAAG,wBAAwB,GAAG,4CAA4C,GAAG,oCAAoC;AAC/gD,2BAA2B,GAAG,gCAAgC,GAAG,wBAAwB,GAAG,kBAAkB,GAAG,qBAAqB,GAAG,4BAA4B;AACrK,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uBAAuB,mBAAO,CAAC,+EAAmB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2CAA2C,kCAAkC;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;;;;;;;;;;;ACzvKa;AACb;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,2BAA2B,GAAG,uBAAuB,GAAG,eAAe,GAAG,cAAc,GAAG,uBAAuB,GAAG,iBAAiB,GAAG,oBAAoB,GAAG,kBAAkB,GAAG,qBAAqB,GAAG,sBAAsB,GAAG,mBAAmB,GAAG,iBAAiB,GAAG,kBAAkB,GAAG,wBAAwB,GAAG,mBAAmB,GAAG,sBAAsB,GAAG,8BAA8B,GAAG,oBAAoB,GAAG,wBAAwB,GAAG,sBAAsB,GAAG,yBAAyB,GAAG,cAAc,GAAG,aAAa,GAAG,WAAW,GAAG,gBAAgB,GAAG,YAAY,GAAG,mBAAmB,GAAG,qCAAqC,GAAG,qBAAqB,GAAG,kBAAkB,GAAG,4BAA4B,GAAG,2BAA2B,GAAG,iCAAiC,GAAG,iCAAiC,GAAG,2BAA2B,GAAG,qBAAqB,GAAG,qBAAqB,GAAG,2BAA2B,GAAG,eAAe,GAAG,6BAA6B,GAAG,iBAAiB,GAAG,mBAAmB,GAAG,wBAAwB,GAAG,mBAAmB,GAAG,mCAAmC,GAAG,wBAAwB,GAAG,4BAA4B,GAAG,qBAAqB,GAAG,kBAAkB;AACptC,sBAAsB,GAAG,cAAc,GAAG,qBAAqB,GAAG,qBAAqB,GAAG,kBAAkB,GAAG,aAAa,GAAG,cAAc,GAAG,mCAAmC,GAAG,uBAAuB,GAAG,uBAAuB,GAAG,kBAAkB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,kBAAkB,GAAG,+BAA+B,GAAG,qBAAqB,GAAG,qBAAqB,GAAG,cAAc,GAAG,mCAAmC,GAAG,kCAAkC,GAAG,eAAe,GAAG,mBAAmB,GAAG,oBAAoB,GAAG,aAAa,GAAG,oBAAoB,GAAG,YAAY,GAAG,oBAAoB;AACnoB,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uBAAuB,mBAAO,CAAC,+EAAmB;AAClD,gBAAgB,mBAAO,CAAC,iEAAY;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;AACA;;;;;;;;;;;ACjpDa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc,mBAAO,CAAC,iDAAO;AAC7B,qBAAqB,mBAAO,CAAC,gHAA6B;AAC1D,qBAAqB,mBAAO,CAAC,kGAAsB;AACnD;;;;;;;;;;;ACLa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB,GAAG,uBAAuB;AAC/C,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,0CAA0C,mBAAO,CAAC,wDAAW;AAC7D,qCAAqC,mBAAO,CAAC,kBAAM;AACnD,oBAAoB,mBAAO,CAAC,mFAAqB;AACjD,mBAAmB,mBAAO,CAAC,4EAAc;AACzC;AACA;AACA,sBAAsB,mBAAO,CAAC,qEAAuB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB,uBAAuB,uBAAuB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,QAAQ;AACvB,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+FAA+F,UAAU;AACzG;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,iGAAiG,UAAU;AAC3G;AACA;AACA;AACA;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,gGAAgG,UAAU;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,oBAAoB,UAAU;AAClH;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,EAAE,MAAM,EAAE,aAAa,EAAE;AAC5E;AACA,CAAC;AACD,qBAAqB;AACrB;;;;;;;;;;;ACtTa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB;AACzB,cAAc,mBAAO,CAAC,iDAAO;AAC7B,qCAAqC,mBAAO,CAAC,kBAAM;AACnD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,mBAAmB,mBAAO,CAAC,4EAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F;AAC5F,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2BAA2B;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,iEAAiE;AACjH;AACA;AACA;AACA;AACA,SAAS;AACT,2EAA2E;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA,sCAAsC;AACtC,kEAAkE,yEAAyE;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;AACzB;;;;;;;;;;;ACrPa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB,cAAc,mBAAO,CAAC,iDAAO;AAC7B;AACA;AACA,6CAA6C,mBAAO,CAAC,qEAAc;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;;;;;;;;;;;AC3Ca;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB;AACvB,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,qCAAqC,mBAAO,CAAC,kBAAM;AACnD,mBAAmB,mBAAO,CAAC,4EAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,gCAAgC;AAChC,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C,yCAAyC;AACzC;AACA;AACA;AACA;AACA,+CAA+C;AAC/C,yCAAyC;AACzC;AACA;AACA;AACA,kHAAkH;AAClH,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;;;;;;;;;;;ACjHa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,GAAG,0BAA0B,GAAG,mBAAmB;AAClF,cAAc,mBAAO,CAAC,iDAAO;AAC7B,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,uBAAuB,mBAAO,CAAC,+EAAmB;AAClD,gBAAgB,mBAAO,CAAC,iEAAY;AACpC,+BAA+B,mBAAO,CAAC,mEAAa;AACpD;AACA;AACA;AACA;AACA,CAAC,gDAAgD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB,mBAAmB,mBAAmB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yBAAyB,0BAA0B,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,mBAAmB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,sCAAsC,8CAA8C;AACpF;AACA;AACA;AACA,0CAA0C,2CAA2C;AACrF;AACA;AACA;AACA;AACA,CAAC;AACD,+BAA+B;AAC/B;;;;;;;;;;;AClIa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa;AACb,cAAc,mBAAO,CAAC,iDAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,UAAU;AAC1F;AACA;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,oFAAoF,UAAU;AAC9F;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,aAAa;AACb;;;;;;;;;;;AC5Ca;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAkB;AAClB;;;;;;;;;;;AC7ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB,GAAG,0BAA0B,GAAG,0BAA0B,GAAG,yBAAyB,GAAG,8BAA8B,GAAG,qBAAqB;AACpK,cAAc,mBAAO,CAAC,iDAAO;AAC7B,yBAAyB,mBAAO,CAAC,gHAA4C;AAC7E,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,sCAAsC,mBAAO,CAAC,gDAAO;AACrD,eAAe,mBAAO,CAAC,sBAAQ;AAC/B,qCAAqC,mBAAO,CAAC,kBAAM;AACnD,oCAAoC,mBAAO,CAAC,gBAAK;AACjD,mCAAmC,mBAAO,CAAC,cAAI;AAC/C,qCAAqC,mBAAO,CAAC,yEAAa;AAC1D,kBAAkB,mBAAO,CAAC,yEAAa;AACvC,gCAAgC,mBAAO,CAAC,+DAAQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,6BAA6B,8BAA8B,8BAA8B;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,UAAU;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA,4IAA4I,gFAAgF;AAC5N;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,UAAU;AACxF;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,qBAAqB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,kCAAkC,SAAS,8CAA8C;AACnH;AACA;AACA;AACA;AACA,8EAA8E,UAAU;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,qBAAqB;AACtE,qBAAqB,qBAAqB,eAAe,kBAAkB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gHAAgH,uBAAuB;AACvI;AACA;AACA;AACA;AACA,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA,qDAAqD;AACrD,iEAAiE;AACjE;AACA,CAAC;AACD,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yBAAyB,0BAA0B,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,yBAAyB,0BAA0B,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD,uCAAuC;AACvC;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,8CAA8C;AAC9C,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,QAAQ;AAC3D;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,UAAU;AACzF;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA,uHAAuH;AACvH,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA,oEAAoE;AACpE;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA,gEAAgE,sBAAsB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,uBAAuB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,iBAAiB;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,iBAAiB;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA,wFAAwF,UAAU;AAClG;AACA;AACA;AACA,gHAAgH,iBAAiB;AACjI;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,wFAAwF,UAAU;AAClG;AACA;AACA;AACA,iHAAiH,iBAAiB;AAClI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,yBAAyB,SAAS;AAClC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,2CAA2C;AAC3C;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;;;;;;;;;;;AC7yBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB,GAAG,oBAAoB,GAAG,wCAAwC,GAAG,0CAA0C,GAAG,qBAAqB,GAAG,YAAY,GAAG,sCAAsC,GAAG,iCAAiC;AACvP,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,4CAA4C,mBAAO,CAAC,uDAAa;AACjE,0CAA0C,mBAAO,CAAC,wDAAW;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,mDAAmD,uCAAuC;AAC1F;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,wFAAwF,mBAAmB;AAC3G;AACA,+BAA+B,oCAAoC;AACnE;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,oFAAoF,mBAAmB;AACvG;AACA,6BAA6B,mCAAmC;AAChE;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,eAAe;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,eAAe;AACxC;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;;;;;;;;;;;ACjJa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB;AACtB,cAAc,mBAAO,CAAC,iDAAO;AAC7B,kBAAkB,mBAAO,CAAC,qEAAc;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,sBAAsB;AACtB;;;;;;;;;;;AC/Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uCAAuC,GAAG,4BAA4B,GAAG,2BAA2B;AACpG,cAAc,mBAAO,CAAC,iDAAO;AAC7B,mCAAmC,mBAAO,CAAC,cAAI;AAC/C;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,mCAAmC;AACnC,0BAA0B;AAC1B;AACA,0GAA0G,UAAU;AACpH;AACA;AACA;AACA;AACA,4GAA4G,iBAAiB;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,aAAa,2BAA2B;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;;;;;;;;;;;ACpGa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,YAAY;AACZ,cAAc,mBAAO,CAAC,iDAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA,6FAA6F;AAC7F;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,YAAY;AACZ;;;;;;;;;;;AC3Ba;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,sBAAsB;AAC/C;AACA;AACA;AACA;AACA;AACA,iCAAiC,mBAAmB;AACpD,KAAK;AACL;AACA,sBAAsB;AACtB;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,uBAAuB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA,sBAAsB;AACtB;;;;;;;;;;;ACnCa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB,GAAG,yBAAyB,GAAG,8BAA8B,GAAG,+BAA+B,GAAG,uBAAuB,GAAG,yCAAyC;AAC9L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;;;;;;;;;;AC7Ga;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kDAAkD,GAAG,4CAA4C;AACjG,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,YAAY,mBAAO,CAAC,6DAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;;;;;;;;;;;ACvBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B,GAAG,0BAA0B,GAAG,kBAAkB,GAAG,mBAAmB,GAAG,sBAAsB,GAAG,kBAAkB,GAAG,mBAAmB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,kBAAkB,GAAG,mBAAmB,GAAG,kBAAkB,GAAG,uBAAuB,GAAG,cAAc,GAAG,cAAc;AACjV,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,qCAAqC,mBAAO,CAAC,+EAAmB;AAChE;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,gBAAgB;AAChG;AACA;AACA,8EAA8E;AAC9E;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,eAAe,cAAc;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA,iFAAiF,uBAAuB,YAAY,aAAa;AACjI,sEAAsE,aAAa;AACnF;AACA;AACA;AACA;AACA,yEAAyE,aAAa;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,uCAAuC;AACvC,6CAA6C;AAC7C,6EAA6E;AAC7E,qCAAqC;AACrC,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;;;;;;;;;;;AClWa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB,GAAG,mBAAmB,GAAG,aAAa,GAAG,eAAe,GAAG,eAAe,GAAG,gBAAgB,GAAG,iBAAiB;AACnI,cAAc,mBAAO,CAAC,iDAAO;AAC7B,uCAAuC,mBAAO,CAAC,sBAAQ;AACvD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB;AAChB,kCAAkC,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,GAAG;AACrF;AACA;AACA;AACA,eAAe;AACf;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,qCAAqC,IAAI,YAAY,EAAE,GAAG,EAAE,SAAS,GAAG;AACxE;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,mCAAmC,IAAI;AACvC;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;;;;;;;;;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACRa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0BAA0B,2BAA2B,2BAA2B;AACjF;;;;;;;;;;;ACVa;;AAEb;;AAEA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;;;;;;;;;;;;ACTa;;AAEb;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPa;;AAEb,sBAAsB,mBAAO,CAAC,sEAAoB;;AAElD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,UAAU;AACnD,GAAG;AACH;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACrBa;;AAEb;AACA;AACA;AACA;;AAEA;;AAEA,WAAW,aAAa;AACxB;AACA;AACA,UAAU,iBAAiB;AAC3B;AACA;;;;;;;;;;;;ACda;;AAEb;AACA,oBAAoB,mBAAO,CAAC,oDAAS;;AAErC;AACA,yCAAyC;AACzC,qCAAqC;AACrC,8CAA8C;AAC9C,0CAA0C;;AAE1C;AACA;;;;;;;;;;;;ACZa;;AAEb;AACA;AACA,2FAA2F;AAC3F,4CAA4C;;AAE5C;AACA;AACA;AACA,gCAAgC;;AAEhC,kEAAkE;AAClE,qEAAqE;;AAErE;AACA,iCAAiC;AACjC;AACA,uCAAuC;;AAEvC,2DAA2D;AAC3D,+DAA+D;;AAE/D;AACA;AACA,oBAAoB,gBAAgB;AACpC,2EAA2E;;AAE3E,yGAAyG;;AAEzG;AACA,6CAA6C;;AAE7C,8DAA8D;;AAE9D;AACA;AACA,uEAAuE;AACvE;;AAEA;AACA;;;;;;;;;;;;ACzCa;;AAEb,iBAAiB,mBAAO,CAAC,8DAAmB;;AAE5C,WAAW,aAAa;AACxB;AACA;AACA;;;;;;;;;;;;ACPa;;AAEb;AACA;AACA,WAAW,mBAAO,CAAC,4DAAe;;AAElC,WAAW,aAAa;AACxB;;;;;;;;;;;;ACPa;;AAEb,qBAAqB,mBAAO,CAAC,sEAAuB;AACpD,gBAAgB,mBAAO,CAAC,kEAAqB;;AAE7C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED,2DAA2D;;AAE3D;;;;;;;;;;;;AChCa;;AAEb,eAAe,mBAAO,CAAC,oDAAW;AAClC,gBAAgB,mBAAO,CAAC,kEAAqB;AAC7C,mBAAmB,mBAAO,CAAC,4DAAe;;AAE1C;AACA,WAAW,kFAAkF;AAC7F;AACA;;AAEA;AACA;AACA;;AAEA,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;;;;;;;;;;;;ACzCa;;AAEb,iBAAiB,mBAAO,CAAC,wDAAa;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA,SAAS,MAAK,IAAI,CAAK;AACvB;AACA;;;;;;;;;;;;ACrCa;;AAEb,gBAAgB,mBAAO,CAAC,kEAAqB;AAC7C;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,qBAAqB,mBAAO,CAAC,sEAAuB;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzBa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,6BAA6B,WAAW;AACxC,GAAG;AACH;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,2CAA2C;AAC3C,2EAA2E;;AAE3E,0BAA0B;;AAE1B,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,MAAM,YAAY;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,gBAAgB;AAChB,kEAAkE;AAClE;AACA;AACA,IAAI;AACJ,iCAAiC;AACjC;AACA;AACA;AACA;AACA,sBAAsB;AACtB,gBAAgB;AAChB,kEAAkE;AAClE,wBAAwB;AACxB,6BAA6B;AAC7B;AACA,6FAA6F;AAC7F;AACA;;;;;;;;;;;;ACpGa;;AAEb;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,mBAAO,CAAC,sEAAuB;;AAEpD;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrBa;;AAEb;AACA;AACA;;AAEA;;AAEA;AACA,YAAY,aAAa;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,aAAa;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,GAAG;AACH;AACA;;;;;;;;;;;;AC9Ca;;AAEb;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,qBAAqB,mBAAO,CAAC,sEAAuB;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBa;;AAEb,gBAAgB,mBAAO,CAAC,kEAAqB;AAC7C,qBAAqB,mBAAO,CAAC,sEAAuB;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;ACzDa;;AAEb;AACA;;AAEA;;AAEA;AACA,YAAY,aAAa;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,aAAa;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,GAAG;AACH;AACA;;;;;;;;;;;;AC7Ca;;AAEb,gBAAgB,mBAAO,CAAC,kEAAqB;;AAE7C;;AAEA,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,uCAAuC;AACvC;AACA;;;;;;;;;;;;ACrBa;;AAEb;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,qBAAqB,mBAAO,CAAC,sEAAuB;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBa;;AAEb;AACA,iBAAiB,mBAAO,CAAC,wDAAa;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA,SAAS,MAAK,IAAI,CAAK;AACvB;AACA;;;;;;;;;;;;AClCa;;AAEb;AACA;;AAEA;;AAEA;AACA,YAAY,aAAa;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,aAAa;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,gCAAgC;AAChC,GAAG;AACH;AACA;;;;;;;;;;;;AC7Ca;;AAEb,mBAAmB,mBAAO,CAAC,4DAAe;AAC1C,gBAAgB,mBAAO,CAAC,kEAAqB;;AAE7C;;AAEA;;AAEA;AACA;;AAEA,YAAY,aAAa;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,iCAAiC;AACjC,IAAI;AACJ;AACA;AACA,EAAE;AACF,YAAY,aAAa;AACzB;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACtCA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;;;;;ACJA;;AAEA;AACA;AACA;;;AAGA,aAAa,oDAAwB;;;AAGrC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,8BAA8B;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;AC3IA,WAAW,mBAAO,CAAC,kBAAM;AACzB,SAAS,mBAAO,CAAC,cAAI;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;ACrGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACjKA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB;AACjB;AACA;AACA;;AAEA,aAAa;AACb;;AAEA,kBAAkB,kBAAkB;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW;AACX;AACA;;AAEA,WAAW;AACX;AACA;;;;;;;;;;;AClCA,aAAa,mBAAO,CAAC,sDAAY;AACjC,YAAY,mBAAO,CAAC,oBAAO;AAC3B,aAAa,mBAAO,CAAC,8CAAQ;AAC7B,aAAa,mBAAO,CAAC,sBAAQ;AAC7B,SAAS,mBAAO,CAAC,cAAI;;AAErB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC;;AAEnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC,6BAA6B;AAClE,+BAA+B;;AAE/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,mBAAmB;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,kBAAkB;AACpC;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB,kBAAkB;AACpC;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,2BAA2B;AAC3B;AACA;;;;;;;;;;;AC5MA;AACA;AACA;AACA;;AAEA,aAAa,mBAAO,CAAC,cAAI;AACzB,aAAa,mBAAO,CAAC,kBAAM;AAC3B,aAAa,mBAAO,CAAC,8CAAQ;AAC7B,aAAa,mBAAO,CAAC,gCAAG;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,sBAAsB;AACtB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;;AAEb;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA,KAAK;;;AAGL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB;;AAElB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,iCAAiC;AACjC,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,UAAU;AACV;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA,wBAAwB,iBAAiB;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;;AAEb;AACA,KAAK;;AAEL;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;;AAEb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,kBAAkB;AAClB;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA8B;;AAE9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,8BAA8B;AAC9B;AACA;AACA,yBAAyB;AACzB,sBAAsB;AACtB;AACA;AACA,iBAAiB;AACjB,cAAc;AACd,0BAA0B;AAC1B;AACA;AACA;AACA,SAAS;;AAET;AACA,KAAK;;AAEL;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,yBAAyB;;AAEzB,iBAAiB;AACjB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;;AAET;AACA,KAAK;;AAEL;AACA;;AAEA,sBAAsB;AACtB;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,OAAO;AACjB;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,sBAAsB;AACtB;AACA;;AAEA,SAAS;;AAET;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AC/tBA;AACA;AACA;AACA;;AAEA,mBAAmB,mBAAO,CAAC,yEAAiB;;AAE5C;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;AC7KD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,EAAE;AACvC;AACA,yDAAyD;AACzD;AACA;AACA;AACA,2GAA2G,EAAE;AAC7G;AACA;AACA;AACA;;AAEA,kBAAkB,mBAAO,CAAC,qEAAgB;AAC1C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC;AACxC;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uDAAuD;AACvD;AACA;AACA,kGAAkG,gCAAgC;AAClI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,uGAAuG;AAC7H;AACA,kCAAkC;AAClC,kBAAkB,uDAAuD;AACzE;AACA;AACA;AACA,sCAAsC,yBAAyB;AAC/D,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA,kBAAkB,qBAAqB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,gBAAgB;AAC/C;AACA,2BAA2B,iCAAiC;AAC5D;AACA,wBAAwB,8BAA8B;AACtD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iDAAiD;AACjD;;AAEA,wBAAwB;AACxB,uBAAuB;AACvB,yBAAyB;AACzB,wBAAwB;AACxB,yBAAyB;AACzB,yBAAyB;AACzB,0BAA0B;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA,iEAAiE;AACjE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kBAAkB;AAClB;AACA,aAAa;AACb;AACA;;AAEA;AACA,sBAAsB;AACtB,mCAAmC,OAAO;AAC1C,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,iCAAiC;AACjC,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,qCAAqC;AACrC,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,iCAAiC;AACjC,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,qCAAqC;AACrC,MAAM;AACN;AACA;;AAEA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sBAAsB,GAAG;AACzB;;AAEA;AACA;AACA,oCAAoC,sBAAsB;AAC1D;;AAEA;AACA,oBAAoB,eAAe;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,wBAAwB,gBAAgB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA,2BAA2B;AAC3B,8BAA8B,YAAY;AAC1C,wEAAwE,YAAY;AACpF;AACA;AACA,sBAAsB;AACtB,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC9gBA,gEAAwC;;;;;;;;;;;;ACA3B;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjBa;;AAEb,aAAa,mBAAO,CAAC,oEAAmB;AACxC,eAAe,mBAAO,CAAC,oDAAW;;AAElC,qBAAqB,mBAAO,CAAC,oEAAkB;AAC/C,kBAAkB,mBAAO,CAAC,wDAAY;AACtC,WAAW,mBAAO,CAAC,gDAAQ;;AAE3B;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;;;;;;;;;;ACjBa;;AAEb,qBAAqB,mBAAO,CAAC,oEAAkB;;AAE/C;AACA;AACA;;;;;;;;;;;;ACNa;;AAEb,kBAAkB,mBAAO,CAAC,wDAAY;AACtC,aAAa,mBAAO,CAAC,oEAAmB;;AAExC;AACA;AACA,kBAAkB,cAAc;AAChC;AACA;AACA;AACA,EAAE;AACF;AACA;;;;;;;;;;;;ACba;;AAEb;AACA;AACA;AACA;AACA;AACA,cAAc,mBAAO,CAAC,gEAAe,GAAG;AACxC;AACA,2CAA2C,gBAAgB;AAC3D,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;;AAEA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzHa;;AAEb;AACA,aAAa,mBAAO,CAAC,gEAAe;;AAEpC;AACA,6CAA6C,sBAAsB,EAAE,mBAAO,CAAC,sEAAkB;;AAE/F;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC/Ba;;AAEb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChBa;;AAEb;AACA,iBAAiB,mBAAO,CAAC,wDAAa;AACtC,iBAAiB,mBAAO,CAAC,8DAAmB;AAC5C,gBAAgB,mBAAO,CAAC,kEAAqB;AAC7C;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB,4BAA4B;AAC5B;AACA,aAAa;AACb;AACA,iBAAiB,sBAAsB;AACvC,qCAAqC;;AAErC;AACA;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,iBAAiB;AACnC;AACA,2CAA2C;AAC3C,mCAAmC;AACnC,6BAA6B;AAC7B;AACA;AACA;;AAEA,YAAY;AACZ;;;;;;;;;;;;AC7Ca;;AAEb,uBAAuB,mBAAO,CAAC,oEAAmB;AAClD,eAAe,mBAAO,CAAC,oDAAW;;AAElC,qBAAqB,mBAAO,CAAC,wEAAkB;AAC/C,kBAAkB,mBAAO,CAAC,4DAAY;AACtC,WAAW,mBAAO,CAAC,oDAAQ;;AAE3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;;;;;;;;;;ACrBa;;AAEb,qBAAqB,mBAAO,CAAC,wEAAkB;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,oBAAoB;AACrC;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,MAAM;AAChD;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtDa;;AAEb,aAAa,mBAAO,CAAC,oEAAmB;AACxC,kBAAkB,mBAAO,CAAC,4DAAY;;AAEtC;AACA;AACA;AACA;AACA,IAAI,kBAAkB;AACtB,IAAI,sBAAsB;AAC1B;AACA;AACA;;;;;;;;;;;ACbA;AACA,sFAAmC;;;;;;;;;;;;ACDnC,YAAY,mBAAO,CAAC,gBAAK;AACzB,cAAc,mBAAO,CAAC,gDAAO;AAC7B,aAAa,mBAAO,CAAC,gDAAO;AAC5B,YAAY,mBAAO,CAAC,sDAAW;AAC/B,YAAY,mBAAO,CAAC,sDAAW;;AAE/B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,gBAAgB;AACnC;;AAEA;AACA;AACA,kBAAkB,kBAAkB;;AAEpC,aAAa,gCAAgC;;AAE7C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,mBAAmB,gCAAgC;AACnD;AACA,kBAAkB,KAAK,GAAG,GAAG,GAAG,KAAK;;AAErC;;AAEA;AACA;;AAEA,sBAAsB,gBAAgB;AACtC;AACA,kBAAkB,KAAK,GAAG,GAAG,GAAG,KAAK;;AAErC;AACA;;;;;;;;;;;AC5GA,YAAY,mBAAO,CAAC,gBAAK;;AAEzB,kCAAkC,UAAU;AAC5C;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB,uBAAuB;AACzC,EAAE;AACF;;;;;;;;;;;ACbA,cAAc,mBAAO,CAAC,oBAAO;;AAE7B,kCAAkC,kBAAkB;AACpD;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB,uBAAuB;AACvC,EAAE;AACF;;;;;;;;;;;;ACba;;AAEb,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAM,SAAS,IAAyD;AACxE;;AAEA;AACA,MAAM,KAAK,EAiBN;;AAEL,CAAC;AACD;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,MAAM;AACN;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,eAAe,gBAAgB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,UAAU;AACrB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA,UAAU;AACV;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA,gCAAgC;AAChC;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,UAAU;AAC9B;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA,qBAAqB;AACrB,mBAAmB;AACnB,yBAAyB;AACzB,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,aAAa;AACb,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,mBAAmB,aAAa;AAChC,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,+CAA+C,SAAS;AACxD;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB;AACxB;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC,eAAe;AAClD;;AAEA;AACA;AACA;;AAEA;AACA,mCAAmC,eAAe;AAClD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,iBAAiB;AACjB,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL,iBAAiB;AACjB,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,WAAW,UAAU;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,0CAA0C,+BAA+B;AACzE;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB;AACA,aAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO,sCAAsC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,aAAa;AACb,SAAS;AACT,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,CAAC;;;;;;;;;;;;ACh5DY;;AAEb,sBAAsB,mBAAO,CAAC,oEAAmB;AACjD,iBAAiB,mBAAO,CAAC,wDAAgB;;AAEzC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACrCY;;AAEb,aAAa,mBAAO,CAAC,oEAAmB;AACxC,eAAe,mBAAO,CAAC,oDAAW;;AAElC,qBAAqB,mBAAO,CAAC,iFAAkB;AAC/C,kBAAkB,mBAAO,CAAC,qEAAY;AACtC,WAAW,mBAAO,CAAC,6DAAQ;;AAE3B;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;;;;;;;;;;ACjBa;;AAEb,qBAAqB,mBAAO,CAAC,iFAAkB;;AAE/C,0BAA0B,+GAAgD;AAC1E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnCa;;AAEb,0BAA0B,+GAAgD;AAC1E,kBAAkB,mBAAO,CAAC,qEAAY;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;ACzBA;AACA,aAAa,mBAAO,CAAC,sBAAQ;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE,cAAc;AAChB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC7DA,CAAC,kBAAkB;AACnB,wCAAwC;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC,OAAO;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,WAAW;AAClC;AACA,0BAA0B,mBAAmB,aAAa;AAC1D,yBAAyB,yBAAyB;AAClD,yBAAyB;AACzB;;AAEA;AACA;AACA,aAAa,oDAAwB;AACrC,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,iBAAiB,2EAAuC;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,aAAa;AACb;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;;AAEA;AACA;AACA;AACA,oDAAoD,OAAO;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iDAAiD,mBAAmB;AACpE,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,cAAc;AACd;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,cAAc;AACd;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,YAAY,OAAO,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA,KAAK;AACL;AACA,CAAC,EAAE,MAA8B,GAAG,CAAa,CAAC;;;;;;;;;;;;AC5jDrC;;AAEb,mBAAmB,mBAAO,CAAC,4DAAe;AAC1C,aAAa,mBAAO,CAAC,0EAAsB;AAC3C,qBAAqB,mBAAO,CAAC,kFAA0B;AACvD,WAAW,mBAAO,CAAC,0CAAM;;AAEzB,iBAAiB,mBAAO,CAAC,wDAAgB;AACzC;;AAEA,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,uBAAuB;AAC5C,IAAI;AACJ,qBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;;;;;;;;;;;;ACzCa;;AAEb,aAAa,mBAAO,CAAC,0EAAsB;AAC3C,qBAAqB,mBAAO,CAAC,kFAA0B;AACvD,qCAAqC,gIAA8D;;AAEnG,iBAAiB,mBAAO,CAAC,wDAAgB;;AAEzC,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,uBAAuB;AAC5C,IAAI;AACJ,qBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;;;;;;;;;;;;ACtBa;;AAEb,mBAAmB,mBAAO,CAAC,4DAAe;AAC1C,gBAAgB,mBAAO,CAAC,kEAAqB;AAC7C,cAAc,mBAAO,CAAC,8DAAgB;;AAEtC,iBAAiB,mBAAO,CAAC,wDAAgB;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,yBAAyB;AACpC,yCAAyC;AACzC,YAAY,kDAAkD;AAC9D;AACA,YAAY,uBAAuB;AACnC;AACA,QAAQ,6BAA6B;AACrC;AACA;AACA;AACA,0BAA0B,+BAA+B;AACzD,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA,WAAW,qBAAqB;AAChC;AACA;AACA;AACA;AACA,WAAW,qBAAqB;AAChC;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,4BAA4B,oCAAoC,MAAM;AACtE;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,WAAW,qBAAqB;AAChC;AACA;AACA;;AAEA,WAAW,aAAa;AACxB;AACA,YAAY,0BAA0B;AACtC,YAAY,sBAAsB;AAClC,YAAY,+BAA+B;;AAE3C,YAAY,qBAAqB;AACjC;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,wBAAwB;AACxB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,cAAc;AACd;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AChIA,kGAAqB;;;;;;;;;;;;ACArB,wBAAwB,oGAAuC;AAC/D,WAAW,mBAAO,CAAC,kBAAM;;AAEzB;AACA;AACA,OAAO,mBAAO,CAAC,cAAI;AACnB;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA,iBAAiB,mBAAO,CAAC,wDAAa;;AAEtC;AACA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,WAAW,mBAAmB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,6BAA6B;AAC7B;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2DAA2D,kCAAkC;AAC7F,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2DAA2D,GAAG,sBAAsB,GAAG;AACvF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,uCAAuC;AACvC,yCAAyC;AACzC,kDAAkD;AAClD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB;AAChB;AACA,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,oBAAoB;AACpB,sBAAsB;AACtB,yBAAyB;AACzB,yBAAyB;;AAEzB,eAAe;AACf;;AAEA;AACA;AACA;AACA,2FAA2F,oBAAoB;AAC/G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6BAA6B;AAC7B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;AChnBA,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;;AAEA,WAAW,mBAAO,CAAC,qDAAQ;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;;;;;;;;;;;ACxHhB,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA,aAAa,mBAAO,CAAC,yDAAU;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;;;;;;;;;;;AC3IA,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd,qBAAqB;AACrB,qBAAqB;;AAErB,qBAAqB;AACrB,qBAAqB;;AAErB,qBAAqB;AACrB,qBAAqB;;AAErB,qBAAqB;AACrB,qBAAqB;;AAErB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;AClEA,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;;AAEA,4BAA4B;AAC5B,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;AC9GA,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;;AAEA,WAAW,mBAAO,CAAC,qDAAQ;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB;;;;;;;;;;;AC9EnB,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA,WAAW,UAAU;AACrB;AACA,WAAW,QAAQ;AACnB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA,WAAW,UAAU;AACrB;AACA;AACA,iBAAiB;AACjB;AACA;;;;;;;;;;;ACjHA,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;;AAEA,WAAW,mBAAO,CAAC,qDAAQ;AAC3B,mBAAmB,mBAAO,CAAC,uEAAiB;AAC5C,eAAe,+FAA+B;AAC9C,gBAAgB,mBAAO,CAAC,iEAAc;AACtC,gBAAgB,kGAAiC;;AAEjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,mBAAmB;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA,QAAQ;AACR;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,kCAAkC;AAChD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,uDAAuD,YAAY;AACnE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAA0B,cAAc;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,wCAAwC;AAChE;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,oBAAoB;AACpE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,8BAA8B;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;AACA,6BAA6B,MAAM;AACnC;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,2BAA2B;AAC/C,sBAAsB,+CAA+C;AACrE;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,2BAA2B;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,2BAA2B;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,2BAA2B;AAC/C;AACA;AACA,sBAAsB,4BAA4B;AAClD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gCAAgC;;;;;;;;;;;ACxnChC,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,mBAAO,CAAC,iEAAc;AACtC,WAAW,mBAAO,CAAC,qDAAQ;AAC3B,eAAe,+FAA+B;AAC9C,kBAAkB,wGAAqC;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA2C,SAAS;AACpD;AACA;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B;;;;;;;;;;;ACxa1B,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;;AAEA,yBAAyB,+HAAoD;AAC7E,WAAW,mBAAO,CAAC,qDAAQ;;AAE3B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,SAAS;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,WAAW;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,SAAS;AACzD;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,SAAS;AACnD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,6CAA6C,cAAc;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA,WAAW;AACX;AACA,QAAQ;AACR;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH,WAAW;AACX;;AAEA,kBAAkB;;;;;;;;;;;AC5ZlB,iBAAiB,oBAAoB;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA,cAAc;;AAEd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+CAA+C,QAAQ;AACvD;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;;AAEZ,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA4B,QAAQ;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C;;AAE3C;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd;;AAEA;AACA,eAAe;AACf;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB;;;;;;;;;;;ACvexB;AACA;AACA;AACA;AACA;AACA,8JAAqF;AACrF,0JAAkF;AAClF,4HAA4D;;;;;;;;;;;ACP5D;;AAEA;AACA;AACA;;;AAGA,cAAc,mBAAO,CAAC,gDAAS;AAC/B,cAAc,2EAAuC;;AAErD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;AC9DA,eAAe,mBAAO,CAAC,kDAAU;AACjC,cAAc,mBAAO,CAAC,gDAAS;;AAE/B;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,wBAAwB;AACzC;;AAEA;AACA;;;;;;;;;;;;AC5Ca;AACb,WAAW,mBAAO,CAAC,cAAI;AACvB,YAAY,mBAAO,CAAC,gBAAK;AACzB,gBAAgB,mBAAO,CAAC,kDAAU;;AAElC,OAAO,KAAK;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oCAAoC,gCAAgC,IAAI;AACxE;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iCAAiC,GAAG;AACpC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,6CAA6C;AAC7C;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA,0BAA0B,qBAAqB;AAC/C,0BAA0B,qBAAqB;AAC/C;;;;;;;;;;;ACvJA,aAAa,mBAAO,CAAC,sBAAQ;;AAE7B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,qCAAqC;AACrC,6BAA6B;;AAE7B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1GY;;AAEZ;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACtDa;AACb;AACA;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA,0CAA0C,4BAA4B;AACtE,CAAC;AACD;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB,aAAa;AACb,oBAAoB;AACpB,sBAAsB;AACtB;AACA,qCAAqC,mBAAO,CAAC,oCAAe;AAC5D,6BAA6B,mBAAO,CAAC,cAAI;AACzC,6BAA6B,mBAAO,CAAC,cAAI;AACzC,+BAA+B,mBAAO,CAAC,kBAAM;AAC7C,mCAAmC,mBAAO,CAAC,0BAAU;AACrD,gCAAgC,mBAAO,CAAC,oBAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,QAAQ,GAAG,UAAU,GAAG,IAAI;AAC/E;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,OAAO;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,OAAO;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,sGAAsG,OAAO;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,6FAA6F,kBAAkB;AAC/G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,qBAAqB;;;;;;;;;;;;AC7QR;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB;AACzB,qBAAqB,mBAAO,CAAC,2DAAY;AACzC,yBAAyB,mBAAO,CAAC,qDAAkB;AACnD,iBAAiB,mBAAO,CAAC,sBAAQ;AACjC,cAAc,mBAAO,CAAC,gBAAK;AAC3B,wBAAwB,mBAAO,CAAC,oCAAe;AAC/C,iCAAiC,mBAAO,CAAC,sBAAQ;AACjD,iBAAiB,mBAAO,CAAC,qCAAU;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qFAAqF,6DAA6D;AAClJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,QAAQ;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,OAAO;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iDAAiD;AACtE,uDAAuD,+DAA+D;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC,2BAA2B,sCAAsC;AACjE,0BAA0B,4CAA4C;AACtE;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;;;;;;;;;;;;ACjQZ;AACb;AACA,6CAA6C;AAC7C;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,yBAAyB;AACzB,wBAAwB,mBAAO,CAAC,oCAAe;AAC/C,qBAAqB,mBAAO,CAAC,2DAAY;AACzC,oCAAoC,mBAAO,CAAC,oDAAW;AACvD,gBAAgB,mBAAO,CAAC,oBAAO;AAC/B,iBAAiB,mBAAO,CAAC,qCAAU;AACnC,yBAAyB,mBAAO,CAAC,qDAAkB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG,kBAAkB;AACxH;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,qEAAqE;AACrE;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,8BAA8B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG,kBAAkB;AACxH;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,aAAa,cAAc,cAAc,oBAAoB;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;;;;;;;;;;;;ACnYZ;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;;;;;;;;;;;;AC1BD;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB;AACtB,yBAAyB;AACzB,qBAAqB;AACrB,qBAAqB,mBAAO,CAAC,2DAAY;AACzC,iBAAiB,mBAAO,CAAC,sBAAQ;AACjC,yBAAyB,mBAAO,CAAC,qDAAkB;AACnD,iBAAiB,mBAAO,CAAC,qCAAU;AACnC,mCAAmC,mBAAO,CAAC,yEAA4B;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,KAAK,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,KAAK,EAAE,KAAK;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;;;;;;;;;;;AC7TtB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;;AAEA;AACA,yCAAyC;;AAEzC;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,OAAO;AACrB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,QAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,QAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,OAAO;AACrB;AACA;AACA,gBAAgB,QAAQ;AACxB;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,OAAO;AACrB;AACA;AACA,gBAAgB,QAAQ;AACxB;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,+CAA+C;AAC/C,+CAA+C;AAC/C,+CAA+C;AAC/C,+CAA+C;AAC/C,+CAA+C;AAC/C;AACA,+CAA+C;AAC/C,+CAA+C;AAC/C,+CAA+C;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uDAAuD;AACvD,uDAAuD;AACvD,uDAAuD;AACvD,uDAAuD;AACvD,uDAAuD;AACvD;AACA,uDAAuD;AACvD,uDAAuD;AACvD,uDAAuD;AACvD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;;AAEA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,QAAQ;AACtB;AACA,cAAc,QAAQ;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,WAAW;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;;AAEA;AACA;AACA,cAAc,QAAQ;AACtB;;AAEA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,QAAQ;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;;AAEA;AACA,kBAAkB,QAAQ;AAC1B;;AAEA;AACA,kBAAkB,QAAQ;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,2BAA2B;AAClD,uBAAuB,2BAA2B;AAClD,uBAAuB,2BAA2B;AAClD,uBAAuB,2BAA2B;AAClD,uBAAuB,2BAA2B;AAClD,uBAAuB,2BAA2B;AAClD;;AAEA;AACA;AACA,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,4BAA4B;AACnD,uBAAuB,2BAA2B;AAClD,uBAAuB,2BAA2B;AAClD,uBAAuB,2BAA2B;AAClD,uBAAuB,2BAA2B;AAClD,uBAAuB,2BAA2B;AAClD,uBAAuB,2BAA2B;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,QAAQ;AACtB,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA,cAAc,QAAQ;AACtB;;AAEA;AACA;AACA;AACA,cAAc,QAAQ;AACtB,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA,cAAc,QAAQ;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAsB;AACtB,sBAAsB;;AAEtB;AACA;AACA;;AAEA,uBAAuB;AACvB,uBAAuB;;AAEvB;AACA;AACA;;AAEA,uBAAuB;AACvB,uBAAuB;;AAEvB;AACA;AACA;;AAEA,uBAAuB;AACvB,uBAAuB;;AAEvB;AACA;AACA;;AAEA,uBAAuB;AACvB,uBAAuB;;AAEvB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAsB;AACtB,sBAAsB;;AAEtB;AACA;AACA;;AAEA,uBAAuB;AACvB,uBAAuB;;AAEvB;AACA;AACA;;AAEA,uBAAuB;AACvB,uBAAuB;;AAEvB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAsB;AACtB,sBAAsB;;AAEtB;AACA;;AAEA,uBAAuB;AACvB,uBAAuB;;AAEvB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB,QAAQ;AAC5B;AACA;AACA;;AAEA,0BAA0B;AAC1B,0BAA0B;;AAE1B;AACA;;AAEA,2BAA2B;AAC3B,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA;;AAEA,2BAA2B;AAC3B,2BAA2B;;AAE3B;AACA;AACA;AACA;AACA;;AAEA,2BAA2B;AAC3B,2BAA2B;;AAE3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB;AACpB,oBAAoB;;AAEpB;AACA;;AAEA,qBAAqB;AACrB,qBAAqB;;AAErB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,oBAAoB;AACpB,oBAAoB;;AAEpB;AACA;;AAEA,qBAAqB;AACrB,qBAAqB;;AAErB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,oBAAoB;AACpB,oBAAoB;;AAEpB;AACA;;AAEA,qBAAqB;AACrB,qBAAqB;;AAErB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,oBAAoB;AACpB,oBAAoB;;AAEpB;AACA;;AAEA,qBAAqB;AACrB,qBAAqB;;AAErB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,oBAAoB;AACpB,oBAAoB;;AAEpB;AACA;;AAEA,qBAAqB;AACrB,qBAAqB;;AAErB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,oBAAoB;AACpB,oBAAoB;;AAEpB;AACA;;AAEA,qBAAqB;AACrB,qBAAqB;;AAErB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,oBAAoB;AACpB,oBAAoB;;AAEpB;AACA;;AAEA,qBAAqB;AACrB,qBAAqB;;AAErB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,oBAAoB;AACpB,oBAAoB;;AAEpB;AACA;;AAEA,qBAAqB;AACrB,qBAAqB;;AAErB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,cAAc,OAAO;AACrB;;AAEA;AACA;AACA;AACA;;AAEA,cAAc,OAAO;;AAErB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,cAAc,QAAQ;AACtB;AACA;;AAEA;;AAEA;AACA;AACA,eAAe,SAAS;AACxB;AACA,iCAAiC,OAAO;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,cAAc,OAAO;AACrB,cAAc,QAAQ;;AAEtB;AACA;AACA;AACA;;AAEA,eAAe,QAAQ;AACvB;AACA;;AAEA,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB,gBAAgB,QAAQ;AACxB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,cAAc,OAAO;AACrB,cAAc,QAAQ;AACtB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;;AAEA,cAAc,OAAO;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,sBAAsB;AACxC;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,gBAAgB;AAClC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,cAAc;AAChC;AACA;;AAEA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,uBAAuB;AACrC,cAAc,gBAAgB;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,eAAe;AACjC,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,QAAQ;AAC1B;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA,kBAAkB,OAAO;AACzB;AACA,KAAK;AACL,IAAI,SAAS,IAA8B;AAC3C;AACA,aAAa,mBAAO,CAAC,sBAAQ;AAC7B;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA,OAAO;AACP;AACA;AACA,CAAC;;AAED,CAAC,EAAE,KAA6B,kEAAkE;;;;;;;;;;;;ACt1ErF;;AAEb,eAAe,mBAAO,CAAC,oDAAW;AAClC,eAAe,mBAAO,CAAC,kEAAkB;AACzC,gBAAgB,mBAAO,CAAC,oEAAmB;AAC3C,eAAe,mBAAO,CAAC,oDAAW;AAClC,eAAe,mBAAO,CAAC,oDAAW;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC7Ba;;AAEb,YAAY,mBAAO,CAAC,8CAAQ;AAC5B,YAAY,mBAAO,CAAC,8CAAQ;AAC5B,gBAAgB,mBAAO,CAAC,sDAAY;AACpC,gBAAgB,mBAAO,CAAC,sDAAY;;AAEpC,WAAW,aAAa;AACxB,qDAAqD,SAAS;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxBa;;AAEb,cAAc,mBAAO,CAAC,kDAAU;AAChC,2BAA2B,mBAAO,CAAC,8EAAwB;AAC3D,eAAe,mBAAO,CAAC,oDAAW;AAClC,gBAAgB,mBAAO,CAAC,kEAAqB;AAC7C,WAAW,mBAAO,CAAC,0CAAM;;AAEzB,WAAW,uBAAuB;AAClC;AACA,qBAAqB,mBAAO,CAAC,sEAAuB;;AAEpD;AACA;;AAEA;AACA,4CAA4C;;AAE5C,WAAW,8DAA8D;AACzE;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,8HAA8H;AAC5I,aAAa,WAAW,2BAA2B,cAAc,IAAI,mBAAmB;AACxF,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA,WAAW,uDAAuD;AAClE;AACA,YAAY,sCAAsC;AAClD;AACA;AACA,aAAa,YAAY,eAAe,YAAY,cAAc,KAAK;AACvE,aAAa,4BAA4B,2BAA2B,YAAY;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,YAAY;AAClB;AACA;AACA;AACA;AACA;;AAEA,WAAW,uDAAuD;AAClE;AACA,YAAY,iCAAiC;AAC7C;AACA;AACA,aAAa,YAAY,eAAe,YAAY,cAAc,KAAK;AACvE,aAAa,kCAAkC,2BAA2B,YAAY;AACtF;AACA;AACA;AACA;AACA;AACA,MAAM,YAAY;AAClB;AACA;AACA;AACA;AACA;;AAEA,WAAW,aAAa;AACxB;AACA,4CAA4C;AAC5C;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,eAAe;AAC7B;AACA;;;;;;;;;;;ACnHA;AACA;AACA;AACA,EAAE,gBAAgB;AAClB;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;ACXD;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB,YAAY,mBAAO,CAAC,0DAAY;;AAEhC,aAAa,yFAA8B;;AAE3C;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,EAAE,eAAe;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,gBAAgB;AAChB;AACA,gBAAgB;AAChB;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AC9HD;AACA;AACA,EAAE,gBAAgB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;ACvED;AACA;AACA;AACA;AACA,6BAA6B,mBAAmB,oCAAoC;AACpF,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,QAAQ,mBAAO,CAAC,0CAAK;;AAErB,WAAW,mBAAO,CAAC,sBAAQ;;AAE3B,QAAQ,mBAAO,CAAC,+CAAO;;AAEvB,eAAe,mBAAO,CAAC,6DAAc;;AAErC,iBAAiB,0DAA8B;;AAE/C,aAAa,yFAA8B;;AAE3C;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAE,cAAc;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,sDAAsD,GAAG;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,SAAS;AACvD;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,GAAG;AACvE;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;;AAEA;;AAEA,GAAG;;AAEH,EAAE,mBAAmB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAE,0BAA0B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;AC1YD;AACA;AACA;AACA;;AAEA;;AAEA,EAAE,iBAAiB;AACnB;AACA;;AAEA,EAAE,0BAA0B;AAC5B;AACA;;AAEA,EAAE,mBAAmB;AACrB;AACA;;AAEA,EAAE,oBAAoB;AACtB;AACA;AACA;AACA;AACA;;AAEA,EAAE,qBAAqB;AACvB;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;ACjCD;AACA;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,aAAa,mBAAO,CAAC,yDAAY;;AAEjC,YAAY,mBAAO,CAAC,uDAAW;;AAE/B,WAAW,mBAAO,CAAC,qDAAU;;AAE7B,eAAe,mBAAO,CAAC,6DAAc;;AAErC,EAAE,gBAAgB;;AAElB,EAAE,kBAAkB;;AAEpB,EAAE,uBAAuB;AACzB;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,EAAE,eAAe;;AAEjB,EAAE,cAAc;;AAEhB,EAAE,mBAAmB;;AAErB,EAAE,0BAA0B;;AAE5B,CAAC;;;;;;;;;;;ACtCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;ACXD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;ACtBD;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,wCAAwC,SAAS;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA,EAAE,qBAAqB;;AAEvB,EAAE,yBAAyB;;AAE3B,EAAE,uBAAuB;;AAEzB,EAAE,sBAAsB;;AAExB,EAAE,sBAAsB;;AAExB,EAAE,4BAA4B;;AAE9B,EAAE,uBAAuB;;AAEzB,CAAC;;;;;;;;;;;AClFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;;;;;;;;;;ACTD;AACA;AACA;;AAEA,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,YAAY,mBAAO,CAAC,2DAAW;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR,4BAA4B,aAAa;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AC3GD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,qBAAqB,mBAAO,CAAC,6EAAoB;;AAEjD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;ACnCD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,YAAY,mBAAO,CAAC,2DAAW;;AAE/B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AC9ED;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,qBAAqB,mBAAO,CAAC,6EAAoB;;AAEjD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;ACnCD;AACA;AACA;;AAEA,uBAAuB,mBAAO,CAAC,iFAAsB;;AAErD,qBAAqB,mBAAO,CAAC,6EAAoB;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AC/DD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;ACfD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AC/BD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AC3BD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,YAAY,mBAAO,CAAC,2DAAW;;AAE/B,aAAa,mBAAO,CAAC,6DAAY;;AAEjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;ACtDD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,YAAY,mBAAO,CAAC,2DAAW;;AAE/B,aAAa,mBAAO,CAAC,6DAAY;;AAEjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;ACrCD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,aAAa,2FAA6B;;AAE1C,YAAY,mBAAO,CAAC,2DAAW;;AAE/B,aAAa,mBAAO,CAAC,6DAAY;;AAEjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AChGD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,YAAY,mBAAO,CAAC,2DAAW;;AAE/B,aAAa,mBAAO,CAAC,6DAAY;;AAEjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;ACnDD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,aAAa,2FAA6B;;AAE1C,YAAY,mBAAO,CAAC,2DAAW;;AAE/B,aAAa,mBAAO,CAAC,6DAAY;;AAEjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AC1CD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,aAAa,2FAA6B;;AAE1C,YAAY,mBAAO,CAAC,2DAAW;;AAE/B,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,kBAAkB,mBAAO,CAAC,uEAAiB;;AAE3C,iBAAiB,mBAAO,CAAC,qEAAgB;;AAEzC,kBAAkB,mBAAO,CAAC,uEAAiB;;AAE3C,mBAAmB,mBAAO,CAAC,yEAAkB;;AAE7C,oBAAoB,mBAAO,CAAC,2EAAmB;;AAE/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,SAAS;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sCAAsC,SAAS;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,sCAAsC,SAAS;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;ACzLD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,kBAAkB,gGAAkC;;AAEpD,yBAAyB,mBAAO,CAAC,qFAAwB;;AAEzD,wBAAwB,mBAAO,CAAC,mFAAuB;;AAEvD,YAAY,mBAAO,CAAC,2DAAW;;AAE/B,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,mBAAmB,mBAAO,CAAC,yEAAkB;;AAE7C,oBAAoB,mBAAO,CAAC,2EAAmB;;AAE/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,sCAAsC,SAAS;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;ACjPD;AACA;AACA;AACA,gBAAgB;;AAEhB,QAAQ,mBAAO,CAAC,2DAAW;;AAE3B,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,gBAAgB,mBAAO,CAAC,mEAAe;;AAEvC,eAAe,mBAAO,CAAC,iEAAc;;AAErC,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,eAAe,mBAAO,CAAC,iEAAc;;AAErC,WAAW,mBAAO,CAAC,yDAAU;;AAE7B,YAAY,mBAAO,CAAC,2DAAW;;AAE/B,6BAA6B,mBAAO,CAAC,6FAA4B;;AAEjE,mBAAmB,mBAAO,CAAC,yEAAkB;;AAE7C,eAAe,mBAAO,CAAC,iEAAc;;AAErC,kBAAkB,mBAAO,CAAC,uEAAiB;;AAE3C,iBAAiB,mBAAO,CAAC,qEAAgB;;AAEzC,kBAAkB,mBAAO,CAAC,uEAAiB;;AAE3C,mBAAmB,mBAAO,CAAC,yEAAkB;;AAE7C,iBAAiB,mBAAO,CAAC,qEAAgB;;AAEzC,mBAAmB,mBAAO,CAAC,yEAAkB;;AAE7C,oBAAoB,mBAAO,CAAC,2EAAmB;;AAE/C,gBAAgB,mBAAO,CAAC,mEAAe;;AAEvC;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AC/gBD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,YAAY,mBAAO,CAAC,2DAAW;;AAE/B,aAAa,mBAAO,CAAC,6DAAY;;AAEjC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AC9BD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,QAAQ,mBAAO,CAAC,2DAAW;;AAE3B,YAAY,mBAAO,CAAC,2DAAW;;AAE/B,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,iBAAiB,mBAAO,CAAC,qEAAgB;;AAEzC,oBAAoB,mBAAO,CAAC,2EAAmB;;AAE/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,mCAAmC;AACzF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;ACzSD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;ACzDD;AACA;AACA;AACA,gBAAgB;;AAEhB,SAAS,mBAAO,CAAC,2DAAW;;AAE5B;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,mBAAO,CAAC,iEAAc;AAC3C,mBAAmB,mBAAO,CAAC,6DAAY;AACvC,qBAAqB,mBAAO,CAAC,iEAAc;AAC3C,yBAAyB,mBAAO,CAAC,yEAAkB;AACnD,qBAAqB,mBAAO,CAAC,iEAAc;AAC3C,iBAAiB,mBAAO,CAAC,yDAAU;AACnC,kBAAkB,mBAAO,CAAC,2DAAW;AACrC,mCAAmC,mBAAO,CAAC,6FAA4B;AACvE,mBAAmB,mBAAO,CAAC,6DAAY;AACvC,mBAAmB,mBAAO,CAAC,6DAAY;AACvC,sBAAsB,mBAAO,CAAC,mEAAe;AAC7C,0BAA0B,mBAAO,CAAC,2EAAmB;AACrD,2BAA2B,mBAAO,CAAC,6EAAoB;AACvD;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA,YAAY;AACZ,2CAA2C,UAAU;AACrD;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,UAAU;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,mCAAmC;AAC1F;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AChxBD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AC3BD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,qBAAqB,mBAAO,CAAC,6EAAoB;;AAEjD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AChDD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,YAAY,mBAAO,CAAC,2DAAW;;AAE/B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AClCD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,kBAAkB,mBAAO,CAAC,uEAAiB;;AAE3C,gBAAgB,mBAAO,CAAC,mEAAe;;AAEvC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,UAAU;AAChD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,SAAS;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AC/KD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,kBAAkB,mBAAO,CAAC,uEAAiB;;AAE3C;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAoC,SAAS;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AClCD;AACA;AACA;AACA,6BAA6B,mBAAmB,oCAAoC;AACpF,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D,yCAAyC,sBAAsB,sBAAsB,wBAAwB;AAC7G;;AAEA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D,yCAAyC,sBAAsB,wBAAwB,wBAAwB,wBAAwB,wBAAwB;AAC/J;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AC/OD;AACA;AACA;AACA,uCAAuC,0BAA0B,2DAA2D,kBAAkB,4BAA4B,mCAAmC,8BAA8B,oCAAoC,eAAe;AAC9R,gBAAgB;;AAEhB,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,qBAAqB,mBAAO,CAAC,6EAAoB;;AAEjD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;ACpED;AACA;AACA;AACA,gBAAgB;;AAEhB,WAAW,yFAA2B;;AAEtC,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,mBAAmB,mBAAO,CAAC,yEAAkB;;AAE7C,eAAe,mBAAO,CAAC,iEAAc;;AAErC,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,eAAe,mBAAO,CAAC,iEAAc;;AAErC,eAAe,mBAAO,CAAC,iEAAc;;AAErC,WAAW,mBAAO,CAAC,yDAAU;;AAE7B,YAAY,mBAAO,CAAC,2DAAW;;AAE/B,6BAA6B,mBAAO,CAAC,6FAA4B;;AAEjE,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,kBAAkB,mBAAO,CAAC,uEAAiB;;AAE3C,kBAAkB,mBAAO,CAAC,uEAAiB;;AAE3C,iBAAiB,mBAAO,CAAC,qEAAgB;;AAEzC,mBAAmB,mBAAO,CAAC,yEAAkB;;AAE7C,gBAAgB,mBAAO,CAAC,mEAAe;;AAEvC;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B;AAC9B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,SAAS;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,UAAU;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAG;;AAEH,CAAC;;;;;;;;;;;AC3aD;AACA;AACA;;AAEA,QAAQ,mBAAO,CAAC,2DAAW;;AAE3B,yBAAyB,mBAAO,CAAC,qFAAwB;;AAEzD,gBAAgB,mBAAO,CAAC,mEAAe;;AAEvC,kBAAkB,mBAAO,CAAC,uEAAiB;;AAE3C,oBAAoB,mBAAO,CAAC,2EAAmB;;AAE/C,oBAAoB,mBAAO,CAAC,2EAAmB;;AAE/C,aAAa,mBAAO,CAAC,6DAAY;;AAEjC,gBAAgB,mBAAO,CAAC,mEAAe;;AAEvC,EAAE,qBAAqB;AACvB;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAE,oBAAoB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA,EAAE,2BAA2B;AAC7B;AACA;;AAEA,EAAE,2BAA2B;AAC7B;AACA;;AAEA,EAAE,6BAA6B;;AAE/B,EAAE,uBAAuB;;AAEzB,EAAE,0BAA0B;;AAE5B,CAAC;;;;;;;;;;;;AChED;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,0CAAkB;AAC1B;AACA;AACA;AACA,8sCAA8sC;AAC9sC,IAAI,WAAW;AACf;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,aAAa,GAAG;AAChB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,GAAG;AAChB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,GAAG;AAChB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,eAAe;AACf;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,mBAAmB;AAChC,aAAa,SAAS;AACtB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,mBAAmB;AAChC,aAAa,SAAS;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,sBAAsB,+CAA+C;AAClF,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,sBAAsB,+CAA+C;AAClF,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,SAAS;AACtB,eAAe;AACf;AACA,cAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,kBAAkB;AACpF,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,kBAAkB;AAC/F;AACA,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,qBAAqB;AACxG;AACA,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,mFAAmF,qBAAqB;AACxG;AACA,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,oBAAoB;AACvG;AACA,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4FAA4F,2BAA2B;AACvH;AACA,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,4FAA4F,2BAA2B;AACvH;AACA,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,uBAAuB;AAC7G;AACA,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+FAA+F,8BAA8B;AAC7H;AACA,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,+FAA+F,8BAA8B;AAC7H;AACA,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA,2EAA2E,mBAAmB;AAC9F;AACA,aAAa,qBAAqB;AAClC,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,kBAAkB;AACvE;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe,OAAO;AACtB;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,oBAAoB;AACrG;AACA,aAAa,qBAAqB;AAClC,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E;AAC3E,MAAM,2EAA2E;AACjF;AACA;AACA,qIAAqI;AACrI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,oBAAoB;AAClG;AACA,aAAa,qBAAqB;AAClC,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,sDAAsD,mBAAmB;AACzE;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,kBAAkB;AACxF;AACA,aAAa,qBAAqB;AAClC,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe,OAAO;AACtB;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,kBAAkB;AACpF;AACA,aAAa,qBAAqB;AAClC,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA,kEAAkE,kBAAkB;AACpF;AACA,aAAa,qBAAqB;AAClC,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,6BAA6B;AACpF;AACA,aAAa;AACb,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,8BAA8B;AACtF;AACA,aAAa;AACb,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,qBAAqB;AAClC,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,cAAc;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA,2CAA2C,6HAA6H;AACxK;AACA;AACA,+FAA+F,qBAAqB;AACpH;AACA,aAAa,cAAc;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,cAAc;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,2CAA2C,8HAA8H;AACzK;AACA;AACA,+GAA+G,sBAAsB;AACrI;AACA,aAAa,cAAc;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,cAAc;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0GAA0G,8BAA8B;AACxI;AACA,aAAa,cAAc;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA,0GAA0G,8BAA8B;AACxI;AACA,aAAa,cAAc;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,cAAc;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+FAA+F,sBAAsB;AACrH;AACA,aAAa,cAAc;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa,cAAc;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gGAAgG,uBAAuB;AACvH;AACA,aAAa,cAAc;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB,YAAY;AACZ,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B,aAAa,UAAU;AACvB,aAAa,UAAU;AACvB,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B,aAAa,UAAU;AACvB,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B,aAAa,UAAU;AACvB,eAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,IAAI;AACL,IAAI,IAA0C,EAAE,iCAAO,EAAE,mCAAE,aAAa,cAAc;AAAA,kGAAC;AACvF,KAAK,EAAmF;;;;;;;;;;;AC35CxF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,IAAI,IAAI,IAAI,GAAG,IAAI;AAC3C;AACA,+BAA+B,IAAI,IAAI,EAAE,IAAI,IAAI,EAAE,EAAE,aAAa,IAAI,EAAE,IAAI,EAAE,IAAI;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,QAAQ;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,gBAAgB,eAAe,GAAG,eAAe,GAAG,eAAe,GAAG,aAAa;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA,sBAAsB,eAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,qBAAqB;AACrB,YAAY;AACZ,qBAAqB;AACrB,YAAY;AACZ,qBAAqB;AACrB;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,eAAe;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,sBAAsB,YAAY;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,IAAI;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,GAAG;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,SAAS,YAAY,SAAS;AACjF;AACA;AACA,CAAC,IAAI;AACL,IAAI,IAA0C,EAAE,iCAAO,EAAE,mCAAE,aAAa,iBAAiB;AAAA,kGAAC;AAC1F,KAAK,EAAsF;;;;;;;;;;;;ACzP9E;;AAEb,oBAAoB,mBAAO,CAAC,sFAA4B;;AAExD;;AAEA,WAAW,aAAa;AACxB;AACA,gBAAgB,yCAAyC;AACzD,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChBa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS,gBAAgB,sCAAsC,kBAAkB;AACjF,wBAAwB;AACxB;AACA;;AAEO;AACP;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEO;AACP;AACA,+CAA+C,OAAO;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA,2DAA2D,cAAc;AACzE;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA,2CAA2C,QAAQ;AACnD;AACA;;AAEO;AACP,kCAAkC;AAClC;;AAEO;AACP,uBAAuB,uFAAuF;AAC9G;AACA;AACA,yGAAyG;AACzG;AACA,sCAAsC,QAAQ;AAC9C;AACA,gEAAgE;AAChE;AACA,8CAA8C,yFAAyF;AACvI,8DAA8D,2CAA2C;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA,kBAAkB,yBAAyB;AAC3C;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA,4CAA4C,yEAAyE;AACrH;;AAEO;AACP;AACA;;AAEO;AACP,0BAA0B,+DAA+D,iBAAiB;AAC1G;AACA,kCAAkC,MAAM,+BAA+B,YAAY;AACnF,iCAAiC,MAAM,mCAAmC,YAAY;AACtF,8BAA8B;AAC9B;AACA,GAAG;AACH;;AAEO;AACP,YAAY,6BAA6B,0BAA0B,cAAc,qBAAqB;AACtG,eAAe,oDAAoD,qEAAqE,cAAc;AACtJ,qBAAqB,sBAAsB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,iCAAiC,SAAS;AAC1C,iCAAiC,WAAW,UAAU;AACtD,wCAAwC,cAAc;AACtD;AACA,4GAA4G,OAAO;AACnH,+EAA+E,iBAAiB;AAChG,uDAAuD,gBAAgB,QAAQ;AAC/E,6CAA6C,gBAAgB,gBAAgB;AAC7E;AACA,gCAAgC;AAChC;AACA;AACA,QAAQ,YAAY,aAAa,SAAS,UAAU;AACpD,kCAAkC,SAAS;AAC3C;AACA;;AAEO;AACP;AACA;AACA;AACA,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;;AAEM;AACP;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,MAAM;AACxB;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACO;AACP,2BAA2B,sBAAsB;AACjD;AACA;AACA;;AAEA;AACO;AACP,gDAAgD,QAAQ;AACxD,uCAAuC,QAAQ;AAC/C,uDAAuD,QAAQ;AAC/D;AACA;AACA;;AAEO;AACP,2EAA2E,OAAO;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA;AACA,eAAe,oGAAoG,cAAc;AACjI,4BAA4B,sBAAsB;AAClD,wBAAwB,YAAY,sBAAsB,qCAAqC,2CAA2C,MAAM;AAChJ,0BAA0B,MAAM,iBAAiB,YAAY;AAC7D,qBAAqB;AACrB,4BAA4B;AAC5B,2BAA2B;AAC3B,0BAA0B;AAC1B;;AAEO;AACP;AACA,eAAe,6CAA6C,UAAU,sDAAsD,cAAc;AAC1I,wBAAwB,6BAA6B,oBAAoB,uCAAuC,kBAAkB;AAClI;;AAEO;AACP;AACA;AACA,yGAAyG,uFAAuF,cAAc;AAC9M,qBAAqB,8BAA8B,gDAAgD,wDAAwD;AAC3J,2CAA2C,sCAAsC,UAAU,mBAAmB,IAAI;AAClH;;AAEO;AACP,+BAA+B,uCAAuC,YAAY,KAAK,OAAO;AAC9F;AACA;;AAEA;AACA,wCAAwC,4BAA4B;AACpE,CAAC;AACD;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP,2CAA2C;AAC3C;;AAEO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,MAAM,oBAAoB,YAAY;AAC5E,qBAAqB,8CAA8C;AACnE;AACA;AACA,qBAAqB,aAAa;AAClC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,SAAS,gBAAgB;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iEAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCpXF;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;UEJA;UACA;UACA;UACA","sources":["webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/CiaoService.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/MDNSServer.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/NetworkManager.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/Responder.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/DNSLabelCoder.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/DNSPacket.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/Question.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/ResourceRecord.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/dns-string-utils.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/records/AAAARecord.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/records/ARecord.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/records/CNAMERecord.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/records/NSECRecord.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/records/OPTRecord.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/records/PTRRecord.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/records/SRVRecord.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/records/TXTRecord.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/coder/records/index.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/index.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/responder/Announcer.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/responder/Prober.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/responder/QueryResponse.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/responder/QueuedResponse.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/responder/TruncatedQuery.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/util/dns-equal.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/util/domain-formatter.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/util/errors.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/util/promise-utils.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/util/sorted-array.js","webpack://c300x-controller/./node_modules/@homebridge/ciao/lib/util/tiebreaking.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/index.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/align.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/bus.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/constants.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/dbus-buffer.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/handshake.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/introspect.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/marshall.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/marshallers.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/message.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/readline.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/server-handshake.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/server.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/signature.js","webpack://c300x-controller/./node_modules/@homebridge/dbus-native/lib/stdifaces.js","webpack://c300x-controller/./node_modules/@homebridge/put/index.js","webpack://c300x-controller/./node_modules/array-buffer-byte-length/index.js","webpack://c300x-controller/./node_modules/array-flatten/dist.es2015/index.js","webpack://c300x-controller/./node_modules/bonjour-hap/index.js","webpack://c300x-controller/./node_modules/bonjour-hap/lib/Browser.js","webpack://c300x-controller/./node_modules/bonjour-hap/lib/Prober.js","webpack://c300x-controller/./node_modules/bonjour-hap/lib/Registry.js","webpack://c300x-controller/./node_modules/bonjour-hap/lib/Server.js","webpack://c300x-controller/./node_modules/bonjour-hap/lib/Service.js","webpack://c300x-controller/./node_modules/bonjour-hap/lib/helpers.js","webpack://c300x-controller/./node_modules/bonjour-hap/lib/utils/dnsEqual.js","webpack://c300x-controller/./node_modules/bonjour-hap/lib/utils/network.js","webpack://c300x-controller/./node_modules/bonjour-hap/lib/utils/txtDecoder.js","webpack://c300x-controller/./node_modules/buffer-from/index.js","webpack://c300x-controller/./node_modules/call-bind/callBound.js","webpack://c300x-controller/./node_modules/call-bind/index.js","webpack://c300x-controller/./node_modules/debug/src/browser.js","webpack://c300x-controller/./node_modules/debug/src/common.js","webpack://c300x-controller/./node_modules/debug/src/index.js","webpack://c300x-controller/./node_modules/debug/src/node.js","webpack://c300x-controller/./node_modules/deep-equal/index.js","webpack://c300x-controller/./node_modules/define-data-property/index.js","webpack://c300x-controller/./node_modules/define-properties/index.js","webpack://c300x-controller/./node_modules/dns-packet/classes.js","webpack://c300x-controller/./node_modules/dns-packet/index.js","webpack://c300x-controller/./node_modules/dns-packet/opcodes.js","webpack://c300x-controller/./node_modules/dns-packet/optioncodes.js","webpack://c300x-controller/./node_modules/dns-packet/rcodes.js","webpack://c300x-controller/./node_modules/dns-packet/types.js","webpack://c300x-controller/./node_modules/duplexer/index.js","webpack://c300x-controller/./node_modules/es-define-property/index.js","webpack://c300x-controller/./node_modules/es-errors/eval.js","webpack://c300x-controller/./node_modules/es-errors/index.js","webpack://c300x-controller/./node_modules/es-errors/range.js","webpack://c300x-controller/./node_modules/es-errors/ref.js","webpack://c300x-controller/./node_modules/es-errors/syntax.js","webpack://c300x-controller/./node_modules/es-errors/type.js","webpack://c300x-controller/./node_modules/es-errors/uri.js","webpack://c300x-controller/./node_modules/event-stream/index.js","webpack://c300x-controller/./node_modules/fast-deep-equal/index.js","webpack://c300x-controller/./node_modules/fast-srp-hap/jsbn/jsbn.js","webpack://c300x-controller/./node_modules/fast-srp-hap/lib/params.js","webpack://c300x-controller/./node_modules/fast-srp-hap/lib/srp.js","webpack://c300x-controller/./node_modules/for-each/index.js","webpack://c300x-controller/./node_modules/from/index.js","webpack://c300x-controller/./node_modules/function-bind/implementation.js","webpack://c300x-controller/./node_modules/function-bind/index.js","webpack://c300x-controller/./node_modules/functions-have-names/index.js","webpack://c300x-controller/./node_modules/futoin-hkdf/hkdf.js","webpack://c300x-controller/./node_modules/get-intrinsic/index.js","webpack://c300x-controller/./node_modules/gopd/index.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/accessories/types.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/index.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/internal-types.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/Accessory.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/AccessoryLoader.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/Advertiser.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/Bridge.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/Characteristic.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/HAPServer.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/Service.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/camera/Camera.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/camera/RTPProxy.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/camera/RTPStreamManagement.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/camera/RecordingManagement.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/camera/index.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/controller/AdaptiveLightingController.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/controller/CameraController.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/controller/Controller.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/controller/DoorbellController.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/controller/RemoteController.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/controller/index.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/datastream/DataStreamManagement.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/datastream/DataStreamParser.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/datastream/DataStreamServer.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/datastream/index.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/definitions/CharacteristicDefinitions.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/definitions/ServiceDefinitions.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/definitions/index.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/model/AccessoryInfo.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/model/ControllerStorage.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/model/HAPStorage.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/model/IdentifierCache.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/tv/AccessControlManagement.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/util/clone.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/util/color-utils.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/util/eventedhttp.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/util/hapCrypto.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/util/hapStatusError.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/util/net-utils.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/util/once.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/util/promise-utils.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/util/request-util.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/util/time.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/util/tlv.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/util/uuid.js","webpack://c300x-controller/./node_modules/hap-nodejs/dist/lib/ sync","webpack://c300x-controller/./node_modules/hap-nodejs/dist/types.js","webpack://c300x-controller/./node_modules/has-bigints/index.js","webpack://c300x-controller/./node_modules/has-flag/index.js","webpack://c300x-controller/./node_modules/has-property-descriptors/index.js","webpack://c300x-controller/./node_modules/has-proto/index.js","webpack://c300x-controller/./node_modules/has-symbols/index.js","webpack://c300x-controller/./node_modules/has-symbols/shams.js","webpack://c300x-controller/./node_modules/has-tostringtag/shams.js","webpack://c300x-controller/./node_modules/hasown/index.js","webpack://c300x-controller/./node_modules/is-arguments/index.js","webpack://c300x-controller/./node_modules/is-array-buffer/index.js","webpack://c300x-controller/./node_modules/is-bigint/index.js","webpack://c300x-controller/./node_modules/is-boolean-object/index.js","webpack://c300x-controller/./node_modules/is-callable/index.js","webpack://c300x-controller/./node_modules/is-date-object/index.js","webpack://c300x-controller/./node_modules/is-map/index.js","webpack://c300x-controller/./node_modules/is-number-object/index.js","webpack://c300x-controller/./node_modules/is-regex/index.js","webpack://c300x-controller/./node_modules/is-set/index.js","webpack://c300x-controller/./node_modules/is-shared-array-buffer/index.js","webpack://c300x-controller/./node_modules/is-string/index.js","webpack://c300x-controller/./node_modules/is-symbol/index.js","webpack://c300x-controller/./node_modules/is-weakmap/index.js","webpack://c300x-controller/./node_modules/is-weakset/index.js","webpack://c300x-controller/./node_modules/isarray/index.js","webpack://c300x-controller/./node_modules/map-stream/index.js","webpack://c300x-controller/./node_modules/mkdirp/index.js","webpack://c300x-controller/./node_modules/ms/index.js","webpack://c300x-controller/./node_modules/multicast-dns-service-types/index.js","webpack://c300x-controller/./node_modules/multicast-dns/index.js","webpack://c300x-controller/./node_modules/node-persist/src/local-storage.js","webpack://c300x-controller/./node_modules/node-persist/src/node-persist.js","webpack://c300x-controller/./node_modules/object-inspect/index.js","webpack://c300x-controller/./node_modules/object-inspect/util.inspect.js","webpack://c300x-controller/./node_modules/object-is/implementation.js","webpack://c300x-controller/./node_modules/object-is/index.js","webpack://c300x-controller/./node_modules/object-is/polyfill.js","webpack://c300x-controller/./node_modules/object-is/shim.js","webpack://c300x-controller/./node_modules/object-keys/implementation.js","webpack://c300x-controller/./node_modules/object-keys/index.js","webpack://c300x-controller/./node_modules/object-keys/isArguments.js","webpack://c300x-controller/./node_modules/object.assign/implementation.js","webpack://c300x-controller/./node_modules/object.assign/index.js","webpack://c300x-controller/./node_modules/object.assign/polyfill.js","webpack://c300x-controller/./node_modules/object.assign/shim.js","webpack://c300x-controller/./node_modules/pause-stream/index.js","webpack://c300x-controller/./node_modules/pick-port/index.js","webpack://c300x-controller/./node_modules/pick-port/lib/tcp.js","webpack://c300x-controller/./node_modules/pick-port/lib/udp.js","webpack://c300x-controller/./node_modules/possible-typed-array-names/index.js","webpack://c300x-controller/./node_modules/q/q.js","webpack://c300x-controller/./node_modules/regexp.prototype.flags/implementation.js","webpack://c300x-controller/./node_modules/regexp.prototype.flags/index.js","webpack://c300x-controller/./node_modules/regexp.prototype.flags/polyfill.js","webpack://c300x-controller/./node_modules/regexp.prototype.flags/shim.js","webpack://c300x-controller/./node_modules/safe-buffer/index.js","webpack://c300x-controller/./node_modules/sax/lib/sax.js","webpack://c300x-controller/./node_modules/set-function-length/index.js","webpack://c300x-controller/./node_modules/set-function-name/index.js","webpack://c300x-controller/./node_modules/side-channel/index.js","webpack://c300x-controller/./node_modules/source-map-support/register.js","webpack://c300x-controller/./node_modules/source-map-support/source-map-support.js","webpack://c300x-controller/./node_modules/source-map/lib/array-set.js","webpack://c300x-controller/./node_modules/source-map/lib/base64-vlq.js","webpack://c300x-controller/./node_modules/source-map/lib/base64.js","webpack://c300x-controller/./node_modules/source-map/lib/binary-search.js","webpack://c300x-controller/./node_modules/source-map/lib/mapping-list.js","webpack://c300x-controller/./node_modules/source-map/lib/quick-sort.js","webpack://c300x-controller/./node_modules/source-map/lib/source-map-consumer.js","webpack://c300x-controller/./node_modules/source-map/lib/source-map-generator.js","webpack://c300x-controller/./node_modules/source-map/lib/source-node.js","webpack://c300x-controller/./node_modules/source-map/lib/util.js","webpack://c300x-controller/./node_modules/source-map/source-map.js","webpack://c300x-controller/./node_modules/split/index.js","webpack://c300x-controller/./node_modules/stream-combiner/index.js","webpack://c300x-controller/./node_modules/supports-color/index.js","webpack://c300x-controller/./node_modules/through/index.js","webpack://c300x-controller/./node_modules/thunky/index.js","webpack://c300x-controller/./bundles/ffmpeg.ts","webpack://c300x-controller/./bundles/homekit-camera-recording.ts","webpack://c300x-controller/./bundles/homekit-camera.ts","webpack://c300x-controller/./bundles/homekit-logger.ts","webpack://c300x-controller/./bundles/homekit-manager.ts","webpack://c300x-controller/./node_modules/tweetnacl/nacl-fast.js","webpack://c300x-controller/./node_modules/which-boxed-primitive/index.js","webpack://c300x-controller/./node_modules/which-collection/index.js","webpack://c300x-controller/./node_modules/which-typed-array/index.js","webpack://c300x-controller/./node_modules/xml2js/lib/bom.js","webpack://c300x-controller/./node_modules/xml2js/lib/builder.js","webpack://c300x-controller/./node_modules/xml2js/lib/defaults.js","webpack://c300x-controller/./node_modules/xml2js/lib/parser.js","webpack://c300x-controller/./node_modules/xml2js/lib/processors.js","webpack://c300x-controller/./node_modules/xml2js/lib/xml2js.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/DocumentPosition.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/NodeType.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/Utility.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/WriterState.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLAttribute.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLCData.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLCharacterData.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLComment.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLDOMConfiguration.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLDOMErrorHandler.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLDOMImplementation.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLDOMStringList.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLDTDAttList.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLDTDElement.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLDTDEntity.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLDTDNotation.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLDeclaration.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLDocType.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLDocument.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLDocumentCB.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLDummy.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLElement.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLNamedNodeMap.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLNode.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLNodeList.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLProcessingInstruction.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLRaw.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLStreamWriter.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLStringWriter.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLStringifier.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLText.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/XMLWriterBase.js","webpack://c300x-controller/./node_modules/xmlbuilder/lib/index.js","webpack://c300x-controller/external node-commonjs \"assert\"","webpack://c300x-controller/external node-commonjs \"buffer\"","webpack://c300x-controller/external node-commonjs \"child_process\"","webpack://c300x-controller/external node-commonjs \"crypto\"","webpack://c300x-controller/external node-commonjs \"dgram\"","webpack://c300x-controller/external node-commonjs \"events\"","webpack://c300x-controller/external node-commonjs \"fs\"","webpack://c300x-controller/external node-commonjs \"http\"","webpack://c300x-controller/external node-commonjs \"https\"","webpack://c300x-controller/external node-commonjs \"net\"","webpack://c300x-controller/external node-commonjs \"os\"","webpack://c300x-controller/external node-commonjs \"path\"","webpack://c300x-controller/external node-commonjs \"readline\"","webpack://c300x-controller/external node-commonjs \"stream\"","webpack://c300x-controller/external node-commonjs \"string_decoder\"","webpack://c300x-controller/external node-commonjs \"timers\"","webpack://c300x-controller/external node-commonjs \"tty\"","webpack://c300x-controller/external node-commonjs \"url\"","webpack://c300x-controller/external node-commonjs \"util\"","webpack://c300x-controller/./node_modules/@homebridge/long/umd/index.js","webpack://c300x-controller/./node_modules/@leichtgewicht/ip-codec/index.cjs","webpack://c300x-controller/./node_modules/available-typed-arrays/index.js","webpack://c300x-controller/./node_modules/es-get-iterator/node.js","webpack://c300x-controller/./node_modules/tslib/tslib.es6.mjs","webpack://c300x-controller/webpack/bootstrap","webpack://c300x-controller/webpack/runtime/define property getters","webpack://c300x-controller/webpack/runtime/hasOwnProperty shorthand","webpack://c300x-controller/webpack/runtime/make namespace object","webpack://c300x-controller/webpack/runtime/node module decorator","webpack://c300x-controller/webpack/before-startup","webpack://c300x-controller/webpack/startup","webpack://c300x-controller/webpack/after-startup"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CiaoService = exports.InternalServiceEvent = exports.ServiceEvent = exports.ServiceState = exports.ServiceType = void 0;\nconst tslib_1 = require(\"tslib\");\n/* eslint-disable @typescript-eslint/no-unsafe-declaration-merging */\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst debug_1 = tslib_1.__importDefault(require(\"debug\"));\nconst events_1 = require(\"events\");\nconst net_1 = tslib_1.__importDefault(require(\"net\"));\nconst AAAARecord_1 = require(\"./coder/records/AAAARecord\");\nconst ARecord_1 = require(\"./coder/records/ARecord\");\nconst NSECRecord_1 = require(\"./coder/records/NSECRecord\");\nconst PTRRecord_1 = require(\"./coder/records/PTRRecord\");\nconst SRVRecord_1 = require(\"./coder/records/SRVRecord\");\nconst TXTRecord_1 = require(\"./coder/records/TXTRecord\");\nconst ResourceRecord_1 = require(\"./coder/ResourceRecord\");\nconst index_1 = require(\"./index\");\nconst NetworkManager_1 = require(\"./NetworkManager\");\nconst dns_equal_1 = require(\"./util/dns-equal\");\nconst domainFormatter = tslib_1.__importStar(require(\"./util/domain-formatter\"));\nconst domain_formatter_1 = require(\"./util/domain-formatter\");\nconst debug = (0, debug_1.default)(\"ciao:CiaoService\");\nconst numberedServiceNamePattern = /^(.*) \\((\\d+)\\)$/; // matches a name lik \"My Service (2)\"\nconst numberedHostnamePattern = /^(.*)-\\((\\d+)\\)(\\.\\w{2,}.)$/; // matches a hostname like \"My-Computer-(2).local.\"\n/**\n * This enum defines some commonly used service types.\n * This is also referred to as service name (as of RFC 6763).\n * A service name must not be longer than 15 characters (RFC 6763 7.2).\n */\nvar ServiceType;\n(function (ServiceType) {\n    // noinspection JSUnusedGlobalSymbols\n    ServiceType[\"AIRDROP\"] = \"airdrop\";\n    ServiceType[\"AIRPLAY\"] = \"airplay\";\n    ServiceType[\"AIRPORT\"] = \"airport\";\n    ServiceType[\"COMPANION_LINK\"] = \"companion-link\";\n    ServiceType[\"DACP\"] = \"dacp\";\n    ServiceType[\"HAP\"] = \"hap\";\n    ServiceType[\"HOMEKIT\"] = \"homekit\";\n    ServiceType[\"HTTP\"] = \"http\";\n    ServiceType[\"HTTP_ALT\"] = \"http_alt\";\n    ServiceType[\"IPP\"] = \"ipp\";\n    ServiceType[\"IPPS\"] = \"ipps\";\n    ServiceType[\"RAOP\"] = \"raop\";\n    ServiceType[\"scanner\"] = \"scanner\";\n    ServiceType[\"TOUCH_ABLE\"] = \"touch-able\";\n    ServiceType[\"DNS_SD\"] = \"dns-sd\";\n    ServiceType[\"PRINTER\"] = \"printer\";\n})(ServiceType || (exports.ServiceType = ServiceType = {}));\n/**\n * @private\n */\nvar ServiceState;\n(function (ServiceState) {\n    ServiceState[\"UNANNOUNCED\"] = \"unannounced\";\n    ServiceState[\"PROBING\"] = \"probing\";\n    ServiceState[\"PROBED\"] = \"probed\";\n    ServiceState[\"ANNOUNCING\"] = \"announcing\";\n    ServiceState[\"ANNOUNCED\"] = \"announced\";\n})(ServiceState || (exports.ServiceState = ServiceState = {}));\n/**\n * Events thrown by a CiaoService\n */\nvar ServiceEvent;\n(function (ServiceEvent) {\n    /**\n     * Event is called when the Prober identifies that the name for the service is already used\n     * and thus resolve the name conflict by adjusting the name (e.g. adding '(2)' to the name).\n     * This change must be persisted and thus a listener must hook up to this event\n     * in order for the name to be persisted.\n     */\n    ServiceEvent[\"NAME_CHANGED\"] = \"name-change\";\n    /**\n     * Event is called when the Prober identifies that the hostname for the service is already used\n     * and thus resolve the name conflict by adjusting the hostname (e.g. adding '(2)' to the hostname).\n     * The name change must be persisted. As the hostname is an optional parameter, it is derived\n     * from the service name if not supplied.\n     * If you supply a custom hostname (not automatically derived from the service name) you must\n     * hook up a listener to this event in order for the hostname to be persisted.\n     */\n    ServiceEvent[\"HOSTNAME_CHANGED\"] = \"hostname-change\";\n})(ServiceEvent || (exports.ServiceEvent = ServiceEvent = {}));\n/**\n * Events thrown by a CiaoService, internal use only!\n * @private\n */\nvar InternalServiceEvent;\n(function (InternalServiceEvent) {\n    InternalServiceEvent[\"PUBLISH\"] = \"publish\";\n    InternalServiceEvent[\"UNPUBLISH\"] = \"unpublish\";\n    InternalServiceEvent[\"REPUBLISH\"] = \"republish\";\n    InternalServiceEvent[\"RECORD_UPDATE\"] = \"records-update\";\n    InternalServiceEvent[\"RECORD_UPDATE_ON_INTERFACE\"] = \"records-update-interface\";\n})(InternalServiceEvent || (exports.InternalServiceEvent = InternalServiceEvent = {}));\n/**\n * The CiaoService class represents a service which can be advertised on the network.\n *\n * A service is identified by its fully qualified domain name (FQDN), which consist of\n * the service name, the service type, the protocol and the service domain (.local by default).\n *\n * The service defines a hostname and a port where the advertised service can be reached.\n *\n * Additionally, a TXT record can be published, which can contain information (in form of key-value pairs),\n * which might be useful to a querier.\n *\n * A CiaoService class is always bound to a {@link Responder} and can be created using the\n * {@link Responder.createService} method in the Responder class.\n * Once the instance is created, {@link advertise} can be called to announce the service on the network.\n */\nclass CiaoService extends events_1.EventEmitter {\n    /**\n     * Constructs a new service. Please use {@link Responder.createService} to create new service.\n     * When calling the constructor a callee must listen to certain events in order to provide\n     * correct functionality.\n     * @private used by the Responder instance to create a new service\n     */\n    constructor(networkManager, options) {\n        super();\n        /**\n         * this field is entirely controlled by the Responder class\n         * @private use by the Responder to set the current service state\n         */\n        this.serviceState = \"unannounced\" /* ServiceState.UNANNOUNCED */;\n        this.destroyed = false;\n        (0, assert_1.default)(networkManager, \"networkManager is required\");\n        (0, assert_1.default)(options, \"parameters options is required\");\n        (0, assert_1.default)(options.name, \"service options parameter 'name' is required\");\n        (0, assert_1.default)(options.type, \"service options parameter 'type' is required\");\n        (0, assert_1.default)(options.type.length <= 15, \"service options parameter 'type' must not be longer than 15 characters\");\n        this.networkManager = networkManager;\n        this.name = options.name;\n        this.type = options.type;\n        this.subTypes = options.subtypes;\n        this.protocol = options.protocol || \"tcp\" /* Protocol.TCP */;\n        this.serviceDomain = options.domain || \"local\";\n        this.fqdn = this.formatFQDN();\n        this.loweredFqdn = (0, dns_equal_1.dnsLowerCase)(this.fqdn);\n        this.typePTR = domainFormatter.stringify({\n            type: this.type,\n            protocol: this.protocol,\n            domain: this.serviceDomain,\n        });\n        this.loweredTypePTR = (0, dns_equal_1.dnsLowerCase)(this.typePTR);\n        if (this.subTypes) {\n            this.subTypePTRs = this.subTypes.map(subtype => domainFormatter.stringify({\n                subtype: subtype,\n                type: this.type,\n                protocol: this.protocol,\n                domain: this.serviceDomain,\n            })).map(dns_equal_1.dnsLowerCase);\n        }\n        this.hostname = domainFormatter.formatHostname(options.hostname || this.name, this.serviceDomain)\n            .replace(/ /g, \"-\"); // replacing all spaces with dashes in the hostname\n        this.loweredHostname = (0, dns_equal_1.dnsLowerCase)(this.hostname);\n        this.port = options.port;\n        if (options.restrictedAddresses) {\n            (0, assert_1.default)(options.restrictedAddresses.length, \"The service property 'restrictedAddresses' cannot be an empty array!\");\n            this.restrictedAddresses = new Map();\n            for (const entry of options.restrictedAddresses) {\n                if (net_1.default.isIP(entry)) {\n                    if (entry === \"0.0.0.0\" || entry === \"::\") {\n                        throw new Error(`[${this.fqdn}] Unspecified ip address (${entry}) cannot be used to restrict on to!`);\n                    }\n                    const interfaceName = NetworkManager_1.NetworkManager.resolveInterface(entry);\n                    if (!interfaceName) {\n                        throw new Error(`[${this.fqdn}] Could not restrict service to address ${entry} as we could not resolve it to an interface name!`);\n                    }\n                    const current = this.restrictedAddresses.get(interfaceName);\n                    if (current) {\n                        // empty interface signals \"catch all\" was already configured for this\n                        if (current.length && !current.includes(entry)) {\n                            current.push(entry);\n                        }\n                    }\n                    else {\n                        this.restrictedAddresses.set(interfaceName, [entry]);\n                    }\n                }\n                else {\n                    this.restrictedAddresses.set(entry, []); // empty array signals \"use all addresses for interface\"\n                }\n            }\n        }\n        this.disableIpv6 = options.disabledIpv6;\n        this.txt = options.txt ? CiaoService.txtBuffersFromRecord(options.txt) : [];\n        // checks if hostname or name are already numbered and adjusts the numbers if necessary\n        this.incrementName(true);\n    }\n    /**\n     * This method start the advertising process of the service:\n     *  - The service name (and hostname) will be probed unique on all interfaces (as defined in RFC 6762 8.1).\n     *  - Once probed unique the service will be announced (as defined in RFC 6762 8.3).\n     *\n     *  The returned promise resolves once the last announcement packet was successfully sent on all network interfaces.\n     *  The promise might be rejected caused by one of the following reasons:\n     *    - A probe query could not be sent successfully\n     *    - Prober could not find a unique service name while trying for a minute (timeout)\n     *    - One of the announcement packets could not be sent successfully\n     */\n    advertise() {\n        (0, assert_1.default)(!this.destroyed, \"Cannot publish destroyed service!\");\n        (0, assert_1.default)(this.port, \"Service port must be defined before advertising the service on the network!\");\n        if (this.listeners(\"name-change\" /* ServiceEvent.NAME_CHANGED */).length === 0) {\n            debug(\"[%s] WARN: No listeners found for a potential name change on the 'name-change' event!\", this.name);\n        }\n        return new Promise((resolve, reject) => {\n            this.emit(\"publish\" /* InternalServiceEvent.PUBLISH */, error => error ? reject(error) : resolve());\n        });\n    }\n    /**\n     * This method will remove the advertisement for the service on all connected network interfaces.\n     * If the service is still in the Probing state, probing will simply be cancelled.\n     *\n     * @returns Promise will resolve once the last goodbye packet was sent out\n     */\n    end() {\n        (0, assert_1.default)(!this.destroyed, \"Cannot end destroyed service!\");\n        if (this.serviceState === \"unannounced\" /* ServiceState.UNANNOUNCED */) {\n            return Promise.resolve();\n        }\n        return new Promise((resolve, reject) => {\n            this.emit(\"unpublish\" /* InternalServiceEvent.UNPUBLISH */, error => error ? reject(error) : resolve());\n        });\n    }\n    /**\n     * This method must be called if you want to free the memory used by this service.\n     * The service instance is not usable anymore after this call.\n     *\n     * If the service is still announced, the service will first be removed\n     * from the network by calling {@link end}.\n     *\n     * @returns\n     */\n    async destroy() {\n        await this.end();\n        this.destroyed = true;\n        this.removeAllListeners();\n    }\n    /**\n     * @returns The fully qualified domain name of the service, used to identify the service.\n     */\n    getFQDN() {\n        return this.fqdn;\n    }\n    /**\n     * @returns The service type pointer.\n     */\n    getTypePTR() {\n        return this.typePTR;\n    }\n    /**\n     * @returns Array of subtype pointers (undefined if no subtypes are specified).\n     */\n    getLowerCasedSubtypePTRs() {\n        return this.subTypePTRs;\n    }\n    /**\n     * @returns The current hostname of the service.\n     */\n    getHostname() {\n        return this.hostname;\n    }\n    /**\n     * @returns The port the service is advertising for.\n     * {@code -1} is returned when the port is not yet set.\n     */\n    getPort() {\n        return this.port || -1;\n    }\n    /**\n     * @returns The current TXT of the service represented as Buffer array.\n     * @private There is not need for this to be public API\n     */\n    getTXT() {\n        return this.txt;\n    }\n    /**\n     * @private used for internal comparison {@link dnsLowerCase}\n     */\n    getLowerCasedFQDN() {\n        return this.loweredFqdn;\n    }\n    /**\n     * @private used for internal comparison {@link dnsLowerCase}\n     */\n    getLowerCasedTypePTR() {\n        return this.loweredTypePTR;\n    }\n    /**\n     * @private used for internal comparison {@link dnsLowerCase}\n     */\n    getLowerCasedHostname() {\n        return this.loweredHostname;\n    }\n    /**\n     * Sets or updates the txt of the service.\n     *\n     * @param {ServiceTxt} txt - The updated txt record.\n     * @param {boolean} silent - If set to true no announcement is sent for the updated record.\n     */\n    updateTxt(txt, silent = false) {\n        (0, assert_1.default)(!this.destroyed, \"Cannot update destroyed service!\");\n        (0, assert_1.default)(txt, \"txt cannot be undefined\");\n        this.txt = CiaoService.txtBuffersFromRecord(txt);\n        debug(\"[%s] Updating txt record%s...\", this.name, silent ? \" silently\" : \"\");\n        if (this.serviceState === \"announcing\" /* ServiceState.ANNOUNCING */) {\n            this.rebuildServiceRecords();\n            if (silent) {\n                return;\n            }\n            if (this.currentAnnouncer.hasSentLastAnnouncement()) {\n                // if the announcer hasn't sent the last announcement, the above call of rebuildServiceRecords will\n                // result in updated records on the next announcement. Otherwise, we still need to announce the updated records\n                this.currentAnnouncer.awaitAnnouncement().then(() => {\n                    this.queueTxtUpdate();\n                });\n            }\n        }\n        else if (this.serviceState === \"announced\" /* ServiceState.ANNOUNCED */) {\n            this.rebuildServiceRecords();\n            if (silent) {\n                return;\n            }\n            this.queueTxtUpdate();\n        }\n    }\n    queueTxtUpdate() {\n        if (this.txtTimer) {\n            return;\n        }\n        else {\n            // we debounce txt updates, otherwise if api users would spam txt updates, we would receive the txt record\n            // while we already update our txt to the next call, thus causing a conflict being detected.\n            // We would then continue with Probing (to ensure uniqueness) and could then receive following spammed updates as conflicts,\n            // and we would change our name without it being necessary\n            this.txtTimer = setTimeout(() => {\n                this.txtTimer = undefined;\n                if (this.serviceState !== \"announced\" /* ServiceState.ANNOUNCED */) { // stuff changed in the last 50 milliseconds\n                    return;\n                }\n                this.emit(\"records-update\" /* InternalServiceEvent.RECORD_UPDATE */, {\n                    answers: [this.txtRecord()],\n                    additionals: [this.serviceNSECRecord()],\n                });\n            }, 50);\n        }\n    }\n    /**\n     * Sets or updates the port of the service.\n     * A new port number can only be set when the service is still UNANNOUNCED.\n     * Otherwise, an assertion error will be thrown.\n     *\n     * @param {number} port - The new port number.\n     */\n    updatePort(port) {\n        (0, assert_1.default)(this.serviceState === \"unannounced\" /* ServiceState.UNANNOUNCED */, \"Port number cannot be changed when service is already advertised!\");\n        this.port = port;\n    }\n    /**\n     * This method updates the name of the service.\n     * @param name - The new service name.\n     * @private Currently not public API and only used for bonjour conformance testing.\n     */\n    updateName(name) {\n        if (this.serviceState === \"unannounced\" /* ServiceState.UNANNOUNCED */) {\n            this.name = name;\n            this.fqdn = this.formatFQDN();\n            this.loweredFqdn = (0, dns_equal_1.dnsLowerCase)(this.fqdn);\n            return Promise.resolve();\n        }\n        else {\n            return this.end() // send goodbye packets for the current name\n                .then(() => {\n                this.name = name;\n                this.fqdn = this.formatFQDN();\n                this.loweredFqdn = (0, dns_equal_1.dnsLowerCase)(this.fqdn);\n                // service records are going to be rebuilt on the 'advertise' step\n                return this.advertise();\n            });\n        }\n    }\n    static txtBuffersFromRecord(txt) {\n        const result = [];\n        Object.entries(txt).forEach(([key, value]) => {\n            const entry = key + \"=\" + value;\n            result.push(Buffer.from(entry));\n        });\n        return result;\n    }\n    /**\n     * @param networkUpdate\n     * @private\n     */\n    handleNetworkInterfaceUpdate(networkUpdate) {\n        (0, assert_1.default)(!this.destroyed, \"Cannot update network of destroyed service!\");\n        // this will currently only be called when service is ANNOUNCED or in ANNOUNCING state\n        if (this.serviceState !== \"announced\" /* ServiceState.ANNOUNCED */) {\n            if (this.serviceState === \"announcing\" /* ServiceState.ANNOUNCING */) {\n                this.rebuildServiceRecords();\n                if (this.currentAnnouncer.hasSentLastAnnouncement()) {\n                    // if the announcer hasn't sent the last announcement, the above call of rebuildServiceRecords will\n                    // result in updated records on the next announcement. Otherwise, we still need to announce the updated records\n                    this.currentAnnouncer.awaitAnnouncement().then(() => {\n                        this.handleNetworkInterfaceUpdate(networkUpdate);\n                    });\n                }\n            }\n            return; // service records are rebuilt short before the 'announce' step\n        }\n        // we don't care about removed interfaces. We can't send goodbye records on a non-existing interface\n        this.rebuildServiceRecords();\n        // records for a removed interface are now no longer present after the call above\n        // records for a new interface got now built by the call above\n        /* logic disabled for now\n        if (networkUpdate.changes) {\n          // we could optimize this and don't send the announcement of records if we have also added a new interface\n          // Though probing will take at least 750 ms and thus sending it out immediately will get the information out faster.\n    \n          for (const change of networkUpdate.changes) {\n            if (!this.advertisesOnInterface(change.name, true)) {\n              continue;\n            }\n    \n            let restrictedAddresses: IPAddress[] | undefined = this.restrictedAddresses? this.restrictedAddresses.get(change.name): undefined;\n            if (restrictedAddresses && restrictedAddresses.length === 0) {\n              restrictedAddresses = undefined;\n            }\n            const records: ResourceRecord[] = [];\n    \n            if (change.outdatedIpv4 && (!restrictedAddresses || restrictedAddresses.includes(change.outdatedIpv4))) {\n              records.push(new ARecord(this.hostname, change.outdatedIpv4, true, 0));\n              // records.push(new PTRRecord(formatReverseAddressPTRName(change.outdatedIpv4), this.hostname, false, 0));\n            }\n            if (change.outdatedIpv6 && !this.disableIpv6 && (!restrictedAddresses || restrictedAddresses.includes(change.outdatedIpv6))) {\n              records.push(new AAAARecord(this.hostname, change.outdatedIpv6, true, 0));\n              // records.push(new PTRRecord(formatReverseAddressPTRName(change.outdatedIpv6), this.hostname, false, 0));\n            }\n            if (change.outdatedGloballyRoutableIpv6 && !this.disableIpv6 && (!restrictedAddresses || restrictedAddresses.includes(change.outdatedGloballyRoutableIpv6))) {\n              records.push(new AAAARecord(this.hostname, change.outdatedGloballyRoutableIpv6, true, 0));\n              // records.push(new PTRRecord(formatReverseAddressPTRName(change.outdatedGloballyRoutableIpv6), this.hostname, false, 0));\n            }\n            if (change.outdatedUniqueLocalIpv6 && !this.disableIpv6 && (!restrictedAddresses || restrictedAddresses.includes(change.outdatedUniqueLocalIpv6))) {\n              records.push(new AAAARecord(this.hostname, change.outdatedUniqueLocalIpv6, true, 0));\n              // records.push(new PTRRecord(formatReverseAddressPTRName(change.outdatedUniqueLocalIpv6), this.hostname, false, 0));\n            }\n    \n            if (change.updatedIpv4 && (!restrictedAddresses || restrictedAddresses.includes(change.updatedIpv4))) {\n              records.push(new ARecord(this.hostname, change.updatedIpv4, true));\n              // records.push(new PTRRecord(formatReverseAddressPTRName(change.updatedIpv4), this.hostname));\n            }\n            if (change.updatedIpv6 && !this.disableIpv6 && (!restrictedAddresses || restrictedAddresses.includes(change.updatedIpv6))) {\n              records.push(new AAAARecord(this.hostname, change.updatedIpv6, true));\n              // records.push(new PTRRecord(formatReverseAddressPTRName(change.updatedIpv6), this.hostname));\n            }\n            if (change.updatedGloballyRoutableIpv6 && !this.disableIpv6 && (!restrictedAddresses || restrictedAddresses.includes(change.updatedGloballyRoutableIpv6))) {\n              records.push(new AAAARecord(this.hostname, change.updatedGloballyRoutableIpv6, true));\n              // records.push(new PTRRecord(formatReverseAddressPTRName(change.updatedGloballyRoutableIpv6), this.hostname));\n            }\n            if (change.updatedUniqueLocalIpv6 && !this.disableIpv6 && (!restrictedAddresses || restrictedAddresses.includes(change.updatedUniqueLocalIpv6))) {\n              records.push(new AAAARecord(this.hostname, change.updatedUniqueLocalIpv6, true));\n              // records.push(new PTRRecord(formatReverseAddressPTRName(change.updatedUniqueLocalIpv6), this.hostname));\n            }\n    \n            this.emit(InternalServiceEvent.RECORD_UPDATE_ON_INTERFACE, change.name, records);\n          }\n        }\n        */\n        if (networkUpdate.added || networkUpdate.changes) {\n            // a new network interface got added. We must return into probing state,\n            // as we don't know if we still own uniqueness for our service name on the new network.\n            // To make things easy and keep the SAME name on all networks, we probe on ALL interfaces.\n            // at this moment the new socket won't be bound. Though probing steps are delayed,\n            // thus, when sending the first request, the socket will be bound, and we don't need to wait here\n            this.emit(\"republish\" /* InternalServiceEvent.REPUBLISH */, error => {\n                if (error) {\n                    console.log(\"FATAL Error occurred trying to re-announce service \" + this.fqdn + \"! We can't recover from this!\");\n                    console.log(error.stack);\n                    process.exit(1); // we have a service which should be announced, though we failed to re-announce.\n                    // if this should ever happen in reality, whe might want to introduce a more sophisticated recovery\n                    // for situations where it makes sense\n                }\n            });\n        }\n    }\n    /**\n     * This method is called by the Prober when encountering a conflict on the network.\n     * It advises the service to change its name, like incrementing a number appended to the name.\n     * So \"My Service\" will become \"My Service (2)\", and \"My Service (2)\" would become \"My Service (3)\"\n     * @private must only be called by the {@link Prober}\n     */\n    incrementName(nameCheckOnly) {\n        if (this.serviceState !== \"unannounced\" /* ServiceState.UNANNOUNCED */) {\n            throw new Error(\"Service name can only be incremented when in state UNANNOUNCED!\");\n        }\n        const oldName = this.name;\n        const oldHostname = this.hostname;\n        let nameBase;\n        let nameNumber;\n        let hostnameBase;\n        let hostnameTLD;\n        let hostnameNumber;\n        const nameMatcher = this.name.match(numberedServiceNamePattern);\n        if (nameMatcher) { // if it matched. Extract the current nameNumber\n            nameBase = nameMatcher[1];\n            nameNumber = parseInt(nameMatcher[2]);\n            (0, assert_1.default)(nameNumber, `Failed to extract name number from ${this.name}. Resulted in ${nameNumber}`);\n        }\n        else {\n            nameBase = this.name;\n            nameNumber = 1;\n        }\n        const hostnameMatcher = this.hostname.match(numberedHostnamePattern);\n        if (hostnameMatcher) { // if it matched. Extract the current nameNumber\n            hostnameBase = hostnameMatcher[1];\n            hostnameTLD = hostnameMatcher[3];\n            hostnameNumber = parseInt(hostnameMatcher[2]);\n            (0, assert_1.default)(hostnameNumber, `Failed to extract hostname number from ${this.hostname}. Resulted in ${hostnameNumber}`);\n        }\n        else {\n            // we need to substring, to not match the root label \".\"\n            const lastDot = this.hostname.substring(0, this.hostname.length - 1).lastIndexOf(\".\");\n            hostnameBase = this.hostname.slice(0, lastDot);\n            hostnameTLD = this.hostname.slice(lastDot);\n            hostnameNumber = 1;\n        }\n        if (!nameCheckOnly) {\n            // increment the numbers\n            nameNumber++;\n            hostnameNumber++;\n        }\n        const newNumber = Math.max(nameNumber, hostnameNumber);\n        // reassemble the name\n        this.name = newNumber === 1 ? nameBase : `${nameBase} (${newNumber})`;\n        this.hostname = newNumber === 1 ? `${hostnameBase}${hostnameTLD}` : `${hostnameBase}-(${newNumber})${hostnameTLD}`;\n        this.loweredHostname = (0, dns_equal_1.dnsLowerCase)(this.hostname);\n        this.fqdn = this.formatFQDN(); // update the fqdn\n        this.loweredFqdn = (0, dns_equal_1.dnsLowerCase)(this.fqdn);\n        // we must inform the user that the names changed, so the new names can be persisted\n        // This is done after the Probing finish, as multiple name changes could happen in one probing session\n        // It is the responsibility of the Prober to call the informAboutNameUpdates function\n        if (this.name !== oldName || this.hostname !== oldHostname) {\n            debug(\"[%s] Service changed name '%s' -> '%s', '%s' -> '%s'\", this.name, oldName, this.name, oldHostname, this.hostname);\n        }\n        if (!nameCheckOnly) {\n            this.rebuildServiceRecords(); // rebuild all services\n        }\n    }\n    /**\n     * @private called by the Prober once finished with probing to signal a (or more)\n     *   name change(s) happened {@see incrementName}.\n     */\n    informAboutNameUpdates() {\n        // we trust the prober that this function is only called when the name was actually changed\n        const nameCalled = this.emit(\"name-change\" /* ServiceEvent.NAME_CHANGED */, this.name);\n        const hostnameCalled = this.emit(\"hostname-change\" /* ServiceEvent.HOSTNAME_CHANGED */, domainFormatter.removeTLD(this.hostname));\n        // at least one event should be listened to. We can figure out the number from one or another\n        if (!nameCalled && !hostnameCalled) {\n            console.warn(`CIAO: [${this.name}] Service changed name but nobody was listening on the 'name-change' event!`);\n        }\n    }\n    formatFQDN() {\n        if (this.serviceState !== \"unannounced\" /* ServiceState.UNANNOUNCED */) {\n            throw new Error(\"Name can't be changed after service was already announced!\");\n        }\n        const fqdn = domainFormatter.stringify({\n            name: this.name,\n            type: this.type,\n            protocol: this.protocol,\n            domain: this.serviceDomain,\n        });\n        (0, assert_1.default)(fqdn.length <= 255, \"A fully qualified domain name cannot be longer than 255 characters\");\n        return fqdn;\n    }\n    /**\n     * @private called once the service data/state is updated and the records should be updated with the new data\n     */\n    rebuildServiceRecords() {\n        (0, assert_1.default)(this.port, \"port must be set before building records\");\n        debug(\"[%s] Rebuilding service records...\", this.name);\n        const aRecordMap = {};\n        const aaaaRecordMap = {};\n        const aaaaRoutableRecordMap = {};\n        const aaaaUniqueLocalRecordMap = {};\n        const reverseAddressMap = {};\n        let subtypePTRs = undefined;\n        for (const [name, networkInterface] of this.networkManager.getInterfaceMap()) {\n            if (!this.advertisesOnInterface(name, true)) {\n                continue;\n            }\n            let restrictedAddresses = this.restrictedAddresses ? this.restrictedAddresses.get(name) : undefined;\n            if (restrictedAddresses && restrictedAddresses.length === 0) {\n                restrictedAddresses = undefined;\n            }\n            if (networkInterface.ipv4 && (!restrictedAddresses || restrictedAddresses.includes(networkInterface.ipv4))) {\n                aRecordMap[name] = new ARecord_1.ARecord(this.hostname, networkInterface.ipv4, true);\n                reverseAddressMap[networkInterface.ipv4] = new PTRRecord_1.PTRRecord((0, domain_formatter_1.formatReverseAddressPTRName)(networkInterface.ipv4), this.hostname);\n            }\n            if (networkInterface.ipv6 && !this.disableIpv6 && (!restrictedAddresses || restrictedAddresses.includes(networkInterface.ipv6))) {\n                aaaaRecordMap[name] = new AAAARecord_1.AAAARecord(this.hostname, networkInterface.ipv6, true);\n                reverseAddressMap[networkInterface.ipv6] = new PTRRecord_1.PTRRecord((0, domain_formatter_1.formatReverseAddressPTRName)(networkInterface.ipv6), this.hostname);\n            }\n            if (networkInterface.globallyRoutableIpv6 && !this.disableIpv6 && (!restrictedAddresses || restrictedAddresses.includes(networkInterface.globallyRoutableIpv6))) {\n                aaaaRoutableRecordMap[name] = new AAAARecord_1.AAAARecord(this.hostname, networkInterface.globallyRoutableIpv6, true);\n                reverseAddressMap[networkInterface.globallyRoutableIpv6] = new PTRRecord_1.PTRRecord((0, domain_formatter_1.formatReverseAddressPTRName)(networkInterface.globallyRoutableIpv6), this.hostname);\n            }\n            if (networkInterface.uniqueLocalIpv6 && !this.disableIpv6 && (!restrictedAddresses || restrictedAddresses.includes(networkInterface.uniqueLocalIpv6))) {\n                aaaaUniqueLocalRecordMap[name] = new AAAARecord_1.AAAARecord(this.hostname, networkInterface.uniqueLocalIpv6, true);\n                reverseAddressMap[networkInterface.uniqueLocalIpv6] = new PTRRecord_1.PTRRecord((0, domain_formatter_1.formatReverseAddressPTRName)(networkInterface.uniqueLocalIpv6), this.hostname);\n            }\n        }\n        if (this.subTypePTRs) {\n            subtypePTRs = [];\n            for (const ptr of this.subTypePTRs) {\n                subtypePTRs.push(new PTRRecord_1.PTRRecord(ptr, this.fqdn));\n            }\n        }\n        this.serviceRecords = {\n            ptr: new PTRRecord_1.PTRRecord(this.typePTR, this.fqdn),\n            subtypePTRs: subtypePTRs, // possibly undefined\n            metaQueryPtr: new PTRRecord_1.PTRRecord(index_1.Responder.SERVICE_TYPE_ENUMERATION_NAME, this.typePTR),\n            srv: new SRVRecord_1.SRVRecord(this.fqdn, this.hostname, this.port, true),\n            txt: new TXTRecord_1.TXTRecord(this.fqdn, this.txt, true),\n            serviceNSEC: new NSECRecord_1.NSECRecord(this.fqdn, this.fqdn, [16 /* RType.TXT */, 33 /* RType.SRV */], 4500, true), // 4500 ttl of src and txt\n            a: aRecordMap,\n            aaaa: aaaaRecordMap,\n            aaaaR: aaaaRoutableRecordMap,\n            aaaaULA: aaaaUniqueLocalRecordMap,\n            reverseAddressPTRs: reverseAddressMap,\n            addressNSEC: new NSECRecord_1.NSECRecord(this.hostname, this.hostname, [1 /* RType.A */, 28 /* RType.AAAA */], 120, true), // 120 TTL of A and AAAA records\n        };\n    }\n    /**\n     * Returns if the given service is advertising on the provided network interface.\n     *\n     * @param name - The desired interface name.\n     * @param skipAddressCheck - If true it is not checked if the service actually has\n     *   an address record for the given interface.\n     * @private returns if the service should be advertised on the given service\n     */\n    advertisesOnInterface(name, skipAddressCheck) {\n        var _a, _b, _c, _d;\n        return !this.restrictedAddresses || this.restrictedAddresses.has(name) && (skipAddressCheck ||\n            // must have at least one address record on the given interface\n            !!((_a = this.serviceRecords) === null || _a === void 0 ? void 0 : _a.a[name]) || !!((_b = this.serviceRecords) === null || _b === void 0 ? void 0 : _b.aaaa[name])\n            || !!((_c = this.serviceRecords) === null || _c === void 0 ? void 0 : _c.aaaaR[name]) || !!((_d = this.serviceRecords) === null || _d === void 0 ? void 0 : _d.aaaaULA[name]));\n    }\n    /**\n     * @private used to get a copy of the main PTR record\n     */\n    ptrRecord() {\n        return this.serviceRecords.ptr.clone();\n    }\n    /**\n     * @private used to get a copy of the array of subtype PTR records\n     */\n    subtypePtrRecords() {\n        return this.serviceRecords.subtypePTRs ? ResourceRecord_1.ResourceRecord.clone(this.serviceRecords.subtypePTRs) : [];\n    }\n    /**\n     * @private used to get a copy of the meta-query PTR record\n     */\n    metaQueryPtrRecord() {\n        return this.serviceRecords.metaQueryPtr.clone();\n    }\n    /**\n     * @private used to get a copy of the SRV record\n     */\n    srvRecord() {\n        return this.serviceRecords.srv.clone();\n    }\n    /**\n     * @private used to get a copy of the TXT record\n     */\n    txtRecord() {\n        return this.serviceRecords.txt.clone();\n    }\n    /**\n     * @private used to get a copy of the A record\n     */\n    aRecord(name) {\n        const record = this.serviceRecords.a[name];\n        return record ? record.clone() : undefined;\n    }\n    /**\n     * @private used to get a copy of the AAAA record for the link-local ipv6 address\n     */\n    aaaaRecord(name) {\n        const record = this.serviceRecords.aaaa[name];\n        return record ? record.clone() : undefined;\n    }\n    /**\n     * @private used to get a copy of the AAAA record for the routable ipv6 address\n     */\n    aaaaRoutableRecord(name) {\n        const record = this.serviceRecords.aaaaR[name];\n        return record ? record.clone() : undefined;\n    }\n    /**\n     * @private used to get a copy of the AAAA for the unique local ipv6 address\n     */\n    aaaaUniqueLocalRecord(name) {\n        const record = this.serviceRecords.aaaaULA[name];\n        return record ? record.clone() : undefined;\n    }\n    /**\n     * @private used to get a copy of the A and AAAA records\n     */\n    allAddressRecords() {\n        const records = [];\n        Object.values(this.serviceRecords.a).forEach(record => {\n            records.push(record.clone());\n        });\n        Object.values(this.serviceRecords.aaaa).forEach(record => {\n            records.push(record.clone());\n        });\n        Object.values(this.serviceRecords.aaaaR).forEach(record => {\n            records.push(record.clone());\n        });\n        Object.values(this.serviceRecords.aaaaULA).forEach(record => {\n            records.push(record.clone());\n        });\n        return records;\n    }\n    /**\n     * @private used to get a copy of the address NSEC record\n     */\n    addressNSECRecord() {\n        return this.serviceRecords.addressNSEC.clone();\n    }\n    /**\n     * @private user to get a copy of the service NSEC record\n     */\n    serviceNSECRecord(shortenTTL = false) {\n        const record = this.serviceRecords.serviceNSEC.clone();\n        if (shortenTTL) {\n            record.ttl = 120;\n        }\n        return record;\n    }\n    /**\n     * @param address - The IP address to check.\n     * @private used to check if given address is exposed by this service\n     */\n    hasAddress(address) {\n        return !!this.serviceRecords.reverseAddressPTRs[address];\n    }\n}\nexports.CiaoService = CiaoService;\n//# sourceMappingURL=CiaoService.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MDNSServer = exports.SendResultFormatError = exports.SendResultFailedRatio = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst debug_1 = tslib_1.__importDefault(require(\"debug\"));\nconst dgram_1 = tslib_1.__importDefault(require(\"dgram\"));\nconst DNSPacket_1 = require(\"./coder/DNSPacket\");\nconst NetworkManager_1 = require(\"./NetworkManager\");\nconst domain_formatter_1 = require(\"./util/domain-formatter\");\nconst errors_1 = require(\"./util/errors\");\nconst promise_utils_1 = require(\"./util/promise-utils\");\nconst debug = (0, debug_1.default)(\"ciao:MDNSServer\");\n/**\n * Returns the ration of rejected SendResults in the array.\n * A ratio of 0 indicates all sends were successful.\n * A ration of 1 indicates all sends failed.\n * A number in between signals that some of the sends failed.\n *\n * @param results - Array of {@link SendResult}\n */\nfunction SendResultFailedRatio(results) {\n    if (results.length === 0) {\n        return 0;\n    }\n    let failedCount = 0;\n    for (const result of results) {\n        if (result.status !== \"fulfilled\") {\n            failedCount++;\n        }\n    }\n    return failedCount / results.length;\n}\nexports.SendResultFailedRatio = SendResultFailedRatio;\nfunction SendResultFormatError(results, prefix, includeStack = false) {\n    let failedCount = 0;\n    for (const result of results) {\n        if (result.status !== \"fulfilled\") {\n            failedCount++;\n        }\n    }\n    if (!prefix) {\n        prefix = \"Failed to send packets\";\n    }\n    if (failedCount < results.length) {\n        prefix += ` (${failedCount}/${results.length}):`;\n    }\n    else {\n        prefix += \":\";\n    }\n    if (includeStack) {\n        let string = \"=============================\\n\" + prefix;\n        for (const result of results) {\n            if (result.status === \"rejected\") {\n                string += \"\\n--------------------\\n\" +\n                    \"Failed to send packet on interface \" + result.interface + \": \" + result.reason.stack;\n            }\n            else if (result.status === \"timeout\") {\n                string += \"\\n--------------------\\n\" +\n                    \"Sending packet on interface \" + result.interface + \" timed out!\";\n            }\n        }\n        string += \"\\n=============================\";\n        return string;\n    }\n    else {\n        let string = prefix;\n        for (const result of results) {\n            if (result.status === \"rejected\") {\n                string += \"\\n- Failed to send packet on interface \" + result.interface + \": \" + result.reason.message;\n            }\n            else if (result.status === \"timeout\") {\n                string += \"\\n- Sending packet on interface \" + result.interface + \" timed out!\";\n            }\n        }\n        return string;\n    }\n}\nexports.SendResultFormatError = SendResultFormatError;\n/**\n * This class can be used to create a mdns server to send and receive mdns packets on the local network.\n *\n * Currently only udp4 sockets will be advertised.\n */\nclass MDNSServer {\n    constructor(handler, options) {\n        this.sockets = new Map();\n        this.sentPackets = new Map();\n        // RFC 6762 15.1. If we are not the first responder bound to 5353 we can't receive unicast responses\n        // thus the QU flag must not be used in queries. Responders are only affected when sending probe queries.\n        // Probe queries should be sent with QU set, though can't be sent with QU when we can't receive unicast responses.\n        this.suppressUnicastResponseFlag = false;\n        this.bound = false;\n        this.closed = false;\n        (0, assert_1.default)(handler, \"handler cannot be undefined\");\n        this.handler = handler;\n        this.networkManager = new NetworkManager_1.NetworkManager({\n            interface: options && options.interface,\n            excludeIpv6: options && options.disableIpv6,\n            excludeIpv6Only: true, // we currently have no udp6 sockets advertising anything, thus no need to manage interface which only have ipv6\n        });\n        this.networkManager.on(\"network-update\" /* NetworkManagerEvent.NETWORK_UPDATE */, this.handleUpdatedNetworkInterfaces.bind(this));\n    }\n    getNetworkManager() {\n        return this.networkManager;\n    }\n    getBoundInterfaceNames() {\n        return this.sockets.keys();\n    }\n    async bind() {\n        if (this.closed) {\n            throw new Error(\"Cannot rebind closed server!\");\n        }\n        // RFC 6762 15.1. suggest that we probe if we are not the only socket.\n        // though as ciao will probably always be installed besides an existing mdns responder, we just assume that without probing\n        // As it only affects probe queries, impact isn't that big.\n        this.suppressUnicastResponseFlag = true;\n        // wait for the first network interfaces to be discovered\n        await this.networkManager.waitForInit();\n        const promises = [];\n        for (const [name, networkInterface] of this.networkManager.getInterfaceMap()) {\n            const socket = this.createDgramSocket(name, true);\n            const promise = this.bindSocket(socket, networkInterface, \"IPv4\" /* IPFamily.IPv4 */)\n                .catch(reason => {\n                // TODO if bind errors we probably will never bind again\n                console.log(\"Could not bind detected network interface: \" + reason.stack);\n            });\n            promises.push(promise);\n        }\n        return Promise.all(promises).then(() => {\n            this.bound = true;\n            // map void[] to void\n        });\n    }\n    shutdown() {\n        this.networkManager.shutdown();\n        for (const socket of this.sockets.values()) {\n            socket.close();\n        }\n        this.bound = false;\n        this.closed = true;\n        this.sockets.clear();\n    }\n    sendQueryBroadcast(query, service) {\n        const packets = DNSPacket_1.DNSPacket.createDNSQueryPackets(query);\n        if (packets.length > 1) {\n            debug(\"Query broadcast is split into %d packets!\", packets.length);\n        }\n        const promises = [];\n        for (const packet of packets) {\n            promises.push(this.sendOnAllNetworksForService(packet, service));\n        }\n        return Promise.all(promises).then((values) => {\n            const results = [];\n            for (const value of values) { // replace with .flat method when we have node >= 11.0.0 requirement\n                results.concat(value);\n            }\n            return results;\n        });\n    }\n    sendResponseBroadcast(response, service) {\n        const packet = DNSPacket_1.DNSPacket.createDNSResponsePacketsFromRRSet(response);\n        return this.sendOnAllNetworksForService(packet, service);\n    }\n    sendResponse(response, endpointOrInterface, callback) {\n        this.send(response, endpointOrInterface).then(result => {\n            if (result.status === \"rejected\") {\n                if (callback) {\n                    callback(new Error(\"Encountered socket error on \" + result.reason.name + \": \" + result.reason.message));\n                }\n                else {\n                    MDNSServer.logSocketError(result.interface, result.reason);\n                }\n            }\n            else if (callback) {\n                callback();\n            }\n        });\n    }\n    sendOnAllNetworksForService(packet, service) {\n        this.checkUnicastResponseFlag(packet);\n        const message = packet.encode();\n        this.assertBeforeSend(message, \"IPv4\" /* IPFamily.IPv4 */);\n        const promises = [];\n        for (const [name, socket] of this.sockets) {\n            if (!service.advertisesOnInterface(name)) {\n                // I don't like the fact that we put the check inside the MDNSServer, as it should be independent of the above layer.\n                // Though I think this is currently the easiest approach.\n                continue;\n            }\n            const promise = new Promise(resolve => {\n                socket.send(message, MDNSServer.MDNS_PORT, MDNSServer.MULTICAST_IPV4, error => {\n                    if (error) {\n                        if (!MDNSServer.isSilencedSocketError(error)) {\n                            resolve({\n                                status: \"rejected\",\n                                interface: name,\n                                reason: error,\n                            });\n                            return;\n                        }\n                    }\n                    else {\n                        this.maintainSentPacketsInterface(name, message);\n                    }\n                    resolve({\n                        status: \"fulfilled\",\n                        interface: name,\n                    });\n                });\n            });\n            promises.push(Promise.race([\n                promise,\n                (0, promise_utils_1.PromiseTimeout)(MDNSServer.SEND_TIMEOUT).then(() => ({\n                    status: \"timeout\",\n                    interface: name,\n                })),\n            ]));\n        }\n        return Promise.all(promises);\n    }\n    send(packet, endpointOrInterface) {\n        this.checkUnicastResponseFlag(packet);\n        const message = packet.encode();\n        this.assertBeforeSend(message, \"IPv4\" /* IPFamily.IPv4 */);\n        let address;\n        let port;\n        let name;\n        if (typeof endpointOrInterface === \"string\") { // it's a network interface name\n            address = MDNSServer.MULTICAST_IPV4;\n            port = MDNSServer.MDNS_PORT;\n            name = endpointOrInterface;\n        }\n        else {\n            address = endpointOrInterface.address;\n            port = endpointOrInterface.port;\n            name = endpointOrInterface.interface;\n        }\n        const socket = this.sockets.get(name);\n        if (!socket) {\n            throw new errors_1.InterfaceNotFoundError(`Could not find socket for given network interface '${name}'`);\n        }\n        return new Promise(resolve => {\n            socket.send(message, port, address, error => {\n                if (error) {\n                    if (!MDNSServer.isSilencedSocketError(error)) {\n                        resolve({\n                            status: \"rejected\",\n                            interface: name,\n                            reason: error,\n                        });\n                        return;\n                    }\n                }\n                else {\n                    this.maintainSentPacketsInterface(name, message);\n                }\n                resolve({\n                    status: \"fulfilled\",\n                    interface: name,\n                });\n            });\n        });\n    }\n    checkUnicastResponseFlag(packet) {\n        if (this.suppressUnicastResponseFlag && packet.type === 0 /* PacketType.QUERY */) {\n            packet.questions.forEach(record => record.unicastResponseFlag = false);\n        }\n    }\n    assertBeforeSend(message, family) {\n        if (this.closed) {\n            throw new errors_1.ServerClosedError(\"Cannot send packets on a closed mdns server!\");\n        }\n        (0, assert_1.default)(this.bound, \"Cannot send packets before server is not bound!\");\n        const ipHeaderSize = family === \"IPv4\" /* IPFamily.IPv4 */ ? MDNSServer.DEFAULT_IP4_HEADER : MDNSServer.DEFAULT_IP6_HEADER;\n        // RFC 6762 17.\n        (0, assert_1.default)(ipHeaderSize + MDNSServer.UDP_HEADER + message.length <= 9000, \"DNS cannot exceed the size of 9000 bytes even with IP Fragmentation!\");\n    }\n    maintainSentPacketsInterface(name, packet) {\n        const base64 = packet.toString(\"base64\");\n        const packets = this.sentPackets.get(name);\n        if (!packets) {\n            this.sentPackets.set(name, [base64]);\n        }\n        else {\n            packets.push(base64);\n        }\n    }\n    checkIfPacketWasPreviouslySentFromUs(name, packet) {\n        const base64 = packet.toString(\"base64\");\n        const packets = this.sentPackets.get(name);\n        if (packets) {\n            const index = packets.indexOf(base64);\n            if (index !== -1) {\n                packets.splice(index, 1);\n                return true;\n            }\n        }\n        return false;\n    }\n    createDgramSocket(name, reuseAddr = false, type = \"udp4\") {\n        const socket = dgram_1.default.createSocket({\n            type: type,\n            reuseAddr: reuseAddr,\n        });\n        socket.on(\"message\", this.handleMessage.bind(this, name));\n        socket.on(\"error\", error => {\n            if (!MDNSServer.isSilencedSocketError(error)) {\n                MDNSServer.logSocketError(name, error);\n            }\n        });\n        return socket;\n    }\n    bindSocket(socket, networkInterface, family) {\n        return new Promise((resolve, reject) => {\n            const errorHandler = (error) => reject(new Error(\"Failed to bind on interface \" + networkInterface.name + \": \" + error.message));\n            socket.once(\"error\", errorHandler);\n            socket.on(\"close\", () => {\n                this.sockets.delete(networkInterface.name);\n            });\n            socket.bind(MDNSServer.MDNS_PORT, () => {\n                socket.setRecvBufferSize(800 * 1024); // setting max recv buffer size to 800KiB (Pi will max out at 352KiB)\n                socket.removeListener(\"error\", errorHandler);\n                const multicastAddress = family === \"IPv4\" /* IPFamily.IPv4 */ ? MDNSServer.MULTICAST_IPV4 : MDNSServer.MULTICAST_IPV6;\n                const interfaceAddress = family === \"IPv4\" /* IPFamily.IPv4 */ ? networkInterface.ipv4 : networkInterface.ipv6;\n                (0, assert_1.default)(interfaceAddress, \"Interface address for \" + networkInterface.name + \" cannot be undefined!\");\n                try {\n                    socket.addMembership(multicastAddress, interfaceAddress);\n                    socket.setMulticastInterface(interfaceAddress);\n                    socket.setMulticastTTL(MDNSServer.MDNS_TTL); // outgoing multicast datagrams\n                    socket.setTTL(MDNSServer.MDNS_TTL); // outgoing unicast datagrams\n                    socket.setMulticastLoopback(true); // We can't disable multicast loopback, as otherwise queriers on the same host won't receive our packets\n                    this.sockets.set(networkInterface.name, socket);\n                    resolve();\n                }\n                catch (error) {\n                    try {\n                        socket.close();\n                    }\n                    catch (error) {\n                        debug(\"Error while closing socket which failed to bind. Error may be expected: \" + error.message);\n                    }\n                    reject(new Error(\"Error binding socket on \" + networkInterface.name + \": \" + error.stack));\n                }\n            });\n        });\n    }\n    handleMessage(name, buffer, rinfo) {\n        if (!this.bound) {\n            return;\n        }\n        const networkInterface = this.networkManager.getInterface(name);\n        if (!networkInterface) {\n            debug(\"Received packet on non existing network interface: %s!\", name);\n            return;\n        }\n        if (this.checkIfPacketWasPreviouslySentFromUs(networkInterface.name, buffer)) {\n            // multicastLoopback is enabled for every interface, meaning we would receive our own response\n            // packets here. Thus, we silence them. We can't disable multicast loopback, as otherwise\n            // queriers on the same host won't receive our packets\n            return;\n        }\n        const ip4Netaddress = (0, domain_formatter_1.getNetAddress)(rinfo.address, networkInterface.ip4Netmask);\n        // We have the following problem on linux based platforms:\n        // When setting up a socket like above (binding on 0.0.0.0:5353) and then adding membership for 224.0.0.251 for\n        // A CERTAIN! interface, we will nonetheless receive packets from ALL other interfaces even the loopback interfaces.\n        // This is not the case on platforms like e.g. macOS. There stuff is properly filtered, and we only receive packets\n        // for the given interface we specified in our membership.\n        // This has the problem, that when receiving packets from other interfaces, that we leak addresses which don't\n        // exist on the given interface. We can't do much about it, as in typically multiple subnet networks, it is valid\n        // that we receive a packet from an ip address which doesn't belong into the subnet of our given interface.\n        // What we can do at least, is the following two things:\n        // * if we are listening on the loopback interface, we filter out any traffic which doesn't belong to the loopback interface\n        // * if we receive a packet from the loopback interface, we filter those out as well.\n        // With that we at least ensure that the loopback address is never sent out to the network.\n        // This is what we do below:\n        if (networkInterface.loopback) {\n            if (ip4Netaddress !== networkInterface.ipv4Netaddress) {\n                return;\n            }\n        }\n        else if (this.networkManager.isLoopbackNetaddressV4(ip4Netaddress)) {\n            debug(\"Received packet on interface '%s' which is not coming from the same subnet: %o\", name, { address: rinfo.address, netaddress: ip4Netaddress, interface: networkInterface.ipv4 });\n            return;\n        }\n        let packet;\n        try {\n            packet = DNSPacket_1.DNSPacket.decode(rinfo, buffer);\n        }\n        catch (error) {\n            debug(\"Received a malformed packet from %o on interface %s. This might or might not be a problem. \" +\n                \"Here is the received packet for debugging purposes '%s'. \" +\n                \"Packet decoding failed with %s\", rinfo, name, buffer.toString(\"base64\"), error.stack);\n            return;\n        }\n        if (packet.opcode !== 0 /* OpCode.QUERY */) {\n            // RFC 6762 18.3 we MUST ignore messages with opcodes other than zero (QUERY)\n            return;\n        }\n        if (packet.rcode !== 0 /* RCode.NoError */) {\n            // RFC 6762 18.3 we MUST ignore messages with response code other than zero (NoError)\n            return;\n        }\n        const endpoint = {\n            address: rinfo.address,\n            port: rinfo.port,\n            interface: name,\n        };\n        if (packet.type === 0 /* PacketType.QUERY */) {\n            try {\n                this.handler.handleQuery(packet, endpoint);\n            }\n            catch (error) {\n                console.warn(\"Error occurred handling incoming (on \" + name + \") dns query packet: \" + error.stack);\n            }\n        }\n        else if (packet.type === 1 /* PacketType.RESPONSE */) {\n            if (rinfo.port !== MDNSServer.MDNS_PORT) {\n                // RFC 6762 6.  Multicast DNS implementations MUST silently ignore any Multicast DNS responses\n                //    they receive where the source UDP port is not 5353.\n                return;\n            }\n            try {\n                this.handler.handleResponse(packet, endpoint);\n            }\n            catch (error) {\n                console.warn(\"Error occurred handling incoming (on \" + name + \") dns response packet: \" + error.stack);\n            }\n        }\n    }\n    static isSilencedSocketError(error) {\n        // silence those errors\n        // they happen when the host is not reachable (EADDRNOTAVAIL for 224.0.0.251 or EHOSTDOWN for any unicast traffic)\n        // caused by yet undetected network changes.\n        // as we listen to 0.0.0.0 and the socket stays valid, this is not a problem\n        const silenced = error.message.includes(\"EADDRNOTAVAIL\") || error.message.includes(\"EHOSTDOWN\")\n            || error.message.includes(\"ENETUNREACH\") || error.message.includes(\"EHOSTUNREACH\")\n            || error.message.includes(\"EPERM\") || error.message.includes(\"EINVAL\");\n        if (silenced) {\n            debug(\"Silenced and ignored error (This is/should not be a problem, this message is only for informational purposes): \" + error.message);\n        }\n        return silenced;\n    }\n    static logSocketError(name, error) {\n        console.warn(`Encountered MDNS socket error on socket '${name}' : ${error.stack}`);\n        return;\n    }\n    handleUpdatedNetworkInterfaces(networkUpdate) {\n        if (networkUpdate.removed) {\n            for (const networkInterface of networkUpdate.removed) {\n                const socket = this.sockets.get(networkInterface.name);\n                this.sockets.delete(networkInterface.name);\n                if (socket) {\n                    socket.close();\n                }\n            }\n        }\n        if (networkUpdate.changes) {\n            for (const change of networkUpdate.changes) {\n                const socket = this.sockets.get(change.name);\n                (0, assert_1.default)(socket, \"Couldn't find socket for network change!\");\n                if (!change.outdatedIpv4 && change.updatedIpv4) {\n                    // this does currently not happen, as we exclude ipv6 only interfaces\n                    // thus such a change would be happening through the ADDED array\n                    assert_1.default.fail(\"Reached illegal state! IPv4 address changed from undefined to defined!\");\n                }\n                else if (change.outdatedIpv4 && !change.updatedIpv4) {\n                    // this does currently not happen, as we exclude ipv6 only interfaces\n                    // thus such a change would be happening through the REMOVED array\n                    assert_1.default.fail(\"Reached illegal state! IPV4 address change from defined to undefined!\");\n                }\n                else if (change.outdatedIpv4 && change.updatedIpv4) {\n                    try {\n                        socket.dropMembership(MDNSServer.MULTICAST_IPV4, change.outdatedIpv4);\n                    }\n                    catch (error) {\n                        debug(\"Thrown expected error when dropping outdated address membership: \" + error.message);\n                    }\n                    try {\n                        socket.addMembership(MDNSServer.MULTICAST_IPV4, change.updatedIpv4);\n                    }\n                    catch (error) {\n                        debug(\"Thrown expected error when adding new address membership: \" + error.message);\n                    }\n                    socket.setMulticastInterface(change.updatedIpv4);\n                }\n            }\n        }\n        if (networkUpdate.added) {\n            for (const networkInterface of networkUpdate.added) {\n                const socket = this.createDgramSocket(networkInterface.name, true);\n                this.bindSocket(socket, networkInterface, \"IPv4\" /* IPFamily.IPv4 */).catch(reason => {\n                    // TODO if bind errors we probably will never bind again\n                    console.log(\"Could not bind detected network interface: \" + reason.stack);\n                });\n            }\n        }\n    }\n}\nexports.MDNSServer = MDNSServer;\nMDNSServer.DEFAULT_IP4_HEADER = 20;\nMDNSServer.DEFAULT_IP6_HEADER = 40;\nMDNSServer.UDP_HEADER = 8;\nMDNSServer.MDNS_PORT = 5353;\nMDNSServer.MDNS_TTL = 255;\nMDNSServer.MULTICAST_IPV4 = \"224.0.0.251\";\nMDNSServer.MULTICAST_IPV6 = \"FF02::FB\";\nMDNSServer.SEND_TIMEOUT = 200; // milliseconds\n//# sourceMappingURL=MDNSServer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkManager = exports.NetworkManagerEvent = exports.WifiState = exports.IPFamily = void 0;\nconst tslib_1 = require(\"tslib\");\n/* eslint-disable @typescript-eslint/no-unsafe-declaration-merging */\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst child_process_1 = tslib_1.__importDefault(require(\"child_process\"));\nconst debug_1 = tslib_1.__importDefault(require(\"debug\"));\nconst events_1 = require(\"events\");\nconst fast_deep_equal_1 = tslib_1.__importDefault(require(\"fast-deep-equal\"));\nconst net_1 = tslib_1.__importDefault(require(\"net\"));\nconst os_1 = tslib_1.__importDefault(require(\"os\"));\nconst domain_formatter_1 = require(\"./util/domain-formatter\");\nconst debug = (0, debug_1.default)(\"ciao:NetworkManager\");\nvar IPFamily;\n(function (IPFamily) {\n    IPFamily[\"IPv4\"] = \"IPv4\";\n    IPFamily[\"IPv6\"] = \"IPv6\";\n})(IPFamily || (exports.IPFamily = IPFamily = {}));\nvar WifiState;\n(function (WifiState) {\n    WifiState[WifiState[\"UNDEFINED\"] = 0] = \"UNDEFINED\";\n    WifiState[WifiState[\"NOT_A_WIFI_INTERFACE\"] = 1] = \"NOT_A_WIFI_INTERFACE\";\n    WifiState[WifiState[\"NOT_ASSOCIATED\"] = 2] = \"NOT_ASSOCIATED\";\n    WifiState[WifiState[\"CONNECTED\"] = 3] = \"CONNECTED\";\n})(WifiState || (exports.WifiState = WifiState = {}));\nvar NetworkManagerEvent;\n(function (NetworkManagerEvent) {\n    NetworkManagerEvent[\"NETWORK_UPDATE\"] = \"network-update\";\n})(NetworkManagerEvent || (exports.NetworkManagerEvent = NetworkManagerEvent = {}));\n/**\n * The NetworkManager maintains a representation of the network interfaces define on the host system.\n * It periodically checks for updated network information.\n *\n * The NetworkManager makes the following decision when checking for interfaces:\n * * First of all it gathers the default network interface of the system (by checking the routing table of the os)\n * * The following interfaces are going to be tracked:\n *   * The loopback interface\n *   * All interfaces which match the subnet of the default interface\n *   * All interfaces which contain a globally unique (aka globally routable) ipv6 address\n */\nclass NetworkManager extends events_1.EventEmitter {\n    constructor(options) {\n        super();\n        this.currentInterfaces = new Map();\n        /**\n         * A subset of our network interfaces, holding only loopback interfaces (or what node considers \"internal\").\n         */\n        this.loopbackInterfaces = new Map();\n        this.setMaxListeners(100); // we got one listener for every Responder, 100 should be fine for now\n        if (options && options.interface) {\n            let interfaces;\n            if (typeof options.interface === \"string\") {\n                interfaces = [options.interface];\n            }\n            else if (Array.isArray(options.interface)) {\n                interfaces = options.interface;\n            }\n            else {\n                throw new Error(\"Found invalid type for 'interfaces' NetworkManager option!\");\n            }\n            const restrictedInterfaces = [];\n            for (const iface of interfaces) {\n                if (net_1.default.isIP(iface)) {\n                    const interfaceName = NetworkManager.resolveInterface(iface);\n                    if (interfaceName) {\n                        restrictedInterfaces.push(interfaceName);\n                    }\n                    else {\n                        console.log(\"CIAO: Interface was specified as ip (%s), though couldn't find a matching interface for the given address.\", options.interface);\n                    }\n                }\n                else {\n                    restrictedInterfaces.push(iface);\n                }\n            }\n            if (restrictedInterfaces.length === 0) {\n                console.log(\"CIAO: 'restrictedInterfaces' array was empty. Going to fallback to bind on all available interfaces.\");\n            }\n            else {\n                this.restrictedInterfaces = restrictedInterfaces;\n            }\n        }\n        this.excludeIpv6 = !!(options && options.excludeIpv6);\n        this.excludeIpv6Only = this.excludeIpv6 || !!(options && options.excludeIpv6Only);\n        if (options) {\n            debug(\"Created NetworkManager with options: %s\", JSON.stringify(options));\n        }\n        this.initPromise = new Promise(resolve => {\n            this.getCurrentNetworkInterfaces().then(map => {\n                this.currentInterfaces = map;\n                const otherInterfaces = Object.keys(os_1.default.networkInterfaces());\n                const interfaceNames = [];\n                for (const name of this.currentInterfaces.keys()) {\n                    interfaceNames.push(name);\n                    const index = otherInterfaces.indexOf(name);\n                    if (index !== -1) {\n                        otherInterfaces.splice(index, 1);\n                    }\n                }\n                debug(\"Initial networks [%s] ignoring [%s]\", interfaceNames.join(\", \"), otherInterfaces.join(\", \"));\n                this.initPromise = undefined;\n                resolve();\n                this.scheduleNextJob();\n            });\n        });\n    }\n    async waitForInit() {\n        if (this.initPromise) {\n            await this.initPromise;\n        }\n    }\n    shutdown() {\n        if (this.currentTimer) {\n            clearTimeout(this.currentTimer);\n            this.currentTimer = undefined;\n        }\n        this.removeAllListeners();\n    }\n    getInterfaceMap() {\n        if (this.initPromise) {\n            assert_1.default.fail(\"Not yet initialized!\");\n        }\n        return this.currentInterfaces;\n    }\n    getInterface(name) {\n        if (this.initPromise) {\n            assert_1.default.fail(\"Not yet initialized!\");\n        }\n        return this.currentInterfaces.get(name);\n    }\n    isLoopbackNetaddressV4(netaddress) {\n        for (const networkInterface of this.loopbackInterfaces.values()) {\n            if (networkInterface.ipv4Netaddress === netaddress) {\n                return true;\n            }\n        }\n        return false;\n    }\n    scheduleNextJob() {\n        this.currentTimer = setTimeout(this.checkForNewInterfaces.bind(this), NetworkManager.POLLING_TIME);\n        this.currentTimer.unref(); // this timer won't prevent shutdown\n    }\n    async checkForNewInterfaces() {\n        const latestInterfaces = await this.getCurrentNetworkInterfaces();\n        if (!this.currentTimer) { // if the timer is undefined, NetworkManager was shut down\n            return;\n        }\n        let added = undefined;\n        let removed = undefined;\n        let changes = undefined;\n        for (const [name, networkInterface] of latestInterfaces) {\n            const currentInterface = this.currentInterfaces.get(name);\n            if (currentInterface) { // the interface could potentially have changed\n                if (!(0, fast_deep_equal_1.default)(currentInterface, networkInterface)) {\n                    // indeed the interface changed\n                    const change = {\n                        name: name,\n                    };\n                    if (currentInterface.ipv4 !== networkInterface.ipv4) { // check for changed ipv4\n                        if (currentInterface.ipv4) {\n                            change.outdatedIpv4 = currentInterface.ipv4;\n                        }\n                        if (networkInterface.ipv4) {\n                            change.updatedIpv4 = networkInterface.ipv4;\n                        }\n                    }\n                    if (currentInterface.ipv6 !== networkInterface.ipv6) { // check for changed link-local ipv6\n                        if (currentInterface.ipv6) {\n                            change.outdatedIpv6 = currentInterface.ipv6;\n                        }\n                        if (networkInterface.ipv6) {\n                            change.updatedIpv6 = networkInterface.ipv6;\n                        }\n                    }\n                    if (currentInterface.globallyRoutableIpv6 !== networkInterface.globallyRoutableIpv6) { // check for changed routable ipv6\n                        if (currentInterface.globallyRoutableIpv6) {\n                            change.outdatedGloballyRoutableIpv6 = currentInterface.globallyRoutableIpv6;\n                        }\n                        if (networkInterface.globallyRoutableIpv6) {\n                            change.updatedGloballyRoutableIpv6 = networkInterface.globallyRoutableIpv6;\n                        }\n                    }\n                    if (currentInterface.uniqueLocalIpv6 !== networkInterface.uniqueLocalIpv6) { // check for changed ula\n                        if (currentInterface.uniqueLocalIpv6) {\n                            change.outdatedUniqueLocalIpv6 = currentInterface.uniqueLocalIpv6;\n                        }\n                        if (networkInterface.uniqueLocalIpv6) {\n                            change.updatedUniqueLocalIpv6 = networkInterface.uniqueLocalIpv6;\n                        }\n                    }\n                    this.currentInterfaces.set(name, networkInterface);\n                    if (networkInterface.loopback) {\n                        this.loopbackInterfaces.set(name, networkInterface);\n                    }\n                    (changes !== null && changes !== void 0 ? changes : (changes = [])).push(change);\n                }\n            }\n            else { // new interface was added/started\n                this.currentInterfaces.set(name, networkInterface);\n                if (networkInterface.loopback) {\n                    this.currentInterfaces.set(name, networkInterface);\n                }\n                (added !== null && added !== void 0 ? added : (added = [])).push(networkInterface);\n            }\n        }\n        // at this point we updated any existing interfaces and added all new interfaces\n        // thus if the length of below is not the same interface must have been removed\n        // this check ensures that we do not unnecessarily loop twice through our interfaces\n        if (this.currentInterfaces.size !== latestInterfaces.size) {\n            for (const [name, networkInterface] of this.currentInterfaces) {\n                if (!latestInterfaces.has(name)) { // interface was removed\n                    this.currentInterfaces.delete(name);\n                    this.loopbackInterfaces.delete(name);\n                    (removed !== null && removed !== void 0 ? removed : (removed = [])).push(networkInterface);\n                }\n            }\n        }\n        if (added || removed || changes) { // emit an event only if anything changed\n            const addedString = added ? added.map(iface => iface.name).join(\",\") : \"\";\n            const removedString = removed ? removed.map(iface => iface.name).join(\",\") : \"\";\n            const changesString = changes ? changes.map(iface => {\n                let string = `{ name: ${iface.name} `;\n                if (iface.outdatedIpv4 || iface.updatedIpv4) {\n                    string += `, ${iface.outdatedIpv4} -> ${iface.updatedIpv4} `;\n                }\n                if (iface.outdatedIpv6 || iface.updatedIpv6) {\n                    string += `, ${iface.outdatedIpv6} -> ${iface.updatedIpv6} `;\n                }\n                if (iface.outdatedGloballyRoutableIpv6 || iface.updatedGloballyRoutableIpv6) {\n                    string += `, ${iface.outdatedGloballyRoutableIpv6} -> ${iface.updatedGloballyRoutableIpv6} `;\n                }\n                if (iface.outdatedUniqueLocalIpv6 || iface.updatedUniqueLocalIpv6) {\n                    string += `, ${iface.outdatedUniqueLocalIpv6} -> ${iface.updatedUniqueLocalIpv6} `;\n                }\n                return string + \"}\";\n            }).join(\",\") : \"\";\n            debug(\"Detected network changes: added: [%s], removed: [%s], changes: [%s]!\", addedString, removedString, changesString);\n            this.emit(\"network-update\" /* NetworkManagerEvent.NETWORK_UPDATE */, {\n                added: added,\n                removed: removed,\n                changes: changes,\n            });\n        }\n        this.scheduleNextJob();\n    }\n    async getCurrentNetworkInterfaces() {\n        let names;\n        if (this.restrictedInterfaces) {\n            names = this.restrictedInterfaces;\n            const loopback = NetworkManager.getLoopbackInterface();\n            if (!names.includes(loopback)) {\n                names.push(loopback);\n            }\n        }\n        else {\n            try {\n                names = await NetworkManager.getNetworkInterfaceNames();\n            }\n            catch (error) {\n                debug(`WARNING Detecting network interfaces for platform '${os_1.default.platform()}' failed. Trying to assume network interfaces! (${error.message})`);\n                // fallback way of gathering network interfaces (remember, there are docker images where the arp command is not installed)\n                names = NetworkManager.assumeNetworkInterfaceNames();\n            }\n        }\n        const interfaces = new Map();\n        const networkInterfaces = os_1.default.networkInterfaces();\n        for (const name of names) {\n            const infos = networkInterfaces[name];\n            if (!infos) {\n                continue;\n            }\n            let ipv4Info = undefined;\n            let ipv6Info = undefined;\n            let routableIpv6Info = undefined;\n            let uniqueLocalIpv6Info = undefined;\n            let internal = false;\n            for (const info of infos) {\n                if (info.internal) {\n                    internal = true;\n                }\n                // @ts-expect-error Nodejs 18+ uses the number 4 instead of the string \"IPv4\"\n                if ((info.family === \"IPv4\" || info.family === 4) && !ipv4Info) {\n                    ipv4Info = info;\n                    // @ts-expect-error Nodejs 18+ uses the number 4 instead of the string \"IPv4\"\n                }\n                else if (info.family === \"IPv6\" || info.family === 6) {\n                    if (this.excludeIpv6) {\n                        continue;\n                    }\n                    if (info.scopeid && !ipv6Info) { // we only care about non zero scope (aka link-local ipv6)\n                        ipv6Info = info;\n                    }\n                    else if (info.scopeid === 0) { // global routable ipv6\n                        if (info.address.startsWith(\"fc\") || info.address.startsWith(\"fd\")) {\n                            if (!uniqueLocalIpv6Info) {\n                                uniqueLocalIpv6Info = info;\n                            }\n                        }\n                        else if (!routableIpv6Info) {\n                            routableIpv6Info = info;\n                        }\n                    }\n                }\n                if (ipv4Info && ipv6Info && routableIpv6Info && uniqueLocalIpv6Info) {\n                    break;\n                }\n            }\n            (0, assert_1.default)(ipv4Info || ipv6Info, \"Could not find valid addresses for interface '\" + name + \"'\");\n            if (this.excludeIpv6Only && !ipv4Info) {\n                continue;\n            }\n            const networkInterface = {\n                name: name,\n                loopback: internal,\n                mac: ((ipv4Info === null || ipv4Info === void 0 ? void 0 : ipv4Info.mac) || (ipv6Info === null || ipv6Info === void 0 ? void 0 : ipv6Info.mac)),\n            };\n            if (ipv4Info) {\n                networkInterface.ipv4 = ipv4Info.address;\n                networkInterface.ip4Netmask = ipv4Info.netmask;\n                networkInterface.ipv4Netaddress = (0, domain_formatter_1.getNetAddress)(ipv4Info.address, ipv4Info.netmask);\n            }\n            if (ipv6Info) {\n                networkInterface.ipv6 = ipv6Info.address;\n                networkInterface.ipv6Netmask = ipv6Info.netmask;\n            }\n            if (routableIpv6Info) {\n                networkInterface.globallyRoutableIpv6 = routableIpv6Info.address;\n                networkInterface.globallyRoutableIpv6Netmask = routableIpv6Info.netmask;\n            }\n            if (uniqueLocalIpv6Info) {\n                networkInterface.uniqueLocalIpv6 = uniqueLocalIpv6Info.address;\n                networkInterface.uniqueLocalIpv6Netmask = uniqueLocalIpv6Info.netmask;\n            }\n            interfaces.set(name, networkInterface);\n        }\n        return interfaces;\n    }\n    static resolveInterface(address) {\n        let interfaceName;\n        outer: for (const [name, infoArray] of Object.entries(os_1.default.networkInterfaces())) {\n            for (const info of infoArray !== null && infoArray !== void 0 ? infoArray : []) {\n                if (info.address === address) {\n                    interfaceName = name;\n                    break outer; // exit out of both loops\n                }\n            }\n        }\n        return interfaceName;\n    }\n    static async getNetworkInterfaceNames() {\n        // this function will always include the loopback interface\n        let promise;\n        switch (os_1.default.platform()) {\n            case \"win32\":\n                promise = NetworkManager.getWindowsNetworkInterfaces();\n                break;\n            case \"linux\": {\n                promise = NetworkManager.getLinuxNetworkInterfaces();\n                break;\n            }\n            case \"darwin\":\n                promise = NetworkManager.getDarwinNetworkInterfaces();\n                break;\n            case \"freebsd\": {\n                promise = NetworkManager.getFreeBSDNetworkInterfaces();\n                break;\n            }\n            case \"openbsd\":\n            case \"sunos\": {\n                promise = NetworkManager.getOpenBSD_SUNOS_NetworkInterfaces();\n                break;\n            }\n            default:\n                debug(\"Found unsupported platform %s\", os_1.default.platform());\n                return Promise.reject(new Error(\"unsupported platform!\"));\n        }\n        let names;\n        try {\n            names = await promise;\n        }\n        catch (error) {\n            if (error.message !== NetworkManager.NOTHING_FOUND_MESSAGE) {\n                throw error;\n            }\n            names = [];\n        }\n        const loopback = NetworkManager.getLoopbackInterface();\n        if (!names.includes(loopback)) {\n            names.unshift(loopback);\n        }\n        return promise;\n    }\n    static assumeNetworkInterfaceNames() {\n        // this method is a fallback trying to calculate network related interfaces in an platform independent way\n        const names = [];\n        Object.entries(os_1.default.networkInterfaces()).forEach(([name, infos]) => {\n            for (const info of infos !== null && infos !== void 0 ? infos : []) {\n                // we add the loopback interface or interfaces which got a unique (global or local) ipv6 address\n                // we currently don't just add all interfaces with ipv4 addresses as are often interfaces like VPNs, container/vms related\n                // unique global or unique local ipv6 addresses give an indication that we are truly connected to \"the Internet\"\n                // as something like SLAAC must be going on\n                // in the end\n                // @ts-expect-error Nodejs 18+ uses the number 4/6 instead of the string \"IPv4\"/\"IPv6\"\n                if (info.internal || (info.family === \"IPv4\" || info.family === 4) || (info.family === \"IPv6\" || info.family === 6) && info.scopeid === 0) {\n                    if (!names.includes(name)) {\n                        names.push(name);\n                    }\n                    break;\n                }\n            }\n        });\n        return names;\n    }\n    static getLoopbackInterface() {\n        for (const [name, infos] of Object.entries(os_1.default.networkInterfaces())) {\n            for (const info of infos !== null && infos !== void 0 ? infos : []) {\n                if (info.internal) {\n                    return name;\n                }\n            }\n        }\n        throw new Error(\"Could not detect loopback interface!\");\n    }\n    static getWindowsNetworkInterfaces() {\n        // does not return loopback interface\n        return new Promise((resolve, reject) => {\n            child_process_1.default.exec(\"arp -a | findstr /C:\\\"---\\\"\", (error, stdout) => {\n                if (error) {\n                    reject(error);\n                    return;\n                }\n                const lines = stdout.split(os_1.default.EOL);\n                const addresses = [];\n                for (let i = 0; i < lines.length - 1; i++) {\n                    const line = lines[i].trim().split(\" \");\n                    if (line[line.length - 3]) {\n                        addresses.push(line[line.length - 3]);\n                    }\n                    else {\n                        debug(`WINDOWS: Failed to read interface name from line ${i}: '${lines[i]}'`);\n                    }\n                }\n                const names = [];\n                for (const address of addresses) {\n                    const name = NetworkManager.resolveInterface(address);\n                    if (name) {\n                        if (!names.includes(name)) {\n                            names.push(name);\n                        }\n                    }\n                    else {\n                        debug(`WINDOWS: Couldn't resolve to an interface name from '${address}'`);\n                    }\n                }\n                if (names.length) {\n                    resolve(names);\n                }\n                else {\n                    reject(new Error(NetworkManager.NOTHING_FOUND_MESSAGE));\n                }\n            });\n        });\n    }\n    static getDarwinNetworkInterfaces() {\n        /*\n         * Previous efforts used the routing table to get all relevant network interfaces.\n         * Particularly using \"netstat -r -f inet -n\".\n         * First attempt was to use the \"default\" interface to the 0.0.0.0 catch all route using \"route get 0.0.0.0\".\n         * Though this fails when the router isn't connected to the internet, thus no \"internet route\" exists.\n         */\n        // does not return loopback interface\n        return new Promise((resolve, reject) => {\n            // for ipv6 \"ndp -a -n |grep -v permanent\" with filtering for \"expired\"\n            child_process_1.default.exec(\"arp -a -n -l\", async (error, stdout) => {\n                if (error) {\n                    reject(error);\n                    return;\n                }\n                const lines = stdout.split(os_1.default.EOL);\n                const names = [];\n                for (let i = 1; i < lines.length - 1; i++) {\n                    const interfaceName = lines[i].trim().split(NetworkManager.SPACE_PATTERN)[4];\n                    if (!interfaceName) {\n                        debug(`DARWIN: Failed to read interface name from line ${i}: '${lines[i]}'`);\n                        continue;\n                    }\n                    if (!names.includes(interfaceName)) {\n                        names.push(interfaceName);\n                    }\n                }\n                const promises = [];\n                for (const name of names) {\n                    const promise = NetworkManager.getDarwinWifiNetworkState(name).then(state => {\n                        if (state !== 1 /* WifiState.NOT_A_WIFI_INTERFACE */ && state !== 3 /* WifiState.CONNECTED */) {\n                            // removing wifi networks which are not connected to any networks\n                            const index = names.indexOf(name);\n                            if (index !== -1) {\n                                names.splice(index, 1);\n                            }\n                        }\n                    });\n                    promises.push(promise);\n                }\n                await Promise.all(promises);\n                if (names.length) {\n                    resolve(names);\n                }\n                else {\n                    reject(new Error(NetworkManager.NOTHING_FOUND_MESSAGE));\n                }\n            });\n        });\n    }\n    static getLinuxNetworkInterfaces() {\n        // does not return loopback interface\n        return new Promise((resolve, reject) => {\n            // we use \"ip neigh\" here instead of the aliases like \"ip neighbour\" or \"ip neighbor\"\n            // as those were only added like 5 years ago https://github.com/shemminger/iproute2/commit/ede723964a065992bf9d0dbe3f780e65ca917872\n            child_process_1.default.exec(\"ip neigh show\", (error, stdout) => {\n                if (error) {\n                    if (error.message.includes(\"ip: not found\")) {\n                        debug(\"LINUX: ip was not found on the system. Falling back to assuming network interfaces!\");\n                        resolve(NetworkManager.assumeNetworkInterfaceNames());\n                        return;\n                    }\n                    reject(error);\n                    return;\n                }\n                const lines = stdout.split(os_1.default.EOL);\n                const names = [];\n                for (let i = 0; i < lines.length - 1; i++) {\n                    const parts = lines[i].trim().split(NetworkManager.SPACE_PATTERN);\n                    let devIndex = 0;\n                    for (; devIndex < parts.length; devIndex++) {\n                        if (parts[devIndex] === \"dev\") {\n                            // the next index marks the interface name\n                            break;\n                        }\n                    }\n                    if (devIndex >= parts.length) {\n                        debug(`LINUX: Out of bounds when reading interface name from line ${i}: '${lines[i]}'`);\n                        continue;\n                    }\n                    const interfaceName = parts[devIndex + 1];\n                    if (!interfaceName) {\n                        debug(`LINUX: Failed to read interface name from line ${i}: '${lines[i]}'`);\n                        continue;\n                    }\n                    if (!names.includes(interfaceName)) {\n                        names.push(interfaceName);\n                    }\n                }\n                if (names.length) {\n                    resolve(names);\n                }\n                else {\n                    reject(new Error(NetworkManager.NOTHING_FOUND_MESSAGE));\n                }\n            });\n        });\n    }\n    static getFreeBSDNetworkInterfaces() {\n        // does not return loopback interface\n        return new Promise((resolve, reject) => {\n            child_process_1.default.exec(\"arp -a -n\", (error, stdout) => {\n                if (error) {\n                    reject(error);\n                    return;\n                }\n                const lines = stdout.split(os_1.default.EOL);\n                const names = [];\n                for (let i = 0; i < lines.length - 1; i++) {\n                    const interfaceName = lines[i].trim().split(NetworkManager.SPACE_PATTERN)[5];\n                    if (!interfaceName) {\n                        debug(`FreeBSD: Failed to read interface name from line ${i}: '${lines[i]}'`);\n                        continue;\n                    }\n                    if (!names.includes(interfaceName)) {\n                        names.push(interfaceName);\n                    }\n                }\n                if (names.length) {\n                    resolve(names);\n                }\n                else {\n                    reject(new Error(NetworkManager.NOTHING_FOUND_MESSAGE));\n                }\n            });\n        });\n    }\n    static getOpenBSD_SUNOS_NetworkInterfaces() {\n        // does not return loopback interface\n        return new Promise((resolve, reject) => {\n            // for ipv6 something like \"ndp -a -n | grep R\" (grep for reachable; maybe exclude permanent?)\n            child_process_1.default.exec(\"arp -a -n\", (error, stdout) => {\n                if (error) {\n                    reject(error);\n                    return;\n                }\n                const interfaceArrayOffset = os_1.default.platform() === \"sunos\" ? 0 : 2;\n                const lines = stdout.split(os_1.default.EOL);\n                const names = [];\n                for (let i = 1; i < lines.length - 1; i++) {\n                    const interfaceName = lines[i].trim().split(NetworkManager.SPACE_PATTERN)[interfaceArrayOffset];\n                    if (!interfaceName) {\n                        debug(`${os_1.default.platform()}: Failed to read interface name from line ${i}: '${lines[i]}'`);\n                        continue;\n                    }\n                    if (!names.includes(interfaceName)) {\n                        names.push(interfaceName);\n                    }\n                }\n                if (names.length) {\n                    resolve(names);\n                }\n                else {\n                    reject(new Error(NetworkManager.NOTHING_FOUND_MESSAGE));\n                }\n            });\n        });\n    }\n    static getDarwinWifiNetworkState(name) {\n        return new Promise(resolve => {\n            /*\n               * networksetup outputs the following in the listed scenarios:\n               *\n               * executed for an interface which is not a Wi-Fi interface:\n               * \"<name> is not a Wi-Fi interface.\n               * Error: Error obtaining wireless information.\"\n               *\n               * executed for a turned off Wi-Fi interface:\n               * \"You are not associated with an AirPort network.\n               * Wi-Fi power is currently off.\"\n               *\n               * executed for a turned on Wi-Fi interface which is not connected:\n               * \"You are not associated with an AirPort network.\"\n               *\n               * executed for a connected Wi-Fi interface:\n               * \"Current Wi-Fi Network: <network name>\"\n               *\n               * Other messages handled here.\n               * \"All Wi-Fi network services are disabled\": encountered on macOS VM machines\n               */\n            child_process_1.default.exec(\"networksetup -getairportnetwork \" + name, (error, stdout) => {\n                if (error) {\n                    if (stdout.includes(\"not a Wi-Fi interface\")) {\n                        resolve(1 /* WifiState.NOT_A_WIFI_INTERFACE */);\n                        return;\n                    }\n                    console.log(`CIAO WARN: While checking networksetup for ${name} encountered an error (${error.message}) with output: ${stdout.replace(os_1.default.EOL, \"; \")}`);\n                    resolve(0 /* WifiState.UNDEFINED */);\n                    return;\n                }\n                let wifiState = 0 /* WifiState.UNDEFINED */;\n                if (stdout.includes(\"not a Wi-Fi interface\")) {\n                    wifiState = 1 /* WifiState.NOT_A_WIFI_INTERFACE */;\n                }\n                else if (stdout.includes(\"Current Wi-Fi Network\")) {\n                    wifiState = 3 /* WifiState.CONNECTED */;\n                }\n                else if (stdout.includes(\"not associated\")) {\n                    wifiState = 2 /* WifiState.NOT_ASSOCIATED */;\n                }\n                else if (stdout.includes(\"All Wi-Fi network services are disabled\")) {\n                    // typically encountered on a macOS VM or something not having a WiFi card\n                    wifiState = 1 /* WifiState.NOT_A_WIFI_INTERFACE */;\n                }\n                else {\n                    console.log(`CIAO WARN: While checking networksetup for ${name} encountered an unknown output: ${stdout.replace(os_1.default.EOL, \"; \")}`);\n                }\n                resolve(wifiState);\n            });\n        });\n    }\n}\nexports.NetworkManager = NetworkManager;\nNetworkManager.SPACE_PATTERN = /\\s+/g;\nNetworkManager.NOTHING_FOUND_MESSAGE = \"no interfaces found\";\nNetworkManager.POLLING_TIME = 15 * 1000; // 15 seconds\n//# sourceMappingURL=NetworkManager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Responder = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst debug_1 = tslib_1.__importDefault(require(\"debug\"));\nconst CiaoService_1 = require(\"./CiaoService\");\nconst DNSPacket_1 = require(\"./coder/DNSPacket\");\nconst Question_1 = require(\"./coder/Question\");\nconst AAAARecord_1 = require(\"./coder/records/AAAARecord\");\nconst ARecord_1 = require(\"./coder/records/ARecord\");\nconst PTRRecord_1 = require(\"./coder/records/PTRRecord\");\nconst SRVRecord_1 = require(\"./coder/records/SRVRecord\");\nconst TXTRecord_1 = require(\"./coder/records/TXTRecord\");\nconst MDNSServer_1 = require(\"./MDNSServer\");\nconst Announcer_1 = require(\"./responder/Announcer\");\nconst Prober_1 = require(\"./responder/Prober\");\nconst QueryResponse_1 = require(\"./responder/QueryResponse\");\nconst QueuedResponse_1 = require(\"./responder/QueuedResponse\");\nconst TruncatedQuery_1 = require(\"./responder/TruncatedQuery\");\nconst errors_1 = require(\"./util/errors\");\nconst promise_utils_1 = require(\"./util/promise-utils\");\nconst sorted_array_1 = require(\"./util/sorted-array\");\nconst debug = (0, debug_1.default)(\"ciao:Responder\");\nconst queuedResponseComparator = (a, b) => {\n    return a.estimatedTimeToBeSent - b.estimatedTimeToBeSent;\n};\nvar ConflictType;\n(function (ConflictType) {\n    ConflictType[ConflictType[\"NO_CONFLICT\"] = 0] = \"NO_CONFLICT\";\n    ConflictType[ConflictType[\"CONFLICTING_RDATA\"] = 1] = \"CONFLICTING_RDATA\";\n    ConflictType[ConflictType[\"CONFLICTING_TTL\"] = 2] = \"CONFLICTING_TTL\";\n})(ConflictType || (ConflictType = {}));\n/**\n * A Responder instance represents a running MDNSServer and a set of advertised services.\n *\n * It will handle any service related operations, like advertising, sending goodbye packets or sending record updates.\n * It handles answering questions arriving at the multicast address.\n */\nclass Responder {\n    /**\n     * Refer to {@link getResponder} in the index file\n     *\n     * @private should not be used directly. Please use the getResponder method defined in index file.\n     */\n    static getResponder(options) {\n        const optionsString = options ? JSON.stringify(options) : \"\";\n        const responder = this.INSTANCES.get(optionsString);\n        if (responder) {\n            responder.refCount++;\n            return responder;\n        }\n        else {\n            const responder = new Responder(options);\n            this.INSTANCES.set(optionsString, responder);\n            responder.optionsString = optionsString;\n            return responder;\n        }\n    }\n    constructor(options) {\n        this.refCount = 1;\n        this.optionsString = \"\";\n        this.bound = false;\n        /**\n         * Announced services is indexed by the {@link dnsLowerCase} if the fqdn (as of RFC 1035 3.1).\n         * As soon as the probing step is finished the service is added to the announced services Map.\n         */\n        this.announcedServices = new Map();\n        /**\n         * map representing all our shared PTR records.\n         * Typically, we hold stuff like '_services._dns-sd._udp.local' (RFC 6763 9.), '_hap._tcp.local'.\n         * Also, pointers for every subtype like '_printer._sub._http._tcp.local' are inserted here.\n         *\n         * For every pointer we may hold multiple entries (like multiple services can advertise on _hap._tcp.local).\n         * The key as well as all values are {@link dnsLowerCase}\n         */\n        this.servicePointer = new Map();\n        this.truncatedQueries = {}; // indexed by <ip>:<port>\n        this.delayedMulticastResponses = [];\n        this.server = new MDNSServer_1.MDNSServer(this, options);\n        this.promiseChain = this.start();\n        this.server.getNetworkManager().on(\"network-update\" /* NetworkManagerEvent.NETWORK_UPDATE */, this.handleNetworkUpdate.bind(this));\n        this.ignoreUnicastResponseFlag = options === null || options === void 0 ? void 0 : options.ignoreUnicastResponseFlag;\n        if (options === null || options === void 0 ? void 0 : options.periodicBroadcasts) {\n            this.broadcastInterval = setTimeout(this.handlePeriodicBroadcasts.bind(this), 30000).unref();\n        }\n    }\n    handlePeriodicBroadcasts() {\n        this.broadcastInterval = undefined;\n        debug(\"Sending periodic announcement on \" + Array.from(this.server.getNetworkManager().getInterfaceMap().keys()).join(\", \"));\n        for (const networkInterface of this.server.getNetworkManager().getInterfaceMap().values()) {\n            const question = new Question_1.Question(\"_hap._tcp.local.\", 12 /* QType.PTR */, false);\n            const responses = this.answerQuestion(question, {\n                port: 5353,\n                address: (networkInterface.ipv4Netaddress || networkInterface.globallyRoutableIpv6 || networkInterface.uniqueLocalIpv6 || networkInterface.ipv6),\n                interface: networkInterface.name,\n            });\n            QueryResponse_1.QueryResponse.combineResponses(responses);\n            for (const response of responses) {\n                if (!response.hasAnswers()) {\n                    continue;\n                }\n                this.server.sendResponse(response.asPacket(), networkInterface.name);\n            }\n        }\n        this.broadcastInterval = setTimeout(this.handlePeriodicBroadcasts.bind(this), Math.random() * 3000 + 27000).unref();\n    }\n    /**\n     * Creates a new CiaoService instance and links it to this Responder instance.\n     *\n     * @param {ServiceOptions} options - Defines all information about the service which should be created.\n     * @returns The newly created {@link CiaoService} instance can be used to advertise and manage the created service.\n     */\n    createService(options) {\n        const service = new CiaoService_1.CiaoService(this.server.getNetworkManager(), options);\n        service.on(\"publish\" /* InternalServiceEvent.PUBLISH */, this.advertiseService.bind(this, service));\n        service.on(\"unpublish\" /* InternalServiceEvent.UNPUBLISH */, this.unpublishService.bind(this, service));\n        service.on(\"republish\" /* InternalServiceEvent.REPUBLISH */, this.republishService.bind(this, service));\n        service.on(\"records-update\" /* InternalServiceEvent.RECORD_UPDATE */, this.handleServiceRecordUpdate.bind(this, service));\n        service.on(\"records-update-interface\" /* InternalServiceEvent.RECORD_UPDATE_ON_INTERFACE */, this.handleServiceRecordUpdateOnInterface.bind(this, service));\n        return service;\n    }\n    /**\n     * This method should be called when you want to unpublish all service exposed by this Responder.\n     * This method SHOULD be called before the node application exists, so any host on the\n     * network is informed of the shutdown of this machine.\n     * Calling the shutdown method is mandatory for a clean termination (sending goodbye packets).\n     *\n     * The shutdown method must only be called ONCE.\n     *\n     * @returns The Promise resolves once all goodbye packets were sent\n     * (or immediately if any other users have a reference to this Responder instance).\n     */\n    shutdown() {\n        this.refCount--; // we trust the user here, that the shutdown will not be executed twice or something :thinking:\n        if (this.refCount > 0) {\n            return Promise.resolve();\n        }\n        if (this.currentProber) {\n            // Services which are in Probing step aren't included in announcedServices Map\n            // thus we need to cancel them as well\n            this.currentProber.cancel();\n        }\n        if (this.broadcastInterval) {\n            clearTimeout(this.broadcastInterval);\n        }\n        Responder.INSTANCES.delete(this.optionsString);\n        debug(\"Shutting down Responder...\");\n        const promises = [];\n        for (const service of this.announcedServices.values()) {\n            promises.push(this.unpublishService(service));\n        }\n        return Promise.all(promises).then(() => {\n            this.server.shutdown();\n            this.bound = false;\n        });\n    }\n    getAnnouncedServices() {\n        return this.announcedServices.values();\n    }\n    start() {\n        if (this.bound) {\n            throw new Error(\"Server is already bound!\");\n        }\n        this.bound = true;\n        return this.server.bind();\n    }\n    advertiseService(service, callback) {\n        if (service.serviceState === \"announced\" /* ServiceState.ANNOUNCED */) {\n            throw new Error(\"Can't publish a service that is already announced. Received \" + service.serviceState + \" for service \" + service.getFQDN());\n        }\n        else if (service.serviceState === \"probing\" /* ServiceState.PROBING */) {\n            return this.promiseChain.then(() => {\n                if (service.currentAnnouncer) {\n                    return service.currentAnnouncer.awaitAnnouncement();\n                }\n            });\n        }\n        else if (service.serviceState === \"announcing\" /* ServiceState.ANNOUNCING */) {\n            (0, assert_1.default)(service.currentAnnouncer, \"Service is in state ANNOUNCING though has no linked announcer!\");\n            if (service.currentAnnouncer.isSendingGoodbye()) {\n                return service.currentAnnouncer.awaitAnnouncement().then(() => this.advertiseService(service, callback));\n            }\n            else {\n                return service.currentAnnouncer.cancel().then(() => this.advertiseService(service, callback));\n            }\n        }\n        debug(\"[%s] Going to advertise service...\", service.getFQDN()); // TODO include restricted addresses and stuff\n        // multicast loopback is not enabled for our sockets, though we do some stuff, so Prober will handle potential\n        // name conflicts with our own services:\n        //  - One Responder will always run ONE prober: no need to handle simultaneous probe tiebreaking\n        //  - Prober will call the Responder to generate responses to its queries to\n        //      resolve name conflicts the same way as with other services on the network\n        this.promiseChain = this.promiseChain // we synchronize all ongoing probes here\n            .then(() => service.rebuildServiceRecords()) // build the records the first time for the prober\n            .then(() => this.probe(service)); // probe errors are catch below\n        return this.promiseChain.then(() => {\n            // we are not returning the promise returned by announced here, only PROBING is synchronized\n            this.announce(service).catch(reason => {\n                // handle announce errors\n                console.log(`[${service.getFQDN()}] failed announcing with reason: ${reason}. Trying again in 2 seconds!`);\n                return (0, promise_utils_1.PromiseTimeout)(2000).then(() => this.advertiseService(service, () => {\n                    // empty\n                }));\n            });\n            callback(); // service is considered announced. After the call to the announce() method the service state is set to ANNOUNCING\n        }, reason => {\n            /*\n             * I know seems unintuitive to place the probe error handling below here, miles away from the probe method call.\n             * Trust me it makes sense (encountered regression now two times in a row).\n             * 1. We can't put it in the THEN call above, since then errors simply won't be handled from the probe method call.\n             *  (CANCEL error would be passed through and would result in some unwanted stack trace)\n             * 2. We can't add a catch call above, since otherwise we would silence the CANCEL would be silenced and announce\n             *  would be called anyway.\n             */\n            // handle probe error\n            if (reason === Prober_1.Prober.CANCEL_REASON) {\n                callback();\n            }\n            else { // other errors are only thrown when sockets error occur\n                console.log(`[${service.getFQDN()}] failed probing with reason: ${reason}. Trying again in 2 seconds!`);\n                return (0, promise_utils_1.PromiseTimeout)(2000).then(() => this.advertiseService(service, callback));\n            }\n        });\n    }\n    async republishService(service, callback, delayAnnounce = false) {\n        if (service.serviceState !== \"announced\" /* ServiceState.ANNOUNCED */ && service.serviceState !== \"announcing\" /* ServiceState.ANNOUNCING */) {\n            throw new Error(\"Can't unpublish a service which isn't announced yet. Received \" + service.serviceState + \" for service \" + service.getFQDN());\n        }\n        debug(\"[%s] Readvertising service...\", service.getFQDN());\n        if (service.serviceState === \"announcing\" /* ServiceState.ANNOUNCING */) {\n            (0, assert_1.default)(service.currentAnnouncer, \"Service is in state ANNOUNCING though has no linked announcer!\");\n            const promise = service.currentAnnouncer.isSendingGoodbye()\n                ? service.currentAnnouncer.awaitAnnouncement()\n                : service.currentAnnouncer.cancel();\n            return promise.then(() => this.advertiseService(service, callback));\n        }\n        // first of all remove it from our advertisedService Map and remove all the maintained PTRs\n        this.clearService(service);\n        service.serviceState = \"unannounced\" /* ServiceState.UNANNOUNCED */; // the service is now considered unannounced\n        // and now we basically just announce the service by doing probing and the 'announce' step\n        if (delayAnnounce) {\n            return (0, promise_utils_1.PromiseTimeout)(1000)\n                .then(() => this.advertiseService(service, callback));\n        }\n        else {\n            return this.advertiseService(service, callback);\n        }\n    }\n    unpublishService(service, callback) {\n        if (service.serviceState === \"unannounced\" /* ServiceState.UNANNOUNCED */) {\n            throw new Error(\"Can't unpublish a service which isn't announced yet. Received \" + service.serviceState + \" for service \" + service.getFQDN());\n        }\n        if (service.serviceState === \"announced\" /* ServiceState.ANNOUNCED */ || service.serviceState === \"announcing\" /* ServiceState.ANNOUNCING */) {\n            if (service.serviceState === \"announcing\" /* ServiceState.ANNOUNCING */) {\n                (0, assert_1.default)(service.currentAnnouncer, \"Service is in state ANNOUNCING though has no linked announcer!\");\n                if (service.currentAnnouncer.isSendingGoodbye()) {\n                    return service.currentAnnouncer.awaitAnnouncement(); // we are already sending a goodbye\n                }\n                return service.currentAnnouncer.cancel().then(() => {\n                    service.serviceState = \"announced\" /* ServiceState.ANNOUNCED */; // unpublishService requires announced state\n                    return this.unpublishService(service, callback);\n                });\n            }\n            debug(\"[%s] Removing service from the network\", service.getFQDN());\n            this.clearService(service);\n            service.serviceState = \"unannounced\" /* ServiceState.UNANNOUNCED */;\n            let promise = this.goodbye(service);\n            if (callback) {\n                promise = promise.then(() => callback(), reason => {\n                    console.log(`[${service.getFQDN()}] failed goodbye with reason: ${reason}.`);\n                    callback();\n                });\n            }\n            return promise;\n        }\n        else if (service.serviceState === \"probing\" /* ServiceState.PROBING */) {\n            debug(\"[%s] Canceling probing\", service.getFQDN());\n            if (this.currentProber && this.currentProber.getService() === service) {\n                this.currentProber.cancel();\n                this.currentProber = undefined;\n            }\n            service.serviceState = \"unannounced\" /* ServiceState.UNANNOUNCED */;\n        }\n        callback && callback();\n        return Promise.resolve();\n    }\n    clearService(service) {\n        const serviceFQDN = service.getLowerCasedFQDN();\n        const typePTR = service.getLowerCasedTypePTR();\n        const subtypePTRs = service.getLowerCasedSubtypePTRs(); // possibly undefined\n        this.removePTR(Responder.SERVICE_TYPE_ENUMERATION_NAME, typePTR);\n        this.removePTR(typePTR, serviceFQDN);\n        if (subtypePTRs) {\n            for (const ptr of subtypePTRs) {\n                this.removePTR(ptr, serviceFQDN);\n            }\n        }\n        this.announcedServices.delete(service.getLowerCasedFQDN());\n    }\n    addPTR(ptr, name) {\n        // we don't call lower case here, as we expect the caller to have done that already\n        // name = dnsLowerCase(name); // worst case is that the meta query ptr record contains lower cased destination\n        const names = this.servicePointer.get(ptr);\n        if (names) {\n            if (!names.includes(name)) {\n                names.push(name);\n            }\n        }\n        else {\n            this.servicePointer.set(ptr, [name]);\n        }\n    }\n    removePTR(ptr, name) {\n        const names = this.servicePointer.get(ptr);\n        if (names) {\n            const index = names.indexOf(name);\n            if (index !== -1) {\n                names.splice(index, 1);\n            }\n            if (names.length === 0) {\n                this.servicePointer.delete(ptr);\n            }\n        }\n    }\n    probe(service) {\n        if (service.serviceState !== \"unannounced\" /* ServiceState.UNANNOUNCED */) {\n            throw new Error(\"Can't probe for a service which is announced already. Received \" + service.serviceState + \" for service \" + service.getFQDN());\n        }\n        service.serviceState = \"probing\" /* ServiceState.PROBING */;\n        (0, assert_1.default)(this.currentProber === undefined, \"Tried creating new Prober when there already was one active!\");\n        this.currentProber = new Prober_1.Prober(this, this.server, service);\n        return this.currentProber.probe()\n            .then(() => {\n            this.currentProber = undefined;\n            service.serviceState = \"probed\" /* ServiceState.PROBED */;\n        }, reason => {\n            service.serviceState = \"unannounced\" /* ServiceState.UNANNOUNCED */;\n            this.currentProber = undefined;\n            return Promise.reject(reason); // forward reason\n        });\n    }\n    announce(service) {\n        if (service.serviceState !== \"probed\" /* ServiceState.PROBED */) {\n            throw new Error(\"Cannot announce service which was not probed unique. Received \" + service.serviceState + \" for service \" + service.getFQDN());\n        }\n        (0, assert_1.default)(service.currentAnnouncer === undefined, \"Service \" + service.getFQDN() + \" is already announcing!\");\n        service.serviceState = \"announcing\" /* ServiceState.ANNOUNCING */;\n        const announcer = new Announcer_1.Announcer(this.server, service, {\n            repetitions: 3,\n        });\n        service.currentAnnouncer = announcer;\n        const serviceFQDN = service.getLowerCasedFQDN();\n        const typePTR = service.getLowerCasedTypePTR();\n        const subtypePTRs = service.getLowerCasedSubtypePTRs(); // possibly undefined\n        this.addPTR(Responder.SERVICE_TYPE_ENUMERATION_NAME, typePTR);\n        this.addPTR(typePTR, serviceFQDN);\n        if (subtypePTRs) {\n            for (const ptr of subtypePTRs) {\n                this.addPTR(ptr, serviceFQDN);\n            }\n        }\n        this.announcedServices.set(serviceFQDN, service);\n        return announcer.announce().then(() => {\n            service.serviceState = \"announced\" /* ServiceState.ANNOUNCED */;\n            service.currentAnnouncer = undefined;\n        }, reason => {\n            service.serviceState = \"unannounced\" /* ServiceState.UNANNOUNCED */;\n            service.currentAnnouncer = undefined;\n            this.clearService(service); // also removes entry from announcedServices\n            if (reason !== Announcer_1.Announcer.CANCEL_REASON) {\n                // forward reason if it is not a cancellation.\n                // We do not forward cancel reason. Announcements only get cancelled if we have something \"better\" to do.\n                // So the race is already handled by us.\n                return Promise.reject(reason);\n            }\n        });\n    }\n    handleServiceRecordUpdate(service, response, callback) {\n        var _a;\n        // when updating we just repeat the 'announce' step\n        if (service.serviceState !== \"announced\" /* ServiceState.ANNOUNCED */) { // different states are already handled in CiaoService where this event handler is fired\n            throw new Error(\"Cannot update txt of service which is not announced yet. Received \" + service.serviceState + \" for service \" + service.getFQDN());\n        }\n        debug(\"[%s] Updating %d record(s) for given service!\", service.getFQDN(), response.answers.length + (((_a = response.additionals) === null || _a === void 0 ? void 0 : _a.length) || 0));\n        // TODO we should do a announcement at this point \"in theory\"\n        this.server.sendResponseBroadcast(response, service).then(results => {\n            const failRatio = (0, MDNSServer_1.SendResultFailedRatio)(results);\n            if (failRatio === 1) {\n                console.log((0, MDNSServer_1.SendResultFormatError)(results, `Failed to send records update for '${service.getFQDN()}'`), true);\n                if (callback) {\n                    callback(new Error(\"Updating records failed as of socket errors!\"));\n                }\n                return; // all failed => updating failed\n            }\n            if (failRatio > 0) {\n                // some queries on some interfaces failed, but not all. We log that but consider that to be a success\n                // at this point we are not responsible for removing stale network interfaces or something\n                debug((0, MDNSServer_1.SendResultFormatError)(results, `Some of the record updates for '${service.getFQDN()}' failed`));\n                // SEE no return here\n            }\n            if (callback) {\n                callback();\n            }\n        });\n    }\n    handleServiceRecordUpdateOnInterface(service, name, records, callback) {\n        // when updating we just repeat the 'announce' step\n        if (service.serviceState !== \"announced\" /* ServiceState.ANNOUNCED */) { // different states are already handled in CiaoService where this event handler is fired\n            throw new Error(\"Cannot update txt of service which is not announced yet. Received \" + service.serviceState + \" for service \" + service.getFQDN());\n        }\n        debug(\"[%s] Updating %d record(s) for given service on interface %s!\", service.getFQDN(), records.length, name);\n        const packet = DNSPacket_1.DNSPacket.createDNSResponsePacketsFromRRSet({ answers: records });\n        this.server.sendResponse(packet, name, callback);\n    }\n    goodbye(service) {\n        (0, assert_1.default)(service.currentAnnouncer === undefined, \"Service \" + service.getFQDN() + \" is already announcing!\");\n        service.serviceState = \"announcing\" /* ServiceState.ANNOUNCING */;\n        const announcer = new Announcer_1.Announcer(this.server, service, {\n            repetitions: 1,\n            goodbye: true,\n        });\n        service.currentAnnouncer = announcer;\n        return announcer.announce().then(() => {\n            service.serviceState = \"unannounced\" /* ServiceState.UNANNOUNCED */;\n            service.currentAnnouncer = undefined;\n        }, reason => {\n            // just assume unannounced. we won't be answering anymore, so the record will be flushed from cache sometime.\n            service.serviceState = \"unannounced\" /* ServiceState.UNANNOUNCED */;\n            service.currentAnnouncer = undefined;\n            return Promise.reject(reason);\n        });\n    }\n    handleNetworkUpdate(change) {\n        for (const service of this.announcedServices.values()) {\n            service.handleNetworkInterfaceUpdate(change);\n        }\n    }\n    /**\n     * @private method called by the MDNSServer when an incoming query needs ot be handled\n     */\n    handleQuery(packet, endpoint) {\n        const start = new Date().getTime();\n        const endpointId = endpoint.address + \":\" + endpoint.port + \":\" + endpoint.interface; // used to match truncated queries\n        const previousQuery = this.truncatedQueries[endpointId];\n        if (previousQuery) {\n            const truncatedQueryResult = previousQuery.appendDNSPacket(packet);\n            switch (truncatedQueryResult) {\n                case 1 /* TruncatedQueryResult.ABORT */: // returned when we detect, that continuously TC queries are sent\n                    delete this.truncatedQueries[endpointId];\n                    debug(\"[%s] Aborting to wait for more truncated queries. Waited a total of %d ms receiving %d queries\", endpointId, previousQuery.getTotalWaitTime(), previousQuery.getArrivedPacketCount());\n                    return;\n                case 2 /* TruncatedQueryResult.AGAIN_TRUNCATED */:\n                    debug(\"[%s] Received a query marked as truncated, waiting for more to arrive\", endpointId);\n                    return; // wait for the next packet\n                case 3 /* TruncatedQueryResult.FINISHED */:\n                    delete this.truncatedQueries[endpointId];\n                    packet = previousQuery.getPacket(); // replace packet with the complete deal\n                    debug(\"[%s] Last part of the truncated query arrived. Received %d packets taking a total of %d ms\", endpointId, previousQuery.getArrivedPacketCount(), previousQuery.getTotalWaitTime());\n                    break;\n            }\n        }\n        else if (packet.flags.truncation) {\n            // RFC 6763 18.5 truncate flag indicates that additional known-answer records follow shortly\n            debug(\"Received truncated query from \" + JSON.stringify(endpoint) + \" waiting for more to come!\");\n            const truncatedQuery = new TruncatedQuery_1.TruncatedQuery(packet);\n            this.truncatedQueries[endpointId] = truncatedQuery;\n            truncatedQuery.on(\"timeout\" /* TruncatedQueryEvent.TIMEOUT */, () => {\n                // called when more than 400-500ms pass until the next packet arrives\n                debug(\"[%s] Timeout passed since the last truncated query was received. Discarding %d packets received in %d ms.\", endpointId, truncatedQuery.getArrivedPacketCount(), truncatedQuery.getTotalWaitTime());\n                delete this.truncatedQueries[endpointId];\n            });\n            return; // wait for the next query\n        }\n        const isUnicastQuerier = endpoint.port !== MDNSServer_1.MDNSServer.MDNS_PORT; // explained below\n        const isProbeQuery = packet.authorities.size > 0;\n        let udpPayloadSize = undefined; // payload size supported by the querier\n        for (const record of packet.additionals.values()) {\n            if (record.type === 41 /* RType.OPT */) {\n                udpPayloadSize = record.udpPayloadSize;\n                break;\n            }\n        }\n        // responses must not include questions RFC 6762 6.\n        // known answer suppression according to RFC 6762 7.1.\n        const multicastResponses = [];\n        const unicastResponses = [];\n        // gather answers for all the questions\n        packet.questions.forEach(question => {\n            const responses = this.answerQuestion(question, endpoint, packet.answers);\n            if (isUnicastQuerier || question.unicastResponseFlag && !this.ignoreUnicastResponseFlag) {\n                unicastResponses.push(...responses);\n            }\n            else {\n                multicastResponses.push(...responses);\n            }\n        });\n        if (this.currentProber) {\n            this.currentProber.handleQuery(packet, endpoint);\n        }\n        if (isUnicastQuerier) {\n            // we are dealing with a legacy unicast dns query (RFC 6762 6.7.)\n            //  * MUSTS: response via unicast, repeat query ID, repeat questions, clear cache flush bit\n            //  * SHOULDS: ttls should not be greater than 10s as legacy resolvers don't take part in the cache coherency mechanism\n            for (let i = 0; i < unicastResponses.length; i++) {\n                const response = unicastResponses[i];\n                // only add questions to the first packet (will be combined anyway) and we must ensure\n                // each packet stays unique in its records\n                response.markLegacyUnicastResponse(packet.id, i === 0 ? Array.from(packet.questions.values()) : undefined);\n            }\n        }\n        // RFC 6762 6.4. Response aggregation:\n        //    When possible, a responder SHOULD, for the sake of network\n        //    efficiency, aggregate as many responses as possible into a single\n        //    Multicast DNS response message.  For example, when a responder has\n        //    several responses it plans to send, each delayed by a different\n        //    interval, then earlier responses SHOULD be delayed by up to an\n        //    additional 500 ms if that will permit them to be aggregated with\n        //    other responses scheduled to go out a little later.\n        QueryResponse_1.QueryResponse.combineResponses(multicastResponses, udpPayloadSize);\n        QueryResponse_1.QueryResponse.combineResponses(unicastResponses, udpPayloadSize);\n        if (isUnicastQuerier && unicastResponses.length > 1) {\n            // RFC 6762 18.5. In legacy unicast response messages, the TC bit has the same meaning\n            //    as in conventional Unicast DNS: it means that the response was too\n            //    large to fit in a single packet, so the querier SHOULD reissue its\n            //    query using TCP in order to receive the larger response.\n            unicastResponses.splice(1, unicastResponses.length - 1); // discard all other\n            unicastResponses[0].markTruncated();\n        }\n        for (const unicastResponse of unicastResponses) {\n            if (!unicastResponse.hasAnswers()) {\n                continue;\n            }\n            this.server.sendResponse(unicastResponse.asPacket(), endpoint);\n            const time = new Date().getTime() - start;\n            debug(\"Sending response via unicast to %s (took %d ms): %s\", JSON.stringify(endpoint), time, unicastResponse.asString(udpPayloadSize));\n        }\n        for (const multicastResponse of multicastResponses) {\n            if (!multicastResponse.hasAnswers()) {\n                continue;\n            }\n            if ((multicastResponse.containsSharedAnswer() || packet.questions.size > 1) && !isProbeQuery) {\n                // We must delay the response on an interval of 20-120ms if we can't assure that we are the only one responding (shared records).\n                // This is also the case if there are multiple questions. If multiple questions are asked\n                // we probably could not answer them all (because not all of them were directed to us).\n                // All those conditions are overridden if this is a probe query. To those queries we must respond instantly!\n                const time = new Date().getTime() - start;\n                this.enqueueDelayedMulticastResponse(multicastResponse.asPacket(), endpoint.interface, time);\n            }\n            else {\n                // otherwise the response is sent immediately, if there isn't any packet in the queue\n                // so first step is, check if there is a packet in the queue we are about to send out\n                // which can be combined with our current packet without adding a delay > 500ms\n                let sentWithLaterPacket = false;\n                for (let i = 0; i < this.delayedMulticastResponses.length; i++) {\n                    const delayedResponse = this.delayedMulticastResponses[i];\n                    if (delayedResponse.getTimeTillSent() > QueuedResponse_1.QueuedResponse.MAX_DELAY) {\n                        // all packets following won't be compatible either\n                        break;\n                    }\n                    if (delayedResponse.combineWithUniqueResponseIfPossible(multicastResponse, endpoint.interface)) {\n                        const time = new Date().getTime() - start;\n                        sentWithLaterPacket = true;\n                        debug(\"Multicast response on interface %s containing unique records (took %d ms) was combined with response which is sent out later\", endpoint.interface, time);\n                        break;\n                    }\n                }\n                if (!sentWithLaterPacket) {\n                    this.server.sendResponse(multicastResponse.asPacket(), endpoint.interface);\n                    const time = new Date().getTime() - start;\n                    debug(\"Sending response via multicast on network %s (took %d ms): %s\", endpoint.interface, time, multicastResponse.asString(udpPayloadSize));\n                }\n            }\n        }\n    }\n    /**\n     * @private method called by the MDNSServer when an incoming response needs to be handled\n     */\n    handleResponse(packet, endpoint) {\n        // any questions in a response must be ignored RFC 6762 6.\n        if (this.currentProber) { // if there is a probing process running currently, just forward all messages to it\n            this.currentProber.handleResponse(packet, endpoint);\n        }\n        for (const service of this.announcedServices.values()) {\n            let conflictingRData = false;\n            let ttlConflicts = 0; // we currently do a full-blown announcement with all records, we could in the future track which records have invalid ttl\n            for (const record of packet.answers.values()) {\n                const type = Responder.checkRecordConflictType(service, record, endpoint);\n                if (type === 1 /* ConflictType.CONFLICTING_RDATA */) {\n                    conflictingRData = true;\n                    break; // we will republish in any case\n                }\n                else if (type === 2 /* ConflictType.CONFLICTING_TTL */) {\n                    ttlConflicts++;\n                }\n            }\n            if (!conflictingRData) {\n                for (const record of packet.additionals.values()) {\n                    const type = Responder.checkRecordConflictType(service, record, endpoint);\n                    if (type === 1 /* ConflictType.CONFLICTING_RDATA */) {\n                        conflictingRData = true;\n                        break; // we will republish in any case\n                    }\n                    else if (type === 2 /* ConflictType.CONFLICTING_TTL */) {\n                        ttlConflicts++;\n                    }\n                }\n            }\n            if (conflictingRData) {\n                // noinspection JSIgnoredPromiseFromCall\n                this.republishService(service, error => {\n                    if (error) {\n                        console.log(`FATAL Error occurred trying to resolve conflict for service ${service.getFQDN()}! We can't recover from this!`);\n                        console.log(error.stack);\n                        process.exit(1); // we have a service which should be announced, though we failed to reannounce.\n                        // if this should ever happen in reality, whe might want to introduce a more sophisticated recovery\n                        // for situations where it makes sense\n                    }\n                }, true);\n            }\n            else if (ttlConflicts && !service.currentAnnouncer) {\n                service.serviceState = \"announcing\" /* ServiceState.ANNOUNCING */; // all code above doesn't expect an Announcer object in state ANNOUNCED\n                const announcer = new Announcer_1.Announcer(this.server, service, {\n                    repetitions: 1, // we send exactly one packet to correct any ttl values in neighbouring caches\n                });\n                service.currentAnnouncer = announcer;\n                announcer.announce().then(() => {\n                    service.currentAnnouncer = undefined;\n                    service.serviceState = \"announced\" /* ServiceState.ANNOUNCED */;\n                }, reason => {\n                    service.currentAnnouncer = undefined;\n                    service.serviceState = \"announced\" /* ServiceState.ANNOUNCED */;\n                    if (reason === Announcer_1.Announcer.CANCEL_REASON) {\n                        return; // nothing to worry about\n                    }\n                    console.warn(\"When trying to resolve a ttl conflict on the network, we were unable to send our response packet: \" + reason.message);\n                });\n            }\n        }\n    }\n    static checkRecordConflictType(service, record, endpoint) {\n        // RFC 6762 9. Conflict Resolution:\n        //    A conflict occurs when a Multicast DNS responder has a unique record\n        //    for which it is currently authoritative, and it receives a Multicast\n        //    DNS response message containing a record with the same name, rrtype\n        //    and rrclass, but inconsistent rdata.  What may be considered\n        //    inconsistent is context-sensitive, except that resource records with\n        //    identical rdata are never considered inconsistent, even if they\n        //    originate from different hosts.  This is to permit use of proxies and\n        //    other fault-tolerance mechanisms that may cause more than one\n        //    responder to be capable of issuing identical answers on the network.\n        //\n        //    A common example of a resource record type that is intended to be\n        //    unique, not shared between hosts, is the address record that maps a\n        //    host's name to its IP address.  Should a host witness another host\n        //    announce an address record with the same name but a different IP\n        //    address, then that is considered inconsistent, and that address\n        //    record is considered to be in conflict.\n        //\n        //    Whenever a Multicast DNS responder receives any Multicast DNS\n        //    response (solicited or otherwise) containing a conflicting resource\n        //    record in any of the Resource Record Sections, the Multicast DNS\n        //    responder MUST immediately reset its conflicted unique record to\n        //    probing state, and go through the startup steps described above in\n        //    Section 8, \"Probing and Announcing on Startup\".  The protocol used in\n        //    the Probing phase will determine a winner and a loser, and the loser\n        //    MUST cease using the name, and reconfigure.\n        if (!service.advertisesOnInterface(endpoint.interface)) {\n            return 0 /* ConflictType.NO_CONFLICT */;\n        }\n        const recordName = record.getLowerCasedName();\n        if (recordName === service.getLowerCasedFQDN()) {\n            if (record.type === 33 /* RType.SRV */) {\n                const srvRecord = record;\n                if (srvRecord.getLowerCasedHostname() !== service.getLowerCasedHostname()) {\n                    debug(\"[%s] Noticed conflicting record on the network. SRV with hostname: %s\", service.getFQDN(), srvRecord.hostname);\n                    return 1 /* ConflictType.CONFLICTING_RDATA */;\n                }\n                else if (srvRecord.port !== service.getPort()) {\n                    debug(\"[%s] Noticed conflicting record on the network. SRV with port: %s\", service.getFQDN(), srvRecord.port);\n                    return 1 /* ConflictType.CONFLICTING_RDATA */;\n                }\n                if (srvRecord.ttl < SRVRecord_1.SRVRecord.DEFAULT_TTL / 2) {\n                    return 2 /* ConflictType.CONFLICTING_TTL */;\n                }\n            }\n            else if (record.type === 16 /* RType.TXT */) {\n                const txtRecord = record;\n                const txt = service.getTXT();\n                if (txt.length !== txtRecord.txt.length) { // length differs, can't be the same data\n                    debug(\"[%s] Noticed conflicting record on the network. TXT with differing data length\", service.getFQDN());\n                    return 1 /* ConflictType.CONFLICTING_RDATA */;\n                }\n                for (let i = 0; i < txt.length; i++) {\n                    const buffer0 = txt[i];\n                    const buffer1 = txtRecord.txt[i];\n                    if (buffer0.length !== buffer1.length || buffer0.toString(\"hex\") !== buffer1.toString(\"hex\")) {\n                        debug(\"[%s] Noticed conflicting record on the network. TXT with differing data.\", service.getFQDN());\n                        return 1 /* ConflictType.CONFLICTING_RDATA */;\n                    }\n                }\n                if (txtRecord.ttl < TXTRecord_1.TXTRecord.DEFAULT_TTL / 2) {\n                    return 2 /* ConflictType.CONFLICTING_TTL */;\n                }\n            }\n        }\n        else if (recordName === service.getLowerCasedHostname()) {\n            if (record.type === 1 /* RType.A */) {\n                const aRecord = record;\n                if (!service.hasAddress(aRecord.ipAddress)) {\n                    // if the service doesn't expose the listed address we have a conflict\n                    debug(\"[%s] Noticed conflicting record on the network. A with ip address: %s\", service.getFQDN(), aRecord.ipAddress);\n                    return 1 /* ConflictType.CONFLICTING_RDATA */;\n                }\n                if (aRecord.ttl < ARecord_1.ARecord.DEFAULT_TTL / 2) {\n                    return 2 /* ConflictType.CONFLICTING_TTL */;\n                }\n            }\n            else if (record.type === 28 /* RType.AAAA */) {\n                const aaaaRecord = record;\n                if (!service.hasAddress(aaaaRecord.ipAddress)) {\n                    // if the service doesn't expose the listed address we have a conflict\n                    debug(\"[%s] Noticed conflicting record on the network. AAAA with ip address: %s\", service.getFQDN(), aaaaRecord.ipAddress);\n                    return 1 /* ConflictType.CONFLICTING_RDATA */;\n                }\n                if (aaaaRecord.ttl < AAAARecord_1.AAAARecord.DEFAULT_TTL / 2) {\n                    return 2 /* ConflictType.CONFLICTING_TTL */;\n                }\n            }\n        }\n        else if (record.type === 12 /* RType.PTR */) {\n            const ptrRecord = record;\n            if (recordName === service.getLowerCasedTypePTR()) {\n                if (ptrRecord.getLowerCasedPTRName() === service.getLowerCasedFQDN() && ptrRecord.ttl < PTRRecord_1.PTRRecord.DEFAULT_TTL / 2) {\n                    return 2 /* ConflictType.CONFLICTING_TTL */;\n                }\n            }\n            else if (recordName === Responder.SERVICE_TYPE_ENUMERATION_NAME) {\n                // nothing to do here, I guess\n            }\n            else {\n                const subTypes = service.getLowerCasedSubtypePTRs();\n                if (subTypes && subTypes.includes(recordName)\n                    && ptrRecord.getLowerCasedPTRName() === service.getLowerCasedFQDN() && ptrRecord.ttl < PTRRecord_1.PTRRecord.DEFAULT_TTL / 2) {\n                    return 2 /* ConflictType.CONFLICTING_TTL */;\n                }\n            }\n        }\n        return 0 /* ConflictType.NO_CONFLICT */;\n    }\n    enqueueDelayedMulticastResponse(packet, interfaceName, time) {\n        const response = new QueuedResponse_1.QueuedResponse(packet, interfaceName);\n        response.calculateRandomDelay();\n        (0, sorted_array_1.sortedInsert)(this.delayedMulticastResponses, response, queuedResponseComparator);\n        // run combine/delay checks\n        for (let i = 0; i < this.delayedMulticastResponses.length; i++) {\n            const response0 = this.delayedMulticastResponses[i];\n            // search for any packets sent out after this packet\n            for (let j = i + 1; j < this.delayedMulticastResponses.length; j++) {\n                const response1 = this.delayedMulticastResponses[j];\n                if (!response0.delayWouldBeInTimelyManner(response1)) {\n                    // all packets following won't be compatible either\n                    break;\n                }\n                if (response0.combineWithNextPacketIfPossible(response1)) {\n                    // combine was a success and the packet got delay\n                    // remove the packet from the queue\n                    const index = this.delayedMulticastResponses.indexOf(response0);\n                    if (index !== -1) {\n                        this.delayedMulticastResponses.splice(index, 1);\n                    }\n                    i--; // reduce i, as one element got removed from the queue\n                    break;\n                }\n                // otherwise we continue with maybe some packets further ahead\n            }\n        }\n        if (!response.delayed) {\n            // only set timer if packet got not delayed\n            response.scheduleResponse(() => {\n                const index = this.delayedMulticastResponses.indexOf(response);\n                if (index !== -1) {\n                    this.delayedMulticastResponses.splice(index, 1);\n                }\n                try {\n                    this.server.sendResponse(response.getPacket(), interfaceName);\n                    debug(\"Sending (delayed %dms) response via multicast on network interface %s (took %d ms): %s\", Math.round(response.getTimeSinceCreation()), interfaceName, time, response.getPacket().asLoggingString());\n                }\n                catch (error) {\n                    if (error.name === errors_1.ERR_INTERFACE_NOT_FOUND) {\n                        debug(\"Multicast response (delayed %dms) was cancelled as the network interface %s is no longer available!\", Math.round(response.getTimeSinceCreation()), interfaceName);\n                    }\n                    else if (error.name === errors_1.ERR_SERVER_CLOSED) {\n                        debug(\"Multicast response (delayed %dms) was cancelled as the server is about to be shutdown!\", Math.round(response.getTimeSinceCreation()));\n                    }\n                    else {\n                        throw error;\n                    }\n                }\n            });\n        }\n    }\n    answerQuestion(question, endpoint, knownAnswers) {\n        // RFC 6762 6: The determination of whether a given record answers a given question\n        //    is made using the standard DNS rules: the record name must match the\n        //    question name, the record rrtype must match the question qtype unless\n        //    the qtype is \"ANY\" (255) or the rrtype is \"CNAME\" (5), and the record\n        //    rrclass must match the question qclass unless the qclass is \"ANY\" (255).\n        if (question.class !== 1 /* QClass.IN */ && question.class !== 255 /* QClass.ANY */) {\n            // We just publish answers with IN class. So only IN or ANY questions classes will match\n            return [];\n        }\n        const serviceResponses = [];\n        let metaQueryResponse = undefined;\n        if (question.type === 12 /* QType.PTR */ || question.type === 255 /* QType.ANY */ || question.type === 5 /* QType.CNAME */) {\n            const destinations = this.servicePointer.get(question.getLowerCasedName()); // look up the pointer, all entries are dnsLowerCased\n            if (destinations) {\n                // if it's a pointer name, we handle it here\n                for (const data of destinations) {\n                    // check if the PTR is pointing towards a service, like in questions for PTR '_hap._tcp.local'\n                    // if that's the case, let the question be answered by the service itself\n                    const service = this.announcedServices.get(data);\n                    if (service) {\n                        if (service.advertisesOnInterface(endpoint.interface)) {\n                            // call the method for original question, so additionals get added properly\n                            const response = Responder.answerServiceQuestion(service, question, endpoint, knownAnswers);\n                            if (response.hasAnswers()) {\n                                serviceResponses.push(response);\n                            }\n                        }\n                    }\n                    else {\n                        if (!metaQueryResponse) {\n                            metaQueryResponse = new QueryResponse_1.QueryResponse(knownAnswers);\n                            serviceResponses.unshift(metaQueryResponse);\n                        }\n                        // it's probably question for PTR '_services._dns-sd._udp.local'\n                        // the PTR will just point to something like '_hap._tcp.local' thus no additional records need to be included\n                        metaQueryResponse.addAnswer(new PTRRecord_1.PTRRecord(question.name, data));\n                        // we may send out meta queries on interfaces where there aren't any services, because they are\n                        //  restricted to other interfaces.\n                    }\n                }\n                return serviceResponses; // if we got in this if-body, it was a pointer name and we handled it correctly\n            } /* else if (loweredQuestionName.endsWith(\".in-addr.arpa\") || loweredQuestionName.endsWith(\".ip6.arpa\")) { // reverse address lookup\n                const address = ipAddressFromReversAddressName(loweredQuestionName);\n      \n                for (const service of this.announcedServices.values()) {\n                  const record = service.reverseAddressMapping(address);\n                  if (record) {\n                    mainResponse.addAnswer(record);\n                  }\n                }\n              }\n              We won't actually respond to reverse address queries.\n              This typically confuses responders like avahi, which then over and over try to increment the hostname.\n              */\n        }\n        for (const service of this.announcedServices.values()) {\n            if (!service.advertisesOnInterface(endpoint.interface)) {\n                continue;\n            }\n            const response = Responder.answerServiceQuestion(service, question, endpoint, knownAnswers);\n            if (response.hasAnswers()) {\n                serviceResponses.push(response);\n            }\n        }\n        return serviceResponses;\n    }\n    static answerServiceQuestion(service, question, endpoint, knownAnswers) {\n        // This assumes to be called from answerQuestion inside the Responder class and thus that certain\n        // preconditions or special cases are already covered.\n        // For one, we assume classes are already matched.\n        const response = new QueryResponse_1.QueryResponse(knownAnswers);\n        const loweredQuestionName = question.getLowerCasedName();\n        const askingAny = question.type === 255 /* QType.ANY */ || question.type === 5 /* QType.CNAME */;\n        const addAnswer = response.addAnswer.bind(response);\n        const addAdditional = response.addAdditional.bind(response);\n        // RFC 6762 6.2. In the event that a device has only IPv4 addresses but no IPv6\n        //    addresses, or vice versa, then the appropriate NSEC record SHOULD be\n        //    placed into the additional section, so that queriers can know with\n        //    certainty that the device has no addresses of that kind.\n        if (loweredQuestionName === service.getLowerCasedTypePTR()) {\n            if (askingAny || question.type === 12 /* QType.PTR */) {\n                const added = response.addAnswer(service.ptrRecord());\n                if (added) {\n                    // only add additionals if answer is not suppressed by the known answer section\n                    // RFC 6763 12.1: include additionals: srv, txt, a, aaaa\n                    response.addAdditional(service.txtRecord(), service.srvRecord());\n                    this.addAddressRecords(service, endpoint, 1 /* RType.A */, addAdditional);\n                    this.addAddressRecords(service, endpoint, 28 /* RType.AAAA */, addAdditional);\n                    response.addAdditional(service.serviceNSECRecord(), service.addressNSECRecord());\n                }\n            }\n        }\n        else if (loweredQuestionName === service.getLowerCasedFQDN()) {\n            if (askingAny) {\n                response.addAnswer(service.txtRecord());\n                const addedSrv = response.addAnswer(service.srvRecord());\n                if (addedSrv) {\n                    // RFC 6763 12.2: include additionals: a, aaaa\n                    this.addAddressRecords(service, endpoint, 1 /* RType.A */, addAdditional);\n                    this.addAddressRecords(service, endpoint, 28 /* RType.AAAA */, addAdditional);\n                    response.addAdditional(service.serviceNSECRecord(), service.addressNSECRecord());\n                }\n            }\n            else if (question.type === 33 /* QType.SRV */) {\n                const added = response.addAnswer(service.srvRecord());\n                if (added) {\n                    // RFC 6763 12.2: include additionals: a, aaaa\n                    this.addAddressRecords(service, endpoint, 1 /* RType.A */, addAdditional);\n                    this.addAddressRecords(service, endpoint, 28 /* RType.AAAA */, addAdditional);\n                    response.addAdditional(service.serviceNSECRecord(true), service.addressNSECRecord());\n                }\n            }\n            else if (question.type === 16 /* QType.TXT */) {\n                response.addAnswer(service.txtRecord());\n                response.addAdditional(service.serviceNSECRecord());\n                // RFC 6763 12.3: not any other additionals\n            }\n        }\n        else if (loweredQuestionName === service.getLowerCasedHostname() || loweredQuestionName + \"local.\" === service.getLowerCasedHostname()) {\n            if (askingAny) {\n                this.addAddressRecords(service, endpoint, 1 /* RType.A */, addAnswer);\n                this.addAddressRecords(service, endpoint, 28 /* RType.AAAA */, addAnswer);\n                response.addAdditional(service.addressNSECRecord());\n            }\n            else if (question.type === 1 /* QType.A */) {\n                // RFC 6762 6.2 When a Multicast DNS responder places an IPv4 or IPv6 address record\n                //    (rrtype \"A\" or \"AAAA\") into a response message, it SHOULD also place\n                //    any records of the other address type with the same name into the\n                //    additional section, if there is space in the message.\n                const added = this.addAddressRecords(service, endpoint, 1 /* RType.A */, addAnswer);\n                if (added) {\n                    this.addAddressRecords(service, endpoint, 28 /* RType.AAAA */, addAdditional);\n                }\n                response.addAdditional(service.addressNSECRecord()); // always add the negative response, always assert dominance\n            }\n            else if (question.type === 28 /* QType.AAAA */) {\n                // RFC 6762 6.2 When a Multicast DNS responder places an IPv4 or IPv6 address record\n                //    (rrtype \"A\" or \"AAAA\") into a response message, it SHOULD also place\n                //    any records of the other address type with the same name into the\n                //    additional section, if there is space in the message.\n                const added = this.addAddressRecords(service, endpoint, 28 /* RType.AAAA */, addAnswer);\n                if (added) {\n                    this.addAddressRecords(service, endpoint, 1 /* RType.A */, addAdditional);\n                }\n                response.addAdditional(service.addressNSECRecord()); // always add the negative response, always assert dominance\n            }\n        }\n        else if (service.getLowerCasedSubtypePTRs()) {\n            if (askingAny || question.type === 12 /* QType.PTR */) {\n                const dnsLowerSubTypes = service.getLowerCasedSubtypePTRs();\n                const index = dnsLowerSubTypes.indexOf(loweredQuestionName);\n                if (index !== -1) { // we have a subtype for the question\n                    const records = service.subtypePtrRecords();\n                    const record = records[index];\n                    (0, assert_1.default)(loweredQuestionName === record.name, \"Question Name didn't match selected sub type ptr record!\");\n                    const added = response.addAnswer(record);\n                    if (added) {\n                        // RFC 6763 12.1: include additionals: srv, txt, a, aaaa\n                        response.addAdditional(service.txtRecord(), service.srvRecord());\n                        this.addAddressRecords(service, endpoint, 1 /* RType.A */, addAdditional);\n                        this.addAddressRecords(service, endpoint, 28 /* RType.AAAA */, addAdditional);\n                        response.addAdditional(service.serviceNSECRecord(), service.addressNSECRecord());\n                    }\n                }\n            }\n        }\n        return response;\n    }\n    /**\n     * This method is a helper method to reduce the complexity inside {@link answerServiceQuestion}.\n     * The method calculates which A and AAAA records to be added for a given {@code endpoint} using\n     * the records from the provided {@code service}.\n     * It will add the records by calling the provided {@code dest} method.\n     *\n     * @param {CiaoService} service - service which records to be use\n     * @param {EndpointInfo} endpoint - endpoint information providing the interface\n     * @param {RType.A | RType.AAAA} type - defines the type of records to be added\n     * @param {RecordAddMethod} dest - defines the destination which the records should be added\n     * @returns true if any records got added\n     */\n    static addAddressRecords(service, endpoint, type, dest) {\n        if (type === 1 /* RType.A */) {\n            const record = service.aRecord(endpoint.interface);\n            return record ? dest(record) : false;\n        }\n        else if (type === 28 /* RType.AAAA */) {\n            const record = service.aaaaRecord(endpoint.interface);\n            const routableRecord = service.aaaaRoutableRecord(endpoint.interface);\n            const ulaRecord = service.aaaaUniqueLocalRecord(endpoint.interface);\n            let addedAny = false;\n            if (record) {\n                addedAny = dest(record);\n            }\n            if (routableRecord) {\n                const added = dest(routableRecord);\n                addedAny = addedAny || added;\n            }\n            if (ulaRecord) {\n                const added = dest(ulaRecord);\n                addedAny = addedAny || added;\n            }\n            return addedAny;\n        }\n        else {\n            assert_1.default.fail(\"Illegal argument!\");\n        }\n    }\n}\nexports.Responder = Responder;\n/**\n * @private\n */\nResponder.SERVICE_TYPE_ENUMERATION_NAME = \"_services._dns-sd._udp.local.\";\nResponder.INSTANCES = new Map();\n//# sourceMappingURL=Responder.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NonCompressionLabelCoder = exports.DNSLabelCoder = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nclass DNSLabelCoder {\n    constructor(legacyUnicastEncoding) {\n        this.trackedLengths = [];\n        this.writtenNames = [];\n        this.legacyUnicastEncoding = legacyUnicastEncoding || false;\n    }\n    initBuf(buffer) {\n        this.buffer = buffer;\n    }\n    initRRLocation(recordOffset, rDataOffset, rDataLength) {\n        this.startOfRR = recordOffset;\n        this.startOfRData = rDataOffset;\n        this.rDataLength = rDataLength;\n    }\n    clearRRLocation() {\n        this.startOfRR = undefined;\n        this.startOfRData = undefined;\n        this.rDataLength = undefined;\n    }\n    getUncompressedNameLength(name) {\n        if (name === \".\") {\n            return 1; // root label takes one zero byte\n        }\n        (0, assert_1.default)(name.endsWith(\".\"), \"Supplied illegal name which doesn't end with the root label!\");\n        let length = 0;\n        const labels = name.split(\".\");\n        for (let i = 0; i < labels.length; i++) {\n            const label = labels[i];\n            if (!label && i < labels.length - 1) {\n                assert_1.default.fail(\"Label \" + i + \" in name '\" + name + \"' was empty\");\n            }\n            length += DNSLabelCoder.getLabelLength(label);\n        }\n        return length;\n    }\n    getNameLength(name) {\n        if (DNSLabelCoder.DISABLE_COMPRESSION) {\n            return this.getUncompressedNameLength(name);\n        }\n        if (name === \".\") {\n            return 1; // root label takes one zero byte and is not compressible\n        }\n        (0, assert_1.default)(name.endsWith(\".\"), \"Supplied illegal name which doesn't end with the root label!\");\n        const labelLengths = name.split(\".\")\n            .map(label => DNSLabelCoder.getLabelLength(label));\n        const nameLength = {\n            name: name,\n            length: 0, // total length needed for encoding (with compression enabled)\n            labelLengths: labelLengths,\n        };\n        let candidateSharingLongestSuffix = undefined;\n        let longestSuffixLength = 0; // amount of labels which are identical\n        // pointers MUST only point to PRIOR label locations\n        for (let i = 0; i < this.trackedLengths.length; i++) {\n            const element = this.trackedLengths[i];\n            const suffixLength = DNSLabelCoder.computeLabelSuffixLength(element.name, name);\n            // it is very important that this is an GREATER and not just a GREATER EQUAL!!!!\n            // don't change anything unless you fully understand all implications (0, and big comment block below)\n            if (suffixLength > longestSuffixLength) {\n                candidateSharingLongestSuffix = element;\n                longestSuffixLength = suffixLength;\n            }\n        }\n        let length = 0;\n        if (candidateSharingLongestSuffix) {\n            // in theory, it is possible that the candidate has a pointer which \"fromIndex\" is smaller than\n            // the \"toIndex\" we are pointing to below. This could result in that we point to a location which\n            // never gets written into the buffer, thus we can't point to it.\n            // But as we always start in order (with the first element in our array; see for loop above)\n            // we will always find the label first, which such a theoretical candidate is also pointing at\n            const pointingFromIndex = labelLengths.length - 1 - longestSuffixLength; // -1 as the empty root label is always included\n            for (let i = 0; i < pointingFromIndex; i++) {\n                length += labelLengths[i];\n            }\n            length += 2; // 2 byte for the pointer\n        }\n        else {\n            for (let i = 0; i < labelLengths.length; i++) {\n                length += labelLengths[i];\n            }\n        }\n        nameLength.length = length;\n        this.trackedLengths.push(nameLength);\n        return nameLength.length;\n    }\n    encodeUncompressedName(name, offset) {\n        if (!this.buffer) {\n            assert_1.default.fail(\"Illegal state. Buffer not initialized!\");\n        }\n        return DNSLabelCoder.encodeUncompressedName(name, this.buffer, offset);\n    }\n    static encodeUncompressedName(name, buffer, offset) {\n        (0, assert_1.default)(name.endsWith(\".\"), \"Name does not end with the root label\");\n        const oldOffset = offset;\n        const labels = name === \".\"\n            ? [\"\"]\n            : name.split(\".\");\n        for (let i = 0; i < labels.length; i++) {\n            const label = labels[i];\n            if (label === \"\") {\n                (0, assert_1.default)(i === labels.length - 1, \"Encountered root label being not at the end of the domain name\");\n                buffer.writeUInt8(0, offset++); // write a terminating zero\n                break;\n            }\n            // write length byte followed by the label data\n            const length = buffer.write(label, offset + 1);\n            buffer.writeUInt8(length, offset);\n            offset += length + 1;\n        }\n        return offset - oldOffset; // written bytes\n    }\n    encodeName(name, offset) {\n        if (DNSLabelCoder.DISABLE_COMPRESSION) {\n            return this.encodeUncompressedName(name, offset);\n        }\n        if (!this.buffer) {\n            assert_1.default.fail(\"Illegal state. Buffer not initialized!\");\n        }\n        if (name === \".\") {\n            this.buffer.writeUInt8(0, offset); // write a terminating zero\n            return 1;\n        }\n        const oldOffset = offset;\n        const labels = name.split(\".\");\n        const writtenName = {\n            name: name,\n            writtenLabels: new Array(labels.length).fill(-1), // init with \"-1\" meaning unknown location\n        };\n        let candidateSharingLongestSuffix = undefined;\n        let longestSuffixLength = 0; // amount of labels which are identical\n        for (let i = 0; i < this.writtenNames.length; i++) {\n            const element = this.writtenNames[i];\n            const suffixLength = DNSLabelCoder.computeLabelSuffixLength(element.name, name);\n            // it is very important that this is an GREATER and not just a GREATER EQUAL!!!!\n            // don't change anything unless you fully understand all implications (0, and big comment block below)\n            if (suffixLength > longestSuffixLength) {\n                candidateSharingLongestSuffix = element;\n                longestSuffixLength = suffixLength;\n            }\n        }\n        if (candidateSharingLongestSuffix) {\n            // in theory, it is possible that the candidate has a pointer which \"fromIndex\" is smaller than\n            // the \"toIndex\" we are pointing to below. This could result in that we point to a location which\n            // never gets written into the buffer, thus we can't point to it.\n            // But as we always start in order (with the first element in our array; see for loop above)\n            // we will always find the label first, which such a theoretical candidate is also pointing at\n            const pointingFromIndex = labels.length - 1 - longestSuffixLength; // -1 as the empty root label is always included\n            const pointingToIndex = candidateSharingLongestSuffix.writtenLabels.length - 1 - longestSuffixLength;\n            for (let i = 0; i < pointingFromIndex; i++) {\n                writtenName.writtenLabels[i] = offset;\n                offset += DNSLabelCoder.writeLabel(labels[i], this.buffer, offset);\n            }\n            const pointerDestination = candidateSharingLongestSuffix.writtenLabels[pointingToIndex];\n            (0, assert_1.default)(pointerDestination !== -1, \"Label which was pointed at wasn't yet written to the buffer!\");\n            (0, assert_1.default)(pointerDestination <= DNSLabelCoder.NOT_POINTER_MASK, \"Pointer exceeds to length of a maximum of 14 bits\");\n            (0, assert_1.default)(pointerDestination < offset, \"Pointer can only point to a prior location\");\n            const pointer = DNSLabelCoder.POINTER_MASK | pointerDestination;\n            this.buffer.writeUInt16BE(pointer, offset);\n            offset += 2;\n        }\n        else {\n            for (let i = 0; i < labels.length; i++) {\n                writtenName.writtenLabels[i] = offset;\n                offset += DNSLabelCoder.writeLabel(labels[i], this.buffer, offset);\n            }\n        }\n        this.writtenNames.push(writtenName);\n        return offset - oldOffset; // written bytes\n    }\n    decodeName(offset, resolvePointers = true) {\n        if (!this.buffer) {\n            assert_1.default.fail(\"Illegal state. Buffer not initialized!\");\n        }\n        const oldOffset = offset;\n        let name = \"\";\n        for (;;) {\n            const length = this.buffer.readUInt8(offset++);\n            if (length === 0) { // zero byte to terminate the name\n                name += \".\";\n                break; // root label marks end of name\n            }\n            const labelTypePattern = length & DNSLabelCoder.POINTER_MASK_ONE_BYTE;\n            if (labelTypePattern) {\n                if (labelTypePattern === DNSLabelCoder.POINTER_MASK_ONE_BYTE) {\n                    // we got a pointer here\n                    const pointer = this.buffer.readUInt16BE(offset - 1) & DNSLabelCoder.NOT_POINTER_MASK; // extract the offset\n                    offset++; // increment for the second byte of the pointer\n                    if (!resolvePointers) {\n                        name += name ? \".~\" : \"~\";\n                        break;\n                    }\n                    // if we would allow pointers to a later location, we MUST ensure that we don't end up in an endless loop\n                    (0, assert_1.default)(pointer < oldOffset, \"Pointer at \" + (offset - 2) + \" MUST point to a prior location!\");\n                    name += (name ? \".\" : \"\") + this.decodeName(pointer).data; // recursively decode the rest of the name\n                    break; // pointer marks end of name\n                }\n                else if (labelTypePattern === DNSLabelCoder.LOCAL_COMPRESSION_ONE_BYTE) {\n                    let localPointer = this.buffer.readUInt16BE(offset - 1) & DNSLabelCoder.NOT_POINTER_MASK;\n                    offset++; // increment for the second byte of the pointer;\n                    if (!resolvePointers) {\n                        name += name ? \".~\" : \"~\";\n                        break;\n                    }\n                    if (localPointer >= 0 && localPointer < 255) { // 255 is reserved\n                        (0, assert_1.default)(this.startOfRR !== undefined, \"Cannot decompress locally compressed name as record is not initialized!\");\n                        localPointer += this.startOfRR;\n                        (0, assert_1.default)(localPointer < oldOffset, \"LocalPointer <255 at \" + (offset - 2) + \" MUST point to a prior location!\");\n                        name += (name ? \".\" : \"\") + this.decodeName(localPointer).data; // recursively decode the rest of the name\n                    }\n                    else if (localPointer >= 256) {\n                        (0, assert_1.default)(this.startOfRData !== undefined && this.rDataLength !== undefined, \"Cannot decompress locally compressed name as record is not initialized!\");\n                        localPointer -= -256; // subtract the offset 256\n                        localPointer += this.startOfRData;\n                        (0, assert_1.default)(localPointer < oldOffset, \"LocationPoint >265 at \" + (offset + 2) + \" MUST point to a prior location!\");\n                        name += (name ? \".\" : \"\") + this.decodeName(localPointer).data; // recursively decode the rest of the name\n                    }\n                    else {\n                        assert_1.default.fail(\"Encountered unknown pointer range \" + localPointer);\n                    }\n                    break; // pointer marks end of name\n                }\n                else if (labelTypePattern === DNSLabelCoder.EXTENDED_LABEL_TYPE_ONE_BYTE) {\n                    const extendedLabelType = length & DNSLabelCoder.NOT_POINTER_MASK_ONE_BYTE;\n                    assert_1.default.fail(\"Received extended label type \" + extendedLabelType + \" at \" + (offset - 1));\n                }\n                else {\n                    assert_1.default.fail(\"Encountered unknown pointer type: \" + Buffer.from([labelTypePattern >> 6]).toString(\"hex\") + \" (with original byte \" +\n                        Buffer.from([length]).toString(\"hex\") + \")\");\n                }\n            }\n            const label = this.buffer.toString(\"utf-8\", offset, offset + length);\n            offset += length;\n            name += (name ? \".\" : \"\") + label;\n        }\n        return {\n            data: name,\n            readBytes: offset - oldOffset,\n        };\n    }\n    static getLabelLength(label) {\n        if (!label) { // empty label aka root label\n            return 1; // root label takes one zero byte\n        }\n        else {\n            const byteLength = Buffer.byteLength(label);\n            (0, assert_1.default)(byteLength <= 63, \"Label cannot be longer than 63 bytes (\" + label + \")\");\n            return 1 + byteLength; // length byte + label data\n        }\n    }\n    static writeLabel(label, buffer, offset) {\n        if (!label) {\n            buffer.writeUInt8(0, offset);\n            return 1;\n        }\n        else {\n            const length = buffer.write(label, offset + 1);\n            buffer.writeUInt8(length, offset);\n            return length + 1;\n        }\n    }\n    static computeLabelSuffixLength(a, b) {\n        (0, assert_1.default)(a.length !== 0 && b.length !== 0, \"Encountered empty name when comparing suffixes!\");\n        const lastAIndex = a.length - 1;\n        const lastBIndex = b.length - 1;\n        let equalLabels = 0;\n        let exitByBreak = false;\n        // we start with i=1 as the last character will always be the root label terminator \".\"\n        for (let i = 1; i <= lastAIndex && i <= lastBIndex; i++) {\n            // we are comparing both strings backwards\n            const aChar = a.charAt(lastAIndex - i);\n            const bChar = b.charAt(lastBIndex - i);\n            (0, assert_1.default)(!!aChar && !!bChar, \"Seemingly encountered out of bounds trying to calculate suffixes\");\n            if (aChar !== bChar) {\n                exitByBreak = true;\n                break; // encountered the first character to differ\n            }\n            else if (aChar === \".\") {\n                // we reached the label terminator, thus we count up the labels which are equal\n                equalLabels++;\n            }\n        }\n        if (!exitByBreak) {\n            equalLabels++; // accommodate for the top level label (fqdn doesn't start with a dot)\n        }\n        return equalLabels;\n    }\n}\nexports.DNSLabelCoder = DNSLabelCoder;\nDNSLabelCoder.DISABLE_COMPRESSION = false;\n// RFC 1035 4.1.4. Message compression:\n//  In order to reduce the size of messages, the domain system utilizes a\n//   compression scheme which eliminates the repetition of domain names in a\n//   message.  In this scheme, an entire domain name or a list of labels at\n//   the end of a domain name is replaced with a pointer to a PRIOR occurrence\n//   of the same name.\n//\n//  The compression scheme allows a domain name in a message to be\n//  represented as either:\n//    - a sequence of labels ending in a zero octet\n//    - a pointer\n//    - a sequence of labels ending with a pointer\n// RFC 6762 name compression for rdata should be used in: NS, CNAME, PTR, DNAME, SOA, MX, AFSDB, RT, KX, RP, PX, SRV, NSEC\nDNSLabelCoder.POINTER_MASK = 0xC000; // 2 bytes, starting with 11\nDNSLabelCoder.POINTER_MASK_ONE_BYTE = 0xC0; // same deal as above, just on a 1 byte level\nDNSLabelCoder.LOCAL_COMPRESSION_ONE_BYTE = 0x80; // \"10\" label type https://tools.ietf.org/html/draft-ietf-dnsind-local-compression-05#section-4\nDNSLabelCoder.EXTENDED_LABEL_TYPE_ONE_BYTE = 0x40; // \"01\" edns extended label type https://tools.ietf.org/html/rfc6891#section-4.2\nDNSLabelCoder.NOT_POINTER_MASK = 0x3FFF;\nDNSLabelCoder.NOT_POINTER_MASK_ONE_BYTE = 0x3F;\nclass NonCompressionLabelCoder extends DNSLabelCoder {\n    getNameLength(name) {\n        return this.getUncompressedNameLength(name);\n    }\n    encodeName(name, offset) {\n        return this.encodeUncompressedName(name, offset);\n    }\n}\nexports.NonCompressionLabelCoder = NonCompressionLabelCoder;\nNonCompressionLabelCoder.INSTANCE = new NonCompressionLabelCoder();\n//# sourceMappingURL=DNSLabelCoder.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DNSPacket = exports.PacketType = exports.QClass = exports.RClass = exports.QType = exports.RType = exports.RCode = exports.OpCode = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst fast_deep_equal_1 = tslib_1.__importDefault(require(\"fast-deep-equal\"));\nconst dns_string_utils_1 = require(\"./dns-string-utils\");\nconst DNSLabelCoder_1 = require(\"./DNSLabelCoder\");\nconst Question_1 = require(\"./Question\");\nrequire(\"./records\");\nconst ResourceRecord_1 = require(\"./ResourceRecord\");\nvar OpCode;\n(function (OpCode) {\n    OpCode[OpCode[\"QUERY\"] = 0] = \"QUERY\";\n    // incomplete list\n})(OpCode || (exports.OpCode = OpCode = {}));\nvar RCode;\n(function (RCode) {\n    RCode[RCode[\"NoError\"] = 0] = \"NoError\";\n    // incomplete list\n})(RCode || (exports.RCode = RCode = {}));\nvar RType;\n(function (RType) {\n    RType[RType[\"A\"] = 1] = \"A\";\n    RType[RType[\"CNAME\"] = 5] = \"CNAME\";\n    RType[RType[\"PTR\"] = 12] = \"PTR\";\n    RType[RType[\"TXT\"] = 16] = \"TXT\";\n    RType[RType[\"AAAA\"] = 28] = \"AAAA\";\n    RType[RType[\"SRV\"] = 33] = \"SRV\";\n    RType[RType[\"OPT\"] = 41] = \"OPT\";\n    RType[RType[\"NSEC\"] = 47] = \"NSEC\";\n    // incomplete list\n})(RType || (exports.RType = RType = {}));\nvar QType;\n(function (QType) {\n    QType[QType[\"A\"] = 1] = \"A\";\n    QType[QType[\"CNAME\"] = 5] = \"CNAME\";\n    QType[QType[\"PTR\"] = 12] = \"PTR\";\n    QType[QType[\"TXT\"] = 16] = \"TXT\";\n    QType[QType[\"AAAA\"] = 28] = \"AAAA\";\n    QType[QType[\"SRV\"] = 33] = \"SRV\";\n    // OPT = 41, // RFC 6891\n    QType[QType[\"NSEC\"] = 47] = \"NSEC\";\n    QType[QType[\"ANY\"] = 255] = \"ANY\";\n    // incomplete list\n})(QType || (exports.QType = QType = {}));\nvar RClass;\n(function (RClass) {\n    RClass[RClass[\"IN\"] = 1] = \"IN\";\n    // incomplete list\n})(RClass || (exports.RClass = RClass = {}));\nvar QClass;\n(function (QClass) {\n    QClass[QClass[\"IN\"] = 1] = \"IN\";\n    QClass[QClass[\"ANY\"] = 255] = \"ANY\";\n    // incomplete list\n})(QClass || (exports.QClass = QClass = {}));\nvar PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"QUERY\"] = 0] = \"QUERY\";\n    PacketType[PacketType[\"RESPONSE\"] = 1] = \"RESPONSE\";\n})(PacketType || (exports.PacketType = PacketType = {}));\nfunction isQuery(query) {\n    return \"answers\" in query;\n}\nfunction isProbeQuery(query) {\n    return \"authorities\" in query;\n}\nclass DNSPacket {\n    constructor(definition) {\n        this.questions = new Map();\n        this.answers = new Map();\n        this.authorities = new Map();\n        this.additionals = new Map();\n        this.estimatedEncodingLength = 0; // upper bound for the resulting encoding length, should only be called via the getter\n        this.lastCalculatedLength = 0;\n        this.lengthDirty = true;\n        this.id = definition.id || 0;\n        this.legacyUnicastEncoding = definition.legacyUnicast || false;\n        this.type = definition.type;\n        this.opcode = definition.opcode || 0 /* OpCode.QUERY */;\n        this.flags = definition.flags || {};\n        this.rcode = definition.rCode || 0 /* RCode.NoError */;\n        if (this.type === 1 /* PacketType.RESPONSE */) {\n            this.flags.authoritativeAnswer = true; // RFC 6763 18.4 AA is always set for responses in mdns\n        }\n        if (definition.questions) {\n            this.addQuestions(...definition.questions);\n        }\n        if (definition.answers) {\n            this.addAnswers(...definition.answers);\n        }\n        if (definition.authorities) {\n            this.addAuthorities(...definition.authorities);\n        }\n        if (definition.additionals) {\n            this.addAdditionals(...definition.additionals);\n        }\n    }\n    static createDNSQueryPacket(definition, udpPayloadSize = this.UDP_PAYLOAD_SIZE_IPV4) {\n        const packets = this.createDNSQueryPackets(definition, udpPayloadSize);\n        (0, assert_1.default)(packets.length === 1, \"Cannot user short method createDNSQueryPacket when query packets are more than one: is \" + packets.length);\n        return packets[0];\n    }\n    static createDNSQueryPackets(definition, udpPayloadSize = this.UDP_PAYLOAD_SIZE_IPV4) {\n        const packets = [];\n        // packet is like the \"main\" packet\n        const packet = new DNSPacket({\n            type: 0 /* PacketType.QUERY */,\n            questions: definition.questions,\n            additionals: isQuery(definition) ? definition.additionals : undefined, // OPT record is included in additionals section\n        });\n        packets.push(packet);\n        if (packet.getEstimatedEncodingLength() > udpPayloadSize) {\n            const compressedLength = packet.getEncodingLength(); // calculating the real length will update the estimated property as well\n            if (compressedLength > udpPayloadSize) {\n                // if we are still above the payload size we have a problem\n                assert_1.default.fail(\"Cannot send query where already the query section is exceeding the udpPayloadSize (\" + compressedLength + \">\" + udpPayloadSize + \")!\");\n            }\n        }\n        // related https://en.wikipedia.org/wiki/Knapsack_problem\n        if (isQuery(definition) && definition.answers) {\n            let currentPacket = packet;\n            let i = 0;\n            const answers = definition.answers.concat([]); // concat basically creates a copy of the array\n            // sort the answers ascending on their encoding length; otherwise we would need to check if a packets fits in a previously created packet\n            answers.sort((a, b) => {\n                return a.getEncodingLength(DNSLabelCoder_1.NonCompressionLabelCoder.INSTANCE) - b.getEncodingLength(DNSLabelCoder_1.NonCompressionLabelCoder.INSTANCE);\n            });\n            // in the loop below, we check if we need to truncate the list of known-answers in the query\n            while (i < answers.length) {\n                for (; i < answers.length; i++) {\n                    const answer = answers[i];\n                    const estimatedSize = answer.getEncodingLength(DNSLabelCoder_1.NonCompressionLabelCoder.INSTANCE);\n                    if (packet.getEstimatedEncodingLength() + estimatedSize <= udpPayloadSize) { // size check on estimated calculations\n                        currentPacket.addAnswers(answer);\n                    }\n                    else if (packet.getEncodingLength() + estimatedSize <= udpPayloadSize) { // check if the record may fit when message compression is used.\n                        // we may still have a false positive here, as they currently can't compute the REAL encoding for the answer\n                        // record, thus we rely on the estimated size\n                        currentPacket.addAnswers(answer);\n                    }\n                    else {\n                        if (currentPacket.questions.size === 0 && currentPacket.answers.size === 0) {\n                            // we encountered a record which is too big and can't fit in a udpPayloadSize sized packet\n                            // RFC 6762 17. In the case of a single Multicast DNS resource record that is too\n                            //    large to fit in a single MTU-sized multicast response packet, a\n                            //    Multicast DNS responder SHOULD send the resource record alone, in a\n                            //    single IP datagram, using multiple IP fragments.\n                            packet.addAnswers(answer);\n                        }\n                        break;\n                    }\n                }\n                if (i < answers.length) { // if there are more records left, we need to truncate the packet again\n                    currentPacket.flags.truncation = true; // first of all, mark the previous packet as truncated\n                    currentPacket = new DNSPacket({ type: 0 /* PacketType.QUERY */ });\n                    packets.push(currentPacket);\n                }\n            }\n        }\n        else if (isProbeQuery(definition) && definition.authorities) {\n            packet.addAuthorities(...definition.authorities);\n            const compressedLength = packet.getEncodingLength();\n            if (compressedLength > udpPayloadSize) {\n                assert_1.default.fail(`Probe query packet exceeds the mtu size (${compressedLength}>${udpPayloadSize}). Can't split probe queries at the moment!`);\n            }\n        } // otherwise, the packet consist of only questions\n        return packets;\n    }\n    static createDNSResponsePacketsFromRRSet(definition, udpPayloadSize = this.UDP_PAYLOAD_SIZE_IPV4) {\n        const packet = new DNSPacket({\n            id: definition.id,\n            legacyUnicast: definition.legacyUnicast,\n            type: 1 /* PacketType.RESPONSE */,\n            flags: { authoritativeAnswer: true }, // RFC 6763 18.4 AA is always set for responses in mdns\n            // possible questions sent back to an unicast querier (unicast dns contain only one question, so no size problem here)\n            questions: definition.questions,\n            answers: definition.answers,\n            additionals: definition.additionals,\n        });\n        if (packet.getEncodingLength() > udpPayloadSize) {\n            assert_1.default.fail(\"Couldn't construct a dns response packet from a rr set which fits in an udp payload sized packet!\");\n        }\n        return packet;\n    }\n    canBeCombinedWith(packet, udpPayloadSize = DNSPacket.UDP_PAYLOAD_SIZE_IPV4) {\n        // packet header must be identical\n        return this.id === packet.id && this.type === packet.type\n            && this.opcode === packet.opcode && (0, fast_deep_equal_1.default)(this.flags, packet.flags)\n            && this.rcode === packet.rcode\n            // and the data must fit into a udpPayloadSize sized packet\n            && this.getEncodingLength() + packet.getEncodingLength() <= udpPayloadSize;\n    }\n    combineWith(packet) {\n        this.setLegacyUnicastEncoding(this.legacyUnicastEncoding || packet.legacyUnicastEncoding);\n        this.addRecords(this.questions, packet.questions.values());\n        this.addRecords(this.answers, packet.answers.values(), this.additionals);\n        this.addRecords(this.authorities, packet.authorities.values());\n        this.addRecords(this.additionals, packet.additionals.values());\n    }\n    addQuestions(...questions) {\n        return this.addRecords(this.questions, questions);\n    }\n    addAnswers(...answers) {\n        return this.addRecords(this.answers, answers, this.additionals);\n    }\n    addAuthorities(...authorities) {\n        return this.addRecords(this.authorities, authorities);\n    }\n    addAdditionals(...additionals) {\n        return this.addRecords(this.additionals, additionals);\n    }\n    addRecords(recordList, added, removeFromWhenAdded) {\n        let addedAny = false;\n        for (const record of added) {\n            if (recordList.has(record.asString())) {\n                continue;\n            }\n            if (this.estimatedEncodingLength) {\n                this.estimatedEncodingLength += record.getEncodingLength(DNSLabelCoder_1.NonCompressionLabelCoder.INSTANCE);\n            }\n            recordList.set(record.asString(), record);\n            addedAny = true;\n            this.lengthDirty = true;\n            if (removeFromWhenAdded) {\n                removeFromWhenAdded.delete(record.asString());\n            }\n        }\n        return addedAny;\n    }\n    setLegacyUnicastEncoding(legacyUnicastEncoding) {\n        if (this.legacyUnicastEncoding !== legacyUnicastEncoding) {\n            this.lengthDirty = true; // above option changes length of SRV records\n        }\n        this.legacyUnicastEncoding = legacyUnicastEncoding;\n    }\n    legacyUnicastEncodingEnabled() {\n        return this.legacyUnicastEncoding;\n    }\n    getEstimatedEncodingLength() {\n        if (this.estimatedEncodingLength) {\n            return this.estimatedEncodingLength;\n        }\n        const labelCoder = DNSLabelCoder_1.NonCompressionLabelCoder.INSTANCE;\n        let length = DNSPacket.DNS_PACKET_HEADER_SIZE;\n        for (const record of this.questions.values()) {\n            length += record.getEncodingLength(labelCoder);\n        }\n        for (const record of this.answers.values()) {\n            length += record.getEncodingLength(labelCoder);\n        }\n        for (const record of this.authorities.values()) {\n            length += record.getEncodingLength(labelCoder);\n        }\n        for (const record of this.additionals.values()) {\n            length += record.getEncodingLength(labelCoder);\n        }\n        this.estimatedEncodingLength = length;\n        return length;\n    }\n    getEncodingLength(coder) {\n        if (!this.lengthDirty) {\n            return this.lastCalculatedLength;\n        }\n        const labelCoder = coder || new DNSLabelCoder_1.DNSLabelCoder(this.legacyUnicastEncoding);\n        let length = DNSPacket.DNS_PACKET_HEADER_SIZE;\n        for (const record of this.questions.values()) {\n            length += record.getEncodingLength(labelCoder);\n        }\n        for (const record of this.answers.values()) {\n            length += record.getEncodingLength(labelCoder);\n        }\n        for (const record of this.authorities.values()) {\n            length += record.getEncodingLength(labelCoder);\n        }\n        for (const record of this.additionals.values()) {\n            length += record.getEncodingLength(labelCoder);\n        }\n        this.lengthDirty = false; // reset dirty flag\n        this.lastCalculatedLength = length;\n        this.estimatedEncodingLength = length;\n        return length;\n    }\n    encode() {\n        const labelCoder = new DNSLabelCoder_1.DNSLabelCoder(this.legacyUnicastEncoding);\n        const length = this.getEncodingLength(labelCoder);\n        const buffer = Buffer.allocUnsafe(length);\n        labelCoder.initBuf(buffer);\n        let offset = 0;\n        buffer.writeUInt16BE(this.id, offset);\n        offset += 2;\n        let flags = (this.type << 15) | (this.opcode << 11) | this.rcode;\n        if (this.flags.authoritativeAnswer) {\n            flags |= DNSPacket.AUTHORITATIVE_ANSWER_MASK;\n        }\n        if (this.flags.truncation) {\n            flags |= DNSPacket.TRUNCATION_MASK;\n        }\n        if (this.flags.recursionDesired) {\n            flags |= DNSPacket.RECURSION_DESIRED_MASK;\n        }\n        if (this.flags.recursionAvailable) {\n            flags |= DNSPacket.RECURSION_AVAILABLE_MASK;\n        }\n        if (this.flags.zero) {\n            flags |= DNSPacket.ZERO_HEADER_MASK;\n        }\n        if (this.flags.authenticData) {\n            flags |= DNSPacket.AUTHENTIC_DATA_MASK;\n        }\n        if (this.flags.checkingDisabled) {\n            flags |= DNSPacket.CHECKING_DISABLED_MASK;\n        }\n        buffer.writeUInt16BE(flags, offset);\n        offset += 2;\n        buffer.writeUInt16BE(this.questions.size, offset);\n        offset += 2;\n        buffer.writeUInt16BE(this.answers.size, offset);\n        offset += 2;\n        buffer.writeUInt16BE(this.authorities.size, offset);\n        offset += 2;\n        buffer.writeUInt16BE(this.additionals.size, offset);\n        offset += 2;\n        for (const question of this.questions.values()) {\n            const length = question.encode(labelCoder, buffer, offset);\n            offset += length;\n        }\n        for (const record of this.answers.values()) {\n            const length = record.encode(labelCoder, buffer, offset);\n            offset += length;\n        }\n        for (const record of this.authorities.values()) {\n            const length = record.encode(labelCoder, buffer, offset);\n            offset += length;\n        }\n        for (const record of this.additionals.values()) {\n            const length = record.encode(labelCoder, buffer, offset);\n            offset += length;\n        }\n        (0, assert_1.default)(offset === buffer.length, \"Bytes written didn't match the buffer size!\");\n        return buffer;\n    }\n    static decode(context, buffer, offset = 0) {\n        const labelCoder = new DNSLabelCoder_1.DNSLabelCoder();\n        labelCoder.initBuf(buffer);\n        const id = buffer.readUInt16BE(offset);\n        offset += 2;\n        const flags = buffer.readUInt16BE(offset);\n        offset += 2;\n        const questionLength = buffer.readUInt16BE(offset);\n        offset += 2;\n        const answerLength = buffer.readUInt16BE(offset);\n        offset += 2;\n        const authoritiesLength = buffer.readUInt16BE(offset);\n        offset += 2;\n        const additionalsLength = buffer.readUInt16BE(offset);\n        offset += 2;\n        const questions = [];\n        const answers = [];\n        const authorities = [];\n        const additionals = [];\n        offset += DNSPacket.decodeList(context, labelCoder, buffer, offset, questionLength, Question_1.Question.decode.bind(Question_1.Question), questions);\n        offset += DNSPacket.decodeList(context, labelCoder, buffer, offset, answerLength, ResourceRecord_1.ResourceRecord.decode.bind(ResourceRecord_1.ResourceRecord), answers);\n        offset += DNSPacket.decodeList(context, labelCoder, buffer, offset, authoritiesLength, ResourceRecord_1.ResourceRecord.decode.bind(ResourceRecord_1.ResourceRecord), authorities);\n        offset += DNSPacket.decodeList(context, labelCoder, buffer, offset, additionalsLength, ResourceRecord_1.ResourceRecord.decode.bind(ResourceRecord_1.ResourceRecord), additionals);\n        (0, assert_1.default)(offset === buffer.length, \"Didn't read the full buffer (offset=\" + offset + \", length=\" + buffer.length + \")\");\n        const qr = (flags >> 15);\n        const opcode = ((flags >> 11) & 0xf);\n        const rCode = (flags & 0xf);\n        const packetFlags = {};\n        if (flags & this.AUTHORITATIVE_ANSWER_MASK) {\n            packetFlags.authoritativeAnswer = true;\n        }\n        if (flags & this.TRUNCATION_MASK) {\n            packetFlags.truncation = true;\n        }\n        if (flags & this.RECURSION_DESIRED_MASK) {\n            packetFlags.recursionDesired = true;\n        }\n        if (flags & this.RECURSION_AVAILABLE_MASK) {\n            packetFlags.recursionAvailable = true;\n        }\n        if (flags & this.ZERO_HEADER_MASK) {\n            packetFlags.zero = true;\n        }\n        if (flags & this.AUTHENTIC_DATA_MASK) {\n            packetFlags.authenticData = true;\n        }\n        if (flags & this.CHECKING_DISABLED_MASK) {\n            packetFlags.checkingDisabled = true;\n        }\n        return new DNSPacket({\n            id: id,\n            type: qr,\n            opcode: opcode,\n            rCode: rCode,\n            flags: packetFlags,\n            questions: questions,\n            answers: answers,\n            authorities: authorities,\n            additionals: additionals,\n        });\n    }\n    static decodeList(context, coder, buffer, offset, length, decoder, destination) {\n        const oldOffset = offset;\n        for (let i = 0; i < length; i++) {\n            const decoded = decoder(context, coder, buffer, offset);\n            offset += decoded.readBytes;\n            if (decoded.data) { // if the rdata is not supported by us, or we encountered a parsing error, we ignore the record\n                destination.push(decoded.data);\n            }\n        }\n        return offset - oldOffset;\n    }\n    asLoggingString(udpPayloadSize) {\n        let answerString = \"\";\n        let additionalsString = \"\";\n        for (const record of this.answers.values()) {\n            if (answerString) {\n                answerString += \",\";\n            }\n            answerString += (0, dns_string_utils_1.dnsTypeToString)(record.type);\n        }\n        for (const record of this.additionals.values()) {\n            if (additionalsString) {\n                additionalsString += \",\";\n            }\n            additionalsString += (0, dns_string_utils_1.dnsTypeToString)(record.type);\n        }\n        const optionsStrings = [];\n        if (this.legacyUnicastEncodingEnabled()) {\n            optionsStrings.push(\"U\");\n        }\n        if (udpPayloadSize) {\n            optionsStrings.push(\"UPS: \" + udpPayloadSize);\n        }\n        const optionsString = optionsStrings.length !== 0 ? ` (${optionsStrings})` : \"\";\n        return `[${answerString}] answers and [${additionalsString}] additionals with size ${this.getEncodingLength()}B${optionsString}`;\n    }\n}\nexports.DNSPacket = DNSPacket;\nDNSPacket.UDP_PAYLOAD_SIZE_IPV4 = (process.env.CIAO_UPS ? parseInt(process.env.CIAO_UPS) : 1440);\n// noinspection JSUnusedGlobalSymbols\nDNSPacket.UDP_PAYLOAD_SIZE_IPV6 = (process.env.CIAO_UPS ? parseInt(process.env.CIAO_UPS) : 1440);\nDNSPacket.AUTHORITATIVE_ANSWER_MASK = 0x400;\nDNSPacket.TRUNCATION_MASK = 0x200;\nDNSPacket.RECURSION_DESIRED_MASK = 0x100;\nDNSPacket.RECURSION_AVAILABLE_MASK = 0x80;\nDNSPacket.ZERO_HEADER_MASK = 0x40;\nDNSPacket.AUTHENTIC_DATA_MASK = 0x20;\nDNSPacket.CHECKING_DISABLED_MASK = 0x10;\n// 2 bytes ID, 2 bytes flags, 2 bytes question count, 2 bytes answer count, 2 bytes authorities count; 2 bytes additionals count\nDNSPacket.DNS_PACKET_HEADER_SIZE = 12;\n//# sourceMappingURL=DNSPacket.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Question = void 0;\nconst dns_equal_1 = require(\"../util/dns-equal\");\nclass Question {\n    constructor(name, type, unicastResponseFlag = false, clazz = 1 /* QClass.IN */) {\n        this.unicastResponseFlag = false;\n        if (!name.endsWith(\".\")) {\n            name += \".\";\n        }\n        this.name = name;\n        this.type = type;\n        this.class = clazz;\n        this.unicastResponseFlag = unicastResponseFlag;\n    }\n    getLowerCasedName() {\n        return this.lowerCasedName || (this.lowerCasedName = (0, dns_equal_1.dnsLowerCase)(this.name));\n    }\n    getEncodingLength(coder) {\n        return coder.getNameLength(this.name) + 4; // 2 bytes type; 2 bytes class\n    }\n    encode(coder, buffer, offset) {\n        const oldOffset = offset;\n        const nameLength = coder.encodeName(this.name, offset);\n        offset += nameLength;\n        buffer.writeUInt16BE(this.type, offset);\n        offset += 2;\n        let qClass = this.class;\n        if (this.unicastResponseFlag) {\n            qClass |= Question.QU_MASK;\n        }\n        buffer.writeUInt16BE(qClass, offset);\n        offset += 2;\n        return offset - oldOffset; // written bytes\n    }\n    clone() {\n        return new Question(this.name, this.type, this.unicastResponseFlag, this.class);\n    }\n    asString() {\n        return `Q ${this.name} ${this.type} ${this.class}`;\n    }\n    static decode(context, coder, buffer, offset) {\n        const oldOffset = offset;\n        const decodedName = coder.decodeName(offset);\n        offset += decodedName.readBytes;\n        const type = buffer.readUInt16BE(offset);\n        offset += 2;\n        const qClass = buffer.readUInt16BE(offset);\n        offset += 2;\n        const clazz = (qClass & this.NOT_QU_MASK);\n        const quFlag = !!(qClass & this.QU_MASK);\n        const question = new Question(decodedName.data, type, quFlag, clazz);\n        return {\n            data: question,\n            readBytes: offset - oldOffset,\n        };\n    }\n}\nexports.Question = Question;\nQuestion.QU_MASK = 0x8000; // 2 bytes, first bit set\nQuestion.NOT_QU_MASK = 0x7FFF;\n//# sourceMappingURL=Question.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ResourceRecord = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst debug_1 = tslib_1.__importDefault(require(\"debug\"));\nconst dns_equal_1 = require(\"../util/dns-equal\");\nconst dns_string_utils_1 = require(\"./dns-string-utils\");\nconst DNSLabelCoder_1 = require(\"./DNSLabelCoder\");\nconst debug = (0, debug_1.default)(\"ciao:decoder\");\nclass ResourceRecord {\n    constructor(name, type, ttl = ResourceRecord.RR_DEFAULT_TTL, flushFlag = false, clazz = 1 /* RClass.IN */) {\n        this.flushFlag = false;\n        if (typeof name === \"string\") {\n            if (!name.endsWith(\".\")) {\n                name = name + \".\";\n            }\n            this.name = name;\n            this.type = type;\n            this.class = clazz;\n            this.ttl = ttl;\n            this.flushFlag = flushFlag;\n        }\n        else {\n            this.name = name.name;\n            this.type = name.type;\n            this.class = name.class;\n            this.ttl = name.ttl;\n            this.flushFlag = name.flushFlag;\n        }\n    }\n    getLowerCasedName() {\n        return this.lowerCasedName || (this.lowerCasedName = (0, dns_equal_1.dnsLowerCase)(this.name));\n    }\n    getEncodingLength(coder) {\n        return coder.getNameLength(this.name)\n            + 10 // 2 bytes TYPE; 2 bytes class, 4 bytes TTL, 2 bytes RDLength\n            + this.getRDataEncodingLength(coder);\n    }\n    encode(coder, buffer, offset) {\n        const oldOffset = offset;\n        const nameLength = coder.encodeName(this.name, offset);\n        offset += nameLength;\n        buffer.writeUInt16BE(this.type, offset);\n        offset += 2;\n        let rClass = this.class;\n        if (this.flushFlag) {\n            // for pseudo records like OPT, TSIG, TKEY, SIG0 the top bit should not be interpreted as the flush flag\n            // though we do not support those (OPT seems to be the only used, though no idea for what [by Apple for mdns])\n            rClass |= ResourceRecord.FLUSH_MASK;\n        }\n        buffer.writeUInt16BE(rClass, offset);\n        offset += 2;\n        buffer.writeUInt32BE(this.ttl, offset);\n        offset += 4;\n        const dataLength = this.encodeRData(coder, buffer, offset + 2);\n        buffer.writeUInt16BE(dataLength, offset);\n        offset += 2 + dataLength;\n        return offset - oldOffset; // written bytes\n    }\n    getRawData() {\n        const coder = DNSLabelCoder_1.NonCompressionLabelCoder.INSTANCE; // this forces uncompressed names\n        const length = this.getRDataEncodingLength(coder);\n        const buffer = Buffer.allocUnsafe(length);\n        coder.initBuf(buffer);\n        const writtenBytes = this.encodeRData(coder, buffer, 0);\n        (0, assert_1.default)(writtenBytes === buffer.length, \"Didn't completely write to the buffer! (\" + writtenBytes + \"!=\" + buffer.length + \")\");\n        coder.initBuf(); // reset buffer to undefined\n        return buffer;\n    }\n    static clone(records) {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-expect-error\n        return records.map(record => record.clone());\n    }\n    getRecordRepresentation() {\n        return {\n            name: this.name,\n            type: this.type,\n            class: this.class,\n            ttl: this.ttl,\n            flushFlag: this.flushFlag,\n        };\n    }\n    /**\n     * Returns if this and the supplied record are the same (ignoring ttl and flush flag)\n     * @param record\n     */\n    aboutEqual(record) {\n        return this.type === record.type && this.name === record.name && this.class === record.class\n            && this.dataEquals(record);\n    }\n    representsSameData(record) {\n        return this.type === record.type && this.name === record.name && this.class === record.class;\n    }\n    asString() {\n        // same as aboutEqual, ttl is not included\n        return `RR ${this.name} ${this.type} ${this.class} ${this.dataAsString()}`;\n    }\n    static decode(context, coder, buffer, offset) {\n        const oldOffset = offset;\n        const decodedHeader = this.decodeRecordHeader(coder, buffer, offset);\n        offset += decodedHeader.readBytes;\n        const header = decodedHeader.data;\n        const rrDecoder = this.typeToRecordDecoder.get(header.type);\n        if (!rrDecoder) {\n            return { readBytes: (offset + header.rDataLength) - oldOffset };\n        }\n        coder.initRRLocation(oldOffset, offset, header.rDataLength); // defines record offset and rdata offset for local compression\n        const rdata = buffer.subarray(0, offset + header.rDataLength);\n        let decodedRecord;\n        try {\n            // we slice the buffer (below), so out of bounds error are instantly detected\n            decodedRecord = rrDecoder(coder, header, rdata, offset);\n        }\n        catch (error) {\n            debug(`Received malformed rdata section for ${(0, dns_string_utils_1.dnsTypeToString)(header.type)} ${header.name} ${header.ttl} \\\nfrom ${context.address}:${context.port} with data '${rdata.subarray(offset).toString(\"hex\")}': ${error.stack}`);\n            return { readBytes: (offset + header.rDataLength) - oldOffset };\n        }\n        offset += decodedRecord.readBytes;\n        coder.clearRRLocation();\n        return {\n            data: decodedRecord.data,\n            readBytes: offset - oldOffset,\n        };\n    }\n    static decodeRecordHeader(coder, buffer, offset) {\n        const oldOffset = offset;\n        const decodedName = coder.decodeName(offset);\n        offset += decodedName.readBytes;\n        const type = buffer.readUInt16BE(offset);\n        offset += 2;\n        const rClass = buffer.readUInt16BE(offset);\n        offset += 2;\n        let clazz;\n        let flushFlag = false;\n        if (type !== 41 /* RType.OPT */) {\n            clazz = (rClass & this.NOT_FLUSH_MASK);\n            flushFlag = !!(rClass & this.FLUSH_MASK);\n        }\n        else {\n            // OPT class field encodes udpPayloadSize field\n            clazz = rClass;\n        }\n        const ttl = buffer.readUInt32BE(offset);\n        offset += 4;\n        const rDataLength = buffer.readUInt16BE(offset);\n        offset += 2;\n        const rHeader = {\n            name: decodedName.data,\n            type: type,\n            class: clazz,\n            ttl: ttl,\n            flushFlag: flushFlag,\n            rDataLength: rDataLength,\n        };\n        return {\n            data: rHeader,\n            readBytes: offset - oldOffset,\n        };\n    }\n}\nexports.ResourceRecord = ResourceRecord;\nResourceRecord.typeToRecordDecoder = new Map();\nResourceRecord.FLUSH_MASK = 0x8000; // 2 bytes, first bit set\nResourceRecord.NOT_FLUSH_MASK = 0x7FFF;\nResourceRecord.RR_DEFAULT_TTL_SHORT = 120; // 120 seconds\nResourceRecord.RR_DEFAULT_TTL = 4500; // 75 minutes\n//# sourceMappingURL=ResourceRecord.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dnsTypeToString = void 0;\nfunction dnsTypeToString(type) {\n    switch (type) {\n        case 1:\n            return \"A\";\n        case 5:\n            return \"CNAME\";\n        case 12:\n            return \"PTR\";\n        case 16:\n            return \"TXT\";\n        case 28:\n            return \"AAAA\";\n        case 33:\n            return \"SRV\";\n        case 41:\n            return \"OPT\";\n        case 47:\n            return \"NSEC\";\n        case 255:\n            return \"ANY\";\n    }\n    return \"UNSUPPORTED_\" + type;\n}\nexports.dnsTypeToString = dnsTypeToString;\n//# sourceMappingURL=dns-string-utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AAAARecord = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst net_1 = tslib_1.__importDefault(require(\"net\"));\nconst domain_formatter_1 = require(\"../../util/domain-formatter\");\nconst ResourceRecord_1 = require(\"../ResourceRecord\");\nclass AAAARecord extends ResourceRecord_1.ResourceRecord {\n    constructor(name, ipAddress, flushFlag, ttl) {\n        if (typeof name === \"string\") {\n            super(name, 28 /* RType.AAAA */, ttl || AAAARecord.RR_DEFAULT_TTL_SHORT, flushFlag);\n        }\n        else {\n            (0, assert_1.default)(name.type === 28 /* RType.AAAA */);\n            super(name);\n        }\n        (0, assert_1.default)(net_1.default.isIPv6(ipAddress), \"IP address is not in v6 format!\");\n        this.ipAddress = ipAddress;\n    }\n    getRDataEncodingLength() {\n        return 16; // 16 byte ipv6 address\n    }\n    encodeRData(coder, buffer, offset) {\n        const oldOffset = offset;\n        const address = (0, domain_formatter_1.enlargeIPv6)(this.ipAddress);\n        const bytes = address.split(\":\");\n        (0, assert_1.default)(bytes.length === 8, \"invalid ip address\");\n        for (const byte of bytes) {\n            const number = parseInt(byte, 16);\n            buffer.writeUInt16BE(number, offset);\n            offset += 2;\n        }\n        return offset - oldOffset; // written bytes\n    }\n    static decodeData(coder, header, buffer, offset) {\n        const oldOffset = offset;\n        const ipBytes = new Array(8);\n        for (let i = 0; i < 8; i++) {\n            const number = buffer.readUInt16BE(offset);\n            offset += 2;\n            ipBytes[i] = number.toString(16);\n        }\n        const ipAddress = (0, domain_formatter_1.shortenIPv6)(ipBytes.join(\":\"));\n        return {\n            data: new AAAARecord(header, ipAddress),\n            readBytes: offset - oldOffset,\n        };\n    }\n    clone() {\n        return new AAAARecord(this.getRecordRepresentation(), this.ipAddress);\n    }\n    dataAsString() {\n        return this.ipAddress;\n    }\n    dataEquals(record) {\n        return this.ipAddress === record.ipAddress;\n    }\n}\nexports.AAAARecord = AAAARecord;\nAAAARecord.DEFAULT_TTL = 120;\n//# sourceMappingURL=AAAARecord.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ARecord = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst net_1 = tslib_1.__importDefault(require(\"net\"));\nconst ResourceRecord_1 = require(\"../ResourceRecord\");\nclass ARecord extends ResourceRecord_1.ResourceRecord {\n    constructor(name, ipAddress, flushFlag, ttl) {\n        if (typeof name === \"string\") {\n            super(name, 1 /* RType.A */, ttl || ARecord.RR_DEFAULT_TTL_SHORT, flushFlag);\n        }\n        else {\n            (0, assert_1.default)(name.type === 1 /* RType.A */);\n            super(name);\n        }\n        (0, assert_1.default)(net_1.default.isIPv4(ipAddress), \"IP address is not in v4 format!\");\n        this.ipAddress = ipAddress;\n    }\n    getRDataEncodingLength() {\n        return 4; // 4 byte ipv4 address\n    }\n    encodeRData(coder, buffer, offset) {\n        const oldOffset = offset;\n        const bytes = this.ipAddress.split(\".\");\n        (0, assert_1.default)(bytes.length === 4, \"invalid ip address\");\n        for (const byte of bytes) {\n            const number = parseInt(byte, 10);\n            buffer.writeUInt8(number, offset++);\n        }\n        return offset - oldOffset; // written bytes\n    }\n    static decodeData(coder, header, buffer, offset) {\n        const oldOffset = offset;\n        const ipBytes = new Array(4);\n        for (let i = 0; i < 4; i++) {\n            const byte = buffer.readUInt8(offset++);\n            ipBytes[i] = byte.toString(10);\n        }\n        const ipAddress = ipBytes.join(\".\");\n        return {\n            data: new ARecord(header, ipAddress),\n            readBytes: offset - oldOffset,\n        };\n    }\n    clone() {\n        return new ARecord(this.getRecordRepresentation(), this.ipAddress);\n    }\n    dataAsString() {\n        return this.ipAddress;\n    }\n    dataEquals(record) {\n        return this.ipAddress === record.ipAddress;\n    }\n}\nexports.ARecord = ARecord;\nARecord.DEFAULT_TTL = 120;\n//# sourceMappingURL=ARecord.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CNAMERecord = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst dns_equal_1 = require(\"../../util/dns-equal\");\nconst ResourceRecord_1 = require(\"../ResourceRecord\");\nclass CNAMERecord extends ResourceRecord_1.ResourceRecord {\n    constructor(name, cname, flushFlag, ttl) {\n        if (typeof name === \"string\") {\n            super(name, 5 /* RType.CNAME */, ttl, flushFlag);\n        }\n        else {\n            (0, assert_1.default)(name.type === 5 /* RType.CNAME */);\n            super(name);\n        }\n        if (!cname.endsWith(\".\")) {\n            cname += \".\";\n        }\n        this.cname = cname;\n    }\n    getLowerCasedCName() {\n        return this.lowerCasedCName || (this.lowerCasedCName = (0, dns_equal_1.dnsLowerCase)(this.cname));\n    }\n    getRDataEncodingLength(coder) {\n        return coder.getNameLength(this.cname);\n    }\n    encodeRData(coder, buffer, offset) {\n        const oldOffset = offset;\n        const cnameLength = coder.encodeName(this.cname, offset);\n        offset += cnameLength;\n        return offset - oldOffset; // written bytes\n    }\n    static decodeData(coder, header, buffer, offset) {\n        const oldOffset = offset;\n        const decodedName = coder.decodeName(offset);\n        offset += decodedName.readBytes;\n        return {\n            data: new CNAMERecord(header, decodedName.data),\n            readBytes: offset - oldOffset,\n        };\n    }\n    clone() {\n        return new CNAMERecord(this.getRecordRepresentation(), this.cname);\n    }\n    dataAsString() {\n        return this.cname;\n    }\n    dataEquals(record) {\n        return this.getLowerCasedCName() === record.getLowerCasedCName();\n    }\n}\nexports.CNAMERecord = CNAMERecord;\nCNAMERecord.DEFAULT_TTL = ResourceRecord_1.ResourceRecord.RR_DEFAULT_TTL;\n//# sourceMappingURL=CNAMERecord.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NSECRecord = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst fast_deep_equal_1 = tslib_1.__importDefault(require(\"fast-deep-equal\"));\nconst dns_equal_1 = require(\"../../util/dns-equal\");\nconst ResourceRecord_1 = require(\"../ResourceRecord\");\nclass NSECRecord extends ResourceRecord_1.ResourceRecord {\n    constructor(name, nextDomainName, rrtypes, ttl, flushFlag) {\n        if (typeof name === \"string\") {\n            super(name, 47 /* RType.NSEC */, ttl || NSECRecord.RR_DEFAULT_TTL_SHORT, flushFlag);\n        }\n        else {\n            (0, assert_1.default)(name.type === 47 /* RType.NSEC */);\n            super(name);\n        }\n        if (!nextDomainName.endsWith(\".\")) {\n            nextDomainName += \".\";\n        }\n        this.nextDomainName = nextDomainName;\n        this.rrTypeWindows = NSECRecord.rrTypesToWindowMap(rrtypes);\n    }\n    getLowerCasedNextDomainName() {\n        return this.lowerCasedNextDomainName || (this.lowerCasedNextDomainName = (0, dns_equal_1.dnsLowerCase)(this.nextDomainName));\n    }\n    getRRTypesBitMapEncodingLength() {\n        let rrTypesBitMapLength = 0;\n        for (const window of this.rrTypeWindows) {\n            (0, assert_1.default)(window.rrtypes.length > 0, \"types array for windowId \" + window.windowId + \" cannot be empty!\");\n            rrTypesBitMapLength += 2 // 1 byte for windowId; 1 byte for bitmap length\n                + window.bitMapSize;\n        }\n        return rrTypesBitMapLength;\n    }\n    getRDataEncodingLength(coder) {\n        // RFC 4034 4.1.1. name compression MUST NOT be used for the nextDomainName, though RFC 6762 18.14 specifies it should\n        return (coder.legacyUnicastEncoding\n            ? coder.getUncompressedNameLength(this.nextDomainName)\n            : coder.getUncompressedNameLength(this.nextDomainName)) // we skip compression for NSEC records for now, as Ubiquiti mdns forward can't handle that\n            + this.getRRTypesBitMapEncodingLength();\n    }\n    encodeRData(coder, buffer, offset) {\n        const oldOffset = offset;\n        const length = coder.legacyUnicastEncoding\n            ? coder.encodeUncompressedName(this.nextDomainName, offset)\n            : coder.encodeUncompressedName(this.nextDomainName, offset); // we skip compression for NSEC records for now, as Ubiquiti mdns forward can't handle that\n        offset += length;\n        // RFC 4034 4.1.2. type bit maps field has the following format ( Window Block # | Bitmap Length | Bitmap )+ (with | concatenation)\n        // e.g. 0x00 0x01 0x40 => defines the window 0; bitmap length 1; and the bitmap 10000000, meaning the first bit is\n        // set for the 0th window => rrTypes = [A]. The bitmap length depends on the rtype with the highest value for the\n        // given value (max 32 bytes per bitmap)\n        for (const window of this.rrTypeWindows) {\n            buffer.writeUInt8(window.windowId, offset++);\n            buffer.writeUInt8(window.bitMapSize, offset++);\n            const bitmap = Buffer.alloc(window.bitMapSize);\n            for (const type of window.rrtypes) {\n                const byteNum = (type & 0xFF) >> 3; // basically floored division by 8\n                let mask = bitmap.readUInt8(byteNum);\n                mask |= 1 << (7 - (type & 0x7)); // OR with 1 shifted according to the lowest 3 bits\n                bitmap.writeUInt8(mask, byteNum);\n            }\n            bitmap.copy(buffer, offset);\n            offset += bitmap.length;\n        }\n        return offset - oldOffset;\n    }\n    static decodeData(coder, header, buffer, offset) {\n        const oldOffset = offset;\n        /**\n         * Quick note to the line below. We base \"false\" as the second argument to decodeName, telling\n         * it to not resolve pointers.\n         * We discovered that especially UniFi routers with a VLAN setup and mdns forwarding enabled,\n         * fail to properly encode pointers inside the nextDomainName field.\n         * Those pointers simply point to random points in the record data, resulting in decoding to fail.\n         * As the field doesn't have any meaning, and we simply don't use it, we just skip decoding for now.\n         */\n        const decodedNextDomainName = coder.decodeName(offset, false);\n        offset += decodedNextDomainName.readBytes;\n        const rrTypes = [];\n        while (offset < buffer.length) {\n            const windowId = buffer.readUInt8(offset++);\n            const bitMapLength = buffer.readUInt8(offset++);\n            const upperRType = windowId << 8;\n            for (let block = 0; block < bitMapLength; block++) {\n                const byte = buffer.readUInt8(offset++);\n                for (let bit = 0; bit < 8; bit++) { // iterate over every bit\n                    if (byte & (1 << (7 - bit))) { // check if bit is set\n                        const rType = upperRType | (block << 3) | bit; // OR upperWindowNum | basically block * 8 | bit number\n                        rrTypes.push(rType);\n                    }\n                }\n            }\n        }\n        return {\n            data: new NSECRecord(header, decodedNextDomainName.data, rrTypes),\n            readBytes: offset - oldOffset,\n        };\n    }\n    clone() {\n        return new NSECRecord(this.getRecordRepresentation(), this.nextDomainName, NSECRecord.windowsToRRTypes(this.rrTypeWindows));\n    }\n    dataAsString() {\n        return `${this.nextDomainName} [${NSECRecord.windowsToRRTypes(this.rrTypeWindows).map(rtype => \"\" + rtype).join(\",\")}]`;\n    }\n    dataEquals(record) {\n        return this.getLowerCasedNextDomainName() === record.getLowerCasedNextDomainName() && (0, fast_deep_equal_1.default)(this.rrTypeWindows, record.rrTypeWindows);\n    }\n    static rrTypesToWindowMap(rrtypes) {\n        const rrTypeWindows = [];\n        for (const rrtype of rrtypes) {\n            const windowId = rrtype >> 8;\n            let window = undefined;\n            for (const window0 of rrTypeWindows) {\n                if (window0.windowId === windowId) {\n                    window = window0;\n                    break;\n                }\n            }\n            if (!window) {\n                window = {\n                    windowId: windowId,\n                    bitMapSize: Math.ceil((rrtype & 0xFF) / 8),\n                    rrtypes: [rrtype],\n                };\n                rrTypeWindows.push(window);\n            }\n            else {\n                window.rrtypes.push(rrtype);\n                const bitMapSize = Math.ceil((rrtype & 0xFF) / 8);\n                if (bitMapSize > window.bitMapSize) {\n                    window.bitMapSize = bitMapSize;\n                }\n            }\n        }\n        // sort by windowId\n        rrTypeWindows.sort((a, b) => a.windowId - b.windowId);\n        rrTypeWindows.forEach(window => window.rrtypes.sort((a, b) => a - b));\n        return rrTypeWindows;\n    }\n    static windowsToRRTypes(windows) {\n        const rrtypes = [];\n        for (const window of windows) {\n            rrtypes.push(...window.rrtypes);\n        }\n        return rrtypes;\n    }\n}\nexports.NSECRecord = NSECRecord;\n//# sourceMappingURL=NSECRecord.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OPTRecord = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst fast_deep_equal_1 = tslib_1.__importDefault(require(\"fast-deep-equal\"));\nconst ResourceRecord_1 = require(\"../ResourceRecord\");\nclass OPTRecord extends ResourceRecord_1.ResourceRecord {\n    constructor(udpPayloadSize, options, extendedRCode, flags, ednsVersion, ttl) {\n        if (typeof udpPayloadSize === \"number\") {\n            super(\".\", 41 /* RType.OPT */, ttl, false, udpPayloadSize);\n            this.udpPayloadSize = udpPayloadSize;\n        }\n        else {\n            (0, assert_1.default)(udpPayloadSize.type === 41 /* RType.OPT */);\n            super(udpPayloadSize);\n            this.udpPayloadSize = udpPayloadSize.class;\n        }\n        this.extendedRCode = extendedRCode || 0;\n        this.ednsVersion = ednsVersion || OPTRecord.EDNS_VERSION;\n        this.flags = {\n            dnsSecOK: (flags === null || flags === void 0 ? void 0 : flags.dnsSecOK) || false,\n            zero: (flags === null || flags === void 0 ? void 0 : flags.zero) || 0,\n            ...flags,\n        };\n        this.options = options || [];\n    }\n    getRDataEncodingLength() {\n        let length = 0;\n        for (const option of this.options) {\n            length += 2 + 2 + option.data.length; // 2 byte code; 2 byte length prefix; binary data\n        }\n        return length;\n    }\n    encodeRData(coder, buffer, offset) {\n        const oldOffset = offset;\n        const classOffset = offset - 8;\n        const ttlOffset = offset - 6;\n        // just to be sure\n        buffer.writeUInt16BE(this.udpPayloadSize, classOffset);\n        buffer.writeUInt8(this.extendedRCode, ttlOffset);\n        buffer.writeUInt8(this.ednsVersion, ttlOffset + 1);\n        let flags = this.flags.zero || 0;\n        if (this.flags.dnsSecOK) {\n            flags |= OPTRecord.DNS_SEC_OK_MASK;\n        }\n        buffer.writeUInt16BE(flags, ttlOffset + 2);\n        for (const option of this.options) {\n            buffer.writeUInt16BE(option.code, offset);\n            offset += 2;\n            buffer.writeUInt16BE(option.data.length, offset);\n            offset += 2;\n            option.data.copy(buffer, offset);\n            offset += option.data.length;\n        }\n        return offset - oldOffset; // written bytes\n    }\n    static decodeData(coder, header, buffer, offset) {\n        const oldOffset = offset;\n        const classOffset = offset - 8;\n        const ttlOffset = offset - 6;\n        const udpPayloadSize = buffer.readUInt16BE(classOffset);\n        const extendedRCode = buffer.readUInt8(ttlOffset);\n        const ednsVersion = buffer.readUInt8(ttlOffset + 1);\n        const flagsField = buffer.readUInt16BE(ttlOffset + 2);\n        const flags = {\n            dnsSecOK: !!(flagsField & OPTRecord.DNS_SEC_OK_MASK),\n            zero: flagsField & OPTRecord.NOT_DNS_SEC_OK_MASK,\n        };\n        const options = [];\n        while (offset < buffer.length) {\n            const code = buffer.readUInt16BE(offset);\n            offset += 2;\n            const length = buffer.readUInt16BE(offset);\n            offset += 2;\n            const data = buffer.subarray(offset, offset + length);\n            offset += length;\n            options.push({\n                code: code,\n                data: data,\n            });\n        }\n        header.class = udpPayloadSize;\n        header.ttl = 4500; // default\n        return {\n            data: new OPTRecord(header, options, extendedRCode, flags, ednsVersion),\n            readBytes: offset - oldOffset,\n        };\n    }\n    clone() {\n        return new OPTRecord(this.getRecordRepresentation(), this.options, this.extendedRCode, this.flags, this.ednsVersion);\n    }\n    dataAsString() {\n        return `${this.udpPayloadSize} ${this.extendedRCode} ${this.ednsVersion} ${JSON.stringify(this.flags)} [${this.options\n            .map(opt => `${opt.code} ${opt.data.toString(\"base64\")}`).join(\",\")}]`;\n    }\n    dataEquals(record) {\n        return this.udpPayloadSize === record.udpPayloadSize && this.extendedRCode === record.extendedRCode\n            && this.ednsVersion === record.ednsVersion\n            && OPTRecord.optionsEquality(this.options, record.options) && (0, fast_deep_equal_1.default)(this.flags, record.flags);\n    }\n    static optionsEquality(a, b) {\n        // deepEquals on buffers doesn't really work\n        if (a.length !== b.length) {\n            return false;\n        }\n        for (let i = 0; i < a.length; i++) {\n            if (a[i].code !== b[i].code) {\n                return false;\n            }\n            else if (a[i].data.toString(\"hex\") !== b[i].data.toString(\"hex\")) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nexports.OPTRecord = OPTRecord;\nOPTRecord.EDNS_VERSION = 0;\nOPTRecord.DNS_SEC_OK_MASK = 0x8000; // 2 bytes, first bit set\nOPTRecord.NOT_DNS_SEC_OK_MASK = 0x7FFF;\n//# sourceMappingURL=OPTRecord.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PTRRecord = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst dns_equal_1 = require(\"../../util/dns-equal\");\nconst ResourceRecord_1 = require(\"../ResourceRecord\");\nclass PTRRecord extends ResourceRecord_1.ResourceRecord {\n    constructor(name, ptrName, flushFlag, ttl) {\n        if (typeof name === \"string\") {\n            super(name, 12 /* RType.PTR */, ttl, flushFlag);\n        }\n        else {\n            (0, assert_1.default)(name.type === 12 /* RType.PTR */);\n            super(name);\n        }\n        if (!ptrName.endsWith(\".\")) {\n            ptrName += \".\";\n        }\n        this.ptrName = ptrName;\n    }\n    getLowerCasedPTRName() {\n        return this.lowerCasedPtrName || (this.lowerCasedPtrName = (0, dns_equal_1.dnsLowerCase)(this.ptrName));\n    }\n    getRDataEncodingLength(coder) {\n        return coder.getNameLength(this.ptrName);\n    }\n    encodeRData(coder, buffer, offset) {\n        const oldOffset = offset;\n        const ptrNameLength = coder.encodeName(this.ptrName, offset);\n        offset += ptrNameLength;\n        return offset - oldOffset; // written bytes\n    }\n    static decodeData(coder, header, buffer, offset) {\n        const oldOffset = offset;\n        const decodedName = coder.decodeName(offset);\n        offset += decodedName.readBytes;\n        return {\n            data: new PTRRecord(header, decodedName.data),\n            readBytes: offset - oldOffset,\n        };\n    }\n    clone() {\n        return new PTRRecord(this.getRecordRepresentation(), this.ptrName);\n    }\n    dataAsString() {\n        return this.ptrName;\n    }\n    dataEquals(record) {\n        return this.getLowerCasedPTRName() === record.getLowerCasedPTRName();\n    }\n}\nexports.PTRRecord = PTRRecord;\nPTRRecord.DEFAULT_TTL = ResourceRecord_1.ResourceRecord.RR_DEFAULT_TTL;\n//# sourceMappingURL=PTRRecord.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SRVRecord = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst dns_equal_1 = require(\"../../util/dns-equal\");\nconst ResourceRecord_1 = require(\"../ResourceRecord\");\nclass SRVRecord extends ResourceRecord_1.ResourceRecord {\n    constructor(name, hostname, port, flushFlag, ttl) {\n        if (typeof name === \"string\") {\n            super(name, 33 /* RType.SRV */, ttl || SRVRecord.RR_DEFAULT_TTL_SHORT, flushFlag);\n        }\n        else {\n            (0, assert_1.default)(name.type === 33 /* RType.SRV */);\n            super(name);\n        }\n        if (!hostname.endsWith(\".\")) {\n            this.hostname = hostname + \".\";\n        }\n        else {\n            this.hostname = hostname;\n        }\n        this.port = port;\n        // priority and weight are not supported to encode or read\n        this.priority = 0;\n        this.weight = 0;\n    }\n    getLowerCasedHostname() {\n        return this.lowerCasedHostname || (this.lowerCasedHostname = (0, dns_equal_1.dnsLowerCase)(this.hostname));\n    }\n    getRDataEncodingLength(coder) {\n        return 6 // 2 byte priority; 2 byte weight; 2 byte port;\n            // as of RFC 2782 name compression MUST NOT be used for the hostname, though RFC 6762 18.14 specifies it should\n            + (coder.legacyUnicastEncoding\n                ? coder.getUncompressedNameLength(this.hostname)\n                : coder.getNameLength(this.hostname));\n    }\n    encodeRData(coder, buffer, offset) {\n        const oldOffset = offset;\n        buffer.writeUInt16BE(this.priority, offset);\n        offset += 2;\n        buffer.writeUInt16BE(this.weight, offset);\n        offset += 2;\n        buffer.writeUInt16BE(this.port, offset);\n        offset += 2;\n        const hostnameLength = coder.legacyUnicastEncoding\n            ? coder.encodeUncompressedName(this.hostname, offset)\n            : coder.encodeName(this.hostname, offset);\n        offset += hostnameLength;\n        return offset - oldOffset; // written bytes\n    }\n    static decodeData(coder, header, buffer, offset) {\n        const oldOffset = offset;\n        //const priority = buffer.readUInt16BE(offset);\n        offset += 2;\n        //const weight = buffer.readUInt16BE(offset);\n        offset += 2;\n        const port = buffer.readUInt16BE(offset);\n        offset += 2;\n        const decodedHostname = coder.decodeName(offset);\n        offset += decodedHostname.readBytes;\n        return {\n            data: new SRVRecord(header, decodedHostname.data, port),\n            readBytes: offset - oldOffset,\n        };\n    }\n    clone() {\n        return new SRVRecord(this.getRecordRepresentation(), this.hostname, this.port);\n    }\n    dataAsString() {\n        return `${this.hostname} ${this.port} ${this.priority} ${this.weight}`;\n    }\n    dataEquals(record) {\n        return this.getLowerCasedHostname() === record.getLowerCasedHostname() && this.port === record.port && this.weight === record.weight && this.priority === record.priority;\n    }\n}\nexports.SRVRecord = SRVRecord;\nSRVRecord.DEFAULT_TTL = 120;\n//# sourceMappingURL=SRVRecord.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TXTRecord = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst ResourceRecord_1 = require(\"../ResourceRecord\");\nclass TXTRecord extends ResourceRecord_1.ResourceRecord {\n    constructor(name, txt, flushFlag, ttl) {\n        if (typeof name === \"string\") {\n            super(name, 16 /* RType.TXT */, ttl, flushFlag);\n        }\n        else {\n            (0, assert_1.default)(name.type === 16 /* RType.TXT */);\n            super(name);\n        }\n        this.txt = txt.length === 0 ? [Buffer.from([])] : txt;\n    }\n    getRDataEncodingLength() {\n        let length = 0;\n        for (const buffer of this.txt) {\n            length += 1 + buffer.length;\n            (0, assert_1.default)(buffer.length <= 255, \"One txt character-string can only have a length of 255 chars\");\n        }\n        return length;\n    }\n    encodeRData(coder, buffer, offset) {\n        const oldOffset = offset;\n        for (const txt of this.txt) {\n            buffer.writeUInt8(txt.length, offset++);\n            txt.copy(buffer, offset);\n            offset += txt.length;\n        }\n        return offset - oldOffset; // written bytes\n    }\n    clone() {\n        return new TXTRecord(this.getRecordRepresentation(), this.txt);\n    }\n    dataAsString() {\n        return `[${this.txt.map(line => `${line.toString(\"base64\")}`).join(\",\")}]`;\n    }\n    dataEquals(record) {\n        // deepEquals on buffers doesn't really work\n        if (this.txt.length !== record.txt.length) {\n            return false;\n        }\n        for (let i = 0; i < this.txt.length; i++) {\n            if (this.txt[i].toString(\"hex\") !== record.txt[i].toString(\"hex\")) {\n                return false;\n            }\n        }\n        return true;\n    }\n    static decodeData(coder, header, buffer, offset) {\n        const oldOffset = offset;\n        const txtData = [];\n        while (offset < buffer.length) {\n            const length = buffer.readUInt8(offset++);\n            txtData.push(buffer.subarray(offset, offset + length));\n            offset += length;\n        }\n        return {\n            data: new TXTRecord(header, txtData),\n            readBytes: offset - oldOffset,\n        };\n    }\n}\nexports.TXTRecord = TXTRecord;\nTXTRecord.DEFAULT_TTL = ResourceRecord_1.ResourceRecord.RR_DEFAULT_TTL;\n//# sourceMappingURL=TXTRecord.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ResourceRecord_1 = require(\"../ResourceRecord\");\nconst AAAARecord_1 = require(\"./AAAARecord\");\nconst ARecord_1 = require(\"./ARecord\");\nconst CNAMERecord_1 = require(\"./CNAMERecord\");\nconst NSECRecord_1 = require(\"./NSECRecord\");\nconst OPTRecord_1 = require(\"./OPTRecord\");\nconst PTRRecord_1 = require(\"./PTRRecord\");\nconst SRVRecord_1 = require(\"./SRVRecord\");\nconst TXTRecord_1 = require(\"./TXTRecord\");\nResourceRecord_1.ResourceRecord.typeToRecordDecoder.set(28 /* RType.AAAA */, AAAARecord_1.AAAARecord.decodeData);\nResourceRecord_1.ResourceRecord.typeToRecordDecoder.set(1 /* RType.A */, ARecord_1.ARecord.decodeData);\nResourceRecord_1.ResourceRecord.typeToRecordDecoder.set(5 /* RType.CNAME */, CNAMERecord_1.CNAMERecord.decodeData);\nResourceRecord_1.ResourceRecord.typeToRecordDecoder.set(47 /* RType.NSEC */, NSECRecord_1.NSECRecord.decodeData);\nResourceRecord_1.ResourceRecord.typeToRecordDecoder.set(12 /* RType.PTR */, PTRRecord_1.PTRRecord.decodeData);\nResourceRecord_1.ResourceRecord.typeToRecordDecoder.set(33 /* RType.SRV */, SRVRecord_1.SRVRecord.decodeData);\nResourceRecord_1.ResourceRecord.typeToRecordDecoder.set(41 /* RType.OPT */, OPTRecord_1.OPTRecord.decodeData);\nResourceRecord_1.ResourceRecord.typeToRecordDecoder.set(16 /* RType.TXT */, TXTRecord_1.TXTRecord.decodeData);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getResponder = exports.Protocol = void 0;\nconst tslib_1 = require(\"tslib\");\nrequire(\"source-map-support/register\"); // registering node-source-map-support for typescript stack traces\nconst debug_1 = tslib_1.__importDefault(require(\"debug\"));\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst version = require(\"../package.json\").version;\nif (version.includes(\"beta\") || process.env.BCT) { // enable debug output if beta version or running bonjour conformance testing\n    const debug = process.env.DEBUG;\n    if (!debug || !debug.includes(\"ciao\")) {\n        if (!debug) {\n            debug_1.default.enable(\"ciao:*\");\n        }\n        else {\n            debug_1.default.enable(debug + \",ciao:*\");\n        }\n    }\n}\nrequire(\"./coder/records/index\");\nconst Responder_1 = require(\"./Responder\");\ntslib_1.__exportStar(require(\"./CiaoService\"), exports);\ntslib_1.__exportStar(require(\"./Responder\"), exports);\nfunction printInitInfo() {\n    const debug = (0, debug_1.default)(\"ciao:init\");\n    debug(\"Loading ciao v\" + version + \"...\");\n}\nprintInitInfo();\n/**\n * Defines the transport protocol of a service.\n *\n * As of RFC 6763 7. TCP must be used for any applications using tcp.\n *  For applications using any other transport protocol UDP must be used.\n *  This applies to all other transport protocols like SCTP, DCCP, RTMFP, etc\n */\nvar Protocol;\n(function (Protocol) {\n    Protocol[\"TCP\"] = \"tcp\";\n    Protocol[\"UDP\"] = \"udp\";\n})(Protocol || (exports.Protocol = Protocol = {}));\n/**\n * This method is used to get a responder for the provided (optional) set of options.\n *\n * Ciao tries to create as few Responder instances as possible.\n * Thus, it will share the same Responder instance for the same set of options.\n *\n * @param options - If specified, the options will be passed to the underlying mdns server.\n * @returns A Responder instance for the given options. Might be shared with others using the same options.\n */\nfunction getResponder(options) {\n    return Responder_1.Responder.getResponder(options);\n}\nexports.getResponder = getResponder;\nexports.default = {\n    getResponder: getResponder,\n};\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Announcer = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst debug_1 = tslib_1.__importDefault(require(\"debug\"));\nconst DNSPacket_1 = require(\"../coder/DNSPacket\");\nconst MDNSServer_1 = require(\"../MDNSServer\");\nconst promise_utils_1 = require(\"../util/promise-utils\");\nconst debug = (0, debug_1.default)(\"ciao:Announcer\");\n/**\n * This class is used to execute the 'announce' process for a given service as define in RFC 6762 8.3.\n *\n * The Multicast DNS responder MUST send at least two unsolicited\n * responses, one second apart.  To provide increased robustness against\n * packet loss, a responder MAY send up to eight unsolicited responses,\n * provided that the interval between unsolicited responses increases by\n * at least a factor of two with every response sent.\n *\n */\nclass Announcer {\n    constructor(server, service, options) {\n        this.repetitions = 1;\n        this.announceIntervalIncreaseFactor = 2; // RFC states a factor of AT LEAST two (could be higher as it seems)\n        this.goodbye = false;\n        this.sentAnnouncements = 0;\n        this.sentLastAnnouncement = false;\n        this.nextInterval = 1000;\n        this.nextAnnouncementTime = 0;\n        (0, assert_1.default)(server, \"server must be defined\");\n        (0, assert_1.default)(service, \"service must be defined\");\n        this.server = server;\n        this.service = service;\n        if (options) {\n            if (options.repetitions !== undefined) {\n                this.repetitions = options.repetitions;\n            }\n            if (options.goodbye) {\n                this.goodbye = true;\n            }\n        }\n        (0, assert_1.default)(this.repetitions > 0 && this.repetitions <= 8, \"repetitions must in [1;8]\");\n    }\n    announce() {\n        debug(\"[%s] Sending %s for service\", this.service.getFQDN(), this.goodbye ? \"goodbye\" : \"announcement\");\n        if (!this.goodbye) {\n            // could happen that the txt record was updated while probing.\n            // just to be sure to announce all the latest data, we will rebuild the services.\n            this.service.rebuildServiceRecords();\n        }\n        return (this.promise = new Promise((resolve, reject) => {\n            this.promiseResolve = resolve;\n            this.promiseReject = reject;\n            this.timer = setTimeout(this.sendAnnouncement.bind(this), 0);\n            this.timer.unref();\n            this.nextAnnouncementTime = new Date().getTime();\n        }));\n    }\n    async cancel() {\n        debug(\"[%s] Canceling %s\", this.service.getFQDN(), this.goodbye ? \"goodbye\" : \"announcement\");\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = undefined;\n        }\n        this.promiseReject(Announcer.CANCEL_REASON);\n        // the promise handlers are not called instantly, thus we give the opportunity to wait for the\n        // program originally doing the announcement to clean up\n        return this.awaitAnnouncement().catch(reason => {\n            if (reason !== Announcer.CANCEL_REASON) {\n                return Promise.reject(reason);\n            }\n        });\n    }\n    hasSentLastAnnouncement() {\n        return this.sentLastAnnouncement;\n    }\n    async awaitAnnouncement() {\n        await this.promise;\n    }\n    isSendingGoodbye() {\n        return this.goodbye;\n    }\n    sendAnnouncement() {\n        // minimum required is to send two unsolicited responses, one second apart\n        // we could announce up to 8 times in total (time between messages must increase by two every message)\n        debug(\"[%s] Sending %s number %d\", this.service.getFQDN(), this.goodbye ? \"goodbye\" : \"announcement\", this.sentAnnouncements + 1);\n        // we rebuild every time,\n        const records = [\n            this.service.ptrRecord(), ...this.service.subtypePtrRecords(),\n            this.service.srvRecord(), this.service.txtRecord(),\n            // A and AAAA records are added below when sending. Which records get added depends on the network the announcement happens for\n        ];\n        if (this.goodbye) {\n            for (const record of records) {\n                record.ttl = 0; // setting ttl to zero to indicate \"goodbye\"\n            }\n        }\n        else {\n            records.push(this.service.metaQueryPtrRecord());\n        }\n        if (this.sentAnnouncements + 1 >= this.repetitions) {\n            this.sentLastAnnouncement = true;\n        }\n        Announcer.sendResponseAddingAddressRecords(this.server, this.service, records, this.goodbye).then(results => {\n            const failRatio = (0, MDNSServer_1.SendResultFailedRatio)(results);\n            if (failRatio === 1) {\n                console.error((0, MDNSServer_1.SendResultFormatError)(results, `[${this.service.getFQDN()}] Failed to send ${this.goodbye ? \"goodbye\" : \"announcement\"} requests`), true);\n                this.promiseReject(new Error(`${this.goodbye ? \"Goodbye\" : \"Announcement\"} failed as of socket errors!`));\n                return; // all failed => thus announcement failed\n            }\n            if (failRatio > 0) {\n                // some queries on some interfaces failed, but not all. We log that but consider that to be a success\n                // at this point we are not responsible for removing stale network interfaces or something\n                debug((0, MDNSServer_1.SendResultFormatError)(results, `Some of the ${this.goodbye ? \"goodbye\" : \"announcement\"} requests for '${this.service.getFQDN()}' encountered an error`));\n                // SEE no return here\n            }\n            if (this.service.serviceState !== \"announcing\" /* ServiceState.ANNOUNCING */) {\n                debug(\"[%s] Service is no longer in announcing state. Stopping. (Received %s)\", this.service.getFQDN(), this.service.serviceState);\n                return;\n            }\n            this.sentAnnouncements++;\n            if (this.sentAnnouncements >= this.repetitions) {\n                this.promiseResolve();\n            }\n            else {\n                this.timer = setTimeout(this.sendAnnouncement.bind(this), this.nextInterval);\n                this.timer.unref();\n                this.nextAnnouncementTime = new Date().getTime() + this.nextInterval;\n                this.nextInterval *= this.announceIntervalIncreaseFactor;\n            }\n        });\n    }\n    static sendResponseAddingAddressRecords(server, service, records, goodbye) {\n        const promises = [];\n        for (const name of server.getBoundInterfaceNames()) {\n            if (!service.advertisesOnInterface(name)) {\n                continue;\n            }\n            const answer = records.concat([]);\n            const aRecord = service.aRecord(name);\n            const aaaaRecord = service.aaaaRecord(name);\n            const aaaaRoutableRecord = service.aaaaRoutableRecord(name);\n            const aaaaUniqueLocalRecord = service.aaaaUniqueLocalRecord(name);\n            //const reversMappings: PTRRecord[] = service.reverseAddressMappings(networkInterface);\n            const nsecRecord = service.addressNSECRecord();\n            const serviceNsecRecord = service.serviceNSECRecord();\n            if (aRecord) {\n                if (goodbye) {\n                    aRecord.ttl = 0;\n                }\n                answer.push(aRecord);\n            }\n            if (aaaaRecord) {\n                if (goodbye) {\n                    aaaaRecord.ttl = 0;\n                }\n                answer.push(aaaaRecord);\n            }\n            if (aaaaRoutableRecord) {\n                if (goodbye) {\n                    aaaaRoutableRecord.ttl = 0;\n                }\n                answer.push(aaaaRoutableRecord);\n            }\n            if (aaaaUniqueLocalRecord) {\n                if (goodbye) {\n                    aaaaUniqueLocalRecord.ttl = 0;\n                }\n                answer.push(aaaaUniqueLocalRecord);\n            }\n            /*\n            for (const reversMapping of reversMappings) {\n              if (goodbye) {\n                reversMapping.ttl = 0;\n              }\n              answer.push(reversMapping);\n            }\n            */\n            if (goodbye) {\n                nsecRecord.ttl = 0;\n                serviceNsecRecord.ttl = 0;\n            }\n            const additionals = [];\n            additionals.push(nsecRecord, serviceNsecRecord);\n            const packet = DNSPacket_1.DNSPacket.createDNSResponsePacketsFromRRSet({\n                answers: answer,\n                additionals: additionals,\n            });\n            promises.push(Promise.race([\n                server.send(packet, name),\n                (0, promise_utils_1.PromiseTimeout)(MDNSServer_1.MDNSServer.SEND_TIMEOUT).then(() => ({\n                    status: \"timeout\",\n                    interface: name,\n                })),\n            ]));\n        }\n        return Promise.all(promises);\n    }\n}\nexports.Announcer = Announcer;\nAnnouncer.CANCEL_REASON = \"CIAO ANNOUNCEMENT CANCELLED\";\n//# sourceMappingURL=Announcer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Prober = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst debug_1 = tslib_1.__importDefault(require(\"debug\"));\nconst Question_1 = require(\"../coder/Question\");\nconst MDNSServer_1 = require(\"../MDNSServer\");\nconst tiebreaking = tslib_1.__importStar(require(\"../util/tiebreaking\"));\nconst tiebreaking_1 = require(\"../util/tiebreaking\");\nconst PROBE_INTERVAL = 250; // 250ms as defined in RFC 6762 8.1.\nconst LIMITED_PROBE_INTERVAL = 1000;\nconst debug = (0, debug_1.default)(\"ciao:Prober\");\n/**\n * This class is used to execute the probing process for a given service as defined\n * in RFC 6762 8.1.\n * This ensures that we advertise the service under a unique name.\n * It also provides a conflict resolution algorithm if multiple clients probing\n * for the same name are detected.\n */\nclass Prober {\n    constructor(responder, server, service) {\n        this.records = [];\n        this.currentInterval = PROBE_INTERVAL;\n        this.serviceEncounteredNameChange = false;\n        this.sentFirstProbeQuery = false; // we MUST ignore responses received BEFORE the first probe is sent\n        this.sentQueriesForCurrentTry = 0;\n        this.sentQueries = 0;\n        (0, assert_1.default)(responder, \"responder must be defined\");\n        (0, assert_1.default)(server, \"server must be defined\");\n        (0, assert_1.default)(service, \"service must be defined\");\n        this.responder = responder;\n        this.server = server;\n        this.service = service;\n    }\n    getService() {\n        return this.service;\n    }\n    /**\n     * This method is called to start the actual probing process.\n     * Once the service is considered unique on the network and can be announced the promise returns.\n     * While probing multiple name changes can happen\n     *\n     * @returns a promise which returns when the service is considered unique on the network\n     */\n    probe() {\n        /*\n         * Probing is basically the following process: We send three \"probe\" queries to check\n         * if the desired service name is already on the network.\n         * The request are sent with a delay of 250ms between them and the first\n         * request starting with a random delay.\n         * If we don't receive any response to our requests we consider the probing to be successful\n         * and continue with announcing our service.\n         */\n        debug(\"Starting to probe for '%s'...\", this.service.getFQDN());\n        return new Promise((resolve, reject) => {\n            this.promiseResolve = resolve;\n            this.promiseReject = reject;\n            this.timer = setTimeout(this.sendProbeRequest.bind(this), Math.random() * PROBE_INTERVAL);\n            this.timer.unref();\n        });\n    }\n    cancel() {\n        this.clear();\n        this.promiseReject(Prober.CANCEL_REASON);\n    }\n    clear() {\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = undefined;\n        }\n        // reset all values to default (so the Prober can be reused if it wasn't successful)\n        this.sentFirstProbeQuery = false;\n        this.sentQueriesForCurrentTry = 0;\n    }\n    /**\n     * End the current ongoing probing requests. If\n     * @param success\n     */\n    endProbing(success) {\n        // reset all values to default (so the Prober can be reused if it wasn't successful)\n        this.clear();\n        if (success) {\n            debug(\"Probing for '%s' finished successfully\", this.service.getFQDN());\n            this.promiseResolve();\n            if (this.serviceEncounteredNameChange) {\n                this.service.informAboutNameUpdates();\n            }\n        }\n    }\n    sendProbeRequest() {\n        if (this.sentQueriesForCurrentTry === 0) { // this is the first query sent, init some stuff\n            // RFC 6762 8.2. When a host is probing for a group of related records with the same\n            //    name (e.g., the SRV and TXT record describing a DNS-SD service), only\n            //    a single question need be placed in the Question Section, since query\n            //    type \"ANY\" (255) is used, which will elicit answers for all records\n            //    with that name.  However, for tiebreaking to work correctly in all\n            //    cases, the Authority Section must contain *all* the records and\n            //    proposed rdata being probed for uniqueness.\n            // it states *all* records, though we include ALL A/AAAA records as well, even\n            // though it may not be relevant data if the probe query is published on different interfaces.\n            // Having the same \"format\" probed on all interfaces, the simultaneous probe tiebreaking\n            // algorithm can work correctly. Otherwise, we would conflict with ourselves in a situation were\n            // a device is connected to the same network via Wi-Fi and Ethernet.\n            this.records = [\n                this.service.srvRecord(), this.service.txtRecord(),\n                this.service.ptrRecord(), ...this.service.subtypePtrRecords(),\n                ...this.service.allAddressRecords(), //...this.service.allReverseAddressMappings(),\n            ].sort(tiebreaking_1.rrComparator); // we sort them for the tiebreaking algorithm\n            this.records.forEach(record => record.flushFlag = false);\n        }\n        if (this.sentQueriesForCurrentTry >= 3) {\n            // we sent three requests, and it seems like we weren't canceled, so we have a success right here\n            this.endProbing(true);\n            return;\n        }\n        if (this.sentQueries >= 15) {\n            this.currentInterval = LIMITED_PROBE_INTERVAL;\n        }\n        debug(\"Sending prober query number %d for '%s'...\", this.sentQueriesForCurrentTry + 1, this.service.getFQDN());\n        (0, assert_1.default)(this.records.length > 0, \"Tried sending probing request for zero record length!\");\n        const questions = [\n            // probes SHOULD be sent with unicast response flag as of the RFC\n            // MDNServer might overwrite the QU flag to false, as we can't use unicast if there is another responder on the machine\n            new Question_1.Question(this.service.getFQDN(), 255 /* QType.ANY */, true),\n            new Question_1.Question(this.service.getHostname(), 255 /* QType.ANY */, true),\n        ];\n        this.server.sendQueryBroadcast({\n            questions: questions,\n            // TODO certified homekit accessories only include the main service PTR record\n            authorities: this.records, // include records we want to announce in authorities to support Simultaneous Probe Tiebreaking (RFC 6762 8.2.)\n        }, this.service).then(results => {\n            const failRatio = (0, MDNSServer_1.SendResultFailedRatio)(results);\n            if (failRatio === 1) {\n                console.error((0, MDNSServer_1.SendResultFormatError)(results, `Failed to send probe queries for '${this.service.getFQDN()}'`), true);\n                this.endProbing(false);\n                this.promiseReject(new Error(\"Probing failed as of socket errors!\"));\n                return; // all failed => thus probing failed\n            }\n            if (failRatio > 0) {\n                // some queries on some interfaces failed, but not all. We log that but consider that to be a success\n                // at this point we are not responsible for removing stale network interfaces or something\n                debug((0, MDNSServer_1.SendResultFormatError)(results, `Some of the probe queries for '${this.service.getFQDN()}' encountered an error`));\n                // SEE no return here\n            }\n            if (this.service.serviceState !== \"probing\" /* ServiceState.PROBING */) {\n                debug(\"Service '%s' is no longer in probing state. Stopping.\", this.service.getFQDN());\n                return;\n            }\n            this.sentFirstProbeQuery = true;\n            this.sentQueriesForCurrentTry++;\n            this.sentQueries++;\n            this.timer = setTimeout(this.sendProbeRequest.bind(this), this.currentInterval);\n            this.timer.unref();\n            this.checkLocalConflicts();\n        });\n    }\n    checkLocalConflicts() {\n        let containsAnswer = false;\n        for (const service of this.responder.getAnnouncedServices()) {\n            if (service.getLowerCasedFQDN() === this.service.getLowerCasedFQDN() || service.getLowerCasedHostname() === this.service.getLowerCasedHostname()) {\n                containsAnswer = true;\n                break;\n            }\n        }\n        if (containsAnswer) {\n            debug(\"Probing for '%s' failed as of local service. Doing a name change\", this.service.getFQDN());\n            this.handleNameChange();\n        }\n    }\n    handleResponse(packet, endpoint) {\n        if (!this.sentFirstProbeQuery || !this.service.advertisesOnInterface(endpoint.interface)) {\n            return;\n        }\n        let containsAnswer = false;\n        // search answers and additionals for answers to our probe queries\n        for (const record of packet.answers.values()) {\n            if (record.getLowerCasedName() === this.service.getLowerCasedFQDN() || record.getLowerCasedName() === this.service.getLowerCasedHostname()) {\n                containsAnswer = true;\n                break;\n            }\n        }\n        for (const record of packet.additionals.values()) {\n            if (record.getLowerCasedName() === this.service.getLowerCasedFQDN() || record.getLowerCasedName() === this.service.getLowerCasedHostname()) {\n                containsAnswer = true;\n                break;\n            }\n        }\n        if (containsAnswer) { // abort and cancel probes\n            debug(\"Probing for '%s' failed. Doing a name change\", this.service.getFQDN());\n            this.handleNameChange();\n        }\n    }\n    handleNameChange() {\n        this.endProbing(false); // reset the prober\n        this.service.serviceState = \"unannounced\" /* ServiceState.UNANNOUNCED */;\n        this.service.incrementName();\n        this.service.serviceState = \"probing\" /* ServiceState.PROBING */;\n        this.serviceEncounteredNameChange = true;\n        this.timer = setTimeout(this.sendProbeRequest.bind(this), 1000);\n        this.timer.unref();\n    }\n    handleQuery(packet, endpoint) {\n        if (!this.sentFirstProbeQuery || !this.service.advertisesOnInterface(endpoint.interface)) {\n            return;\n        }\n        // if we are currently probing and receiving a query which is also a probing query\n        // which matches the desired name we run the tiebreaking algorithm to decide on the winner\n        let needsTiebreaking = false;\n        for (const question of packet.questions.values()) {\n            if (question.getLowerCasedName() === this.service.getLowerCasedFQDN() || question.getLowerCasedName() === this.service.getLowerCasedHostname()) {\n                needsTiebreaking = true;\n                break;\n            }\n        }\n        if (needsTiebreaking) {\n            this.doTiebreaking(packet);\n        }\n    }\n    doTiebreaking(packet) {\n        if (!this.sentFirstProbeQuery) { // ignore queries if we are not sending\n            return;\n        }\n        // first of all check if the contents of authorities answers our query\n        let conflict = packet.authorities.size === 0;\n        for (const record of packet.authorities.values()) {\n            if (record.getLowerCasedName() === this.service.getLowerCasedFQDN() || record.getLowerCasedName() === this.service.getLowerCasedHostname()) {\n                conflict = true;\n                break;\n            }\n        }\n        if (!conflict) {\n            return;\n        }\n        // now run the actual tiebreaking algorithm to decide the winner\n        // tiebreaking is actually run pretty often, as we always receive our own packets\n        // first of all build our own records\n        const answers = this.records; // already sorted\n        const opponent = Array.from(packet.authorities.values()).sort(tiebreaking.rrComparator);\n        const result = tiebreaking.runTiebreaking(answers, opponent);\n        if (result === 1 /* TiebreakingResult.HOST */) {\n            debug(\"'%s' won the tiebreak. We gonna ignore the other probing request!\", this.service.getFQDN());\n        }\n        else if (result === -1 /* TiebreakingResult.OPPONENT */) {\n            debug(\"'%s' lost the tiebreak. We are waiting a second and try to probe again...\", this.service.getFQDN());\n            this.endProbing(false); // cancel the current probing\n            // wait 1 second and probe again (this is to guard against stale probe packets)\n            // If it wasn't a stale probe packet, the other host will correctly respond to our probe queries by then\n            this.timer = setTimeout(this.sendProbeRequest.bind(this), 1000);\n            this.timer.unref();\n        }\n        else {\n            //debug(\"Tiebreaking for '%s' detected exact same records on the network. There is actually no conflict!\", this.service.getFQDN());\n        }\n    }\n}\nexports.Prober = Prober;\nProber.CANCEL_REASON = \"CIAO PROBING CANCELLED\";\n//# sourceMappingURL=Prober.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QueryResponse = void 0;\nconst DNSPacket_1 = require(\"../coder/DNSPacket\");\nclass QueryResponse {\n    constructor(knownAnswers) {\n        this.sharedAnswer = false;\n        this.dnsPacket = new DNSPacket_1.DNSPacket({ type: 1 /* PacketType.RESPONSE */ });\n        this.knownAnswers = knownAnswers;\n    }\n    asPacket() {\n        return this.dnsPacket;\n    }\n    asString(udpPayloadSize) {\n        return this.dnsPacket.asLoggingString(udpPayloadSize);\n    }\n    containsSharedAnswer() {\n        return this.sharedAnswer;\n    }\n    addAnswer(...records) {\n        let addedAny = false;\n        for (const record of records) {\n            if (this.isKnownAnswer(record)) {\n                // record is a known answer to the querier\n                continue;\n            }\n            const added = this.dnsPacket.addAnswers(record);\n            if (added) {\n                addedAny = true;\n                if (!record.flushFlag) {\n                    this.sharedAnswer = true;\n                }\n            }\n        }\n        return addedAny;\n    }\n    addAdditional(...records) {\n        let addedAny = false;\n        for (const record of records) {\n            if (this.isKnownAnswer(record)) {\n                // check if the additional record is a known answer, otherwise there is no need to send it\n                continue;\n            }\n            if (this.dnsPacket.answers.has(record.asString())) {\n                continue; // if it is already in the answer section, don't include it in additionals\n            }\n            const added = this.dnsPacket.addAdditionals(record);\n            if (added) {\n                addedAny = true;\n            }\n        }\n        return addedAny;\n    }\n    markLegacyUnicastResponse(id, questions) {\n        // we are dealing with a legacy unicast dns query (RFC 6762 6.7.)\n        //  * MUSTS: response via unicast, repeat query ID, repeat questions (actually it should just be one), clear cache flush bit\n        //  * SHOULDS: ttls should not be greater than 10s as legacy resolvers don't take part in the cache coherency mechanism\n        this.dnsPacket.id = id;\n        if (questions) {\n            this.dnsPacket.addQuestions(...questions);\n        }\n        this.dnsPacket.answers.forEach(answers => {\n            answers.flushFlag = false;\n            answers.ttl = 10;\n        });\n        this.dnsPacket.additionals.forEach(answers => {\n            answers.flushFlag = false;\n            answers.ttl = 10;\n        });\n        this.dnsPacket.setLegacyUnicastEncoding(true); // legacy unicast also affects the encoder (must not use compression for the SRV record) so we need to tell him\n    }\n    markTruncated() {\n        this.dnsPacket.flags.truncation = true;\n    }\n    hasAnswers() {\n        // we may still have additionals, though there is no reason when answers is empty\n        // removeKnownAnswer may have removed all answers and only additionals are known.\n        return this.dnsPacket.answers.size > 0;\n    }\n    isKnownAnswer(record) {\n        if (!this.knownAnswers) {\n            return false;\n        }\n        const knownAnswer = this.knownAnswers.get(record.asString());\n        // we will still send the response if the known answer has half of the original ttl according to RFC 6762 7.1.\n        // so only if the ttl is more than half than the original ttl we consider it a valid known answer\n        return knownAnswer !== undefined && knownAnswer.ttl > record.ttl / 2;\n    }\n    static combineResponses(responses, udpPayloadSize) {\n        for (let i = 0; i < responses.length - 1; i++) {\n            const current = responses[i];\n            const currentPacket = current.dnsPacket;\n            const next = responses[i + 1];\n            const nextPacket = next.dnsPacket;\n            if (currentPacket.canBeCombinedWith(nextPacket, udpPayloadSize)) {\n                // combine the packet with next one\n                currentPacket.combineWith(nextPacket);\n                // remove next from the array\n                responses.splice(i + 1, 1);\n                // we won't combine the known answer section, with current implementation they will always be the same\n                current.sharedAnswer = current.sharedAnswer || next.sharedAnswer;\n                // decrement i, so we check again if the \"current\" packet can be combined with the packet after \"next\"\n                i--;\n            }\n        }\n    }\n}\nexports.QueryResponse = QueryResponse;\n//# sourceMappingURL=QueryResponse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QueuedResponse = void 0;\n/**\n * Represents a delay response packet which is going to be sent over multicast.\n */\nclass QueuedResponse {\n    constructor(packet, interfaceName) {\n        this.timeOfCreation = new Date().getTime(); // epoch time millis\n        this.estimatedTimeToBeSent = 0; // epoch time millis\n        this.delay = -1;\n        this.packet = packet;\n        this.interfaceName = interfaceName;\n    }\n    getPacket() {\n        return this.packet;\n    }\n    /**\n     * This method returns the total delay of the represented dns response packet.\n     * If this QueuedResponse consists of already combined packets\n     * (meaning other packets already got delayed in order to be sent out with this packet),\n     * the totalDelay will represent the maximum delay of any contained packet.\n     *\n     * @returns The total delay.\n     */\n    getTimeSinceCreation() {\n        return new Date().getTime() - this.timeOfCreation;\n    }\n    getTimeTillSent() {\n        return Math.max(0, this.estimatedTimeToBeSent - new Date().getTime());\n    }\n    calculateRandomDelay() {\n        this.delay = Math.random() * 100 + 20; // delay of 20ms - 120ms\n        this.estimatedTimeToBeSent = new Date().getTime() + this.delay;\n    }\n    scheduleResponse(callback) {\n        this.timer = setTimeout(callback, this.delay);\n        this.timer.unref(); // timer doesn't prevent termination\n    }\n    delayWouldBeInTimelyManner(next) {\n        const delay = next.estimatedTimeToBeSent - this.timeOfCreation;\n        return delay <= QueuedResponse.MAX_DELAY;\n    }\n    /**\n     * Combines this queue response packet with the {@code next} queued response packet if those can be combined.\n     * Packets can be combined if the udpPayloadSize allows for it AND if the current packet\n     * won't be delayed more than 500 ms from its time of creation AND the packets get sent on the same interface.\n     *\n     * @param next - A queued response which is schedule AFTER the current queued response.\n     * @returns {@code true} will be returned if the queued response was combined with the specified {@code next} response.\n     */\n    combineWithNextPacketIfPossible(next) {\n        // below check, which is commented out would be necessary, current implementation will check that\n        // with function above, thus there is no need to check again.\n        /*\n        if (!this.delayWouldBeInTimelyManner(next)) {\n          return false;\n        }\n        */\n        if (this.interfaceName !== next.interfaceName) {\n            // can't combine packets which get sent via different interfaces\n            return false;\n        }\n        if (!next.packet.canBeCombinedWith(this.packet)) {\n            // packets can't be combined\n            return false;\n        }\n        next.packet.combineWith(this.packet);\n        next.timeOfCreation = Math.min(this.timeOfCreation, next.timeOfCreation);\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = undefined;\n        }\n        this.delayed = true;\n        return true;\n    }\n    combineWithUniqueResponseIfPossible(response, interfaceName) {\n        if (this.interfaceName !== interfaceName) {\n            // can't combine packets which get sent via different interfaces\n            return false;\n        }\n        if (!this.packet.canBeCombinedWith(response.asPacket())) {\n            return false; // packets can't be combined\n        }\n        this.packet.combineWith(response.asPacket());\n        return true;\n    }\n}\nexports.QueuedResponse = QueuedResponse;\nQueuedResponse.MAX_DELAY = 500; // milliseconds\n//# sourceMappingURL=QueuedResponse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TruncatedQuery = exports.TruncatedQueryEvent = exports.TruncatedQueryResult = void 0;\n/* eslint-disable @typescript-eslint/no-unsafe-declaration-merging */\nconst events_1 = require(\"events\");\nvar TruncatedQueryResult;\n(function (TruncatedQueryResult) {\n    TruncatedQueryResult[TruncatedQueryResult[\"ABORT\"] = 1] = \"ABORT\";\n    TruncatedQueryResult[TruncatedQueryResult[\"AGAIN_TRUNCATED\"] = 2] = \"AGAIN_TRUNCATED\";\n    TruncatedQueryResult[TruncatedQueryResult[\"FINISHED\"] = 3] = \"FINISHED\";\n})(TruncatedQueryResult || (exports.TruncatedQueryResult = TruncatedQueryResult = {}));\nvar TruncatedQueryEvent;\n(function (TruncatedQueryEvent) {\n    TruncatedQueryEvent[\"TIMEOUT\"] = \"timeout\";\n})(TruncatedQueryEvent || (exports.TruncatedQueryEvent = TruncatedQueryEvent = {}));\nclass TruncatedQuery extends events_1.EventEmitter {\n    constructor(packet) {\n        super();\n        this.arrivedPackets = 1; // just for the stats\n        this.timeOfArrival = new Date().getTime();\n        this.packet = packet;\n        this.timer = this.resetTimer();\n    }\n    getPacket() {\n        return this.packet;\n    }\n    getArrivedPacketCount() {\n        return this.arrivedPackets;\n    }\n    getTotalWaitTime() {\n        return new Date().getTime() - this.timeOfArrival;\n    }\n    appendDNSPacket(packet) {\n        this.packet.combineWith(packet);\n        this.arrivedPackets++;\n        if (packet.flags.truncation) { // if the appended packet is again truncated, restart the timeout\n            const time = new Date().getTime();\n            if (time - this.timeOfArrival > 5 * 1000) { // if the first packet, is more than 5 seconds old, we abort\n                return 1 /* TruncatedQueryResult.ABORT */;\n            }\n            this.resetTimer();\n            return 2 /* TruncatedQueryResult.AGAIN_TRUNCATED */;\n        }\n        else {\n            clearTimeout(this.timer);\n            this.removeAllListeners();\n            return 3 /* TruncatedQueryResult.FINISHED */;\n        }\n    }\n    resetTimer() {\n        if (this.timer) {\n            clearTimeout(this.timer);\n        }\n        // timeout in time interval between 400-500ms\n        return this.timer = setTimeout(this.timeout.bind(this), 400 + Math.random() * 100);\n    }\n    timeout() {\n        this.emit(\"timeout\" /* TruncatedQueryEvent.TIMEOUT */);\n        this.removeAllListeners();\n    }\n}\nexports.TruncatedQuery = TruncatedQuery;\n//# sourceMappingURL=TruncatedQuery.js.map","\"use strict\";\n// name equality checks according to RFC 1035 3.1\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dnsLowerCase = void 0;\nconst asciiPattern = /[A-Z]/g;\nfunction dnsLowerCase(value) {\n    return value.replace(asciiPattern, s => s.toLowerCase());\n}\nexports.dnsLowerCase = dnsLowerCase;\n//# sourceMappingURL=dns-equal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getNetAddress = exports.ipAddressFromReversAddressName = exports.formatReverseAddressPTRName = exports.shortenIPv6 = exports.enlargeIPv6 = exports.removeTLD = exports.formatHostname = exports.stringify = exports.parseFQDN = void 0;\nconst tslib_1 = require(\"tslib\");\nconst assert_1 = tslib_1.__importDefault(require(\"assert\"));\nconst net_1 = tslib_1.__importDefault(require(\"net\"));\nfunction isProtocol(part) {\n    return part === \"_\" + \"tcp\" /* Protocol.TCP */ || part === \"_\" + \"udp\" /* Protocol.UDP */;\n}\nfunction isSub(part) {\n    return part === \"_sub\";\n}\nfunction removePrefixedUnderscore(part) {\n    return part.startsWith(\"_\") ? part.slice(1) : part;\n}\nfunction isSubTypePTRParts(parts) {\n    return \"subtype\" in parts;\n}\nfunction parseFQDN(fqdn) {\n    const parts = fqdn.split(\".\");\n    (0, assert_1.default)(parts.length >= 3, \"Received illegal fqdn: \" + fqdn);\n    let i = parts.length - 1;\n    let domain = \"\";\n    while (!isProtocol(parts[i])) {\n        domain = removePrefixedUnderscore(parts[i]) + (domain ? \".\" + domain : \"\");\n        i--;\n    }\n    (0, assert_1.default)(i >= 1, \"Failed to parse illegal fqdn: \" + fqdn);\n    const protocol = removePrefixedUnderscore(parts[i--]);\n    const type = removePrefixedUnderscore(parts[i--]);\n    if (i < 0) {\n        return {\n            domain: domain,\n            protocol: protocol,\n            type: type,\n        };\n    }\n    else if (isSub(parts[i])) {\n        i--; // skip \"_sub\";\n        (0, assert_1.default)(i === 0, \"Received illegal formatted sub type fqdn: \" + fqdn);\n        const subtype = removePrefixedUnderscore(parts[i]);\n        return {\n            domain: domain,\n            protocol: protocol,\n            type: type,\n            subtype: subtype,\n        };\n    }\n    else {\n        // the name can contain dots as of RFC 6763 4.1.1.\n        const name = removePrefixedUnderscore(parts.slice(0, i + 1).join(\".\"));\n        return {\n            domain: domain,\n            protocol: protocol,\n            type: type,\n            name: name,\n        };\n    }\n}\nexports.parseFQDN = parseFQDN;\nfunction stringify(parts) {\n    (0, assert_1.default)(parts.type, \"type cannot be undefined\");\n    (0, assert_1.default)(parts.type.length <= 15, \"type must not be longer than 15 characters\");\n    let prefix;\n    if (isSubTypePTRParts(parts)) {\n        prefix = `_${parts.subtype}._sub.`;\n    }\n    else {\n        prefix = parts.name ? `${parts.name}.` : \"\";\n    }\n    return `${prefix}_${parts.type}._${parts.protocol || \"tcp\" /* Protocol.TCP */}.${parts.domain || \"local\"}.`;\n}\nexports.stringify = stringify;\nfunction formatHostname(hostname, domain = \"local\") {\n    (0, assert_1.default)(!hostname.endsWith(\".\"), \"hostname must not end with the root label!\");\n    const tld = \".\" + domain;\n    return (!hostname.endsWith(tld) ? hostname + tld : hostname) + \".\";\n}\nexports.formatHostname = formatHostname;\nfunction removeTLD(hostname) {\n    if (hostname.endsWith(\".\")) { // check for the DNS root label\n        hostname = hostname.substring(0, hostname.length - 1);\n    }\n    const lastDot = hostname.lastIndexOf(\".\");\n    return hostname.slice(0, lastDot);\n}\nexports.removeTLD = removeTLD;\nfunction enlargeIPv6(address) {\n    (0, assert_1.default)(net_1.default.isIPv6(address), \"Illegal argument. Must be ipv6 address!\");\n    // we are not supporting ipv4-mapped ipv6 addresses here\n    (0, assert_1.default)(!address.includes(\".\"), \"ipv4-mapped ipv6 addresses are currently unsupported!\");\n    const split = address.split(\":\");\n    if (split[0] === \"\") {\n        split.splice(0, 1);\n        while (split.length < 8) {\n            split.unshift(\"0000\");\n        }\n    }\n    else if (split[split.length - 1] === \"\") {\n        split.splice(split.length - 1, 1);\n        while (split.length < 8) {\n            split.push(\"0000\");\n        }\n    }\n    else if (split.length < 8) {\n        let emptySection;\n        for (emptySection = 0; emptySection < split.length; emptySection++) {\n            if (split[emptySection] === \"\") { // find the first empty section\n                break;\n            }\n        }\n        const replacements = new Array(9 - split.length).fill(\"0000\");\n        split.splice(emptySection, 1, ...replacements);\n    }\n    for (let i = 0; i < split.length; i++) {\n        const element = split[i];\n        if (element.length < 4) {\n            const zeros = new Array(4 - element.length).fill(\"0\").join(\"\");\n            split.splice(i, 1, zeros + element);\n        }\n    }\n    const result = split.join(\":\");\n    (0, assert_1.default)(split.length <= 8, `Resulting ipv6 address has more than 8 sections (${result})!`);\n    return result;\n}\nexports.enlargeIPv6 = enlargeIPv6;\nfunction shortenIPv6(address) {\n    if (typeof address === \"string\") {\n        address = address.split(\":\");\n    }\n    for (let i = 0; i < address.length; i++) {\n        const part = address[i];\n        let j = 0;\n        for (; j < Math.min(3, part.length - 1); j++) { // search for the first index which is non-zero, but leaving at least one zero\n            if (part.charAt(j) !== \"0\") {\n                break;\n            }\n        }\n        address[i] = part.substr(j);\n    }\n    let longestBlockOfZerosIndex = -1;\n    let longestBlockOfZerosLength = 0;\n    for (let i = 0; i < address.length; i++) { // this is not very optimized, but it works\n        if (address[i] !== \"0\") {\n            continue;\n        }\n        let zerosCount = 1;\n        let j = i + 1;\n        for (; j < address.length; j++) {\n            if (address[j] === \"0\") {\n                zerosCount++;\n            }\n            else {\n                break;\n            }\n        }\n        if (zerosCount > longestBlockOfZerosLength) {\n            longestBlockOfZerosIndex = i;\n            longestBlockOfZerosLength = zerosCount;\n        }\n        i = j; // skip all the zeros we already checked + the one after that, we know that's not a zero\n    }\n    if (longestBlockOfZerosIndex !== -1) {\n        const startOrEnd = longestBlockOfZerosIndex === 0 || (longestBlockOfZerosIndex + longestBlockOfZerosLength === 8);\n        address[longestBlockOfZerosIndex] = startOrEnd ? \":\" : \"\";\n        if (longestBlockOfZerosLength > 1) {\n            address.splice(longestBlockOfZerosIndex + 1, longestBlockOfZerosLength - 1);\n        }\n    }\n    const result = address.join(\":\");\n    if (result === \":\") { // special case for the unspecified address\n        return \"::\";\n    }\n    return result;\n}\nexports.shortenIPv6 = shortenIPv6;\nfunction formatReverseAddressPTRName(address) {\n    if (net_1.default.isIPv4(address)) {\n        const split = address.split(\".\").reverse();\n        return split.join(\".\") + \".in-addr.arpa\";\n    }\n    else if (net_1.default.isIPv6(address)) {\n        address = enlargeIPv6(address).toUpperCase();\n        const nibbleSplit = address.replace(/:/g, \"\").split(\"\").reverse();\n        (0, assert_1.default)(nibbleSplit.length === 32, \"Encountered invalid ipv6 address length! \" + nibbleSplit.length);\n        return nibbleSplit.join(\".\") + \".ip6.arpa\";\n    }\n    else {\n        throw new Error(\"Supplied illegal ip address format: \" + address);\n    }\n}\nexports.formatReverseAddressPTRName = formatReverseAddressPTRName;\nfunction ipAddressFromReversAddressName(name) {\n    name = name.toLowerCase();\n    if (name.endsWith(\".in-addr.arpa\")) {\n        const split = name.replace(\".in-addr.arpa\", \"\").split(\".\").reverse();\n        return split.join(\".\");\n    }\n    else if (name.endsWith(\".ip6.arpa\")) {\n        const split = name.replace(\".ip6.arpa\", \"\").split(\".\").reverse();\n        (0, assert_1.default)(split.length === 32, \"Encountered illegal length for .ip6.arpa split!\");\n        const parts = [];\n        for (let i = 0; i < split.length; i += 4) {\n            parts.push(split.slice(i, i + 4).join(\"\"));\n        }\n        return shortenIPv6(parts.join(\":\"));\n    }\n    else {\n        throw new Error(\"Supplied unknown reverse address name format: \" + name);\n    }\n}\nexports.ipAddressFromReversAddressName = ipAddressFromReversAddressName;\nfunction getNetAddress(address, netmask) {\n    (0, assert_1.default)(net_1.default.isIP(address) === net_1.default.isIP(netmask), \"IP address version must match. Netmask cannot have a version different from the address!\");\n    if (net_1.default.isIPv4(address)) {\n        const addressParts = address.split(\".\");\n        const netmaskParts = netmask.split(\".\");\n        const netAddressParts = new Array(4);\n        for (let i = 0; i < addressParts.length; i++) {\n            const addressNum = parseInt(addressParts[i]);\n            const netmaskNum = parseInt(netmaskParts[i]);\n            netAddressParts[i] = (addressNum & netmaskNum).toString();\n        }\n        return netAddressParts.join(\".\");\n    }\n    else if (net_1.default.isIPv6(address)) {\n        const addressParts = enlargeIPv6(address).split(\":\");\n        const netmaskParts = enlargeIPv6(netmask).split(\":\");\n        const netAddressParts = new Array(8);\n        for (let i = 0; i < addressParts.length; i++) {\n            const addressNum = parseInt(addressParts[i], 16);\n            const netmaskNum = parseInt(netmaskParts[i], 16);\n            netAddressParts[i] = (addressNum & netmaskNum).toString(16);\n        }\n        return shortenIPv6(enlargeIPv6(netAddressParts.join(\":\")));\n    }\n    else {\n        throw new Error(\"Illegal argument. Address is not an ip address!\");\n    }\n}\nexports.getNetAddress = getNetAddress;\n//# sourceMappingURL=domain-formatter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ServerClosedError = exports.InterfaceNotFoundError = exports.ERR_SERVER_CLOSED = exports.ERR_INTERFACE_NOT_FOUND = void 0;\nexports.ERR_INTERFACE_NOT_FOUND = \"ERR_INTERFACE_NOT_FOUND\";\nexports.ERR_SERVER_CLOSED = \"ERR_SERVER_CLOSED\";\nclass InterfaceNotFoundError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = \"ERR_INTERFACE_NOT_FOUND\";\n    }\n}\nexports.InterfaceNotFoundError = InterfaceNotFoundError;\nclass ServerClosedError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = exports.ERR_SERVER_CLOSED;\n    }\n}\nexports.ServerClosedError = ServerClosedError;\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PromiseTimeout = void 0;\nfunction PromiseTimeout(timeout) {\n    return new Promise(resolve => {\n        setTimeout(() => resolve(), timeout);\n    });\n}\nexports.PromiseTimeout = PromiseTimeout;\n//# sourceMappingURL=promise-utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sortedInsert = void 0;\n/**\n * Insert into sorted array using binary search.\n *\n * @param array - An already sorted array.\n * @param element - The element to be inserted.\n * @param comparator - Comparator to determine the order for the elements.\n */\nfunction sortedInsert(array, element, comparator) {\n    let low = 0;\n    let high = array.length - 1;\n    let destination = -1; // if it doesn't change, we insert at position 0 (array is empty)\n    while (low < high) {\n        const mid = Math.floor((low + high) / 2);\n        const comparison = comparator(element, array[mid]);\n        if (comparison === 0) {\n            destination = mid + 1; // we currently don't care in which order items are sorted which have the same \"order key\"\n            break;\n        }\n        if (comparison < 0) { // meaning element < array[mid]\n            high = mid - 1;\n        }\n        else { // meaning element > array[mid]\n            low = mid + 1;\n        }\n    }\n    if (array.length === 0) {\n        destination = 0;\n    }\n    else if (destination < 0) {\n        if (comparator(element, array[low]) > 0) {\n            destination = low + 1;\n        }\n        else {\n            destination = low;\n        }\n    }\n    // abuse splice method to insert at destination\n    array.splice(destination, 0, element);\n}\nexports.sortedInsert = sortedInsert;\n//# sourceMappingURL=sorted-array.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.runTiebreaking = exports.TiebreakingResult = exports.rrComparator = void 0;\nfunction rrComparator(recordA, recordB) {\n    if (recordA.class !== recordB.class) {\n        return recordA.class - recordB.class;\n    }\n    if (recordA.type !== recordB.type) {\n        return recordA.type - recordB.type;\n    }\n    // now follows a raw comparison of the binary data\n    const aData = recordA.getRawData();\n    const bData = recordB.getRawData();\n    const maxLength = Math.max(aData.length, bData.length); // get the biggest length\n    for (let i = 0; i < maxLength; i++) {\n        if (i >= aData.length && i < bData.length) { // a ran out of data and b still holds data\n            return -1;\n        }\n        else if (i >= bData.length && i < aData.length) { // b ran out of data and a still hold data\n            return 1;\n        }\n        const aByte = aData.readUInt8(i);\n        const bByte = bData.readUInt8(i);\n        if (aByte !== bByte) {\n            return aByte < bByte ? -1 : 1;\n        }\n    }\n    // if we reach here we have a tie. both records represent the SAME data.\n    return 0;\n}\nexports.rrComparator = rrComparator;\nvar TiebreakingResult;\n(function (TiebreakingResult) {\n    /**\n     * The opponent is considered the winner\n     */\n    TiebreakingResult[TiebreakingResult[\"OPPONENT\"] = -1] = \"OPPONENT\";\n    /**\n     * Both try to expose the exact same data\n     */\n    TiebreakingResult[TiebreakingResult[\"TIE\"] = 0] = \"TIE\";\n    /**\n     * The host is considered the winner\n     */\n    TiebreakingResult[TiebreakingResult[\"HOST\"] = 1] = \"HOST\";\n})(TiebreakingResult || (exports.TiebreakingResult = TiebreakingResult = {}));\n/**\n * Runs the tiebreaking algorithm to resolve the race condition of simultaneous probing.\n * The input sets MUST already be sorted.\n *\n * @param {ResourceRecord[]} host - sorted list of records the host wants to publish\n * @param {ResourceRecord[]} opponent - sorted list of records the opponent wants to publish\n * @returns the result {@see TiebreakingResult} of the tiebreaking algorithm\n */\nfunction runTiebreaking(host, opponent) {\n    const maxLength = Math.max(host.length, opponent.length);\n    for (let i = 0; i < maxLength; i++) {\n        if (i >= host.length && i < opponent.length) { // host runs out of records and opponent still has some\n            return -1 /* TiebreakingResult.OPPONENT */; // opponent wins\n        }\n        else if (i >= opponent.length && i < host.length) { // opponent runs out of records and host still has some\n            return 1 /* TiebreakingResult.HOST */; // host wins\n        }\n        const recordComparison = rrComparator(host[i], opponent[i]);\n        if (recordComparison !== 0) {\n            return recordComparison;\n        }\n    }\n    return 0 /* TiebreakingResult.TIE */; // they expose the exact same data\n}\nexports.runTiebreaking = runTiebreaking;\n//# sourceMappingURL=tiebreaking.js.map","// dbus.freedesktop.org/doc/dbus-specification.html\n\nconst EventEmitter = require('events').EventEmitter;\nconst net = require('net');\n\nconst constants = require('./lib/constants');\nconst message = require('./lib/message');\nconst clientHandshake = require('./lib/handshake');\nconst serverHandshake = require('./lib/server-handshake');\nconst MessageBus = require('./lib/bus');\nconst server = require('./lib/server');\n\nfunction createStream(opts) {\n  if (opts.stream) return opts.stream;\n  var host = opts.host;\n  var port = opts.port;\n  var socket = opts.socket;\n  if (socket) return net.createConnection(socket);\n  if (port) return net.createConnection(port, host);\n\n  var busAddress = opts.busAddress || process.env.DBUS_SESSION_BUS_ADDRESS;\n  if (!busAddress) throw new Error('unknown bus address');\n\n  var addresses = busAddress.split(';');\n  for (var i = 0; i < addresses.length; ++i) {\n    var address = addresses[i];\n    var familyParams = address.split(':');\n    var family = familyParams[0];\n    var params = {};\n    familyParams[1].split(',').map(function (p) {\n      var keyVal = p.split('=');\n      params[keyVal[0]] = keyVal[1];\n    });\n\n    try {\n      switch (family.toLowerCase()) {\n        case 'tcp':\n          host = params.host || 'localhost';\n          port = params.port;\n          return net.createConnection(port, host);\n        case 'unix':\n          if (params.socket) return net.createConnection(params.socket);\n          if (params.abstract) {\n            var abs = require('abstract-socket');\n            return abs.connect('\\u0000' + params.abstract);\n          }\n          if (params.path) return net.createConnection(params.path);\n          throw new Error(\n            \"not enough parameters for 'unix' connection - you need to specify 'socket' or 'abstract' or 'path' parameter\"\n          );\n        case 'unixexec':\n          var eventStream = require('event-stream');\n          var spawn = require('child_process').spawn;\n          var args = [];\n          for (var n = 1; params['arg' + n]; n++) args.push(params['arg' + n]);\n          var child = spawn(params.path, args);\n\n          return eventStream.duplex(child.stdin, child.stdout);\n        default:\n          throw new Error('unknown address type:' + family);\n      }\n    } catch (e) {\n      if (i < addresses.length - 1) {\n        console.warn(e.message);\n        continue;\n      } else {\n        throw e;\n      }\n    }\n  }\n}\n\nfunction createConnection(opts) {\n  var self = new EventEmitter();\n  if (!opts) opts = {};\n  var stream = (self.stream = createStream(opts));\n  stream.setNoDelay();\n\n  stream.on('error', function (err) {\n    // forward network and stream errors\n    self.emit('error', err);\n  });\n\n  stream.on('end', function () {\n    self.emit('end');\n    self.message = function () {\n      console.warn(\"Didn't write bytes to closed stream\");\n    };\n  });\n\n  self.end = function () {\n    stream.end();\n    return self;\n  };\n\n  var handshake = opts.server ? serverHandshake : clientHandshake;\n  handshake(stream, opts, function (error, guid) {\n    if (error) {\n      return self.emit('error', error);\n    }\n    self.guid = guid;\n    self.emit('connect');\n    message.unmarshalMessages(\n      stream,\n      function (message) {\n        self.emit('message', message);\n      },\n      opts\n    );\n  });\n\n  self._messages = [];\n\n  // pre-connect version, buffers all messages. replaced after connect\n  self.message = function (msg) {\n    self._messages.push(msg);\n  };\n\n  self.once('connect', function () {\n    self.state = 'connected';\n    for (var i = 0; i < self._messages.length; ++i) {\n      stream.write(message.marshall(self._messages[i]));\n    }\n    self._messages.length = 0;\n\n    // no need to buffer once connected\n    self.message = function (msg) {\n      stream.write(message.marshall(msg));\n    };\n  });\n\n  return self;\n}\n\nmodule.exports.createClient = function (params) {\n  var connection = createConnection(params || {});\n  return new MessageBus(connection, params || {});\n};\n\nmodule.exports.systemBus = function () {\n  return module.exports.createClient({\n    busAddress:\n      process.env.DBUS_SYSTEM_BUS_ADDRESS ||\n      'unix:path=/var/run/dbus/system_bus_socket'\n  });\n};\n\nmodule.exports.sessionBus = function (opts) {\n  return module.exports.createClient(opts);\n};\n\nmodule.exports.messageType = constants.messageType;\nmodule.exports.createConnection = createConnection;\n\nmodule.exports.createServer = server.createServer;\n","const Buffer = require('safe-buffer').Buffer;\n\nfunction align(ps, n) {\n  var pad = n - (ps._offset % n);\n  if (pad === 0 || pad === n) return;\n  // TODO: write8(0) in a loop (3 to 7 times here) could be more efficient\n  var padBuff = Buffer.alloc(pad);\n  ps.put(Buffer.from(padBuff));\n  ps._offset += pad;\n}\n\nexports.align = align;\n","const EventEmitter = require('events').EventEmitter;\nconst constants = require('./constants');\nconst stdDbusIfaces = require('./stdifaces');\nconst introspect = require('./introspect').introspectBus;\n\nmodule.exports = function bus(conn, opts) {\n  if (!(this instanceof bus)) {\n    return new bus(conn);\n  }\n  if (!opts) opts = {};\n\n  var self = this;\n  this.connection = conn;\n  this.serial = 1;\n  this.cookies = {}; // TODO: rename to methodReturnHandlers\n  this.methodCallHandlers = {};\n  this.signals = new EventEmitter();\n  this.exportedObjects = {};\n\n  this.invoke = function (msg, callback) {\n    if (!msg.type) msg.type = constants.messageType.methodCall;\n    msg.serial = self.serial++;\n    this.cookies[msg.serial] = callback;\n    self.connection.message(msg);\n  };\n\n  this.invokeDbus = function (msg, callback) {\n    if (!msg.path) msg.path = '/org/freedesktop/DBus';\n    if (!msg.destination) msg.destination = 'org.freedesktop.DBus';\n    if (!msg['interface']) msg['interface'] = 'org.freedesktop.DBus';\n    self.invoke(msg, callback);\n  };\n\n  this.mangle = function (path, iface, member) {\n    var obj = {};\n    if (typeof path === 'object') {\n      // handle one argumant case mangle(msg)\n      obj.path = path.path;\n      obj['interface'] = path['interface'];\n      obj.member = path.member;\n    } else {\n      obj.path = path;\n      obj['interface'] = iface;\n      obj.member = member;\n    }\n    return JSON.stringify(obj);\n  };\n\n  this.sendSignal = function (path, iface, name, signature, args) {\n    var signalMsg = {\n      type: constants.messageType.signal,\n      serial: self.serial++,\n      interface: iface,\n      path: path,\n      member: name\n    };\n    if (signature) {\n      signalMsg.signature = signature;\n      signalMsg.body = args;\n    }\n    self.connection.message(signalMsg);\n  };\n\n  // Warning: errorName must respect the same rules as interface names (must contain a dot)\n  this.sendError = function (msg, errorName, errorText) {\n    var reply = {\n      type: constants.messageType.error,\n      serial: self.serial++,\n      replySerial: msg.serial,\n      destination: msg.sender,\n      errorName: errorName,\n      signature: 's',\n      body: [errorText]\n    };\n    this.connection.message(reply);\n  };\n\n  this.sendReply = function (msg, signature, body) {\n    var reply = {\n      type: constants.messageType.methodReturn,\n      serial: self.serial++,\n      replySerial: msg.serial,\n      destination: msg.sender,\n      signature: signature,\n      body: body\n    };\n    this.connection.message(reply);\n  };\n\n  // route reply/error\n  this.connection.on('message', function (msg) {\n    function invoke(impl, func, resultSignature) {\n      Promise.resolve()\n        .then(function () {\n          return func.apply(impl, (msg.body || []).concat(msg));\n        })\n        .then(\n          function (methodReturnResult) {\n            var methodReturnReply = {\n              type: constants.messageType.methodReturn,\n              serial: self.serial++,\n              destination: msg.sender,\n              replySerial: msg.serial\n            };\n            if (methodReturnResult !== null) {\n              methodReturnReply.signature = resultSignature;\n              methodReturnReply.body = [methodReturnResult];\n            }\n            self.connection.message(methodReturnReply);\n          },\n          function (e) {\n            self.sendError(\n              msg,\n              e.dbusName || 'org.freedesktop.DBus.Error.Failed',\n              e.message || ''\n            );\n          }\n        );\n    }\n\n    var handler;\n    if (\n      msg.type === constants.messageType.methodReturn ||\n      msg.type === constants.messageType.error\n    ) {\n      handler = self.cookies[msg.replySerial];\n      if (handler) {\n        delete self.cookies[msg.replySerial];\n        var props = {\n          connection: self.connection,\n          bus: self,\n          message: msg,\n          signature: msg.signature\n        };\n        var args = msg.body || [];\n        if (msg.type === constants.messageType.methodReturn) {\n          args = [null].concat(args); // first argument - no errors, null\n          handler.apply(props, args); // body as array of arguments\n        } else {\n          handler.call(props, { name: msg.errorName, message: args }); // body as first argument\n        }\n      }\n    } else if (msg.type === constants.messageType.signal) {\n      self.signals.emit(self.mangle(msg), msg.body, msg.signature);\n    } else {\n      // methodCall\n\n      if (stdDbusIfaces(msg, self)) return;\n\n      // exported interfaces handlers\n      var obj, iface, impl;\n      if ((obj = self.exportedObjects[msg.path])) {\n        if ((iface = obj[msg['interface']])) {\n          // now we are ready to serve msg.member\n          impl = iface[1];\n          var func = impl[msg.member];\n          if (!func) {\n            self.sendError(\n              msg,\n              'org.freedesktop.DBus.Error.UnknownMethod',\n              `Method \"${msg.member}\" on interface \"${msg.interface}\" doesn't exist`\n            );\n            return;\n          }\n          // TODO safety check here\n          var resultSignature = iface[0].methods[msg.member][1];\n          invoke(impl, func, resultSignature);\n          return;\n        } else {\n          console.error(`Interface ${msg['interface']} is not supported`);\n          // TODO: respond with standard dbus error\n        }\n      }\n      // setMethodCall handlers\n      handler = self.methodCallHandlers[self.mangle(msg)];\n      if (handler) {\n        invoke(null, handler[0], handler[1]);\n      } else {\n        self.sendError(\n          msg,\n          'org.freedesktop.DBus.Error.UnknownService',\n          'Uh oh oh'\n        );\n      }\n    }\n  });\n\n  this.setMethodCallHandler = function (objectPath, iface, member, handler) {\n    var key = self.mangle(objectPath, iface, member);\n    self.methodCallHandlers[key] = handler;\n  };\n\n  this.exportInterface = function (obj, path, iface) {\n    var entry;\n    if (!self.exportedObjects[path]) {\n      entry = self.exportedObjects[path] = {};\n    } else {\n      entry = self.exportedObjects[path];\n    }\n    entry[iface.name] = [iface, obj];\n    // monkey-patch obj.emit()\n    if (typeof obj.emit === 'function') {\n      var oldEmit = obj.emit;\n      obj.emit = function () {\n        var args = Array.prototype.slice.apply(arguments);\n        var signalName = args[0];\n        if (!signalName) throw new Error('Trying to emit undefined signa');\n\n        //send signal to bus\n        var signal;\n        if (iface.signals && iface.signals[signalName]) {\n          signal = iface.signals[signalName];\n          var signalMsg = {\n            type: constants.messageType.signal,\n            serial: self.serial++,\n            interface: iface.name,\n            path: path,\n            member: signalName\n          };\n          if (signal[0]) {\n            signalMsg.signature = signal[0];\n            signalMsg.body = args.slice(1);\n          }\n          self.connection.message(signalMsg);\n          self.serial++;\n        }\n        // note that local emit is likely to be called before signal arrives\n        // to remote subscriber\n        oldEmit.apply(obj, args);\n      };\n    }\n    // TODO: emit ObjectManager's InterfaceAdded\n  };\n\n  // register name\n  if (opts.direct !== true) {\n    this.invokeDbus({ member: 'Hello' }, function (err, name) {\n      if (err) throw new Error(err);\n      self.name = name;\n    });\n  } else {\n    self.name = null;\n  }\n\n  function DBusObject(name, service) {\n    this.name = name;\n    this.service = service;\n    this.as = function (name) {\n      return this.proxy[name];\n    };\n  }\n\n  function DBusService(name, bus) {\n    this.name = name;\n    this.bus = bus;\n    this.getObject = function (name, callback) {\n      if (name === undefined)\n        return callback(new Error('Object name is null or undefined'));\n      var obj = new DBusObject(name, this);\n      introspect(obj, function (err, ifaces, nodes) {\n        if (err) return callback(err);\n        obj.proxy = ifaces;\n        obj.nodes = nodes;\n        callback(null, obj);\n      });\n    };\n\n    this.getInterface = function (objName, ifaceName, callback) {\n      this.getObject(objName, function (err, obj) {\n        if (err) return callback(err);\n        callback(null, obj.as(ifaceName));\n      });\n    };\n  }\n\n  this.getService = function (name) {\n    return new DBusService(name, this);\n  };\n\n  this.getObject = function (path, name, callback) {\n    var service = this.getService(path);\n    return service.getObject(name, callback);\n  };\n\n  this.getInterface = function (path, objname, name, callback) {\n    return this.getObject(path, objname, function (err, obj) {\n      if (err) return callback(err);\n      callback(null, obj.as(name));\n    });\n  };\n\n  // TODO: refactor\n\n  // bus meta functions\n  this.addMatch = function (match, callback) {\n    this.invokeDbus(\n      { member: 'AddMatch', signature: 's', body: [match] },\n      callback\n    );\n  };\n\n  this.removeMatch = function (match, callback) {\n    this.invokeDbus(\n      { member: 'RemoveMatch', signature: 's', body: [match] },\n      callback\n    );\n  };\n\n  this.getId = function (callback) {\n    this.invokeDbus({ member: 'GetId' }, callback);\n  };\n\n  this.requestName = function (name, flags, callback) {\n    this.invokeDbus(\n      { member: 'RequestName', signature: 'su', body: [name, flags] },\n      function (err, name) {\n        if (callback) callback(err, name);\n      }\n    );\n  };\n\n  this.releaseName = function (name, callback) {\n    this.invokeDbus(\n      { member: 'ReleaseName', signature: 's', body: [name] },\n      callback\n    );\n  };\n\n  this.listNames = function (callback) {\n    this.invokeDbus({ member: 'ListNames' }, callback);\n  };\n\n  this.listActivatableNames = function (callback) {\n    this.invokeDbus({ member: 'ListActivatableNames' }, callback);\n  };\n\n  this.updateActivationEnvironment = function (env, callback) {\n    this.invokeDbus(\n      {\n        member: 'UpdateActivationEnvironment',\n        signature: 'a{ss}',\n        body: [env]\n      },\n      callback\n    );\n  };\n\n  this.startServiceByName = function (name, flags, callback) {\n    this.invokeDbus(\n      { member: 'StartServiceByName', signature: 'su', body: [name, flags] },\n      callback\n    );\n  };\n\n  this.getConnectionUnixUser = function (name, callback) {\n    this.invokeDbus(\n      { member: 'GetConnectionUnixUser', signature: 's', body: [name] },\n      callback\n    );\n  };\n\n  this.getConnectionUnixProcessId = function (name, callback) {\n    this.invokeDbus(\n      { member: 'GetConnectionUnixProcessID', signature: 's', body: [name] },\n      callback\n    );\n  };\n\n  this.getNameOwner = function (name, callback) {\n    this.invokeDbus(\n      { member: 'GetNameOwner', signature: 's', body: [name] },\n      callback\n    );\n  };\n\n  this.nameHasOwner = function (name, callback) {\n    this.invokeDbus(\n      { member: 'NameHasOwner', signature: 's', body: [name] },\n      callback\n    );\n  };\n};\n","module.exports = {\n  messageType: {\n    invalid: 0,\n    methodCall: 1,\n    methodReturn: 2,\n    error: 3,\n    signal: 4\n  },\n\n  headerTypeName: [\n    null,\n    'path',\n    'interface',\n    'member',\n    'errorName',\n    'replySerial',\n    'destination',\n    'sender',\n    'signature'\n  ],\n\n  // TODO: merge to single hash? e.g path -> [1, 'o']\n  fieldSignature: {\n    path: 'o',\n    interface: 's',\n    member: 's',\n    errorName: 's',\n    replySerial: 'u',\n    destination: 's',\n    sender: 's',\n    signature: 'g'\n  },\n  headerTypeId: {\n    path: 1,\n    interface: 2,\n    member: 3,\n    errorName: 4,\n    replySerial: 5,\n    destination: 6,\n    sender: 7,\n    signature: 8\n  },\n  protocolVersion: 1,\n  flags: {\n    noReplyExpected: 1,\n    noAutoStart: 2\n  },\n  endianness: {\n    le: 108,\n    be: 66\n  },\n  messageSignature: 'yyyyuua(yv)',\n  defaultAuthMethods: ['EXTERNAL', 'DBUS_COOKIE_SHA1', 'ANONYMOUS']\n};\n","const Long = require('@homebridge/long');\nconst parseSignature = require('./signature');\n\n// Buffer + position + global start position ( used in alignment )\nfunction DBusBuffer(buffer, startPos, options) {\n  if (typeof options !== 'object') {\n    options = { ayBuffer: true, ReturnLongjs: false };\n  } else if (options.ayBuffer === undefined) {\n    // default settings object\n    options.ayBuffer = true; // enforce truthy default props\n  }\n  this.options = options;\n  this.buffer = buffer;\n  (this.startPos = startPos ? startPos : 0), (this.pos = 0);\n}\n\nDBusBuffer.prototype.align = function (power) {\n  var allbits = (1 << power) - 1;\n  var paddedOffset = ((this.pos + this.startPos + allbits) >> power) << power;\n  this.pos = paddedOffset - this.startPos;\n};\n\nDBusBuffer.prototype.readInt8 = function () {\n  this.pos++;\n  return this.buffer[this.pos - 1];\n};\n\nDBusBuffer.prototype.readSInt16 = function () {\n  this.align(1);\n  var res = this.buffer.readInt16LE(this.pos);\n  this.pos += 2;\n  return res;\n};\n\nDBusBuffer.prototype.readInt16 = function () {\n  this.align(1);\n  var res = this.buffer.readUInt16LE(this.pos);\n  this.pos += 2;\n  return res;\n};\n\nDBusBuffer.prototype.readSInt32 = function () {\n  this.align(2);\n  var res = this.buffer.readInt32LE(this.pos);\n  this.pos += 4;\n  return res;\n};\n\nDBusBuffer.prototype.readInt32 = function () {\n  this.align(2);\n  var res = this.buffer.readUInt32LE(this.pos);\n  this.pos += 4;\n  return res;\n};\n\nDBusBuffer.prototype.readDouble = function () {\n  this.align(3);\n  var res = this.buffer.readDoubleLE(this.pos);\n  this.pos += 8;\n  return res;\n};\n\nDBusBuffer.prototype.readString = function (len) {\n  if (len === 0) {\n    this.pos++;\n    return '';\n  }\n  var res = this.buffer.toString('utf8', this.pos, this.pos + len);\n  this.pos += len + 1; // dbus strings are always zero-terminated ('s' and 'g' types)\n  return res;\n};\n\nDBusBuffer.prototype.readTree = function readTree(tree) {\n  switch (tree.type) {\n    case '(':\n    case '{':\n    case 'r':\n      this.align(3);\n      return this.readStruct(tree.child);\n    case 'a':\n      if (!tree.child || tree.child.length !== 1)\n        throw new Error('Incorrect array element signature');\n      var arrayBlobLength = this.readInt32();\n      return this.readArray(tree.child[0], arrayBlobLength);\n    case 'v':\n      return this.readVariant();\n    default:\n      return this.readSimpleType(tree.type);\n  }\n};\n\nDBusBuffer.prototype.read = function read(signature) {\n  var tree = parseSignature(signature);\n  return this.readStruct(tree);\n};\n\nDBusBuffer.prototype.readVariant = function readVariant() {\n  var signature = this.readSimpleType('g');\n  var tree = parseSignature(signature);\n  return [tree, this.readStruct(tree)];\n};\n\nDBusBuffer.prototype.readStruct = function readStruct(struct) {\n  var result = [];\n  for (var i = 0; i < struct.length; ++i) {\n    result.push(this.readTree(struct[i]));\n  }\n  return result;\n};\n\nDBusBuffer.prototype.readArray = function readArray(eleType, arrayBlobSize) {\n  var result;\n  var start = this.pos;\n\n  // special case: treat ay as Buffer\n  if (eleType.type === 'y' && this.options.ayBuffer) {\n    this.pos += arrayBlobSize;\n    return this.buffer.slice(start, this.pos);\n  }\n\n  // end of array is start of first element + array size\n  // we need to add 4 bytes if not on 8-byte boundary\n  // and array element needs 8 byte alignment\n  if (['x', 't', 'd', '{', '(', 'r'].indexOf(eleType.type) !== -1)\n    this.align(3);\n  var end = this.pos + arrayBlobSize;\n  result = [];\n  while (this.pos < end) result.push(this.readTree(eleType));\n  return result;\n};\n\nDBusBuffer.prototype.readSimpleType = function readSimpleType(t) {\n  var data, len, word0, word1;\n  switch (t) {\n    case 'y':\n      return this.readInt8();\n    case 'b':\n      // TODO: spec says that true is strictly 1 and false is strictly 0\n      // shold we error (or warn?) when non 01 values?\n      return this.readInt32() ? true : false;\n    case 'n':\n      return this.readSInt16();\n    case 'q':\n      return this.readInt16();\n    case 'u':\n      return this.readInt32();\n    case 'i':\n      return this.readSInt32();\n    case 'g':\n      len = this.readInt8();\n      return this.readString(len);\n    case 's':\n    case 'o':\n      len = this.readInt32();\n      return this.readString(len);\n    // TODO: validate object path here\n    //if (t === 'o' && !isValidObjectPath(str))\n    //  throw new Error('string is not a valid object path'));\n    case 'x':\n      //signed\n      this.align(3);\n      word0 = this.readInt32();\n      word1 = this.readInt32();\n      data = Long.fromBits(word0, word1, false);\n      if (this.options.ReturnLongjs) return data;\n      return data.toNumber(); // convert to number (good up to 53 bits)\n    case 't':\n      //unsigned\n      this.align(3);\n      word0 = this.readInt32();\n      word1 = this.readInt32();\n      data = Long.fromBits(word0, word1, true);\n      if (this.options.ReturnLongjs) return data;\n      return data.toNumber(); // convert to number (good up to 53 bits)\n    case 'd':\n      return this.readDouble();\n    default:\n      throw new Error(`Unsupported type: ${t}`);\n  }\n};\n\nmodule.exports = DBusBuffer;\n","const Buffer = require('safe-buffer').Buffer;\nconst crypto = require('crypto');\nconst fs = require('fs');\nconst path = require('path');\n\nconst constants = require('./constants');\nconst readLine = require('./readline');\n\nfunction sha1(input) {\n  var shasum = crypto.createHash('sha1');\n  shasum.update(input);\n  return shasum.digest('hex');\n}\n\nfunction getUserHome() {\n  return process.env[process.platform.match(/$win/) ? 'USERPROFILE' : 'HOME'];\n}\n\nfunction getCookie(context, id, cb) {\n  // http://dbus.freedesktop.org/doc/dbus-specification.html#auth-mechanisms-sha\n  var dirname = path.join(getUserHome(), '.dbus-keyrings');\n  // > There is a default context, \"org_freedesktop_general\" that's used by servers that do not specify otherwise.\n  if (context.length === 0) context = 'org_freedesktop_general';\n\n  var filename = path.join(dirname, context);\n  // check it's not writable by others and readable by user\n  fs.stat(dirname, function (err, stat) {\n    if (err) return cb(err);\n    if (stat.mode & 0o22)\n      return cb(\n        new Error(\n          'User keyrings directory is writeable by other users. Aborting authentication'\n        )\n      );\n    // eslint-disable-next-line no-prototype-builtins\n    if (process.hasOwnProperty('getuid') && stat.uid !== process.getuid())\n      return cb(\n        new Error(\n          'Keyrings directory is not owned by the current user. Aborting authentication!'\n        )\n      );\n    fs.readFile(filename, 'ascii', function (err, keyrings) {\n      if (err) return cb(err);\n      var lines = keyrings.split('\\n');\n      for (var l = 0; l < lines.length; ++l) {\n        var data = lines[l].split(' ');\n        if (id === data[0]) return cb(null, data[2]);\n      }\n      return cb(new Error('cookie not found'));\n    });\n  });\n}\n\nfunction hexlify(input) {\n  return Buffer.from(input.toString(), 'ascii').toString('hex');\n}\n\nmodule.exports = function auth(stream, opts, cb) {\n  // filter used to make a copy so we don't accidently change opts data\n  var authMethods;\n  if (opts.authMethods) {\n    authMethods = opts.authMethods;\n  } else {\n    authMethods = constants.defaultAuthMethods;\n  }\n  stream.write('\\0');\n  tryAuth(stream, authMethods.slice(), cb);\n};\n\nfunction tryAuth(stream, methods, cb) {\n  if (methods.length === 0) {\n    return cb(new Error('No authentication methods left to try'));\n  }\n\n  var authMethod = methods.shift();\n  // eslint-disable-next-line no-prototype-builtins\n  var uid = process.hasOwnProperty('getuid') ? process.getuid() : 0;\n  var id = hexlify(uid);\n\n  function beginOrNextAuth() {\n    readLine(stream, function (line) {\n      var ok = line.toString('ascii').match(/^([A-Za-z]+) (.*)/);\n      if (ok && ok[1] === 'OK') {\n        stream.write('BEGIN\\r\\n');\n        return cb(null, ok[2]); // ok[2] = guid. Do we need it?\n      } else {\n        // TODO: parse error!\n        if (!methods.empty) {\n          tryAuth(stream, methods, cb);\n        } else {\n          return cb(line);\n        }\n      }\n    });\n  }\n\n  switch (authMethod) {\n    case 'EXTERNAL':\n      stream.write(`AUTH ${authMethod} ${id}\\r\\n`);\n      beginOrNextAuth();\n      break;\n    case 'DBUS_COOKIE_SHA1':\n      stream.write(`AUTH ${authMethod} ${id}\\r\\n`);\n      readLine(stream, function (line) {\n        var data = Buffer.from(line.toString().split(' ')[1].trim(), 'hex')\n          .toString()\n          .split(' ');\n        var cookieContext = data[0];\n        var cookieId = data[1];\n        var serverChallenge = data[2];\n        // any random 16 bytes should work, sha1(rnd) to make it simplier\n        var clientChallenge = crypto.randomBytes(16).toString('hex');\n        getCookie(cookieContext, cookieId, function (err, cookie) {\n          if (err) return cb(err);\n          var response = sha1(\n            [serverChallenge, clientChallenge, cookie].join(':')\n          );\n          var reply = hexlify(clientChallenge + response);\n          stream.write(`DATA ${reply}\\r\\n`);\n          beginOrNextAuth();\n        });\n      });\n      break;\n    case 'ANONYMOUS':\n      stream.write('AUTH ANONYMOUS \\r\\n');\n      beginOrNextAuth();\n      break;\n    default:\n      console.error(`Unsupported auth method: ${authMethod}`);\n      beginOrNextAuth();\n      break;\n  }\n}\n","const xml2js = require('xml2js');\n\nmodule.exports.introspectBus = function (obj, callback) {\n  var bus = obj.service.bus;\n  bus.invoke(\n    {\n      destination: obj.service.name,\n      path: obj.name,\n      interface: 'org.freedesktop.DBus.Introspectable',\n      member: 'Introspect'\n    },\n    function (err, xml) {\n      module.exports.processXML(err, xml, obj, callback);\n    }\n  );\n};\n\nmodule.exports.processXML = function (err, xml, obj, callback) {\n  if (err) return callback(err);\n  var parser = new xml2js.Parser();\n  parser.parseString(xml, function (err, result) {\n    if (err) return callback(err);\n    if (!result.node) throw new Error('No root XML node');\n    result = result.node; // unwrap the root node\n    // If no interface, try first sub node?\n    if (!result.interface) {\n      if (result.node && result.node.length > 0 && result.node[0]['$']) {\n        var subObj = Object.assign(obj, {});\n        if (subObj.name.slice(-1) !== '/') subObj.name += '/';\n        subObj.name += result.node[0]['$'].name;\n        return module.exports.introspectBus(subObj, callback);\n      }\n      return callback(new Error('No such interface found'));\n    }\n    var proxy = {};\n    var nodes = [];\n    var ifaceName, method, property, iface, arg, signature, currentIface;\n    var ifaces = result['interface'];\n    var xmlnodes = result['node'] || [];\n\n    for (var n = 1; n < xmlnodes.length; ++n) {\n      // Start at 1 because we want to skip the root node\n      nodes.push(xmlnodes[n]['$']['name']);\n    }\n\n    for (var i = 0; i < ifaces.length; ++i) {\n      iface = ifaces[i];\n      ifaceName = iface['$'].name;\n      currentIface = proxy[ifaceName] = new DBusInterface(obj, ifaceName);\n\n      for (var m = 0; iface.method && m < iface.method.length; ++m) {\n        method = iface.method[m];\n        signature = '';\n        var methodName = method['$'].name;\n        for (var a = 0; method.arg && a < method.arg.length; ++a) {\n          arg = method.arg[a]['$'];\n          if (arg.direction === 'in') signature += arg.type;\n        }\n        // add method\n        currentIface.$createMethod(methodName, signature);\n      }\n      for (var p = 0; iface.property && p < iface.property.length; ++p) {\n        property = iface.property[p];\n        currentIface.$createProp(\n          property['$'].name,\n          property['$'].type,\n          property['$'].access\n        );\n      }\n      // TODO: introspect signals\n    }\n    callback(null, proxy, nodes);\n  });\n};\n\nfunction DBusInterface(parent_obj, ifname) {\n  // Since methods and props presently get added directly to the object, to avoid collision with existing names we must use $ naming convention as $ is invalid for dbus member names\n  // https://dbus.freedesktop.org/doc/dbus-specification.html#message-protocol-names\n  this.$parent = parent_obj; // parent DbusObject\n  this.$name = ifname; // string interface name\n  this.$methods = {}; // dictionary of methods (exposed for test), should we just store signature or use object to store more info?\n  //this.$signals = {};\n  this.$properties = {};\n  this.$callbacks = [];\n  this.$sigHandlers = [];\n}\nDBusInterface.prototype.$getSigHandler = function (callback) {\n  var index;\n  if ((index = this.$callbacks.indexOf(callback)) === -1) {\n    index = this.$callbacks.push(callback) - 1;\n    this.$sigHandlers[index] = function (messageBody) {\n      callback.apply(null, messageBody);\n    };\n  }\n  return this.$sigHandlers[index];\n};\nDBusInterface.prototype.addListener = DBusInterface.prototype.on = function (\n  signame,\n  callback\n) {\n  // http://dbus.freedesktop.org/doc/api/html/group__DBusBus.html#ga4eb6401ba014da3dbe3dc4e2a8e5b3ef\n  // An example is \"type='signal',sender='org.freedesktop.DBus', interface='org.freedesktop.DBus',member='Foo', path='/bar/foo',destination=':452345.34'\" ...\n  var bus = this.$parent.service.bus;\n  var signalFullName = bus.mangle(this.$parent.name, this.$name, signame);\n  if (!bus.signals.listeners(signalFullName).length) {\n    // This is the first time, so call addMatch\n    var match = getMatchRule(this.$parent.name, this.$name, signame);\n    bus.addMatch(\n      match,\n      function (err) {\n        if (err) throw new Error(err);\n        bus.signals.on(signalFullName, this.$getSigHandler(callback));\n      }.bind(this)\n    );\n  } else {\n    // The match is already there, just add event listener\n    bus.signals.on(signalFullName, this.$getSigHandler(callback));\n  }\n};\nDBusInterface.prototype.removeListener = DBusInterface.prototype.off =\n  function (signame, callback) {\n    var bus = this.$parent.service.bus;\n    var signalFullName = bus.mangle(this.$parent.name, this.$name, signame);\n    bus.signals.removeListener(signalFullName, this.$getSigHandler(callback));\n    if (!bus.signals.listeners(signalFullName).length) {\n      // There is no event handlers for this match\n      var match = getMatchRule(this.$parent.name, this.$name, signame);\n      bus.removeMatch(\n        match,\n        function (err) {\n          if (err) throw new Error(err);\n          // Now it is safe to empty these arrays\n          this.$callbacks.length = 0;\n          this.$sigHandlers.length = 0;\n        }.bind(this)\n      );\n    }\n  };\nDBusInterface.prototype.$createMethod = function (mName, signature) {\n  this.$methods[mName] = signature;\n  this[mName] = function () {\n    this.$callMethod(mName, arguments);\n  };\n};\nDBusInterface.prototype.$callMethod = function (mName, args) {\n  var bus = this.$parent.service.bus;\n  if (!Array.isArray(args)) args = Array.from(args); // Array.prototype.slice.apply(args)\n  var callback =\n    typeof args[args.length - 1] === 'function' ? args.pop() : function () {};\n  var msg = {\n    destination: this.$parent.service.name,\n    path: this.$parent.name,\n    interface: this.$name,\n    member: mName\n  };\n  if (this.$methods[mName] !== '') {\n    msg.signature = this.$methods[mName];\n    msg.body = args;\n  }\n  bus.invoke(msg, callback);\n};\nDBusInterface.prototype.$createProp = function (\n  propName,\n  propType,\n  propAccess\n) {\n  this.$properties[propName] = { type: propType, access: propAccess };\n  Object.defineProperty(this, propName, {\n    enumerable: true,\n    get: () => (callback) => this.$readProp(propName, callback),\n    set: function (val) {\n      this.$writeProp(propName, val);\n    }\n  });\n};\nDBusInterface.prototype.$readProp = function (propName, callback) {\n  var bus = this.$parent.service.bus;\n  bus.invoke(\n    {\n      destination: this.$parent.service.name,\n      path: this.$parent.name,\n      interface: 'org.freedesktop.DBus.Properties',\n      member: 'Get',\n      signature: 'ss',\n      body: [this.$name, propName]\n    },\n    function (err, val) {\n      if (err) {\n        callback(err);\n      } else {\n        var signature = val[0];\n        if (signature.length === 1) {\n          callback(err, val[1][0]);\n        } else {\n          callback(err, val[1]);\n        }\n      }\n    }\n  );\n};\nDBusInterface.prototype.$writeProp = function (propName, val) {\n  var bus = this.$parent.service.bus;\n  bus.invoke({\n    destination: this.$parent.service.name,\n    path: this.$parent.name,\n    interface: 'org.freedesktop.DBus.Properties',\n    member: 'Set',\n    signature: 'ssv',\n    body: [this.$name, propName, [this.$properties[propName].type, val]]\n  });\n};\n\nfunction getMatchRule(objName, ifName, signame) {\n  return `type='signal',path='${objName}',interface='${ifName}',member='${signame}'`;\n}\n","const assert = require('assert');\n\nconst parseSignature = require('./signature');\nconst put = require('@homebridge/put');\nconst Marshallers = require('./marshallers');\nconst align = require('./align').align;\n\nmodule.exports = function marshall(signature, data, offset) {\n  if (typeof offset === 'undefined') offset = 0;\n  var tree = parseSignature(signature);\n  if (!Array.isArray(data) || data.length !== tree.length) {\n    throw new Error(\n      `message body does not match message signature. Body:${JSON.stringify(\n        data\n      )}, signature:${signature}`\n    );\n  }\n  var putstream = put();\n  putstream._offset = offset;\n  var buf = writeStruct(putstream, tree, data).buffer();\n  return buf;\n};\n\n// TODO: serialise JS objects as a{sv}\n//function writeHash(ps, treeKey, treeVal, data) {\n//\n//}\n\nfunction writeStruct(ps, tree, data) {\n  if (tree.length !== data.length) {\n    throw new Error('Invalid struct data');\n  }\n  for (var i = 0; i < tree.length; ++i) {\n    write(ps, tree[i], data[i]);\n  }\n  return ps;\n}\n\nfunction write(ps, ele, data) {\n  switch (ele.type) {\n    case '(':\n    case '{':\n      align(ps, 8);\n      writeStruct(ps, ele.child, data);\n      break;\n    case 'a':\n      // array serialisation:\n      // length of array body aligned at 4 byte boundary\n      // (optional 4 bytes to align first body element on 8-byte boundary if element\n      // body\n      var arrPut = put();\n      arrPut._offset = ps._offset;\n      var _offset = arrPut._offset;\n      writeSimple(arrPut, 'u', 0); // array length placeholder\n      var lengthOffset = arrPut._offset - 4 - _offset;\n      // we need to alighn here because alignment is not included in array length\n      if (['x', 't', 'd', '{', '('].indexOf(ele.child[0].type) !== -1)\n        align(arrPut, 8);\n      var startOffset = arrPut._offset;\n      for (var i = 0; i < data.length; ++i)\n        write(arrPut, ele.child[0], data[i]);\n      var arrBuff = arrPut.buffer();\n      var length = arrPut._offset - startOffset;\n      // lengthOffset in the range 0 to 3 depending on number of align bytes padded _before_ arrayLength\n      arrBuff.writeUInt32LE(length, lengthOffset);\n      ps.put(arrBuff);\n      ps._offset += arrBuff.length;\n      break;\n    case 'v':\n      // TODO: allow serialisation of simple types as variants, e. g 123 -> ['u', 123], true -> ['b', 1], 'abc' -> ['s', 'abc']\n      assert.equal(data.length, 2, 'variant data should be [signature, data]');\n      var signatureEle = {\n        type: 'g',\n        child: []\n      };\n      write(ps, signatureEle, data[0]);\n      var tree = parseSignature(data[0]);\n      assert(tree.length === 1);\n      write(ps, tree[0], data[1]);\n      break;\n    default:\n      return writeSimple(ps, ele.type, data);\n  }\n}\n\nvar stringTypes = ['g', 'o', 's'];\n\nfunction writeSimple(ps, type, data) {\n  if (typeof data === 'undefined')\n    throw new Error(\n      \"Serialisation of JS 'undefined' type is not supported by d-bus\"\n    );\n  if (data === null)\n    throw new Error('Serialisation of null value is not supported by d-bus');\n\n  if (Buffer.isBuffer(data)) data = data.toString(); // encoding?\n  if (stringTypes.indexOf(type) !== -1 && typeof data !== 'string') {\n    throw new Error(\n      `Expected string or buffer argument, got ${JSON.stringify(\n        data\n      )} of type '${type}'`\n    );\n  }\n\n  var simpleMarshaller = Marshallers.MakeSimpleMarshaller(type);\n  simpleMarshaller.marshall(ps, data);\n  return ps;\n}\n","const Buffer = require('safe-buffer').Buffer;\nconst align = require('./align').align;\nconst parseSignature = require('../lib/signature');\nconst Long = require('@homebridge/long');\n/**\n * MakeSimpleMarshaller\n * @param signature - the signature of the data you want to check\n * @returns a simple marshaller with the \"check\" method\n *\n * check returns nothing - it only raises errors if the data is\n * invalid for the signature\n */\nvar MakeSimpleMarshaller = function (signature) {\n  var marshaller = {};\n  function checkValidString(data) {\n    if (typeof data !== 'string') {\n      throw new Error(`Data: ${data} was not of type string`);\n    } else if (data.indexOf('\\0') !== -1) {\n      throw new Error('String contains null byte');\n    }\n  }\n\n  function checkValidSignature(data) {\n    if (data.length > 0xff) {\n      throw new Error(\n        `Data: ${data} is too long for signature type (${data.length} > 255)`\n      );\n    }\n\n    var parenCount = 0;\n    for (var ii = 0; ii < data.length; ++ii) {\n      if (parenCount > 32) {\n        throw new Error(\n          `Maximum container type nesting exceeded in signature type:${data}`\n        );\n      }\n      switch (data[ii]) {\n        case '(':\n          ++parenCount;\n          break;\n        case ')':\n          --parenCount;\n          break;\n        default:\n          /* no-op */\n          break;\n      }\n    }\n    parseSignature(data);\n  }\n\n  switch (signature) {\n    case 'o':\n    // object path\n    // TODO: verify object path here?\n    case 's': // eslint-disable-line no-fallthrough\n      //STRING\n      marshaller.check = function (data) {\n        checkValidString(data);\n      };\n      marshaller.marshall = function (ps, data) {\n        this.check(data);\n        // utf8 string\n        align(ps, 4);\n        const buff = Buffer.from(data, 'utf8');\n        ps.word32le(buff.length).put(buff).word8(0);\n        ps._offset += 5 + buff.length;\n      };\n      break;\n    case 'g':\n      //SIGNATURE\n      marshaller.check = function (data) {\n        checkValidString(data);\n        checkValidSignature(data);\n      };\n      marshaller.marshall = function (ps, data) {\n        this.check(data);\n        // signature\n        const buff = Buffer.from(data, 'ascii');\n        ps.word8(data.length).put(buff).word8(0);\n        ps._offset += 2 + buff.length;\n      };\n      break;\n    case 'y':\n      //BYTE\n      marshaller.check = function (data) {\n        checkInteger(data);\n        checkRange(0x00, 0xff, data);\n      };\n      marshaller.marshall = function (ps, data) {\n        this.check(data);\n        ps.word8(data);\n        ps._offset++;\n      };\n      break;\n    case 'b':\n      //BOOLEAN\n      marshaller.check = function (data) {\n        checkBoolean(data);\n      };\n      marshaller.marshall = function (ps, data) {\n        this.check(data);\n        // booleans serialised as 0/1 unsigned 32 bit int\n        data = data ? 1 : 0;\n        align(ps, 4);\n        ps.word32le(data);\n        ps._offset += 4;\n      };\n      break;\n    case 'n':\n      //INT16\n      marshaller.check = function (data) {\n        checkInteger(data);\n        checkRange(-0x7fff - 1, 0x7fff, data);\n      };\n      marshaller.marshall = function (ps, data) {\n        this.check(data);\n        align(ps, 2);\n        const buff = Buffer.alloc(2);\n        buff.writeInt16LE(parseInt(data), 0);\n        ps.put(buff);\n        ps._offset += 2;\n      };\n      break;\n    case 'q':\n      //UINT16\n      marshaller.check = function (data) {\n        checkInteger(data);\n        checkRange(0, 0xffff, data);\n      };\n      marshaller.marshall = function (ps, data) {\n        this.check(data);\n        align(ps, 2);\n        ps.word16le(data);\n        ps._offset += 2;\n      };\n      break;\n    case 'i':\n      //INT32\n      marshaller.check = function (data) {\n        checkInteger(data);\n        checkRange(-0x7fffffff - 1, 0x7fffffff, data);\n      };\n      marshaller.marshall = function (ps, data) {\n        this.check(data);\n        align(ps, 4);\n        const buff = Buffer.alloc(4);\n        buff.writeInt32LE(parseInt(data), 0);\n        ps.put(buff);\n        ps._offset += 4;\n      };\n      break;\n    case 'u':\n      //UINT32\n      marshaller.check = function (data) {\n        checkInteger(data);\n        checkRange(0, 0xffffffff, data);\n      };\n      marshaller.marshall = function (ps, data) {\n        this.check(data);\n        // 32 t unsigned int\n        align(ps, 4);\n        ps.word32le(data);\n        ps._offset += 4;\n      };\n      break;\n    case 't':\n      //UINT64\n      marshaller.check = function (data) {\n        return checkLong(data, false);\n      };\n      marshaller.marshall = function (ps, data) {\n        data = this.check(data);\n        align(ps, 8);\n        ps.word32le(data.low);\n        ps.word32le(data.high);\n        ps._offset += 8;\n      };\n      break;\n    case 'x':\n      //INT64\n      marshaller.check = function (data) {\n        return checkLong(data, true);\n      };\n      marshaller.marshall = function (ps, data) {\n        data = this.check(data);\n        align(ps, 8);\n        ps.word32le(data.low);\n        ps.word32le(data.high);\n        ps._offset += 8;\n      };\n      break;\n    case 'd':\n      //DOUBLE\n      marshaller.check = function (data) {\n        if (typeof data !== 'number') {\n          throw new Error(`Data: ${data} was not of type number`);\n        } else if (Number.isNaN(data)) {\n          throw new Error(`Data: ${data} was not a number`);\n        } else if (!Number.isFinite(data)) {\n          throw new Error('Number outside range');\n        }\n      };\n      marshaller.marshall = function (ps, data) {\n        this.check(data);\n        align(ps, 8);\n        const buff = Buffer.alloc(8);\n        buff.writeDoubleLE(parseFloat(data), 0);\n        ps.put(buff);\n        ps._offset += 8;\n      };\n      break;\n    default:\n      throw new Error(`Unknown data type format: ${signature}`);\n  }\n  return marshaller;\n};\nexports.MakeSimpleMarshaller = MakeSimpleMarshaller;\n\nvar checkRange = function (minValue, maxValue, data) {\n  if (data > maxValue || data < minValue) {\n    throw new Error('Number outside range');\n  }\n};\n\nvar checkInteger = function (data) {\n  if (typeof data !== 'number') {\n    throw new Error(`Data: ${data} was not of type number`);\n  }\n  if (Math.floor(data) !== data) {\n    throw new Error(`Data: ${data} was not an integer`);\n  }\n};\n\nvar checkBoolean = function (data) {\n  if (!(typeof data === 'boolean' || data === 0 || data === 1))\n    throw new Error(`Data: ${data} was not of type boolean`);\n};\n\n// This is essentially a tweaked version of 'fromValue' from Long.js with error checking.\n// This can take number or string of decimal characters or 'Long' instance (or Long-style object with props low,high,unsigned).\nvar makeLong = function (val, signed) {\n  if (val instanceof Long) return val;\n  if (val instanceof Number) val = val.valueOf();\n  if (typeof val === 'number') {\n    try {\n      // Long.js won't alert you to precision loss in passing more than 53 bit ints through a double number, so we check here\n      checkInteger(val);\n      if (signed) {\n        checkRange(-0x1fffffffffffff, 0x1fffffffffffff, val);\n      } else {\n        checkRange(0, 0x1fffffffffffff, val);\n      }\n    } catch (e) {\n      e.message += ' (Number type can only carry 53 bit integer)';\n      throw e;\n    }\n    try {\n      return Long.fromNumber(val, !signed);\n    } catch (e) {\n      e.message = `Error converting number to 64bit integer \"${e.message}\"`;\n      throw e;\n    }\n  }\n  if (typeof val === 'string' || val instanceof String) {\n    var radix = 10;\n    val = val.trim().toUpperCase(); // remove extra whitespace and make uppercase (for hex)\n    if (val.substring(0, 2) === '0X') {\n      radix = 16;\n      val = val.substring(2);\n    } else if (val.substring(0, 3) === '-0X') {\n      // unusual, but just in case?\n      radix = 16;\n      val = `-${val.substring(3)}`;\n    }\n    val = val.replace(/^0+(?=\\d)/, ''); // dump leading zeroes\n    var data;\n    try {\n      data = Long.fromString(val, !signed, radix);\n    } catch (e) {\n      e.message = `Error converting string to 64bit integer '${e.message}'`;\n      throw e;\n    }\n    // If string represents a number outside of 64 bit range, it can quietly overflow.\n    // We assume if things converted correctly the string coming out of Long should match what went into it.\n    if (data.toString(radix).toUpperCase() !== val)\n      throw new Error(\n        `Data: '${val}' did not convert correctly to ${\n          signed ? 'signed' : 'unsigned'\n        } 64 bit`\n      );\n    return data;\n  }\n  // Throws for non-objects, converts non-instanceof Long:\n  try {\n    return Long.fromBits(val.low, val.high, val.unsigned);\n  } catch (e) {\n    e.message = `Error converting object to 64bit integer '${e.message}'`;\n    throw e;\n  }\n};\n\nvar checkLong = function (data, signed) {\n  if (!Long.isLong(data)) {\n    data = makeLong(data, signed);\n  }\n\n  // Do we enforce that Long.js object unsigned/signed match the field even if it is still in range?\n  // Probably, might help users avoid unintended bugs?\n  if (signed) {\n    if (data.unsigned)\n      throw new Error(\n        'Longjs object is unsigned, but marshalling into signed 64 bit field'\n      );\n    if (data.gt(Long.MAX_VALUE) || data.lt(Long.MIN_VALUE)) {\n      throw new Error(`Data: ${data} was out of range (64-bit signed)`);\n    }\n  } else {\n    if (!data.unsigned)\n      throw new Error(\n        'Longjs object is signed, but marshalling into unsigned 64 bit field'\n      );\n    // NOTE: data.gt(Long.MAX_UNSIGNED_VALUE) will catch if Long.js object is a signed value but is still within unsigned range!\n    //  Since we are enforcing signed type matching between Long.js object and field, this note should not matter.\n    if (data.gt(Long.MAX_UNSIGNED_VALUE) || data.lt(0)) {\n      throw new Error(`Data: ${data} was out of range (64-bit unsigned)`);\n    }\n  }\n  return data;\n};\n","const Buffer = require('safe-buffer').Buffer;\nconst marshall = require('./marshall');\nconst constants = require('./constants');\nconst DBusBuffer = require('./dbus-buffer');\n\nconst headerSignature = require('./header-signature.json');\n\nmodule.exports.unmarshalMessages = function messageParser(\n  stream,\n  onMessage,\n  opts\n) {\n  var state = 0; // 0: header, 1: fields + body\n  var header, fieldsAndBody;\n  var fieldsLength, fieldsLengthPadded;\n  var fieldsAndBodyLength = 0;\n  var bodyLength = 0;\n  stream.on('readable', function () {\n    while (1) {\n      if (state === 0) {\n        header = stream.read(16);\n        if (!header) break;\n        state = 1;\n\n        fieldsLength = header.readUInt32LE(12);\n        fieldsLengthPadded = ((fieldsLength + 7) >> 3) << 3;\n        bodyLength = header.readUInt32LE(4);\n        fieldsAndBodyLength = fieldsLengthPadded + bodyLength;\n      } else {\n        fieldsAndBody = stream.read(fieldsAndBodyLength);\n        if (!fieldsAndBody) break;\n        state = 0;\n\n        var messageBuffer = new DBusBuffer(fieldsAndBody, undefined, opts);\n        var unmarshalledHeader = messageBuffer.readArray(\n          headerSignature[0].child[0],\n          fieldsLength\n        );\n        messageBuffer.align(3);\n        var headerName;\n        var message = {};\n        message.serial = header.readUInt32LE(8);\n\n        for (var i = 0; i < unmarshalledHeader.length; ++i) {\n          headerName = constants.headerTypeName[unmarshalledHeader[i][0]];\n          message[headerName] = unmarshalledHeader[i][1][1][0];\n        }\n\n        message.type = header[1];\n        message.flags = header[2];\n\n        if (bodyLength > 0 && message.signature) {\n          message.body = messageBuffer.read(message.signature);\n        }\n        onMessage(message);\n      }\n    }\n  });\n};\n\n// given buffer which contains entire message deserialise it\n// TODO: factor out common code\nmodule.exports.unmarshall = function unmarshall(buff, opts) {\n  var msgBuf = new DBusBuffer(buff, undefined, opts);\n  var headers = msgBuf.read('yyyyuua(yv)');\n  var message = {};\n  for (var i = 0; i < headers[6].length; ++i) {\n    var headerName = constants.headerTypeName[headers[6][i][0]];\n    message[headerName] = headers[6][i][1][1][0];\n  }\n  message.type = headers[1];\n  message.flags = headers[2];\n  message.serial = headers[5];\n  msgBuf.align(3);\n  message.body = msgBuf.read(message.signature);\n  return message;\n};\n\nmodule.exports.marshall = function marshallMessage(message) {\n  if (!message.serial) throw new Error('Missing or invalid serial');\n  var flags = message.flags || 0;\n  var type = message.type || constants.messageType.methodCall;\n  var bodyLength = 0;\n  var bodyBuff;\n  if (message.signature && message.body) {\n    bodyBuff = marshall(message.signature, message.body);\n    bodyLength = bodyBuff.length;\n  }\n  var header = [\n    constants.endianness.le,\n    type,\n    flags,\n    constants.protocolVersion,\n    bodyLength,\n    message.serial\n  ];\n  var headerBuff = marshall('yyyyuu', header);\n  var fields = [];\n  constants.headerTypeName.forEach(function (fieldName) {\n    var fieldVal = message[fieldName];\n    if (fieldVal) {\n      fields.push([\n        constants.headerTypeId[fieldName],\n        [constants.fieldSignature[fieldName], fieldVal]\n      ]);\n    }\n  });\n  var fieldsBuff = marshall('a(yv)', [fields], 12);\n  var headerLenAligned =\n    ((headerBuff.length + fieldsBuff.length + 7) >> 3) << 3;\n  var messageLen = headerLenAligned + bodyLength;\n  var messageBuff = Buffer.alloc(messageLen);\n  headerBuff.copy(messageBuff);\n  fieldsBuff.copy(messageBuff, headerBuff.length);\n  if (bodyLength > 0) bodyBuff.copy(messageBuff, headerLenAligned);\n\n  return messageBuff;\n};\n","const Buffer = require('safe-buffer').Buffer;\n\nmodule.exports = function readOneLine(stream, cb) {\n  var bytes = [];\n  function readable() {\n    while (1) {\n      var buf = stream.read(1);\n      if (!buf) return;\n      var b = buf[0];\n      if (b === 0x0a) {\n        try {\n          cb(Buffer.from(bytes));\n        } catch (error) {\n          stream.emit('error', error);\n        }\n        stream.removeListener('readable', readable);\n        return;\n      }\n      bytes.push(b);\n    }\n  }\n  stream.on('readable', readable);\n};\n","const Buffer = require('safe-buffer').Buffer;\nconst readLine = require('./readline');\n\nmodule.exports = function serverHandshake(stream, opts, cb) {\n  stream.name = 'SERVER SERVER';\n  readLine(stream, function (hello) {\n    console.log(['hello string: ', hello.toString(), hello]);\n    stream.write('REJECTED EXTERNAL DBUS_COOKIE_SHA1 ANONYMOUS\\r\\n');\n    readLine(stream, function () {\n      stream.write(\n        `DATA ${Buffer.from(\n          'org_freedesktop_general 642038150 b9ce247a275f427c8586e4c9de9bb951'\n        ).toString('hex')}\\r\\n`\n      );\n      readLine(stream, function () {\n        stream.write(\n          'OK 6f72675f667265656465736b746f705f67656e6572616c20353631303331333937206239636532343761323735663432376338353836653463396465396262393531\\r\\n'\n        );\n        readLine(stream, function (begin) {\n          console.log(['AFTER begin: ', begin.toString()]);\n          cb(null);\n        });\n      });\n    });\n  });\n};\n\n// cookie: 561031397 1410749774 3a83c8200f930e7af4de135e8abd299b681a1f44dbb85399\n\n// 1539856202\n\n// server: org_freedesktop_general 561031397 b9ce247a275f427c8586e4c9de9bb951\n// client: bwFSDjS0TJerqb0l 82986a987194788803d7da2a4b00e801cff9bdfd\n//                          82986a987194788803d7da2a4b00e801cff9bdfd = sha1(b9ce247a275f427c8586e4c9de9bb951:bwFSDjS0TJerqb0l:3a83c8200f930e7af4de135e8abd299b681a1f44dbb85399)\n// server: OK e12a29dd7ffe3effac5eb95054123f80\n\n//dbus.write('DATA 6f72675f667265656465736b746f705f67656e6572616c203636383430 31303032 203733653733313762383630356537323937623438303233376336353234343533\\r\\n');\n","const dbus = require('../index');\nconst net = require('net');\n\nmodule.exports.createServer = function (handler) {\n  function Server() {\n    var id = 123;\n    this.server = net.createServer(function (socket) {\n      socket.idd = id;\n      id++;\n\n      var dbusConn = dbus.createConnection({ stream: socket, server: true });\n      if (handler) handler(dbusConn);\n      // TODO: inherit from EE this.emit('connect', dbusConn);\n    });\n    this.listen = this.server.listen.bind(this.server);\n  }\n  return new Server();\n};\n","// parse signature from string to tree\n\nvar match = {\n  '{': '}',\n  '(': ')'\n};\n\nvar knownTypes = {};\n'(){}ybnqiuxtdsogarvehm*?@&^'.split('').forEach(function (c) {\n  knownTypes[c] = true;\n});\n\nmodule.exports = function parseSignature(signature) {\n  var index = 0;\n  function next() {\n    if (index < signature.length) {\n      var c = signature[index];\n      ++index;\n      return c;\n    }\n    return null;\n  }\n\n  function parseOne(c) {\n    function checkNotEnd(c) {\n      if (!c) throw new Error('Bad signature: unexpected end');\n      return c;\n    }\n\n    if (!knownTypes[c])\n      throw new Error(`Unknown type: \"${c}\" in signature \"${signature}\"`);\n\n    var ele;\n    var res = { type: c, child: [] };\n    switch (c) {\n      case 'a': // array\n        ele = next();\n        checkNotEnd(ele);\n        res.child.push(parseOne(ele));\n        return res;\n      case '{': // dict entry\n      case '(': // struct\n        while ((ele = next()) !== null && ele !== match[c])\n          res.child.push(parseOne(ele));\n        checkNotEnd(ele);\n        return res;\n    }\n    return res;\n  }\n\n  var ret = [];\n  var c;\n  while ((c = next()) !== null) ret.push(parseOne(c));\n  return ret;\n};\n\n// command-line test\n//console.log(JSON.stringify(module.exports(process.argv[2]), null, 4));\n//var tree = module.exports('a(ssssbbbbbbbbuasa{ss}sa{sv})a(ssssssbbssa{ss}sa{sv})a(ssssssbsassa{sv})');\n//console.log(tree);\n//console.log(fromTree(tree))\n","const constants = require('./constants');\nconst parseSignature = require('./signature');\n\n// TODO: use xmlbuilder\n\nvar xmlHeader =\n  '<!DOCTYPE node PUBLIC \"-//freedesktop//DTD D-BUS Object Introspection 1.0//EN\"\\n' +\n  '    \"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd\">';\nvar stdIfaces;\n\nmodule.exports = function (msg, bus) {\n  if (\n    msg['interface'] === 'org.freedesktop.DBus.Introspectable' &&\n    msg.member === 'Introspect'\n  ) {\n    if (msg.path === '/') msg.path = '';\n\n    var resultXml = [xmlHeader];\n    var nodes = {};\n    // TODO: this is not very efficiant for large number of exported objects\n    // need to build objects tree as they are exported and walk this tree on introspect request\n    for (var path in bus.exportedObjects) {\n      if (path.indexOf(msg.path) === 0) {\n        // objects path starts with requested\n        var introspectableObj = bus.exportedObjects[msg.path];\n        if (introspectableObj) {\n          nodes[msg.path] = introspectableObj;\n        } else {\n          if (path[msg.path.length] !== '/') continue;\n          var localPath = path.substr(msg.path.length);\n          var pathParts = localPath.split('/');\n          var localName = pathParts[1];\n          nodes[localName] = null;\n        }\n      }\n    }\n\n    var length = Object.keys(nodes).length;\n    if (length === 0) {\n      resultXml.push('<node/>');\n    } else if (length === 1) {\n      var obj = nodes[Object.keys(nodes)[0]];\n      if (obj) {\n        resultXml.push('<node>');\n        for (var ifaceNode in obj) {\n          resultXml.push(interfaceToXML(obj[ifaceNode][0]));\n        }\n        resultXml.push(stdIfaces);\n        resultXml.push('</node>');\n      } else {\n        resultXml.push(\n          `<node>\\n  <node name=\"${Object.keys(nodes)[0]}\"/>\\n  </node>`\n        );\n      }\n    } else {\n      resultXml.push('<node>');\n      for (var name in nodes) {\n        if (nodes[name] === null) {\n          resultXml.push(`  <node name=\"${name}\" />`);\n        } else {\n          obj = nodes[name];\n          resultXml.push(`  <node name=\"${name}\" >`);\n          for (var ifaceName in obj) {\n            resultXml.push(interfaceToXML(obj[ifaceName][0]));\n          }\n          resultXml.push(stdIfaces);\n          resultXml.push('  </node>');\n        }\n      }\n      resultXml.push('</node>');\n    }\n\n    const introspectableReply = {\n      type: constants.messageType.methodReturn,\n      serial: bus.serial++,\n      replySerial: msg.serial,\n      destination: msg.sender,\n      signature: 's',\n      body: [resultXml.join('\\n')]\n    };\n    bus.connection.message(introspectableReply);\n    return 1;\n  } else if (msg['interface'] === 'org.freedesktop.DBus.Properties') {\n    var interfaceName = msg.body[0];\n    var propertiesObj = bus.exportedObjects[msg.path];\n    // TODO: !propertiesObj -> UnknownObject  http://www.freedesktop.org/wiki/Software/DBusBindingErrors\n    if (!propertiesObj || !propertiesObj[interfaceName]) {\n      // TODO:\n      bus.sendError(\n        msg,\n        'org.freedesktop.DBus.Error.UnknownMethod',\n        'Uh oh oh'\n      );\n      return 1;\n    }\n    var impl = propertiesObj[interfaceName][1];\n\n    const propertiesReply = {\n      type: constants.messageType.methodReturn,\n      serial: bus.serial++,\n      replySerial: msg.serial,\n      destination: msg.sender\n    };\n    if (msg.member === 'Get' || msg.member === 'Set') {\n      var propertyName = msg.body[1];\n      var propType = propertiesObj[interfaceName][0].properties[propertyName];\n      if (msg.member === 'Get') {\n        var propValue = impl[propertyName];\n        propertiesReply.signature = 'v';\n        propertiesReply.body = [[propType, propValue]];\n      } else {\n        impl[propertyName] = 1234; // TODO: read variant and set property value\n      }\n    } else if (msg.member === 'GetAll') {\n      propertiesReply.signature = 'a{sv}';\n      var props = [];\n      for (var p in propertiesObj[interfaceName][0].properties) {\n        var propertySignature = propertiesObj[interfaceName][0].properties[p];\n        props.push([p, [propertySignature, impl[p]]]);\n      }\n      propertiesReply.body = [props];\n    }\n    bus.connection.message(propertiesReply);\n    return 1;\n  } else if (msg['interface'] === 'org.freedesktop.DBus.Peer') {\n    // TODO: implement bus.replyTo(srcMsg, signature, body) method\n    const peerReply = {\n      type: constants.messageType.methodReturn,\n      serial: bus.serial++,\n      replySerial: msg.serial,\n      destination: msg.sender\n    };\n    if (msg.member === 'Ping') {\n      // empty body\n    } else if (msg.member === 'GetMachineId') {\n      peerReply.signature = 's';\n      peerReply.body = ['This is a machine id. TODO: implement'];\n    }\n    bus.connection.message(peerReply);\n    return 1;\n  }\n  return 0;\n};\n\n// TODO: move to introspect.js\nfunction interfaceToXML(iface) {\n  var result = [];\n  var dumpArgs = function (argsSignature, argsNames, direction) {\n    if (!argsSignature) return;\n    var args = parseSignature(argsSignature);\n    args.forEach(function (arg, num) {\n      var argName = argsNames ? argsNames[num] : direction + num;\n      var dirStr = direction === 'signal' ? '' : `\" direction=\"${direction}`;\n      result.push(\n        `      <arg type=\"${dumpSignature([\n          arg\n        ])}\" name=\"${argName}${dirStr}\" />`\n      );\n    });\n  };\n  result.push(`  <interface name=\"${iface.name}\">`);\n  if (iface.methods) {\n    for (var methodName in iface.methods) {\n      var method = iface.methods[methodName];\n      result.push(`    <method name=\"${methodName}\">`);\n      dumpArgs(method[0], method[2], 'in');\n      dumpArgs(method[1], method[3], 'out');\n      result.push('    </method>');\n    }\n  }\n  if (iface.signals) {\n    for (var signalName in iface.signals) {\n      var signal = iface.signals[signalName];\n      result.push(`    <signal name=\"${signalName}\">`);\n      dumpArgs(signal[0], signal.slice(1), 'signal');\n      result.push('    </signal>');\n    }\n  }\n  if (iface.properties) {\n    for (const propertyName in iface.properties) {\n      // TODO: decide how to encode access\n      result.push(\n        `    <property name=\"${propertyName}\" type=\"${iface.properties[propertyName]}\" access=\"readwrite\"/>`\n      );\n    }\n  }\n  result.push('  </interface>');\n  return result.join('\\n');\n}\n\nfunction dumpSignature(s) {\n  var result = [];\n  s.forEach(function (sig) {\n    result.push(sig.type + dumpSignature(sig.child));\n    if (sig.type === '{') result.push('}');\n    if (sig.type === '(') result.push(')');\n  });\n  return result.join('');\n}\nstdIfaces =\n  '  <interface name=\"org.freedesktop.DBus.Properties\">\\n    <method name=\"Get\">\\n      <arg type=\"s\" name=\"interface_name\" direction=\"in\"/>\\n      <arg type=\"s\" name=\"property_name\" direction=\"in\"/>\\n      <arg type=\"v\" name=\"value\" direction=\"out\"/>\\n    </method>\\n    <method name=\"GetAll\">\\n      <arg type=\"s\" name=\"interface_name\" direction=\"in\"/>\\n      <arg type=\"a{sv}\" name=\"properties\" direction=\"out\"/>\\n    </method>\\n    <method name=\"Set\">\\n      <arg type=\"s\" name=\"interface_name\" direction=\"in\"/>\\n      <arg type=\"s\" name=\"property_name\" direction=\"in\"/>\\n      <arg type=\"v\" name=\"value\" direction=\"in\"/>\\n    </method>\\n    <signal name=\"PropertiesChanged\">\\n      <arg type=\"s\" name=\"interface_name\"/>\\n      <arg type=\"a{sv}\" name=\"changed_properties\"/>\\n      <arg type=\"as\" name=\"invalidated_properties\"/>\\n    </signal>\\n  </interface>\\n  <interface name=\"org.freedesktop.DBus.Introspectable\">\\n    <method name=\"Introspect\">\\n      <arg type=\"s\" name=\"xml_data\" direction=\"out\"/>\\n    </method>\\n  </interface>\\n  <interface name=\"org.freedesktop.DBus.Peer\">\\n    <method name=\"Ping\"/>\\n    <method name=\"GetMachineId\">\\n      <arg type=\"s\" name=\"machine_uuid\" direction=\"out\"/>\\n    </method>\\n  </interface>';\n","const assert = require('assert');\n\nmodule.exports = Put;\nfunction Put () {\n    if (!(this instanceof Put)) return new Put;\n\n    var words = [];\n    var len = 0;\n\n    this.put = function (buf) {\n        words.push({ buffer : buf });\n        len += buf.length;\n        return this;\n    };\n\n    this.word8 = function (x) {\n        words.push({ bytes : 1, value : x });\n        len += 1;\n        return this;\n    };\n\n    this.floatle = function (x) {\n        words.push({ bytes : 'float', endian : 'little', value : x });\n        len += 4;\n        return this;\n    };\n\n    [ 8, 16, 24, 32, 64 ].forEach((function (bits) {\n        this['word' + bits + 'be'] = function (x) {\n            words.push({ endian : 'big', bytes : bits / 8, value : x });\n            len += bits / 8;\n            return this;\n        };\n\n        this['word' + bits + 'le'] = function (x) {\n            words.push({ endian : 'little', bytes : bits / 8, value : x });\n            len += bits / 8;\n            return this;\n        };\n    }).bind(this));\n\n    this.pad = function (bytes) {\n        assert(Number.isInteger(bytes), \"pad(bytes) must be supplied with an integer!\");\n        words.push({ endian : 'big', bytes : bytes, value : 0 });\n        len += bytes;\n        return this;\n    };\n\n    this.length = function () {\n        return len;\n    };\n\n    this.buffer = function () {\n        var buf = Buffer.alloc(len);\n        var offset = 0;\n        words.forEach(function (word) {\n            if (word.buffer) {\n                word.buffer.copy(buf, offset, 0);\n                offset += word.buffer.length;\n            }\n            else if (word.bytes === 'float') {\n                // s * f * 2^e\n                var v = Math.abs(word.value);\n                var s = (word.value >= 0) * 1;\n                var e = Math.ceil(Math.log(v) / Math.LN2);\n                var f = v / (1 << e);\n                console.dir([s,e,f]);\n\n                console.log(word.value);\n\n                // s:1, e:7, f:23\n                // [seeeeeee][efffffff][ffffffff][ffffffff]\n                buf[offset++] = (s << 7) & ~~(e / 2);\n                buf[offset++] = ((e & 1) << 7) & ~~(f / (1 << 16));\n                buf[offset++] = 0;\n                buf[offset++] = 0;\n                offset += 4;\n            }\n            else {\n                var big = word.endian === 'big';\n                var ix = big ? [ (word.bytes - 1) * 8, -8 ] : [ 0, 8 ];\n\n                for (\n                    var i = ix[0];\n                    big ? i >= 0 : i < word.bytes * 8;\n                    i += ix[1]\n                ) {\n                    if (i >= 32) {\n                        buf[offset++] = Math.floor(word.value / Math.pow(2, i)) & 0xff;\n                    }\n                    else {\n                        buf[offset++] = (word.value >> i) & 0xff;\n                    }\n                }\n            }\n        });\n        return buf;\n    };\n\n    this.write = function (stream) {\n        stream.write(this.buffer());\n    };\n}\n","'use strict';\n\nvar callBound = require('call-bind/callBound');\nvar $byteLength = callBound('ArrayBuffer.prototype.byteLength', true);\n\nvar isArrayBuffer = require('is-array-buffer');\n\n/** @type {import('.')} */\nmodule.exports = function byteLength(ab) {\n\tif (!isArrayBuffer(ab)) {\n\t\treturn NaN;\n\t}\n\treturn $byteLength ? $byteLength(ab) : ab.byteLength;\n}; // in node < 0.11, byteLength is an own nonconfigurable property\n","/**\n * Flatten an array indefinitely.\n */\nexport function flatten(array) {\n    var result = [];\n    $flatten(array, result);\n    return result;\n}\n/**\n * Internal flatten function recursively passes `result`.\n */\nfunction $flatten(array, result) {\n    for (var i = 0; i < array.length; i++) {\n        var value = array[i];\n        if (Array.isArray(value)) {\n            $flatten(value, result);\n        }\n        else {\n            result.push(value);\n        }\n    }\n}\n//# sourceMappingURL=index.js.map","'use strict'\n\nconst Registry = require('./lib/Registry.js')\nconst Server = require('./lib/Server.js')\nconst Browser = require('./lib/Browser.js')\n\nfunction Bonjour (opts) {\n  if (!(this instanceof Bonjour)) { return new Bonjour(opts) }\n\n  this._server = new Server(opts)\n  this._registry = new Registry(this._server)\n}\n\nBonjour.prototype = {\n  publish: function (opts) {\n    return this._registry.publish(opts)\n  },\n\n  unpublishAll: function (cb) {\n    this._registry.unpublishAll(cb)\n  },\n\n  find: function (opts, onup) {\n    return new Browser(this._server.mdns, opts, onup)\n  },\n\n  findOne: function (opts, cb) {\n    const browser = new Browser(this._server.mdns, opts)\n    browser.once('up', function (service) {\n      browser.stop()\n      if (cb) cb(service)\n    })\n    return browser\n  },\n\n  destroy: function () {\n    this._registry.destroy()\n    this._server.mdns.destroy()\n  }\n}\n\nmodule.exports = Bonjour\n","'use strict'\n\nconst util = require('util')\nconst EventEmitter = require('events').EventEmitter\nconst serviceName = require('multicast-dns-service-types')\nconst dnsEqual = require('./utils/dnsEqual')\nconst dnsTxt = require('./utils/txtDecoder')\n\nconst TLD = '.local'\nconst WILDCARD = '_services._dns-sd._udp' + TLD\n\nmodule.exports = Browser\n\nutil.inherits(Browser, EventEmitter)\n\n/**\n * Start a browser\n *\n * The browser listens for services by querying for PTR records of a given\n * type, protocol and domain, e.g. _http._tcp.local.\n *\n * If no type is given, a wild card search is performed.\n *\n * An internal list of online services is kept which starts out empty. When\n * ever a new service is discovered, it's added to the list and an \"up\" event\n * is emitted with that service. When it's discovered that the service is no\n * longer available, it is removed from the list and a \"down\" event is emitted\n * with that service.\n */\nfunction Browser (mdns, opts, onup) {\n  if (typeof opts === 'function') return new Browser(mdns, null, opts)\n\n  EventEmitter.call(this)\n\n  this._mdns = mdns\n  this._onresponse = null\n  this._serviceMap = {}\n  this._txt = dnsTxt(opts.txt)\n\n  if (!opts || !opts.type) {\n    this._name = WILDCARD\n    this._wildcard = true\n  } else {\n    this._name = serviceName.stringify(opts.type, opts.protocol || 'tcp') + TLD\n    if (opts.name) this._name = opts.name + '.' + this._name\n    this._wildcard = false\n  }\n\n  this.services = []\n\n  if (onup) this.on('up', onup)\n\n  this.start()\n}\n\nBrowser.prototype.start = function () {\n  if (this._onresponse) return\n\n  const self = this\n\n  // List of names for the browser to listen for. In a normal search this will\n  // be the primary name stored on the browser. In case of a wildcard search\n  // the names will be determined at runtime as responses come in.\n  const nameMap = {}\n  if (!this._wildcard) nameMap[this._name] = true\n\n  this._onresponse = function (packet, rinfo) {\n    if (self._wildcard) {\n      packet.answers.forEach(function (answer) {\n        if (answer.type !== 'PTR' || answer.name !== self._name || answer.name in nameMap) return\n        nameMap[answer.data] = true\n        self._mdns.query(answer.data, 'PTR')\n      })\n    }\n\n    Object.keys(nameMap).forEach(function (name) {\n      // unregister all services shutting down\n      goodbyes(name, packet).forEach(self._removeService.bind(self))\n\n      // register all new services\n      const matches = buildServicesFor(name, packet, self._txt, rinfo)\n      if (matches.length === 0) return\n\n      matches.forEach(function (service) {\n        if (self._serviceMap[service.fqdn]) {\n          self._updateService(service)\n        } else {\n          self._addService(service)\n        }\n      })\n    })\n  }\n\n  this._mdns.on('response', this._onresponse)\n  this.update()\n}\n\nBrowser.prototype.stop = function () {\n  if (!this._onresponse) return\n\n  this._mdns.removeListener('response', this._onresponse)\n  this._onresponse = null\n}\n\nBrowser.prototype.update = function () {\n  this._mdns.query(this._name, 'PTR')\n}\n\nBrowser.prototype._addService = function (service) {\n  this.services.push(service)\n  this._serviceMap[service.fqdn] = true\n  this.emit('up', service)\n}\n\nBrowser.prototype._updateService = function (service) {\n  let cachedService, index\n  this.services.some(function (s, i) {\n    if (dnsEqual(s.fqdn, service.fqdn)) {\n      cachedService = s\n      index = i\n      return true\n    }\n    return false\n  })\n  if (!cachedService) return\n  this.services[index] = service\n  this.emit('update', service)\n}\n\nBrowser.prototype._removeService = function (fqdn) {\n  let service, index\n  this.services.some(function (s, i) {\n    if (dnsEqual(s.fqdn, fqdn)) {\n      service = s\n      index = i\n      return true\n    }\n    return false\n  })\n  if (!service) return\n  this.services.splice(index, 1)\n  delete this._serviceMap[fqdn]\n  this.emit('down', service)\n}\n\n// PTR records with a TTL of 0 is considered a \"goodbye\" announcement. I.e. a\n// DNS response broadcasted when a service shuts down in order to let the\n// network know that the service is no longer going to be available.\n//\n// For more info see:\n// https://tools.ietf.org/html/rfc6762#section-8.4\n//\n// This function returns an array of all resource records considered a goodbye\n// record\nfunction goodbyes (name, packet) {\n  return packet.answers.concat(packet.additionals)\n    .filter(function (rr) {\n      return rr.type === 'PTR' && rr.ttl === 0 && dnsEqual(rr.name, name)\n    })\n    .map(function (rr) {\n      return rr.data\n    })\n}\n\nfunction buildServicesFor (name, packet, txt, referer) {\n  const records = packet.answers.concat(packet.additionals).filter(function (rr) {\n    return rr.ttl > 0 // ignore goodbye messages\n  })\n\n  return records\n    .filter(function (rr) {\n      return rr.type === 'PTR' && dnsEqual(rr.name, name)\n    })\n    .map(function (ptr) {\n      const service = {\n        addresses: []\n      }\n\n      records\n        .filter(function (rr) {\n          return (rr.type === 'SRV' || rr.type === 'TXT') && dnsEqual(rr.name, ptr.data)\n        })\n        .forEach(function (rr) {\n          if (rr.type === 'SRV') {\n            const parts = rr.name.split('.')\n            const name = parts[0]\n            const types = serviceName.parse(parts.slice(1, -1).join('.'))\n            service.name = name\n            service.fqdn = rr.name\n            service.host = rr.data.target\n            service.referer = referer\n            service.port = rr.data.port\n            service.type = types.name\n            service.protocol = types.protocol\n            service.subtypes = types.subtypes\n          } else if (rr.type === 'TXT') {\n            // rr.data is an Array of Buffer instead of Buffer\n            service.rawTxt = rr.data // array of buffers, each representing a block\n            service.txt = txt.decodeBlocks(service.rawTxt)\n          }\n        })\n\n      if (!service.name) return undefined\n\n      records\n        .filter(function (rr) {\n          return (rr.type === 'A' || rr.type === 'AAAA') && dnsEqual(rr.name, service.host)\n        })\n        .forEach(function (rr) {\n          service.addresses.push(rr.data)\n        })\n\n      return service\n    })\n    .filter(function (rr) {\n      return !!rr\n    })\n}\n","'use strict'\n\nconst dnsEqual = require('./utils/dnsEqual')\n\n/**\n * Check if a service name is already in use on the network.\n *\n * Used before announcing the new service.\n *\n * To guard against race conditions where multiple services are started\n * simultaneously on the network, wait a random amount of time (between\n * 0 and 250 ms) before probing.\n *\n * TODO: Add support for Simultaneous Probe Tiebreaking:\n * https://tools.ietf.org/html/rfc6762#section-8.2\n */\n\nconst Prober = function (mdns, service, cb) {\n  this.sent = false\n  this.retries = 0\n  this.timer = null\n  this.cb = cb\n  this.mdns = mdns\n  this.service = service\n  this.bound = this.onMDNSresponse.bind(this)\n  this.matchRRBound = this.matchRR.bind(this)\n}\n\nProber.prototype = {\n\n  start: function () {\n    this.mdns.on('response', this.bound)\n    setTimeout(this.try.bind(this), Math.random() * 250)\n  },\n\n  try: function () {\n    // abort if the service have or is being stopped in the meantime\n    if (!this.service._activated || this.service._destroyed) return\n\n    this.mdns.query(this.service.fqdn, 'ANY', function () {\n      // This function will optionally be called with an error object. We'll\n      // just silently ignore it and retry as we normally would\n      this.sent = true\n      this.timer = setTimeout(++this.retries < 3 ? this.try.bind(this) : this.done.bind(this, false), 250)\n      this.timer.unref()\n    }.bind(this))\n  },\n\n  matchRR: function (rr) {\n    return dnsEqual(rr.name, this.service.fqdn)\n  },\n\n  onMDNSresponse: function (packet) {\n    // Apparently conflicting Multicast DNS responses received *before*\n    // the first probe packet is sent MUST be silently ignored (see\n    // discussion of stale probe packets in RFC 6762 Section 8.2,\n    // \"Simultaneous Probe Tiebreaking\" at\n    // https://tools.ietf.org/html/rfc6762#section-8.2\n    if (!this.sent) { return }\n\n    if (packet.answers.some(this.matchRRBound) || packet.additionals.some(this.matchRRBound)) { this.done(true) }\n  },\n\n  done: function (success) {\n    this.mdns.removeListener('response', this.bound)\n    clearTimeout(this.timer)\n    this.cb(success)\n  }\n\n}\n\nmodule.exports = Prober\n","'use strict'\n\nconst flatten = require('array-flatten').flatten\nconst Service = require('./Service.js')\nconst Prober = require('./Prober.js')\n\nconst Registry = function (server) {\n  this._server = server\n  this._services = []\n}\n\nRegistry.prototype = {\n\n  publish: function (opts) {\n    opts = opts || {}\n    const service = new Service(opts)\n    service.on('service-publish', this._onServicePublish.bind(this))\n    service.on('service-unpublish', this._onServiceUnpublish.bind(this))\n    service.on('service-announce-request', this._onAnnounceRequest.bind(this))\n    service.on('service-packet-change', this._onServiceChange.bind(this))\n    service.start()\n    return service\n  },\n\n  unpublishAll: function (cb) {\n    this._tearDown(this._services, cb)\n    this._services = []\n  },\n\n  destroy: function () {\n    for (let i = 0; i < this._services.length; i++) { this._services[i].destroy() }\n  },\n\n  /**\n     * Stop the given services\n     *\n     * Besides removing a service from the mDNS registry, a \"goodbye\"\n     * message is sent for each service to let the network know about the\n     * shutdown.\n     */\n  _tearDown: function (services, cb) {\n    if (!Array.isArray(services)) { services = [services] }\n\n    services = services.filter(function (service) {\n      return service._activated // ignore services not currently starting or started\n    })\n\n    const records = flatten(services.map(function (service) {\n      service.deactivate()\n      const records = service._records(true)\n      records.forEach(function (record) {\n        record.ttl = 0 // prepare goodbye message\n      })\n      return records\n    }), 1)\n\n    if (records.length === 0) { return cb && cb() }\n\n    this._server.unregister(records)\n\n    this._server.mdns.respond(records, this._onTearDownComplete.bind(this, services, cb))\n  },\n\n  _onTearDownComplete: function (services, cb) {\n    for (let i = 0; i < services.length; i++) { services[i].published = false }\n\n    if (cb) { cb.apply(null, Array.prototype.slice.call(arguments, 2)) }\n  },\n\n  _onServiceChange: function (oldPackets) {\n    this._server.unregister(oldPackets)\n  },\n\n  /**\n     * Initial service announcement\n     *\n     * Used to announce new services when they are first registered.\n     *\n     * Broadcasts right away, then after 3 seconds, 9 seconds, 27 seconds,\n     * and so on, up to a maximum interval of one hour.\n     */\n  _onAnnounceRequest: function (packet, silent, cb) {\n    this._server.register(packet)\n    if (!silent) {\n      this._server.mdns.respond(packet, cb)\n    }\n  },\n\n  _onServiceUnpublish: function (service, cb) {\n    const index = this._services.indexOf(service)\n\n    this._tearDown(service, cb)\n\n    if (index !== -1) { this._services.splice(index, 1) }\n  },\n\n  _onServicePublish: function (service) {\n    this._services.push(service)\n\n    if (service.probe) { (new Prober(this._server.mdns, service, this._onProbeComplete.bind(this, service))).start() } else { service.announce() }\n  },\n\n  _onProbeComplete: function (service, exists) {\n    if (!exists) { return service.announce() }\n\n    // Handle error\n    service.stop()\n    service.emit('error', new Error('Service name \"' + service.name + '\" is already in use on the network'))\n  }\n\n}\n\nmodule.exports = Registry\n","'use strict'\n\nconst multicastdns = require('multicast-dns')\nconst dnsEqual = require('./utils/dnsEqual')\nconst flatten = require('array-flatten').flatten\nconst helpers = require('./helpers.js')\n\nconst Server = function (opts) {\n  this.mdns = multicastdns(opts)\n  this.mdns.setMaxListeners(0)\n  this.registry = {}\n  this.mdns.on('query', this._respondToQuery.bind(this))\n}\n\nServer.prototype = {\n  _respondToQuery: function (query) {\n    for (let i = 0; i < query.questions.length; i++) {\n      const question = query.questions[i]\n\n      const type = question.type\n      const name = question.name\n\n      // generate the answers section\n      const answers = type === 'ANY'\n        ? flatten(Object.keys(this.registry).map(this._recordsFor.bind(this, name)), 1)\n        : this._recordsFor(name, type)\n\n      if (answers.length === 0) return\n\n      // generate the additionals section\n      let additionals = []\n      if (type !== 'ANY') {\n        answers.forEach(answer => {\n          if (answer.type !== 'PTR') return\n          additionals = additionals\n            .concat(this._recordsFor(answer.data, 'SRV'))\n            .concat(this._recordsFor(answer.data, 'TXT'))\n        })\n\n        // to populate the A and AAAA records, we need to get a set of unique\n        // targets from the SRV record\n        additionals\n          .filter(record => {\n            return record.type === 'SRV'\n          })\n          .map(record => {\n            return record.data.target\n          })\n          .filter(helpers.unique())\n          .forEach(target => {\n            additionals = additionals\n              .concat(this._recordsFor(target, 'A'))\n              .concat(this._recordsFor(target, 'AAAA'))\n          })\n      }\n\n      this.mdns.respond({\n        answers,\n        additionals\n      }, err => {\n        if (err) throw err // TODO: Handle this (if no callback is given, the error will be ignored)\n      })\n    }\n  },\n\n  register: function (records) {\n    if (!Array.isArray(records)) { records = [records] }\n\n    for (let i = 0; i < records.length; i++) {\n      const record = records[i]\n      let subRegistry = this.registry[record.type]\n\n      if (!subRegistry) {\n        subRegistry = this.registry[record.type] = []\n      } else if (subRegistry.some(helpers.isDuplicateRecord(record))) {\n        continue\n      }\n\n      subRegistry.push(record)\n    }\n  },\n\n  unregister: function (records) {\n    if (!Array.isArray(records)) { records = [records] }\n\n    for (let i = 0; i < records.length; i++) {\n      const record = records[i]\n      const type = record.type\n\n      if (!(type in this.registry)) { continue }\n\n      this.registry[type] = this.registry[type].filter(r => {\n        return r.name !== record.name\n      })\n    }\n  },\n\n  _recordsFor: function (name, type) {\n    if (!(type in this.registry)) { return [] }\n\n    return this.registry[type].filter(record => {\n      const recordName = ~name.indexOf('.') ? record.name : record.name.split('.')[0]\n      return dnsEqual(recordName, name)\n    })\n  }\n\n}\n\nmodule.exports = Server\n","'use strict'\n\nconst os = require('os')\nconst util = require('util')\nconst net = require('net')\nconst assert = require('assert')\nconst EventEmitter = require('events').EventEmitter\nconst serviceName = require('multicast-dns-service-types')\nconst network = require('./utils/network')\n\nconst TLD = '.local'\nconst REANNOUNCE_MAX_MS = 60 * 60 * 1000\nconst REANNOUNCE_FACTOR = 3\n\nconst Service = function (opts) {\n  if (!opts.name) throw new Error('Required name not given')\n  if (!opts.type) throw new Error('Required type not given')\n  if (!opts.port) throw new Error('Required port not given')\n\n  this.name = opts.name\n  this.protocol = opts.protocol || 'tcp'\n  this.probe = opts.probe !== false\n  this.type = serviceName.stringify(opts.type, this.protocol)\n  this.host = opts.host || os.hostname()\n  this.port = opts.port\n  this.fqdn = this.name + '.' + this.type + TLD\n  this.subtypes = opts.subtypes || null\n  this.txt = opts.txt || null\n  this.published = false\n\n  // adds the meta query to the records array\n  // this option can only be turned on if only one service is advertised on the responder\n  // otherwise it will break when one service is removed from the network\n  this.addUnsafeServiceEnumerationRecord = opts.addUnsafeServiceEnumerationRecord || false\n\n  this.restrictedAddresses = undefined\n  if (opts.restrictedAddresses) {\n    assert(opts.restrictedAddresses.length, \"The service property 'restrictedAddresses' cannot be an empty array!\")\n    this.restrictedAddresses = new Map()\n\n    for (const entry of opts.restrictedAddresses) {\n      if (net.isIP(entry)) {\n        if (entry === '0.0.0.0' || entry === '::') {\n          throw new Error(`[${this.fqdn}] Unspecified ip address (${entry}) cannot be used to restrict on to!`)\n        }\n\n        const interfaceName = network.resolveInterface(entry)\n        if (!interfaceName) {\n          throw new Error(`[${this.fqdn}] Could not restrict service to address ${entry} as we could not resolve it to an interface name!`)\n        }\n\n        const current = this.restrictedAddresses.get(interfaceName)\n        if (current) {\n          // empty interface signals \"catch all\" was already configured for this\n          if (current.length && !current.includes(entry)) {\n            current.push(entry)\n          }\n        } else {\n          this.restrictedAddresses.set(interfaceName, [entry])\n        }\n      } else {\n        this.restrictedAddresses.set(entry, []) // empty array signals \"use all addresses for interface\"\n      }\n    }\n  }\n\n  this.disabledIpv6 = opts.disabledIpv6 || false\n\n  this._activated = false // indicates intent - true: starting/started, false: stopping/stopped\n}\n\nutil.inherits(Service, EventEmitter)\n\nconst proto = {\n\n  start: function () {\n    if (this._activated) { return }\n\n    this._activated = true\n\n    this.emit('service-publish', this)\n  },\n\n  stop: function (cb) {\n    if (!this._activated) {\n      cb()\n      return\n    }\n\n    this.emit('service-unpublish', this, cb)\n  },\n\n  updateTxt: function (txt, silent) {\n    if (this.packet) { this.emit('service-packet-change', this.packet, this.onAnnounceComplete.bind(this)) }\n    this.packet = null\n    this.txt = txt\n\n    if (!this.published) { return }\n\n    this._unpublish()\n    this.announce(silent)\n  },\n\n  announce: function (silent) {\n    if (this._destroyed) { return }\n\n    if (!this.packet) { this.packet = this._records() }\n\n    if (this.timer) { clearTimeout(this.timer) }\n\n    this.delay = 1000\n    this.emit('service-announce-request', this.packet, silent || false, this.onAnnounceComplete.bind(this))\n  },\n\n  onAnnounceComplete: function () {\n    if (!this.published) {\n      this._activated = true // not sure if this is needed here\n      this.published = true\n      this.emit('up')\n    }\n\n    this.delay = this.delay * REANNOUNCE_FACTOR\n    if (this.delay < REANNOUNCE_MAX_MS && !this._destroyed && this._activated) {\n      this.timer = setTimeout(this.announce.bind(this), this.delay).unref()\n    } else {\n      this.timer = undefined\n      this.delay = undefined\n    }\n  },\n\n  deactivate: function () {\n    this._unpublish()\n    this._activated = false\n  },\n\n  destroy: function () {\n    this._unpublish()\n    this.removeAllListeners()\n    this._destroyed = true\n  },\n\n  _unpublish: function () {\n    if (this.timer) { clearTimeout(this.timer) }\n\n    this.published = false\n  },\n\n  _records: function (teardown) {\n    const records = [this._rrPtr(), this._rrSrv(), this._rrTxt()]\n\n    records.push(...this._addressRecords())\n\n    if (!teardown && this.addUnsafeServiceEnumerationRecord) {\n      records.push(this._rrMetaPtr())\n    }\n\n    return records\n  },\n\n  _addressRecords: function () {\n    const records = []\n    const addresses = []\n\n    Object.entries(os.networkInterfaces()).forEach(([name, interfaces]) => {\n      let restrictedAddresses = this.restrictedAddresses ? this.restrictedAddresses.get(name) : undefined\n      if (this.restrictedAddresses && !restrictedAddresses) {\n        return\n      }\n\n      if (restrictedAddresses && restrictedAddresses.length === 0) {\n        restrictedAddresses = undefined\n      }\n\n      interfaces.forEach(iface => {\n        if (iface.internal || addresses.includes(iface.address)) {\n          return\n        }\n\n        if (restrictedAddresses && restrictedAddresses.includes(iface.address)) {\n          return\n        }\n\n        if (iface.family === 'IPv4') {\n          records.push(this._rrA(iface.address))\n          addresses.push(iface.address)\n        } else if (!this.disabledIpv6) {\n          records.push(this._rrAaaa(iface.address))\n          addresses.push(iface.address)\n        }\n      })\n    })\n\n    return records\n  },\n\n  _rrMetaPtr: function () {\n    return {\n      name: '_services._dns-sd._udp.local',\n      type: 'PTR',\n      ttl: 4500,\n      data: this.type + TLD\n    }\n  },\n\n  _rrPtr: function () {\n    return {\n      name: this.type + TLD,\n      type: 'PTR',\n      ttl: 4500,\n      data: this.fqdn\n    }\n  },\n\n  _rrSrv: function () {\n    return {\n      name: this.fqdn,\n      type: 'SRV',\n      ttl: 120,\n      flush: true,\n      data: {\n        port: this.port,\n        target: this.host\n      }\n    }\n  },\n\n  _rrTxt: function () {\n    const data = []\n    if (this.txt) {\n      const txtRecords = this.txt\n      const keys = Object.keys(txtRecords)\n      keys.forEach((key) => {\n        const val = txtRecords[key]\n        data.push(key + '=' + val)\n      })\n    }\n    return {\n      name: this.fqdn,\n      type: 'TXT',\n      ttl: 4500,\n      flush: true,\n      data\n    }\n  },\n\n  _rrA: function (ip) {\n    return {\n      name: this.host,\n      type: 'A',\n      ttl: 120,\n      flush: true,\n      data: ip\n    }\n  },\n\n  _rrAaaa: function (ip) {\n    return {\n      name: this.host,\n      type: 'AAAA',\n      ttl: 120,\n      flush: true,\n      data: ip\n    }\n  }\n\n}\n\nfor (const x in proto) { Service.prototype[x] = proto[x] }\n\nmodule.exports = Service\n","const deepEqual = require('deep-equal')\n\nmodule.exports = {\n\n  isDuplicateRecord: function (a) {\n    return function (b) {\n      return a.type === b.type &&\n                a.name === b.name &&\n                deepEqual(a.data, b.data)\n    }\n  },\n\n  unique: function () {\n    const set = []\n    return function (obj) {\n      if (~set.indexOf(obj)) return false\n      set.push(obj)\n      return true\n    }\n  }\n\n}\n","'use strict'\n\nconst r = /[A-Z]/g\n\nmodule.exports = function (a, b) {\n  a = a.replace(r, replacer)\n  b = b.replace(r, replacer)\n  return a === b\n}\n\nfunction replacer (m) {\n  return m.toLowerCase()\n}\n","const os = require('os')\n\nfunction resolveInterface (address) {\n  for (const [name, infoArray] of Object.entries(os.networkInterfaces())) {\n    for (const info of infoArray) {\n      if (info.address === address) {\n        return name\n      }\n    }\n  }\n\n  return undefined\n}\n\nmodule.exports = {\n  resolveInterface\n}\n","'use strict'\n\nconst equalSign = Buffer.from('=')\n\nmodule.exports = function (opts) {\n  const binary = opts ? opts.binary : false\n  const that = {}\n\n  that.decodeBlocks = function (bufArray) {\n    const data = {}\n\n    bufArray.forEach(buf => {\n      if (buf.length === 0) {\n        return // ignore: most likely a single zero byte\n      }\n\n      const i = buf.indexOf(equalSign)\n\n      if (i === -1) { // equal sign does not exist\n        data[buf.toString().toLowerCase()] = true\n      } else if (i > 0) { // we ignore zero key-length blocks\n        const key = buf.slice(0, i).toString().toLowerCase()\n\n        if (key in data) { // ignore: overwriting not allowed\n          return\n        }\n\n        const valueBuf = buf.slice(i + 1)\n        data[key] = binary ? valueBuf : valueBuf.toString()\n      }\n    })\n\n    return data\n  }\n\n  return that\n}\n","/* eslint-disable node/no-deprecated-api */\n\nvar toString = Object.prototype.toString\n\nvar isModern = (\n  typeof Buffer !== 'undefined' &&\n  typeof Buffer.alloc === 'function' &&\n  typeof Buffer.allocUnsafe === 'function' &&\n  typeof Buffer.from === 'function'\n)\n\nfunction isArrayBuffer (input) {\n  return toString.call(input).slice(8, -1) === 'ArrayBuffer'\n}\n\nfunction fromArrayBuffer (obj, byteOffset, length) {\n  byteOffset >>>= 0\n\n  var maxLength = obj.byteLength - byteOffset\n\n  if (maxLength < 0) {\n    throw new RangeError(\"'offset' is out of bounds\")\n  }\n\n  if (length === undefined) {\n    length = maxLength\n  } else {\n    length >>>= 0\n\n    if (length > maxLength) {\n      throw new RangeError(\"'length' is out of bounds\")\n    }\n  }\n\n  return isModern\n    ? Buffer.from(obj.slice(byteOffset, byteOffset + length))\n    : new Buffer(new Uint8Array(obj.slice(byteOffset, byteOffset + length)))\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  return isModern\n    ? Buffer.from(string, encoding)\n    : new Buffer(string, encoding)\n}\n\nfunction bufferFrom (value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (isArrayBuffer(value)) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  return isModern\n    ? Buffer.from(value)\n    : new Buffer(value)\n}\n\nmodule.exports = bufferFrom\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBind = require('./');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar GetIntrinsic = require('get-intrinsic');\nvar setFunctionLength = require('set-function-length');\n\nvar $TypeError = require('es-errors/type');\nvar $apply = GetIntrinsic('%Function.prototype.apply%');\nvar $call = GetIntrinsic('%Function.prototype.call%');\nvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\nvar $defineProperty = require('es-define-property');\nvar $max = GetIntrinsic('%Math.max%');\n\nmodule.exports = function callBind(originalFunction) {\n\tif (typeof originalFunction !== 'function') {\n\t\tthrow new $TypeError('a function is required');\n\t}\n\tvar func = $reflectApply(bind, $call, arguments);\n\treturn setFunctionLength(\n\t\tfunc,\n\t\t1 + $max(0, originalFunction.length - (arguments.length - 1)),\n\t\ttrue\n\t);\n};\n\nvar applyBind = function applyBind() {\n\treturn $reflectApply(bind, $apply, arguments);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n","/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.destroy = util.deprecate(\n\t() => {},\n\t'Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.'\n);\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.formatWithOptions()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.formatWithOptions(exports.inspectOpts, ...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.split('\\n')\n\t\t.map(str => str.trim())\n\t\t.join(' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n","'use strict';\n\nvar assign = require('object.assign');\nvar callBound = require('call-bind/callBound');\nvar flags = require('regexp.prototype.flags');\nvar GetIntrinsic = require('get-intrinsic');\nvar getIterator = require('es-get-iterator');\nvar getSideChannel = require('side-channel');\nvar is = require('object-is');\nvar isArguments = require('is-arguments');\nvar isArray = require('isarray');\nvar isArrayBuffer = require('is-array-buffer');\nvar isDate = require('is-date-object');\nvar isRegex = require('is-regex');\nvar isSharedArrayBuffer = require('is-shared-array-buffer');\nvar objectKeys = require('object-keys');\nvar whichBoxedPrimitive = require('which-boxed-primitive');\nvar whichCollection = require('which-collection');\nvar whichTypedArray = require('which-typed-array');\nvar byteLength = require('array-buffer-byte-length');\n\nvar sabByteLength = callBound('SharedArrayBuffer.prototype.byteLength', true);\n\nvar $getTime = callBound('Date.prototype.getTime');\nvar gPO = Object.getPrototypeOf;\nvar $objToString = callBound('Object.prototype.toString');\n\nvar $Set = GetIntrinsic('%Set%', true);\nvar $mapHas = callBound('Map.prototype.has', true);\nvar $mapGet = callBound('Map.prototype.get', true);\nvar $mapSize = callBound('Map.prototype.size', true);\nvar $setAdd = callBound('Set.prototype.add', true);\nvar $setDelete = callBound('Set.prototype.delete', true);\nvar $setHas = callBound('Set.prototype.has', true);\nvar $setSize = callBound('Set.prototype.size', true);\n\n// taken from https://github.com/browserify/commonjs-assert/blob/bba838e9ba9e28edf3127ce6974624208502f6bc/internal/util/comparisons.js#L401-L414\nfunction setHasEqualElement(set, val1, opts, channel) {\n  var i = getIterator(set);\n  var result;\n  while ((result = i.next()) && !result.done) {\n    if (internalDeepEqual(val1, result.value, opts, channel)) { // eslint-disable-line no-use-before-define\n      // Remove the matching element to make sure we do not check that again.\n      $setDelete(set, result.value);\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// taken from https://github.com/browserify/commonjs-assert/blob/bba838e9ba9e28edf3127ce6974624208502f6bc/internal/util/comparisons.js#L416-L439\nfunction findLooseMatchingPrimitives(prim) {\n  if (typeof prim === 'undefined') {\n    return null;\n  }\n  if (typeof prim === 'object') { // Only pass in null as object!\n    return void 0;\n  }\n  if (typeof prim === 'symbol') {\n    return false;\n  }\n  if (typeof prim === 'string' || typeof prim === 'number') {\n    // Loose equal entries exist only if the string is possible to convert to a regular number and not NaN.\n    return +prim === +prim; // eslint-disable-line no-implicit-coercion\n  }\n  return true;\n}\n\n// taken from https://github.com/browserify/commonjs-assert/blob/bba838e9ba9e28edf3127ce6974624208502f6bc/internal/util/comparisons.js#L449-L460\nfunction mapMightHaveLoosePrim(a, b, prim, item, opts, channel) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) {\n    return altValue;\n  }\n  var curB = $mapGet(b, altValue);\n  var looseOpts = assign({}, opts, { strict: false });\n  if (\n    (typeof curB === 'undefined' && !$mapHas(b, altValue))\n    // eslint-disable-next-line no-use-before-define\n    || !internalDeepEqual(item, curB, looseOpts, channel)\n  ) {\n    return false;\n  }\n  // eslint-disable-next-line no-use-before-define\n  return !$mapHas(a, altValue) && internalDeepEqual(item, curB, looseOpts, channel);\n}\n\n// taken from https://github.com/browserify/commonjs-assert/blob/bba838e9ba9e28edf3127ce6974624208502f6bc/internal/util/comparisons.js#L441-L447\nfunction setMightHaveLoosePrim(a, b, prim) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) {\n    return altValue;\n  }\n\n  return $setHas(b, altValue) && !$setHas(a, altValue);\n}\n\n// taken from https://github.com/browserify/commonjs-assert/blob/bba838e9ba9e28edf3127ce6974624208502f6bc/internal/util/comparisons.js#L518-L533\nfunction mapHasEqualEntry(set, map, key1, item1, opts, channel) {\n  var i = getIterator(set);\n  var result;\n  var key2;\n  while ((result = i.next()) && !result.done) {\n    key2 = result.value;\n    if (\n      // eslint-disable-next-line no-use-before-define\n      internalDeepEqual(key1, key2, opts, channel)\n      // eslint-disable-next-line no-use-before-define\n      && internalDeepEqual(item1, $mapGet(map, key2), opts, channel)\n    ) {\n      $setDelete(set, key2);\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction internalDeepEqual(actual, expected, options, channel) {\n  var opts = options || {};\n\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (opts.strict ? is(actual, expected) : actual === expected) {\n    return true;\n  }\n\n  var actualBoxed = whichBoxedPrimitive(actual);\n  var expectedBoxed = whichBoxedPrimitive(expected);\n  if (actualBoxed !== expectedBoxed) {\n    return false;\n  }\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object', equivalence is determined by ==.\n  if (!actual || !expected || (typeof actual !== 'object' && typeof expected !== 'object')) {\n    return opts.strict ? is(actual, expected) : actual == expected; // eslint-disable-line eqeqeq\n  }\n\n  /*\n   * 7.4. For all other Object pairs, including Array objects, equivalence is\n   * determined by having the same number of owned properties (as verified\n   * with Object.prototype.hasOwnProperty.call), the same set of keys\n   * (although not necessarily the same order), equivalent values for every\n   * corresponding key, and an identical 'prototype' property. Note: this\n   * accounts for both named and indexed properties on Arrays.\n   */\n  // see https://github.com/nodejs/node/commit/d3aafd02efd3a403d646a3044adcf14e63a88d32 for memos/channel inspiration\n\n  var hasActual = channel.has(actual);\n  var hasExpected = channel.has(expected);\n  var sentinel;\n  if (hasActual && hasExpected) {\n    if (channel.get(actual) === channel.get(expected)) {\n      return true;\n    }\n  } else {\n    sentinel = {};\n  }\n  if (!hasActual) { channel.set(actual, sentinel); }\n  if (!hasExpected) { channel.set(expected, sentinel); }\n\n  // eslint-disable-next-line no-use-before-define\n  return objEquiv(actual, expected, opts, channel);\n}\n\nfunction isBuffer(x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') {\n    return false;\n  }\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') {\n    return false;\n  }\n\n  return !!(x.constructor && x.constructor.isBuffer && x.constructor.isBuffer(x));\n}\n\nfunction setEquiv(a, b, opts, channel) {\n  if ($setSize(a) !== $setSize(b)) {\n    return false;\n  }\n  var iA = getIterator(a);\n  var iB = getIterator(b);\n  var resultA;\n  var resultB;\n  var set;\n  while ((resultA = iA.next()) && !resultA.done) {\n    if (resultA.value && typeof resultA.value === 'object') {\n      if (!set) { set = new $Set(); }\n      $setAdd(set, resultA.value);\n    } else if (!$setHas(b, resultA.value)) {\n      if (opts.strict) { return false; }\n      if (!setMightHaveLoosePrim(a, b, resultA.value)) {\n        return false;\n      }\n      if (!set) { set = new $Set(); }\n      $setAdd(set, resultA.value);\n    }\n  }\n  if (set) {\n    while ((resultB = iB.next()) && !resultB.done) {\n      // We have to check if a primitive value is already matching and only if it's not, go hunting for it.\n      if (resultB.value && typeof resultB.value === 'object') {\n        if (!setHasEqualElement(set, resultB.value, opts.strict, channel)) {\n          return false;\n        }\n      } else if (\n        !opts.strict\n        && !$setHas(a, resultB.value)\n        && !setHasEqualElement(set, resultB.value, opts.strict, channel)\n      ) {\n        return false;\n      }\n    }\n    return $setSize(set) === 0;\n  }\n  return true;\n}\n\nfunction mapEquiv(a, b, opts, channel) {\n  if ($mapSize(a) !== $mapSize(b)) {\n    return false;\n  }\n  var iA = getIterator(a);\n  var iB = getIterator(b);\n  var resultA;\n  var resultB;\n  var set;\n  var key;\n  var item1;\n  var item2;\n  while ((resultA = iA.next()) && !resultA.done) {\n    key = resultA.value[0];\n    item1 = resultA.value[1];\n    if (key && typeof key === 'object') {\n      if (!set) { set = new $Set(); }\n      $setAdd(set, key);\n    } else {\n      item2 = $mapGet(b, key);\n      if ((typeof item2 === 'undefined' && !$mapHas(b, key)) || !internalDeepEqual(item1, item2, opts, channel)) {\n        if (opts.strict) {\n          return false;\n        }\n        if (!mapMightHaveLoosePrim(a, b, key, item1, opts, channel)) {\n          return false;\n        }\n        if (!set) { set = new $Set(); }\n        $setAdd(set, key);\n      }\n    }\n  }\n\n  if (set) {\n    while ((resultB = iB.next()) && !resultB.done) {\n      key = resultB.value[0];\n      item2 = resultB.value[1];\n      if (key && typeof key === 'object') {\n        if (!mapHasEqualEntry(set, a, key, item2, opts, channel)) {\n          return false;\n        }\n      } else if (\n        !opts.strict\n        && (!a.has(key) || !internalDeepEqual($mapGet(a, key), item2, opts, channel))\n        && !mapHasEqualEntry(set, a, key, item2, assign({}, opts, { strict: false }), channel)\n      ) {\n        return false;\n      }\n    }\n    return $setSize(set) === 0;\n  }\n  return true;\n}\n\nfunction objEquiv(a, b, opts, channel) {\n  /* eslint max-statements: [2, 100], max-lines-per-function: [2, 120], max-depth: [2, 5], max-lines: [2, 400] */\n  var i, key;\n\n  if (typeof a !== typeof b) { return false; }\n  if (a == null || b == null) { return false; }\n\n  if ($objToString(a) !== $objToString(b)) { return false; }\n\n  if (isArguments(a) !== isArguments(b)) { return false; }\n\n  var aIsArray = isArray(a);\n  var bIsArray = isArray(b);\n  if (aIsArray !== bIsArray) { return false; }\n\n  // TODO: replace when a cross-realm brand check is available\n  var aIsError = a instanceof Error;\n  var bIsError = b instanceof Error;\n  if (aIsError !== bIsError) { return false; }\n  if (aIsError || bIsError) {\n    if (a.name !== b.name || a.message !== b.message) { return false; }\n  }\n\n  var aIsRegex = isRegex(a);\n  var bIsRegex = isRegex(b);\n  if (aIsRegex !== bIsRegex) { return false; }\n  if ((aIsRegex || bIsRegex) && (a.source !== b.source || flags(a) !== flags(b))) {\n    return false;\n  }\n\n  var aIsDate = isDate(a);\n  var bIsDate = isDate(b);\n  if (aIsDate !== bIsDate) { return false; }\n  if (aIsDate || bIsDate) { // && would work too, because both are true or both false here\n    if ($getTime(a) !== $getTime(b)) { return false; }\n  }\n  if (opts.strict && gPO && gPO(a) !== gPO(b)) { return false; }\n\n  var aWhich = whichTypedArray(a);\n  var bWhich = whichTypedArray(b);\n  if (aWhich !== bWhich) {\n    return false;\n  }\n  if (aWhich || bWhich) { // && would work too, because both are true or both false here\n    if (a.length !== b.length) { return false; }\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) { return false; }\n    }\n    return true;\n  }\n\n  var aIsBuffer = isBuffer(a);\n  var bIsBuffer = isBuffer(b);\n  if (aIsBuffer !== bIsBuffer) { return false; }\n  if (aIsBuffer || bIsBuffer) { // && would work too, because both are true or both false here\n    if (a.length !== b.length) { return false; }\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) { return false; }\n    }\n    return true;\n  }\n\n  var aIsArrayBuffer = isArrayBuffer(a);\n  var bIsArrayBuffer = isArrayBuffer(b);\n  if (aIsArrayBuffer !== bIsArrayBuffer) { return false; }\n  if (aIsArrayBuffer || bIsArrayBuffer) { // && would work too, because both are true or both false here\n    if (byteLength(a) !== byteLength(b)) { return false; }\n    return typeof Uint8Array === 'function' && internalDeepEqual(new Uint8Array(a), new Uint8Array(b), opts, channel);\n  }\n\n  var aIsSAB = isSharedArrayBuffer(a);\n  var bIsSAB = isSharedArrayBuffer(b);\n  if (aIsSAB !== bIsSAB) { return false; }\n  if (aIsSAB || bIsSAB) { // && would work too, because both are true or both false here\n    if (sabByteLength(a) !== sabByteLength(b)) { return false; }\n    return typeof Uint8Array === 'function' && internalDeepEqual(new Uint8Array(a), new Uint8Array(b), opts, channel);\n  }\n\n  if (typeof a !== typeof b) { return false; }\n\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  // having the same number of owned properties (keys incorporates hasOwnProperty)\n  if (ka.length !== kb.length) { return false; }\n\n  // the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  // ~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i]) { return false; } // eslint-disable-line eqeqeq\n  }\n\n  // equivalent values for every corresponding key, and ~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!internalDeepEqual(a[key], b[key], opts, channel)) { return false; }\n  }\n\n  var aCollection = whichCollection(a);\n  var bCollection = whichCollection(b);\n  if (aCollection !== bCollection) {\n    return false;\n  }\n  if (aCollection === 'Set' || bCollection === 'Set') { // aCollection === bCollection\n    return setEquiv(a, b, opts, channel);\n  }\n  if (aCollection === 'Map') { // aCollection === bCollection\n    return mapEquiv(a, b, opts, channel);\n  }\n\n  return true;\n}\n\nmodule.exports = function deepEqual(a, b, opts) {\n  return internalDeepEqual(a, b, opts, getSideChannel());\n};\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\n\nvar gopd = require('gopd');\n\n/** @type {import('.')} */\nmodule.exports = function defineDataProperty(\n\tobj,\n\tproperty,\n\tvalue\n) {\n\tif (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n\t\tthrow new $TypeError('`obj` must be an object or a function`');\n\t}\n\tif (typeof property !== 'string' && typeof property !== 'symbol') {\n\t\tthrow new $TypeError('`property` must be a string or a symbol`');\n\t}\n\tif (arguments.length > 3 && typeof arguments[3] !== 'boolean' && arguments[3] !== null) {\n\t\tthrow new $TypeError('`nonEnumerable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 4 && typeof arguments[4] !== 'boolean' && arguments[4] !== null) {\n\t\tthrow new $TypeError('`nonWritable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 5 && typeof arguments[5] !== 'boolean' && arguments[5] !== null) {\n\t\tthrow new $TypeError('`nonConfigurable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 6 && typeof arguments[6] !== 'boolean') {\n\t\tthrow new $TypeError('`loose`, if provided, must be a boolean');\n\t}\n\n\tvar nonEnumerable = arguments.length > 3 ? arguments[3] : null;\n\tvar nonWritable = arguments.length > 4 ? arguments[4] : null;\n\tvar nonConfigurable = arguments.length > 5 ? arguments[5] : null;\n\tvar loose = arguments.length > 6 ? arguments[6] : false;\n\n\t/* @type {false | TypedPropertyDescriptor<unknown>} */\n\tvar desc = !!gopd && gopd(obj, property);\n\n\tif ($defineProperty) {\n\t\t$defineProperty(obj, property, {\n\t\t\tconfigurable: nonConfigurable === null && desc ? desc.configurable : !nonConfigurable,\n\t\t\tenumerable: nonEnumerable === null && desc ? desc.enumerable : !nonEnumerable,\n\t\t\tvalue: value,\n\t\t\twritable: nonWritable === null && desc ? desc.writable : !nonWritable\n\t\t});\n\t} else if (loose || (!nonEnumerable && !nonWritable && !nonConfigurable)) {\n\t\t// must fall back to [[Set]], and was not explicitly asked to make non-enumerable, non-writable, or non-configurable\n\t\tobj[property] = value; // eslint-disable-line no-param-reassign\n\t} else {\n\t\tthrow new $SyntaxError('This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.');\n\t}\n};\n","'use strict';\n\nvar keys = require('object-keys');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';\n\nvar toStr = Object.prototype.toString;\nvar concat = Array.prototype.concat;\nvar defineDataProperty = require('define-data-property');\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar supportsDescriptors = require('has-property-descriptors')();\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object) {\n\t\tif (predicate === true) {\n\t\t\tif (object[name] === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (!isFunction(predicate) || !predicate()) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (supportsDescriptors) {\n\t\tdefineDataProperty(object, name, value, true);\n\t} else {\n\t\tdefineDataProperty(object, name, value);\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = concat.call(props, Object.getOwnPropertySymbols(map));\n\t}\n\tfor (var i = 0; i < props.length; i += 1) {\n\t\tdefineProperty(object, props[i], map[props[i]], predicates[props[i]]);\n\t}\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n","'use strict'\n\nexports.toString = function (klass) {\n  switch (klass) {\n    case 1: return 'IN'\n    case 2: return 'CS'\n    case 3: return 'CH'\n    case 4: return 'HS'\n    case 255: return 'ANY'\n  }\n  return 'UNKNOWN_' + klass\n}\n\nexports.toClass = function (name) {\n  switch (name.toUpperCase()) {\n    case 'IN': return 1\n    case 'CS': return 2\n    case 'CH': return 3\n    case 'HS': return 4\n    case 'ANY': return 255\n  }\n  return 0\n}\n","'use strict'\n\nconst Buffer = require('buffer').Buffer\nconst types = require('./types')\nconst rcodes = require('./rcodes')\nconst opcodes = require('./opcodes')\nconst classes = require('./classes')\nconst optioncodes = require('./optioncodes')\nconst ip = require('@leichtgewicht/ip-codec')\n\nconst QUERY_FLAG = 0\nconst RESPONSE_FLAG = 1 << 15\nconst FLUSH_MASK = 1 << 15\nconst NOT_FLUSH_MASK = ~FLUSH_MASK\nconst QU_MASK = 1 << 15\nconst NOT_QU_MASK = ~QU_MASK\n\nconst name = exports.name = {}\n\nname.encode = function (str, buf, offset, { mail = false } = {}) {\n  if (!buf) buf = Buffer.alloc(name.encodingLength(str))\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  // strip leading and trailing .\n  const n = str.replace(/^\\.|\\.$/gm, '')\n  if (n.length) {\n    let list = []\n    if (mail) {\n      let localPart = ''\n      n.split('.').forEach(label => {\n        if (label.endsWith('\\\\')) {\n          localPart += (localPart.length ? '.' : '') + label.slice(0, -1)\n        } else {\n          if (list.length === 0 && localPart.length) {\n            list.push(localPart + '.' + label)\n          } else {\n            list.push(label)\n          }\n        }\n      })\n    } else {\n      list = n.split('.')\n    }\n\n    for (let i = 0; i < list.length; i++) {\n      const len = buf.write(list[i], offset + 1)\n      buf[offset] = len\n      offset += len + 1\n    }\n  }\n\n  buf[offset++] = 0\n\n  name.encode.bytes = offset - oldOffset\n  return buf\n}\n\nname.encode.bytes = 0\n\nname.decode = function (buf, offset, { mail = false } = {}) {\n  if (!offset) offset = 0\n\n  const list = []\n  let oldOffset = offset\n  let totalLength = 0\n  let consumedBytes = 0\n  let jumped = false\n\n  while (true) {\n    if (offset >= buf.length) {\n      throw new Error('Cannot decode name (buffer overflow)')\n    }\n    const len = buf[offset++]\n    consumedBytes += jumped ? 0 : 1\n\n    if (len === 0) {\n      break\n    } else if ((len & 0xc0) === 0) {\n      if (offset + len > buf.length) {\n        throw new Error('Cannot decode name (buffer overflow)')\n      }\n      totalLength += len + 1\n      if (totalLength > 254) {\n        throw new Error('Cannot decode name (name too long)')\n      }\n      let label = buf.toString('utf-8', offset, offset + len)\n      if (mail) {\n        label = label.replace(/\\./g, '\\\\.')\n      }\n      list.push(label)\n      offset += len\n      consumedBytes += jumped ? 0 : len\n    } else if ((len & 0xc0) === 0xc0) {\n      if (offset + 1 > buf.length) {\n        throw new Error('Cannot decode name (buffer overflow)')\n      }\n      const jumpOffset = buf.readUInt16BE(offset - 1) - 0xc000\n      if (jumpOffset >= oldOffset) {\n        // Allow only pointers to prior data. RFC 1035, section 4.1.4 states:\n        // \"[...] an entire domain name or a list of labels at the end of a domain name\n        // is replaced with a pointer to a prior occurance (sic) of the same name.\"\n        throw new Error('Cannot decode name (bad pointer)')\n      }\n      offset = jumpOffset\n      oldOffset = jumpOffset\n      consumedBytes += jumped ? 0 : 1\n      jumped = true\n    } else {\n      throw new Error('Cannot decode name (bad label)')\n    }\n  }\n\n  name.decode.bytes = consumedBytes\n  return list.length === 0 ? '.' : list.join('.')\n}\n\nname.decode.bytes = 0\n\nname.encodingLength = function (n) {\n  if (n === '.' || n === '..') return 1\n  return Buffer.byteLength(n.replace(/^\\.|\\.$/gm, '')) + 2\n}\n\nconst string = {}\n\nstring.encode = function (s, buf, offset) {\n  if (!buf) buf = Buffer.alloc(string.encodingLength(s))\n  if (!offset) offset = 0\n\n  const len = buf.write(s, offset + 1)\n  buf[offset] = len\n  string.encode.bytes = len + 1\n  return buf\n}\n\nstring.encode.bytes = 0\n\nstring.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  const len = buf[offset]\n  const s = buf.toString('utf-8', offset + 1, offset + 1 + len)\n  string.decode.bytes = len + 1\n  return s\n}\n\nstring.decode.bytes = 0\n\nstring.encodingLength = function (s) {\n  return Buffer.byteLength(s) + 1\n}\n\nconst header = {}\n\nheader.encode = function (h, buf, offset) {\n  if (!buf) buf = header.encodingLength(h)\n  if (!offset) offset = 0\n\n  const flags = (h.flags || 0) & 32767\n  const type = h.type === 'response' ? RESPONSE_FLAG : QUERY_FLAG\n\n  buf.writeUInt16BE(h.id || 0, offset)\n  buf.writeUInt16BE(flags | type, offset + 2)\n  buf.writeUInt16BE(h.questions.length, offset + 4)\n  buf.writeUInt16BE(h.answers.length, offset + 6)\n  buf.writeUInt16BE(h.authorities.length, offset + 8)\n  buf.writeUInt16BE(h.additionals.length, offset + 10)\n\n  return buf\n}\n\nheader.encode.bytes = 12\n\nheader.decode = function (buf, offset) {\n  if (!offset) offset = 0\n  if (buf.length < 12) throw new Error('Header must be 12 bytes')\n  const flags = buf.readUInt16BE(offset + 2)\n\n  return {\n    id: buf.readUInt16BE(offset),\n    type: flags & RESPONSE_FLAG ? 'response' : 'query',\n    flags: flags & 32767,\n    flag_qr: ((flags >> 15) & 0x1) === 1,\n    opcode: opcodes.toString((flags >> 11) & 0xf),\n    flag_aa: ((flags >> 10) & 0x1) === 1,\n    flag_tc: ((flags >> 9) & 0x1) === 1,\n    flag_rd: ((flags >> 8) & 0x1) === 1,\n    flag_ra: ((flags >> 7) & 0x1) === 1,\n    flag_z: ((flags >> 6) & 0x1) === 1,\n    flag_ad: ((flags >> 5) & 0x1) === 1,\n    flag_cd: ((flags >> 4) & 0x1) === 1,\n    rcode: rcodes.toString(flags & 0xf),\n    questions: new Array(buf.readUInt16BE(offset + 4)),\n    answers: new Array(buf.readUInt16BE(offset + 6)),\n    authorities: new Array(buf.readUInt16BE(offset + 8)),\n    additionals: new Array(buf.readUInt16BE(offset + 10))\n  }\n}\n\nheader.decode.bytes = 12\n\nheader.encodingLength = function () {\n  return 12\n}\n\nconst runknown = exports.unknown = {}\n\nrunknown.encode = function (data, buf, offset) {\n  if (!buf) buf = Buffer.alloc(runknown.encodingLength(data))\n  if (!offset) offset = 0\n\n  buf.writeUInt16BE(data.length, offset)\n  data.copy(buf, offset + 2)\n\n  runknown.encode.bytes = data.length + 2\n  return buf\n}\n\nrunknown.encode.bytes = 0\n\nrunknown.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  const len = buf.readUInt16BE(offset)\n  const data = buf.slice(offset + 2, offset + 2 + len)\n  runknown.decode.bytes = len + 2\n  return data\n}\n\nrunknown.decode.bytes = 0\n\nrunknown.encodingLength = function (data) {\n  return data.length + 2\n}\n\nconst rns = exports.ns = {}\n\nrns.encode = function (data, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rns.encodingLength(data))\n  if (!offset) offset = 0\n\n  name.encode(data, buf, offset + 2)\n  buf.writeUInt16BE(name.encode.bytes, offset)\n  rns.encode.bytes = name.encode.bytes + 2\n  return buf\n}\n\nrns.encode.bytes = 0\n\nrns.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  const len = buf.readUInt16BE(offset)\n  const dd = name.decode(buf, offset + 2)\n\n  rns.decode.bytes = len + 2\n  return dd\n}\n\nrns.decode.bytes = 0\n\nrns.encodingLength = function (data) {\n  return name.encodingLength(data) + 2\n}\n\nconst rsoa = exports.soa = {}\n\nrsoa.encode = function (data, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rsoa.encodingLength(data))\n  if (!offset) offset = 0\n\n  const oldOffset = offset\n  offset += 2\n  name.encode(data.mname, buf, offset)\n  offset += name.encode.bytes\n  name.encode(data.rname, buf, offset, { mail: true })\n  offset += name.encode.bytes\n  buf.writeUInt32BE(data.serial || 0, offset)\n  offset += 4\n  buf.writeUInt32BE(data.refresh || 0, offset)\n  offset += 4\n  buf.writeUInt32BE(data.retry || 0, offset)\n  offset += 4\n  buf.writeUInt32BE(data.expire || 0, offset)\n  offset += 4\n  buf.writeUInt32BE(data.minimum || 0, offset)\n  offset += 4\n\n  buf.writeUInt16BE(offset - oldOffset - 2, oldOffset)\n  rsoa.encode.bytes = offset - oldOffset\n  return buf\n}\n\nrsoa.encode.bytes = 0\n\nrsoa.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  const oldOffset = offset\n\n  const data = {}\n  offset += 2\n  data.mname = name.decode(buf, offset)\n  offset += name.decode.bytes\n  data.rname = name.decode(buf, offset, { mail: true })\n  offset += name.decode.bytes\n  data.serial = buf.readUInt32BE(offset)\n  offset += 4\n  data.refresh = buf.readUInt32BE(offset)\n  offset += 4\n  data.retry = buf.readUInt32BE(offset)\n  offset += 4\n  data.expire = buf.readUInt32BE(offset)\n  offset += 4\n  data.minimum = buf.readUInt32BE(offset)\n  offset += 4\n\n  rsoa.decode.bytes = offset - oldOffset\n  return data\n}\n\nrsoa.decode.bytes = 0\n\nrsoa.encodingLength = function (data) {\n  return 22 + name.encodingLength(data.mname) + name.encodingLength(data.rname)\n}\n\nconst rtxt = exports.txt = {}\n\nrtxt.encode = function (data, buf, offset) {\n  if (!Array.isArray(data)) data = [data]\n  for (let i = 0; i < data.length; i++) {\n    if (typeof data[i] === 'string') {\n      data[i] = Buffer.from(data[i])\n    }\n    if (!Buffer.isBuffer(data[i])) {\n      throw new Error('Must be a Buffer')\n    }\n  }\n\n  if (!buf) buf = Buffer.alloc(rtxt.encodingLength(data))\n  if (!offset) offset = 0\n\n  const oldOffset = offset\n  offset += 2\n\n  data.forEach(function (d) {\n    buf[offset++] = d.length\n    d.copy(buf, offset, 0, d.length)\n    offset += d.length\n  })\n\n  buf.writeUInt16BE(offset - oldOffset - 2, oldOffset)\n  rtxt.encode.bytes = offset - oldOffset\n  return buf\n}\n\nrtxt.encode.bytes = 0\n\nrtxt.decode = function (buf, offset) {\n  if (!offset) offset = 0\n  const oldOffset = offset\n  let remaining = buf.readUInt16BE(offset)\n  offset += 2\n\n  let data = []\n  while (remaining > 0) {\n    const len = buf[offset++]\n    --remaining\n    if (remaining < len) {\n      throw new Error('Buffer overflow')\n    }\n    data.push(buf.slice(offset, offset + len))\n    offset += len\n    remaining -= len\n  }\n\n  rtxt.decode.bytes = offset - oldOffset\n  return data\n}\n\nrtxt.decode.bytes = 0\n\nrtxt.encodingLength = function (data) {\n  if (!Array.isArray(data)) data = [data]\n  let length = 2\n  data.forEach(function (buf) {\n    if (typeof buf === 'string') {\n      length += Buffer.byteLength(buf) + 1\n    } else {\n      length += buf.length + 1\n    }\n  })\n  return length\n}\n\nconst rnull = exports.null = {}\n\nrnull.encode = function (data, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rnull.encodingLength(data))\n  if (!offset) offset = 0\n\n  if (typeof data === 'string') data = Buffer.from(data)\n  if (!data) data = Buffer.alloc(0)\n\n  const oldOffset = offset\n  offset += 2\n\n  const len = data.length\n  data.copy(buf, offset, 0, len)\n  offset += len\n\n  buf.writeUInt16BE(offset - oldOffset - 2, oldOffset)\n  rnull.encode.bytes = offset - oldOffset\n  return buf\n}\n\nrnull.encode.bytes = 0\n\nrnull.decode = function (buf, offset) {\n  if (!offset) offset = 0\n  const oldOffset = offset\n  const len = buf.readUInt16BE(offset)\n\n  offset += 2\n\n  const data = buf.slice(offset, offset + len)\n  offset += len\n\n  rnull.decode.bytes = offset - oldOffset\n  return data\n}\n\nrnull.decode.bytes = 0\n\nrnull.encodingLength = function (data) {\n  if (!data) return 2\n  return (Buffer.isBuffer(data) ? data.length : Buffer.byteLength(data)) + 2\n}\n\nconst rhinfo = exports.hinfo = {}\n\nrhinfo.encode = function (data, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rhinfo.encodingLength(data))\n  if (!offset) offset = 0\n\n  const oldOffset = offset\n  offset += 2\n  string.encode(data.cpu, buf, offset)\n  offset += string.encode.bytes\n  string.encode(data.os, buf, offset)\n  offset += string.encode.bytes\n  buf.writeUInt16BE(offset - oldOffset - 2, oldOffset)\n  rhinfo.encode.bytes = offset - oldOffset\n  return buf\n}\n\nrhinfo.encode.bytes = 0\n\nrhinfo.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  const oldOffset = offset\n\n  const data = {}\n  offset += 2\n  data.cpu = string.decode(buf, offset)\n  offset += string.decode.bytes\n  data.os = string.decode(buf, offset)\n  offset += string.decode.bytes\n  rhinfo.decode.bytes = offset - oldOffset\n  return data\n}\n\nrhinfo.decode.bytes = 0\n\nrhinfo.encodingLength = function (data) {\n  return string.encodingLength(data.cpu) + string.encodingLength(data.os) + 2\n}\n\nconst rptr = exports.ptr = {}\nconst rcname = exports.cname = rptr\nconst rdname = exports.dname = rptr\n\nrptr.encode = function (data, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rptr.encodingLength(data))\n  if (!offset) offset = 0\n\n  name.encode(data, buf, offset + 2)\n  buf.writeUInt16BE(name.encode.bytes, offset)\n  rptr.encode.bytes = name.encode.bytes + 2\n  return buf\n}\n\nrptr.encode.bytes = 0\n\nrptr.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  const data = name.decode(buf, offset + 2)\n  rptr.decode.bytes = name.decode.bytes + 2\n  return data\n}\n\nrptr.decode.bytes = 0\n\nrptr.encodingLength = function (data) {\n  return name.encodingLength(data) + 2\n}\n\nconst rsrv = exports.srv = {}\n\nrsrv.encode = function (data, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rsrv.encodingLength(data))\n  if (!offset) offset = 0\n\n  buf.writeUInt16BE(data.priority || 0, offset + 2)\n  buf.writeUInt16BE(data.weight || 0, offset + 4)\n  buf.writeUInt16BE(data.port || 0, offset + 6)\n  name.encode(data.target, buf, offset + 8)\n\n  const len = name.encode.bytes + 6\n  buf.writeUInt16BE(len, offset)\n\n  rsrv.encode.bytes = len + 2\n  return buf\n}\n\nrsrv.encode.bytes = 0\n\nrsrv.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  const len = buf.readUInt16BE(offset)\n\n  const data = {}\n  data.priority = buf.readUInt16BE(offset + 2)\n  data.weight = buf.readUInt16BE(offset + 4)\n  data.port = buf.readUInt16BE(offset + 6)\n  data.target = name.decode(buf, offset + 8)\n\n  rsrv.decode.bytes = len + 2\n  return data\n}\n\nrsrv.decode.bytes = 0\n\nrsrv.encodingLength = function (data) {\n  return 8 + name.encodingLength(data.target)\n}\n\nconst rcaa = exports.caa = {}\n\nrcaa.ISSUER_CRITICAL = 1 << 7\n\nrcaa.encode = function (data, buf, offset) {\n  const len = rcaa.encodingLength(data)\n\n  if (!buf) buf = Buffer.alloc(rcaa.encodingLength(data))\n  if (!offset) offset = 0\n\n  if (data.issuerCritical) {\n    data.flags = rcaa.ISSUER_CRITICAL\n  }\n\n  buf.writeUInt16BE(len - 2, offset)\n  offset += 2\n  buf.writeUInt8(data.flags || 0, offset)\n  offset += 1\n  string.encode(data.tag, buf, offset)\n  offset += string.encode.bytes\n  buf.write(data.value, offset)\n  offset += Buffer.byteLength(data.value)\n\n  rcaa.encode.bytes = len\n  return buf\n}\n\nrcaa.encode.bytes = 0\n\nrcaa.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  const len = buf.readUInt16BE(offset)\n  offset += 2\n\n  const oldOffset = offset\n  const data = {}\n  data.flags = buf.readUInt8(offset)\n  offset += 1\n  data.tag = string.decode(buf, offset)\n  offset += string.decode.bytes\n  data.value = buf.toString('utf-8', offset, oldOffset + len)\n\n  data.issuerCritical = !!(data.flags & rcaa.ISSUER_CRITICAL)\n\n  rcaa.decode.bytes = len + 2\n\n  return data\n}\n\nrcaa.decode.bytes = 0\n\nrcaa.encodingLength = function (data) {\n  return string.encodingLength(data.tag) + string.encodingLength(data.value) + 2\n}\n\nconst rmx = exports.mx = {}\n\nrmx.encode = function (data, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rmx.encodingLength(data))\n  if (!offset) offset = 0\n\n  const oldOffset = offset\n  offset += 2\n  buf.writeUInt16BE(data.preference || 0, offset)\n  offset += 2\n  name.encode(data.exchange, buf, offset)\n  offset += name.encode.bytes\n\n  buf.writeUInt16BE(offset - oldOffset - 2, oldOffset)\n  rmx.encode.bytes = offset - oldOffset\n  return buf\n}\n\nrmx.encode.bytes = 0\n\nrmx.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  const oldOffset = offset\n\n  const data = {}\n  offset += 2\n  data.preference = buf.readUInt16BE(offset)\n  offset += 2\n  data.exchange = name.decode(buf, offset)\n  offset += name.decode.bytes\n\n  rmx.decode.bytes = offset - oldOffset\n  return data\n}\n\nrmx.encodingLength = function (data) {\n  return 4 + name.encodingLength(data.exchange)\n}\n\nconst ra = exports.a = {}\n\nra.encode = function (host, buf, offset) {\n  if (!buf) buf = Buffer.alloc(ra.encodingLength(host))\n  if (!offset) offset = 0\n\n  buf.writeUInt16BE(4, offset)\n  offset += 2\n  ip.v4.encode(host, buf, offset)\n  ra.encode.bytes = 6\n  return buf\n}\n\nra.encode.bytes = 0\n\nra.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  offset += 2\n  const host = ip.v4.decode(buf, offset)\n  ra.decode.bytes = 6\n  return host\n}\n\nra.decode.bytes = 0\n\nra.encodingLength = function () {\n  return 6\n}\n\nconst raaaa = exports.aaaa = {}\n\nraaaa.encode = function (host, buf, offset) {\n  if (!buf) buf = Buffer.alloc(raaaa.encodingLength(host))\n  if (!offset) offset = 0\n\n  buf.writeUInt16BE(16, offset)\n  offset += 2\n  ip.v6.encode(host, buf, offset)\n  raaaa.encode.bytes = 18\n  return buf\n}\n\nraaaa.encode.bytes = 0\n\nraaaa.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  offset += 2\n  const host = ip.v6.decode(buf, offset)\n  raaaa.decode.bytes = 18\n  return host\n}\n\nraaaa.decode.bytes = 0\n\nraaaa.encodingLength = function () {\n  return 18\n}\n\nconst roption = exports.option = {}\n\nroption.encode = function (option, buf, offset) {\n  if (!buf) buf = Buffer.alloc(roption.encodingLength(option))\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  const code = optioncodes.toCode(option.code)\n  buf.writeUInt16BE(code, offset)\n  offset += 2\n  if (option.data) {\n    buf.writeUInt16BE(option.data.length, offset)\n    offset += 2\n    option.data.copy(buf, offset)\n    offset += option.data.length\n  } else {\n    switch (code) {\n      // case 3: NSID.  No encode makes sense.\n      // case 5,6,7: Not implementable\n      case 8: // ECS\n        // note: do IP math before calling\n        const spl = option.sourcePrefixLength || 0\n        const fam = option.family || ip.familyOf(option.ip)\n        const ipBuf = ip.encode(option.ip, Buffer.alloc)\n        const ipLen = Math.ceil(spl / 8)\n        buf.writeUInt16BE(ipLen + 4, offset)\n        offset += 2\n        buf.writeUInt16BE(fam, offset)\n        offset += 2\n        buf.writeUInt8(spl, offset++)\n        buf.writeUInt8(option.scopePrefixLength || 0, offset++)\n\n        ipBuf.copy(buf, offset, 0, ipLen)\n        offset += ipLen\n        break\n      // case 9: EXPIRE (experimental)\n      // case 10: COOKIE.  No encode makes sense.\n      case 11: // KEEP-ALIVE\n        if (option.timeout) {\n          buf.writeUInt16BE(2, offset)\n          offset += 2\n          buf.writeUInt16BE(option.timeout, offset)\n          offset += 2\n        } else {\n          buf.writeUInt16BE(0, offset)\n          offset += 2\n        }\n        break\n      case 12: // PADDING\n        const len = option.length || 0\n        buf.writeUInt16BE(len, offset)\n        offset += 2\n        buf.fill(0, offset, offset + len)\n        offset += len\n        break\n      // case 13:  CHAIN.  Experimental.\n      case 14: // KEY-TAG\n        const tagsLen = option.tags.length * 2\n        buf.writeUInt16BE(tagsLen, offset)\n        offset += 2\n        for (const tag of option.tags) {\n          buf.writeUInt16BE(tag, offset)\n          offset += 2\n        }\n        break\n      default:\n        throw new Error(`Unknown roption code: ${option.code}`)\n    }\n  }\n\n  roption.encode.bytes = offset - oldOffset\n  return buf\n}\n\nroption.encode.bytes = 0\n\nroption.decode = function (buf, offset) {\n  if (!offset) offset = 0\n  const option = {}\n  option.code = buf.readUInt16BE(offset)\n  option.type = optioncodes.toString(option.code)\n  offset += 2\n  const len = buf.readUInt16BE(offset)\n  offset += 2\n  option.data = buf.slice(offset, offset + len)\n  switch (option.code) {\n    // case 3: NSID.  No decode makes sense.\n    case 8: // ECS\n      option.family = buf.readUInt16BE(offset)\n      offset += 2\n      option.sourcePrefixLength = buf.readUInt8(offset++)\n      option.scopePrefixLength = buf.readUInt8(offset++)\n      const padded = Buffer.alloc((option.family === 1) ? 4 : 16)\n      buf.copy(padded, 0, offset, offset + len - 4)\n      option.ip = ip.decode(padded)\n      break\n    // case 12: Padding.  No decode makes sense.\n    case 11: // KEEP-ALIVE\n      if (len > 0) {\n        option.timeout = buf.readUInt16BE(offset)\n        offset += 2\n      }\n      break\n    case 14:\n      option.tags = []\n      for (let i = 0; i < len; i += 2) {\n        option.tags.push(buf.readUInt16BE(offset))\n        offset += 2\n      }\n    // don't worry about default.  caller will use data if desired\n  }\n\n  roption.decode.bytes = len + 4\n  return option\n}\n\nroption.decode.bytes = 0\n\nroption.encodingLength = function (option) {\n  if (option.data) {\n    return option.data.length + 4\n  }\n  const code = optioncodes.toCode(option.code)\n  switch (code) {\n    case 8: // ECS\n      const spl = option.sourcePrefixLength || 0\n      return Math.ceil(spl / 8) + 8\n    case 11: // KEEP-ALIVE\n      return (typeof option.timeout === 'number') ? 6 : 4\n    case 12: // PADDING\n      return option.length + 4\n    case 14: // KEY-TAG\n      return 4 + (option.tags.length * 2)\n  }\n  throw new Error(`Unknown roption code: ${option.code}`)\n}\n\nconst ropt = exports.opt = {}\n\nropt.encode = function (options, buf, offset) {\n  if (!buf) buf = Buffer.alloc(ropt.encodingLength(options))\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  const rdlen = encodingLengthList(options, roption)\n  buf.writeUInt16BE(rdlen, offset)\n  offset = encodeList(options, roption, buf, offset + 2)\n\n  ropt.encode.bytes = offset - oldOffset\n  return buf\n}\n\nropt.encode.bytes = 0\n\nropt.decode = function (buf, offset) {\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  const options = []\n  let rdlen = buf.readUInt16BE(offset)\n  offset += 2\n  let o = 0\n  while (rdlen > 0) {\n    options[o++] = roption.decode(buf, offset)\n    offset += roption.decode.bytes\n    rdlen -= roption.decode.bytes\n  }\n  ropt.decode.bytes = offset - oldOffset\n  return options\n}\n\nropt.decode.bytes = 0\n\nropt.encodingLength = function (options) {\n  return 2 + encodingLengthList(options || [], roption)\n}\n\nconst rdnskey = exports.dnskey = {}\n\nrdnskey.PROTOCOL_DNSSEC = 3\nrdnskey.ZONE_KEY = 0x80\nrdnskey.SECURE_ENTRYPOINT = 0x8000\n\nrdnskey.encode = function (key, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rdnskey.encodingLength(key))\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  const keydata = key.key\n  if (!Buffer.isBuffer(keydata)) {\n    throw new Error('Key must be a Buffer')\n  }\n\n  offset += 2 // Leave space for length\n  buf.writeUInt16BE(key.flags, offset)\n  offset += 2\n  buf.writeUInt8(rdnskey.PROTOCOL_DNSSEC, offset)\n  offset += 1\n  buf.writeUInt8(key.algorithm, offset)\n  offset += 1\n  keydata.copy(buf, offset, 0, keydata.length)\n  offset += keydata.length\n\n  rdnskey.encode.bytes = offset - oldOffset\n  buf.writeUInt16BE(rdnskey.encode.bytes - 2, oldOffset)\n  return buf\n}\n\nrdnskey.encode.bytes = 0\n\nrdnskey.decode = function (buf, offset) {\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  var key = {}\n  var length = buf.readUInt16BE(offset)\n  offset += 2\n  key.flags = buf.readUInt16BE(offset)\n  offset += 2\n  if (buf.readUInt8(offset) !== rdnskey.PROTOCOL_DNSSEC) {\n    throw new Error('Protocol must be 3')\n  }\n  offset += 1\n  key.algorithm = buf.readUInt8(offset)\n  offset += 1\n  key.key = buf.slice(offset, oldOffset + length + 2)\n  offset += key.key.length\n  rdnskey.decode.bytes = offset - oldOffset\n  return key\n}\n\nrdnskey.decode.bytes = 0\n\nrdnskey.encodingLength = function (key) {\n  return 6 + Buffer.byteLength(key.key)\n}\n\nconst rrrsig = exports.rrsig = {}\n\nrrrsig.encode = function (sig, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rrrsig.encodingLength(sig))\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  const signature = sig.signature\n  if (!Buffer.isBuffer(signature)) {\n    throw new Error('Signature must be a Buffer')\n  }\n\n  offset += 2 // Leave space for length\n  buf.writeUInt16BE(types.toType(sig.typeCovered), offset)\n  offset += 2\n  buf.writeUInt8(sig.algorithm, offset)\n  offset += 1\n  buf.writeUInt8(sig.labels, offset)\n  offset += 1\n  buf.writeUInt32BE(sig.originalTTL, offset)\n  offset += 4\n  buf.writeUInt32BE(sig.expiration, offset)\n  offset += 4\n  buf.writeUInt32BE(sig.inception, offset)\n  offset += 4\n  buf.writeUInt16BE(sig.keyTag, offset)\n  offset += 2\n  name.encode(sig.signersName, buf, offset)\n  offset += name.encode.bytes\n  signature.copy(buf, offset, 0, signature.length)\n  offset += signature.length\n\n  rrrsig.encode.bytes = offset - oldOffset\n  buf.writeUInt16BE(rrrsig.encode.bytes - 2, oldOffset)\n  return buf\n}\n\nrrrsig.encode.bytes = 0\n\nrrrsig.decode = function (buf, offset) {\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  var sig = {}\n  var length = buf.readUInt16BE(offset)\n  offset += 2\n  sig.typeCovered = types.toString(buf.readUInt16BE(offset))\n  offset += 2\n  sig.algorithm = buf.readUInt8(offset)\n  offset += 1\n  sig.labels = buf.readUInt8(offset)\n  offset += 1\n  sig.originalTTL = buf.readUInt32BE(offset)\n  offset += 4\n  sig.expiration = buf.readUInt32BE(offset)\n  offset += 4\n  sig.inception = buf.readUInt32BE(offset)\n  offset += 4\n  sig.keyTag = buf.readUInt16BE(offset)\n  offset += 2\n  sig.signersName = name.decode(buf, offset)\n  offset += name.decode.bytes\n  sig.signature = buf.slice(offset, oldOffset + length + 2)\n  offset += sig.signature.length\n  rrrsig.decode.bytes = offset - oldOffset\n  return sig\n}\n\nrrrsig.decode.bytes = 0\n\nrrrsig.encodingLength = function (sig) {\n  return 20 +\n    name.encodingLength(sig.signersName) +\n    Buffer.byteLength(sig.signature)\n}\n\nconst rrp = exports.rp = {}\n\nrrp.encode = function (data, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rrp.encodingLength(data))\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  offset += 2 // Leave space for length\n  name.encode(data.mbox || '.', buf, offset, { mail: true })\n  offset += name.encode.bytes\n  name.encode(data.txt || '.', buf, offset)\n  offset += name.encode.bytes\n  rrp.encode.bytes = offset - oldOffset\n  buf.writeUInt16BE(rrp.encode.bytes - 2, oldOffset)\n  return buf\n}\n\nrrp.encode.bytes = 0\n\nrrp.decode = function (buf, offset) {\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  const data = {}\n  offset += 2\n  data.mbox = name.decode(buf, offset, { mail: true }) || '.'\n  offset += name.decode.bytes\n  data.txt = name.decode(buf, offset) || '.'\n  offset += name.decode.bytes\n  rrp.decode.bytes = offset - oldOffset\n  return data\n}\n\nrrp.decode.bytes = 0\n\nrrp.encodingLength = function (data) {\n  return 2 + name.encodingLength(data.mbox || '.') + name.encodingLength(data.txt || '.')\n}\n\nconst typebitmap = {}\n\ntypebitmap.encode = function (typelist, buf, offset) {\n  if (!buf) buf = Buffer.alloc(typebitmap.encodingLength(typelist))\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  var typesByWindow = []\n  for (var i = 0; i < typelist.length; i++) {\n    var typeid = types.toType(typelist[i])\n    if (typesByWindow[typeid >> 8] === undefined) {\n      typesByWindow[typeid >> 8] = []\n    }\n    typesByWindow[typeid >> 8][(typeid >> 3) & 0x1F] |= 1 << (7 - (typeid & 0x7))\n  }\n\n  for (i = 0; i < typesByWindow.length; i++) {\n    if (typesByWindow[i] !== undefined) {\n      var windowBuf = Buffer.from(typesByWindow[i])\n      buf.writeUInt8(i, offset)\n      offset += 1\n      buf.writeUInt8(windowBuf.length, offset)\n      offset += 1\n      windowBuf.copy(buf, offset)\n      offset += windowBuf.length\n    }\n  }\n\n  typebitmap.encode.bytes = offset - oldOffset\n  return buf\n}\n\ntypebitmap.encode.bytes = 0\n\ntypebitmap.decode = function (buf, offset, length) {\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  var typelist = []\n  while (offset - oldOffset < length) {\n    var window = buf.readUInt8(offset)\n    offset += 1\n    var windowLength = buf.readUInt8(offset)\n    offset += 1\n    for (var i = 0; i < windowLength; i++) {\n      var b = buf.readUInt8(offset + i)\n      for (var j = 0; j < 8; j++) {\n        if (b & (1 << (7 - j))) {\n          var typeid = types.toString((window << 8) | (i << 3) | j)\n          typelist.push(typeid)\n        }\n      }\n    }\n    offset += windowLength\n  }\n\n  typebitmap.decode.bytes = offset - oldOffset\n  return typelist\n}\n\ntypebitmap.decode.bytes = 0\n\ntypebitmap.encodingLength = function (typelist) {\n  var extents = []\n  for (var i = 0; i < typelist.length; i++) {\n    var typeid = types.toType(typelist[i])\n    extents[typeid >> 8] = Math.max(extents[typeid >> 8] || 0, typeid & 0xFF)\n  }\n\n  var len = 0\n  for (i = 0; i < extents.length; i++) {\n    if (extents[i] !== undefined) {\n      len += 2 + Math.ceil((extents[i] + 1) / 8)\n    }\n  }\n\n  return len\n}\n\nconst rnsec = exports.nsec = {}\n\nrnsec.encode = function (record, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rnsec.encodingLength(record))\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  offset += 2 // Leave space for length\n  name.encode(record.nextDomain, buf, offset)\n  offset += name.encode.bytes\n  typebitmap.encode(record.rrtypes, buf, offset)\n  offset += typebitmap.encode.bytes\n\n  rnsec.encode.bytes = offset - oldOffset\n  buf.writeUInt16BE(rnsec.encode.bytes - 2, oldOffset)\n  return buf\n}\n\nrnsec.encode.bytes = 0\n\nrnsec.decode = function (buf, offset) {\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  var record = {}\n  var length = buf.readUInt16BE(offset)\n  offset += 2\n  record.nextDomain = name.decode(buf, offset)\n  offset += name.decode.bytes\n  record.rrtypes = typebitmap.decode(buf, offset, length - (offset - oldOffset))\n  offset += typebitmap.decode.bytes\n\n  rnsec.decode.bytes = offset - oldOffset\n  return record\n}\n\nrnsec.decode.bytes = 0\n\nrnsec.encodingLength = function (record) {\n  return 2 +\n    name.encodingLength(record.nextDomain) +\n    typebitmap.encodingLength(record.rrtypes)\n}\n\nconst rnsec3 = exports.nsec3 = {}\n\nrnsec3.encode = function (record, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rnsec3.encodingLength(record))\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  const salt = record.salt\n  if (!Buffer.isBuffer(salt)) {\n    throw new Error('salt must be a Buffer')\n  }\n\n  const nextDomain = record.nextDomain\n  if (!Buffer.isBuffer(nextDomain)) {\n    throw new Error('nextDomain must be a Buffer')\n  }\n\n  offset += 2 // Leave space for length\n  buf.writeUInt8(record.algorithm, offset)\n  offset += 1\n  buf.writeUInt8(record.flags, offset)\n  offset += 1\n  buf.writeUInt16BE(record.iterations, offset)\n  offset += 2\n  buf.writeUInt8(salt.length, offset)\n  offset += 1\n  salt.copy(buf, offset, 0, salt.length)\n  offset += salt.length\n  buf.writeUInt8(nextDomain.length, offset)\n  offset += 1\n  nextDomain.copy(buf, offset, 0, nextDomain.length)\n  offset += nextDomain.length\n  typebitmap.encode(record.rrtypes, buf, offset)\n  offset += typebitmap.encode.bytes\n\n  rnsec3.encode.bytes = offset - oldOffset\n  buf.writeUInt16BE(rnsec3.encode.bytes - 2, oldOffset)\n  return buf\n}\n\nrnsec3.encode.bytes = 0\n\nrnsec3.decode = function (buf, offset) {\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  var record = {}\n  var length = buf.readUInt16BE(offset)\n  offset += 2\n  record.algorithm = buf.readUInt8(offset)\n  offset += 1\n  record.flags = buf.readUInt8(offset)\n  offset += 1\n  record.iterations = buf.readUInt16BE(offset)\n  offset += 2\n  const saltLength = buf.readUInt8(offset)\n  offset += 1\n  record.salt = buf.slice(offset, offset + saltLength)\n  offset += saltLength\n  const hashLength = buf.readUInt8(offset)\n  offset += 1\n  record.nextDomain = buf.slice(offset, offset + hashLength)\n  offset += hashLength\n  record.rrtypes = typebitmap.decode(buf, offset, length - (offset - oldOffset))\n  offset += typebitmap.decode.bytes\n\n  rnsec3.decode.bytes = offset - oldOffset\n  return record\n}\n\nrnsec3.decode.bytes = 0\n\nrnsec3.encodingLength = function (record) {\n  return 8 +\n    record.salt.length +\n    record.nextDomain.length +\n    typebitmap.encodingLength(record.rrtypes)\n}\n\nconst rds = exports.ds = {}\n\nrds.encode = function (digest, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rds.encodingLength(digest))\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  const digestdata = digest.digest\n  if (!Buffer.isBuffer(digestdata)) {\n    throw new Error('Digest must be a Buffer')\n  }\n\n  offset += 2 // Leave space for length\n  buf.writeUInt16BE(digest.keyTag, offset)\n  offset += 2\n  buf.writeUInt8(digest.algorithm, offset)\n  offset += 1\n  buf.writeUInt8(digest.digestType, offset)\n  offset += 1\n  digestdata.copy(buf, offset, 0, digestdata.length)\n  offset += digestdata.length\n\n  rds.encode.bytes = offset - oldOffset\n  buf.writeUInt16BE(rds.encode.bytes - 2, oldOffset)\n  return buf\n}\n\nrds.encode.bytes = 0\n\nrds.decode = function (buf, offset) {\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  var digest = {}\n  var length = buf.readUInt16BE(offset)\n  offset += 2\n  digest.keyTag = buf.readUInt16BE(offset)\n  offset += 2\n  digest.algorithm = buf.readUInt8(offset)\n  offset += 1\n  digest.digestType = buf.readUInt8(offset)\n  offset += 1\n  digest.digest = buf.slice(offset, oldOffset + length + 2)\n  offset += digest.digest.length\n  rds.decode.bytes = offset - oldOffset\n  return digest\n}\n\nrds.decode.bytes = 0\n\nrds.encodingLength = function (digest) {\n  return 6 + Buffer.byteLength(digest.digest)\n}\n\nconst rsshfp = exports.sshfp = {}\n\nrsshfp.getFingerprintLengthForHashType = function getFingerprintLengthForHashType (hashType) {\n  switch (hashType) {\n    case 1: return 20\n    case 2: return 32\n  }\n}\n\nrsshfp.encode = function encode (record, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rsshfp.encodingLength(record))\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  offset += 2 // The function call starts with the offset pointer at the RDLENGTH field, not the RDATA one\n  buf[offset] = record.algorithm\n  offset += 1\n  buf[offset] = record.hash\n  offset += 1\n\n  const fingerprintBuf = Buffer.from(record.fingerprint.toUpperCase(), 'hex')\n  if (fingerprintBuf.length !== rsshfp.getFingerprintLengthForHashType(record.hash)) {\n    throw new Error('Invalid fingerprint length')\n  }\n  fingerprintBuf.copy(buf, offset)\n  offset += fingerprintBuf.byteLength\n\n  rsshfp.encode.bytes = offset - oldOffset\n  buf.writeUInt16BE(rsshfp.encode.bytes - 2, oldOffset)\n\n  return buf\n}\n\nrsshfp.encode.bytes = 0\n\nrsshfp.decode = function decode (buf, offset) {\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  const record = {}\n  offset += 2 // Account for the RDLENGTH field\n  record.algorithm = buf[offset]\n  offset += 1\n  record.hash = buf[offset]\n  offset += 1\n\n  const fingerprintLength = rsshfp.getFingerprintLengthForHashType(record.hash)\n  record.fingerprint = buf.slice(offset, offset + fingerprintLength).toString('hex').toUpperCase()\n  offset += fingerprintLength\n  rsshfp.decode.bytes = offset - oldOffset\n  return record\n}\n\nrsshfp.decode.bytes = 0\n\nrsshfp.encodingLength = function (record) {\n  return 4 + Buffer.from(record.fingerprint, 'hex').byteLength\n}\n\nconst rnaptr = exports.naptr = {}\n\nrnaptr.encode = function (data, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rnaptr.encodingLength(data))\n  if (!offset) offset = 0\n  const oldOffset = offset\n  offset += 2\n  buf.writeUInt16BE(data.order || 0, offset)\n  offset += 2\n  buf.writeUInt16BE(data.preference || 0, offset)\n  offset += 2\n  string.encode(data.flags, buf, offset)\n  offset += string.encode.bytes\n  string.encode(data.services, buf, offset)\n  offset += string.encode.bytes\n  string.encode(data.regexp, buf, offset)\n  offset += string.encode.bytes\n  name.encode(data.replacement, buf, offset)\n  offset += name.encode.bytes\n  rnaptr.encode.bytes = offset - oldOffset\n  buf.writeUInt16BE(rnaptr.encode.bytes - 2, oldOffset)\n  return buf\n}\n\nrnaptr.encode.bytes = 0\n\nrnaptr.decode = function (buf, offset) {\n  if (!offset) offset = 0\n  const oldOffset = offset\n  const data = {}\n  offset += 2\n  data.order = buf.readUInt16BE(offset)\n  offset += 2\n  data.preference = buf.readUInt16BE(offset)\n  offset += 2\n  data.flags = string.decode(buf, offset)\n  offset += string.decode.bytes\n  data.services = string.decode(buf, offset)\n  offset += string.decode.bytes\n  data.regexp = string.decode(buf, offset)\n  offset += string.decode.bytes\n  data.replacement = name.decode(buf, offset)\n  offset += name.decode.bytes\n  rnaptr.decode.bytes = offset - oldOffset\n  return data\n}\n\nrnaptr.decode.bytes = 0\n\nrnaptr.encodingLength = function (data) {\n  return string.encodingLength(data.flags) +\n    string.encodingLength(data.services) +\n    string.encodingLength(data.regexp) +\n    name.encodingLength(data.replacement) + 6\n}\n\nconst rtlsa = exports.tlsa = {}\n\nrtlsa.encode = function (cert, buf, offset) {\n  if (!buf) buf = Buffer.alloc(rtlsa.encodingLength(cert))\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  const certdata = cert.certificate\n  if (!Buffer.isBuffer(certdata)) {\n    throw new Error('Certificate must be a Buffer')\n  }\n\n  offset += 2 // Leave space for length\n  buf.writeUInt8(cert.usage, offset)\n  offset += 1\n  buf.writeUInt8(cert.selector, offset)\n  offset += 1\n  buf.writeUInt8(cert.matchingType, offset)\n  offset += 1\n  certdata.copy(buf, offset, 0, certdata.length)\n  offset += certdata.length\n\n  rtlsa.encode.bytes = offset - oldOffset\n  buf.writeUInt16BE(rtlsa.encode.bytes - 2, oldOffset)\n  return buf\n}\n\nrtlsa.encode.bytes = 0\n\nrtlsa.decode = function (buf, offset) {\n  if (!offset) offset = 0\n  const oldOffset = offset\n\n  const cert = {}\n  const length = buf.readUInt16BE(offset)\n  offset += 2\n  cert.usage = buf.readUInt8(offset)\n  offset += 1\n  cert.selector = buf.readUInt8(offset)\n  offset += 1\n  cert.matchingType = buf.readUInt8(offset)\n  offset += 1\n  cert.certificate = buf.slice(offset, oldOffset + length + 2)\n  offset += cert.certificate.length\n  rtlsa.decode.bytes = offset - oldOffset\n  return cert\n}\n\nrtlsa.decode.bytes = 0\n\nrtlsa.encodingLength = function (cert) {\n  return 5 + Buffer.byteLength(cert.certificate)\n}\n\nconst renc = exports.record = function (type) {\n  switch (type.toUpperCase()) {\n    case 'A': return ra\n    case 'PTR': return rptr\n    case 'CNAME': return rcname\n    case 'DNAME': return rdname\n    case 'TXT': return rtxt\n    case 'NULL': return rnull\n    case 'AAAA': return raaaa\n    case 'SRV': return rsrv\n    case 'HINFO': return rhinfo\n    case 'CAA': return rcaa\n    case 'NS': return rns\n    case 'SOA': return rsoa\n    case 'MX': return rmx\n    case 'OPT': return ropt\n    case 'DNSKEY': return rdnskey\n    case 'RRSIG': return rrrsig\n    case 'RP': return rrp\n    case 'NSEC': return rnsec\n    case 'NSEC3': return rnsec3\n    case 'SSHFP': return rsshfp\n    case 'DS': return rds\n    case 'NAPTR': return rnaptr\n    case 'TLSA': return rtlsa\n  }\n  return runknown\n}\n\nconst answer = exports.answer = {}\n\nanswer.encode = function (a, buf, offset) {\n  if (!buf) buf = Buffer.alloc(answer.encodingLength(a))\n  if (!offset) offset = 0\n\n  const oldOffset = offset\n\n  name.encode(a.name, buf, offset)\n  offset += name.encode.bytes\n\n  buf.writeUInt16BE(types.toType(a.type), offset)\n\n  if (a.type.toUpperCase() === 'OPT') {\n    if (a.name !== '.') {\n      throw new Error('OPT name must be root.')\n    }\n    buf.writeUInt16BE(a.udpPayloadSize || 4096, offset + 2)\n    buf.writeUInt8(a.extendedRcode || 0, offset + 4)\n    buf.writeUInt8(a.ednsVersion || 0, offset + 5)\n    buf.writeUInt16BE(a.flags || 0, offset + 6)\n\n    offset += 8\n    ropt.encode(a.options || [], buf, offset)\n    offset += ropt.encode.bytes\n  } else {\n    let klass = classes.toClass(a.class === undefined ? 'IN' : a.class)\n    if (a.flush) klass |= FLUSH_MASK // the 1st bit of the class is the flush bit\n    buf.writeUInt16BE(klass, offset + 2)\n    buf.writeUInt32BE(a.ttl || 0, offset + 4)\n\n    offset += 8\n    const enc = renc(a.type)\n    enc.encode(a.data, buf, offset)\n    offset += enc.encode.bytes\n  }\n\n  answer.encode.bytes = offset - oldOffset\n  return buf\n}\n\nanswer.encode.bytes = 0\n\nanswer.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  const a = {}\n  const oldOffset = offset\n\n  a.name = name.decode(buf, offset)\n  offset += name.decode.bytes\n  a.type = types.toString(buf.readUInt16BE(offset))\n  if (a.type === 'OPT') {\n    a.udpPayloadSize = buf.readUInt16BE(offset + 2)\n    a.extendedRcode = buf.readUInt8(offset + 4)\n    a.ednsVersion = buf.readUInt8(offset + 5)\n    a.flags = buf.readUInt16BE(offset + 6)\n    a.flag_do = ((a.flags >> 15) & 0x1) === 1\n    a.options = ropt.decode(buf, offset + 8)\n    offset += 8 + ropt.decode.bytes\n  } else {\n    const klass = buf.readUInt16BE(offset + 2)\n    a.ttl = buf.readUInt32BE(offset + 4)\n\n    a.class = classes.toString(klass & NOT_FLUSH_MASK)\n    a.flush = !!(klass & FLUSH_MASK)\n\n    const enc = renc(a.type)\n    a.data = enc.decode(buf, offset + 8)\n    offset += 8 + enc.decode.bytes\n  }\n\n  answer.decode.bytes = offset - oldOffset\n  return a\n}\n\nanswer.decode.bytes = 0\n\nanswer.encodingLength = function (a) {\n  const data = (a.data !== null && a.data !== undefined) ? a.data : a.options\n  return name.encodingLength(a.name) + 8 + renc(a.type).encodingLength(data)\n}\n\nconst question = exports.question = {}\n\nquestion.encode = function (q, buf, offset) {\n  if (!buf) buf = Buffer.alloc(question.encodingLength(q))\n  if (!offset) offset = 0\n\n  const oldOffset = offset\n\n  name.encode(q.name, buf, offset)\n  offset += name.encode.bytes\n\n  buf.writeUInt16BE(types.toType(q.type), offset)\n  offset += 2\n\n  buf.writeUInt16BE(classes.toClass(q.class === undefined ? 'IN' : q.class), offset)\n  offset += 2\n\n  question.encode.bytes = offset - oldOffset\n  return q\n}\n\nquestion.encode.bytes = 0\n\nquestion.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  const oldOffset = offset\n  const q = {}\n\n  q.name = name.decode(buf, offset)\n  offset += name.decode.bytes\n\n  q.type = types.toString(buf.readUInt16BE(offset))\n  offset += 2\n\n  q.class = classes.toString(buf.readUInt16BE(offset))\n  offset += 2\n\n  const qu = !!(q.class & QU_MASK)\n  if (qu) q.class &= NOT_QU_MASK\n\n  question.decode.bytes = offset - oldOffset\n  return q\n}\n\nquestion.decode.bytes = 0\n\nquestion.encodingLength = function (q) {\n  return name.encodingLength(q.name) + 4\n}\n\nexports.AUTHORITATIVE_ANSWER = 1 << 10\nexports.TRUNCATED_RESPONSE = 1 << 9\nexports.RECURSION_DESIRED = 1 << 8\nexports.RECURSION_AVAILABLE = 1 << 7\nexports.AUTHENTIC_DATA = 1 << 5\nexports.CHECKING_DISABLED = 1 << 4\nexports.DNSSEC_OK = 1 << 15\n\nexports.encode = function (result, buf, offset) {\n  const allocing = !buf\n\n  if (allocing) buf = Buffer.alloc(exports.encodingLength(result))\n  if (!offset) offset = 0\n\n  const oldOffset = offset\n\n  if (!result.questions) result.questions = []\n  if (!result.answers) result.answers = []\n  if (!result.authorities) result.authorities = []\n  if (!result.additionals) result.additionals = []\n\n  header.encode(result, buf, offset)\n  offset += header.encode.bytes\n\n  offset = encodeList(result.questions, question, buf, offset)\n  offset = encodeList(result.answers, answer, buf, offset)\n  offset = encodeList(result.authorities, answer, buf, offset)\n  offset = encodeList(result.additionals, answer, buf, offset)\n\n  exports.encode.bytes = offset - oldOffset\n\n  // just a quick sanity check\n  if (allocing && exports.encode.bytes !== buf.length) {\n    return buf.slice(0, exports.encode.bytes)\n  }\n\n  return buf\n}\n\nexports.encode.bytes = 0\n\nexports.decode = function (buf, offset) {\n  if (!offset) offset = 0\n\n  const oldOffset = offset\n  const result = header.decode(buf, offset)\n  offset += header.decode.bytes\n\n  offset = decodeList(result.questions, question, buf, offset)\n  offset = decodeList(result.answers, answer, buf, offset)\n  offset = decodeList(result.authorities, answer, buf, offset)\n  offset = decodeList(result.additionals, answer, buf, offset)\n\n  exports.decode.bytes = offset - oldOffset\n\n  return result\n}\n\nexports.decode.bytes = 0\n\nexports.encodingLength = function (result) {\n  return header.encodingLength(result) +\n    encodingLengthList(result.questions || [], question) +\n    encodingLengthList(result.answers || [], answer) +\n    encodingLengthList(result.authorities || [], answer) +\n    encodingLengthList(result.additionals || [], answer)\n}\n\nexports.streamEncode = function (result) {\n  const buf = exports.encode(result)\n  const sbuf = Buffer.alloc(2)\n  sbuf.writeUInt16BE(buf.byteLength)\n  const combine = Buffer.concat([sbuf, buf])\n  exports.streamEncode.bytes = combine.byteLength\n  return combine\n}\n\nexports.streamEncode.bytes = 0\n\nexports.streamDecode = function (sbuf) {\n  const len = sbuf.readUInt16BE(0)\n  if (sbuf.byteLength < len + 2) {\n    // not enough data\n    return null\n  }\n  const result = exports.decode(sbuf.slice(2))\n  exports.streamDecode.bytes = exports.decode.bytes\n  return result\n}\n\nexports.streamDecode.bytes = 0\n\nfunction encodingLengthList (list, enc) {\n  let len = 0\n  for (let i = 0; i < list.length; i++) len += enc.encodingLength(list[i])\n  return len\n}\n\nfunction encodeList (list, enc, buf, offset) {\n  for (let i = 0; i < list.length; i++) {\n    enc.encode(list[i], buf, offset)\n    offset += enc.encode.bytes\n  }\n  return offset\n}\n\nfunction decodeList (list, enc, buf, offset) {\n  for (let i = 0; i < list.length; i++) {\n    list[i] = enc.decode(buf, offset)\n    offset += enc.decode.bytes\n  }\n  return offset\n}\n","'use strict'\n\n/*\n * Traditional DNS header OPCODEs (4-bits) defined by IANA in\n * https://www.iana.org/assignments/dns-parameters/dns-parameters.xhtml#dns-parameters-5\n */\n\nexports.toString = function (opcode) {\n  switch (opcode) {\n    case 0: return 'QUERY'\n    case 1: return 'IQUERY'\n    case 2: return 'STATUS'\n    case 3: return 'OPCODE_3'\n    case 4: return 'NOTIFY'\n    case 5: return 'UPDATE'\n    case 6: return 'OPCODE_6'\n    case 7: return 'OPCODE_7'\n    case 8: return 'OPCODE_8'\n    case 9: return 'OPCODE_9'\n    case 10: return 'OPCODE_10'\n    case 11: return 'OPCODE_11'\n    case 12: return 'OPCODE_12'\n    case 13: return 'OPCODE_13'\n    case 14: return 'OPCODE_14'\n    case 15: return 'OPCODE_15'\n  }\n  return 'OPCODE_' + opcode\n}\n\nexports.toOpcode = function (code) {\n  switch (code.toUpperCase()) {\n    case 'QUERY': return 0\n    case 'IQUERY': return 1\n    case 'STATUS': return 2\n    case 'OPCODE_3': return 3\n    case 'NOTIFY': return 4\n    case 'UPDATE': return 5\n    case 'OPCODE_6': return 6\n    case 'OPCODE_7': return 7\n    case 'OPCODE_8': return 8\n    case 'OPCODE_9': return 9\n    case 'OPCODE_10': return 10\n    case 'OPCODE_11': return 11\n    case 'OPCODE_12': return 12\n    case 'OPCODE_13': return 13\n    case 'OPCODE_14': return 14\n    case 'OPCODE_15': return 15\n  }\n  return 0\n}\n","'use strict'\n\nexports.toString = function (type) {\n  switch (type) {\n    // list at\n    // https://www.iana.org/assignments/dns-parameters/dns-parameters.xhtml#dns-parameters-11\n    case 1: return 'LLQ'\n    case 2: return 'UL'\n    case 3: return 'NSID'\n    case 5: return 'DAU'\n    case 6: return 'DHU'\n    case 7: return 'N3U'\n    case 8: return 'CLIENT_SUBNET'\n    case 9: return 'EXPIRE'\n    case 10: return 'COOKIE'\n    case 11: return 'TCP_KEEPALIVE'\n    case 12: return 'PADDING'\n    case 13: return 'CHAIN'\n    case 14: return 'KEY_TAG'\n    case 26946: return 'DEVICEID'\n  }\n  if (type < 0) {\n    return null\n  }\n  return `OPTION_${type}`\n}\n\nexports.toCode = function (name) {\n  if (typeof name === 'number') {\n    return name\n  }\n  if (!name) {\n    return -1\n  }\n  switch (name.toUpperCase()) {\n    case 'OPTION_0': return 0\n    case 'LLQ': return 1\n    case 'UL': return 2\n    case 'NSID': return 3\n    case 'OPTION_4': return 4\n    case 'DAU': return 5\n    case 'DHU': return 6\n    case 'N3U': return 7\n    case 'CLIENT_SUBNET': return 8\n    case 'EXPIRE': return 9\n    case 'COOKIE': return 10\n    case 'TCP_KEEPALIVE': return 11\n    case 'PADDING': return 12\n    case 'CHAIN': return 13\n    case 'KEY_TAG': return 14\n    case 'DEVICEID': return 26946\n    case 'OPTION_65535': return 65535\n  }\n  const m = name.match(/_(\\d+)$/)\n  if (m) {\n    return parseInt(m[1], 10)\n  }\n  return -1\n}\n","'use strict'\n\n/*\n * Traditional DNS header RCODEs (4-bits) defined by IANA in\n * https://www.iana.org/assignments/dns-parameters/dns-parameters.xhtml\n */\n\nexports.toString = function (rcode) {\n  switch (rcode) {\n    case 0: return 'NOERROR'\n    case 1: return 'FORMERR'\n    case 2: return 'SERVFAIL'\n    case 3: return 'NXDOMAIN'\n    case 4: return 'NOTIMP'\n    case 5: return 'REFUSED'\n    case 6: return 'YXDOMAIN'\n    case 7: return 'YXRRSET'\n    case 8: return 'NXRRSET'\n    case 9: return 'NOTAUTH'\n    case 10: return 'NOTZONE'\n    case 11: return 'RCODE_11'\n    case 12: return 'RCODE_12'\n    case 13: return 'RCODE_13'\n    case 14: return 'RCODE_14'\n    case 15: return 'RCODE_15'\n  }\n  return 'RCODE_' + rcode\n}\n\nexports.toRcode = function (code) {\n  switch (code.toUpperCase()) {\n    case 'NOERROR': return 0\n    case 'FORMERR': return 1\n    case 'SERVFAIL': return 2\n    case 'NXDOMAIN': return 3\n    case 'NOTIMP': return 4\n    case 'REFUSED': return 5\n    case 'YXDOMAIN': return 6\n    case 'YXRRSET': return 7\n    case 'NXRRSET': return 8\n    case 'NOTAUTH': return 9\n    case 'NOTZONE': return 10\n    case 'RCODE_11': return 11\n    case 'RCODE_12': return 12\n    case 'RCODE_13': return 13\n    case 'RCODE_14': return 14\n    case 'RCODE_15': return 15\n  }\n  return 0\n}\n","'use strict'\n\nexports.toString = function (type) {\n  switch (type) {\n    case 1: return 'A'\n    case 10: return 'NULL'\n    case 28: return 'AAAA'\n    case 18: return 'AFSDB'\n    case 42: return 'APL'\n    case 257: return 'CAA'\n    case 60: return 'CDNSKEY'\n    case 59: return 'CDS'\n    case 37: return 'CERT'\n    case 5: return 'CNAME'\n    case 49: return 'DHCID'\n    case 32769: return 'DLV'\n    case 39: return 'DNAME'\n    case 48: return 'DNSKEY'\n    case 43: return 'DS'\n    case 55: return 'HIP'\n    case 13: return 'HINFO'\n    case 45: return 'IPSECKEY'\n    case 25: return 'KEY'\n    case 36: return 'KX'\n    case 29: return 'LOC'\n    case 15: return 'MX'\n    case 35: return 'NAPTR'\n    case 2: return 'NS'\n    case 47: return 'NSEC'\n    case 50: return 'NSEC3'\n    case 51: return 'NSEC3PARAM'\n    case 12: return 'PTR'\n    case 46: return 'RRSIG'\n    case 17: return 'RP'\n    case 24: return 'SIG'\n    case 6: return 'SOA'\n    case 99: return 'SPF'\n    case 33: return 'SRV'\n    case 44: return 'SSHFP'\n    case 32768: return 'TA'\n    case 249: return 'TKEY'\n    case 52: return 'TLSA'\n    case 250: return 'TSIG'\n    case 16: return 'TXT'\n    case 252: return 'AXFR'\n    case 251: return 'IXFR'\n    case 41: return 'OPT'\n    case 255: return 'ANY'\n  }\n  return 'UNKNOWN_' + type\n}\n\nexports.toType = function (name) {\n  switch (name.toUpperCase()) {\n    case 'A': return 1\n    case 'NULL': return 10\n    case 'AAAA': return 28\n    case 'AFSDB': return 18\n    case 'APL': return 42\n    case 'CAA': return 257\n    case 'CDNSKEY': return 60\n    case 'CDS': return 59\n    case 'CERT': return 37\n    case 'CNAME': return 5\n    case 'DHCID': return 49\n    case 'DLV': return 32769\n    case 'DNAME': return 39\n    case 'DNSKEY': return 48\n    case 'DS': return 43\n    case 'HIP': return 55\n    case 'HINFO': return 13\n    case 'IPSECKEY': return 45\n    case 'KEY': return 25\n    case 'KX': return 36\n    case 'LOC': return 29\n    case 'MX': return 15\n    case 'NAPTR': return 35\n    case 'NS': return 2\n    case 'NSEC': return 47\n    case 'NSEC3': return 50\n    case 'NSEC3PARAM': return 51\n    case 'PTR': return 12\n    case 'RRSIG': return 46\n    case 'RP': return 17\n    case 'SIG': return 24\n    case 'SOA': return 6\n    case 'SPF': return 99\n    case 'SRV': return 33\n    case 'SSHFP': return 44\n    case 'TA': return 32768\n    case 'TKEY': return 249\n    case 'TLSA': return 52\n    case 'TSIG': return 250\n    case 'TXT': return 16\n    case 'AXFR': return 252\n    case 'IXFR': return 251\n    case 'OPT': return 41\n    case 'ANY': return 255\n    case '*': return 255\n  }\n  if (name.toUpperCase().startsWith('UNKNOWN_')) return parseInt(name.slice(8))\n  return 0\n}\n","var Stream = require(\"stream\")\nvar writeMethods = [\"write\", \"end\", \"destroy\"]\nvar readMethods = [\"resume\", \"pause\"]\nvar readEvents = [\"data\", \"close\"]\nvar slice = Array.prototype.slice\n\nmodule.exports = duplex\n\nfunction forEach (arr, fn) {\n    if (arr.forEach) {\n        return arr.forEach(fn)\n    }\n\n    for (var i = 0; i < arr.length; i++) {\n        fn(arr[i], i)\n    }\n}\n\nfunction duplex(writer, reader) {\n    var stream = new Stream()\n    var ended = false\n\n    forEach(writeMethods, proxyWriter)\n\n    forEach(readMethods, proxyReader)\n\n    forEach(readEvents, proxyStream)\n\n    reader.on(\"end\", handleEnd)\n\n    writer.on(\"drain\", function() {\n      stream.emit(\"drain\")\n    })\n\n    writer.on(\"error\", reemit)\n    reader.on(\"error\", reemit)\n\n    stream.writable = writer.writable\n    stream.readable = reader.readable\n\n    return stream\n\n    function proxyWriter(methodName) {\n        stream[methodName] = method\n\n        function method() {\n            return writer[methodName].apply(writer, arguments)\n        }\n    }\n\n    function proxyReader(methodName) {\n        stream[methodName] = method\n\n        function method() {\n            stream.emit(methodName)\n            var func = reader[methodName]\n            if (func) {\n                return func.apply(reader, arguments)\n            }\n            reader.emit(methodName)\n        }\n    }\n\n    function proxyStream(methodName) {\n        reader.on(methodName, reemit)\n\n        function reemit() {\n            var args = slice.call(arguments)\n            args.unshift(methodName)\n            stream.emit.apply(stream, args)\n        }\n    }\n\n    function handleEnd() {\n        if (ended) {\n            return\n        }\n        ended = true\n        var args = slice.call(arguments)\n        args.unshift(\"end\")\n        stream.emit.apply(stream, args)\n    }\n\n    function reemit(err) {\n        stream.emit(\"error\", err)\n    }\n}\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\n/** @type {import('.')} */\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true) || false;\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = false;\n\t}\n}\n\nmodule.exports = $defineProperty;\n","'use strict';\n\n/** @type {import('./eval')} */\nmodule.exports = EvalError;\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Error;\n","'use strict';\n\n/** @type {import('./range')} */\nmodule.exports = RangeError;\n","'use strict';\n\n/** @type {import('./ref')} */\nmodule.exports = ReferenceError;\n","'use strict';\n\n/** @type {import('./syntax')} */\nmodule.exports = SyntaxError;\n","'use strict';\n\n/** @type {import('./type')} */\nmodule.exports = TypeError;\n","'use strict';\n\n/** @type {import('./uri')} */\nmodule.exports = URIError;\n","//filter will reemit the data if cb(err,pass) pass is truthy\n\n// reduce is more tricky\n// maybe we want to group the reductions or emit progress updates occasionally\n// the most basic reduce just emits one 'data' event after it has recieved 'end'\n\nvar Stream = require('stream').Stream\n  , es = exports\n  , through = require('through')\n  , from = require('from')\n  , duplex = require('duplexer')\n  , map = require('map-stream')\n  , pause = require('pause-stream')\n  , split = require('split')\n  , pipeline = require('stream-combiner')\n  , immediately = global.setImmediate || process.nextTick;\n\nes.Stream = Stream //re-export Stream from core\nes.through = through\nes.from = from\nes.duplex = duplex\nes.map = map\nes.pause = pause\nes.split = split\nes.pipeline = es.connect = es.pipe = pipeline\n// merge / concat\n//\n// combine multiple streams into a single stream.\n// will emit end only once\n\nes.concat = //actually this should be called concat\nes.merge = function (/*streams...*/) {\n  var toMerge = [].slice.call(arguments)\n  if (toMerge.length === 1 && (toMerge[0] instanceof Array)) {\n    toMerge = toMerge[0] //handle array as arguments object\n  }\n  var stream = new Stream()\n  stream.setMaxListeners(0) // allow adding more than 11 streams\n  var endCount = 0\n  stream.writable = stream.readable = true\n\n  if (toMerge.length) {\n    toMerge.forEach(function (e) {\n      e.pipe(stream, {end: false})\n      var ended = false\n      e.on('end', function () {\n        if(ended) return\n        ended = true\n        endCount ++\n        if(endCount == toMerge.length)\n          stream.emit('end')\n      })\n    })\n  } else {\n    process.nextTick(function () {\n      stream.emit('end')\n    })\n  }\n  \n  stream.write = function (data) {\n    this.emit('data', data)\n  }\n  stream.destroy = function () {\n    toMerge.forEach(function (e) {\n      if(e.destroy) e.destroy()\n    })\n  }\n  return stream\n}\n\n\n// writable stream, collects all events into an array\n// and calls back when 'end' occurs\n// mainly I'm using this to test the other functions\n\nes.collect =\nes.writeArray = function (done) {\n  if ('function' !== typeof done)\n    throw new Error('function writeArray (done): done must be function')\n\n  var a = new Stream ()\n    , array = [], isDone = false\n  a.write = function (l) {\n    array.push(l)\n  }\n  a.end = function () {\n    isDone = true\n    done(null, array)\n  }\n  a.writable = true\n  a.readable = false\n  a.destroy = function () {\n    a.writable = a.readable = false\n    if(isDone) return\n    done(new Error('destroyed before end'), array)\n  }\n  return a\n}\n\n//return a Stream that reads the properties of an object\n//respecting pause() and resume()\n\nes.readArray = function (array) {\n  var stream = new Stream()\n    , i = 0\n    , paused = false\n    , ended = false\n\n  stream.readable = true\n  stream.writable = false\n\n  if(!Array.isArray(array))\n    throw new Error('event-stream.read expects an array')\n\n  stream.resume = function () {\n    if(ended) return\n    paused = false\n    var l = array.length\n    while(i < l && !paused && !ended) {\n      stream.emit('data', array[i++])\n    }\n    if(i == l && !ended)\n      ended = true, stream.readable = false, stream.emit('end')\n  }\n  process.nextTick(stream.resume)\n  stream.pause = function () {\n     paused = true\n  }\n  stream.destroy = function () {\n    ended = true\n    stream.emit('close')\n  }\n  return stream\n}\n\n//\n// readable (asyncFunction)\n// return a stream that calls an async function while the stream is not paused.\n//\n// the function must take: (count, callback) {...\n//\n\nes.readable =\nfunction (func, continueOnError) {\n  var stream = new Stream()\n    , i = 0\n    , paused = false\n    , ended = false\n    , reading = false\n\n  stream.readable = true\n  stream.writable = false\n\n  if('function' !== typeof func)\n    throw new Error('event-stream.readable expects async function')\n\n  stream.on('end', function () { ended = true })\n\n  function get (err, data) {\n\n    if(err) {\n      stream.emit('error', err)\n      if(!continueOnError) stream.emit('end')\n    } else if (arguments.length > 1)\n      stream.emit('data', data)\n\n    immediately(function () {\n      if(ended || paused || reading) return\n      try {\n        reading = true\n        func.call(stream, i++, function () {\n          reading = false\n          get.apply(null, arguments)\n        })\n      } catch (err) {\n        stream.emit('error', err)\n      }\n    })\n  }\n  stream.resume = function () {\n    paused = false\n    get()\n  }\n  process.nextTick(get)\n  stream.pause = function () {\n     paused = true\n  }\n  stream.destroy = function () {\n    stream.emit('end')\n    stream.emit('close')\n    ended = true\n  }\n  return stream\n}\n\n\n//\n// map sync\n//\n\nes.mapSync = function (sync) {\n  return es.through(function write(data) {\n    var mappedData\n    try {\n      mappedData = sync(data)\n    } catch (err) {\n      return this.emit('error', err)\n    }\n    if (mappedData !== undefined)\n      this.emit('data', mappedData)\n  })\n}\n\n//\n// filterSync\n//\n\nes.filterSync = function (test) {\n  return es.through(function(data){\n    var s = this\n    if (test(data)) {\n      s.queue(data)\n    }\n  });\n}\n\n//\n// flatmapSync\n//\n\nes.flatmapSync = function (mapper) {\n  return es.through(function(data) {\n    var s = this\n    data.forEach(function(e) {\n      s.queue(mapper(e))\n    })\n  })\n}\n\n//\n// log just print out what is coming through the stream, for debugging\n//\n\nes.log = function (name) {\n  return es.through(function (data) {\n    var args = [].slice.call(arguments)\n    if(name) console.error(name, data)\n    else     console.error(data)\n    this.emit('data', data)\n  })\n}\n\n\n//\n// child -- pipe through a child process\n//\n\nes.child = function (child) {\n\n  return es.duplex(child.stdin, child.stdout)\n\n}\n\n//\n// parse\n//\n// must be used after es.split() to ensure that each chunk represents a line\n// source.pipe(es.split()).pipe(es.parse())\n\nes.parse = function (options) {\n  var emitError = !!(options ? options.error : false)\n  return es.through(function (data) {\n    var obj\n    try {\n      if(data) //ignore empty lines\n        obj = JSON.parse(data.toString())\n    } catch (err) {\n      if (emitError)\n        return this.emit('error', err)\n      return console.error(err, 'attempting to parse:', data)\n    }\n    //ignore lines that where only whitespace.\n    if(obj !== undefined)\n      this.emit('data', obj)\n  })\n}\n//\n// stringify\n//\n\nes.stringify = function () {\n  var Buffer = require('buffer').Buffer\n  return es.mapSync(function (e){\n    return JSON.stringify(Buffer.isBuffer(e) ? e.toString() : e) + '\\n'\n  })\n}\n\n//\n// replace a string within a stream.\n//\n// warn: just concatenates the string and then does str.split().join().\n// probably not optimal.\n// for smallish responses, who cares?\n// I need this for shadow-npm so it's only relatively small json files.\n\nes.replace = function (from, to) {\n  return es.pipeline(es.split(from), es.join(to))\n}\n\n//\n// join chunks with a joiner. just like Array#join\n// also accepts a callback that is passed the chunks appended together\n// this is still supported for legacy reasons.\n//\n\nes.join = function (str) {\n\n  //legacy api\n  if('function' === typeof str)\n    return es.wait(str)\n\n  var first = true\n  return es.through(function (data) {\n    if(!first)\n      this.emit('data', str)\n    first = false\n    this.emit('data', data)\n    return true\n  })\n}\n\n\n//\n// wait. callback when 'end' is emitted, with all chunks appended as string.\n//\n\nes.wait = function (callback) {\n  var arr = []\n  return es.through(function (data) { arr.push(data) },\n    function () {\n      var body = Buffer.isBuffer(arr[0]) ? Buffer.concat(arr)\n        : arr.join('')\n      this.emit('data', body)\n      this.emit('end')\n      if(callback) callback(null, body)\n    })\n}\n\nes.pipeable = function () {\n  throw new Error('[EVENT-STREAM] es.pipeable is deprecated')\n}\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","/*\n * Basic JavaScript BN library - subset useful for RSA encryption.\n *\n * Copyright (c) 2003-2005  Tom Wu\n * All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS-IS\" AND WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY\n * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.\n *\n * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,\n * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER\n * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF\n * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT\n * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * In addition, the following condition applies:\n *\n * All redistributions must retain an intact copy of this copyright notice\n * and disclaimer.\n */\n\n/*\n *\n * Copyright (c) 2015 Zarmack Tanen\n * Fixed .toString(16) to be compatible with node >0.12.7 because hexWrite()\n *       only accepts %2=0 strings\n *\n *\n * Added Node.js Buffers support\n * 2014 rzcoder\n */\n\nvar crypt = require('crypto');\n\n// Bits per digit\nvar dbits;\n\n// JavaScript engine analysis\nvar canary = 0xdeadbeefcafe;\nvar j_lm = ((canary & 0xffffff) == 0xefcafe);\n\n// (public) Constructor\nfunction BigInteger(a, b) {\n    if (a != null) {\n        if (\"number\" == typeof a) {\n            this.fromNumber(a, b);\n        } else if (Buffer.isBuffer(a)) {\n            this.fromBuffer(a);\n        } else if (b == null && \"string\" != typeof a) {\n            this.fromByteArray(a);\n        } else {\n            this.fromString(a, b);\n        }\n    }\n}\n\n// return new, unset BigInteger\nfunction nbi() {\n    return new BigInteger(null);\n}\n\n// am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\n\n// am1: use a single mult and divide to get the high bits,\n// max digit bits should be 26 because\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\nfunction am1(i, x, w, j, c, n) {\n    while (--n >= 0) {\n        var v = x * this[i++] + w[j] + c;\n        c = Math.floor(v / 0x4000000);\n        w[j++] = v & 0x3ffffff;\n    }\n    return c;\n}\n// am2 avoids a big mult-and-extract completely.\n// Max digit bits should be <= 30 because we do bitwise ops\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\nfunction am2(i, x, w, j, c, n) {\n    var xl = x & 0x7fff, xh = x >> 15;\n    while (--n >= 0) {\n        var l = this[i] & 0x7fff;\n        var h = this[i++] >> 15;\n        var m = xh * l + h * xl;\n        l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\n        c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\n        w[j++] = l & 0x3fffffff;\n    }\n    return c;\n}\n// Alternately, set max digit bits to 28 since some\n// browsers slow down when dealing with 32-bit numbers.\nfunction am3(i, x, w, j, c, n) {\n    var xl = x & 0x3fff, xh = x >> 14;\n    while (--n >= 0) {\n        var l = this[i] & 0x3fff;\n        var h = this[i++] >> 14;\n        var m = xh * l + h * xl;\n        l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\n        c = (l >> 28) + (m >> 14) + xh * h;\n        w[j++] = l & 0xfffffff;\n    }\n    return c;\n}\n\n// We need to select the fastest one that works in this environment.\n//if (j_lm && (navigator.appName == \"Microsoft Internet Explorer\")) {\n//\tBigInteger.prototype.am = am2;\n//\tdbits = 30;\n//} else if (j_lm && (navigator.appName != \"Netscape\")) {\n//\tBigInteger.prototype.am = am1;\n//\tdbits = 26;\n//} else { // Mozilla/Netscape seems to prefer am3\n//\tBigInteger.prototype.am = am3;\n//\tdbits = 28;\n//}\n\n// For node.js, we pick am3 with max dbits to 28.\nBigInteger.prototype.am = am3;\ndbits = 28;\n\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = ((1 << dbits) - 1);\nBigInteger.prototype.DV = (1 << dbits);\n\nvar BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2, BI_FP);\nBigInteger.prototype.F1 = BI_FP - dbits;\nBigInteger.prototype.F2 = 2 * dbits - BI_FP;\n\n// Digit conversions\nvar BI_RM = \"0123456789abcdefghijklmnopqrstuvwxyz\";\nvar BI_RC = new Array();\nvar rr, vv;\nrr = \"0\".charCodeAt(0);\nfor (vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;\nrr = \"a\".charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\nrr = \"A\".charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\n\nfunction int2char(n) {\n    return BI_RM.charAt(n);\n}\nfunction intAt(s, i) {\n    var c = BI_RC[s.charCodeAt(i)];\n    return (c == null) ? -1 : c;\n}\n\n// (protected) copy this to r\nfunction bnpCopyTo(r) {\n    for (var i = this.t - 1; i >= 0; --i) r[i] = this[i];\n    r.t = this.t;\n    r.s = this.s;\n}\n\n// (protected) set from integer value x, -DV <= x < DV\nfunction bnpFromInt(x) {\n    this.t = 1;\n    this.s = (x < 0) ? -1 : 0;\n    if (x > 0) this[0] = x;\n    else if (x < -1) this[0] = x + DV;\n    else this.t = 0;\n}\n\n// return bigint initialized to value\nfunction nbv(i) {\n    var r = nbi();\n    r.fromInt(i);\n    return r;\n}\n\n// (protected) set from string and radix\nfunction bnpFromString(data, radix, unsigned) {\n    var k;\n    switch (radix) {\n        case 2:\n            k = 1;\n            break;\n        case 4:\n            k = 2;\n            break;\n        case 8:\n            k = 3;\n            break;\n        case 16:\n            k = 4;\n            break;\n        case 32:\n            k = 5;\n            break;\n        case 256:\n            k = 8;\n            break;\n        default:\n            this.fromRadix(data, radix);\n            return;\n    }\n\n    this.t = 0;\n    this.s = 0;\n\n    var i = data.length;\n    var mi = false;\n    var sh = 0;\n\n    while (--i >= 0) {\n        var x = (k == 8) ? data[i] & 0xff : intAt(data, i);\n        if (x < 0) {\n            if (data.charAt(i) == \"-\") mi = true;\n            continue;\n        }\n        mi = false;\n        if (sh === 0)\n            this[this.t++] = x;\n        else if (sh + k > this.DB) {\n            this[this.t - 1] |= (x & ((1 << (this.DB - sh)) - 1)) << sh;\n            this[this.t++] = (x >> (this.DB - sh));\n        }\n        else\n            this[this.t - 1] |= x << sh;\n        sh += k;\n        if (sh >= this.DB) sh -= this.DB;\n    }\n    if ((!unsigned) && k == 8 && (data[0] & 0x80) != 0) {\n        this.s = -1;\n        if (sh > 0) this[this.t - 1] |= ((1 << (this.DB - sh)) - 1) << sh;\n    }\n    this.clamp();\n    if (mi) BigInteger.ZERO.subTo(this, this);\n}\n\nfunction bnpFromByteArray(a, unsigned) {\n    this.fromString(a, 256, unsigned)\n}\n\nfunction bnpFromBuffer(a) {\n    this.fromString(a, 256, true)\n}\n\n// (protected) clamp off excess high words\nfunction bnpClamp() {\n    var c = this.s & this.DM;\n    while (this.t > 0 && this[this.t - 1] == c) --this.t;\n}\n\n// (public) return string representation in given radix\nfunction bnToString(b) {\n    if (this.s < 0) return \"-\" + this.negate().toString(b);\n    var k;\n    if (b == 16) k = 4;\n    else if (b == 8) k = 3;\n    else if (b == 2) k = 1;\n    else if (b == 32) k = 5;\n    else if (b == 4) k = 2;\n    else return this.toRadix(b);\n    var km = (1 << k) - 1, d, m = false, r = \"\", i = this.t;\n    var p = this.DB - (i * this.DB) % k;\n    if (i-- > 0) {\n        if (p < this.DB && (d = this[i] >> p) > 0) {\n            m = true;\n            r = int2char(d);\n        }\n        while (i >= 0) {\n            if (p < k) {\n                d = (this[i] & ((1 << p) - 1)) << (k - p);\n                d |= this[--i] >> (p += this.DB - k);\n            }\n            else {\n                d = (this[i] >> (p -= k)) & km;\n                if (p <= 0) {\n                    p += this.DB;\n                    --i;\n                }\n            }\n            if (d > 0) m = true;\n            if (m) r += int2char(d);\n        }\n    }\n    //! Fix to be compatible with node >0.12.7 Buffer.js\n    if(b == 16 && r.length % 2 != 0)\n\t     r = \"0\" + r;\n    return m ? r : \"0\";\n}\n\n// (public) -this\nfunction bnNegate() {\n    var r = nbi();\n    BigInteger.ZERO.subTo(this, r);\n    return r;\n}\n\n// (public) |this|\nfunction bnAbs() {\n    return (this.s < 0) ? this.negate() : this;\n}\n\n// (public) return + if this > a, - if this < a, 0 if equal\nfunction bnCompareTo(a) {\n    var r = this.s - a.s;\n    if (r != 0) return r;\n    var i = this.t;\n    r = i - a.t;\n    if (r != 0) return (this.s < 0) ? -r : r;\n    while (--i >= 0) if ((r = this[i] - a[i]) != 0) return r;\n    return 0;\n}\n\nfunction bnEqual(a) {\n  console.log(this.compareTo(a));\n  return (this.compareTo(a) == 0) ? true: false;\n}\n\nfunction bnGreater(a) {\n  return (this.compareTo(a) > 0) ? true : false;\n}\n\nfunction bnGreaterOrEqual(a) {\n  return (this.compareTo(a) >= 0) ? true : false;\n}\n\nfunction bnLesser(a) {\n  return (this.compareTo(a) < 0) ? true : false;\n}\n\nfunction bnLesserOrEqual(a) {\n  return (this.compareTo(a) <= 0) ? true : false;\n}\n\n// returns bit length of the integer x\nfunction nbits(x) {\n    var r = 1, t;\n    if ((t = x >>> 16) != 0) {\n        x = t;\n        r += 16;\n    }\n    if ((t = x >> 8) != 0) {\n        x = t;\n        r += 8;\n    }\n    if ((t = x >> 4) != 0) {\n        x = t;\n        r += 4;\n    }\n    if ((t = x >> 2) != 0) {\n        x = t;\n        r += 2;\n    }\n    if ((t = x >> 1) != 0) {\n        x = t;\n        r += 1;\n    }\n    return r;\n}\n\n// (public) return the number of bits in \"this\"\nfunction bnBitLength() {\n    if (this.t <= 0) return 0;\n    return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ (this.s & this.DM));\n}\n\n// (protected) r = this << n*DB\nfunction bnpDLShiftTo(n, r) {\n    var i;\n    for (i = this.t - 1; i >= 0; --i) r[i + n] = this[i];\n    for (i = n - 1; i >= 0; --i) r[i] = 0;\n    r.t = this.t + n;\n    r.s = this.s;\n}\n\n// (protected) r = this >> n*DB\nfunction bnpDRShiftTo(n, r) {\n    for (var i = n; i < this.t; ++i) r[i - n] = this[i];\n    r.t = Math.max(this.t - n, 0);\n    r.s = this.s;\n}\n\n// (protected) r = this << n\nfunction bnpLShiftTo(n, r) {\n    var bs = n % this.DB;\n    var cbs = this.DB - bs;\n    var bm = (1 << cbs) - 1;\n    var ds = Math.floor(n / this.DB), c = (this.s << bs) & this.DM, i;\n    for (i = this.t - 1; i >= 0; --i) {\n        r[i + ds + 1] = (this[i] >> cbs) | c;\n        c = (this[i] & bm) << bs;\n    }\n    for (i = ds - 1; i >= 0; --i) r[i] = 0;\n    r[ds] = c;\n    r.t = this.t + ds + 1;\n    r.s = this.s;\n    r.clamp();\n}\n\n// (protected) r = this >> n\nfunction bnpRShiftTo(n, r) {\n    r.s = this.s;\n    var ds = Math.floor(n / this.DB);\n    if (ds >= this.t) {\n        r.t = 0;\n        return;\n    }\n    var bs = n % this.DB;\n    var cbs = this.DB - bs;\n    var bm = (1 << bs) - 1;\n    r[0] = this[ds] >> bs;\n    for (var i = ds + 1; i < this.t; ++i) {\n        r[i - ds - 1] |= (this[i] & bm) << cbs;\n        r[i - ds] = this[i] >> bs;\n    }\n    if (bs > 0) r[this.t - ds - 1] |= (this.s & bm) << cbs;\n    r.t = this.t - ds;\n    r.clamp();\n}\n\n// (protected) r = this - a\nfunction bnpSubTo(a, r) {\n    var i = 0, c = 0, m = Math.min(a.t, this.t);\n    while (i < m) {\n        c += this[i] - a[i];\n        r[i++] = c & this.DM;\n        c >>= this.DB;\n    }\n    if (a.t < this.t) {\n        c -= a.s;\n        while (i < this.t) {\n            c += this[i];\n            r[i++] = c & this.DM;\n            c >>= this.DB;\n        }\n        c += this.s;\n    }\n    else {\n        c += this.s;\n        while (i < a.t) {\n            c -= a[i];\n            r[i++] = c & this.DM;\n            c >>= this.DB;\n        }\n        c -= a.s;\n    }\n    r.s = (c < 0) ? -1 : 0;\n    if (c < -1) r[i++] = this.DV + c;\n    else if (c > 0) r[i++] = c;\n    r.t = i;\n    r.clamp();\n}\n\n// (protected) r = this * a, r != this,a (HAC 14.12)\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyTo(a, r) {\n    var x = this.abs(), y = a.abs();\n    var i = x.t;\n    r.t = i + y.t;\n    while (--i >= 0) r[i] = 0;\n    for (i = 0; i < y.t; ++i) r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\n    r.s = 0;\n    r.clamp();\n    if (this.s != a.s) BigInteger.ZERO.subTo(r, r);\n}\n\n// (protected) r = this^2, r != this (HAC 14.16)\nfunction bnpSquareTo(r) {\n    var x = this.abs();\n    var i = r.t = 2 * x.t;\n    while (--i >= 0) r[i] = 0;\n    for (i = 0; i < x.t - 1; ++i) {\n        var c = x.am(i, x[i], r, 2 * i, 0, 1);\n        if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV) {\n            r[i + x.t] -= x.DV;\n            r[i + x.t + 1] = 1;\n        }\n    }\n    if (r.t > 0) r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\n    r.s = 0;\n    r.clamp();\n}\n\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n// r != q, this != m.  q or r may be null.\nfunction bnpDivRemTo(m, q, r) {\n    var pm = m.abs();\n    if (pm.t <= 0) return;\n    var pt = this.abs();\n    if (pt.t < pm.t) {\n        if (q != null) q.fromInt(0);\n        if (r != null) this.copyTo(r);\n        return;\n    }\n    if (r == null) r = nbi();\n    var y = nbi(), ts = this.s, ms = m.s;\n    var nsh = this.DB - nbits(pm[pm.t - 1]);\t// normalize modulus\n    if (nsh > 0) {\n        pm.lShiftTo(nsh, y);\n        pt.lShiftTo(nsh, r);\n    }\n    else {\n        pm.copyTo(y);\n        pt.copyTo(r);\n    }\n    var ys = y.t;\n    var y0 = y[ys - 1];\n    if (y0 === 0) return;\n    var yt = y0 * (1 << this.F1) + ((ys > 1) ? y[ys - 2] >> this.F2 : 0);\n    var d1 = this.FV / yt, d2 = (1 << this.F1) / yt, e = 1 << this.F2;\n    var i = r.t, j = i - ys, t = (q == null) ? nbi() : q;\n    y.dlShiftTo(j, t);\n    if (r.compareTo(t) >= 0) {\n        r[r.t++] = 1;\n        r.subTo(t, r);\n    }\n    BigInteger.ONE.dlShiftTo(ys, t);\n    t.subTo(y, y);\t// \"negative\" y so we can replace sub with am later\n    while (y.t < ys) y[y.t++] = 0;\n    while (--j >= 0) {\n        // Estimate quotient digit\n        var qd = (r[--i] == y0) ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\n        if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) {\t// Try it out\n            y.dlShiftTo(j, t);\n            r.subTo(t, r);\n            while (r[i] < --qd) r.subTo(t, r);\n        }\n    }\n    if (q != null) {\n        r.drShiftTo(ys, q);\n        if (ts != ms) BigInteger.ZERO.subTo(q, q);\n    }\n    r.t = ys;\n    r.clamp();\n    if (nsh > 0) r.rShiftTo(nsh, r);\t// Denormalize remainder\n    if (ts < 0) BigInteger.ZERO.subTo(r, r);\n}\n\n// (public) this mod a\nfunction bnMod(a) {\n    var r = nbi();\n    this.abs().divRemTo(a, null, r);\n    if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r, r);\n    return r;\n}\n\n// Modular reduction using \"classic\" algorithm\nfunction Classic(m) {\n    this.m = m;\n}\nfunction cConvert(x) {\n    if (x.s < 0 || x.compareTo(this.m) >= 0) return x.mod(this.m);\n    else return x;\n}\nfunction cRevert(x) {\n    return x;\n}\nfunction cReduce(x) {\n    x.divRemTo(this.m, null, x);\n}\nfunction cMulTo(x, y, r) {\n    x.multiplyTo(y, r);\n    this.reduce(r);\n}\nfunction cSqrTo(x, r) {\n    x.squareTo(r);\n    this.reduce(r);\n}\n\nClassic.prototype.convert = cConvert;\nClassic.prototype.revert = cRevert;\nClassic.prototype.reduce = cReduce;\nClassic.prototype.mulTo = cMulTo;\nClassic.prototype.sqrTo = cSqrTo;\n\n// (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n// justification:\n//         xy == 1 (mod m)\n//         xy =  1+km\n//   xy(2-xy) = (1+km)(1-km)\n// x[y(2-xy)] = 1-k^2m^2\n// x[y(2-xy)] == 1 (mod m^2)\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\nfunction bnpInvDigit() {\n    if (this.t < 1) return 0;\n    var x = this[0];\n    if ((x & 1) === 0) return 0;\n    var y = x & 3;\t\t// y == 1/x mod 2^2\n    y = (y * (2 - (x & 0xf) * y)) & 0xf;\t// y == 1/x mod 2^4\n    y = (y * (2 - (x & 0xff) * y)) & 0xff;\t// y == 1/x mod 2^8\n    y = (y * (2 - (((x & 0xffff) * y) & 0xffff))) & 0xffff;\t// y == 1/x mod 2^16\n    // last step - calculate inverse mod DV directly;\n    // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n    y = (y * (2 - x * y % this.DV)) % this.DV;\t\t// y == 1/x mod 2^dbits\n    // we really want the negative inverse, and -DV < y < DV\n    return (y > 0) ? this.DV - y : -y;\n}\n\n// Montgomery reduction\nfunction Montgomery(m) {\n    this.m = m;\n    this.mp = m.invDigit();\n    this.mpl = this.mp & 0x7fff;\n    this.mph = this.mp >> 15;\n    this.um = (1 << (m.DB - 15)) - 1;\n    this.mt2 = 2 * m.t;\n}\n\n// xR mod m\nfunction montConvert(x) {\n    var r = nbi();\n    x.abs().dlShiftTo(this.m.t, r);\n    r.divRemTo(this.m, null, r);\n    if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r, r);\n    return r;\n}\n\n// x/R mod m\nfunction montRevert(x) {\n    var r = nbi();\n    x.copyTo(r);\n    this.reduce(r);\n    return r;\n}\n\n// x = x/R mod m (HAC 14.32)\nfunction montReduce(x) {\n    while (x.t <= this.mt2)\t// pad x so am has enough room later\n        x[x.t++] = 0;\n    for (var i = 0; i < this.m.t; ++i) {\n        // faster way of calculating u0 = x[i]*mp mod DV\n        var j = x[i] & 0x7fff;\n        var u0 = (j * this.mpl + (((j * this.mph + (x[i] >> 15) * this.mpl) & this.um) << 15)) & x.DM;\n        // use am to combine the multiply-shift-add into one call\n        j = i + this.m.t;\n        x[j] += this.m.am(0, u0, x, i, 0, this.m.t);\n        // propagate carry\n        while (x[j] >= x.DV) {\n            x[j] -= x.DV;\n            x[++j]++;\n        }\n    }\n    x.clamp();\n    x.drShiftTo(this.m.t, x);\n    if (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\n}\n\n// r = \"x^2/R mod m\"; x != r\nfunction montSqrTo(x, r) {\n    x.squareTo(r);\n    this.reduce(r);\n}\n\n// r = \"xy/R mod m\"; x,y != r\nfunction montMulTo(x, y, r) {\n    x.multiplyTo(y, r);\n    this.reduce(r);\n}\n\nMontgomery.prototype.convert = montConvert;\nMontgomery.prototype.revert = montRevert;\nMontgomery.prototype.reduce = montReduce;\nMontgomery.prototype.mulTo = montMulTo;\nMontgomery.prototype.sqrTo = montSqrTo;\n\n// (protected) true iff this is even\nfunction bnpIsEven() {\n    return ((this.t > 0) ? (this[0] & 1) : this.s) === 0;\n}\n\n// (protected) this^e, e < 2^32, doing sqr and mul with \"r\" (HAC 14.79)\nfunction bnpExp(e, z) {\n    if (e > 0xffffffff || e < 1) return BigInteger.ONE;\n    var r = nbi(), r2 = nbi(), g = z.convert(this), i = nbits(e) - 1;\n    g.copyTo(r);\n    while (--i >= 0) {\n        z.sqrTo(r, r2);\n        if ((e & (1 << i)) > 0) z.mulTo(r2, g, r);\n        else {\n            var t = r;\n            r = r2;\n            r2 = t;\n        }\n    }\n    return z.revert(r);\n}\n\n// (public) this^e % m, 0 <= e < 2^32\nfunction bnModPowInt(e, m) {\n    var z;\n    if (e < 256 || m.isEven()) z = new Classic(m); else z = new Montgomery(m);\n    return this.exp(e, z);\n}\n\n// Copyright (c) 2005-2009  Tom Wu\n// All Rights Reserved.\n// See \"LICENSE\" for details.\n\n// Extended JavaScript BN functions, required for RSA private ops.\n\n// Version 1.1: new BigInteger(\"0\", 10) returns \"proper\" zero\n// Version 1.2: square() API, isProbablePrime fix\n\n//(public)\nfunction bnClone() {\n    var r = nbi();\n    this.copyTo(r);\n    return r;\n}\n\n//(public) return value as integer\nfunction bnIntValue() {\n    if (this.s < 0) {\n        if (this.t == 1) return this[0] - this.DV;\n        else if (this.t === 0) return -1;\n    }\n    else if (this.t == 1) return this[0];\n    else if (this.t === 0) return 0;\n// assumes 16 < DB < 32\n    return ((this[1] & ((1 << (32 - this.DB)) - 1)) << this.DB) | this[0];\n}\n\n//(public) return value as byte\nfunction bnByteValue() {\n    return (this.t == 0) ? this.s : (this[0] << 24) >> 24;\n}\n\n//(public) return value as short (assumes DB>=16)\nfunction bnShortValue() {\n    return (this.t == 0) ? this.s : (this[0] << 16) >> 16;\n}\n\n//(protected) return x s.t. r^x < DV\nfunction bnpChunkSize(r) {\n    return Math.floor(Math.LN2 * this.DB / Math.log(r));\n}\n\n//(public) 0 if this === 0, 1 if this > 0\nfunction bnSigNum() {\n    if (this.s < 0) return -1;\n    else if (this.t <= 0 || (this.t == 1 && this[0] <= 0)) return 0;\n    else return 1;\n}\n\n//(protected) convert to radix string\nfunction bnpToRadix(b) {\n    if (b == null) b = 10;\n    if (this.signum() === 0 || b < 2 || b > 36) return \"0\";\n    var cs = this.chunkSize(b);\n    var a = Math.pow(b, cs);\n    var d = nbv(a), y = nbi(), z = nbi(), r = \"\";\n    this.divRemTo(d, y, z);\n    while (y.signum() > 0) {\n        r = (a + z.intValue()).toString(b).substr(1) + r;\n        y.divRemTo(d, y, z);\n    }\n    return z.intValue().toString(b) + r;\n}\n\n//(protected) convert from radix string\nfunction bnpFromRadix(s, b) {\n    this.fromInt(0);\n    if (b == null) b = 10;\n    var cs = this.chunkSize(b);\n    var d = Math.pow(b, cs), mi = false, j = 0, w = 0;\n    for (var i = 0; i < s.length; ++i) {\n        var x = intAt(s, i);\n        if (x < 0) {\n            if (s.charAt(i) == \"-\" && this.signum() === 0) mi = true;\n            continue;\n        }\n        w = b * w + x;\n        if (++j >= cs) {\n            this.dMultiply(d);\n            this.dAddOffset(w, 0);\n            j = 0;\n            w = 0;\n        }\n    }\n    if (j > 0) {\n        this.dMultiply(Math.pow(b, j));\n        this.dAddOffset(w, 0);\n    }\n    if (mi) BigInteger.ZERO.subTo(this, this);\n}\n\n//(protected) alternate constructor\nfunction bnpFromNumber(a, b) {\n    if (\"number\" == typeof b) {\n        // new BigInteger(int,int,RNG)\n        if (a < 2) this.fromInt(1);\n        else {\n            this.fromNumber(a);\n            if (!this.testBit(a - 1))\t// force MSB set\n                this.bitwiseTo(BigInteger.ONE.shiftLeft(a - 1), op_or, this);\n            if (this.isEven()) this.dAddOffset(1, 0); // force odd\n            while (!this.isProbablePrime(b)) {\n                this.dAddOffset(2, 0);\n                if (this.bitLength() > a) this.subTo(BigInteger.ONE.shiftLeft(a - 1), this);\n            }\n        }\n    } else {\n        // new BigInteger(int,RNG)\n        var x = crypt.randomBytes((a >> 3) + 1)\n        var t = a & 7;\n\n        if (t > 0)\n            x[0] &= ((1 << t) - 1);\n        else\n            x[0] = 0;\n\n        this.fromByteArray(x);\n    }\n}\n\n//(public) convert to bigendian byte array\nfunction bnToByteArray() {\n    var i = this.t, r = new Array();\n    r[0] = this.s;\n    var p = this.DB - (i * this.DB) % 8, d, k = 0;\n    if (i-- > 0) {\n        if (p < this.DB && (d = this[i] >> p) != (this.s & this.DM) >> p)\n            r[k++] = d | (this.s << (this.DB - p));\n        while (i >= 0) {\n            if (p < 8) {\n                d = (this[i] & ((1 << p) - 1)) << (8 - p);\n                d |= this[--i] >> (p += this.DB - 8);\n            }\n            else {\n                d = (this[i] >> (p -= 8)) & 0xff;\n                if (p <= 0) {\n                    p += this.DB;\n                    --i;\n                }\n            }\n            if ((d & 0x80) != 0) d |= -256;\n            if (k === 0 && (this.s & 0x80) != (d & 0x80)) ++k;\n            if (k > 0 || d != this.s) r[k++] = d;\n        }\n    }\n    return r;\n}\n\n/**\n * return Buffer object\n * @param trim {boolean} slice buffer if first element == 0\n * @returns {Buffer}\n */\nfunction bnToBuffer(trimOrSize) {\n    var res = Buffer.from(this.toByteArray());\n    if (trimOrSize === true && res[0] === 0) {\n        res = res.slice(1);\n    } else if (typeof trimOrSize == 'number') {\n        if (res.length > trimOrSize) {\n            for (var i = 0; i < res.length - trimOrSize; i++) {\n                if (res[i] !== 0) {\n                    return null;\n                }\n            }\n            return res.slice(res.length - trimOrSize);\n        } else if (res.length < trimOrSize) {\n            var padded = Buffer.alloc(trimOrSize);\n            padded.fill(0, 0, trimOrSize - res.length);\n            res.copy(padded, trimOrSize - res.length);\n            return padded;\n        }\n    }\n    return res;\n}\n\nfunction bnEquals(a) {\n    return (this.compareTo(a) == 0);\n}\nfunction bnMin(a) {\n    return (this.compareTo(a) < 0) ? this : a;\n}\nfunction bnMax(a) {\n    return (this.compareTo(a) > 0) ? this : a;\n}\n\n//(protected) r = this op a (bitwise)\nfunction bnpBitwiseTo(a, op, r) {\n    var i, f, m = Math.min(a.t, this.t);\n    for (i = 0; i < m; ++i) r[i] = op(this[i], a[i]);\n    if (a.t < this.t) {\n        f = a.s & this.DM;\n        for (i = m; i < this.t; ++i) r[i] = op(this[i], f);\n        r.t = this.t;\n    }\n    else {\n        f = this.s & this.DM;\n        for (i = m; i < a.t; ++i) r[i] = op(f, a[i]);\n        r.t = a.t;\n    }\n    r.s = op(this.s, a.s);\n    r.clamp();\n}\n\n//(public) this & a\nfunction op_and(x, y) {\n    return x & y;\n}\nfunction bnAnd(a) {\n    var r = nbi();\n    this.bitwiseTo(a, op_and, r);\n    return r;\n}\n\n//(public) this | a\nfunction op_or(x, y) {\n    return x | y;\n}\nfunction bnOr(a) {\n    var r = nbi();\n    this.bitwiseTo(a, op_or, r);\n    return r;\n}\n\n//(public) this ^ a\nfunction op_xor(x, y) {\n    return x ^ y;\n}\nfunction bnXor(a) {\n    var r = nbi();\n    this.bitwiseTo(a, op_xor, r);\n    return r;\n}\n\n//(public) this & ~a\nfunction op_andnot(x, y) {\n    return x & ~y;\n}\nfunction bnAndNot(a) {\n    var r = nbi();\n    this.bitwiseTo(a, op_andnot, r);\n    return r;\n}\n\n//(public) ~this\nfunction bnNot() {\n    var r = nbi();\n    for (var i = 0; i < this.t; ++i) r[i] = this.DM & ~this[i];\n    r.t = this.t;\n    r.s = ~this.s;\n    return r;\n}\n\n//(public) this << n\nfunction bnShiftLeft(n) {\n    var r = nbi();\n    if (n < 0) this.rShiftTo(-n, r); else this.lShiftTo(n, r);\n    return r;\n}\n\n//(public) this >> n\nfunction bnShiftRight(n) {\n    var r = nbi();\n    if (n < 0) this.lShiftTo(-n, r); else this.rShiftTo(n, r);\n    return r;\n}\n\n//return index of lowest 1-bit in x, x < 2^31\nfunction lbit(x) {\n    if (x === 0) return -1;\n    var r = 0;\n    if ((x & 0xffff) === 0) {\n        x >>= 16;\n        r += 16;\n    }\n    if ((x & 0xff) === 0) {\n        x >>= 8;\n        r += 8;\n    }\n    if ((x & 0xf) === 0) {\n        x >>= 4;\n        r += 4;\n    }\n    if ((x & 3) === 0) {\n        x >>= 2;\n        r += 2;\n    }\n    if ((x & 1) === 0) ++r;\n    return r;\n}\n\n//(public) returns index of lowest 1-bit (or -1 if none)\nfunction bnGetLowestSetBit() {\n    for (var i = 0; i < this.t; ++i)\n        if (this[i] != 0) return i * this.DB + lbit(this[i]);\n    if (this.s < 0) return this.t * this.DB;\n    return -1;\n}\n\n//return number of 1 bits in x\nfunction cbit(x) {\n    var r = 0;\n    while (x != 0) {\n        x &= x - 1;\n        ++r;\n    }\n    return r;\n}\n\n//(public) return number of set bits\nfunction bnBitCount() {\n    var r = 0, x = this.s & this.DM;\n    for (var i = 0; i < this.t; ++i) r += cbit(this[i] ^ x);\n    return r;\n}\n\n//(public) true iff nth bit is set\nfunction bnTestBit(n) {\n    var j = Math.floor(n / this.DB);\n    if (j >= this.t) return (this.s != 0);\n    return ((this[j] & (1 << (n % this.DB))) != 0);\n}\n\n//(protected) this op (1<<n)\nfunction bnpChangeBit(n, op) {\n    var r = BigInteger.ONE.shiftLeft(n);\n    this.bitwiseTo(r, op, r);\n    return r;\n}\n\n//(public) this | (1<<n)\nfunction bnSetBit(n) {\n    return this.changeBit(n, op_or);\n}\n\n//(public) this & ~(1<<n)\nfunction bnClearBit(n) {\n    return this.changeBit(n, op_andnot);\n}\n\n//(public) this ^ (1<<n)\nfunction bnFlipBit(n) {\n    return this.changeBit(n, op_xor);\n}\n\n//(protected) r = this + a\nfunction bnpAddTo(a, r) {\n    var i = 0, c = 0, m = Math.min(a.t, this.t);\n    while (i < m) {\n        c += this[i] + a[i];\n        r[i++] = c & this.DM;\n        c >>= this.DB;\n    }\n    if (a.t < this.t) {\n        c += a.s;\n        while (i < this.t) {\n            c += this[i];\n            r[i++] = c & this.DM;\n            c >>= this.DB;\n        }\n        c += this.s;\n    }\n    else {\n        c += this.s;\n        while (i < a.t) {\n            c += a[i];\n            r[i++] = c & this.DM;\n            c >>= this.DB;\n        }\n        c += a.s;\n    }\n    r.s = (c < 0) ? -1 : 0;\n    if (c > 0) r[i++] = c;\n    else if (c < -1) r[i++] = this.DV + c;\n    r.t = i;\n    r.clamp();\n}\n\n//(public) this + a\nfunction bnAdd(a) {\n    var r = nbi();\n    this.addTo(a, r);\n    return r;\n}\n\n//(public) this - a\nfunction bnSubtract(a) {\n    var r = nbi();\n    this.subTo(a, r);\n    return r;\n}\n\n//(public) this * a\nfunction bnMultiply(a) {\n    var r = nbi();\n    this.multiplyTo(a, r);\n    return r;\n}\n\n// (public) this^2\nfunction bnSquare() {\n    var r = nbi();\n    this.squareTo(r);\n    return r;\n}\n\n//(public) this / a\nfunction bnDivide(a) {\n    var r = nbi();\n    this.divRemTo(a, r, null);\n    return r;\n}\n\n//(public) this % a\nfunction bnRemainder(a) {\n    var r = nbi();\n    this.divRemTo(a, null, r);\n    return r;\n}\n\n//(public) [this/a,this%a]\nfunction bnDivideAndRemainder(a) {\n    var q = nbi(), r = nbi();\n    this.divRemTo(a, q, r);\n    return new Array(q, r);\n}\n\n//(protected) this *= n, this >= 0, 1 < n < DV\nfunction bnpDMultiply(n) {\n    this[this.t] = this.am(0, n - 1, this, 0, 0, this.t);\n    ++this.t;\n    this.clamp();\n}\n\n//(protected) this += n << w words, this >= 0\nfunction bnpDAddOffset(n, w) {\n    if (n === 0) return;\n    while (this.t <= w) this[this.t++] = 0;\n    this[w] += n;\n    while (this[w] >= this.DV) {\n        this[w] -= this.DV;\n        if (++w >= this.t) this[this.t++] = 0;\n        ++this[w];\n    }\n}\n\n//A \"null\" reducer\nfunction NullExp() {\n}\nfunction nNop(x) {\n    return x;\n}\nfunction nMulTo(x, y, r) {\n    x.multiplyTo(y, r);\n}\nfunction nSqrTo(x, r) {\n    x.squareTo(r);\n}\n\nNullExp.prototype.convert = nNop;\nNullExp.prototype.revert = nNop;\nNullExp.prototype.mulTo = nMulTo;\nNullExp.prototype.sqrTo = nSqrTo;\n\n//(public) this^e\nfunction bnPow(e) {\n    return this.exp(e, new NullExp());\n}\n\n//(protected) r = lower n words of \"this * a\", a.t <= n\n//\"this\" should be the larger one if appropriate.\nfunction bnpMultiplyLowerTo(a, n, r) {\n    var i = Math.min(this.t + a.t, n);\n    r.s = 0; // assumes a,this >= 0\n    r.t = i;\n    while (i > 0) r[--i] = 0;\n    var j;\n    for (j = r.t - this.t; i < j; ++i) r[i + this.t] = this.am(0, a[i], r, i, 0, this.t);\n    for (j = Math.min(a.t, n); i < j; ++i) this.am(0, a[i], r, i, 0, n - i);\n    r.clamp();\n}\n\n//(protected) r = \"this * a\" without lower n words, n > 0\n//\"this\" should be the larger one if appropriate.\nfunction bnpMultiplyUpperTo(a, n, r) {\n    --n;\n    var i = r.t = this.t + a.t - n;\n    r.s = 0; // assumes a,this >= 0\n    while (--i >= 0) r[i] = 0;\n    for (i = Math.max(n - this.t, 0); i < a.t; ++i)\n        r[this.t + i - n] = this.am(n - i, a[i], r, 0, 0, this.t + i - n);\n    r.clamp();\n    r.drShiftTo(1, r);\n}\n\n//Barrett modular reduction\nfunction Barrett(m) {\n// setup Barrett\n    this.r2 = nbi();\n    this.q3 = nbi();\n    BigInteger.ONE.dlShiftTo(2 * m.t, this.r2);\n    this.mu = this.r2.divide(m);\n    this.m = m;\n}\n\nfunction barrettConvert(x) {\n    if (x.s < 0 || x.t > 2 * this.m.t) return x.mod(this.m);\n    else if (x.compareTo(this.m) < 0) return x;\n    else {\n        var r = nbi();\n        x.copyTo(r);\n        this.reduce(r);\n        return r;\n    }\n}\n\nfunction barrettRevert(x) {\n    return x;\n}\n\n//x = x mod m (HAC 14.42)\nfunction barrettReduce(x) {\n    x.drShiftTo(this.m.t - 1, this.r2);\n    if (x.t > this.m.t + 1) {\n        x.t = this.m.t + 1;\n        x.clamp();\n    }\n    this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3);\n    this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2);\n    while (x.compareTo(this.r2) < 0) x.dAddOffset(1, this.m.t + 1);\n    x.subTo(this.r2, x);\n    while (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\n}\n\n//r = x^2 mod m; x != r\nfunction barrettSqrTo(x, r) {\n    x.squareTo(r);\n    this.reduce(r);\n}\n\n//r = x*y mod m; x,y != r\nfunction barrettMulTo(x, y, r) {\n    x.multiplyTo(y, r);\n    this.reduce(r);\n}\n\nBarrett.prototype.convert = barrettConvert;\nBarrett.prototype.revert = barrettRevert;\nBarrett.prototype.reduce = barrettReduce;\nBarrett.prototype.mulTo = barrettMulTo;\nBarrett.prototype.sqrTo = barrettSqrTo;\n\n//(public) this^e % m (HAC 14.85)\nfunction bnModPow(e, m) {\n    var i = e.bitLength(), k, r = nbv(1), z;\n    if (i <= 0) return r;\n    else if (i < 18) k = 1;\n    else if (i < 48) k = 3;\n    else if (i < 144) k = 4;\n    else if (i < 768) k = 5;\n    else k = 6;\n    if (i < 8)\n        z = new Classic(m);\n    else if (m.isEven())\n        z = new Barrett(m);\n    else\n        z = new Montgomery(m);\n\n// precomputation\n    var g = new Array(), n = 3, k1 = k - 1, km = (1 << k) - 1;\n    g[1] = z.convert(this);\n    if (k > 1) {\n        var g2 = nbi();\n        z.sqrTo(g[1], g2);\n        while (n <= km) {\n            g[n] = nbi();\n            z.mulTo(g2, g[n - 2], g[n]);\n            n += 2;\n        }\n    }\n\n    var j = e.t - 1, w, is1 = true, r2 = nbi(), t;\n    i = nbits(e[j]) - 1;\n    while (j >= 0) {\n        if (i >= k1) w = (e[j] >> (i - k1)) & km;\n        else {\n            w = (e[j] & ((1 << (i + 1)) - 1)) << (k1 - i);\n            if (j > 0) w |= e[j - 1] >> (this.DB + i - k1);\n        }\n\n        n = k;\n        while ((w & 1) === 0) {\n            w >>= 1;\n            --n;\n        }\n        if ((i -= n) < 0) {\n            i += this.DB;\n            --j;\n        }\n        if (is1) {\t// ret == 1, don't bother squaring or multiplying it\n            g[w].copyTo(r);\n            is1 = false;\n        }\n        else {\n            while (n > 1) {\n                z.sqrTo(r, r2);\n                z.sqrTo(r2, r);\n                n -= 2;\n            }\n            if (n > 0) z.sqrTo(r, r2); else {\n                t = r;\n                r = r2;\n                r2 = t;\n            }\n            z.mulTo(r2, g[w], r);\n        }\n\n        while (j >= 0 && (e[j] & (1 << i)) === 0) {\n            z.sqrTo(r, r2);\n            t = r;\n            r = r2;\n            r2 = t;\n            if (--i < 0) {\n                i = this.DB - 1;\n                --j;\n            }\n        }\n    }\n    return z.revert(r);\n}\n\n//(public) gcd(this,a) (HAC 14.54)\nfunction bnGCD(a) {\n    var x = (this.s < 0) ? this.negate() : this.clone();\n    var y = (a.s < 0) ? a.negate() : a.clone();\n    if (x.compareTo(y) < 0) {\n        var t = x;\n        x = y;\n        y = t;\n    }\n    var i = x.getLowestSetBit(), g = y.getLowestSetBit();\n    if (g < 0) return x;\n    if (i < g) g = i;\n    if (g > 0) {\n        x.rShiftTo(g, x);\n        y.rShiftTo(g, y);\n    }\n    while (x.signum() > 0) {\n        if ((i = x.getLowestSetBit()) > 0) x.rShiftTo(i, x);\n        if ((i = y.getLowestSetBit()) > 0) y.rShiftTo(i, y);\n        if (x.compareTo(y) >= 0) {\n            x.subTo(y, x);\n            x.rShiftTo(1, x);\n        }\n        else {\n            y.subTo(x, y);\n            y.rShiftTo(1, y);\n        }\n    }\n    if (g > 0) y.lShiftTo(g, y);\n    return y;\n}\n\n//(protected) this % n, n < 2^26\nfunction bnpModInt(n) {\n    if (n <= 0) return 0;\n    var d = this.DV % n, r = (this.s < 0) ? n - 1 : 0;\n    if (this.t > 0)\n        if (d === 0) r = this[0] % n;\n        else for (var i = this.t - 1; i >= 0; --i) r = (d * r + this[i]) % n;\n    return r;\n}\n\n//(public) 1/this % m (HAC 14.61)\nfunction bnModInverse(m) {\n    var ac = m.isEven();\n    if ((this.isEven() && ac) || m.signum() === 0) return BigInteger.ZERO;\n    var u = m.clone(), v = this.clone();\n    var a = nbv(1), b = nbv(0), c = nbv(0), d = nbv(1);\n    while (u.signum() != 0) {\n        while (u.isEven()) {\n            u.rShiftTo(1, u);\n            if (ac) {\n                if (!a.isEven() || !b.isEven()) {\n                    a.addTo(this, a);\n                    b.subTo(m, b);\n                }\n                a.rShiftTo(1, a);\n            }\n            else if (!b.isEven()) b.subTo(m, b);\n            b.rShiftTo(1, b);\n        }\n        while (v.isEven()) {\n            v.rShiftTo(1, v);\n            if (ac) {\n                if (!c.isEven() || !d.isEven()) {\n                    c.addTo(this, c);\n                    d.subTo(m, d);\n                }\n                c.rShiftTo(1, c);\n            }\n            else if (!d.isEven()) d.subTo(m, d);\n            d.rShiftTo(1, d);\n        }\n        if (u.compareTo(v) >= 0) {\n            u.subTo(v, u);\n            if (ac) a.subTo(c, a);\n            b.subTo(d, b);\n        }\n        else {\n            v.subTo(u, v);\n            if (ac) c.subTo(a, c);\n            d.subTo(b, d);\n        }\n    }\n    if (v.compareTo(BigInteger.ONE) != 0) return BigInteger.ZERO;\n    if (d.compareTo(m) >= 0) return d.subtract(m);\n    if (d.signum() < 0) d.addTo(m, d); else return d;\n    if (d.signum() < 0) return d.add(m); else return d;\n}\n\nvar lowprimes = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997];\nvar lplim = (1 << 26) / lowprimes[lowprimes.length - 1];\n\n//(public) test primality with certainty >= 1-.5^t\nfunction bnIsProbablePrime(t) {\n    var i, x = this.abs();\n    if (x.t == 1 && x[0] <= lowprimes[lowprimes.length - 1]) {\n        for (i = 0; i < lowprimes.length; ++i)\n            if (x[0] == lowprimes[i]) return true;\n        return false;\n    }\n    if (x.isEven()) return false;\n    i = 1;\n    while (i < lowprimes.length) {\n        var m = lowprimes[i], j = i + 1;\n        while (j < lowprimes.length && m < lplim) m *= lowprimes[j++];\n        m = x.modInt(m);\n        while (i < j) if (m % lowprimes[i++] === 0) return false;\n    }\n    return x.millerRabin(t);\n}\n\n//(protected) true if probably prime (HAC 4.24, Miller-Rabin)\nfunction bnpMillerRabin(t) {\n    var n1 = this.subtract(BigInteger.ONE);\n    var k = n1.getLowestSetBit();\n    if (k <= 0) return false;\n    var r = n1.shiftRight(k);\n    t = (t + 1) >> 1;\n    if (t > lowprimes.length) t = lowprimes.length;\n    var a = nbi();\n    for (var i = 0; i < t; ++i) {\n        //Pick bases at random, instead of starting at 2\n        a.fromInt(lowprimes[Math.floor(Math.random() * lowprimes.length)]);\n        var y = a.modPow(r, this);\n        if (y.compareTo(BigInteger.ONE) != 0 && y.compareTo(n1) != 0) {\n            var j = 1;\n            while (j++ < k && y.compareTo(n1) != 0) {\n                y = y.modPowInt(2, this);\n                if (y.compareTo(BigInteger.ONE) === 0) return false;\n            }\n            if (y.compareTo(n1) != 0) return false;\n        }\n    }\n    return true;\n}\n\n// protected\nBigInteger.prototype.copyTo = bnpCopyTo;\nBigInteger.prototype.fromInt = bnpFromInt;\nBigInteger.prototype.fromString = bnpFromString;\nBigInteger.prototype.fromByteArray = bnpFromByteArray;\nBigInteger.prototype.fromBuffer = bnpFromBuffer;\nBigInteger.prototype.clamp = bnpClamp;\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\nBigInteger.prototype.subTo = bnpSubTo;\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\nBigInteger.prototype.squareTo = bnpSquareTo;\nBigInteger.prototype.divRemTo = bnpDivRemTo;\nBigInteger.prototype.invDigit = bnpInvDigit;\nBigInteger.prototype.isEven = bnpIsEven;\nBigInteger.prototype.exp = bnpExp;\n\nBigInteger.prototype.chunkSize = bnpChunkSize;\nBigInteger.prototype.toRadix = bnpToRadix;\nBigInteger.prototype.fromRadix = bnpFromRadix;\nBigInteger.prototype.fromNumber = bnpFromNumber;\nBigInteger.prototype.bitwiseTo = bnpBitwiseTo;\nBigInteger.prototype.changeBit = bnpChangeBit;\nBigInteger.prototype.addTo = bnpAddTo;\nBigInteger.prototype.dMultiply = bnpDMultiply;\nBigInteger.prototype.dAddOffset = bnpDAddOffset;\nBigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;\nBigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;\nBigInteger.prototype.modInt = bnpModInt;\nBigInteger.prototype.millerRabin = bnpMillerRabin;\n\n\n// public\nBigInteger.prototype.toString = bnToString;\nBigInteger.prototype.negate = bnNegate;\nBigInteger.prototype.abs = bnAbs;\nBigInteger.prototype.compareTo = bnCompareTo;\nBigInteger.prototype.bitLength = bnBitLength;\nBigInteger.prototype.mod = bnMod;\nBigInteger.prototype.modPowInt = bnModPowInt;\n\nBigInteger.prototype.clone = bnClone;\nBigInteger.prototype.intValue = bnIntValue;\nBigInteger.prototype.byteValue = bnByteValue;\nBigInteger.prototype.shortValue = bnShortValue;\nBigInteger.prototype.signum = bnSigNum;\nBigInteger.prototype.toByteArray = bnToByteArray;\nBigInteger.prototype.toBuffer = bnToBuffer;\nBigInteger.prototype.equals = bnEquals;\nBigInteger.prototype.eq = bnEqual;\nBigInteger.prototype.gt = bnGreater;\nBigInteger.prototype.gte = bnGreaterOrEqual;\nBigInteger.prototype.lt = bnLesser;\nBigInteger.prototype.lte = bnLesserOrEqual;\nBigInteger.prototype.min = bnMin;\nBigInteger.prototype.max = bnMax;\nBigInteger.prototype.and = bnAnd;\nBigInteger.prototype.or = bnOr;\nBigInteger.prototype.xor = bnXor;\nBigInteger.prototype.andNot = bnAndNot;\nBigInteger.prototype.not = bnNot;\nBigInteger.prototype.shiftLeft = bnShiftLeft;\nBigInteger.prototype.shiftRight = bnShiftRight;\nBigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;\nBigInteger.prototype.bitCount = bnBitCount;\nBigInteger.prototype.testBit = bnTestBit;\nBigInteger.prototype.setBit = bnSetBit;\nBigInteger.prototype.clearBit = bnClearBit;\nBigInteger.prototype.flipBit = bnFlipBit;\nBigInteger.prototype.add = bnAdd;\nBigInteger.prototype.subtract = bnSubtract;\nBigInteger.prototype.multiply = bnMultiply;\nBigInteger.prototype.divide = bnDivide;\nBigInteger.prototype.remainder = bnRemainder;\nBigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;\nBigInteger.prototype.modPow = bnModPow;\nBigInteger.prototype.modInverse = bnModInverse;\nBigInteger.prototype.pow = bnPow;\nBigInteger.prototype.gcd = bnGCD;\nBigInteger.prototype.isProbablePrime = bnIsProbablePrime;\nBigInteger.int2char = int2char;\n\n// \"constants\"\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);\n\n// JSBN-specific extension\nBigInteger.prototype.square = bnSquare;\n\n//BigInteger interfaces not implemented in jsbn:\n\n//BigInteger(int signum, byte[] magnitude)\n//double doubleValue()\n//float floatValue()\n//int hashCode()\n//long longValue()\n//static BigInteger valueOf(long val)\n\nmodule.exports = BigInteger;\n","\"use strict\";\n/**\n * SRP Group Parameters\n * http://tools.ietf.org/html/rfc5054#appendix-A\n *\n * The 1024-, 1536-, and 2048-bit groups are taken from software\n * developed by Tom Wu and Eugene Jhong for the Stanford SRP\n * distribution, and subsequently proven to be prime.  The larger primes\n * are taken from [MODP], but generators have been calculated that are\n * primitive roots of N, unlike the generators in [MODP].\n *\n * The 1024-bit and 1536-bit groups MUST be supported.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.params = exports.hex = void 0;\n// since these are meant to be used internally, all values are numbers. If\n// you want to add parameter sets, you'll need to convert them to bignums.\nconst BigInteger = require(\"../jsbn/jsbn\");\nfunction hex(s) {\n    return new BigInteger(s.split(/\\s|\\n/).join(\"\"), 16);\n}\nexports.hex = hex;\nexports.params = {\n    1024: {\n        N_length_bits: 1024,\n        N: hex(`\n      EEAF0AB9 ADB38DD6 9C33F80A FA8FC5E8 60726187 75FF3C0B 9EA2314C\n      9C256576 D674DF74 96EA81D3 383B4813 D692C6E0 E0D5D8E2 50B98BE4\n      8E495C1D 6089DAD1 5DC7D7B4 6154D6B6 CE8EF4AD 69B15D49 82559B29\n      7BCF1885 C529F566 660E57EC 68EDBC3C 05726CC0 2FD4CBF4 976EAA9A\n      FD5138FE 8376435B 9FC61D2F C0EB06E3\n    `),\n        g: hex(\"02\"),\n        hash: \"sha1\",\n    },\n    1536: {\n        N_length_bits: 1536,\n        N: hex(`\n      9DEF3CAF B939277A B1F12A86 17A47BBB DBA51DF4 99AC4C80 BEEEA961\n      4B19CC4D 5F4F5F55 6E27CBDE 51C6A94B E4607A29 1558903B A0D0F843\n      80B655BB 9A22E8DC DF028A7C EC67F0D0 8134B1C8 B9798914 9B609E0B\n      E3BAB63D 47548381 DBC5B1FC 764E3F4B 53DD9DA1 158BFD3E 2B9C8CF5\n      6EDF0195 39349627 DB2FD53D 24B7C486 65772E43 7D6C7F8C E442734A\n      F7CCB7AE 837C264A E3A9BEB8 7F8A2FE9 B8B5292E 5A021FFF 5E91479E\n      8CE7A28C 2442C6F3 15180F93 499A234D CF76E3FE D135F9BB\n    `),\n        g: hex(\"02\"),\n        hash: \"sha1\",\n    },\n    2048: {\n        N_length_bits: 2048,\n        N: hex(`\n      AC6BDB41 324A9A9B F166DE5E 1389582F AF72B665 1987EE07 FC319294\n      3DB56050 A37329CB B4A099ED 8193E075 7767A13D D52312AB 4B03310D\n      CD7F48A9 DA04FD50 E8083969 EDB767B0 CF609517 9A163AB3 661A05FB\n      D5FAAAE8 2918A996 2F0B93B8 55F97993 EC975EEA A80D740A DBF4FF74\n      7359D041 D5C33EA7 1D281E44 6B14773B CA97B43A 23FB8016 76BD207A\n      436C6481 F1D2B907 8717461A 5B9D32E6 88F87748 544523B5 24B0D57D\n      5EA77A27 75D2ECFA 032CFBDB F52FB378 61602790 04E57AE6 AF874E73\n      03CE5329 9CCC041C 7BC308D8 2A5698F3 A8D0C382 71AE35F8 E9DBFBB6\n      94B5C803 D89F7AE4 35DE236D 525F5475 9B65E372 FCD68EF2 0FA7111F\n      9E4AFF73\n    `),\n        g: hex(\"02\"),\n        hash: \"sha256\",\n    },\n    3072: {\n        N_length_bits: 3072,\n        N: hex(`\n      FFFFFFFF FFFFFFFF C90FDAA2 2168C234 C4C6628B 80DC1CD1 29024E08\n      8A67CC74 020BBEA6 3B139B22 514A0879 8E3404DD EF9519B3 CD3A431B\n      302B0A6D F25F1437 4FE1356D 6D51C245 E485B576 625E7EC6 F44C42E9\n      A637ED6B 0BFF5CB6 F406B7ED EE386BFB 5A899FA5 AE9F2411 7C4B1FE6\n      49286651 ECE45B3D C2007CB8 A163BF05 98DA4836 1C55D39A 69163FA8\n      FD24CF5F 83655D23 DCA3AD96 1C62F356 208552BB 9ED52907 7096966D\n      670C354E 4ABC9804 F1746C08 CA18217C 32905E46 2E36CE3B E39E772C\n      180E8603 9B2783A2 EC07A28F B5C55DF0 6F4C52C9 DE2BCBF6 95581718\n      3995497C EA956AE5 15D22618 98FA0510 15728E5A 8AAAC42D AD33170D\n      04507A33 A85521AB DF1CBA64 ECFB8504 58DBEF0A 8AEA7157 5D060C7D\n      B3970F85 A6E1E4C7 ABF5AE8C DB0933D7 1E8C94E0 4A25619D CEE3D226\n      1AD2EE6B F12FFA06 D98A0864 D8760273 3EC86A64 521F2B18 177B200C\n      BBE11757 7A615D6C 770988C0 BAD946E2 08E24FA0 74E5AB31 43DB5BFC\n      E0FD108E 4B82D120 A93AD2CA FFFFFFFF FFFFFFFF\n    `),\n        g: hex(\"05\"),\n        hash: \"sha256\",\n    },\n    hap: {\n        N_length_bits: 3072,\n        N: hex(`\n      FFFFFFFF FFFFFFFF C90FDAA2 2168C234 C4C6628B 80DC1CD1 29024E08\n      8A67CC74 020BBEA6 3B139B22 514A0879 8E3404DD EF9519B3 CD3A431B\n      302B0A6D F25F1437 4FE1356D 6D51C245 E485B576 625E7EC6 F44C42E9\n      A637ED6B 0BFF5CB6 F406B7ED EE386BFB 5A899FA5 AE9F2411 7C4B1FE6\n      49286651 ECE45B3D C2007CB8 A163BF05 98DA4836 1C55D39A 69163FA8\n      FD24CF5F 83655D23 DCA3AD96 1C62F356 208552BB 9ED52907 7096966D\n      670C354E 4ABC9804 F1746C08 CA18217C 32905E46 2E36CE3B E39E772C\n      180E8603 9B2783A2 EC07A28F B5C55DF0 6F4C52C9 DE2BCBF6 95581718\n      3995497C EA956AE5 15D22618 98FA0510 15728E5A 8AAAC42D AD33170D\n      04507A33 A85521AB DF1CBA64 ECFB8504 58DBEF0A 8AEA7157 5D060C7D\n      B3970F85 A6E1E4C7 ABF5AE8C DB0933D7 1E8C94E0 4A25619D CEE3D226\n      1AD2EE6B F12FFA06 D98A0864 D8760273 3EC86A64 521F2B18 177B200C\n      BBE11757 7A615D6C 770988C0 BAD946E2 08E24FA0 74E5AB31 43DB5BFC\n      E0FD108E 4B82D120 A93AD2CA FFFFFFFF FFFFFFFF\n    `),\n        g: hex(\"05\"),\n        hash: \"sha512\",\n    },\n    4096: {\n        N_length_bits: 4096,\n        N: hex(`\n      FFFFFFFF FFFFFFFF C90FDAA2 2168C234 C4C6628B 80DC1CD1 29024E08\n      8A67CC74 020BBEA6 3B139B22 514A0879 8E3404DD EF9519B3 CD3A431B\n      302B0A6D F25F1437 4FE1356D 6D51C245 E485B576 625E7EC6 F44C42E9\n      A637ED6B 0BFF5CB6 F406B7ED EE386BFB 5A899FA5 AE9F2411 7C4B1FE6\n      49286651 ECE45B3D C2007CB8 A163BF05 98DA4836 1C55D39A 69163FA8\n      FD24CF5F 83655D23 DCA3AD96 1C62F356 208552BB 9ED52907 7096966D\n      670C354E 4ABC9804 F1746C08 CA18217C 32905E46 2E36CE3B E39E772C\n      180E8603 9B2783A2 EC07A28F B5C55DF0 6F4C52C9 DE2BCBF6 95581718\n      3995497C EA956AE5 15D22618 98FA0510 15728E5A 8AAAC42D AD33170D\n      04507A33 A85521AB DF1CBA64 ECFB8504 58DBEF0A 8AEA7157 5D060C7D\n      B3970F85 A6E1E4C7 ABF5AE8C DB0933D7 1E8C94E0 4A25619D CEE3D226\n      1AD2EE6B F12FFA06 D98A0864 D8760273 3EC86A64 521F2B18 177B200C\n      BBE11757 7A615D6C 770988C0 BAD946E2 08E24FA0 74E5AB31 43DB5BFC\n      E0FD108E 4B82D120 A9210801 1A723C12 A787E6D7 88719A10 BDBA5B26\n      99C32718 6AF4E23C 1A946834 B6150BDA 2583E9CA 2AD44CE8 DBBBC2DB\n      04DE8EF9 2E8EFC14 1FBECAA6 287C5947 4E6BC05D 99B2964F A090C3A2\n      233BA186 515BE7ED 1F612970 CEE2D7AF B81BDD76 2170481C D0069127\n      D5B05AA9 93B4EA98 8D8FDDC1 86FFB7DC 90A6C08F 4DF435C9 34063199\n      FFFFFFFF FFFFFFFF\n    `),\n        g: hex(\"05\"),\n        hash: \"sha256\",\n    },\n    6244: {\n        N_length_bits: 6244,\n        N: hex(`\n      FFFFFFFF FFFFFFFF C90FDAA2 2168C234 C4C6628B 80DC1CD1 29024E08\n      8A67CC74 020BBEA6 3B139B22 514A0879 8E3404DD EF9519B3 CD3A431B\n      302B0A6D F25F1437 4FE1356D 6D51C245 E485B576 625E7EC6 F44C42E9\n      A637ED6B 0BFF5CB6 F406B7ED EE386BFB 5A899FA5 AE9F2411 7C4B1FE6\n      49286651 ECE45B3D C2007CB8 A163BF05 98DA4836 1C55D39A 69163FA8\n      FD24CF5F 83655D23 DCA3AD96 1C62F356 208552BB 9ED52907 7096966D\n      670C354E 4ABC9804 F1746C08 CA18217C 32905E46 2E36CE3B E39E772C\n      180E8603 9B2783A2 EC07A28F B5C55DF0 6F4C52C9 DE2BCBF6 95581718\n      3995497C EA956AE5 15D22618 98FA0510 15728E5A 8AAAC42D AD33170D\n      04507A33 A85521AB DF1CBA64 ECFB8504 58DBEF0A 8AEA7157 5D060C7D\n      B3970F85 A6E1E4C7 ABF5AE8C DB0933D7 1E8C94E0 4A25619D CEE3D226\n      1AD2EE6B F12FFA06 D98A0864 D8760273 3EC86A64 521F2B18 177B200C\n      BBE11757 7A615D6C 770988C0 BAD946E2 08E24FA0 74E5AB31 43DB5BFC\n      E0FD108E 4B82D120 A9210801 1A723C12 A787E6D7 88719A10 BDBA5B26\n      99C32718 6AF4E23C 1A946834 B6150BDA 2583E9CA 2AD44CE8 DBBBC2DB\n      04DE8EF9 2E8EFC14 1FBECAA6 287C5947 4E6BC05D 99B2964F A090C3A2\n      233BA186 515BE7ED 1F612970 CEE2D7AF B81BDD76 2170481C D0069127\n      D5B05AA9 93B4EA98 8D8FDDC1 86FFB7DC 90A6C08F 4DF435C9 34028492\n      36C3FAB4 D27C7026 C1D4DCB2 602646DE C9751E76 3DBA37BD F8FF9406\n      AD9E530E E5DB382F 413001AE B06A53ED 9027D831 179727B0 865A8918\n      DA3EDBEB CF9B14ED 44CE6CBA CED4BB1B DB7F1447 E6CC254B 33205151\n      2BD7AF42 6FB8F401 378CD2BF 5983CA01 C64B92EC F032EA15 D1721D03\n      F482D7CE 6E74FEF6 D55E702F 46980C82 B5A84031 900B1C9E 59E7C97F\n      BEC7E8F3 23A97A7E 36CC88BE 0F1D45B7 FF585AC5 4BD407B2 2B4154AA\n      CC8F6D7E BF48E1D8 14CC5ED2 0F8037E0 A79715EE F29BE328 06A1D58B\n      B7C5DA76 F550AA3D 8A1FBFF0 EB19CCB1 A313D55C DA56C9EC 2EF29632\n      387FE8D7 6E3C0468 043E8F66 3F4860EE 12BF2D5B 0B7474D6 E694F91E\n      6DCC4024 FFFFFFFF FFFFFFFF\n    `),\n        g: hex(\"05\"),\n        hash: \"sha256\",\n    },\n    8192: {\n        N_length_bits: 8192,\n        N: hex(`\n      FFFFFFFF FFFFFFFF C90FDAA2 2168C234 C4C6628B 80DC1CD1 29024E08\n      8A67CC74 020BBEA6 3B139B22 514A0879 8E3404DD EF9519B3 CD3A431B\n      302B0A6D F25F1437 4FE1356D 6D51C245 E485B576 625E7EC6 F44C42E9\n      A637ED6B 0BFF5CB6 F406B7ED EE386BFB 5A899FA5 AE9F2411 7C4B1FE6\n      49286651 ECE45B3D C2007CB8 A163BF05 98DA4836 1C55D39A 69163FA8\n      FD24CF5F 83655D23 DCA3AD96 1C62F356 208552BB 9ED52907 7096966D\n      670C354E 4ABC9804 F1746C08 CA18217C 32905E46 2E36CE3B E39E772C\n      180E8603 9B2783A2 EC07A28F B5C55DF0 6F4C52C9 DE2BCBF6 95581718\n      3995497C EA956AE5 15D22618 98FA0510 15728E5A 8AAAC42D AD33170D\n      04507A33 A85521AB DF1CBA64 ECFB8504 58DBEF0A 8AEA7157 5D060C7D\n      B3970F85 A6E1E4C7 ABF5AE8C DB0933D7 1E8C94E0 4A25619D CEE3D226\n      1AD2EE6B F12FFA06 D98A0864 D8760273 3EC86A64 521F2B18 177B200C\n      BBE11757 7A615D6C 770988C0 BAD946E2 08E24FA0 74E5AB31 43DB5BFC\n      E0FD108E 4B82D120 A9210801 1A723C12 A787E6D7 88719A10 BDBA5B26\n      99C32718 6AF4E23C 1A946834 B6150BDA 2583E9CA 2AD44CE8 DBBBC2DB\n      04DE8EF9 2E8EFC14 1FBECAA6 287C5947 4E6BC05D 99B2964F A090C3A2\n      233BA186 515BE7ED 1F612970 CEE2D7AF B81BDD76 2170481C D0069127\n      D5B05AA9 93B4EA98 8D8FDDC1 86FFB7DC 90A6C08F 4DF435C9 34028492\n      36C3FAB4 D27C7026 C1D4DCB2 602646DE C9751E76 3DBA37BD F8FF9406\n      AD9E530E E5DB382F 413001AE B06A53ED 9027D831 179727B0 865A8918\n      DA3EDBEB CF9B14ED 44CE6CBA CED4BB1B DB7F1447 E6CC254B 33205151\n      2BD7AF42 6FB8F401 378CD2BF 5983CA01 C64B92EC F032EA15 D1721D03\n      F482D7CE 6E74FEF6 D55E702F 46980C82 B5A84031 900B1C9E 59E7C97F\n      BEC7E8F3 23A97A7E 36CC88BE 0F1D45B7 FF585AC5 4BD407B2 2B4154AA\n      CC8F6D7E BF48E1D8 14CC5ED2 0F8037E0 A79715EE F29BE328 06A1D58B\n      B7C5DA76 F550AA3D 8A1FBFF0 EB19CCB1 A313D55C DA56C9EC 2EF29632\n      387FE8D7 6E3C0468 043E8F66 3F4860EE 12BF2D5B 0B7474D6 E694F91E\n      6DBE1159 74A3926F 12FEE5E4 38777CB6 A932DF8C D8BEC4D0 73B931BA\n      3BC832B6 8D9DD300 741FA7BF 8AFC47ED 2576F693 6BA42466 3AAB639C\n      5AE4F568 3423B474 2BF1C978 238F16CB E39D652D E3FDB8BE FC848AD9\n      22222E04 A4037C07 13EB57A8 1A23F0C7 3473FC64 6CEA306B 4BCBC886\n      2F8385DD FA9D4B7F A2C087E8 79683303 ED5BDD3A 062B3CF5 B3A278A6\n      6D2A13F8 3F44F82D DF310EE0 74AB6A36 4597E899 A0255DC1 64F31CC5\n      0846851D F9AB4819 5DED7EA1 B1D510BD 7EE74D73 FAF36BC3 1ECFA268\n      359046F4 EB879F92 4009438B 481C6CD7 889A002E D5EE382B C9190DA6\n      FC026E47 9558E447 5677E9AA 9E3050E2 765694DF C81F56E8 80B96E71\n      60C980DD 98EDD3DF FFFFFFFF FFFFFFFF\n    `),\n        g: hex(\"13\"),\n        hash: \"sha256\",\n    },\n};\nexports.default = exports.params;\n//# sourceMappingURL=params.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SrpServer = exports.SrpClient = exports.SRP = void 0;\nconst crypto_1 = __importDefault(require(\"crypto\"));\nconst assert_1 = __importDefault(require(\"assert\"));\nconst BigInteger = require(\"../jsbn/jsbn\");\nconst params_1 = require(\"./params\");\nconst zero = new BigInteger(0, 10);\nfunction assert_(val, msg) {\n    if (!val) {\n        throw new Error(msg || \"assertion\");\n    }\n}\nfunction assertIsBuffer(arg, argname = \"arg\") {\n    assert_(Buffer.isBuffer(arg), `Type error: ${argname} must be a buffer`);\n}\nfunction assertIsBigInteger(arg, argname = \"arg\") {\n    assert_(arg instanceof BigInteger, `Type error: ${argname} must be a BigInteger`);\n}\n/**\n * If a conversion is explicitly specified with the operator PAD(),\n * the integer will first be implicitly converted, then the resultant\n * byte-string will be left-padded with zeros (if necessary) until its\n * length equals the implicitly-converted length of N.\n *\n * @param {Buffer} n Number to pad\n * @param {number} len Length of the resulting Buffer\n * @return {Buffer}\n */\nfunction padTo(n, len) {\n    assertIsBuffer(n, \"n\");\n    const padding = len - n.length;\n    assert_(padding > -1, \"Negative padding.  Very uncomfortable.\");\n    const result = Buffer.alloc(len);\n    result.fill(0, 0, padding);\n    n.copy(result, padding);\n    assert_1.default.strictEqual(result.length, len);\n    return result;\n}\nfunction padToN(number, params) {\n    assertIsBigInteger(number);\n    const n = number.toString(16).length % 2 !== 0 ? \"0\" + number.toString(16) : number.toString(16);\n    return padTo(Buffer.from(n, \"hex\"), params.N_length_bits / 8);\n}\n/**\n * Compute the intermediate value x as a hash of three buffers:\n * salt, identity, and password.  And a colon.  FOUR buffers.\n *\n *      x = H(s | H(I | \":\" | P))\n *\n * @param {object} params\n * @param {Buffer} salt\n * @param {Buffer} I User identity\n * @param {Buffer} P User password\n * @return {BigInteger} User secret\n */\nfunction getx(params, salt, I, P) {\n    assertIsBuffer(salt, \"salt (salt)\");\n    assertIsBuffer(I, \"identity (I)\");\n    assertIsBuffer(P, \"password (P)\");\n    const hashIP = crypto_1.default.createHash(params.hash)\n        .update(Buffer.concat([I, Buffer.from(\":\"), P]))\n        .digest();\n    const hashX = crypto_1.default.createHash(params.hash)\n        .update(salt)\n        .update(hashIP)\n        .digest();\n    return new BigInteger(hashX);\n}\nclass SRP {\n    /**\n     * The verifier is calculated as described in Section 3 of [SRP-RFC].\n     * We give the algorithm here for convenience.\n     *\n     * The verifier (v) is computed based on the salt (s), user name (I),\n     * password (P), and group parameters (N, g).\n     *\n     *         x = H(s | H(I | \":\" | P))\n     *         v = g^x % N\n     *\n     * @param {object} params Group parameters, with .N, .g, .hash\n     * @param {Buffer} salt\n     * @param {Buffer} I User identity\n     * @param {Buffer} P User password\n     * @return {Buffer}\n     */\n    static computeVerifier(params, salt, I, P) {\n        assertIsBuffer(salt, \"salt (salt)\");\n        assertIsBuffer(I, \"identity (I)\");\n        assertIsBuffer(P, \"password (P)\");\n        const v_num = params.g.modPow(getx(params, salt, I, P), params.N);\n        return v_num.toBuffer(params.N_length_bits / 8);\n    }\n    static genKey(bytes = 32, callback) {\n        // bytes is optional\n        if (typeof bytes !== \"number\") {\n            callback = bytes;\n            bytes = 32;\n        }\n        if (!callback) {\n            return new Promise((rs, rj) => SRP.genKey(bytes, (err, data) => err ? rj(err) : rs(data)));\n        }\n        crypto_1.default.randomBytes(bytes, (err, buf) => {\n            if (err) {\n                return callback(err, null);\n            }\n            return callback(null, buf);\n        });\n    }\n}\nexports.SRP = SRP;\nSRP.params = params_1.params;\n/**\n * Calculate the SRP-6 multiplier.\n *\n * @param {object} params Group parameters, with .N, .g, .hash\n * @return {BigInteger}\n */\nfunction getk(params) {\n    const k_buf = crypto_1.default\n        .createHash(params.hash)\n        .update(padToN(params.N, params))\n        .update(padToN(params.g, params))\n        .digest();\n    return new BigInteger(k_buf);\n}\n/**\n * The server key exchange message also contains the server's public\n * value (B).  The server calculates this value as B = k*v + g^b % N,\n * where b is a random number that SHOULD be at least 256 bits in length\n * and k = H(N | PAD(g)).\n *\n * Note: as the tests imply, the entire expression is mod N.\n *\n * @param {SrpParams} params Group parameters, with .N, .g, .hash\n * @param {BigInteger} k\n * @param {BigInteger} v Verifier (stored)\n * @param {BigInteger} b Server secret exponent\n * @return {Buffer} B - The server public message\n */\nfunction getB(params, k, v, b) {\n    assertIsBigInteger(v);\n    assertIsBigInteger(k);\n    assertIsBigInteger(b);\n    const r = k.multiply(v).add(params.g.modPow(b, params.N)).mod(params.N);\n    return r.toBuffer(params.N_length_bits / 8);\n}\n/**\n * The client key exchange message carries the client's public value\n * (A).  The client calculates this value as A = g^a % N, where a is a\n * random number that SHOULD be at least 256 bits in length.\n *\n * Note: for this implementation, we take that to mean 256/8 bytes.\n *\n * @param {object} params Group parameters, with .N, .g, .hash\n * @param {BigInteger} a_num Client secret exponent\n * @return {Buffer} A - The client public message\n */\nfunction getA(params, a_num) {\n    assertIsBigInteger(a_num);\n    if (Math.ceil(a_num.toString(16).length / 2) < 32) {\n        console.warn(\"getA: client key length %d is less than the recommended 256 bits\", a_num.bitLength());\n    }\n    return params.g.modPow(a_num, params.N).toBuffer(params.N_length_bits / 8);\n}\n/**\n * getu() hashes the two public messages together, to obtain a scrambling\n * parameter \"u\" which cannot be predicted by either party ahead of time.\n * This makes it safe to use the message ordering defined in the SRP-6a\n * paper, in which the server reveals their \"B\" value before the client\n * commits to their \"A\" value.\n *\n * @param {object} params Group parameters, with .N, .g, .hash\n * @param {Buffer} A Client ephemeral public key\n * @param {Buffer} B Server ephemeral public key\n * @return {BigInteger} u - Shared scrambling parameter\n */\nfunction getu(params, A, B) {\n    assertIsBuffer(A, \"A\");\n    assertIsBuffer(B, \"B\");\n    const u_buf = crypto_1.default.createHash(params.hash)\n        .update(padTo(A, params.N_length_bits / 8))\n        .update(padTo(B, params.N_length_bits / 8))\n        .digest();\n    return new BigInteger(u_buf);\n}\n/**\n * The TLS premaster secret as calculated by the client\n *\n * @param {SrpParams} params Group parameters, with .N, .g, .hash\n * @param {BigInteger} k_num\n * @param {BigInteger} x_num\n * @param {BigInteger} a_num\n * @param {BigInteger} B_num\n * @param {BigInteger} u_num\n * @return {Buffer}\n */\nfunction client_getS(params, k_num, x_num, a_num, B_num, u_num) {\n    assertIsBigInteger(k_num);\n    assertIsBigInteger(x_num);\n    assertIsBigInteger(a_num);\n    assertIsBigInteger(B_num);\n    assertIsBigInteger(u_num);\n    if ((zero.compareTo(B_num) >= 0) || (params.N.compareTo(B_num) <= 0)) {\n        throw new Error(\"invalid server-supplied \\\"B\\\", must be 1..N-1\");\n    }\n    const S_num = B_num.subtract(k_num.multiply(params.g.modPow(x_num, params.N)))\n        .modPow(a_num.add(u_num.multiply(x_num)), params.N)\n        .mod(params.N);\n    return S_num.toBuffer(params.N_length_bits / 8);\n}\n/**\n * The TLS premastersecret as calculated by the server\n *\n * @param {BigInteger} params Group parameters, with .N, .g, .hash\n * @param {BigInteger} v_num Verifier (stored on server)\n * @param {BigInteger} A_num Ephemeral client public key (read from client)\n * @param {BigInteger} b_num Server ephemeral private key (generated for session)\n * @param {BigInteger} u_num {@see getu}\n * @return {Buffer}\n */\nfunction server_getS(params, v_num, A_num, b_num, u_num) {\n    assertIsBigInteger(v_num);\n    assertIsBigInteger(A_num);\n    assertIsBigInteger(b_num);\n    assertIsBigInteger(u_num);\n    if ((zero.compareTo(A_num) >= 0) || (params.N.compareTo(A_num) <= 0)) {\n        throw new Error(\"invalid client-supplied \\\"A\\\", must be 1..N-1\");\n    }\n    const S_num = A_num.multiply(v_num.modPow(u_num, params.N))\n        .modPow(b_num, params.N)\n        .mod(params.N);\n    return S_num.toBuffer(params.N_length_bits / 8);\n}\n/**\n * Compute the shared session key K from S\n *\n * @param {object} params Group parameters, with .N, .g, .hash\n * @param {Buffer} S_buf Session key\n * @return {Buffer}\n */\nfunction getK(params, S_buf) {\n    assertIsBuffer(S_buf, \"S\");\n    if (params.hash === \"sha1\") {\n        // use t_mgf1 interleave for short sha1 hashes\n        return Buffer.concat([\n            crypto_1.default.createHash(params.hash).update(S_buf).update(Buffer.from([0, 0, 0, 0])).digest(),\n            crypto_1.default.createHash(params.hash).update(S_buf).update(Buffer.from([0, 0, 0, 1])).digest(),\n        ]);\n    }\n    else {\n        // use hash as-is otherwise\n        return crypto_1.default.createHash(params.hash).update(S_buf).digest();\n    }\n}\nfunction getM1(params, u_buf, s_buf, A_buf, B_buf, K_buf) {\n    if (arguments.length > 4) {\n        assertIsBuffer(u_buf, \"identity (I)\");\n        assertIsBuffer(s_buf, \"salt (s)\");\n        assertIsBuffer(A_buf, \"client public key (A)\");\n        assertIsBuffer(B_buf, \"server public key (B)\");\n        assertIsBuffer(K_buf, \"session key (K)\");\n        const hN = crypto_1.default.createHash(params.hash).update(params.N.toBuffer(true)).digest();\n        const hG = crypto_1.default.createHash(params.hash).update(params.g.toBuffer(true)).digest();\n        for (let i = 0; i < hN.length; i++) {\n            hN[i] ^= hG[i];\n        }\n        const hU = crypto_1.default.createHash(params.hash).update(u_buf).digest();\n        return crypto_1.default.createHash(params.hash)\n            .update(hN).update(hU).update(s_buf)\n            .update(A_buf).update(B_buf).update(K_buf)\n            .digest();\n    }\n    else {\n        [A_buf, B_buf, s_buf] = [u_buf, s_buf, A_buf];\n        assertIsBuffer(A_buf, \"A\");\n        assertIsBuffer(B_buf, \"B\");\n        assertIsBuffer(s_buf, \"S\");\n        return crypto_1.default.createHash(params.hash)\n            .update(A_buf).update(B_buf).update(s_buf)\n            .digest();\n    }\n}\nfunction getM2(params, A_buf, M1_buf, K_buf) {\n    assertIsBuffer(A_buf, \"A\");\n    assertIsBuffer(M1_buf, \"M1\");\n    assertIsBuffer(K_buf, \"K\");\n    return crypto_1.default.createHash(params.hash)\n        .update(A_buf).update(M1_buf).update(K_buf)\n        .digest();\n}\nfunction equal(buf1, buf2) {\n    // constant-time comparison. A drop in the ocean compared to our\n    // non-constant-time modexp operations, but still good practice.\n    return buf1.toString(\"hex\") === buf2.toString(\"hex\");\n}\nclass SrpClient {\n    /**\n     * Create an SRP client.\n     *\n     * @param {object} params Group parameters, with .N, .g, .hash\n     * @param {Buffer} salt_buf User salt (from server)\n     * @param {Buffer} identity_buf Identity/username\n     * @param {Buffer} password_buf Password\n     * @param {Buffer} secret1_buf Client private key {@see genKey}\n     * @param {boolean} hap\n     */\n    constructor(params, salt_buf, identity_buf, password_buf, secret1_buf, hap = true) {\n        assertIsBuffer(salt_buf, \"salt (s)\");\n        assertIsBuffer(identity_buf, \"identity (I)\");\n        assertIsBuffer(password_buf, \"password (P)\");\n        assertIsBuffer(secret1_buf, \"secret1\");\n        this._params = params;\n        this._k = getk(params);\n        this._x = getx(params, salt_buf, identity_buf, password_buf);\n        this._a = new BigInteger(secret1_buf);\n        if (hap) {\n            this._I = identity_buf;\n            this._s = salt_buf;\n        }\n        this._A = getA(params, this._a);\n    }\n    /**\n     * Returns the client's public key (A).\n     *\n     * @return {Buffer}\n     */\n    computeA() {\n        return this._A;\n    }\n    /**\n     * Sets the server's public key (B).\n     *\n     * @param {Buffer} B_buf The server's public key\n     */\n    setB(B_buf) {\n        const u_num = getu(this._params, this._A, B_buf);\n        const S_buf_x = client_getS(this._params, this._k, this._x, this._a, new BigInteger(B_buf), u_num);\n        this._K = getK(this._params, S_buf_x);\n        this._u = u_num; // only for tests\n        this._S = S_buf_x; // only for tests\n        this._B = B_buf;\n        if (this._I && this._s) {\n            this._M1 = getM1(this._params, this._I, this._s, this._A, this._B, this._K);\n        }\n        else {\n            this._M1 = getM1(this._params, this._A, this._B, this._S);\n        }\n        this._M2 = getM2(this._params, this._A, this._M1, this._K);\n    }\n    /**\n     * Gets the M1 value.\n     * This requires setting the server's public key {@see Client.setB}.\n     *\n     * @return {Buffer}\n     */\n    computeM1() {\n        if (this._M1 === undefined) {\n            throw new Error(\"incomplete protocol\");\n        }\n        return this._M1;\n    }\n    /**\n     * Checks the server was able to calculate M2.\n     * This requires setting the server's public key {@see Client.setB}.\n     *\n     * @param M2 The server's M2 value\n     */\n    checkM2(M2) {\n        if (!equal(this._M2, M2)) {\n            throw new Error(\"server is not authentic\");\n        }\n    }\n    /**\n     * Returns the shared session key.\n     *\n     * @return {Buffer}\n     */\n    computeK() {\n        if (this._K === undefined) {\n            throw new Error(\"incomplete protocol\");\n        }\n        return this._K;\n    }\n}\nexports.SrpClient = SrpClient;\nclass SrpServer {\n    constructor(params, salt_buf, identity_buf, password_buf, secret2_buf) {\n        this._params = params;\n        this._k = getk(params);\n        if (arguments.length > 3) {\n            assertIsBuffer(salt_buf, \"salt (salt)\");\n            assertIsBuffer(identity_buf, \"identity (I)\");\n            assertIsBuffer(password_buf, \"password (P)\");\n            assertIsBuffer(secret2_buf, \"secret2\");\n            this._b = new BigInteger(secret2_buf);\n            this._v = new BigInteger(SRP.computeVerifier(params, salt_buf, identity_buf, password_buf));\n            this._I = identity_buf;\n            this._s = salt_buf;\n        }\n        else if (salt_buf instanceof Buffer) {\n            const verifier_buf = salt_buf;\n            // noinspection JSUnusedAssignment\n            [secret2_buf, salt_buf, identity_buf, password_buf] = [identity_buf, undefined, undefined, undefined];\n            assertIsBuffer(verifier_buf, \"verifier (v)\");\n            assertIsBuffer(secret2_buf, \"secret2\");\n            this._b = new BigInteger(secret2_buf);\n            this._v = new BigInteger(verifier_buf);\n        }\n        else {\n            const identity = salt_buf;\n            // noinspection JSUnusedAssignment\n            [secret2_buf, salt_buf, identity_buf, password_buf] = [identity_buf, undefined, undefined, undefined];\n            // noinspection SuspiciousTypeOfGuard\n            (0, assert_1.default)(identity.username instanceof Buffer || typeof identity.username === \"string\", \"identity.username (I) must be a string or Buffer\");\n            assertIsBuffer(identity.salt, \"identity.salt (s)\");\n            (0, assert_1.default)(\"password\" in identity || \"verifier\" in identity, \"identity requires a password or verifier\");\n            if (\"verifier\" in identity) {\n                assertIsBuffer(identity.verifier, \"identity.verifier (v)\");\n            }\n            else {\n                // noinspection SuspiciousTypeOfGuard\n                (0, assert_1.default)(identity.password instanceof Buffer || typeof identity.password === \"string\", \"identity.password (p) must be a string or Buffer\");\n            }\n            assertIsBuffer(secret2_buf, \"secret2\");\n            const username = typeof identity.username === \"string\" ? Buffer.from(identity.username) : identity.username;\n            this._b = new BigInteger(secret2_buf);\n            if (\"verifier\" in identity) {\n                this._v = new BigInteger(identity.verifier);\n            }\n            else {\n                this._v = new BigInteger(SRP.computeVerifier(params, identity.salt, username, typeof identity.password === \"string\" ? Buffer.from(identity.password) : identity.password));\n            }\n            this._I = username;\n            this._s = identity.salt;\n        }\n        this._B = getB(params, this._k, this._v, this._b);\n    }\n    /**\n     * Returns the server's public key (B).\n     *\n     * @return {Buffer}\n     */\n    computeB() {\n        return this._B;\n    }\n    /**\n     * Sets the client's public key (A).\n     *\n     * @param {Buffer} A The client's public key\n     */\n    setA(A) {\n        const u_num = getu(this._params, A, this._B);\n        const S_buf = server_getS(this._params, this._v, new BigInteger(A), this._b, u_num);\n        this._K = getK(this._params, S_buf);\n        this._u = u_num; // only for tests\n        this._S = S_buf; // only for tests\n        if (this._I && this._s) {\n            this._M1 = getM1(this._params, this._I, this._s, A, this._B, this._K);\n        }\n        else {\n            this._M1 = getM1(this._params, A, this._B, this._S);\n        }\n        this._M2 = getM2(this._params, A, this._M1, this._K);\n    }\n    /**\n     * Checks the client was able to calculate M1.\n     *\n     * @param {Buffer} M1 The client's M1 value\n     */\n    checkM1(M1) {\n        if (this._M1 === undefined) {\n            throw new Error(\"incomplete protocol\");\n        }\n        if (!equal(this._M1, M1)) {\n            throw new Error(\"client did not use the same password\");\n        }\n    }\n    /**\n     * Returns the shared session key.\n     *\n     * @return {Buffer}\n     */\n    computeK() {\n        if (this._K === undefined) {\n            throw new Error(\"incomplete protocol\");\n        }\n        return this._K;\n    }\n    /**\n     * Gets the M2 value.\n     * This requires setting the client's public key {@see Server.setA}.\n     *\n     * @return {Buffer}\n     */\n    computeM2() {\n        if (this._M2 === undefined) {\n            throw new Error(\"incomplete protocol\");\n        }\n        return this._M2;\n    }\n}\nexports.SrpServer = SrpServer;\n//# sourceMappingURL=srp.js.map","'use strict';\n\nvar isCallable = require('is-callable');\n\nvar toStr = Object.prototype.toString;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar forEachArray = function forEachArray(array, iterator, receiver) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            if (receiver == null) {\n                iterator(array[i], i, array);\n            } else {\n                iterator.call(receiver, array[i], i, array);\n            }\n        }\n    }\n};\n\nvar forEachString = function forEachString(string, iterator, receiver) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        if (receiver == null) {\n            iterator(string.charAt(i), i, string);\n        } else {\n            iterator.call(receiver, string.charAt(i), i, string);\n        }\n    }\n};\n\nvar forEachObject = function forEachObject(object, iterator, receiver) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            if (receiver == null) {\n                iterator(object[k], k, object);\n            } else {\n                iterator.call(receiver, object[k], k, object);\n            }\n        }\n    }\n};\n\nvar forEach = function forEach(list, iterator, thisArg) {\n    if (!isCallable(iterator)) {\n        throw new TypeError('iterator must be a function');\n    }\n\n    var receiver;\n    if (arguments.length >= 3) {\n        receiver = thisArg;\n    }\n\n    if (toStr.call(list) === '[object Array]') {\n        forEachArray(list, iterator, receiver);\n    } else if (typeof list === 'string') {\n        forEachString(list, iterator, receiver);\n    } else {\n        forEachObject(list, iterator, receiver);\n    }\n};\n\nmodule.exports = forEach;\n","\n'use strict';\n\nvar Stream = require('stream')\n\n// from\n//\n// a stream that reads from an source.\n// source may be an array, or a function.\n// from handles pause behaviour for you.\n\nmodule.exports =\nfunction from (source) {\n  if(Array.isArray(source)) {\n\t\tvar source_index = 0, source_len = source.length;\n    return from (function (i) {\n      if(source_index < source_len)\n        this.emit('data', source[source_index++])\n      else\n        this.emit('end')\n      return true\n    })\n  }\n  var s = new Stream(), i = 0\n  s.ended = false\n  s.started = false\n  s.readable = true\n  s.writable = false\n  s.paused = false\n  s.ended = false\n  s.pause = function () {\n    s.started = true\n    s.paused = true\n  }\n  function next () {\n    s.started = true\n    if(s.ended) return\n    while(!s.ended && !s.paused && source.call(s, i++, function () {\n      if(!s.ended && !s.paused)\n          process.nextTick(next);\n    }))\n      ;\n  }\n  s.resume = function () {\n    s.started = true\n    s.paused = false\n    next()\n  }\n  s.on('end', function () {\n    s.ended = true\n    s.readable = false\n    process.nextTick(s.destroy)\n  })\n  s.destroy = function () {\n    s.ended = true\n    s.emit('close') \n  }\n  /*\n    by default, the stream will start emitting at nextTick\n    if you want, you can pause it, after pipeing.\n    you can also resume before next tick, and that will also\n    work.\n  */\n  process.nextTick(function () {\n    if(!s.started) s.resume()\n  })\n  return s\n}\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar toStr = Object.prototype.toString;\nvar max = Math.max;\nvar funcType = '[object Function]';\n\nvar concatty = function concatty(a, b) {\n    var arr = [];\n\n    for (var i = 0; i < a.length; i += 1) {\n        arr[i] = a[i];\n    }\n    for (var j = 0; j < b.length; j += 1) {\n        arr[j + a.length] = b[j];\n    }\n\n    return arr;\n};\n\nvar slicy = function slicy(arrLike, offset) {\n    var arr = [];\n    for (var i = offset || 0, j = 0; i < arrLike.length; i += 1, j += 1) {\n        arr[j] = arrLike[i];\n    }\n    return arr;\n};\n\nvar joiny = function (arr, joiner) {\n    var str = '';\n    for (var i = 0; i < arr.length; i += 1) {\n        str += arr[i];\n        if (i + 1 < arr.length) {\n            str += joiner;\n        }\n    }\n    return str;\n};\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.apply(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slicy(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                concatty(args, arguments)\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        }\n        return target.apply(\n            that,\n            concatty(args, arguments)\n        );\n\n    };\n\n    var boundLength = max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs[i] = '$' + i;\n    }\n\n    bound = Function('binder', 'return function (' + joiny(boundArgs, ',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\nvar functionsHaveNames = function functionsHaveNames() {\n\treturn typeof function f() {}.name === 'string';\n};\n\nvar gOPD = Object.getOwnPropertyDescriptor;\nif (gOPD) {\n\ttry {\n\t\tgOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\tgOPD = null;\n\t}\n}\n\nfunctionsHaveNames.functionsHaveConfigurableNames = function functionsHaveConfigurableNames() {\n\tif (!functionsHaveNames() || !gOPD) {\n\t\treturn false;\n\t}\n\tvar desc = gOPD(function () {}, 'name');\n\treturn !!desc && !!desc.configurable;\n};\n\nvar $bind = Function.prototype.bind;\n\nfunctionsHaveNames.boundFunctionsHaveNames = function boundFunctionsHaveNames() {\n\treturn functionsHaveNames() && typeof $bind === 'function' && function f() {}.bind().name !== '';\n};\n\nmodule.exports = functionsHaveNames;\n","'use strict';\n\n/**\n * @file\n *\n * Copyright 2018 FutoIn Project (https://futoin.org)\n * Copyright 2018 Andrey Galkin <andrey@futoin.org>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst { Buffer } = require( 'buffer' );\nconst { createHash, createHmac } = require( 'crypto' );\n\nconst g_digestLenCache = {};\n\n/**\n * Get expected hash length.\n *\n * @func\n * @alias hkdf.hash_length\n * @param {string} hash - Hash algorithm (as in underlying Node.js crypto library)\n * @returns {integer} hash digest byte length\n *\n * @note Values are hardcoded with fallback for unknown algorithms.\n */\nconst hash_length = ( hash ) => {\n    switch ( hash ) {\n    case 'sha256': return 32;\n    case 'sha512': return 64;\n    case 'sha224': return 28;\n    case 'sha384': return 48;\n    case 'sha3-256': return 32;\n    case 'sha3-512': return 64;\n    case 'sha3-224': return 28;\n    case 'sha3-384': return 48;\n    case 'blake2s256': return 32;\n    case 'blake2b512': return 64;\n    case 'sha1': return 20;\n    case 'md5': return 16;\n    default: {\n        let len = g_digestLenCache[hash];\n\n        if ( len === undefined ) {\n            len = createHash( hash ).digest().length;\n            g_digestLenCache[hash] = len;\n        }\n\n        return len;\n    }\n    }\n};\n\n/**\n * HKDF extract action.\n *\n * @func\n * @alias hkdf.extract\n * @param {string} hash - Hash algorithm (as in underlying Node.js crypto library)\n * @param {integer} hash_len - Hash digest length\n * @param {Buffer|string} ikm - Initial Keying Material\n * @param {Buffer|string} salt - Optional salt (recommended)\n * @returns {Buffer} A buffer with pseudorandom key\n *\n * @note Values are hardcoded with fallback for unknown algorithms.\n */\nconst hkdf_extract = ( hash, hash_len, ikm, salt ) => {\n    const b_ikm = Buffer.isBuffer( ikm ) ? ikm : Buffer.from( ikm );\n    const b_salt = ( salt && salt.length ) ? Buffer.from( salt ) : Buffer.alloc( hash_len, 0 );\n\n    return createHmac( hash, b_salt ).update( b_ikm ).digest();\n};\n\n/**\n * HKDF expand action.\n *\n * @func\n * @alias hkdf.expand\n * @param {string} hash - Hash algorithm (as in underlying Node.js crypto library)\n * @param {integer} hash_len - Hash digest length\n * @param {Buffer|string} prk - A buffer with pseudorandom key\n * @param {integer} length - length of output keying material in octets\n * @param {Buffer|string} info - Optional context (safe to skip)\n * @returns {Buffer} A buffer with output keying material\n *\n * @note Values are hardcoded with fallback for unknown algorithms.\n */\nconst hkdf_expand = ( hash, hash_len, prk, length, info ) => {\n    const b_info = Buffer.isBuffer( info ) ? info : Buffer.from( info || '' );\n    const info_len = b_info.length;\n\n    const steps = Math.ceil( length / hash_len );\n\n    if ( steps > 0xFF ) {\n        throw new Error( `OKM length ${length} is too long for ${hash} hash` );\n    }\n\n    // use single buffer with unnecessary create/copy/move operations\n    const t = Buffer.alloc( hash_len * steps + info_len + 1 );\n\n    for ( let c = 1, start = 0, end = 0; c <= steps; ++c ) {\n        // add info\n        b_info.copy( t, end );\n        // add counter\n        t[ end + info_len ] = c;\n\n        createHmac( hash, prk )\n            // use view: T(C) = T(C-1) | info | C\n            .update( t.slice( start, end + info_len + 1 ) )\n            .digest()\n            // put back to the same buffer\n            .copy( t, end );\n\n        start = end; // used for T(C-1) start\n        end += hash_len; // used for T(C-1) end & overall end\n    }\n\n    return t.slice( 0, length );\n};\n\n/**\n * HMAC-based Extract-and-Expand Key Derivation Function (HKDF)\n *\n * @param {Buffer|string} ikm - Initial Keying Material\n * @param {integer} length - Required byte length of output\n * @param {Buffer|string} salt='' - Optional salt (recommended)\n * @param {Buffer|string} info='' - Optional context (safe to skip)\n * @param {string} hash='SHA-256' - HMAC hash function to use\n * @returns {Buffer} Raw buffer with derived key of @p length bytes\n */\nfunction hkdf( ikm, length, { salt='', info='', hash='SHA-256' } = {} ) {\n    hash = hash.toLowerCase().replace( '-', '' );\n\n    // 0. Hash length\n    const hash_len = hash_length( hash );\n\n    // 1. extract\n    const prk = hkdf_extract( hash, hash_len, ikm, salt );\n\n    // 2. expand\n    return hkdf_expand( hash, hash_len, prk, length, info );\n}\n\nObject.defineProperties( hkdf, {\n    hash_length : {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: hash_length,\n    },\n    extract : {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: hkdf_extract,\n    },\n    expand : {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: hkdf_expand,\n    },\n} );\n\nmodule.exports = hkdf;\n","'use strict';\n\nvar undefined;\n\nvar $Error = require('es-errors');\nvar $EvalError = require('es-errors/eval');\nvar $RangeError = require('es-errors/range');\nvar $ReferenceError = require('es-errors/ref');\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\nvar $URIError = require('es-errors/uri');\n\nvar $Function = Function;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\nvar hasProto = require('has-proto')();\n\nvar getProto = Object.getPrototypeOf || (\n\thasProto\n\t\t? function (x) { return x.__proto__; } // eslint-disable-line no-proto\n\t\t: null\n);\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t__proto__: null,\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': $Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': $EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': $RangeError,\n\t'%ReferenceError%': $ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': $URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t__proto__: null,\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('hasown');\nvar $concat = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\nvar $exec = bind.call(Function.call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\n\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n","\"use strict\";\n//HomeKit Types UUID's\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MANUFACTURER_CTYPE = exports.LOGS_CTYPE = exports.LOCK_MECHANISM_LAST_KNOWN_ACTION_CTYPE = exports.LOCK_MANAGEMENT_CONTROL_POINT_CTYPE = exports.LOCK_MANAGEMENT_AUTO_SECURE_TIMEOUT_CTYPE = exports.IDENTIFY_CTYPE = exports.HUE_CTYPE = exports.HEATING_THRESHOLD_CTYPE = exports.CURRENT_TEMPERATURE_CTYPE = exports.CURRENT_RELATIVE_HUMIDITY_CTYPE = exports.CURRENT_LOCK_MECHANISM_STATE_CTYPE = exports.CURRENT_DOOR_STATE_CTYPE = exports.CONTACT_SENSOR_STATE_CTYPE = exports.COOLING_THRESHOLD_CTYPE = exports.BATTERY_LEVEL_CTYPE = exports.BRIGHTNESS_CTYPE = exports.AUDIO_FEEDBACK_CTYPE = exports.ADMIN_ONLY_ACCESS_CTYPE = exports.ALARM_TARGET_STATE_CTYPE = exports.ALARM_CURRENT_STATE_CTYPE = exports.TEMPERATURE_SENSOR_STYPE = exports.HUMIDITY_SENSOR_STYPE = exports.MOTION_SENSOR_STYPE = exports.CONTACT_SENSOR_STYPE = exports.OCCUPANCY_SENSOR_STYPE = exports.WINDOW_COVERING_STYPE = exports.ALARM_STYPE = exports.LOCK_MANAGEMENT_STYPE = exports.LOCK_MECHANISM_STYPE = exports.OUTLET_STYPE = exports.FAN_STYPE = exports.ACCESSORY_INFORMATION_STYPE = exports.GARAGE_DOOR_OPENER_STYPE = exports.THERMOSTAT_STYPE = exports.SWITCH_STYPE = exports.LIGHTBULB_STYPE = exports.PROGRAMMABLE_SWITCH_TCTYPE = exports.WINDOW_COVERING_TCTYPE = exports.WINDOW_TCTYPE = exports.DOOR_TCTYPE = exports.ALARM_SYSTEM_TCTYPE = exports.SENSOR_TCTYPE = exports.THERMOSTAT_TCTYPE = exports.SWITCH_TCTYPE = exports.OUTLET_TCTYPE = exports.DOOR_LOCK_TCTYPE = exports.LIGHTBULB_TCTYPE = exports.GARAGE_DOOR_OPENER_TCTYPE = exports.FAN_TCTYPE = exports.OTHER_TCTYPE = void 0;\nexports.TARGETHEATINGCOOLING_CTYPE = exports.CURRENTHEATINGCOOLING_CTYPE = exports.WINDOW_COVERING_OPERATION_STATE_CTYPE = exports.WINDOW_COVERING_CURRENT_POSITION_CTYPE = exports.WINDOW_COVERING_TARGET_POSITION_CTYPE = exports.VERSION_CTYPE = exports.TEMPERATURE_UNITS_CTYPE = exports.TARGET_TEMPERATURE_CTYPE = exports.TARGET_RELATIVE_HUMIDITY_CTYPE = exports.TARGET_LOCK_MECHANISM_STATE_CTYPE = exports.TARGET_DOORSTATE_CTYPE = exports.STATUS_FAULT_CTYPE = exports.STATUS_LOW_BATTERY_CTYPE = exports.FIRMWARE_REVISION_CTYPE = exports.SERIAL_NUMBER_CTYPE = exports.SATURATION_CTYPE = exports.ROTATION_SPEED_CTYPE = exports.ROTATION_DIRECTION_CTYPE = exports.PROGRAMMABLE_SWITCH_OUTPUT_STATE_CTYPE = exports.PROGRAMMABLE_SWITCH_SWITCH_EVENT_CTYPE = exports.POWER_STATE_CTYPE = exports.OCCUPANCY_DETECTED_CTYPE = exports.OUTLET_IN_USE_CTYPE = exports.OBSTRUCTION_DETECTED_CTYPE = exports.NAME_CTYPE = exports.MOTION_DETECTED_CTYPE = exports.MODEL_CTYPE = void 0;\nvar stPre = \"000000\";\nvar stPost = \"-0000-1000-8000-0026BB765291\";\n//HomeKitTransportCategoryTypes\nexports.OTHER_TCTYPE = 1;\nexports.FAN_TCTYPE = 3;\nexports.GARAGE_DOOR_OPENER_TCTYPE = 4;\nexports.LIGHTBULB_TCTYPE = 5;\nexports.DOOR_LOCK_TCTYPE = 6;\nexports.OUTLET_TCTYPE = 7;\nexports.SWITCH_TCTYPE = 8;\nexports.THERMOSTAT_TCTYPE = 9;\nexports.SENSOR_TCTYPE = 10;\nexports.ALARM_SYSTEM_TCTYPE = 11;\nexports.DOOR_TCTYPE = 12;\nexports.WINDOW_TCTYPE = 13;\nexports.WINDOW_COVERING_TCTYPE = 14;\nexports.PROGRAMMABLE_SWITCH_TCTYPE = 15;\n//HomeKitServiceTypes\nexports.LIGHTBULB_STYPE = stPre + \"43\" + stPost;\nexports.SWITCH_STYPE = stPre + \"49\" + stPost;\nexports.THERMOSTAT_STYPE = stPre + \"4A\" + stPost;\nexports.GARAGE_DOOR_OPENER_STYPE = stPre + \"41\" + stPost;\nexports.ACCESSORY_INFORMATION_STYPE = stPre + \"3E\" + stPost;\nexports.FAN_STYPE = stPre + \"40\" + stPost;\nexports.OUTLET_STYPE = stPre + \"47\" + stPost;\nexports.LOCK_MECHANISM_STYPE = stPre + \"45\" + stPost;\nexports.LOCK_MANAGEMENT_STYPE = stPre + \"44\" + stPost;\nexports.ALARM_STYPE = stPre + \"7E\" + stPost;\nexports.WINDOW_COVERING_STYPE = stPre + \"8C\" + stPost;\nexports.OCCUPANCY_SENSOR_STYPE = stPre + \"86\" + stPost;\nexports.CONTACT_SENSOR_STYPE = stPre + \"80\" + stPost;\nexports.MOTION_SENSOR_STYPE = stPre + \"85\" + stPost;\nexports.HUMIDITY_SENSOR_STYPE = stPre + \"82\" + stPost;\nexports.TEMPERATURE_SENSOR_STYPE = stPre + \"8A\" + stPost;\n//HomeKitCharacteristicsTypes\nexports.ALARM_CURRENT_STATE_CTYPE = stPre + \"66\" + stPost;\nexports.ALARM_TARGET_STATE_CTYPE = stPre + \"67\" + stPost;\nexports.ADMIN_ONLY_ACCESS_CTYPE = stPre + \"01\" + stPost;\nexports.AUDIO_FEEDBACK_CTYPE = stPre + \"05\" + stPost;\nexports.BRIGHTNESS_CTYPE = stPre + \"08\" + stPost;\nexports.BATTERY_LEVEL_CTYPE = stPre + \"68\" + stPost;\nexports.COOLING_THRESHOLD_CTYPE = stPre + \"0D\" + stPost;\nexports.CONTACT_SENSOR_STATE_CTYPE = stPre + \"6A\" + stPost;\nexports.CURRENT_DOOR_STATE_CTYPE = stPre + \"0E\" + stPost;\nexports.CURRENT_LOCK_MECHANISM_STATE_CTYPE = stPre + \"1D\" + stPost;\nexports.CURRENT_RELATIVE_HUMIDITY_CTYPE = stPre + \"10\" + stPost;\nexports.CURRENT_TEMPERATURE_CTYPE = stPre + \"11\" + stPost;\nexports.HEATING_THRESHOLD_CTYPE = stPre + \"12\" + stPost;\nexports.HUE_CTYPE = stPre + \"13\" + stPost;\nexports.IDENTIFY_CTYPE = stPre + \"14\" + stPost;\nexports.LOCK_MANAGEMENT_AUTO_SECURE_TIMEOUT_CTYPE = stPre + \"1A\" + stPost;\nexports.LOCK_MANAGEMENT_CONTROL_POINT_CTYPE = stPre + \"19\" + stPost;\nexports.LOCK_MECHANISM_LAST_KNOWN_ACTION_CTYPE = stPre + \"1C\" + stPost;\nexports.LOGS_CTYPE = stPre + \"1F\" + stPost;\nexports.MANUFACTURER_CTYPE = stPre + \"20\" + stPost;\nexports.MODEL_CTYPE = stPre + \"21\" + stPost;\nexports.MOTION_DETECTED_CTYPE = stPre + \"22\" + stPost;\nexports.NAME_CTYPE = stPre + \"23\" + stPost;\nexports.OBSTRUCTION_DETECTED_CTYPE = stPre + \"24\" + stPost;\nexports.OUTLET_IN_USE_CTYPE = stPre + \"26\" + stPost;\nexports.OCCUPANCY_DETECTED_CTYPE = stPre + \"71\" + stPost;\nexports.POWER_STATE_CTYPE = stPre + \"25\" + stPost;\nexports.PROGRAMMABLE_SWITCH_SWITCH_EVENT_CTYPE = stPre + \"73\" + stPost;\nexports.PROGRAMMABLE_SWITCH_OUTPUT_STATE_CTYPE = stPre + \"74\" + stPost;\nexports.ROTATION_DIRECTION_CTYPE = stPre + \"28\" + stPost;\nexports.ROTATION_SPEED_CTYPE = stPre + \"29\" + stPost;\nexports.SATURATION_CTYPE = stPre + \"2F\" + stPost;\nexports.SERIAL_NUMBER_CTYPE = stPre + \"30\" + stPost;\nexports.FIRMWARE_REVISION_CTYPE = stPre + \"52\" + stPost;\nexports.STATUS_LOW_BATTERY_CTYPE = stPre + \"79\" + stPost;\nexports.STATUS_FAULT_CTYPE = stPre + \"77\" + stPost;\nexports.TARGET_DOORSTATE_CTYPE = stPre + \"32\" + stPost;\nexports.TARGET_LOCK_MECHANISM_STATE_CTYPE = stPre + \"1E\" + stPost;\nexports.TARGET_RELATIVE_HUMIDITY_CTYPE = stPre + \"34\" + stPost;\nexports.TARGET_TEMPERATURE_CTYPE = stPre + \"35\" + stPost;\nexports.TEMPERATURE_UNITS_CTYPE = stPre + \"36\" + stPost;\nexports.VERSION_CTYPE = stPre + \"37\" + stPost;\nexports.WINDOW_COVERING_TARGET_POSITION_CTYPE = stPre + \"7C\" + stPost;\nexports.WINDOW_COVERING_CURRENT_POSITION_CTYPE = stPre + \"6D\" + stPost;\nexports.WINDOW_COVERING_OPERATION_STATE_CTYPE = stPre + \"72\" + stPost;\nexports.CURRENTHEATINGCOOLING_CTYPE = stPre + \"0F\" + stPost;\nexports.TARGETHEATINGCOOLING_CTYPE = stPre + \"33\" + stPost;\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.init = exports.HAPLibraryVersion = exports.LegacyTypes = exports.uuid = exports.AccessoryLoader = void 0;\nvar tslib_1 = require(\"tslib\");\nrequire(\"source-map-support/register\"); // registering node-source-map-support for typescript stack traces\nrequire(\"./lib/definitions\"); // must be loaded before Characteristic and Service class\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar HAPStorage_1 = require(\"./lib/model/HAPStorage\");\n/**\n * @group Utils\n */\nexports.AccessoryLoader = tslib_1.__importStar(require(\"./lib/AccessoryLoader\"));\n/**\n * @group Utils\n */\nexports.uuid = tslib_1.__importStar(require(\"./lib/util/uuid\"));\ntslib_1.__exportStar(require(\"./lib/model/HAPStorage\"), exports);\ntslib_1.__exportStar(require(\"./lib/Accessory\"), exports);\ntslib_1.__exportStar(require(\"./lib/Bridge\"), exports);\ntslib_1.__exportStar(require(\"./lib/Service\"), exports);\ntslib_1.__exportStar(require(\"./lib/Characteristic\"), exports);\ntslib_1.__exportStar(require(\"./lib/AccessoryLoader\"), exports);\ntslib_1.__exportStar(require(\"./lib/camera\"), exports);\ntslib_1.__exportStar(require(\"./lib/tv/AccessControlManagement\"), exports);\ntslib_1.__exportStar(require(\"./lib/HAPServer\"), exports);\ntslib_1.__exportStar(require(\"./lib/datastream\"), exports);\ntslib_1.__exportStar(require(\"./lib/controller\"), exports);\ntslib_1.__exportStar(require(\"./lib/model/AccessoryInfo\"), exports);\ntslib_1.__exportStar(require(\"./lib/util/clone\"), exports);\ntslib_1.__exportStar(require(\"./lib/util/once\"), exports);\ntslib_1.__exportStar(require(\"./lib/util/tlv\"), exports);\ntslib_1.__exportStar(require(\"./lib/util/hapStatusError\"), exports);\ntslib_1.__exportStar(require(\"./lib/util/color-utils\"), exports);\ntslib_1.__exportStar(require(\"./lib/util/time\"), exports);\ntslib_1.__exportStar(require(\"./lib/util/eventedhttp\"), exports);\ntslib_1.__exportStar(require(\"./types\"), exports);\n/**\n * @group Utils\n */\nexports.LegacyTypes = tslib_1.__importStar(require(\"./accessories/types\"));\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:Advertiser\");\n/**\n * This method can be used to retrieve the current running library version of the HAP-NodeJS framework.\n * @returns The SemVer version string.\n *\n * @group Utils\n */\nfunction HAPLibraryVersion() {\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    var packageJson = require(\"../package.json\");\n    return packageJson.version;\n}\nexports.HAPLibraryVersion = HAPLibraryVersion;\nfunction printInit() {\n    debug(\"Initializing HAP-NodeJS v%s ...\", HAPLibraryVersion());\n}\nprintInit();\n/**\n *\n * @param {string} storagePath\n * @deprecated the need to manually initialize the internal storage was removed. If you want to set a custom\n *  storage path location, please use {@link HAPStorage.setCustomStoragePath} directly.\n *\n *  @group Utils\n */\nfunction init(storagePath) {\n    console.log(\"DEPRECATED: The need to manually initialize HAP (by calling the init method) was removed. \" +\n        \"If you want to set a custom storage path location, please ust HAPStorage.setCustomStoragePath directly. \" +\n        \"This method will be removed in the next major update!\");\n    if (storagePath) {\n        HAPStorage_1.HAPStorage.setCustomStoragePath(storagePath);\n    }\n}\nexports.init = init;\nvar Services = tslib_1.__importStar(require(\"./lib/definitions/ServiceDefinitions\"));\nvar Characteristics = tslib_1.__importStar(require(\"./lib/definitions/CharacteristicDefinitions\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HAPMimeTypes = exports.PairingStates = exports.PairMethods = exports.TLVValues = exports.consideredTrue = void 0;\n/**\n * @group Utils\n */\nfunction consideredTrue(input) {\n    if (!input) {\n        return false;\n    }\n    return input === \"true\" || input === \"1\";\n}\nexports.consideredTrue = consideredTrue;\n/**\n * @group HAP Accessory Server\n */\nvar TLVValues;\n(function (TLVValues) {\n    // noinspection JSUnusedGlobalSymbols\n    TLVValues[TLVValues[\"REQUEST_TYPE\"] = 0] = \"REQUEST_TYPE\";\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    TLVValues[TLVValues[\"METHOD\"] = 0] = \"METHOD\";\n    TLVValues[TLVValues[\"USERNAME\"] = 1] = \"USERNAME\";\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    TLVValues[TLVValues[\"IDENTIFIER\"] = 1] = \"IDENTIFIER\";\n    TLVValues[TLVValues[\"SALT\"] = 2] = \"SALT\";\n    TLVValues[TLVValues[\"PUBLIC_KEY\"] = 3] = \"PUBLIC_KEY\";\n    TLVValues[TLVValues[\"PASSWORD_PROOF\"] = 4] = \"PASSWORD_PROOF\";\n    TLVValues[TLVValues[\"ENCRYPTED_DATA\"] = 5] = \"ENCRYPTED_DATA\";\n    TLVValues[TLVValues[\"SEQUENCE_NUM\"] = 6] = \"SEQUENCE_NUM\";\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    TLVValues[TLVValues[\"STATE\"] = 6] = \"STATE\";\n    TLVValues[TLVValues[\"ERROR_CODE\"] = 7] = \"ERROR_CODE\";\n    TLVValues[TLVValues[\"RETRY_DELAY\"] = 8] = \"RETRY_DELAY\";\n    TLVValues[TLVValues[\"CERTIFICATE\"] = 9] = \"CERTIFICATE\";\n    TLVValues[TLVValues[\"PROOF\"] = 10] = \"PROOF\";\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    TLVValues[TLVValues[\"SIGNATURE\"] = 10] = \"SIGNATURE\";\n    TLVValues[TLVValues[\"PERMISSIONS\"] = 11] = \"PERMISSIONS\";\n    TLVValues[TLVValues[\"FRAGMENT_DATA\"] = 12] = \"FRAGMENT_DATA\";\n    TLVValues[TLVValues[\"FRAGMENT_LAST\"] = 13] = \"FRAGMENT_LAST\";\n    TLVValues[TLVValues[\"SEPARATOR\"] = 255] = \"SEPARATOR\"; // Zero-length TLV that separates different TLVs in a list.\n})(TLVValues || (exports.TLVValues = TLVValues = {}));\n/**\n * @group HAP Accessory Server\n */\nvar PairMethods;\n(function (PairMethods) {\n    // noinspection JSUnusedGlobalSymbols\n    PairMethods[PairMethods[\"PAIR_SETUP\"] = 0] = \"PAIR_SETUP\";\n    PairMethods[PairMethods[\"PAIR_SETUP_WITH_AUTH\"] = 1] = \"PAIR_SETUP_WITH_AUTH\";\n    PairMethods[PairMethods[\"PAIR_VERIFY\"] = 2] = \"PAIR_VERIFY\";\n    PairMethods[PairMethods[\"ADD_PAIRING\"] = 3] = \"ADD_PAIRING\";\n    PairMethods[PairMethods[\"REMOVE_PAIRING\"] = 4] = \"REMOVE_PAIRING\";\n    PairMethods[PairMethods[\"LIST_PAIRINGS\"] = 5] = \"LIST_PAIRINGS\";\n})(PairMethods || (exports.PairMethods = PairMethods = {}));\n/**\n * Pairing states (pair-setup or pair-verify). Encoded in {@link TLVValues.SEQUENCE_NUM}.\n *\n * @group HAP Accessory Server\n */\nvar PairingStates;\n(function (PairingStates) {\n    PairingStates[PairingStates[\"M1\"] = 1] = \"M1\";\n    PairingStates[PairingStates[\"M2\"] = 2] = \"M2\";\n    PairingStates[PairingStates[\"M3\"] = 3] = \"M3\";\n    PairingStates[PairingStates[\"M4\"] = 4] = \"M4\";\n    PairingStates[PairingStates[\"M5\"] = 5] = \"M5\";\n    PairingStates[PairingStates[\"M6\"] = 6] = \"M6\";\n})(PairingStates || (exports.PairingStates = PairingStates = {}));\n/**\n * @group HAP Accessory Server\n */\nvar HAPMimeTypes;\n(function (HAPMimeTypes) {\n    HAPMimeTypes[\"PAIRING_TLV8\"] = \"application/pairing+tlv8\";\n    HAPMimeTypes[\"HAP_JSON\"] = \"application/hap+json\";\n    HAPMimeTypes[\"IMAGE_JPEG\"] = \"image/jpeg\";\n})(HAPMimeTypes || (exports.HAPMimeTypes = HAPMimeTypes = {}));\n//# sourceMappingURL=internal-types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Accessory = exports.AccessoryEventTypes = exports.MDNSAdvertiser = exports.CharacteristicWarningType = exports.Categories = void 0;\nvar tslib_1 = require(\"tslib\");\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar crypto_1 = tslib_1.__importDefault(require(\"crypto\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar events_1 = require(\"events\");\nvar net_1 = tslib_1.__importDefault(require(\"net\"));\nvar Advertiser_1 = require(\"./Advertiser\");\n// noinspection JSDeprecatedSymbols\nvar camera_1 = require(\"./camera\");\nvar Characteristic_1 = require(\"./Characteristic\");\nvar controller_1 = require(\"./controller\");\nvar HAPServer_1 = require(\"./HAPServer\");\nvar AccessoryInfo_1 = require(\"./model/AccessoryInfo\");\nvar ControllerStorage_1 = require(\"./model/ControllerStorage\");\nvar IdentifierCache_1 = require(\"./model/IdentifierCache\");\nvar Service_1 = require(\"./Service\");\nvar clone_1 = require(\"./util/clone\");\nvar request_util_1 = require(\"./util/request-util\");\nvar uuid = tslib_1.__importStar(require(\"./util/uuid\"));\nvar uuid_1 = require(\"./util/uuid\");\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:Accessory\");\nvar MAX_ACCESSORIES = 149; // Maximum number of bridged accessories per bridge.\nvar MAX_SERVICES = 100;\n/**\n * Known category values. Category is a hint to iOS clients about what \"type\" of Accessory this represents, for UI only.\n *\n * @group Accessory\n */\nvar Categories;\n(function (Categories) {\n    // noinspection JSUnusedGlobalSymbols\n    Categories[Categories[\"OTHER\"] = 1] = \"OTHER\";\n    Categories[Categories[\"BRIDGE\"] = 2] = \"BRIDGE\";\n    Categories[Categories[\"FAN\"] = 3] = \"FAN\";\n    Categories[Categories[\"GARAGE_DOOR_OPENER\"] = 4] = \"GARAGE_DOOR_OPENER\";\n    Categories[Categories[\"LIGHTBULB\"] = 5] = \"LIGHTBULB\";\n    Categories[Categories[\"DOOR_LOCK\"] = 6] = \"DOOR_LOCK\";\n    Categories[Categories[\"OUTLET\"] = 7] = \"OUTLET\";\n    Categories[Categories[\"SWITCH\"] = 8] = \"SWITCH\";\n    Categories[Categories[\"THERMOSTAT\"] = 9] = \"THERMOSTAT\";\n    Categories[Categories[\"SENSOR\"] = 10] = \"SENSOR\";\n    Categories[Categories[\"ALARM_SYSTEM\"] = 11] = \"ALARM_SYSTEM\";\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    Categories[Categories[\"SECURITY_SYSTEM\"] = 11] = \"SECURITY_SYSTEM\";\n    Categories[Categories[\"DOOR\"] = 12] = \"DOOR\";\n    Categories[Categories[\"WINDOW\"] = 13] = \"WINDOW\";\n    Categories[Categories[\"WINDOW_COVERING\"] = 14] = \"WINDOW_COVERING\";\n    Categories[Categories[\"PROGRAMMABLE_SWITCH\"] = 15] = \"PROGRAMMABLE_SWITCH\";\n    Categories[Categories[\"RANGE_EXTENDER\"] = 16] = \"RANGE_EXTENDER\";\n    Categories[Categories[\"CAMERA\"] = 17] = \"CAMERA\";\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    Categories[Categories[\"IP_CAMERA\"] = 17] = \"IP_CAMERA\";\n    Categories[Categories[\"VIDEO_DOORBELL\"] = 18] = \"VIDEO_DOORBELL\";\n    Categories[Categories[\"AIR_PURIFIER\"] = 19] = \"AIR_PURIFIER\";\n    Categories[Categories[\"AIR_HEATER\"] = 20] = \"AIR_HEATER\";\n    Categories[Categories[\"AIR_CONDITIONER\"] = 21] = \"AIR_CONDITIONER\";\n    Categories[Categories[\"AIR_HUMIDIFIER\"] = 22] = \"AIR_HUMIDIFIER\";\n    Categories[Categories[\"AIR_DEHUMIDIFIER\"] = 23] = \"AIR_DEHUMIDIFIER\";\n    Categories[Categories[\"APPLE_TV\"] = 24] = \"APPLE_TV\";\n    Categories[Categories[\"HOMEPOD\"] = 25] = \"HOMEPOD\";\n    Categories[Categories[\"SPEAKER\"] = 26] = \"SPEAKER\";\n    Categories[Categories[\"AIRPORT\"] = 27] = \"AIRPORT\";\n    Categories[Categories[\"SPRINKLER\"] = 28] = \"SPRINKLER\";\n    Categories[Categories[\"FAUCET\"] = 29] = \"FAUCET\";\n    Categories[Categories[\"SHOWER_HEAD\"] = 30] = \"SHOWER_HEAD\";\n    Categories[Categories[\"TELEVISION\"] = 31] = \"TELEVISION\";\n    Categories[Categories[\"TARGET_CONTROLLER\"] = 32] = \"TARGET_CONTROLLER\";\n    Categories[Categories[\"ROUTER\"] = 33] = \"ROUTER\";\n    Categories[Categories[\"AUDIO_RECEIVER\"] = 34] = \"AUDIO_RECEIVER\";\n    Categories[Categories[\"TV_SET_TOP_BOX\"] = 35] = \"TV_SET_TOP_BOX\";\n    Categories[Categories[\"TV_STREAMING_STICK\"] = 36] = \"TV_STREAMING_STICK\";\n})(Categories || (exports.Categories = Categories = {}));\n/**\n * @group Accessory\n */\nvar CharacteristicWarningType;\n(function (CharacteristicWarningType) {\n    CharacteristicWarningType[\"SLOW_WRITE\"] = \"slow-write\";\n    CharacteristicWarningType[\"TIMEOUT_WRITE\"] = \"timeout-write\";\n    CharacteristicWarningType[\"SLOW_READ\"] = \"slow-read\";\n    CharacteristicWarningType[\"TIMEOUT_READ\"] = \"timeout-read\";\n    CharacteristicWarningType[\"WARN_MESSAGE\"] = \"warn-message\";\n    CharacteristicWarningType[\"ERROR_MESSAGE\"] = \"error-message\";\n    CharacteristicWarningType[\"DEBUG_MESSAGE\"] = \"debug-message\";\n})(CharacteristicWarningType || (exports.CharacteristicWarningType = CharacteristicWarningType = {}));\n/**\n * @group Accessory\n */\nvar MDNSAdvertiser;\n(function (MDNSAdvertiser) {\n    /**\n     * Use the `@homebridge/ciao` module as advertiser.\n     */\n    MDNSAdvertiser[\"CIAO\"] = \"ciao\";\n    /**\n     * Use the `bonjour-hap` module as advertiser.\n     */\n    MDNSAdvertiser[\"BONJOUR\"] = \"bonjour-hap\";\n    /**\n     * Use Avahi/D-Bus as advertiser.\n     */\n    MDNSAdvertiser[\"AVAHI\"] = \"avahi\";\n    /**\n     * Use systemd-resolved/D-Bus as advertiser.\n     *\n     * Note: The systemd-resolved D-Bus interface doesn't provide means to detect restarts of the service.\n     * Therefore, we can't detect if our advertisement might be lost due to a restart of the systemd-resolved daemon restart.\n     * Consequentially, treat this feature as an experimental feature.\n     */\n    MDNSAdvertiser[\"RESOLVED\"] = \"resolved\";\n})(MDNSAdvertiser || (exports.MDNSAdvertiser = MDNSAdvertiser = {}));\nvar WriteRequestState;\n(function (WriteRequestState) {\n    WriteRequestState[WriteRequestState[\"REGULAR_REQUEST\"] = 0] = \"REGULAR_REQUEST\";\n    WriteRequestState[WriteRequestState[\"TIMED_WRITE_AUTHENTICATED\"] = 1] = \"TIMED_WRITE_AUTHENTICATED\";\n    WriteRequestState[WriteRequestState[\"TIMED_WRITE_REJECTED\"] = 2] = \"TIMED_WRITE_REJECTED\";\n})(WriteRequestState || (WriteRequestState = {}));\n/**\n * @group Accessory\n */\nvar AccessoryEventTypes;\n(function (AccessoryEventTypes) {\n    /**\n     * Emitted when an iOS device wishes for this Accessory to identify itself. If `paired` is false, then\n     * this device is currently browsing for Accessories in the system-provided \"Add Accessory\" screen. If\n     * `paired` is true, then this is a device that has already paired with us. Note that if `paired` is true,\n     * listening for this event is a shortcut for the underlying mechanism of setting the `Identify` Characteristic:\n     * `getService(Service.AccessoryInformation).getCharacteristic(Characteristic.Identify).on('set', ...)`\n     * You must call the callback for identification to be successful.\n     */\n    AccessoryEventTypes[\"IDENTIFY\"] = \"identify\";\n    /**\n     * This event is emitted once the HAP TCP socket is bound.\n     * At this point the mdns advertisement isn't yet available. Use the {@link ADVERTISED} if you require the accessory to be discoverable.\n     */\n    AccessoryEventTypes[\"LISTENING\"] = \"listening\";\n    /**\n     * This event is emitted once the mDNS suite has fully advertised the presence of the accessory.\n     * This event is guaranteed to be called after {@link LISTENING}.\n     */\n    AccessoryEventTypes[\"ADVERTISED\"] = \"advertised\";\n    AccessoryEventTypes[\"SERVICE_CONFIGURATION_CHANGE\"] = \"service-configurationChange\";\n    /**\n     * Emitted after a change in the value of one of the provided Service's Characteristics.\n     */\n    AccessoryEventTypes[\"SERVICE_CHARACTERISTIC_CHANGE\"] = \"service-characteristic-change\";\n    AccessoryEventTypes[\"PAIRED\"] = \"paired\";\n    AccessoryEventTypes[\"UNPAIRED\"] = \"unpaired\";\n    AccessoryEventTypes[\"CHARACTERISTIC_WARNING\"] = \"characteristic-warning\";\n})(AccessoryEventTypes || (exports.AccessoryEventTypes = AccessoryEventTypes = {}));\n/**\n * Accessory is a virtual HomeKit device. It can publish an associated HAP server for iOS devices to communicate\n * with - or it can run behind another \"Bridge\" Accessory server.\n *\n * Bridged Accessories in this implementation must have a UUID that is unique among all other Accessories that\n * are hosted by the Bridge. This UUID must be \"stable\" and unchanging, even when the server is restarted. This\n * is required so that the Bridge can provide consistent \"Accessory IDs\" (aid) and \"Instance IDs\" (iid) for all\n * Accessories, Services, and Characteristics for iOS clients to reference later.\n *\n * @group Accessory\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar Accessory = /** @class */ (function (_super) {\n    tslib_1.__extends(Accessory, _super);\n    function Accessory(displayName, UUID) {\n        var _this = _super.call(this) || this;\n        _this.displayName = displayName;\n        _this.UUID = UUID;\n        // NOTICE: when adding/changing properties, remember to possibly adjust the serialize/deserialize functions\n        _this.aid = null; // assigned by us in assignIDs() or by a Bridge\n        _this._isBridge = false; // true if we are a Bridge (creating a new instance of the Bridge subclass sets this to true)\n        _this.bridged = false; // true if we are hosted \"behind\" a Bridge Accessory\n        _this.bridgedAccessories = []; // If we are a Bridge, these are the Accessories we are bridging\n        _this.reachable = true;\n        _this.category = 1 /* Categories.OTHER */;\n        _this.services = [];\n        _this.shouldPurgeUnusedIDs = true; // Purge unused ids by default\n        /**\n         * Captures if initialization steps inside {@link publish} have been called.\n         * This is important when calling {@link publish} multiple times (e.g. after calling {@link unpublish}).\n         * @private Private API\n         */\n        _this.initialized = false;\n        _this.controllers = {};\n        /**\n         * @private Private API.\n         */\n        _this._setupID = null;\n        /**\n         * @private Private API.\n         */\n        _this.controllerStorage = new ControllerStorage_1.ControllerStorage(_this);\n        /**\n         * This property captures the time when we last served a /accessories request.\n         * For multiple bursts of /accessories request we don't want to always contact GET handlers\n         */\n        _this.lastAccessoriesRequest = 0;\n        /**\n         * Returns the bridging accessory if this accessory is bridged.\n         * Otherwise, returns itself.\n         *\n         * @returns the primary accessory\n         */\n        _this.getPrimaryAccessory = function () {\n            return _this.bridged ? _this.bridge : _this;\n        };\n        (0, assert_1.default)(displayName, \"Accessories must be created with a non-empty displayName.\");\n        (0, assert_1.default)(UUID, \"Accessories must be created with a valid UUID.\");\n        (0, assert_1.default)(uuid.isValid(UUID), \"UUID '\" + UUID + \"' is not a valid UUID. Try using the provided 'generateUUID' function to create a \" +\n            \"valid UUID from any arbitrary string, like a serial number.\");\n        // create our initial \"Accessory Information\" Service that all Accessories are expected to have\n        _this.addService(Service_1.Service.AccessoryInformation)\n            .setCharacteristic(Characteristic_1.Characteristic.Name, displayName);\n        // sign up for when iOS attempts to \"set\" the `Identify` characteristic - this means a paired device wishes\n        // for us to identify ourselves (as opposed to an unpaired device - that case is handled by HAPServer 'identify' event)\n        _this.getService(Service_1.Service.AccessoryInformation)\n            .getCharacteristic(Characteristic_1.Characteristic.Identify)\n            .on(\"set\" /* CharacteristicEventTypes.SET */, function (value, callback) {\n            if (value) {\n                var paired = true;\n                _this.identificationRequest(paired, callback);\n            }\n        });\n        return _this;\n    }\n    Accessory.prototype.identificationRequest = function (paired, callback) {\n        debug(\"[%s] Identification request\", this.displayName);\n        if (this.listeners(\"identify\" /* AccessoryEventTypes.IDENTIFY */).length > 0) {\n            // allow implementors to identify this Accessory in whatever way is appropriate, and pass along\n            // the standard callback for completion.\n            this.emit(\"identify\" /* AccessoryEventTypes.IDENTIFY */, paired, callback);\n        }\n        else {\n            debug(\"[%s] Identification request ignored; no listeners to 'identify' event\", this.displayName);\n            callback();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Accessory.prototype.addService = function (serviceParam) {\n        var e_1, _a;\n        var constructorArgs = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            constructorArgs[_i - 1] = arguments[_i];\n        }\n        // service might be a constructor like `Service.AccessoryInformation` instead of an instance\n        // of Service. Coerce if necessary.\n        var service = typeof serviceParam === \"function\"\n            ? new serviceParam(constructorArgs[0], constructorArgs[1], constructorArgs[2])\n            : serviceParam;\n        try {\n            // check for UUID+subtype conflict\n            for (var _b = tslib_1.__values(this.services), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var existing = _c.value;\n                if (existing.UUID === service.UUID) {\n                    // OK we have two Services with the same UUID. Check that each defines a `subtype` property and that each is unique.\n                    if (!service.subtype) {\n                        throw new Error(\"Cannot add a Service with the same UUID '\" + existing.UUID +\n                            \"' as another Service in this Accessory without also defining a unique 'subtype' property.\");\n                    }\n                    if (service.subtype === existing.subtype) {\n                        throw new Error(\"Cannot add a Service with the same UUID '\" + existing.UUID +\n                            \"' and subtype '\" + existing.subtype + \"' as another Service in this Accessory.\");\n                    }\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        if (this.services.length >= MAX_SERVICES) {\n            throw new Error(\"Cannot add more than \" + MAX_SERVICES + \" services to a single accessory!\");\n        }\n        this.services.push(service);\n        if (service.isPrimaryService) { // check if a primary service was added\n            if (this.primaryService !== undefined) {\n                this.primaryService.isPrimaryService = false;\n            }\n            this.primaryService = service;\n        }\n        if (!this.bridged) {\n            this.enqueueConfigurationUpdate();\n        }\n        else {\n            this.emit(\"service-configurationChange\" /* AccessoryEventTypes.SERVICE_CONFIGURATION_CHANGE */, { service: service });\n        }\n        this.setupServiceEventHandlers(service);\n        return service;\n    };\n    /**\n     * @deprecated use {@link Service.setPrimaryService} directly\n     */\n    Accessory.prototype.setPrimaryService = function (service) {\n        service.setPrimaryService();\n    };\n    Accessory.prototype.removeService = function (service) {\n        var index = this.services.indexOf(service);\n        if (index >= 0) {\n            this.services.splice(index, 1);\n            if (this.primaryService === service) { // check if we are removing out primary service\n                this.primaryService = undefined;\n            }\n            this.removeLinkedService(service); // remove it from linked service entries on the local accessory\n            if (!this.bridged) {\n                this.enqueueConfigurationUpdate();\n            }\n            else {\n                this.emit(\"service-configurationChange\" /* AccessoryEventTypes.SERVICE_CONFIGURATION_CHANGE */, { service: service });\n            }\n            service.removeAllListeners();\n        }\n    };\n    Accessory.prototype.removeLinkedService = function (removed) {\n        var e_2, _a;\n        try {\n            for (var _b = tslib_1.__values(this.services), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var service = _c.value;\n                service.removeLinkedService(removed);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    Accessory.prototype.getService = function (name) {\n        var e_3, _a;\n        try {\n            for (var _b = tslib_1.__values(this.services), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var service = _c.value;\n                if (typeof name === \"string\" && (service.displayName === name || service.name === name || service.subtype === name)) {\n                    return service;\n                }\n                else {\n                    // @ts-expect-error ('UUID' does not exist on type 'never')\n                    if (typeof name === \"function\" && ((service instanceof name) || (name.UUID === service.UUID))) {\n                        return service;\n                    }\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return undefined;\n    };\n    Accessory.prototype.getServiceById = function (uuid, subType) {\n        var e_4, _a;\n        try {\n            for (var _b = tslib_1.__values(this.services), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var service = _c.value;\n                if (typeof uuid === \"string\" && (service.displayName === uuid || service.name === uuid) && service.subtype === subType) {\n                    return service;\n                }\n                else {\n                    // @ts-expect-error ('UUID' does not exist on type 'never')\n                    if (typeof uuid === \"function\" && ((service instanceof uuid) || (uuid.UUID === service.UUID)) && service.subtype === subType) {\n                        return service;\n                    }\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        return undefined;\n    };\n    /**\n     * @deprecated Not supported anymore\n     */\n    Accessory.prototype.updateReachability = function (reachable) {\n        if (!this.bridged) {\n            throw new Error(\"Cannot update reachability on non-bridged accessory!\");\n        }\n        this.reachable = reachable;\n        debug(\"Reachability update is no longer being supported.\");\n    };\n    Accessory.prototype.addBridgedAccessory = function (accessory, deferUpdate) {\n        var _this = this;\n        if (deferUpdate === void 0) { deferUpdate = false; }\n        if (accessory._isBridge || accessory === this) {\n            throw new Error(\"Illegal state: either trying to bridge a bridge or trying to bridge itself!\");\n        }\n        if (accessory.initialized) {\n            throw new Error(\"Tried to bridge an accessory which was already published once!\");\n        }\n        if (accessory.bridge != null) {\n            // this also prevents that we bridge the same accessory twice!\n            throw new Error(\"Tried to bridge \" + accessory.displayName + \" while it was already bridged by \" + accessory.bridge.displayName);\n        }\n        if (this.bridgedAccessories.length >= MAX_ACCESSORIES) {\n            throw new Error(\"Cannot Bridge more than \" + MAX_ACCESSORIES + \" Accessories\");\n        }\n        // listen for changes in ANY characteristics of ANY services on this Accessory\n        accessory.on(\"service-characteristic-change\" /* AccessoryEventTypes.SERVICE_CHARACTERISTIC_CHANGE */, function (change) { return _this.handleCharacteristicChangeEvent(accessory, change.service, change); });\n        accessory.on(\"service-configurationChange\" /* AccessoryEventTypes.SERVICE_CONFIGURATION_CHANGE */, this.enqueueConfigurationUpdate.bind(this));\n        accessory.on(\"characteristic-warning\" /* AccessoryEventTypes.CHARACTERISTIC_WARNING */, this.handleCharacteristicWarning.bind(this));\n        accessory.bridged = true;\n        accessory.bridge = this;\n        this.bridgedAccessories.push(accessory);\n        this.controllerStorage.linkAccessory(accessory); // init controllers of bridged accessory\n        if (!deferUpdate) {\n            this.enqueueConfigurationUpdate();\n        }\n        return accessory;\n    };\n    Accessory.prototype.addBridgedAccessories = function (accessories) {\n        var e_5, _a;\n        try {\n            for (var accessories_1 = tslib_1.__values(accessories), accessories_1_1 = accessories_1.next(); !accessories_1_1.done; accessories_1_1 = accessories_1.next()) {\n                var accessory = accessories_1_1.value;\n                this.addBridgedAccessory(accessory, true);\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (accessories_1_1 && !accessories_1_1.done && (_a = accessories_1.return)) _a.call(accessories_1);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n        this.enqueueConfigurationUpdate();\n    };\n    Accessory.prototype.removeBridgedAccessory = function (accessory, deferUpdate) {\n        if (deferUpdate === void 0) { deferUpdate = false; }\n        // check for UUID conflict\n        var accessoryIndex = this.bridgedAccessories.indexOf(accessory);\n        if (accessoryIndex === -1) {\n            throw new Error(\"Cannot find the bridged Accessory to remove.\");\n        }\n        this.bridgedAccessories.splice(accessoryIndex, 1);\n        accessory.bridged = false;\n        accessory.bridge = undefined;\n        accessory.removeAllListeners();\n        if (!deferUpdate) {\n            this.enqueueConfigurationUpdate();\n        }\n    };\n    Accessory.prototype.removeBridgedAccessories = function (accessories) {\n        var e_6, _a;\n        try {\n            for (var accessories_2 = tslib_1.__values(accessories), accessories_2_1 = accessories_2.next(); !accessories_2_1.done; accessories_2_1 = accessories_2.next()) {\n                var accessory = accessories_2_1.value;\n                this.removeBridgedAccessory(accessory, true);\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (accessories_2_1 && !accessories_2_1.done && (_a = accessories_2.return)) _a.call(accessories_2);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n        this.enqueueConfigurationUpdate();\n    };\n    Accessory.prototype.removeAllBridgedAccessories = function () {\n        for (var i = this.bridgedAccessories.length - 1; i >= 0; i--) {\n            this.removeBridgedAccessory(this.bridgedAccessories[i], true);\n        }\n        this.enqueueConfigurationUpdate();\n    };\n    Accessory.prototype.getCharacteristicByIID = function (iid) {\n        var e_7, _a;\n        try {\n            for (var _b = tslib_1.__values(this.services), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var service = _c.value;\n                var characteristic = service.getCharacteristicByIID(iid);\n                if (characteristic) {\n                    return characteristic;\n                }\n            }\n        }\n        catch (e_7_1) { e_7 = { error: e_7_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_7) throw e_7.error; }\n        }\n    };\n    Accessory.prototype.getAccessoryByAID = function (aid) {\n        if (this.aid === aid) {\n            return this;\n        }\n        return this.bridgedAccessories.find(function (value) { return value.aid === aid; });\n    };\n    Accessory.prototype.findCharacteristic = function (aid, iid) {\n        var accessory = this.getAccessoryByAID(aid);\n        return accessory && accessory.getCharacteristicByIID(iid);\n    };\n    // noinspection JSDeprecatedSymbols\n    /**\n     * Method is used to configure an old style CameraSource.\n     * The CameraSource API was fully replaced by the new Controller API used by {@link CameraController}.\n     * The {@link CameraStreamingDelegate} used by the CameraController is the equivalent to the old CameraSource.\n     *\n     * The new Controller API is much more refined and robust way of \"grouping\" services together.\n     * It especially is intended to fully support serialization/deserialization to/from persistent storage.\n     * This feature is also gained when using the old style CameraSource API.\n     * The {@link CameraStreamingDelegate} improves on the overall camera API though and provides some reworked\n     * type definitions and a refined callback interface to better signal errors to the requesting HomeKit device.\n     * It is advised to update to it.\n     *\n     * Full backwards compatibility is currently maintained. A legacy CameraSource will be wrapped into an Adapter.\n     * All legacy StreamControllers in the \"streamControllers\" property will be replaced by CameraRTPManagement instances.\n     * Any services in the \"services\" property which are one of the following are ignored:\n     *     - CameraRTPStreamManagement\n     *     - CameraOperatingMode\n     *     - CameraEventRecordingManagement\n     *\n     * @param cameraSource - The instance of the legacy camera source\n     * @deprecated please refer to the new {@link CameraController} API and {@link configureController}\n     */\n    Accessory.prototype.configureCameraSource = function (cameraSource) {\n        var _this = this;\n        if (cameraSource.streamControllers.length === 0) {\n            throw new Error(\"Malformed legacy CameraSource. Did not expose any StreamControllers!\");\n        }\n        var options = cameraSource.streamControllers[0].options; // grab options from one of the StreamControllers\n        var cameraControllerOptions = {\n            cameraStreamCount: cameraSource.streamControllers.length,\n            streamingOptions: options,\n            delegate: new camera_1.LegacyCameraSourceAdapter(cameraSource),\n        };\n        var cameraController = new controller_1.CameraController(cameraControllerOptions, true); // create CameraController in legacy mode\n        this.configureController(cameraController);\n        // we try here to be as good as possibly of keeping current behaviour\n        cameraSource.services.forEach(function (service) {\n            if (service.UUID === Service_1.Service.CameraRTPStreamManagement.UUID || service.UUID === Service_1.Service.CameraOperatingMode.UUID\n                || service.UUID === Service_1.Service.CameraRecordingManagement.UUID) {\n                return; // ignore those services, as they get replaced by the RTPStreamManagement\n            }\n            // all other services get added. We can't really control possibly linking to any of those ignored services\n            // so this is really only half-baked stuff.\n            _this.addService(service);\n        });\n        // replace stream controllers; basically only to still support the \"forceStop\" call\n        // noinspection JSDeprecatedSymbols\n        cameraSource.streamControllers = cameraController.streamManagements;\n        return cameraController; // return the reference for the controller (maybe this could be useful?)\n    };\n    /**\n     * This method is used to set up a new Controller for this accessory. See {@link Controller} for a more detailed\n     * explanation what a Controller is and what it is capable of.\n     *\n     * The controller can be passed as an instance of the class or as a constructor (without any necessary parameters)\n     * for a new Controller.\n     * Only one Controller of a given {@link ControllerIdentifier} can be configured for a given Accessory.\n     *\n     * When called, it will be checked if there are any services and persistent data the Controller (for the given\n     * {@link ControllerIdentifier}) can be restored from. Otherwise, the Controller will be created with new services.\n     *\n     *\n     * @param controllerConstructor - The Controller instance or constructor to the Controller with no required arguments.\n     */\n    Accessory.prototype.configureController = function (controllerConstructor) {\n        var _this = this;\n        var controller = typeof controllerConstructor === \"function\"\n            ? new controllerConstructor() // any custom constructor arguments should be passed before using .bind(...)\n            : controllerConstructor;\n        var id = controller.controllerId();\n        if (this.controllers[id]) {\n            throw new Error(\"A Controller with the type/id '\".concat(id, \"' was already added to the accessory \").concat(this.displayName));\n        }\n        var savedServiceMap = this.serializedControllers && this.serializedControllers[id];\n        var serviceMap;\n        if (savedServiceMap) { // we found data to restore from\n            var clonedServiceMap = (0, clone_1.clone)(savedServiceMap);\n            var updatedServiceMap = controller.initWithServices(savedServiceMap); // init controller with existing services\n            serviceMap = updatedServiceMap || savedServiceMap; // initWithServices could return an updated serviceMap, otherwise just use the existing one\n            if (updatedServiceMap) { // controller returned a ServiceMap and thus signaled an updated set of services\n                // clonedServiceMap is altered by this method, should not be touched again after this call (for the future people)\n                this.handleUpdatedControllerServiceMap(clonedServiceMap, updatedServiceMap);\n            }\n            controller.configureServices(); // let the controller setup all its handlers\n            // remove serialized data from our dictionary:\n            delete this.serializedControllers[id];\n            if (Object.entries(this.serializedControllers).length === 0) {\n                this.serializedControllers = undefined;\n            }\n        }\n        else {\n            serviceMap = controller.constructServices(); // let the controller create his services\n            controller.configureServices(); // let the controller setup all its handlers\n            Object.values(serviceMap).forEach(function (service) {\n                if (service && !_this.services.includes(service)) {\n                    _this.addService(service);\n                }\n            });\n        }\n        // --- init handlers and setup context ---\n        var context = {\n            controller: controller,\n            serviceMap: serviceMap,\n        };\n        if ((0, controller_1.isSerializableController)(controller)) {\n            this.controllerStorage.trackController(controller);\n        }\n        this.controllers[id] = context;\n        if (controller instanceof controller_1.CameraController) { // save CameraController for Snapshot handling\n            this.activeCameraController = controller;\n        }\n    };\n    /**\n     * This method will remove a given Controller from this accessory.\n     * The controller object will be restored to its initial state.\n     * This also means that any event handlers setup for the controller will be removed.\n     *\n     * @param controller - The controller which should be removed from the accessory.\n     */\n    Accessory.prototype.removeController = function (controller) {\n        var _this = this;\n        var id = controller.controllerId();\n        var storedController = this.controllers[id];\n        if (storedController) {\n            if (storedController.controller !== controller) {\n                throw new Error(\"[\" + this.displayName + \"] tried removing a controller with the id/type '\" + id +\n                    \"' though provided controller isn't the same instance that is registered!\");\n            }\n            if ((0, controller_1.isSerializableController)(controller)) {\n                // this will reset the state change delegate before we call handleControllerRemoved()\n                this.controllerStorage.untrackController(controller);\n            }\n            if (controller.handleFactoryReset) {\n                controller.handleFactoryReset();\n            }\n            controller.handleControllerRemoved();\n            delete this.controllers[id];\n            if (this.activeCameraController === controller) {\n                this.activeCameraController = undefined;\n            }\n            Object.values(storedController.serviceMap).forEach(function (service) {\n                if (service) {\n                    _this.removeService(service);\n                }\n            });\n        }\n        if (this.serializedControllers) {\n            delete this.serializedControllers[id];\n        }\n    };\n    Accessory.prototype.handleAccessoryUnpairedForControllers = function () {\n        var e_8, _a;\n        try {\n            for (var _b = tslib_1.__values(Object.values(this.controllers)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var context = _c.value;\n                var controller = context.controller;\n                if (controller.handleFactoryReset) { // if the controller implements handleFactoryReset, setup event handlers for this controller\n                    controller.handleFactoryReset();\n                }\n                if ((0, controller_1.isSerializableController)(controller)) {\n                    this.controllerStorage.purgeControllerData(controller);\n                }\n            }\n        }\n        catch (e_8_1) { e_8 = { error: e_8_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_8) throw e_8.error; }\n        }\n    };\n    Accessory.prototype.handleUpdatedControllerServiceMap = function (originalServiceMap, updatedServiceMap) {\n        var _this = this;\n        updatedServiceMap = (0, clone_1.clone)(updatedServiceMap); // clone it so we can alter it\n        Object.keys(originalServiceMap).forEach(function (name) {\n            var service = originalServiceMap[name];\n            var updatedService = updatedServiceMap[name];\n            if (service && updatedService) { // we check all names contained in both ServiceMaps for changes\n                delete originalServiceMap[name]; // delete from original ServiceMap, so it will only contain deleted services at the end\n                delete updatedServiceMap[name]; // delete from updated ServiceMap, so it will only contain added services at the end\n                if (service !== updatedService) {\n                    _this.removeService(service);\n                    _this.addService(updatedService);\n                }\n            }\n        });\n        // now originalServiceMap contains only deleted services and updateServiceMap only added services\n        Object.values(originalServiceMap).forEach(function (service) {\n            if (service) {\n                _this.removeService(service);\n            }\n        });\n        Object.values(updatedServiceMap).forEach(function (service) {\n            if (service) {\n                _this.addService(service);\n            }\n        });\n    };\n    Accessory.prototype.setupURI = function () {\n        if (this._setupURI) {\n            return this._setupURI;\n        }\n        (0, assert_1.default)(!!this._accessoryInfo, \"Cannot generate setupURI on an accessory that isn't published yet!\");\n        var buffer = Buffer.alloc(8);\n        var value_low = parseInt(this._accessoryInfo.pincode.replace(/-/g, \"\"), 10);\n        var value_high = this._accessoryInfo.category >> 1;\n        value_low |= 1 << 28; // Supports IP;\n        buffer.writeUInt32BE(value_low, 4);\n        if (this._accessoryInfo.category & 1) {\n            buffer[4] = buffer[4] | 1 << 7;\n        }\n        buffer.writeUInt32BE(value_high, 0);\n        var encodedPayload = (buffer.readUInt32BE(4) + (buffer.readUInt32BE(0) * 0x100000000)).toString(36).toUpperCase();\n        if (encodedPayload.length !== 9) {\n            for (var i = 0; i <= 9 - encodedPayload.length; i++) {\n                encodedPayload = \"0\" + encodedPayload;\n            }\n        }\n        this._setupURI = \"X-HM://\" + encodedPayload + this._setupID;\n        return this._setupURI;\n    };\n    /**\n     * This method is called right before the accessory is published. It should be used to check for common\n     * mistakes in Accessory structured, which may lead to HomeKit rejecting the accessory when pairing.\n     * If it is called on a bridge it will call this method for all bridged accessories.\n     */\n    Accessory.prototype.validateAccessory = function (mainAccessory) {\n        var _this = this;\n        var service = this.getService(Service_1.Service.AccessoryInformation);\n        if (!service) {\n            console.log(\"HAP-NodeJS WARNING: The accessory '\" + this.displayName + \"' is getting published without a AccessoryInformation service. \" +\n                \"This might prevent the accessory from being added to the Home app or leading to the accessory being unresponsive!\");\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var checkValue = function (name, value) {\n                if (!value) {\n                    console.log(\"HAP-NodeJS WARNING: The accessory '\" + _this.displayName + \"' is getting published with the characteristic '\" + name + \"'\" +\n                        \" (of the AccessoryInformation service) not having a value set. \" +\n                        \"This might prevent the accessory from being added to the Home App or leading to the accessory being unresponsive!\");\n                }\n            };\n            var model = service.getCharacteristic(Characteristic_1.Characteristic.Model).value;\n            var serialNumber = service.getCharacteristic(Characteristic_1.Characteristic.SerialNumber).value;\n            var firmwareRevision = service.getCharacteristic(Characteristic_1.Characteristic.FirmwareRevision).value;\n            var name = service.getCharacteristic(Characteristic_1.Characteristic.Name).value;\n            checkValue(\"Model\", model);\n            checkValue(\"SerialNumber\", serialNumber);\n            checkValue(\"FirmwareRevision\", firmwareRevision);\n            checkValue(\"Name\", name);\n        }\n        if (mainAccessory) {\n            // the main accessory which is advertised via bonjour must have a name with length <= 63 (limitation of DNS FQDN names)\n            (0, assert_1.default)(Buffer.from(this.displayName, \"utf8\").length <= 63, \"Accessory displayName cannot be longer than 63 bytes!\");\n        }\n        if (this.bridged) {\n            this.bridgedAccessories.forEach(function (accessory) { return accessory.validateAccessory(); });\n        }\n    };\n    /**\n     * Assigns aid/iid to ourselves, any Accessories we are bridging, and all associated Services+Characteristics. Uses\n     * the provided identifierCache to keep IDs stable.\n     * @private Private API\n     */\n    Accessory.prototype._assignIDs = function (identifierCache) {\n        var e_9, _a, e_10, _b;\n        // if we are responsible for our own identifierCache, start the expiration process\n        // also check weather we want to have an expiration process\n        if (this._identifierCache && this.shouldPurgeUnusedIDs) {\n            this._identifierCache.startTrackingUsage();\n        }\n        if (this.bridged) {\n            // This Accessory is bridged, so it must have an aid > 1. Use the provided identifierCache to\n            // fetch or assign one based on our UUID.\n            this.aid = identifierCache.getAID(this.UUID);\n        }\n        else {\n            // Since this Accessory is the server (as opposed to any Accessories that may be bridged behind us),\n            // we must have aid = 1\n            this.aid = 1;\n        }\n        try {\n            for (var _c = tslib_1.__values(this.services), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var service = _d.value;\n                if (this._isBridge) {\n                    service._assignIDs(identifierCache, this.UUID, 2000000000);\n                }\n                else {\n                    service._assignIDs(identifierCache, this.UUID);\n                }\n            }\n        }\n        catch (e_9_1) { e_9 = { error: e_9_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_9) throw e_9.error; }\n        }\n        try {\n            // now assign IDs for any Accessories we are bridging\n            for (var _e = tslib_1.__values(this.bridgedAccessories), _f = _e.next(); !_f.done; _f = _e.next()) {\n                var accessory = _f.value;\n                accessory._assignIDs(identifierCache);\n            }\n        }\n        catch (e_10_1) { e_10 = { error: e_10_1 }; }\n        finally {\n            try {\n                if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n            }\n            finally { if (e_10) throw e_10.error; }\n        }\n        // expire any now-unused cache keys (for Accessories, Services, or Characteristics\n        // that have been removed since the last call to assignIDs())\n        if (this._identifierCache) {\n            //Check weather we want to purge the unused ids\n            if (this.shouldPurgeUnusedIDs) {\n                this._identifierCache.stopTrackingUsageAndExpireUnused();\n            }\n            //Save in case we have new ones\n            this._identifierCache.save();\n        }\n    };\n    Accessory.prototype.disableUnusedIDPurge = function () {\n        this.shouldPurgeUnusedIDs = false;\n    };\n    Accessory.prototype.enableUnusedIDPurge = function () {\n        this.shouldPurgeUnusedIDs = true;\n    };\n    /**\n     * Manually purge the unused ids if you like, comes handy\n     * when you have disabled auto purge, so you can do it manually\n     */\n    Accessory.prototype.purgeUnusedIDs = function () {\n        //Cache the state of the purge mechanism and set it to true\n        var oldValue = this.shouldPurgeUnusedIDs;\n        this.shouldPurgeUnusedIDs = true;\n        //Reassign all ids\n        this._assignIDs(this._identifierCache);\n        // Revert the purge mechanism state\n        this.shouldPurgeUnusedIDs = oldValue;\n    };\n    /**\n     * Returns a JSON representation of this accessory suitable for delivering to HAP clients.\n     */\n    Accessory.prototype.toHAP = function (connection_1) {\n        return tslib_1.__awaiter(this, arguments, void 0, function (connection, contactGetHandlers) {\n            var accessory, accessories, _a, _b, _c, _d;\n            var _e;\n            if (contactGetHandlers === void 0) { contactGetHandlers = true; }\n            return tslib_1.__generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        (0, assert_1.default)(this.aid, \"aid cannot be undefined for accessory '\" + this.displayName + \"'\");\n                        (0, assert_1.default)(this.services.length, \"accessory '\" + this.displayName + \"' does not have any services!\");\n                        _e = {\n                            aid: this.aid\n                        };\n                        return [4 /*yield*/, Promise.all(this.services.map(function (service) { return service.toHAP(connection, contactGetHandlers); }))];\n                    case 1:\n                        accessory = (_e.services = _f.sent(),\n                            _e);\n                        accessories = [accessory];\n                        if (!!this.bridged) return [3 /*break*/, 3];\n                        _b = (_a = accessories.push).apply;\n                        _c = [accessories];\n                        _d = [[]];\n                        return [4 /*yield*/, Promise.all(this.bridgedAccessories\n                                .map(function (accessory) { return accessory.toHAP(connection, contactGetHandlers).then(function (value) { return value[0]; }); }))];\n                    case 2:\n                        _b.apply(_a, _c.concat([tslib_1.__spreadArray.apply(void 0, _d.concat([tslib_1.__read.apply(void 0, [_f.sent()]), false]))]));\n                        _f.label = 3;\n                    case 3: return [2 /*return*/, accessories];\n                }\n            });\n        });\n    };\n    /**\n     * Returns a JSON representation of this accessory without characteristic values.\n     */\n    Accessory.prototype.internalHAPRepresentation = function (assignIds) {\n        var e_11, _a;\n        if (assignIds === void 0) { assignIds = true; }\n        if (assignIds) {\n            this._assignIDs(this._identifierCache); // make sure our aid/iid's are all assigned\n        }\n        (0, assert_1.default)(this.aid, \"aid cannot be undefined for accessory '\" + this.displayName + \"'\");\n        (0, assert_1.default)(this.services.length, \"accessory '\" + this.displayName + \"' does not have any services!\");\n        var accessory = {\n            aid: this.aid,\n            services: this.services.map(function (service) { return service.internalHAPRepresentation(); }),\n        };\n        var accessories = [accessory];\n        if (!this.bridged) {\n            try {\n                for (var _b = tslib_1.__values(this.bridgedAccessories), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var accessory_1 = _c.value;\n                    accessories.push(accessory_1.internalHAPRepresentation(false)[0]);\n                }\n            }\n            catch (e_11_1) { e_11 = { error: e_11_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_11) throw e_11.error; }\n            }\n        }\n        return accessories;\n    };\n    /**\n     * Publishes this accessory on the local network for iOS clients to communicate with.\n     * - `info.username` - formatted as a MAC address, like `CC:22:3D:E3:CE:F6`, of this accessory.\n     *   Must be globally unique from all Accessories on your local network.\n     * - `info.pincode` - the 8-digit pin code for clients to use when pairing this Accessory.\n     *   Must be formatted as a string like `031-45-154`.\n     * - `info.category` - one of the values of the `Accessory.Category` enum, like `Accessory.Category.SWITCH`.\n     *   This is a hint to iOS clients about what \"type\" of Accessory this represents, so\n     *   that for instance an appropriate icon can be drawn for the user while adding a\n     *   new Accessory.\n     * @param {{\n     *   username: string;\n     *   pincode: string;\n     *   category: Accessory.Categories;\n     * }} info - Required info for publishing.\n     * @param {boolean} allowInsecureRequest - Will allow unencrypted and unauthenticated access to the http server\n     */\n    Accessory.prototype.publish = function (info, allowInsecureRequest) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var service, config, parsed, selectedAdvertiser, _a, _b, _c;\n            var _this = this;\n            var _d, _e, _f;\n            return tslib_1.__generator(this, function (_g) {\n                switch (_g.label) {\n                    case 0:\n                        if (this.bridged) {\n                            throw new Error(\"Can't publish in accessory which is bridged by another accessory. Bridged by \" + ((_d = this.bridge) === null || _d === void 0 ? void 0 : _d.displayName));\n                        }\n                        // noinspection JSDeprecatedSymbols\n                        if (!info.advertiser && info.useLegacyAdvertiser != null) {\n                            // noinspection JSDeprecatedSymbols\n                            info.advertiser = info.useLegacyAdvertiser ? \"bonjour-hap\" /* MDNSAdvertiser.BONJOUR */ : \"ciao\" /* MDNSAdvertiser.CIAO */;\n                            console.warn(\"DEPRECATED The PublishInfo.useLegacyAdvertiser option has been removed. \" +\n                                \"Please use the PublishInfo.advertiser property to enable \\\"ciao\\\" (useLegacyAdvertiser=false) \" +\n                                \"or \\\"bonjour-hap\\\" (useLegacyAdvertiser=true) mdns advertiser libraries!\");\n                        }\n                        // noinspection JSDeprecatedSymbols\n                        if (info.mdns && info.advertiser !== \"bonjour-hap\" /* MDNSAdvertiser.BONJOUR */) {\n                            console.log(\"DEPRECATED user supplied a custom 'mdns' option. This option is deprecated and ignored. \" +\n                                \"Please move to the new 'bind' option.\");\n                        }\n                        service = this.getService(Service_1.Service.ProtocolInformation);\n                        if (!service) {\n                            service = this.addService(Service_1.Service.ProtocolInformation); // add the protocol information service to the primary accessory\n                        }\n                        service.setCharacteristic(Characteristic_1.Characteristic.Version, Advertiser_1.CiaoAdvertiser.protocolVersionService);\n                        if (this.lastKnownUsername && this.lastKnownUsername !== info.username) { // username changed since last publish\n                            Accessory.cleanupAccessoryData(this.lastKnownUsername); // delete old Accessory data\n                        }\n                        if (!this.initialized && ((_e = info.addIdentifyingMaterial) !== null && _e !== void 0 ? _e : true)) {\n                            // adding some identifying material to our displayName if it's our first publish() call\n                            this.displayName = this.displayName + \" \" + crypto_1.default.createHash(\"sha512\")\n                                .update(info.username, \"utf8\")\n                                .digest(\"hex\").slice(0, 4).toUpperCase();\n                            this.getService(Service_1.Service.AccessoryInformation).updateCharacteristic(Characteristic_1.Characteristic.Name, this.displayName);\n                        }\n                        // attempt to load existing AccessoryInfo from disk\n                        this._accessoryInfo = AccessoryInfo_1.AccessoryInfo.load(info.username);\n                        // if we don't have one, create a new one.\n                        if (!this._accessoryInfo) {\n                            debug(\"[%s] Creating new AccessoryInfo for our HAP server\", this.displayName);\n                            this._accessoryInfo = AccessoryInfo_1.AccessoryInfo.create(info.username);\n                        }\n                        if (info.setupID) {\n                            this._setupID = info.setupID;\n                        }\n                        else if (this._accessoryInfo.setupID === undefined || this._accessoryInfo.setupID === \"\") {\n                            this._setupID = Accessory._generateSetupID();\n                        }\n                        else {\n                            this._setupID = this._accessoryInfo.setupID;\n                        }\n                        this._accessoryInfo.setupID = this._setupID;\n                        // make sure we have up-to-date values in AccessoryInfo, then save it in case they changed (or if we just created it)\n                        this._accessoryInfo.displayName = this.displayName;\n                        this._accessoryInfo.model = this.getService(Service_1.Service.AccessoryInformation).getCharacteristic(Characteristic_1.Characteristic.Model).value;\n                        this._accessoryInfo.category = info.category || 1 /* Categories.OTHER */;\n                        this._accessoryInfo.pincode = info.pincode;\n                        this._accessoryInfo.save();\n                        // create our IdentifierCache, so we can provide clients with stable aid/iid's\n                        this._identifierCache = IdentifierCache_1.IdentifierCache.load(info.username);\n                        // if we don't have one, create a new one.\n                        if (!this._identifierCache) {\n                            debug(\"[%s] Creating new IdentifierCache\", this.displayName);\n                            this._identifierCache = new IdentifierCache_1.IdentifierCache(info.username);\n                        }\n                        // If it's bridge and there are no accessories already assigned to the bridge\n                        // probably purge is not needed since it's going to delete all the ids\n                        // of accessories that might be added later. Useful when dynamically adding\n                        // accessories.\n                        if (this._isBridge && this.bridgedAccessories.length === 0) {\n                            this.disableUnusedIDPurge();\n                            this.controllerStorage.purgeUnidentifiedAccessoryData = false;\n                        }\n                        if (!this.initialized) { // controller storage is only loaded from disk the first time we publish!\n                            this.controllerStorage.load(info.username); // initializing controller data\n                        }\n                        // assign aid/iid\n                        this._assignIDs(this._identifierCache);\n                        config = this.internalHAPRepresentation(false);\n                        // TODO queue this check until about 5 seconds after startup, allowing some last changes after the publish call\n                        //   without constantly incrementing the current config number\n                        this._accessoryInfo.checkForCurrentConfigurationNumberIncrement(config, true);\n                        this.validateAccessory(true);\n                        parsed = Accessory.parseBindOption(info);\n                        selectedAdvertiser = (_f = info.advertiser) !== null && _f !== void 0 ? _f : \"bonjour-hap\" /* MDNSAdvertiser.BONJOUR */;\n                        _b = info.advertiser === \"avahi\" /* MDNSAdvertiser.AVAHI */;\n                        if (!_b) return [3 /*break*/, 2];\n                        return [4 /*yield*/, Advertiser_1.AvahiAdvertiser.isAvailable()];\n                    case 1:\n                        _b = !(_g.sent());\n                        _g.label = 2;\n                    case 2:\n                        _a = (_b);\n                        if (_a) return [3 /*break*/, 5];\n                        _c = info.advertiser === \"resolved\" /* MDNSAdvertiser.RESOLVED */;\n                        if (!_c) return [3 /*break*/, 4];\n                        return [4 /*yield*/, Advertiser_1.ResolvedAdvertiser.isAvailable()];\n                    case 3:\n                        _c = !(_g.sent());\n                        _g.label = 4;\n                    case 4:\n                        _a = (_c);\n                        _g.label = 5;\n                    case 5:\n                        if (_a) {\n                            console.error(\"[\".concat(this.displayName, \"] The selected advertiser, \\\"\").concat(info.advertiser, \"\\\", isn't available on this platform. \") +\n                                \"Reverting to \\\"\".concat(\"bonjour-hap\" /* MDNSAdvertiser.BONJOUR */, \"\\\"\"));\n                            selectedAdvertiser = \"bonjour-hap\" /* MDNSAdvertiser.BONJOUR */;\n                        }\n                        switch (selectedAdvertiser) {\n                            case \"ciao\" /* MDNSAdvertiser.CIAO */:\n                                this._advertiser = new Advertiser_1.CiaoAdvertiser(this._accessoryInfo, {\n                                    interface: parsed.advertiserAddress,\n                                }, {\n                                    restrictedAddresses: parsed.serviceRestrictedAddress,\n                                    disabledIpv6: parsed.serviceDisableIpv6,\n                                });\n                                break;\n                            case \"bonjour-hap\" /* MDNSAdvertiser.BONJOUR */:\n                                // noinspection JSDeprecatedSymbols\n                                this._advertiser = new Advertiser_1.BonjourHAPAdvertiser(this._accessoryInfo, info.mdns, {\n                                    restrictedAddresses: parsed.serviceRestrictedAddress,\n                                    disabledIpv6: parsed.serviceDisableIpv6,\n                                });\n                                break;\n                            case \"avahi\" /* MDNSAdvertiser.AVAHI */:\n                                this._advertiser = new Advertiser_1.AvahiAdvertiser(this._accessoryInfo);\n                                break;\n                            case \"resolved\" /* MDNSAdvertiser.RESOLVED */:\n                                this._advertiser = new Advertiser_1.ResolvedAdvertiser(this._accessoryInfo);\n                                break;\n                            default:\n                                throw new Error(\"Unsupported advertiser setting: '\" + info.advertiser + \"'\");\n                        }\n                        this._advertiser.on(\"updated-name\" /* AdvertiserEvent.UPDATED_NAME */, function (name) {\n                            _this.displayName = name;\n                            if (_this._accessoryInfo) {\n                                _this._accessoryInfo.displayName = name;\n                                _this._accessoryInfo.save();\n                            }\n                            // bonjour service name MUST match the name in the accessory information service\n                            _this.getService(Service_1.Service.AccessoryInformation)\n                                .updateCharacteristic(Characteristic_1.Characteristic.Name, name);\n                        });\n                        // create our HAP server which handles all communication between iOS devices and us\n                        this._server = new HAPServer_1.HAPServer(this._accessoryInfo);\n                        this._server.allowInsecureRequest = !!allowInsecureRequest;\n                        this._server.on(\"listening\" /* HAPServerEventTypes.LISTENING */, this.onListening.bind(this));\n                        this._server.on(\"identify\" /* HAPServerEventTypes.IDENTIFY */, this.identificationRequest.bind(this, false));\n                        this._server.on(\"pair\" /* HAPServerEventTypes.PAIR */, this.handleInitialPairSetupFinished.bind(this));\n                        this._server.on(\"add-pairing\" /* HAPServerEventTypes.ADD_PAIRING */, this.handleAddPairing.bind(this));\n                        this._server.on(\"remove-pairing\" /* HAPServerEventTypes.REMOVE_PAIRING */, this.handleRemovePairing.bind(this));\n                        this._server.on(\"list-pairings\" /* HAPServerEventTypes.LIST_PAIRINGS */, this.handleListPairings.bind(this));\n                        this._server.on(\"accessories\" /* HAPServerEventTypes.ACCESSORIES */, this.handleAccessories.bind(this));\n                        this._server.on(\"get-characteristics\" /* HAPServerEventTypes.GET_CHARACTERISTICS */, this.handleGetCharacteristics.bind(this));\n                        this._server.on(\"set-characteristics\" /* HAPServerEventTypes.SET_CHARACTERISTICS */, this.handleSetCharacteristics.bind(this));\n                        this._server.on(\"connection-closed\" /* HAPServerEventTypes.CONNECTION_CLOSED */, this.handleHAPConnectionClosed.bind(this));\n                        this._server.on(\"request-resource\" /* HAPServerEventTypes.REQUEST_RESOURCE */, this.handleResource.bind(this));\n                        this._server.listen(info.port, parsed.serverAddress);\n                        this.initialized = true;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Removes this Accessory from the local network\n     * Accessory object will no longer valid after invoking this method\n     * Trying to invoke publish() on the object will result undefined behavior\n     */\n    Accessory.prototype.destroy = function () {\n        var promise = this.unpublish();\n        if (this._accessoryInfo) {\n            Accessory.cleanupAccessoryData(this._accessoryInfo.username);\n            this._accessoryInfo = undefined;\n            this._identifierCache = undefined;\n            this.controllerStorage = new ControllerStorage_1.ControllerStorage(this);\n        }\n        this.removeAllListeners();\n        return promise;\n    };\n    Accessory.prototype.unpublish = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this._server) {\n                            this._server.destroy();\n                            this._server = undefined;\n                        }\n                        if (!this._advertiser) return [3 /*break*/, 2];\n                        // noinspection JSIgnoredPromiseFromCall\n                        return [4 /*yield*/, this._advertiser.destroy()];\n                    case 1:\n                        // noinspection JSIgnoredPromiseFromCall\n                        _a.sent();\n                        this._advertiser = undefined;\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Accessory.prototype.enqueueConfigurationUpdate = function () {\n        var _this = this;\n        if (this.configurationChangeDebounceTimeout) {\n            return; // already enqueued\n        }\n        this.configurationChangeDebounceTimeout = setTimeout(function () {\n            var _a;\n            _this.configurationChangeDebounceTimeout = undefined;\n            if (_this._advertiser && _this._advertiser) {\n                // get our accessory information in HAP format and determine if our configuration (that is, our\n                // Accessories/Services/Characteristics) has changed since the last time we were published. make\n                // sure to omit actual values since these are not part of the \"configuration\".\n                var config = _this.internalHAPRepresentation(); // TODO ensure this stuff is ordered\n                if ((_a = _this._accessoryInfo) === null || _a === void 0 ? void 0 : _a.checkForCurrentConfigurationNumberIncrement(config)) {\n                    _this._advertiser.updateAdvertisement();\n                }\n            }\n        }, 1000);\n        this.configurationChangeDebounceTimeout.unref();\n        // 1s is fine, HomeKit is built that with configuration updates no iid or aid conflicts occur.\n        // Thus, the only thing happening when the txt update arrives late is already removed accessories/services\n        // not responding or new accessories/services not yet shown\n    };\n    Accessory.prototype.onListening = function (port, hostname) {\n        var _this = this;\n        (0, assert_1.default)(this._advertiser, \"Advertiser wasn't created at onListening!\");\n        // the HAP server is listening, so we can now start advertising our presence.\n        this._advertiser.initPort(port);\n        this._advertiser.startAdvertising()\n            .then(function () { return _this.emit(\"advertised\" /* AccessoryEventTypes.ADVERTISED */); })\n            .catch(function (reason) {\n            console.error(\"Could not create mDNS advertisement. The HAP-Server won't be discoverable: \" + reason);\n            if (reason.stack) {\n                debug(\"Detailed error: \" + reason.stack);\n            }\n        });\n        this.emit(\"listening\" /* AccessoryEventTypes.LISTENING */, port, hostname);\n    };\n    Accessory.prototype.handleInitialPairSetupFinished = function (username, publicKey, callback) {\n        debug(\"[%s] Paired with client %s\", this.displayName, username);\n        this._accessoryInfo && this._accessoryInfo.addPairedClient(username, publicKey, 1 /* PermissionTypes.ADMIN */);\n        this._accessoryInfo && this._accessoryInfo.save();\n        // update our advertisement, so it can pick up on the paired status of AccessoryInfo\n        this._advertiser && this._advertiser.updateAdvertisement();\n        callback();\n        this.emit(\"paired\" /* AccessoryEventTypes.PAIRED */);\n    };\n    Accessory.prototype.handleAddPairing = function (connection, username, publicKey, permission, callback) {\n        if (!this._accessoryInfo) {\n            callback(6 /* TLVErrorCode.UNAVAILABLE */);\n            return;\n        }\n        if (!this._accessoryInfo.hasAdminPermissions(connection.username)) {\n            callback(2 /* TLVErrorCode.AUTHENTICATION */);\n            return;\n        }\n        var existingKey = this._accessoryInfo.getClientPublicKey(username);\n        if (existingKey) {\n            if (existingKey.toString() !== publicKey.toString()) {\n                callback(1 /* TLVErrorCode.UNKNOWN */);\n                return;\n            }\n            this._accessoryInfo.updatePermission(username, permission);\n        }\n        else {\n            this._accessoryInfo.addPairedClient(username, publicKey, permission);\n        }\n        this._accessoryInfo.save();\n        // there should be no need to update advertisement\n        callback(0);\n    };\n    Accessory.prototype.handleRemovePairing = function (connection, username, callback) {\n        var e_12, _a;\n        if (!this._accessoryInfo) {\n            callback(6 /* TLVErrorCode.UNAVAILABLE */);\n            return;\n        }\n        if (!this._accessoryInfo.hasAdminPermissions(connection.username)) {\n            callback(2 /* TLVErrorCode.AUTHENTICATION */);\n            return;\n        }\n        this._accessoryInfo.removePairedClient(connection, username);\n        this._accessoryInfo.save();\n        callback(0); // first of all ensure the pairing is removed before we advertise availability again\n        if (!this._accessoryInfo.paired()) {\n            this._advertiser && this._advertiser.updateAdvertisement();\n            this.emit(\"unpaired\" /* AccessoryEventTypes.UNPAIRED */);\n            this.handleAccessoryUnpairedForControllers();\n            try {\n                for (var _b = tslib_1.__values(this.bridgedAccessories), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var accessory = _c.value;\n                    accessory.handleAccessoryUnpairedForControllers();\n                }\n            }\n            catch (e_12_1) { e_12 = { error: e_12_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_12) throw e_12.error; }\n            }\n        }\n    };\n    Accessory.prototype.handleListPairings = function (connection, callback) {\n        if (!this._accessoryInfo) {\n            callback(6 /* TLVErrorCode.UNAVAILABLE */);\n            return;\n        }\n        if (!this._accessoryInfo.hasAdminPermissions(connection.username)) {\n            callback(2 /* TLVErrorCode.AUTHENTICATION */);\n            return;\n        }\n        callback(0, this._accessoryInfo.listPairings());\n    };\n    Accessory.prototype.handleAccessories = function (connection, callback) {\n        var _this = this;\n        this._assignIDs(this._identifierCache); // make sure our aid/iid's are all assigned\n        var now = Date.now();\n        var contactGetHandlers = now - this.lastAccessoriesRequest > 5000; // we query the latest value if last /accessories was more than 5s ago\n        this.lastAccessoriesRequest = now;\n        this.toHAP(connection, contactGetHandlers).then(function (value) {\n            callback(undefined, {\n                accessories: value,\n            });\n        }, function (reason) {\n            console.error(\"[\" + _this.displayName + \"] /accessories request error with: \" + reason.stack);\n            callback({ httpCode: 500 /* HAPHTTPCode.INTERNAL_SERVER_ERROR */, status: -70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */ });\n        });\n    };\n    Accessory.prototype.handleGetCharacteristics = function (connection, request, callback) {\n        var e_13, _a;\n        var _this = this;\n        var characteristics = [];\n        var response = { characteristics: characteristics };\n        var missingCharacteristics = new Set(request.ids.map(function (id) { return id.aid + \".\" + id.iid; }));\n        if (missingCharacteristics.size !== request.ids.length) {\n            // if those sizes differ, we have duplicates and can't properly handle that\n            callback({ httpCode: 422 /* HAPHTTPCode.UNPROCESSABLE_ENTITY */, status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ });\n            return;\n        }\n        var timeout = setTimeout(function () {\n            var e_14, _a;\n            try {\n                for (var missingCharacteristics_1 = tslib_1.__values(missingCharacteristics), missingCharacteristics_1_1 = missingCharacteristics_1.next(); !missingCharacteristics_1_1.done; missingCharacteristics_1_1 = missingCharacteristics_1.next()) {\n                    var id = missingCharacteristics_1_1.value;\n                    var split = id.split(\".\");\n                    var aid = parseInt(split[0], 10);\n                    var iid = parseInt(split[1], 10);\n                    var accessory = _this.getAccessoryByAID(aid);\n                    var characteristic = accessory.getCharacteristicByIID(iid);\n                    _this.sendCharacteristicWarning(characteristic, \"slow-read\" /* CharacteristicWarningType.SLOW_READ */, \"The read handler for the characteristic '\" +\n                        characteristic.displayName + \"' on the accessory '\" + accessory.displayName + \"' was slow to respond!\");\n                }\n            }\n            catch (e_14_1) { e_14 = { error: e_14_1 }; }\n            finally {\n                try {\n                    if (missingCharacteristics_1_1 && !missingCharacteristics_1_1.done && (_a = missingCharacteristics_1.return)) _a.call(missingCharacteristics_1);\n                }\n                finally { if (e_14) throw e_14.error; }\n            }\n            // after a total of 10s we do no longer wait for a request to appear and just return status code timeout\n            timeout = setTimeout(function () {\n                var e_15, _a;\n                timeout = undefined;\n                try {\n                    for (var missingCharacteristics_2 = tslib_1.__values(missingCharacteristics), missingCharacteristics_2_1 = missingCharacteristics_2.next(); !missingCharacteristics_2_1.done; missingCharacteristics_2_1 = missingCharacteristics_2.next()) {\n                        var id = missingCharacteristics_2_1.value;\n                        var split = id.split(\".\");\n                        var aid = parseInt(split[0], 10);\n                        var iid = parseInt(split[1], 10);\n                        var accessory = _this.getAccessoryByAID(aid);\n                        var characteristic = accessory.getCharacteristicByIID(iid);\n                        _this.sendCharacteristicWarning(characteristic, \"timeout-read\" /* CharacteristicWarningType.TIMEOUT_READ */, \"The read handler for the characteristic '\" +\n                            characteristic.displayName + \"' on the accessory '\" + accessory.displayName + \"' didn't respond at all!. \" +\n                            \"Please check that you properly call the callback!\");\n                        characteristics.push({\n                            aid: aid,\n                            iid: iid,\n                            status: -70408 /* HAPStatus.OPERATION_TIMED_OUT */,\n                        });\n                    }\n                }\n                catch (e_15_1) { e_15 = { error: e_15_1 }; }\n                finally {\n                    try {\n                        if (missingCharacteristics_2_1 && !missingCharacteristics_2_1.done && (_a = missingCharacteristics_2.return)) _a.call(missingCharacteristics_2);\n                    }\n                    finally { if (e_15) throw e_15.error; }\n                }\n                missingCharacteristics.clear();\n                callback(undefined, response);\n            }, Accessory.TIMEOUT_AFTER_WARNING);\n            timeout.unref();\n        }, Accessory.TIMEOUT_WARNING);\n        timeout.unref();\n        var _loop_1 = function (id) {\n            var name = id.aid + \".\" + id.iid;\n            this_1.handleCharacteristicRead(connection, id, request).then(function (value) {\n                return tslib_1.__assign({ aid: id.aid, iid: id.iid }, value);\n            }, function (reason) {\n                console.error(\"[\".concat(_this.displayName, \"] Read request for characteristic \").concat(name, \" encountered an error: \").concat(reason.stack));\n                return {\n                    aid: id.aid,\n                    iid: id.iid,\n                    status: -70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */,\n                };\n            }).then(function (value) {\n                if (!timeout) {\n                    return; // if timeout is undefined, response was already sent out\n                }\n                missingCharacteristics.delete(name);\n                characteristics.push(value);\n                if (missingCharacteristics.size === 0) {\n                    if (timeout) {\n                        clearTimeout(timeout);\n                        timeout = undefined;\n                    }\n                    callback(undefined, response);\n                }\n            });\n        };\n        var this_1 = this;\n        try {\n            for (var _b = tslib_1.__values(request.ids), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var id = _c.value;\n                _loop_1(id);\n            }\n        }\n        catch (e_13_1) { e_13 = { error: e_13_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_13) throw e_13.error; }\n        }\n    };\n    Accessory.prototype.handleCharacteristicRead = function (connection, id, request) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var characteristic, verifiable;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                characteristic = this.findCharacteristic(id.aid, id.iid);\n                if (!characteristic) {\n                    debug(\"[%s] Could not find a Characteristic with aid of %s and iid of %s\", this.displayName, id.aid, id.iid);\n                    return [2 /*return*/, { status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ }];\n                }\n                if (!characteristic.props.perms.includes(\"pr\" /* Perms.PAIRED_READ */)) { // check if read is allowed for this characteristic\n                    debug(\"[%s] Tried reading from characteristic which does not allow reading (aid of %s and iid of %s)\", this.displayName, id.aid, id.iid);\n                    return [2 /*return*/, { status: -70405 /* HAPStatus.WRITE_ONLY_CHARACTERISTIC */ }];\n                }\n                if (characteristic.props.adminOnlyAccess && characteristic.props.adminOnlyAccess.includes(0 /* Access.READ */)) {\n                    verifiable = this._accessoryInfo && connection.username;\n                    if (!verifiable) {\n                        debug(\"[%s] Could not verify admin permissions for Characteristic which requires admin permissions for reading (aid of %s and iid of %s)\", this.displayName, id.aid, id.iid);\n                    }\n                    if (!verifiable || !this._accessoryInfo.hasAdminPermissions(connection.username)) {\n                        return [2 /*return*/, { status: -70401 /* HAPStatus.INSUFFICIENT_PRIVILEGES */ }];\n                    }\n                }\n                return [2 /*return*/, characteristic.handleGetRequest(connection).then(function (value) {\n                        value = (0, request_util_1.formatOutgoingCharacteristicValue)(value, characteristic.props);\n                        debug(\"[%s] Got Characteristic \\\"%s\\\" value: \\\"%s\\\"\", _this.displayName, characteristic.displayName, value);\n                        var data = {\n                            value: value == null ? null : value,\n                        };\n                        if (request.includeMeta) {\n                            data.format = characteristic.props.format;\n                            data.unit = characteristic.props.unit;\n                            data.minValue = characteristic.props.minValue;\n                            data.maxValue = characteristic.props.maxValue;\n                            data.minStep = characteristic.props.minStep;\n                            data.maxLen = characteristic.props.maxLen || characteristic.props.maxDataLen;\n                        }\n                        if (request.includePerms) {\n                            data.perms = characteristic.props.perms;\n                        }\n                        if (request.includeType) {\n                            data.type = (0, uuid_1.toShortForm)(characteristic.UUID);\n                        }\n                        if (request.includeEvent) {\n                            data.ev = connection.hasEventNotifications(id.aid, id.iid);\n                        }\n                        return data;\n                    }, function (reason) {\n                        // @ts-expect-error: preserveConstEnums compiler option\n                        debug(\"[%s] Error getting value for characteristic \\\"%s\\\": %s\", _this.displayName, characteristic.displayName, HAPServer_1.HAPStatus[reason]);\n                        return { status: reason };\n                    })];\n            });\n        });\n    };\n    Accessory.prototype.handleSetCharacteristics = function (connection, writeRequest, callback) {\n        var e_16, _a;\n        var _this = this;\n        debug(\"[%s] Processing characteristic set: %s\", this.displayName, JSON.stringify(writeRequest));\n        var writeState = 0 /* WriteRequestState.REGULAR_REQUEST */;\n        if (writeRequest.pid !== undefined) { // check for timed writes\n            if (connection.timedWritePid === writeRequest.pid) {\n                writeState = 1 /* WriteRequestState.TIMED_WRITE_AUTHENTICATED */;\n                clearTimeout(connection.timedWriteTimeout);\n                connection.timedWritePid = undefined;\n                connection.timedWriteTimeout = undefined;\n                debug(\"[%s] Timed write request got acknowledged for pid %d\", this.displayName, writeRequest.pid);\n            }\n            else {\n                writeState = 2 /* WriteRequestState.TIMED_WRITE_REJECTED */;\n                debug(\"[%s] TTL for timed write request has probably expired for pid %d\", this.displayName, writeRequest.pid);\n            }\n        }\n        var characteristics = [];\n        var response = { characteristics: characteristics };\n        var missingCharacteristics = new Set(writeRequest.characteristics\n            .map(function (characteristic) { return characteristic.aid + \".\" + characteristic.iid; }));\n        if (missingCharacteristics.size !== writeRequest.characteristics.length) {\n            // if those sizes differ, we have duplicates and can't properly handle that\n            callback({ httpCode: 422 /* HAPHTTPCode.UNPROCESSABLE_ENTITY */, status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ });\n            return;\n        }\n        var timeout = setTimeout(function () {\n            var e_17, _a;\n            try {\n                for (var missingCharacteristics_3 = tslib_1.__values(missingCharacteristics), missingCharacteristics_3_1 = missingCharacteristics_3.next(); !missingCharacteristics_3_1.done; missingCharacteristics_3_1 = missingCharacteristics_3.next()) {\n                    var id = missingCharacteristics_3_1.value;\n                    var split = id.split(\".\");\n                    var aid = parseInt(split[0], 10);\n                    var iid = parseInt(split[1], 10);\n                    var accessory = _this.getAccessoryByAID(aid);\n                    var characteristic = accessory.getCharacteristicByIID(iid);\n                    _this.sendCharacteristicWarning(characteristic, \"slow-write\" /* CharacteristicWarningType.SLOW_WRITE */, \"The write handler for the characteristic '\" +\n                        characteristic.displayName + \"' on the accessory '\" + accessory.displayName + \"' was slow to respond!\");\n                }\n            }\n            catch (e_17_1) { e_17 = { error: e_17_1 }; }\n            finally {\n                try {\n                    if (missingCharacteristics_3_1 && !missingCharacteristics_3_1.done && (_a = missingCharacteristics_3.return)) _a.call(missingCharacteristics_3);\n                }\n                finally { if (e_17) throw e_17.error; }\n            }\n            // after a total of 10s we do no longer wait for a request to appear and just return status code timeout\n            timeout = setTimeout(function () {\n                var e_18, _a;\n                timeout = undefined;\n                try {\n                    for (var missingCharacteristics_4 = tslib_1.__values(missingCharacteristics), missingCharacteristics_4_1 = missingCharacteristics_4.next(); !missingCharacteristics_4_1.done; missingCharacteristics_4_1 = missingCharacteristics_4.next()) {\n                        var id = missingCharacteristics_4_1.value;\n                        var split = id.split(\".\");\n                        var aid = parseInt(split[0], 10);\n                        var iid = parseInt(split[1], 10);\n                        var accessory = _this.getAccessoryByAID(aid);\n                        var characteristic = accessory.getCharacteristicByIID(iid);\n                        _this.sendCharacteristicWarning(characteristic, \"timeout-write\" /* CharacteristicWarningType.TIMEOUT_WRITE */, \"The write handler for the characteristic '\" +\n                            characteristic.displayName + \"' on the accessory '\" + accessory.displayName + \"' didn't respond at all!. \" +\n                            \"Please check that you properly call the callback!\");\n                        characteristics.push({\n                            aid: aid,\n                            iid: iid,\n                            status: -70408 /* HAPStatus.OPERATION_TIMED_OUT */,\n                        });\n                    }\n                }\n                catch (e_18_1) { e_18 = { error: e_18_1 }; }\n                finally {\n                    try {\n                        if (missingCharacteristics_4_1 && !missingCharacteristics_4_1.done && (_a = missingCharacteristics_4.return)) _a.call(missingCharacteristics_4);\n                    }\n                    finally { if (e_18) throw e_18.error; }\n                }\n                missingCharacteristics.clear();\n                callback(undefined, response);\n            }, Accessory.TIMEOUT_AFTER_WARNING);\n            timeout.unref();\n        }, Accessory.TIMEOUT_WARNING);\n        timeout.unref();\n        var _loop_2 = function (data) {\n            var name = data.aid + \".\" + data.iid;\n            this_2.handleCharacteristicWrite(connection, data, writeState).then(function (value) {\n                return tslib_1.__assign({ aid: data.aid, iid: data.iid }, value);\n            }, function (reason) {\n                console.error(\"[\".concat(_this.displayName, \"] Write request for characteristic \").concat(name, \" encountered an error: \").concat(reason.stack));\n                return {\n                    aid: data.aid,\n                    iid: data.iid,\n                    status: -70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */,\n                };\n            }).then(function (value) {\n                if (!timeout) {\n                    return; // if timeout is undefined, response was already sent out\n                }\n                missingCharacteristics.delete(name);\n                characteristics.push(value);\n                if (missingCharacteristics.size === 0) { // if everything returned send the response\n                    if (timeout) {\n                        clearTimeout(timeout);\n                        timeout = undefined;\n                    }\n                    callback(undefined, response);\n                }\n            });\n        };\n        var this_2 = this;\n        try {\n            for (var _b = tslib_1.__values(writeRequest.characteristics), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var data = _c.value;\n                _loop_2(data);\n            }\n        }\n        catch (e_16_1) { e_16 = { error: e_16_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_16) throw e_16.error; }\n        }\n    };\n    Accessory.prototype.handleCharacteristicWrite = function (connection, data, writeState) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var characteristic, verifiable, notificationsEnabled, verifiable, allowWrite;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                characteristic = this.findCharacteristic(data.aid, data.iid);\n                if (!characteristic) {\n                    debug(\"[%s] Could not find a Characteristic with aid of %s and iid of %s\", this.displayName, data.aid, data.iid);\n                    return [2 /*return*/, { status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ }];\n                }\n                if (writeState === 2 /* WriteRequestState.TIMED_WRITE_REJECTED */) {\n                    return [2 /*return*/, { status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ }];\n                }\n                if (data.ev == null && data.value == null) {\n                    return [2 /*return*/, { status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ }];\n                }\n                if (data.ev != null) { // register/unregister event notifications\n                    if (!characteristic.props.perms.includes(\"ev\" /* Perms.NOTIFY */)) { // check if notify is allowed for this characteristic\n                        debug(\"[%s] Tried %s notifications for Characteristic which does not allow notify (aid of %s and iid of %s)\", this.displayName, data.ev ? \"enabling\" : \"disabling\", data.aid, data.iid);\n                        return [2 /*return*/, { status: -70406 /* HAPStatus.NOTIFICATION_NOT_SUPPORTED */ }];\n                    }\n                    if (characteristic.props.adminOnlyAccess && characteristic.props.adminOnlyAccess.includes(2 /* Access.NOTIFY */)) {\n                        verifiable = connection.username && this._accessoryInfo;\n                        if (!verifiable) {\n                            debug(\"[%s] Could not verify admin permissions for Characteristic which requires admin permissions for notify (aid of %s and iid of %s)\", this.displayName, data.aid, data.iid);\n                        }\n                        if (!verifiable || !this._accessoryInfo.hasAdminPermissions(connection.username)) {\n                            return [2 /*return*/, { status: -70401 /* HAPStatus.INSUFFICIENT_PRIVILEGES */ }];\n                        }\n                    }\n                    notificationsEnabled = connection.hasEventNotifications(data.aid, data.iid);\n                    if (data.ev && !notificationsEnabled) {\n                        connection.enableEventNotifications(data.aid, data.iid);\n                        characteristic.subscribe();\n                        debug(\"[%s] Registered Characteristic \\\"%s\\\" on \\\"%s\\\" for events\", connection.remoteAddress, characteristic.displayName, this.displayName);\n                    }\n                    else if (!data.ev && notificationsEnabled) {\n                        characteristic.unsubscribe();\n                        connection.disableEventNotifications(data.aid, data.iid);\n                        debug(\"[%s] Unregistered Characteristic \\\"%s\\\" on \\\"%s\\\" for events\", connection.remoteAddress, characteristic.displayName, this.displayName);\n                    }\n                    // response is returned below in the else block\n                }\n                if (data.value != null) {\n                    if (!characteristic.props.perms.includes(\"pw\" /* Perms.PAIRED_WRITE */)) { // check if write is allowed for this characteristic\n                        debug(\"[%s] Tried writing to Characteristic which does not allow writing (aid of %s and iid of %s)\", this.displayName, data.aid, data.iid);\n                        return [2 /*return*/, { status: -70404 /* HAPStatus.READ_ONLY_CHARACTERISTIC */ }];\n                    }\n                    if (characteristic.props.adminOnlyAccess && characteristic.props.adminOnlyAccess.includes(1 /* Access.WRITE */)) {\n                        verifiable = connection.username && this._accessoryInfo;\n                        if (!verifiable) {\n                            debug(\"[%s] Could not verify admin permissions for Characteristic which requires admin permissions for write (aid of %s and iid of %s)\", this.displayName, data.aid, data.iid);\n                        }\n                        if (!verifiable || !this._accessoryInfo.hasAdminPermissions(connection.username)) {\n                            return [2 /*return*/, { status: -70401 /* HAPStatus.INSUFFICIENT_PRIVILEGES */ }];\n                        }\n                    }\n                    if (characteristic.props.perms.includes(\"aa\" /* Perms.ADDITIONAL_AUTHORIZATION */) && characteristic.additionalAuthorizationHandler) {\n                        allowWrite = void 0;\n                        try {\n                            allowWrite = characteristic.additionalAuthorizationHandler(data.authData);\n                        }\n                        catch (error) {\n                            console.warn(\"[\" + this.displayName + \"] Additional authorization handler has thrown an error when checking authData: \" + error.stack);\n                            allowWrite = false;\n                        }\n                        if (!allowWrite) {\n                            return [2 /*return*/, { status: -70411 /* HAPStatus.INSUFFICIENT_AUTHORIZATION */ }];\n                        }\n                    }\n                    if (characteristic.props.perms.includes(\"tw\" /* Perms.TIMED_WRITE */) && writeState !== 1 /* WriteRequestState.TIMED_WRITE_AUTHENTICATED */) {\n                        debug(\"[%s] Tried writing to a timed write only Characteristic without properly preparing (iid of %s and aid of %s)\", this.displayName, data.aid, data.iid);\n                        return [2 /*return*/, { status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ }];\n                    }\n                    return [2 /*return*/, characteristic.handleSetRequest(data.value, connection).then(function (value) {\n                            debug(\"[%s] Setting Characteristic \\\"%s\\\" to value %s\", _this.displayName, characteristic.displayName, data.value);\n                            return {\n                                // if write response is requests and value is provided, return that\n                                value: data.r && value ? (0, request_util_1.formatOutgoingCharacteristicValue)(value, characteristic.props) : undefined,\n                                status: 0 /* HAPStatus.SUCCESS */,\n                            };\n                        }, function (status) {\n                            // @ts-expect-error: forceConsistentCasingInFileNames compiler option\n                            debug(\"[%s] Error setting Characteristic \\\"%s\\\" to value %s: \", _this.displayName, characteristic.displayName, data.value, HAPServer_1.HAPStatus[status]);\n                            return { status: status };\n                        })];\n                }\n                return [2 /*return*/, { status: 0 /* HAPStatus.SUCCESS */ }];\n            });\n        });\n    };\n    Accessory.prototype.handleResource = function (data, callback) {\n        var _a;\n        if (data[\"resource-type\"] === \"image\" /* ResourceRequestType.IMAGE */) {\n            var aid = data.aid; // aid is optionally supplied by HomeKit (for example when camera is bridged, multiple cams, etc)\n            var accessory = undefined;\n            var controller = undefined;\n            if (aid) {\n                accessory = this.getAccessoryByAID(aid);\n                if (accessory && accessory.activeCameraController) {\n                    controller = accessory.activeCameraController;\n                }\n            }\n            else if (this.activeCameraController) { // aid was not supplied, check if this accessory is a camera\n                // eslint-disable-next-line @typescript-eslint/no-this-alias\n                accessory = this;\n                controller = this.activeCameraController;\n            }\n            if (!controller) {\n                debug(\"[%s] received snapshot request though no camera controller was associated!\");\n                callback({ httpCode: 404 /* HAPHTTPCode.NOT_FOUND */, status: -70409 /* HAPStatus.RESOURCE_DOES_NOT_EXIST */ });\n                return;\n            }\n            controller.handleSnapshotRequest(data[\"image-height\"], data[\"image-width\"], accessory === null || accessory === void 0 ? void 0 : accessory.displayName, data.reason)\n                .then(function (buffer) {\n                callback(undefined, buffer);\n            }, function (status) {\n                callback({ httpCode: 207 /* HAPHTTPCode.MULTI_STATUS */, status: status });\n            });\n            return;\n        }\n        debug(\"[%s] received request for unsupported image type: \" + data[\"resource-type\"], (_a = this._accessoryInfo) === null || _a === void 0 ? void 0 : _a.username);\n        callback({ httpCode: 404 /* HAPHTTPCode.NOT_FOUND */, status: -70409 /* HAPStatus.RESOURCE_DOES_NOT_EXIST */ });\n    };\n    Accessory.prototype.handleHAPConnectionClosed = function (connection) {\n        var e_19, _a;\n        if (this.activeCameraController) {\n            this.activeCameraController.handleCloseConnection(connection.sessionID);\n        }\n        try {\n            for (var _b = tslib_1.__values(connection.getRegisteredEvents()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var event = _c.value;\n                var ids = event.split(\".\");\n                var aid = parseInt(ids[0], 10);\n                var iid = parseInt(ids[1], 10);\n                var characteristic = this.findCharacteristic(aid, iid);\n                if (characteristic) {\n                    characteristic.unsubscribe();\n                }\n            }\n        }\n        catch (e_19_1) { e_19 = { error: e_19_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_19) throw e_19.error; }\n        }\n        connection.clearRegisteredEvents();\n    };\n    Accessory.prototype.handleServiceConfigurationChangeEvent = function (service) {\n        if (!service.isPrimaryService && service === this.primaryService) {\n            // service changed form primary to non-primary service\n            this.primaryService = undefined;\n        }\n        else if (service.isPrimaryService && service !== this.primaryService) {\n            // service changed from non-primary to primary service\n            if (this.primaryService !== undefined) {\n                this.primaryService.isPrimaryService = false;\n            }\n            this.primaryService = service;\n        }\n        if (this.bridged) {\n            this.emit(\"service-configurationChange\" /* AccessoryEventTypes.SERVICE_CONFIGURATION_CHANGE */, { service: service });\n        }\n        else {\n            this.enqueueConfigurationUpdate();\n        }\n    };\n    Accessory.prototype.handleCharacteristicChangeEvent = function (accessory, service, change) {\n        if (this.bridged) { // forward this to our main accessory\n            this.emit(\"service-characteristic-change\" /* AccessoryEventTypes.SERVICE_CHARACTERISTIC_CHANGE */, tslib_1.__assign(tslib_1.__assign({}, change), { service: service }));\n        }\n        else {\n            if (!this._server) {\n                return; // we're not running a HAPServer, so there's no one to notify about this event\n            }\n            if (accessory.aid == null || change.characteristic.iid == null) {\n                debug(\"[%s] Muting event notification for %s as ids aren't yet assigned!\", accessory.displayName, change.characteristic.displayName);\n                return;\n            }\n            if (change.context != null && typeof change.context === \"object\" && change.context.omitEventUpdate) {\n                debug(\"[%s] Omitting event updates for %s as specified in the context object!\", accessory.displayName, change.characteristic.displayName);\n                return;\n            }\n            if (!(change.reason === \"event\" /* ChangeReason.EVENT */ || change.oldValue !== change.newValue\n                || change.characteristic.UUID === Characteristic_1.Characteristic.ProgrammableSwitchEvent.UUID // those specific checks are out of backwards compatibility\n                || change.characteristic.UUID === Characteristic_1.Characteristic.ButtonEvent.UUID // new characteristics should use sendEventNotification call\n            )) {\n                // we only emit a change event if the reason was a call to sendEventNotification, if the value changed\n                // as of a write request or a read request or if the change happened on dedicated event characteristics\n                // otherwise we ignore this change event (with the return below)\n                return;\n            }\n            var uuid_2 = change.characteristic.UUID;\n            var immediateDelivery = uuid_2 === Characteristic_1.Characteristic.ButtonEvent.UUID || uuid_2 === Characteristic_1.Characteristic.ProgrammableSwitchEvent.UUID\n                || uuid_2 === Characteristic_1.Characteristic.MotionDetected.UUID || uuid_2 === Characteristic_1.Characteristic.ContactSensorState.UUID;\n            var value = (0, request_util_1.formatOutgoingCharacteristicValue)(change.newValue, change.characteristic.props);\n            this._server.sendEventNotifications(accessory.aid, change.characteristic.iid, value, change.originator, immediateDelivery);\n        }\n    };\n    Accessory.prototype.sendCharacteristicWarning = function (characteristic, type, message) {\n        this.handleCharacteristicWarning({\n            characteristic: characteristic,\n            type: type,\n            message: message,\n            originatorChain: [characteristic.displayName], // we are missing the service displayName, but that's okay\n            stack: new Error().stack,\n        });\n    };\n    Accessory.prototype.handleCharacteristicWarning = function (warning) {\n        var _a;\n        warning.originatorChain = tslib_1.__spreadArray([this.displayName], tslib_1.__read(warning.originatorChain), false);\n        var emitted = this.emit(\"characteristic-warning\" /* AccessoryEventTypes.CHARACTERISTIC_WARNING */, warning);\n        if (!emitted) {\n            var message = \"[\".concat(warning.originatorChain.join(\"@\"), \"] \").concat(warning.message);\n            if (warning.type === \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */\n                || warning.type === \"timeout-read\" /* CharacteristicWarningType.TIMEOUT_READ */ || warning.type === \"timeout-write\" /* CharacteristicWarningType.TIMEOUT_WRITE */) {\n                console.error(message);\n            }\n            else {\n                console.warn(message);\n            }\n            debug(\"[%s] Above characteristic warning was thrown at: %s\", this.displayName, (_a = warning.stack) !== null && _a !== void 0 ? _a : \"unknown\");\n        }\n    };\n    Accessory.prototype.setupServiceEventHandlers = function (service) {\n        service.on(\"service-configurationChange\" /* ServiceEventTypes.SERVICE_CONFIGURATION_CHANGE */, this.handleServiceConfigurationChangeEvent.bind(this, service));\n        service.on(\"characteristic-change\" /* ServiceEventTypes.CHARACTERISTIC_CHANGE */, this.handleCharacteristicChangeEvent.bind(this, this, service));\n        service.on(\"characteristic-warning\" /* ServiceEventTypes.CHARACTERISTIC_WARNING */, this.handleCharacteristicWarning.bind(this));\n    };\n    Accessory.prototype._sideloadServices = function (targetServices) {\n        var e_20, _a;\n        var _this = this;\n        try {\n            for (var targetServices_1 = tslib_1.__values(targetServices), targetServices_1_1 = targetServices_1.next(); !targetServices_1_1.done; targetServices_1_1 = targetServices_1.next()) {\n                var service = targetServices_1_1.value;\n                this.setupServiceEventHandlers(service);\n            }\n        }\n        catch (e_20_1) { e_20 = { error: e_20_1 }; }\n        finally {\n            try {\n                if (targetServices_1_1 && !targetServices_1_1.done && (_a = targetServices_1.return)) _a.call(targetServices_1);\n            }\n            finally { if (e_20) throw e_20.error; }\n        }\n        this.services = targetServices.slice();\n        // Fix Identify\n        this\n            .getService(Service_1.Service.AccessoryInformation)\n            .getCharacteristic(Characteristic_1.Characteristic.Identify)\n            .on(\"set\" /* CharacteristicEventTypes.SET */, function (value, callback) {\n            if (value) {\n                var paired = true;\n                _this.identificationRequest(paired, callback);\n            }\n        });\n    };\n    Accessory._generateSetupID = function () {\n        var chars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n        var max = chars.length;\n        var setupID = \"\";\n        for (var i = 0; i < 4; i++) {\n            var index = Math.floor(Math.random() * max);\n            setupID += chars.charAt(index);\n        }\n        return setupID;\n    };\n    // serialization and deserialization functions, mainly designed for homebridge to create a json copy to store on disk\n    Accessory.serialize = function (accessory) {\n        var json = {\n            displayName: accessory.displayName,\n            UUID: accessory.UUID,\n            lastKnownUsername: accessory._accessoryInfo ? accessory._accessoryInfo.username : undefined,\n            category: accessory.category,\n            services: [],\n        };\n        var linkedServices = {};\n        var hasLinkedServices = false;\n        accessory.services.forEach(function (service) {\n            json.services.push(Service_1.Service.serialize(service));\n            var linkedServicesPresentation = [];\n            service.linkedServices.forEach(function (linkedService) {\n                linkedServicesPresentation.push(linkedService.getServiceId());\n            });\n            if (linkedServicesPresentation.length > 0) {\n                linkedServices[service.getServiceId()] = linkedServicesPresentation;\n                hasLinkedServices = true;\n            }\n        });\n        if (hasLinkedServices) {\n            json.linkedServices = linkedServices;\n        }\n        var controllers = [];\n        // save controllers\n        Object.values(accessory.controllers).forEach(function (context) {\n            controllers.push({\n                type: context.controller.controllerId(),\n                services: Accessory.serializeServiceMap(context.serviceMap),\n            });\n        });\n        // also save controller which didn't get initialized (could lead to service duplication if we throw that data away)\n        accessory.serializedControllers && Object.entries(accessory.serializedControllers).forEach(function (_a) {\n            var _b = tslib_1.__read(_a, 2), id = _b[0], serviceMap = _b[1];\n            controllers.push({\n                type: id,\n                services: Accessory.serializeServiceMap(serviceMap),\n            });\n        });\n        if (controllers.length > 0) {\n            json.controllers = controllers;\n        }\n        return json;\n    };\n    Accessory.deserialize = function (json) {\n        var e_21, _a;\n        var accessory = new Accessory(json.displayName, json.UUID);\n        accessory.lastKnownUsername = json.lastKnownUsername;\n        accessory.category = json.category;\n        var services = [];\n        var servicesMap = {};\n        json.services.forEach(function (serialized) {\n            var service = Service_1.Service.deserialize(serialized);\n            services.push(service);\n            servicesMap[service.getServiceId()] = service;\n        });\n        if (json.linkedServices) {\n            var _loop_3 = function (serviceId, linkedServicesKeys) {\n                var primaryService = servicesMap[serviceId];\n                if (!primaryService) {\n                    return \"continue\";\n                }\n                linkedServicesKeys.forEach(function (linkedServiceKey) {\n                    var linkedService = servicesMap[linkedServiceKey];\n                    if (linkedService) {\n                        primaryService.addLinkedService(linkedService);\n                    }\n                });\n            };\n            try {\n                for (var _b = tslib_1.__values(Object.entries(json.linkedServices)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var _d = tslib_1.__read(_c.value, 2), serviceId = _d[0], linkedServicesKeys = _d[1];\n                    _loop_3(serviceId, linkedServicesKeys);\n                }\n            }\n            catch (e_21_1) { e_21 = { error: e_21_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_21) throw e_21.error; }\n            }\n        }\n        if (json.controllers) { // just save it for later if it exists {@see configureController}\n            accessory.serializedControllers = {};\n            json.controllers.forEach(function (serializedController) {\n                accessory.serializedControllers[serializedController.type] = Accessory.deserializeServiceMap(serializedController.services, servicesMap);\n            });\n        }\n        accessory._sideloadServices(services);\n        return accessory;\n    };\n    Accessory.cleanupAccessoryData = function (username) {\n        IdentifierCache_1.IdentifierCache.remove(username);\n        AccessoryInfo_1.AccessoryInfo.remove(username);\n        ControllerStorage_1.ControllerStorage.remove(username);\n    };\n    Accessory.serializeServiceMap = function (serviceMap) {\n        var serialized = {};\n        Object.entries(serviceMap).forEach(function (_a) {\n            var _b = tslib_1.__read(_a, 2), name = _b[0], service = _b[1];\n            if (!service) {\n                return;\n            }\n            serialized[name] = service.getServiceId();\n        });\n        return serialized;\n    };\n    Accessory.deserializeServiceMap = function (serializedServiceMap, servicesMap) {\n        var controllerServiceMap = {};\n        Object.entries(serializedServiceMap).forEach(function (_a) {\n            var _b = tslib_1.__read(_a, 2), name = _b[0], serviceId = _b[1];\n            var service = servicesMap[serviceId];\n            if (service) {\n                controllerServiceMap[name] = service;\n            }\n        });\n        return controllerServiceMap;\n    };\n    Accessory.parseBindOption = function (info) {\n        var e_22, _a;\n        var advertiserAddress = undefined;\n        var disableIpv6 = undefined;\n        var serverAddress = undefined;\n        if (info.bind) {\n            var entries = new Set(Array.isArray(info.bind) ? info.bind : [info.bind]);\n            if (entries.has(\"::\")) {\n                serverAddress = \"::\";\n                entries.delete(\"::\");\n                if (entries.size) {\n                    advertiserAddress = Array.from(entries);\n                }\n            }\n            else if (entries.has(\"0.0.0.0\")) {\n                disableIpv6 = true;\n                serverAddress = \"0.0.0.0\";\n                entries.delete(\"0.0.0.0\");\n                if (entries.size) {\n                    advertiserAddress = Array.from(entries);\n                }\n            }\n            else if (entries.size === 1) {\n                advertiserAddress = Array.from(entries);\n                var entry = entries.values().next().value; // grab the first one\n                var version = net_1.default.isIP(entry); // check if ip address was specified or an interface name\n                if (version) {\n                    serverAddress = version === 4 ? \"0.0.0.0\" : \"::\"; // we currently bind to unspecified addresses so config-ui always has a connection via loopback\n                }\n                else {\n                    serverAddress = \"::\"; // the interface could have both ipv4 and ipv6 addresses\n                }\n            }\n            else if (entries.size > 1) {\n                advertiserAddress = Array.from(entries);\n                var bindUnspecifiedIpv6 = false; // we bind on \"::\" if there are interface names, or we detect ipv6 addresses\n                try {\n                    for (var entries_1 = tslib_1.__values(entries), entries_1_1 = entries_1.next(); !entries_1_1.done; entries_1_1 = entries_1.next()) {\n                        var entry = entries_1_1.value;\n                        var version = net_1.default.isIP(entry);\n                        if (version === 0 || version === 6) {\n                            bindUnspecifiedIpv6 = true;\n                            break;\n                        }\n                    }\n                }\n                catch (e_22_1) { e_22 = { error: e_22_1 }; }\n                finally {\n                    try {\n                        if (entries_1_1 && !entries_1_1.done && (_a = entries_1.return)) _a.call(entries_1);\n                    }\n                    finally { if (e_22) throw e_22.error; }\n                }\n                if (bindUnspecifiedIpv6) {\n                    serverAddress = \"::\";\n                }\n                else {\n                    serverAddress = \"0.0.0.0\";\n                }\n            }\n        }\n        return {\n            advertiserAddress: advertiserAddress,\n            serviceRestrictedAddress: advertiserAddress,\n            serviceDisableIpv6: disableIpv6,\n            serverAddress: serverAddress,\n        };\n    };\n    /**\n     * @deprecated Please use the Categories const enum above.\n     */\n    // @ts-expect-error: forceConsistentCasingInFileNames compiler option\n    Accessory.Categories = Categories;\n    /// Timeout in milliseconds until a characteristic warning is issue\n    Accessory.TIMEOUT_WARNING = 3000;\n    /// Timeout in milliseconds after `TIMEOUT_WARNING` until the operation on the characteristic is considered timed out.\n    Accessory.TIMEOUT_AFTER_WARNING = 6000;\n    return Accessory;\n}(events_1.EventEmitter));\nexports.Accessory = Accessory;\n//# sourceMappingURL=Accessory.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.loadDirectory = exports.parseAccessoryJSON = exports.parseServiceJSON = exports.parseCharacteristicJSON = void 0;\nvar tslib_1 = require(\"tslib\");\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar fs_1 = tslib_1.__importDefault(require(\"fs\"));\nvar path_1 = tslib_1.__importDefault(require(\"path\"));\nvar Accessory_1 = require(\"./Accessory\");\nvar Characteristic_1 = require(\"./Characteristic\");\nvar Service_1 = require(\"./Service\");\nvar uuid = tslib_1.__importStar(require(\"./util/uuid\"));\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:AccessoryLoader\");\n/**\n * @group Utils\n * @deprecated Legacy Accessory Loader\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/no-explicit-any\nfunction parseCharacteristicJSON(json) {\n    var characteristicUUID = json.cType;\n    var characteristic = new Characteristic_1.Characteristic(json.manfDescription || characteristicUUID, characteristicUUID, {\n        format: json.format, // example: \"int\"\n        minValue: json.designedMinValue,\n        maxValue: json.designedMaxValue,\n        minStep: json.designedMinStep,\n        unit: json.unit,\n        perms: json.perms, // example: [\"pw\",\"pr\",\"ev\"]\n    });\n    // copy simple properties\n    characteristic.value = json.initialValue;\n    // @ts-expect-error: monkey-patch legacy \"locals\" property which used to exist.\n    characteristic.locals = json.locals;\n    var updateFunc = json.onUpdate; // optional function(value)\n    var readFunc = json.onRead; // optional function(callback(value))\n    var registerFunc = json.onRegister; // optional function\n    if (updateFunc) {\n        characteristic.on(\"set\" /* CharacteristicEventTypes.SET */, function (value, callback) {\n            updateFunc(value);\n            callback && callback();\n        });\n    }\n    if (readFunc) {\n        characteristic.on(\"get\" /* CharacteristicEventTypes.GET */, function (callback) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            readFunc(function (value) {\n                callback(null, value); // old onRead callbacks don't use Error as first param\n            });\n        });\n    }\n    if (registerFunc) {\n        registerFunc(characteristic);\n    }\n    return characteristic;\n}\nexports.parseCharacteristicJSON = parseCharacteristicJSON;\n/**\n * @group Utils\n * @deprecated Legacy Accessory Loader\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/explicit-module-boundary-types\nfunction parseServiceJSON(json) {\n    var serviceUUID = json.sType;\n    // build characteristics first, so we can extract the Name (if present)\n    var characteristics = [];\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    json.characteristics.forEach(function (characteristicJSON) {\n        var characteristic = parseCharacteristicJSON(characteristicJSON);\n        characteristics.push(characteristic);\n    });\n    var displayName = null;\n    // extract the \"Name\" characteristic to use for 'type' discrimination if necessary\n    characteristics.forEach(function (characteristic) {\n        if (characteristic.UUID === \"00000023-0000-1000-8000-0026BB765291\") { // Characteristic.Name.UUID\n            displayName = characteristic.value;\n        }\n    });\n    // Use UUID for \"displayName\" if necessary, as the JSON structures don't have a value for this\n    var service = new Service_1.Service(displayName || serviceUUID, serviceUUID, \"\".concat(displayName));\n    characteristics.forEach(function (characteristic) {\n        if (characteristic.UUID !== \"00000023-0000-1000-8000-0026BB765291\") { // Characteristic.Name.UUID, already present in all Services\n            service.addCharacteristic(characteristic);\n        }\n    });\n    return service;\n}\nexports.parseServiceJSON = parseServiceJSON;\n/**\n * Accepts object-literal JSON structures from previous versions of HAP-NodeJS and parses them into\n * newer-style structures of Accessory/Service/Characteristic objects.\n * @group Utils\n * @deprecated Legacy Accessory Loader\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/explicit-module-boundary-types\nfunction parseAccessoryJSON(json) {\n    // parse services first so we can extract the accessory name\n    var services = [];\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    json.services.forEach(function (serviceJSON) {\n        var service = parseServiceJSON(serviceJSON);\n        services.push(service);\n    });\n    var displayName = json.displayName;\n    services.forEach(function (service) {\n        if (service.UUID === \"0000003E-0000-1000-8000-0026BB765291\") { // Service.AccessoryInformation.UUID\n            service.characteristics.forEach(function (characteristic) {\n                if (characteristic.UUID === \"00000023-0000-1000-8000-0026BB765291\") { // Characteristic.Name.UUID\n                    displayName = characteristic.value;\n                }\n            });\n        }\n    });\n    var accessory = new Accessory_1.Accessory(displayName, uuid.generate(displayName));\n    // create custom properties for \"username\" and \"pincode\" for Core.js to find later (if using Core.js)\n    // @ts-expect-error: Core/BridgeCore API\n    accessory.username = json.username;\n    // @ts-expect-error: Core/BridgeCore API\n    accessory.pincode = json.pincode;\n    // clear out the default services\n    accessory.services.length = 0;\n    // add services\n    services.forEach(function (service) {\n        accessory.addService(service);\n    });\n    return accessory;\n}\nexports.parseAccessoryJSON = parseAccessoryJSON;\n/**\n * Loads all accessories from the given folder. Handles object-literal-style accessories, \"accessory factories\",\n * and new-API style modules.\n * @group Utils\n * @deprecated Legacy Accessory Loader\n */\nfunction loadDirectory(dir) {\n    // exported accessory objects loaded from this dir\n    var accessories = [];\n    fs_1.default.readdirSync(dir).forEach(function (file) {\n        var suffix = file.split(\"_\").pop();\n        // \"Accessories\" are modules that export a single accessory.\n        if (suffix === \"accessory.js\" || suffix === \"accessory.ts\") {\n            debug(\"Parsing accessory: %s\", file);\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\n            var loadedAccessory = require(path_1.default.join(dir, file)).accessory;\n            accessories.push(loadedAccessory);\n        }\n        else if (suffix === \"accfactory.js\" || suffix === \"accfactory.ts\") { // \"Accessory Factories\" are modules that export an array of accessories.\n            debug(\"Parsing accessory factory: %s\", file);\n            // should return an array of objects { accessory: accessory-json }\n            // eslint-disable-next-line @typescript-eslint/no-var-requires\n            var loadedAccessories = require(path_1.default.join(dir, file));\n            accessories = accessories.concat(loadedAccessories);\n        }\n    });\n    // now we need to coerce all accessory objects into instances of Accessory (some or all of them may\n    // be object-literal JSON-style accessories)\n    return accessories.map(function (accessory) {\n        if (accessory === null || accessory === undefined) { //check if accessory is not empty\n            console.log(\"Invalid accessory!\");\n            return false;\n        }\n        else {\n            return (accessory instanceof Accessory_1.Accessory) ? accessory : parseAccessoryJSON(accessory);\n        }\n    }).filter(function (accessory) {\n        return !!accessory;\n    });\n}\nexports.loadDirectory = loadDirectory;\n//# sourceMappingURL=AccessoryLoader.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ResolvedAdvertiser = exports.AvahiAdvertiser = exports.DBusInvokeError = exports.BonjourHAPAdvertiser = exports.CiaoAdvertiser = exports.AdvertiserEvent = exports.PairingFeatureFlag = exports.StatusFlag = void 0;\nvar tslib_1 = require(\"tslib\");\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path=\"../../@types/bonjour-hap.d.ts\" />\nvar ciao_1 = tslib_1.__importDefault(require(\"@homebridge/ciao\"));\nvar dbus_native_1 = tslib_1.__importDefault(require(\"@homebridge/dbus-native\"));\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar bonjour_hap_1 = tslib_1.__importDefault(require(\"bonjour-hap\"));\nvar crypto_1 = tslib_1.__importDefault(require(\"crypto\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar events_1 = require(\"events\");\nvar promise_utils_1 = require(\"./util/promise-utils\");\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:Advertiser\");\n/**\n * This enum lists all bitmasks for all known status flags.\n * When the bit for the given bitmask is set, it represents the state described by the name.\n *\n * @group Advertiser\n */\nvar StatusFlag;\n(function (StatusFlag) {\n    StatusFlag[StatusFlag[\"NOT_PAIRED\"] = 1] = \"NOT_PAIRED\";\n    StatusFlag[StatusFlag[\"NOT_JOINED_WIFI\"] = 2] = \"NOT_JOINED_WIFI\";\n    StatusFlag[StatusFlag[\"PROBLEM_DETECTED\"] = 4] = \"PROBLEM_DETECTED\";\n})(StatusFlag || (exports.StatusFlag = StatusFlag = {}));\n/**\n * This enum lists all bitmasks for all known pairing feature flags.\n * When the bit for the given bitmask is set, it represents the state described by the name.\n *\n * @group Advertiser\n */\nvar PairingFeatureFlag;\n(function (PairingFeatureFlag) {\n    PairingFeatureFlag[PairingFeatureFlag[\"SUPPORTS_HARDWARE_AUTHENTICATION\"] = 1] = \"SUPPORTS_HARDWARE_AUTHENTICATION\";\n    PairingFeatureFlag[PairingFeatureFlag[\"SUPPORTS_SOFTWARE_AUTHENTICATION\"] = 2] = \"SUPPORTS_SOFTWARE_AUTHENTICATION\";\n})(PairingFeatureFlag || (exports.PairingFeatureFlag = PairingFeatureFlag = {}));\n/**\n * @group Advertiser\n */\nvar AdvertiserEvent;\n(function (AdvertiserEvent) {\n    /**\n     * Emitted if the underlying mDNS advertisers signals, that the service name\n     * was automatically changed due to some naming conflicts on the network.\n     */\n    AdvertiserEvent[\"UPDATED_NAME\"] = \"updated-name\";\n})(AdvertiserEvent || (exports.AdvertiserEvent = AdvertiserEvent = {}));\n/**\n * Advertiser uses mdns to broadcast the presence of an Accessory to the local network.\n *\n * Note that as of iOS 9, an accessory can only pair with a single client. Instead of pairing your\n * accessories with multiple iOS devices in your home, Apple intends for you to use Home Sharing.\n * To support this requirement, we provide the ability to be \"discoverable\" or not (via a \"service flag\" on the\n * mdns payload).\n *\n * @group Advertiser\n */\nvar CiaoAdvertiser = /** @class */ (function (_super) {\n    tslib_1.__extends(CiaoAdvertiser, _super);\n    function CiaoAdvertiser(accessoryInfo, responderOptions, serviceOptions) {\n        var _this = _super.call(this) || this;\n        _this.accessoryInfo = accessoryInfo;\n        _this.setupHash = CiaoAdvertiser.computeSetupHash(accessoryInfo);\n        _this.responder = ciao_1.default.getResponder(tslib_1.__assign({}, responderOptions));\n        _this.advertisedService = _this.responder.createService(tslib_1.__assign({ name: _this.accessoryInfo.displayName, type: \"hap\" /* ServiceType.HAP */, txt: CiaoAdvertiser.createTxt(accessoryInfo, _this.setupHash) }, serviceOptions));\n        _this.advertisedService.on(\"name-change\" /* ServiceEvent.NAME_CHANGED */, _this.emit.bind(_this, \"updated-name\" /* AdvertiserEvent.UPDATED_NAME */));\n        debug(\"Preparing Advertiser for '\".concat(_this.accessoryInfo.displayName, \"' using ciao backend!\"));\n        return _this;\n    }\n    CiaoAdvertiser.prototype.initPort = function (port) {\n        this.advertisedService.updatePort(port);\n    };\n    CiaoAdvertiser.prototype.startAdvertising = function () {\n        debug(\"Starting to advertise '\".concat(this.accessoryInfo.displayName, \"' using ciao backend!\"));\n        return this.advertisedService.advertise();\n    };\n    CiaoAdvertiser.prototype.updateAdvertisement = function (silent) {\n        var txt = CiaoAdvertiser.createTxt(this.accessoryInfo, this.setupHash);\n        debug(\"Updating txt record (txt: %o, silent: %d)\", txt, silent);\n        this.advertisedService.updateTxt(txt, silent);\n    };\n    CiaoAdvertiser.prototype.destroy = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: \n                    // advertisedService.destroy(); is called implicitly via the shutdown call\n                    return [4 /*yield*/, this.responder.shutdown()];\n                    case 1:\n                        // advertisedService.destroy(); is called implicitly via the shutdown call\n                        _a.sent();\n                        this.removeAllListeners();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CiaoAdvertiser.createTxt = function (accessoryInfo, setupHash) {\n        var statusFlags = [];\n        if (!accessoryInfo.paired()) {\n            statusFlags.push(1 /* StatusFlag.NOT_PAIRED */);\n        }\n        return {\n            \"c#\": accessoryInfo.getConfigVersion(), // current configuration number\n            ff: CiaoAdvertiser.ff(), // pairing feature flags\n            id: accessoryInfo.username, // device id\n            md: accessoryInfo.model, // model name\n            pv: CiaoAdvertiser.protocolVersion, // protocol version\n            \"s#\": 1, // current state number (must be 1)\n            sf: CiaoAdvertiser.sf.apply(CiaoAdvertiser, tslib_1.__spreadArray([], tslib_1.__read(statusFlags), false)), // status flags\n            ci: accessoryInfo.category,\n            sh: setupHash,\n        };\n    };\n    CiaoAdvertiser.computeSetupHash = function (accessoryInfo) {\n        var hash = crypto_1.default.createHash(\"sha512\");\n        hash.update(accessoryInfo.setupID + accessoryInfo.username.toUpperCase());\n        return hash.digest().slice(0, 4).toString(\"base64\");\n    };\n    CiaoAdvertiser.ff = function () {\n        var flags = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            flags[_i] = arguments[_i];\n        }\n        var value = 0;\n        flags.forEach(function (flag) { return value |= flag; });\n        return value;\n    };\n    CiaoAdvertiser.sf = function () {\n        var flags = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            flags[_i] = arguments[_i];\n        }\n        var value = 0;\n        flags.forEach(function (flag) { return value |= flag; });\n        return value;\n    };\n    CiaoAdvertiser.protocolVersion = \"1.1\";\n    CiaoAdvertiser.protocolVersionService = \"1.1.0\";\n    return CiaoAdvertiser;\n}(events_1.EventEmitter));\nexports.CiaoAdvertiser = CiaoAdvertiser;\n/**\n * Advertiser base on the legacy \"bonjour-hap\" library.\n *\n * @group Advertiser\n */\nvar BonjourHAPAdvertiser = /** @class */ (function (_super) {\n    tslib_1.__extends(BonjourHAPAdvertiser, _super);\n    function BonjourHAPAdvertiser(accessoryInfo, responderOptions, serviceOptions) {\n        var _this = _super.call(this) || this;\n        _this.destroyed = false;\n        _this.accessoryInfo = accessoryInfo;\n        _this.setupHash = CiaoAdvertiser.computeSetupHash(accessoryInfo);\n        _this.serviceOptions = serviceOptions;\n        _this.bonjour = (0, bonjour_hap_1.default)(responderOptions);\n        debug(\"Preparing Advertiser for '\".concat(_this.accessoryInfo.displayName, \"' using bonjour-hap backend!\"));\n        return _this;\n    }\n    BonjourHAPAdvertiser.prototype.initPort = function (port) {\n        this.port = port;\n    };\n    BonjourHAPAdvertiser.prototype.startAdvertising = function () {\n        (0, assert_1.default)(!this.destroyed, \"Can't advertise on a destroyed bonjour instance!\");\n        if (this.port == null) {\n            throw new Error(\"Tried starting bonjour-hap advertisement without initializing port!\");\n        }\n        debug(\"Starting to advertise '\".concat(this.accessoryInfo.displayName, \"' using bonjour-hap backend!\"));\n        if (this.advertisement) {\n            this.destroy();\n        }\n        var hostname = this.accessoryInfo.username.replace(/:/ig, \"_\") + \".local\";\n        this.advertisement = this.bonjour.publish(tslib_1.__assign({ name: this.accessoryInfo.displayName, type: \"hap\", port: this.port, txt: CiaoAdvertiser.createTxt(this.accessoryInfo, this.setupHash), host: hostname, addUnsafeServiceEnumerationRecord: true }, this.serviceOptions));\n        return (0, promise_utils_1.PromiseTimeout)(1);\n    };\n    BonjourHAPAdvertiser.prototype.updateAdvertisement = function (silent) {\n        var txt = CiaoAdvertiser.createTxt(this.accessoryInfo, this.setupHash);\n        debug(\"Updating txt record (txt: %o, silent: %d)\", txt, silent);\n        if (this.advertisement) {\n            this.advertisement.updateTxt(txt, silent);\n        }\n    };\n    BonjourHAPAdvertiser.prototype.destroy = function () {\n        var _this = this;\n        if (this.advertisement) {\n            this.advertisement.stop(function () {\n                _this.advertisement.destroy();\n                _this.advertisement = undefined;\n                _this.bonjour.destroy();\n            });\n        }\n        else {\n            this.bonjour.destroy();\n        }\n    };\n    return BonjourHAPAdvertiser;\n}(events_1.EventEmitter));\nexports.BonjourHAPAdvertiser = BonjourHAPAdvertiser;\nfunction messageBusConnectionResult(bus) {\n    return new Promise(function (resolve, reject) {\n        var errorHandler = function (error) {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            bus.connection.removeListener(\"connect\", connectHandler);\n            reject(error);\n        };\n        var connectHandler = function () {\n            bus.connection.removeListener(\"error\", errorHandler);\n            resolve();\n        };\n        bus.connection.once(\"connect\", connectHandler);\n        bus.connection.once(\"error\", errorHandler);\n    });\n}\n/**\n * @group Advertiser\n */\nvar DBusInvokeError = /** @class */ (function (_super) {\n    tslib_1.__extends(DBusInvokeError, _super);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    function DBusInvokeError(errorObject) {\n        var _this = _super.call(this) || this;\n        Object.setPrototypeOf(_this, DBusInvokeError.prototype);\n        _this.name = \"DBusInvokeError\";\n        _this.errorName = errorObject.name;\n        if (Array.isArray(errorObject.message) && errorObject.message.length === 1) {\n            _this.message = errorObject.message[0];\n        }\n        else {\n            _this.message = errorObject.message.toString();\n        }\n        return _this;\n    }\n    return DBusInvokeError;\n}(Error));\nexports.DBusInvokeError = DBusInvokeError;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction dbusInvoke(bus, destination, path, dbusInterface, member, others) {\n    return new Promise(function (resolve, reject) {\n        var command = tslib_1.__assign({ destination: destination, path: path, interface: dbusInterface, member: member }, (others || {}));\n        bus.invoke(command, function (err, result) {\n            if (err) {\n                reject(new DBusInvokeError(err));\n            }\n            else {\n                resolve(result);\n            }\n        });\n    });\n}\n/**\n * AvahiServerState.\n *\n * Refer to https://github.com/lathiat/avahi/blob/fd482a74625b8db8547b8cfca3ee3d3c6c721423/avahi-common/defs.h#L220-L227.\n *\n * @group Advertiser\n */\nvar AvahiServerState;\n(function (AvahiServerState) {\n    // noinspection JSUnusedGlobalSymbols\n    AvahiServerState[AvahiServerState[\"INVALID\"] = 0] = \"INVALID\";\n    AvahiServerState[AvahiServerState[\"REGISTERING\"] = 1] = \"REGISTERING\";\n    AvahiServerState[AvahiServerState[\"RUNNING\"] = 2] = \"RUNNING\";\n    AvahiServerState[AvahiServerState[\"COLLISION\"] = 3] = \"COLLISION\";\n    AvahiServerState[AvahiServerState[\"FAILURE\"] = 4] = \"FAILURE\";\n})(AvahiServerState || (AvahiServerState = {}));\n/**\n * Advertiser based on the Avahi D-Bus library.\n * For (very crappy) docs on the interface, see the XML files at: https://github.com/lathiat/avahi/tree/master/avahi-daemon.\n *\n * Refer to https://github.com/lathiat/avahi/blob/fd482a74625b8db8547b8cfca3ee3d3c6c721423/avahi-common/defs.h#L120-L155 for a\n * rough API usage guide of Avahi.\n *\n * @group Advertiser\n */\nvar AvahiAdvertiser = /** @class */ (function (_super) {\n    tslib_1.__extends(AvahiAdvertiser, _super);\n    function AvahiAdvertiser(accessoryInfo) {\n        var _this = _super.call(this) || this;\n        _this.accessoryInfo = accessoryInfo;\n        _this.setupHash = CiaoAdvertiser.computeSetupHash(accessoryInfo);\n        debug(\"Preparing Advertiser for '\".concat(_this.accessoryInfo.displayName, \"' using Avahi backend!\"));\n        _this.bus = dbus_native_1.default.systemBus();\n        _this.stateChangeHandler = _this.handleStateChangedEvent.bind(_this);\n        return _this;\n    }\n    AvahiAdvertiser.prototype.createTxt = function () {\n        return Object\n            .entries(CiaoAdvertiser.createTxt(this.accessoryInfo, this.setupHash))\n            .map(function (el) { return Buffer.from(el[0] + \"=\" + el[1]); });\n    };\n    AvahiAdvertiser.prototype.initPort = function (port) {\n        this.port = port;\n    };\n    AvahiAdvertiser.prototype.startAdvertising = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, _b, error_1;\n            return tslib_1.__generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (this.port == null) {\n                            throw new Error(\"Tried starting Avahi advertisement without initializing port!\");\n                        }\n                        if (!this.bus) {\n                            throw new Error(\"Tried to start Avahi advertisement on a destroyed advertiser!\");\n                        }\n                        debug(\"Starting to advertise '\".concat(this.accessoryInfo.displayName, \"' using Avahi backend!\"));\n                        _a = this;\n                        return [4 /*yield*/, AvahiAdvertiser.avahiInvoke(this.bus, \"/\", \"Server\", \"EntryGroupNew\")];\n                    case 1:\n                        _a.path = (_c.sent());\n                        return [4 /*yield*/, AvahiAdvertiser.avahiInvoke(this.bus, this.path, \"EntryGroup\", \"AddService\", {\n                                body: [\n                                    -1, // interface\n                                    -1, // protocol\n                                    0, // flags\n                                    this.accessoryInfo.displayName, // name\n                                    \"_hap._tcp\", // type\n                                    \"\", // domain\n                                    \"\", // host\n                                    this.port, // port\n                                    this.createTxt(), // txt\n                                ],\n                                signature: \"iiussssqaay\",\n                            })];\n                    case 2:\n                        _c.sent();\n                        return [4 /*yield*/, AvahiAdvertiser.avahiInvoke(this.bus, this.path, \"EntryGroup\", \"Commit\")];\n                    case 3:\n                        _c.sent();\n                        _c.label = 4;\n                    case 4:\n                        _c.trys.push([4, 7, , 8]);\n                        if (!!this.avahiServerInterface) return [3 /*break*/, 6];\n                        _b = this;\n                        return [4 /*yield*/, AvahiAdvertiser.avahiInterface(this.bus, \"Server\")];\n                    case 5:\n                        _b.avahiServerInterface = _c.sent();\n                        this.avahiServerInterface.on(\"StateChanged\", this.stateChangeHandler);\n                        _c.label = 6;\n                    case 6: return [3 /*break*/, 8];\n                    case 7:\n                        error_1 = _c.sent();\n                        // We have some problem on Synology https://github.com/homebridge/HAP-NodeJS/issues/993\n                        console.warn(\"Failed to create listener for avahi-daemon server state. The system will not be notified about restarts of avahi-daemon \" +\n                            \"and will therefore stay undiscoverable in those instances. Error message: \" + error_1);\n                        if (error_1.stack) {\n                            debug(\"Detailed error: \" + error_1.stack);\n                        }\n                        return [3 /*break*/, 8];\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Event handler for the `StateChanged` event of the `org.freedesktop.Avahi.Server` DBus interface.\n     *\n     * This is called once the state of the running avahi-daemon changes its running state.\n     * @param state - The state the server changed into {@see AvahiServerState}.\n     */\n    AvahiAdvertiser.prototype.handleStateChangedEvent = function (state) {\n        if (state === 2 /* AvahiServerState.RUNNING */ && this.path) {\n            debug(\"Found Avahi daemon to have restarted!\");\n            this.startAdvertising()\n                .catch(function (reason) { return console.error(\"Could not (re-)create mDNS advertisement. The HAP-Server won't be discoverable: \" + reason); });\n        }\n    };\n    AvahiAdvertiser.prototype.updateAdvertisement = function (silent) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var error_2;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.bus) {\n                            throw new Error(\"Tried to update Avahi advertisement on a destroyed advertiser!\");\n                        }\n                        if (!this.path) {\n                            debug(\"Tried to update advertisement without a valid `path`!\");\n                            return [2 /*return*/];\n                        }\n                        debug(\"Updating txt record (txt: %o, silent: %d)\", CiaoAdvertiser.createTxt(this.accessoryInfo, this.setupHash), silent);\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, AvahiAdvertiser.avahiInvoke(this.bus, this.path, \"EntryGroup\", \"UpdateServiceTxt\", {\n                                body: [-1, -1, 0, this.accessoryInfo.displayName, \"_hap._tcp\", \"\", this.createTxt()],\n                                signature: \"iiusssaay\",\n                            })];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_2 = _a.sent();\n                        console.error(\"Failed to update avahi advertisement: \" + error_2);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AvahiAdvertiser.prototype.destroy = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var error_3;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.bus) {\n                            throw new Error(\"Tried to destroy Avahi advertisement on a destroyed advertiser!\");\n                        }\n                        if (!this.path) return [3 /*break*/, 5];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, AvahiAdvertiser.avahiInvoke(this.bus, this.path, \"EntryGroup\", \"Free\")];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_3 = _a.sent();\n                        // Typically, this fails if e.g. avahi service was stopped in the meantime.\n                        debug(\"Destroying Avahi advertisement failed: \" + error_3);\n                        return [3 /*break*/, 4];\n                    case 4:\n                        this.path = undefined;\n                        _a.label = 5;\n                    case 5:\n                        if (this.avahiServerInterface) {\n                            this.avahiServerInterface.removeListener(\"StateChanged\", this.stateChangeHandler);\n                            this.avahiServerInterface = undefined;\n                        }\n                        this.bus.connection.stream.destroy();\n                        this.bus = undefined;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    AvahiAdvertiser.isAvailable = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var bus, error_4, version, error_5;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        bus = dbus_native_1.default.systemBus();\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, , 9, 10]);\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, messageBusConnectionResult(bus)];\n                    case 3:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        error_4 = _a.sent();\n                        debug(\"Avahi/DBus classified unavailable due to missing dbus interface!\");\n                        return [2 /*return*/, false];\n                    case 5:\n                        _a.trys.push([5, 7, , 8]);\n                        return [4 /*yield*/, this.avahiInvoke(bus, \"/\", \"Server\", \"GetVersionString\")];\n                    case 6:\n                        version = _a.sent();\n                        debug(\"Detected Avahi over DBus interface running version '%s'.\", version);\n                        return [3 /*break*/, 8];\n                    case 7:\n                        error_5 = _a.sent();\n                        debug(\"Avahi/DBus classified unavailable due to missing avahi interface!\");\n                        return [2 /*return*/, false];\n                    case 8: return [2 /*return*/, true];\n                    case 9:\n                        bus.connection.stream.destroy();\n                        return [7 /*endfinally*/];\n                    case 10: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    AvahiAdvertiser.avahiInvoke = function (bus, path, dbusInterface, member, others) {\n        return dbusInvoke(bus, \"org.freedesktop.Avahi\", path, \"org.freedesktop.Avahi.\".concat(dbusInterface), member, others);\n    };\n    AvahiAdvertiser.avahiInterface = function (bus, dbusInterface) {\n        return new Promise(function (resolve, reject) {\n            bus\n                .getService(\"org.freedesktop.Avahi\")\n                .getInterface(\"/\", \"org.freedesktop.Avahi.\" + dbusInterface, function (error, iface) {\n                if (error || !iface) {\n                    reject(error !== null && error !== void 0 ? error : new Error(\"Interface not present!\"));\n                }\n                else {\n                    resolve(iface);\n                }\n            });\n        });\n    };\n    return AvahiAdvertiser;\n}(events_1.EventEmitter));\nexports.AvahiAdvertiser = AvahiAdvertiser;\nvar RESOLVED_PERMISSIONS_ERRORS = [\n    \"org.freedesktop.DBus.Error.AccessDenied\",\n    \"org.freedesktop.DBus.Error.AuthFailed\",\n    \"org.freedesktop.DBus.Error.InteractiveAuthorizationRequired\",\n];\n/**\n * Advertiser based on the systemd-resolved D-Bus library.\n * For docs on the interface, see: https://www.freedesktop.org/software/systemd/man/org.freedesktop.resolve1.html\n *\n * @group Advertiser\n */\nvar ResolvedAdvertiser = /** @class */ (function (_super) {\n    tslib_1.__extends(ResolvedAdvertiser, _super);\n    function ResolvedAdvertiser(accessoryInfo) {\n        var _this = _super.call(this) || this;\n        _this.accessoryInfo = accessoryInfo;\n        _this.setupHash = CiaoAdvertiser.computeSetupHash(accessoryInfo);\n        _this.bus = dbus_native_1.default.systemBus();\n        debug(\"Preparing Advertiser for '\".concat(_this.accessoryInfo.displayName, \"' using systemd-resolved backend!\"));\n        return _this;\n    }\n    ResolvedAdvertiser.prototype.createTxt = function () {\n        return Object\n            .entries(CiaoAdvertiser.createTxt(this.accessoryInfo, this.setupHash))\n            .map(function (el) { return [el[0].toString(), Buffer.from(el[1].toString())]; });\n    };\n    ResolvedAdvertiser.prototype.initPort = function (port) {\n        this.port = port;\n    };\n    ResolvedAdvertiser.prototype.startAdvertising = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, error_6;\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (this.port == null) {\n                            throw new Error(\"Tried starting systemd-resolved advertisement without initializing port!\");\n                        }\n                        if (!this.bus) {\n                            throw new Error(\"Tried to start systemd-resolved advertisement on a destroyed advertiser!\");\n                        }\n                        debug(\"Starting to advertise '\".concat(this.accessoryInfo.displayName, \"' using systemd-resolved backend!\"));\n                        _b.label = 1;\n                    case 1:\n                        _b.trys.push([1, 3, , 4]);\n                        _a = this;\n                        return [4 /*yield*/, ResolvedAdvertiser.managerInvoke(this.bus, \"RegisterService\", {\n                                body: [\n                                    this.accessoryInfo.displayName, // name\n                                    this.accessoryInfo.displayName, // name_template\n                                    \"_hap._tcp\", // type\n                                    this.port, // service_port\n                                    0, // service_priority\n                                    0, // service_weight\n                                    [this.createTxt()], // txt_datas\n                                ],\n                                signature: \"sssqqqaa{say}\",\n                            })];\n                    case 2:\n                        _a.path = _b.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_6 = _b.sent();\n                        if (error_6 instanceof DBusInvokeError) {\n                            if (RESOLVED_PERMISSIONS_ERRORS.includes(error_6.errorName)) {\n                                error_6.message = \"Permissions issue. See https://homebridge.io/w/mDNS-Options for more info. \".concat(error_6.message);\n                            }\n                        }\n                        throw error_6;\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ResolvedAdvertiser.prototype.updateAdvertisement = function (silent) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.bus) {\n                            throw new Error(\"Tried to update systemd-resolved advertisement on a destroyed advertiser!\");\n                        }\n                        debug(\"Updating txt record (txt: %o, silent: %d)\", CiaoAdvertiser.createTxt(this.accessoryInfo, this.setupHash), silent);\n                        // Currently, systemd-resolved has no way to update an existing record.\n                        return [4 /*yield*/, this.stopAdvertising()];\n                    case 1:\n                        // Currently, systemd-resolved has no way to update an existing record.\n                        _a.sent();\n                        return [4 /*yield*/, this.startAdvertising()];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ResolvedAdvertiser.prototype.stopAdvertising = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var error_7;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.bus) {\n                            throw new Error(\"Tried to destroy systemd-resolved advertisement on a destroyed advertiser!\");\n                        }\n                        if (!this.path) return [3 /*break*/, 5];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, ResolvedAdvertiser.managerInvoke(this.bus, \"UnregisterService\", {\n                                body: [this.path],\n                                signature: \"o\",\n                            })];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_7 = _a.sent();\n                        // Typically, this fails if e.g. systemd-resolved service was stopped in the meantime.\n                        debug(\"Destroying systemd-resolved advertisement failed: \" + error_7);\n                        return [3 /*break*/, 4];\n                    case 4:\n                        this.path = undefined;\n                        _a.label = 5;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ResolvedAdvertiser.prototype.destroy = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.bus) {\n                            throw new Error(\"Tried to destroy systemd-resolved advertisement on a destroyed advertiser!\");\n                        }\n                        return [4 /*yield*/, this.stopAdvertising()];\n                    case 1:\n                        _a.sent();\n                        this.bus.connection.stream.destroy();\n                        this.bus = undefined;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ResolvedAdvertiser.isAvailable = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var bus, error_8, error_9, mdnsStatus, error_10;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        bus = dbus_native_1.default.systemBus();\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, , 12, 13]);\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, messageBusConnectionResult(bus)];\n                    case 3:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        error_8 = _a.sent();\n                        debug(\"systemd-resolved/DBus classified unavailable due to missing dbus interface!\");\n                        return [2 /*return*/, false];\n                    case 5:\n                        _a.trys.push([5, 7, , 8]);\n                        // Ensure that systemd-resolved is accessible.\n                        return [4 /*yield*/, this.managerInvoke(bus, \"ResolveHostname\", {\n                                body: [0, \"127.0.0.1\", 0, 0],\n                                signature: \"isit\",\n                            })];\n                    case 6:\n                        // Ensure that systemd-resolved is accessible.\n                        _a.sent();\n                        debug(\"Detected systemd-resolved over DBus interface running version.\");\n                        return [3 /*break*/, 8];\n                    case 7:\n                        error_9 = _a.sent();\n                        debug(\"systemd-resolved/DBus classified unavailable due to missing systemd-resolved interface!\");\n                        return [2 /*return*/, false];\n                    case 8:\n                        _a.trys.push([8, 10, , 11]);\n                        return [4 /*yield*/, this.resolvedInvoke(bus, \"org.freedesktop.DBus.Properties\", \"Get\", {\n                                body: [\"org.freedesktop.resolve1.Manager\", \"MulticastDNS\"],\n                                signature: \"ss\",\n                            })];\n                    case 9:\n                        mdnsStatus = _a.sent();\n                        if (mdnsStatus[0][0].type !== \"s\") {\n                            throw new Error(\"Invalid type for MulticastDNS\");\n                        }\n                        if (mdnsStatus[1][0] !== \"yes\") {\n                            debug(\"systemd-resolved/DBus classified unavailable because MulticastDNS is not enabled!\");\n                            return [2 /*return*/, false];\n                        }\n                        return [3 /*break*/, 11];\n                    case 10:\n                        error_10 = _a.sent();\n                        debug(\"systemd-resolved/DBus classified unavailable due to failure checking system status: \" + error_10);\n                        return [2 /*return*/, false];\n                    case 11: return [2 /*return*/, true];\n                    case 12:\n                        bus.connection.stream.destroy();\n                        return [7 /*endfinally*/];\n                    case 13: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ResolvedAdvertiser.resolvedInvoke = function (bus, dbusInterface, member, others) {\n        return dbusInvoke(bus, \"org.freedesktop.resolve1\", \"/org/freedesktop/resolve1\", dbusInterface, member, others);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ResolvedAdvertiser.managerInvoke = function (bus, member, others) {\n        return this.resolvedInvoke(bus, \"org.freedesktop.resolve1.Manager\", member, others);\n    };\n    return ResolvedAdvertiser;\n}(events_1.EventEmitter));\nexports.ResolvedAdvertiser = ResolvedAdvertiser;\n//# sourceMappingURL=Advertiser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Bridge = void 0;\nvar tslib_1 = require(\"tslib\");\nvar Accessory_1 = require(\"./Accessory\");\n/**\n * Bridge is a special type of HomeKit Accessory that hosts other Accessories \"behind\" it. This way you\n * can simply publish() the Bridge (with a single HAPServer on a single port) and all bridged Accessories\n * will be hosted automatically, instead of needed to publish() every single Accessory as a separate server.\n *\n * @group Accessory\n */\nvar Bridge = /** @class */ (function (_super) {\n    tslib_1.__extends(Bridge, _super);\n    function Bridge(displayName, UUID) {\n        var _this = _super.call(this, displayName, UUID) || this;\n        _this._isBridge = true;\n        return _this;\n    }\n    return Bridge;\n}(Accessory_1.Accessory));\nexports.Bridge = Bridge;\n//# sourceMappingURL=Bridge.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Characteristic = exports.CharacteristicEventTypes = exports.ChangeReason = exports.Access = exports.Perms = exports.Units = exports.Formats = void 0;\nvar tslib_1 = require(\"tslib\");\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar events_1 = require(\"events\");\nvar HAPServer_1 = require(\"./HAPServer\");\nvar clone_1 = require(\"./util/clone\");\nvar hapStatusError_1 = require(\"./util/hapStatusError\");\nvar once_1 = require(\"./util/once\");\nvar request_util_1 = require(\"./util/request-util\");\nvar uuid_1 = require(\"./util/uuid\");\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:Characteristic\");\n/**\n * @group Characteristic\n */\nvar Formats;\n(function (Formats) {\n    Formats[\"BOOL\"] = \"bool\";\n    /**\n     * Signed 32-bit integer\n     */\n    Formats[\"INT\"] = \"int\";\n    /**\n     * Signed 64-bit floating point\n     */\n    Formats[\"FLOAT\"] = \"float\";\n    /**\n     * String encoded in utf8\n     */\n    Formats[\"STRING\"] = \"string\";\n    /**\n     * Unsigned 8-bit integer.\n     */\n    Formats[\"UINT8\"] = \"uint8\";\n    /**\n     * Unsigned 16-bit integer.\n     */\n    Formats[\"UINT16\"] = \"uint16\";\n    /**\n     * Unsigned 32-bit integer.\n     */\n    Formats[\"UINT32\"] = \"uint32\";\n    /**\n     * Unsigned 64-bit integer.\n     */\n    Formats[\"UINT64\"] = \"uint64\";\n    /**\n     * Data is base64 encoded string.\n     */\n    Formats[\"DATA\"] = \"data\";\n    /**\n     * Base64 encoded tlv8 string.\n     */\n    Formats[\"TLV8\"] = \"tlv8\";\n    /**\n     * @deprecated Not contained in the HAP spec\n     */\n    Formats[\"ARRAY\"] = \"array\";\n    /**\n     * @deprecated Not contained in the HAP spec\n     */\n    Formats[\"DICTIONARY\"] = \"dict\";\n})(Formats || (exports.Formats = Formats = {}));\n/**\n * @group Characteristic\n */\nvar Units;\n(function (Units) {\n    /**\n     * Celsius is the only temperature unit in the HomeKit Accessory Protocol.\n     * Unit conversion is always done on the client side e.g. on the iPhone in the Home App depending on\n     * the configured unit on the device itself.\n     */\n    Units[\"CELSIUS\"] = \"celsius\";\n    Units[\"PERCENTAGE\"] = \"percentage\";\n    Units[\"ARC_DEGREE\"] = \"arcdegrees\";\n    Units[\"LUX\"] = \"lux\";\n    Units[\"SECONDS\"] = \"seconds\";\n})(Units || (exports.Units = Units = {}));\n/**\n * @group Characteristic\n */\nvar Perms;\n(function (Perms) {\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * @deprecated replaced by {@link PAIRED_READ}. Kept for backwards compatibility.\n     */\n    Perms[\"READ\"] = \"pr\";\n    /**\n     * @deprecated replaced by {@link PAIRED_WRITE}. Kept for backwards compatibility.\n     */\n    Perms[\"WRITE\"] = \"pw\";\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    Perms[\"PAIRED_READ\"] = \"pr\";\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    Perms[\"PAIRED_WRITE\"] = \"pw\";\n    Perms[\"NOTIFY\"] = \"ev\";\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    Perms[\"EVENTS\"] = \"ev\";\n    Perms[\"ADDITIONAL_AUTHORIZATION\"] = \"aa\";\n    Perms[\"TIMED_WRITE\"] = \"tw\";\n    Perms[\"HIDDEN\"] = \"hd\";\n    Perms[\"WRITE_RESPONSE\"] = \"wr\";\n})(Perms || (exports.Perms = Perms = {}));\n/**\n * Describes the abstract access to a {@link Characteristic}.\n * It abstracts the more granular access described by {@link Perms}.\n *\n * It is used in {@link CharacteristicProps.adminOnlyAccess}.\n *\n * @group Characteristic\n */\nvar Access;\n(function (Access) {\n    Access[Access[\"READ\"] = 0] = \"READ\";\n    Access[Access[\"WRITE\"] = 1] = \"WRITE\";\n    Access[Access[\"NOTIFY\"] = 2] = \"NOTIFY\";\n})(Access || (exports.Access = Access = {}));\n/**\n * @group Characteristic\n */\nvar ChangeReason;\n(function (ChangeReason) {\n    /**\n     * Reason used when HomeKit writes a value or the API user calls {@link Characteristic.setValue}.\n     */\n    ChangeReason[\"WRITE\"] = \"write\";\n    /**\n     * Reason used when the API user calls the method {@link Characteristic.updateValue}.\n     */\n    ChangeReason[\"UPDATE\"] = \"update\";\n    /**\n     * Used when HomeKit reads a value or the API user calls the deprecated method `Characteristic.getValue`.\n     */\n    ChangeReason[\"READ\"] = \"read\";\n    /**\n     * Used when call to {@link Characteristic.sendEventNotification} was made.\n     */\n    ChangeReason[\"EVENT\"] = \"event\";\n})(ChangeReason || (exports.ChangeReason = ChangeReason = {}));\n/**\n * @group Characteristic\n */\nvar CharacteristicEventTypes;\n(function (CharacteristicEventTypes) {\n    /**\n     * This event is thrown when a HomeKit controller wants to read the current value of the characteristic.\n     * The event handler should call the supplied callback as fast as possible.\n     *\n     * HAP-NodeJS will complain about slow running get handlers after 3 seconds and terminate the request after 10 seconds.\n     */\n    CharacteristicEventTypes[\"GET\"] = \"get\";\n    /**\n     * This event is thrown when a HomeKit controller wants to write a new value to the characteristic.\n     * The event handler should call the supplied callback as fast as possible.\n     *\n     * HAP-NodeJS will complain about slow running set handlers after 3 seconds and terminate the request after 10 seconds.\n     */\n    CharacteristicEventTypes[\"SET\"] = \"set\";\n    /**\n     * Emitted after a new value is set for the characteristic.\n     * The new value can be set via a request by a HomeKit controller or via an API call.\n     */\n    CharacteristicEventTypes[\"CHANGE\"] = \"change\";\n    /**\n     * @private\n     */\n    CharacteristicEventTypes[\"SUBSCRIBE\"] = \"subscribe\";\n    /**\n     * @private\n     */\n    CharacteristicEventTypes[\"UNSUBSCRIBE\"] = \"unsubscribe\";\n    /**\n     * @private\n     */\n    CharacteristicEventTypes[\"CHARACTERISTIC_WARNING\"] = \"characteristic-warning\";\n})(CharacteristicEventTypes || (exports.CharacteristicEventTypes = CharacteristicEventTypes = {}));\n/**\n * @group Characteristic\n */\nvar ValidValuesIterable = /** @class */ (function () {\n    function ValidValuesIterable(props) {\n        (0, assert_1.default)((0, request_util_1.isNumericFormat)(props.format), \"Cannot instantiate valid values iterable when format is not numeric. Found \" + props.format);\n        this.props = props;\n    }\n    ValidValuesIterable.prototype[Symbol.iterator] = function () {\n        var _a, _b, value, e_1_1, min, max, stepValue, i;\n        var e_1, _c;\n        return tslib_1.__generator(this, function (_d) {\n            switch (_d.label) {\n                case 0:\n                    if (!this.props.validValues) return [3 /*break*/, 9];\n                    _d.label = 1;\n                case 1:\n                    _d.trys.push([1, 6, 7, 8]);\n                    _a = tslib_1.__values(this.props.validValues), _b = _a.next();\n                    _d.label = 2;\n                case 2:\n                    if (!!_b.done) return [3 /*break*/, 5];\n                    value = _b.value;\n                    return [4 /*yield*/, value];\n                case 3:\n                    _d.sent();\n                    _d.label = 4;\n                case 4:\n                    _b = _a.next();\n                    return [3 /*break*/, 2];\n                case 5: return [3 /*break*/, 8];\n                case 6:\n                    e_1_1 = _d.sent();\n                    e_1 = { error: e_1_1 };\n                    return [3 /*break*/, 8];\n                case 7:\n                    try {\n                        if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                    return [7 /*endfinally*/];\n                case 8: return [3 /*break*/, 13];\n                case 9:\n                    min = 0;\n                    max = void 0;\n                    stepValue = 1;\n                    if (this.props.validValueRanges) {\n                        min = this.props.validValueRanges[0];\n                        max = this.props.validValueRanges[1];\n                    }\n                    else if (this.props.minValue != null && this.props.maxValue != null) {\n                        min = this.props.minValue;\n                        max = this.props.maxValue;\n                        if (this.props.minStep != null) {\n                            stepValue = this.props.minStep;\n                        }\n                    }\n                    else if ((0, request_util_1.isUnsignedNumericFormat)(this.props.format)) {\n                        max = (0, request_util_1.numericUpperBound)(this.props.format);\n                    }\n                    else {\n                        throw new Error(\"Could not find valid iterator strategy for props: \" + JSON.stringify(this.props));\n                    }\n                    i = min;\n                    _d.label = 10;\n                case 10:\n                    if (!(i <= max)) return [3 /*break*/, 13];\n                    return [4 /*yield*/, i];\n                case 11:\n                    _d.sent();\n                    _d.label = 12;\n                case 12:\n                    i += stepValue;\n                    return [3 /*break*/, 10];\n                case 13: return [2 /*return*/];\n            }\n        });\n    };\n    return ValidValuesIterable;\n}());\nvar numberPattern = /^-?\\d+$/;\nfunction extractHAPStatusFromError(error) {\n    var errorValue = -70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */;\n    if (numberPattern.test(error.message)) {\n        var value = parseInt(error.message, 10);\n        if ((0, HAPServer_1.IsKnownHAPStatusError)(value)) {\n            errorValue = value;\n        }\n    }\n    return errorValue;\n}\nfunction maxWithUndefined(a, b) {\n    if (a == null) {\n        return b;\n    }\n    else if (b == null) {\n        return a;\n    }\n    else {\n        return Math.max(a, b);\n    }\n}\nfunction minWithUndefined(a, b) {\n    if (a == null) {\n        return b;\n    }\n    else if (b == null) {\n        return a;\n    }\n    else {\n        return Math.min(a, b);\n    }\n}\n/**\n * Characteristic represents a particular typed variable that can be assigned to a Service. For instance, a\n * \"Hue\" Characteristic might store a 'float' value of type 'arcdegrees'. You could add the Hue Characteristic\n * to a {@link Service} in order to store that value. A particular Characteristic is distinguished from others by its\n * UUID. HomeKit provides a set of known Characteristic UUIDs defined in HomeKit.ts along with a\n * corresponding concrete subclass.\n *\n * You can also define custom Characteristics by providing your own UUID. Custom Characteristics can be added\n * to any native or custom Services, but Siri will likely not be able to work with these.\n *\n * @group Characteristic\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar Characteristic = /** @class */ (function (_super) {\n    tslib_1.__extends(Characteristic, _super);\n    function Characteristic(displayName, UUID, props) {\n        var _this = _super.call(this) || this;\n        _this.iid = null;\n        _this.value = null;\n        /**\n         * @deprecated replaced by {@link statusCode}\n         * @private\n         */\n        _this.status = null;\n        /**\n         * @private\n         */\n        _this.statusCode = 0 /* HAPStatus.SUCCESS */;\n        _this.subscriptions = 0;\n        _this.displayName = displayName;\n        _this.UUID = UUID;\n        _this.props = {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"ev\" /* Perms.NOTIFY */],\n        };\n        _this.setProps(props || {}); // ensure sanity checks are called\n        return _this;\n    }\n    /**\n     * Accepts a function that will be called to retrieve the current value of a Characteristic.\n     * The function must return a valid Characteristic value for the Characteristic type.\n     * May optionally return a promise.\n     *\n     * @example\n     * ```ts\n     * Characteristic.onGet(async () => {\n     *   return true;\n     * });\n     * ```\n     * @param handler\n     */\n    Characteristic.prototype.onGet = function (handler) {\n        if (typeof handler !== \"function\") {\n            this.characteristicWarning(\".onGet handler must be a function\");\n            return this;\n        }\n        this.getHandler = handler;\n        return this;\n    };\n    /**\n     * Removes the {@link CharacteristicGetHandler} handler which was configured using {@link onGet}.\n     */\n    Characteristic.prototype.removeOnGet = function () {\n        this.getHandler = undefined;\n        return this;\n    };\n    /**\n     * Accepts a function that will be called when setting the value of a Characteristic.\n     * If the characteristic supports {@link Perms.WRITE_RESPONSE} and the request requests a write-response value,\n     * the returned value will be used.\n     * May optionally return a promise.\n     *\n     * @example\n     * ```ts\n     * Characteristic.onSet(async (value: CharacteristicValue) => {\n     *   console.log(value);\n     * });\n     * ```\n     * @param handler\n     */\n    Characteristic.prototype.onSet = function (handler) {\n        if (typeof handler !== \"function\") {\n            this.characteristicWarning(\".onSet handler must be a function\");\n            return this;\n        }\n        this.setHandler = handler;\n        return this;\n    };\n    /**\n     * Removes the {@link CharacteristicSetHandler} which was configured using {@link onSet}.\n     */\n    Characteristic.prototype.removeOnSet = function () {\n        this.setHandler = undefined;\n        return this;\n    };\n    /**\n     * Updates the properties of this characteristic.\n     * Properties passed via the parameter will be set. Any parameter set to null will be deleted.\n     * See {@link CharacteristicProps}.\n     *\n     * @param props - Partial properties object with the desired updates.\n     */\n    Characteristic.prototype.setProps = function (props) {\n        (0, assert_1.default)(props, \"props cannot be undefined when setting props\");\n        // TODO calling setProps after publish doesn't lead to a increment in the current configuration number\n        var formatDidChange = false;\n        // for every value \"null\" can be used to reset props, except for required props\n        if (props.format) {\n            formatDidChange = this.props.format !== props.format;\n            this.props.format = props.format;\n        }\n        if (props.perms) {\n            (0, assert_1.default)(props.perms.length > 0, \"characteristic prop perms cannot be empty array\");\n            this.props.perms = props.perms;\n        }\n        if (props.unit !== undefined) {\n            this.props.unit = props.unit != null ? props.unit : undefined;\n        }\n        if (props.description !== undefined) {\n            this.props.description = props.description != null ? props.description : undefined;\n        }\n        // check minValue is valid for the format type\n        if (props.minValue !== undefined) {\n            if (props.minValue === null) {\n                props.minValue = undefined;\n            }\n            else if (!(0, request_util_1.isNumericFormat)(this.props.format)) {\n                this.characteristicWarning(\"Characteristic Property 'minValue' can only be set for characteristics with numeric format, but not for \" + this.props.format, \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */);\n                props.minValue = undefined;\n            }\n            else if (typeof props.minValue !== \"number\" || !Number.isFinite(props.minValue)) {\n                this.characteristicWarning(\"Characteristic Property 'minValue' must be a finite number, received \\\"\".concat(props.minValue, \"\\\" (\").concat(typeof props.minValue, \")\"), \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */);\n                props.minValue = undefined;\n            }\n            else {\n                if (props.minValue < (0, request_util_1.numericLowerBound)(this.props.format)) {\n                    this.characteristicWarning(\"Characteristic Property 'minValue' was set to \" + props.minValue + \", but for numeric format \" +\n                        this.props.format + \" minimum possible is \" + (0, request_util_1.numericLowerBound)(this.props.format), \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */);\n                    props.minValue = (0, request_util_1.numericLowerBound)(this.props.format);\n                }\n                else if (props.minValue > (0, request_util_1.numericUpperBound)(this.props.format)) {\n                    this.characteristicWarning(\"Characteristic Property 'minValue' was set to \" + props.minValue + \", but for numeric format \" +\n                        this.props.format + \" maximum possible is \" + (0, request_util_1.numericUpperBound)(this.props.format), \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */);\n                    props.minValue = (0, request_util_1.numericLowerBound)(this.props.format);\n                }\n            }\n            this.props.minValue = props.minValue;\n        }\n        // check maxValue is valid for the format type\n        if (props.maxValue !== undefined) {\n            if (props.maxValue === null) {\n                props.maxValue = undefined;\n            }\n            else if (!(0, request_util_1.isNumericFormat)(this.props.format)) {\n                this.characteristicWarning(\"Characteristic Property 'maxValue' can only be set for characteristics with numeric format, but not for \" + this.props.format, \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */);\n                props.maxValue = undefined;\n            }\n            else if (typeof props.maxValue !== \"number\" || !Number.isFinite(props.maxValue)) {\n                this.characteristicWarning(\"Characteristic Property 'maxValue' must be a finite number, received \\\"\".concat(props.maxValue, \"\\\" (\").concat(typeof props.maxValue, \")\"), \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */);\n                props.maxValue = undefined;\n            }\n            else {\n                if (props.maxValue > (0, request_util_1.numericUpperBound)(this.props.format)) {\n                    this.characteristicWarning(\"Characteristic Property 'maxValue' was set to \" + props.maxValue + \", but for numeric format \" +\n                        this.props.format + \" maximum possible is \" + (0, request_util_1.numericUpperBound)(this.props.format), \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */);\n                    props.maxValue = (0, request_util_1.numericUpperBound)(this.props.format);\n                }\n                else if (props.maxValue < (0, request_util_1.numericLowerBound)(this.props.format)) {\n                    this.characteristicWarning(\"Characteristic Property 'maxValue' was set to \" + props.maxValue + \", but for numeric format \" +\n                        this.props.format + \" minimum possible is \" + (0, request_util_1.numericLowerBound)(this.props.format), \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */);\n                    props.maxValue = (0, request_util_1.numericUpperBound)(this.props.format);\n                }\n            }\n            this.props.maxValue = props.maxValue;\n        }\n        if (props.minStep !== undefined) {\n            if (props.minStep === null) {\n                this.props.minStep = undefined;\n            }\n            else if (!(0, request_util_1.isNumericFormat)(this.props.format)) {\n                this.characteristicWarning(\"Characteristic Property `minStep` can only be set for characteristics with numeric format, but not for \" + this.props.format, \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */);\n            }\n            else {\n                if (props.minStep < 1 && (0, request_util_1.isIntegerNumericFormat)(this.props.format)) {\n                    this.characteristicWarning(\"Characteristic Property `minStep` was set to a value lower than 1, \" +\n                        \"this will have no effect on format `\" + this.props.format);\n                }\n                this.props.minStep = props.minStep;\n            }\n        }\n        if (props.maxLen !== undefined) {\n            if (props.maxLen === null) {\n                this.props.maxLen = undefined;\n            }\n            else if (this.props.format !== \"string\" /* Formats.STRING */) {\n                this.characteristicWarning(\"Characteristic Property `maxLen` can only be set for characteristics with format `STRING`, but not for \" + this.props.format, \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */);\n            }\n            else {\n                if (props.maxLen > 256) {\n                    this.characteristicWarning(\"Characteristic Property string `maxLen` cannot be bigger than 256\");\n                    props.maxLen = 256;\n                }\n                this.props.maxLen = props.maxLen;\n            }\n        }\n        if (props.maxDataLen !== undefined) {\n            if (props.maxDataLen === null) {\n                this.props.maxDataLen = undefined;\n            }\n            else if (this.props.format !== \"data\" /* Formats.DATA */) {\n                this.characteristicWarning(\"Characteristic Property `maxDataLen` can only be set for characteristics with format `DATA`, but not for \" + this.props.format, \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */);\n            }\n            else {\n                this.props.maxDataLen = props.maxDataLen;\n            }\n        }\n        if (props.validValues !== undefined) {\n            if (props.validValues === null) {\n                this.props.validValues = undefined;\n            }\n            else if (!(0, request_util_1.isNumericFormat)(this.props.format)) {\n                this.characteristicWarning(\"Characteristic Property `validValues` was supplied for non numeric format \" + this.props.format);\n            }\n            else {\n                (0, assert_1.default)(props.validValues.length, \"characteristic prop validValues cannot be empty array\");\n                this.props.validValues = props.validValues;\n            }\n        }\n        if (props.validValueRanges !== undefined) {\n            if (props.validValueRanges === null) {\n                this.props.validValueRanges = undefined;\n            }\n            else if (!(0, request_util_1.isNumericFormat)(this.props.format)) {\n                this.characteristicWarning(\"Characteristic Property `validValueRanges` was supplied for non numeric format \" + this.props.format);\n            }\n            else {\n                (0, assert_1.default)(props.validValueRanges.length === 2, \"characteristic prop validValueRanges must have a length of 2\");\n                this.props.validValueRanges = props.validValueRanges;\n            }\n        }\n        if (props.adminOnlyAccess !== undefined) {\n            this.props.adminOnlyAccess = props.adminOnlyAccess != null ? props.adminOnlyAccess : undefined;\n        }\n        if (this.props.minValue != null && this.props.maxValue != null) { // the eqeq instead of eqeqeq is important here\n            if (this.props.minValue > this.props.maxValue) { // see https://github.com/homebridge/HAP-NodeJS/issues/690\n                this.props.minValue = undefined;\n                this.props.maxValue = undefined;\n                throw new Error(\"Error setting CharacteristicsProps for '\" + this.displayName + \"': 'minValue' cannot be greater or equal the 'maxValue'!\");\n            }\n        }\n        if (((0, request_util_1.isNumericFormat)(this.props.format) || this.props.format === \"string\" /* Formats.STRING */)\n            && this.value != null\n            && !formatDidChange\n            && this.statusCode === 0 /* HAPStatus.SUCCESS */\n            && this.UUID !== Characteristic.ProgrammableSwitchEvent.UUID) {\n            // explaining the if statement above:\n            // - We only do a check for numeric and string formats as they are the only ones affected by characteristic property restrictions.\n            // - There must be a value to begin with. Otherwise, it should just stay not having a value at all (anything else is guess work).\n            // - If the format is changed through `setProps` we rely on the user to supply a valid value after the `setProps` call!\n            // - If the characteristic is marked as erroneous the value is not considered valid anyway, and we must not remove the `statusCode`.\n            // - Special case for `ProgrammableSwitchEvent` where every change in value is considered an event which would result in ghost button presses\n            // validateUserInput when called from setProps is intended to clamp value withing allowed range. It is why warnings should not be displayed.\n            var correctedValue = this.validateUserInput(this.value, \"debug-message\" /* CharacteristicWarningType.DEBUG_MESSAGE */);\n            if (correctedValue !== this.value) {\n                // we don't want to emit a CHANGE event if the value didn't change at all!\n                this.updateValue(correctedValue);\n            }\n        }\n        return this;\n    };\n    /**\n     * This method can be used to gain an Iterator to loop over all valid values defined for this characteristic.\n     *\n     * The range of valid values can be defined using three different ways via the {@link CharacteristicProps} object\n     * (set via the {@link setProps} method):\n     *  * First method is to specifically list every valid value inside {@link CharacteristicProps.validValues}\n     *  * Second you can specify a range via {@link CharacteristicProps.minValue} and {@link CharacteristicProps.maxValue} (with optionally defining\n     *    {@link CharacteristicProps.minStep})\n     *  * And lastly you can specify a range via {@link CharacteristicProps.validValueRanges}\n     *  * Implicitly a valid value range is predefined for characteristics with Format {@link Formats.UINT8}, {@link Formats.UINT16},\n     *    {@link Formats.UINT32} and {@link Formats.UINT64}: starting by zero to their respective maximum number\n     *\n     * The method will automatically detect which type of valid values definition is used and provide\n     * the correct Iterator for that case.\n     *\n     * Note: This method is (obviously) only valid for numeric characteristics.\n     *\n     * @example\n     * ```ts\n     * // use the iterator to loop over every valid value...\n     * for (const value of characteristic.validValuesIterator()) {\n     *   // Insert logic to run for every\n     * }\n     *\n     * // ... or collect them in an array for storage or manipulation\n     * const validValues = Array.from(characteristic.validValuesIterator());\n     * ```\n     */\n    Characteristic.prototype.validValuesIterator = function () {\n        return new ValidValuesIterable(this.props);\n    };\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * This method can be used to set up additional authorization for a characteristic.\n     * For one, it adds the {@link Perms.ADDITIONAL_AUTHORIZATION} permission to the characteristic\n     * (if it wasn't already) to signal support for additional authorization to HomeKit.\n     * Additionally, an {@link AdditionalAuthorizationHandler} is set up which is called\n     * before a write request is performed.\n     *\n     * Additional Authorization Data can be added to SET request via a custom iOS App.\n     * Before hap-nodejs executes a write request it will call the {@link AdditionalAuthorizationHandler}\n     * with 'authData' supplied in the write request. The 'authData' is a base64 encoded string\n     * (or undefined if no authData was supplied).\n     * The {@link AdditionalAuthorizationHandler} must then return true or false to indicate if the write request\n     * is authorized and should be accepted.\n     *\n     * @param handler - Handler called to check additional authorization data.\n     */\n    Characteristic.prototype.setupAdditionalAuthorization = function (handler) {\n        if (!this.props.perms.includes(\"aa\" /* Perms.ADDITIONAL_AUTHORIZATION */)) {\n            this.props.perms.push(\"aa\" /* Perms.ADDITIONAL_AUTHORIZATION */);\n        }\n        this.additionalAuthorizationHandler = handler;\n    };\n    /**\n     * Updates the current value of the characteristic.\n     *\n     * @param callback\n     * @param context\n     * @private use to return the current value on HAP requests\n     *\n     * @deprecated\n     */\n    Characteristic.prototype.getValue = function (callback, context) {\n        this.handleGetRequest(undefined, context).then(function (value) {\n            if (callback) {\n                callback(null, value);\n            }\n        }, function (reason) {\n            if (callback) {\n                callback(reason);\n            }\n        });\n    };\n    Characteristic.prototype.setValue = function (value, callback, context) {\n        if (value instanceof Error) {\n            this.statusCode = value instanceof hapStatusError_1.HapStatusError ? value.hapStatus : extractHAPStatusFromError(value);\n            // noinspection JSDeprecatedSymbols\n            this.status = value;\n            if (callback) {\n                callback();\n            }\n            return this;\n        }\n        if (callback && !context && typeof callback !== \"function\") {\n            context = callback;\n            callback = undefined;\n        }\n        try {\n            value = this.validateUserInput(value);\n        }\n        catch (error) {\n            this.characteristicWarning((error === null || error === void 0 ? void 0 : error.message) + \"\", \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */, error === null || error === void 0 ? void 0 : error.stack);\n            if (callback) {\n                callback(error);\n            }\n            return this;\n        }\n        this.handleSetRequest(value, undefined, context).then(function (value) {\n            if (callback) {\n                if (value) { // possible write response\n                    callback(null, value);\n                }\n                else {\n                    callback(null);\n                }\n            }\n        }, function (reason) {\n            if (callback) {\n                callback(reason);\n            }\n        });\n        return this;\n    };\n    Characteristic.prototype.updateValue = function (value, callback, context) {\n        if (value instanceof Error) {\n            this.statusCode = value instanceof hapStatusError_1.HapStatusError ? value.hapStatus : extractHAPStatusFromError(value);\n            // noinspection JSDeprecatedSymbols\n            this.status = value;\n            if (callback) {\n                callback();\n            }\n            return this;\n        }\n        if (callback && !context && typeof callback !== \"function\") {\n            context = callback;\n            callback = undefined;\n        }\n        try {\n            value = this.validateUserInput(value);\n        }\n        catch (error) {\n            this.characteristicWarning((error === null || error === void 0 ? void 0 : error.message) + \"\", \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */, error === null || error === void 0 ? void 0 : error.stack);\n            if (callback) {\n                callback();\n            }\n            return this;\n        }\n        this.statusCode = 0 /* HAPStatus.SUCCESS */;\n        // noinspection JSDeprecatedSymbols\n        this.status = null;\n        var oldValue = this.value;\n        this.value = value;\n        if (callback) {\n            callback();\n        }\n        this.emit(\"change\" /* CharacteristicEventTypes.CHANGE */, { originator: undefined, oldValue: oldValue, newValue: value, reason: \"update\" /* ChangeReason.UPDATE */, context: context });\n        return this; // for chaining\n    };\n    /**\n     * This method acts similarly to {@link updateValue} by setting the current value of the characteristic\n     * without calling any {@link CharacteristicEventTypes.SET} or {@link onSet} handlers.\n     * The difference is that this method forces an event notification sent (updateValue only sends one if the value changed).\n     * This is especially useful for characteristics like {@link Characteristic.ButtonEvent} or {@link Characteristic.ProgrammableSwitchEvent}.\n     *\n     * @param value - The new value.\n     * @param context - Passed to the {@link CharacteristicEventTypes.CHANGE} event handler.\n     */\n    Characteristic.prototype.sendEventNotification = function (value, context) {\n        this.statusCode = 0 /* HAPStatus.SUCCESS */;\n        // noinspection JSDeprecatedSymbols\n        this.status = null;\n        value = this.validateUserInput(value);\n        var oldValue = this.value;\n        this.value = value;\n        this.emit(\"change\" /* CharacteristicEventTypes.CHANGE */, { originator: undefined, oldValue: oldValue, newValue: value, reason: \"event\" /* ChangeReason.EVENT */, context: context });\n        return this; // for chaining\n    };\n    /**\n     * Called when a HAP requests wants to know the current value of the characteristic.\n     *\n     * @param connection - The HAP connection from which the request originated from.\n     * @param context - Deprecated parameter. There for backwards compatibility.\n     * @private Used by the Accessory to load the characteristic value\n     */\n    Characteristic.prototype.handleGetRequest = function (connection, context) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var value, oldValue, error_1, hapStatusError;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.props.perms.includes(\"pr\" /* Perms.PAIRED_READ */)) { // check if we are allowed to read from this characteristic\n                            throw -70405 /* HAPStatus.WRITE_ONLY_CHARACTERISTIC */;\n                        }\n                        if (this.UUID === Characteristic.ProgrammableSwitchEvent.UUID) {\n                            // special workaround for event only programmable switch event, which must always return null\n                            return [2 /*return*/, null];\n                        }\n                        if (!this.getHandler) return [3 /*break*/, 4];\n                        if (this.listeners(\"get\" /* CharacteristicEventTypes.GET */).length > 0) {\n                            this.characteristicWarning(\"Ignoring on('get') handler as onGet handler was defined instead\");\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.getHandler(context, connection)];\n                    case 2:\n                        value = _a.sent();\n                        this.statusCode = 0 /* HAPStatus.SUCCESS */;\n                        // noinspection JSDeprecatedSymbols\n                        this.status = null;\n                        try {\n                            value = this.validateUserInput(value);\n                        }\n                        catch (error) {\n                            this.characteristicWarning(\"An illegal value was supplied by the read handler for characteristic: \".concat(error === null || error === void 0 ? void 0 : error.message), \"warn-message\" /* CharacteristicWarningType.WARN_MESSAGE */, error === null || error === void 0 ? void 0 : error.stack);\n                            this.statusCode = -70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */;\n                            // noinspection JSDeprecatedSymbols\n                            this.status = error;\n                            return [2 /*return*/, Promise.reject(-70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */)];\n                        }\n                        oldValue = this.value;\n                        this.value = value;\n                        if (oldValue !== value) { // emit a change event if necessary\n                            this.emit(\"change\" /* CharacteristicEventTypes.CHANGE */, { originator: connection, oldValue: oldValue, newValue: value, reason: \"read\" /* ChangeReason.READ */, context: context });\n                        }\n                        return [2 /*return*/, value];\n                    case 3:\n                        error_1 = _a.sent();\n                        if (typeof error_1 === \"number\") {\n                            hapStatusError = new hapStatusError_1.HapStatusError(error_1);\n                            this.statusCode = hapStatusError.hapStatus;\n                            // noinspection JSDeprecatedSymbols\n                            this.status = hapStatusError;\n                        }\n                        else if (error_1 instanceof hapStatusError_1.HapStatusError) {\n                            this.statusCode = error_1.hapStatus;\n                            // noinspection JSDeprecatedSymbols\n                            this.status = error_1;\n                        }\n                        else {\n                            this.characteristicWarning(\"Unhandled error thrown inside read handler for characteristic: \".concat(error_1 === null || error_1 === void 0 ? void 0 : error_1.message), \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */, error_1 === null || error_1 === void 0 ? void 0 : error_1.stack);\n                            this.statusCode = -70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */;\n                            // noinspection JSDeprecatedSymbols\n                            this.status = error_1;\n                        }\n                        throw this.statusCode;\n                    case 4:\n                        if (this.listeners(\"get\" /* CharacteristicEventTypes.GET */).length === 0) {\n                            if (this.statusCode) {\n                                throw this.statusCode;\n                            }\n                            try {\n                                return [2 /*return*/, this.validateUserInput(this.value)];\n                            }\n                            catch (error) {\n                                this.characteristicWarning(\"An illegal value was supplied by setting `value` for characteristic: \".concat(error === null || error === void 0 ? void 0 : error.message), \"warn-message\" /* CharacteristicWarningType.WARN_MESSAGE */, error === null || error === void 0 ? void 0 : error.stack);\n                                return [2 /*return*/, Promise.reject(-70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */)];\n                            }\n                        }\n                        return [2 /*return*/, new Promise(function (resolve, reject) {\n                                try {\n                                    _this.emit(\"get\" /* CharacteristicEventTypes.GET */, (0, once_1.once)(function (status, value) {\n                                        if (status) {\n                                            if (typeof status === \"number\") {\n                                                var hapStatusError = new hapStatusError_1.HapStatusError(status);\n                                                _this.statusCode = hapStatusError.hapStatus;\n                                                // noinspection JSDeprecatedSymbols\n                                                _this.status = hapStatusError;\n                                            }\n                                            else if (status instanceof hapStatusError_1.HapStatusError) {\n                                                _this.statusCode = status.hapStatus;\n                                                // noinspection JSDeprecatedSymbols\n                                                _this.status = status;\n                                            }\n                                            else {\n                                                debug(\"[%s] Received error from get handler %s\", _this.displayName, status.stack);\n                                                _this.statusCode = extractHAPStatusFromError(status);\n                                                // noinspection JSDeprecatedSymbols\n                                                _this.status = status;\n                                            }\n                                            reject(_this.statusCode);\n                                            return;\n                                        }\n                                        _this.statusCode = 0 /* HAPStatus.SUCCESS */;\n                                        // noinspection JSDeprecatedSymbols\n                                        _this.status = null;\n                                        value = _this.validateUserInput(value);\n                                        var oldValue = _this.value;\n                                        _this.value = value;\n                                        resolve(value);\n                                        if (oldValue !== value) { // emit a change event if necessary\n                                            _this.emit(\"change\" /* CharacteristicEventTypes.CHANGE */, { originator: connection, oldValue: oldValue, newValue: value, reason: \"read\" /* ChangeReason.READ */, context: context });\n                                        }\n                                    }), context, connection);\n                                }\n                                catch (error) {\n                                    _this.characteristicWarning(\"Unhandled error thrown inside read handler for characteristic: \".concat(error === null || error === void 0 ? void 0 : error.message), \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */, error === null || error === void 0 ? void 0 : error.stack);\n                                    _this.statusCode = -70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */;\n                                    // noinspection JSDeprecatedSymbols\n                                    _this.status = error;\n                                    reject(-70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */);\n                                }\n                            })];\n                }\n            });\n        });\n    };\n    /**\n     * Called when a HAP requests update the current value of the characteristic.\n     *\n     * @param value - The updated value\n     * @param connection - The connection from which the request originated from\n     * @param context - Deprecated parameter. There for backwards compatibility.\n     * @returns Promise resolve to void in normal operation. When characteristic supports write-response, HAP\n     *  requests a write-response and the set handler returns a write-response value, the respective\n     *  write response value is resolved.\n     * @private\n     */\n    Characteristic.prototype.handleSetRequest = function (value, connection, context) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var oldValue, writeResponse, error_2, hapStatusError;\n            var _this = this;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.statusCode = 0 /* HAPStatus.SUCCESS */;\n                        // noinspection JSDeprecatedSymbols\n                        this.status = null;\n                        if (connection !== undefined) {\n                            // if connection is undefined, the set \"request\" comes from the setValue method.\n                            // for setValue a value of \"null\" is allowed and checked via validateUserInput.\n                            try {\n                                value = this.validateClientSuppliedValue(value);\n                            }\n                            catch (e) {\n                                debug(\"[\".concat(this.displayName, \"]\"), e.message);\n                                return [2 /*return*/, Promise.reject(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */)];\n                            }\n                        }\n                        oldValue = this.value;\n                        if (!this.setHandler) return [3 /*break*/, 4];\n                        if (this.listeners(\"set\" /* CharacteristicEventTypes.SET */).length > 0) {\n                            this.characteristicWarning(\"Ignoring on('set') handler as onSet handler was defined instead\");\n                        }\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.setHandler(value, context, connection)];\n                    case 2:\n                        writeResponse = _a.sent();\n                        this.statusCode = 0 /* HAPStatus.SUCCESS */;\n                        // noinspection JSDeprecatedSymbols\n                        this.status = null;\n                        if (writeResponse != null && this.props.perms.includes(\"wr\" /* Perms.WRITE_RESPONSE */)) {\n                            this.value = this.validateUserInput(writeResponse);\n                            return [2 /*return*/, this.value];\n                        }\n                        else {\n                            if (writeResponse != null) {\n                                this.characteristicWarning(\"SET handler returned write response value, though the characteristic doesn't support write response\", \"debug-message\" /* CharacteristicWarningType.DEBUG_MESSAGE */);\n                            }\n                            this.value = value;\n                            this.emit(\"change\" /* CharacteristicEventTypes.CHANGE */, { originator: connection, oldValue: oldValue, newValue: value, reason: \"write\" /* ChangeReason.WRITE */, context: context });\n                            return [2 /*return*/];\n                        }\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_2 = _a.sent();\n                        if (typeof error_2 === \"number\") {\n                            hapStatusError = new hapStatusError_1.HapStatusError(error_2);\n                            this.statusCode = hapStatusError.hapStatus;\n                            // noinspection JSDeprecatedSymbols\n                            this.status = hapStatusError;\n                        }\n                        else if (error_2 instanceof hapStatusError_1.HapStatusError) {\n                            this.statusCode = error_2.hapStatus;\n                            // noinspection JSDeprecatedSymbols\n                            this.status = error_2;\n                        }\n                        else {\n                            this.characteristicWarning(\"Unhandled error thrown inside write handler for characteristic: \".concat(error_2 === null || error_2 === void 0 ? void 0 : error_2.message), \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */, error_2 === null || error_2 === void 0 ? void 0 : error_2.stack);\n                            this.statusCode = -70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */;\n                            // noinspection JSDeprecatedSymbols\n                            this.status = error_2;\n                        }\n                        throw this.statusCode;\n                    case 4:\n                        if (this.listeners(\"set\" /* CharacteristicEventTypes.SET */).length === 0) {\n                            this.value = value;\n                            this.emit(\"change\" /* CharacteristicEventTypes.CHANGE */, { originator: connection, oldValue: oldValue, newValue: value, reason: \"write\" /* ChangeReason.WRITE */, context: context });\n                            return [2 /*return*/, Promise.resolve()];\n                        }\n                        else {\n                            return [2 /*return*/, new Promise(function (resolve, reject) {\n                                    try {\n                                        _this.emit(\"set\" /* CharacteristicEventTypes.SET */, value, (0, once_1.once)(function (status, writeResponse) {\n                                            if (status) {\n                                                if (typeof status === \"number\") {\n                                                    var hapStatusError = new hapStatusError_1.HapStatusError(status);\n                                                    _this.statusCode = hapStatusError.hapStatus;\n                                                    // noinspection JSDeprecatedSymbols\n                                                    _this.status = hapStatusError;\n                                                }\n                                                else if (status instanceof hapStatusError_1.HapStatusError) {\n                                                    _this.statusCode = status.hapStatus;\n                                                    // noinspection JSDeprecatedSymbols\n                                                    _this.status = status;\n                                                }\n                                                else {\n                                                    debug(\"[%s] Received error from set handler %s\", _this.displayName, status.stack);\n                                                    _this.statusCode = extractHAPStatusFromError(status);\n                                                    // noinspection JSDeprecatedSymbols\n                                                    _this.status = status;\n                                                }\n                                                reject(_this.statusCode);\n                                                return;\n                                            }\n                                            _this.statusCode = 0 /* HAPStatus.SUCCESS */;\n                                            // noinspection JSDeprecatedSymbols\n                                            _this.status = null;\n                                            if (writeResponse != null && _this.props.perms.includes(\"wr\" /* Perms.WRITE_RESPONSE */)) {\n                                                // support write response simply by letting the implementor pass the response as second argument to the callback\n                                                _this.value = _this.validateUserInput(writeResponse);\n                                                resolve(_this.value);\n                                            }\n                                            else {\n                                                if (writeResponse != null) {\n                                                    _this.characteristicWarning(\"SET handler returned write response value, though the characteristic doesn't support write response\", \"debug-message\" /* CharacteristicWarningType.DEBUG_MESSAGE */);\n                                                }\n                                                _this.value = value;\n                                                resolve();\n                                                _this.emit(\"change\" /* CharacteristicEventTypes.CHANGE */, { originator: connection, oldValue: oldValue, newValue: value, reason: \"write\" /* ChangeReason.WRITE */, context: context });\n                                            }\n                                        }), context, connection);\n                                    }\n                                    catch (error) {\n                                        _this.characteristicWarning(\"Unhandled error thrown inside write handler for characteristic: \".concat(error === null || error === void 0 ? void 0 : error.message), \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */, error === null || error === void 0 ? void 0 : error.stack);\n                                        _this.statusCode = -70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */;\n                                        // noinspection JSDeprecatedSymbols\n                                        _this.status = error;\n                                        reject(-70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */);\n                                    }\n                                })];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Called once a HomeKit controller subscribes to events of this characteristic.\n     * @private\n     */\n    Characteristic.prototype.subscribe = function () {\n        if (this.subscriptions === 0) {\n            this.emit(\"subscribe\" /* CharacteristicEventTypes.SUBSCRIBE */);\n        }\n        this.subscriptions++;\n    };\n    /**\n     * Called once a HomeKit controller unsubscribe to events of this characteristic or a HomeKit controller\n     * which was subscribed to this characteristic disconnects.\n     * @private\n     */\n    Characteristic.prototype.unsubscribe = function () {\n        var wasOne = this.subscriptions === 1;\n        this.subscriptions--;\n        this.subscriptions = Math.max(this.subscriptions, 0);\n        if (wasOne) {\n            this.emit(\"unsubscribe\" /* CharacteristicEventTypes.UNSUBSCRIBE */);\n        }\n    };\n    Characteristic.prototype.getDefaultValue = function () {\n        var _a;\n        // noinspection JSDeprecatedSymbols\n        switch (this.props.format) {\n            case \"bool\" /* Formats.BOOL */:\n                return false;\n            case \"string\" /* Formats.STRING */:\n                switch (this.UUID) {\n                    case Characteristic.Manufacturer.UUID:\n                        return \"Default-Manufacturer\";\n                    case Characteristic.Model.UUID:\n                        return \"Default-Model\";\n                    case Characteristic.SerialNumber.UUID:\n                        return \"Default-SerialNumber\";\n                    case Characteristic.FirmwareRevision.UUID:\n                        return \"0.0.0\";\n                    default:\n                        return \"\";\n                }\n            case \"data\" /* Formats.DATA */:\n                return \"\"; // who knows!\n            case \"tlv8\" /* Formats.TLV8 */:\n                return \"\"; // who knows!\n            case \"dict\" /* Formats.DICTIONARY */:\n                return {};\n            case \"array\" /* Formats.ARRAY */:\n                return [];\n            case \"int\" /* Formats.INT */:\n            case \"float\" /* Formats.FLOAT */:\n            case \"uint8\" /* Formats.UINT8 */:\n            case \"uint16\" /* Formats.UINT16 */:\n            case \"uint32\" /* Formats.UINT32 */:\n            case \"uint64\" /* Formats.UINT64 */:\n                switch (this.UUID) {\n                    case Characteristic.CurrentTemperature.UUID:\n                        return 0; // some existing integrations expect this to be 0 by default\n                    default: {\n                        if (((_a = this.props.validValues) === null || _a === void 0 ? void 0 : _a.length) && typeof this.props.validValues[0] === \"number\") {\n                            return this.props.validValues[0];\n                        }\n                        if (typeof this.props.minValue === \"number\" && Number.isFinite(this.props.minValue)) {\n                            return this.props.minValue;\n                        }\n                        return 0;\n                    }\n                }\n            default:\n                return 0;\n        }\n    };\n    /**\n     * Checks if the value received from the HAP request is valid.\n     * If returned false the received value is not valid and {@link HAPStatus.INVALID_VALUE_IN_REQUEST}\n     * must be returned.\n     * @param value - Value supplied by the HomeKit controller\n     */\n    Characteristic.prototype.validateClientSuppliedValue = function (value) {\n        if (value == null) {\n            throw new Error(\"Client supplied invalid value for \".concat(this.props.format, \": \").concat(value));\n        }\n        switch (this.props.format) {\n            case \"bool\" /* Formats.BOOL */: {\n                if (typeof value === \"boolean\") {\n                    return value;\n                }\n                if (typeof value === \"number\" && (value === 1 || value === 0)) {\n                    return Boolean(value);\n                }\n                throw new Error(\"Client supplied invalid type for \".concat(this.props.format, \": \\\"\").concat(value, \"\\\" (\").concat(typeof value, \")\"));\n            }\n            case \"int\" /* Formats.INT */:\n            case \"float\" /* Formats.FLOAT */:\n            case \"uint8\" /* Formats.UINT8 */:\n            case \"uint16\" /* Formats.UINT16 */:\n            case \"uint32\" /* Formats.UINT32 */:\n            case \"uint64\" /* Formats.UINT64 */: {\n                if (typeof value === \"boolean\") {\n                    value = value ? 1 : 0;\n                }\n                if (typeof value !== \"number\" || !Number.isFinite(value)) {\n                    throw new Error(\"Client supplied invalid type for \".concat(this.props.format, \": \\\"\").concat(value, \"\\\" (\").concat(typeof value, \")\"));\n                }\n                var numericMin = maxWithUndefined(this.props.minValue, (0, request_util_1.numericLowerBound)(this.props.format));\n                var numericMax = minWithUndefined(this.props.maxValue, (0, request_util_1.numericUpperBound)(this.props.format));\n                if (typeof numericMin === \"number\" && value < numericMin) {\n                    throw new Error(\"Client supplied value of \".concat(value, \" is less than the minimum allowed value of \").concat(numericMin));\n                }\n                if (typeof numericMax === \"number\" && value > numericMax) {\n                    throw new Error(\"Client supplied value of \".concat(value, \" is greater than the maximum allowed value of \").concat(numericMax));\n                }\n                if (this.props.validValues && !this.props.validValues.includes(value)) {\n                    throw new Error(\"Client supplied value of \".concat(value, \" is not in \").concat(this.props.validValues.toString()));\n                }\n                if (this.props.validValueRanges && this.props.validValueRanges.length === 2) {\n                    if (value < this.props.validValueRanges[0]) {\n                        throw new Error(\"Client supplied value of \".concat(value, \" is less than the minimum allowed value of \").concat(this.props.validValueRanges[0]));\n                    }\n                    if (value > this.props.validValueRanges[1]) {\n                        throw new Error(\"Client supplied value of \".concat(value, \" is greater than the maximum allowed value of \").concat(this.props.validValueRanges[1]));\n                    }\n                }\n                return value;\n            }\n            case \"string\" /* Formats.STRING */: {\n                if (typeof value !== \"string\") {\n                    throw new Error(\"Client supplied invalid type for \".concat(this.props.format, \": \\\"\").concat(value, \"\\\" (\").concat(typeof value, \")\"));\n                }\n                var maxLength = this.props.maxLen != null ? this.props.maxLen : 64; // default is 64; max is 256 which is set in setProps\n                if (value.length > maxLength) {\n                    throw new Error(\"Client supplied value length of \".concat(value.length, \" exceeds maximum length allowed of \").concat(maxLength));\n                }\n                return value;\n            }\n            case \"data\" /* Formats.DATA */: {\n                if (typeof value !== \"string\") {\n                    throw new Error(\"Client supplied invalid type for \".concat(this.props.format, \": \\\"\").concat(value, \"\\\" (\").concat(typeof value, \")\"));\n                }\n                // we don't validate base64 here\n                var maxLength = this.props.maxDataLen != null ? this.props.maxDataLen : 0x200000; // default is 0x200000\n                if (value.length > maxLength) {\n                    throw new Error(\"Client supplied value length of \".concat(value.length, \" exceeds maximum length allowed of \").concat(maxLength));\n                }\n                return value;\n            }\n            case \"tlv8\" /* Formats.TLV8 */:\n                if (typeof value !== \"string\") {\n                    throw new Error(\"Client supplied invalid type for \".concat(this.props.format, \": \\\"\").concat(value, \"\\\" (\").concat(typeof value, \")\"));\n                }\n                return value;\n        }\n        return value;\n    };\n    /**\n     * Checks if the value received from the API call is valid.\n     * It adjusts the value where it makes sense, prints a warning where values may be rejected with an error\n     * in the future and throws an error which can't be converted to a valid value.\n     *\n     * @param value - The value received from the API call\n     * @param warningType - Optionally defines the warning type to use when raising a {@link CharacteristicEventTypes.CHARACTERISTIC_WARNING}.\n     */\n    Characteristic.prototype.validateUserInput = function (value, warningType) {\n        var _a;\n        if (warningType === void 0) { warningType = \"warn-message\" /* CharacteristicWarningType.WARN_MESSAGE */; }\n        if (value === null) {\n            if (this.UUID === Characteristic.Model.UUID || this.UUID === Characteristic.SerialNumber.UUID) { // mirrors the statement in case: Formats.STRING\n                this.characteristicWarning(\"characteristic must have a non null value otherwise HomeKit will reject this accessory, ignoring new value\", \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */);\n                return this.value; // don't change the value\n            }\n            if (this.props.format === \"data\" /* Formats.DATA */ || this.props.format === \"tlv8\" /* Formats.TLV8 */) {\n                return value; // TLV8 and DATA formats are allowed to have null as a value\n            }\n            /**\n             * A short disclaimer here.\n             * null is actually a perfectly valid value for characteristics to have.\n             * The Home app will show \"no response\" for some characteristics for which it can't handle null\n             * but ultimately its valid and the developers decision what the return.\n             * BUT: out of history hap-nodejs did replace null with the last known value and thus\n             * homebridge devs started to adopting this method as a way of not changing the value in a GET handler.\n             * As an intermediate step we kept the behavior but added a warning printed to the console.\n             * In a future update we will do the breaking change of return null below!\n             */\n            if (this.UUID.endsWith(uuid_1.BASE_UUID)) { // we have an apple defined characteristic (at least assuming nobody else uses the UUID namespace)\n                if (this.UUID === Characteristic.ProgrammableSwitchEvent.UUID) {\n                    return value; // null is allowed as a value for ProgrammableSwitchEvent\n                }\n                this.characteristicWarning(\"characteristic was supplied illegal value: null! Home App will reject null for Apple defined characteristics\", warningType);\n                // if the value has been set previously, return it now, otherwise continue with validation to have a default value set.\n                if (this.value !== null) {\n                    return this.value;\n                }\n            }\n            else {\n                // we currently allow null for any non-custom defined characteristics\n                return value;\n            }\n        }\n        switch (this.props.format) {\n            case \"bool\" /* Formats.BOOL */: {\n                if (typeof value === \"boolean\") {\n                    return value;\n                }\n                if (typeof value === \"number\") {\n                    return value === 1;\n                }\n                if (typeof value === \"string\") {\n                    return value === \"1\" || value === \"true\";\n                }\n                this.characteristicWarning(\"characteristic value expected boolean and received \" + typeof value, warningType);\n                return false;\n            }\n            case \"int\" /* Formats.INT */:\n            case \"float\" /* Formats.FLOAT */:\n            case \"uint8\" /* Formats.UINT8 */:\n            case \"uint16\" /* Formats.UINT16 */:\n            case \"uint32\" /* Formats.UINT32 */:\n            case \"uint64\" /* Formats.UINT64 */: {\n                if (typeof value === \"boolean\") {\n                    value = value ? 1 : 0;\n                }\n                if (typeof value === \"string\") {\n                    value = this.props.format === \"float\" /* Formats.FLOAT */ ? parseFloat(value) : parseInt(value, 10);\n                }\n                if (typeof value !== \"number\" || !Number.isFinite(value)) {\n                    this.characteristicWarning(\"characteristic value expected valid finite number and received \\\"\".concat(value, \"\\\" (\").concat(typeof value, \")\"), warningType);\n                    value = typeof this.value === \"number\" ? this.value : this.props.minValue || 0;\n                }\n                var numericMin = maxWithUndefined(this.props.minValue, (0, request_util_1.numericLowerBound)(this.props.format));\n                var numericMax = minWithUndefined(this.props.maxValue, (0, request_util_1.numericUpperBound)(this.props.format));\n                var stepValue = undefined;\n                if (this.props.format === \"float\" /* Formats.FLOAT */) {\n                    stepValue = this.props.minStep;\n                }\n                else {\n                    stepValue = maxWithUndefined(this.props.minStep, 1);\n                }\n                if (stepValue != null && stepValue > 0) {\n                    var minValue = this.props.minValue != null ? this.props.minValue : 0;\n                    value = stepValue * Math.round((value - minValue) / stepValue) + minValue;\n                }\n                if (numericMin != null && value < numericMin) {\n                    this.characteristicWarning(\"characteristic was supplied illegal value: number \".concat(value, \" exceeded minimum of \").concat(numericMin), warningType);\n                    value = numericMin;\n                }\n                if (numericMax != null && value > numericMax) {\n                    this.characteristicWarning(\"characteristic was supplied illegal value: number \".concat(value, \" exceeded maximum of \").concat(numericMax), warningType);\n                    value = numericMax;\n                }\n                if (this.props.validValues && !this.props.validValues.includes(value)) {\n                    this.characteristicWarning(\"characteristic value \".concat(value, \" is not contained in valid values array\"), warningType);\n                    return this.props.validValues.includes(this.value) ? this.value : (this.props.validValues[0] || 0);\n                }\n                if (this.props.validValueRanges && this.props.validValueRanges.length === 2) {\n                    if (value < this.props.validValueRanges[0]) {\n                        this.characteristicWarning(\"characteristic was supplied illegal value: number \".concat(value, \" not contained in valid value range of           \").concat(this.props.validValueRanges, \", supplying illegal values will throw errors in the future\"), warningType);\n                        value = this.props.validValueRanges[0];\n                    }\n                    else if (value > this.props.validValueRanges[1]) {\n                        this.characteristicWarning(\"characteristic was supplied illegal value: number \".concat(value, \" not contained in valid value range of           \").concat(this.props.validValueRanges, \", supplying illegal values will throw errors in the future\"), warningType);\n                        value = this.props.validValueRanges[1];\n                    }\n                }\n                return value;\n            }\n            case \"string\" /* Formats.STRING */: {\n                if (typeof value === \"number\") {\n                    this.characteristicWarning(\"characteristic was supplied illegal value: number instead of string, \" +\n                        \"supplying illegal values will throw errors in the future\", warningType);\n                    value = String(value);\n                }\n                if (typeof value !== \"string\") {\n                    this.characteristicWarning(\"characteristic value expected string and received \" + (typeof value), warningType);\n                    value = typeof this.value === \"string\" ? this.value : value + \"\";\n                }\n                // mirrors the case value = null at the beginning\n                if (value.length <= 1 && (this.UUID === Characteristic.Model.UUID || this.UUID === Characteristic.SerialNumber.UUID)) {\n                    this.characteristicWarning(\"[\".concat(this.displayName, \"] characteristic must have a length of more than 1 character otherwise         HomeKit will reject this accessory, ignoring new value\"), warningType);\n                    return this.value; // just return the current value\n                }\n                var maxLength = (_a = this.props.maxLen) !== null && _a !== void 0 ? _a : 64; // default is 64 (max is 256 which is set in setProps)\n                if (value.length > maxLength) {\n                    this.characteristicWarning(\"characteristic was supplied illegal value: string '\".concat(value, \"' exceeded max length of \").concat(maxLength), warningType);\n                    value = value.substring(0, maxLength);\n                }\n                return value;\n            }\n            case \"data\" /* Formats.DATA */:\n                if (typeof value !== \"string\") {\n                    throw new Error(\"characteristic with DATA format must have string value\");\n                }\n                if (this.props.maxDataLen != null && value.length > this.props.maxDataLen) {\n                    // can't cut it as we would basically set binary rubbish afterwards\n                    throw new Error(\"characteristic with DATA format exceeds specified maxDataLen\");\n                }\n                return value;\n            case \"tlv8\" /* Formats.TLV8 */:\n                if (value === undefined) {\n                    this.characteristicWarning(\"characteristic was supplied illegal value: undefined\", warningType);\n                    return this.value;\n                }\n                return value; // we trust that this is valid tlv8\n        }\n        // hopefully it shouldn't get to this point\n        if (value === undefined) {\n            this.characteristicWarning(\"characteristic was supplied illegal value: undefined\", \"error-message\" /* CharacteristicWarningType.ERROR_MESSAGE */);\n            return this.value;\n        }\n        return value;\n    };\n    /**\n     * @private used to assign iid to characteristic\n     */\n    Characteristic.prototype._assignID = function (identifierCache, accessoryName, serviceUUID, serviceSubtype) {\n        // generate our IID based on our UUID\n        this.iid = identifierCache.getIID(accessoryName, serviceUUID, serviceSubtype, this.UUID);\n    };\n    Characteristic.prototype.characteristicWarning = function (message, type, stack) {\n        if (type === void 0) { type = \"warn-message\" /* CharacteristicWarningType.WARN_MESSAGE */; }\n        if (stack === void 0) { stack = new Error().stack; }\n        this.emit(\"characteristic-warning\" /* CharacteristicEventTypes.CHARACTERISTIC_WARNING */, type, message, stack);\n    };\n    /**\n     * @param event\n     * @private\n     */\n    Characteristic.prototype.removeAllListeners = function (event) {\n        if (!event) {\n            this.removeOnGet();\n            this.removeOnSet();\n        }\n        return _super.prototype.removeAllListeners.call(this, event);\n    };\n    /**\n     * @param characteristic\n     * @private\n     */\n    Characteristic.prototype.replaceBy = function (characteristic) {\n        var _this = this;\n        this.props = characteristic.props;\n        this.updateValue(characteristic.value);\n        var getListeners = characteristic.listeners(\"get\" /* CharacteristicEventTypes.GET */);\n        if (getListeners.length) {\n            // the callback can only be called once, so we remove all old listeners\n            this.removeAllListeners(\"get\" /* CharacteristicEventTypes.GET */);\n            // @ts-expect-error: force type\n            getListeners.forEach(function (listener) { return _this.addListener(\"get\" /* CharacteristicEventTypes.GET */, listener); });\n        }\n        this.removeOnGet();\n        if (characteristic.getHandler) {\n            this.onGet(characteristic.getHandler);\n        }\n        var setListeners = characteristic.listeners(\"set\" /* CharacteristicEventTypes.SET */);\n        if (setListeners.length) {\n            // the callback can only be called once, so we remove all old listeners\n            this.removeAllListeners(\"set\" /* CharacteristicEventTypes.SET */);\n            // @ts-expect-error: force type\n            setListeners.forEach(function (listener) { return _this.addListener(\"set\" /* CharacteristicEventTypes.SET */, listener); });\n        }\n        this.removeOnSet();\n        if (characteristic.setHandler) {\n            this.onSet(characteristic.setHandler);\n        }\n    };\n    /**\n     * Returns a JSON representation of this characteristic suitable for delivering to HAP clients.\n     * @private used to generate response to /accessories query\n     */\n    Characteristic.prototype.toHAP = function (connection_1) {\n        return tslib_1.__awaiter(this, arguments, void 0, function (connection, contactGetHandlers) {\n            var object, value, _a;\n            var _this = this;\n            if (contactGetHandlers === void 0) { contactGetHandlers = true; }\n            return tslib_1.__generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        object = this.internalHAPRepresentation();\n                        if (!!this.props.perms.includes(\"pr\" /* Perms.PAIRED_READ */)) return [3 /*break*/, 1];\n                        object.value = undefined;\n                        return [3 /*break*/, 6];\n                    case 1:\n                        if (!(this.UUID === Characteristic.ProgrammableSwitchEvent.UUID)) return [3 /*break*/, 2];\n                        // special workaround for event only programmable switch event, which must always return null\n                        object.value = null;\n                        return [3 /*break*/, 6];\n                    case 2:\n                        if (!contactGetHandlers) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.handleGetRequest(connection).catch(function () {\n                                var value = _this.getDefaultValue();\n                                debug(\"[%s] Error getting value for characteristic on /accessories request. Returning default value instead: %s\", _this.displayName, \"\".concat(value));\n                                return value; // use default value\n                            })];\n                    case 3:\n                        _a = _b.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        _a = this.value;\n                        _b.label = 5;\n                    case 5:\n                        value = _a;\n                        object.value = (0, request_util_1.formatOutgoingCharacteristicValue)(value, this.props);\n                        _b.label = 6;\n                    case 6: return [2 /*return*/, object];\n                }\n            });\n        });\n    };\n    /**\n     * Returns a JSON representation of this characteristic without the value.\n     * @private used to generate the config hash\n     */\n    Characteristic.prototype.internalHAPRepresentation = function () {\n        (0, assert_1.default)(this.iid, \"iid cannot be undefined for characteristic '\" + this.displayName + \"'\");\n        // TODO include the value for characteristics of the AccessoryInformation service\n        return {\n            type: (0, uuid_1.toShortForm)(this.UUID),\n            iid: this.iid,\n            value: null,\n            perms: this.props.perms,\n            description: this.props.description || this.displayName,\n            format: this.props.format,\n            unit: this.props.unit,\n            minValue: this.props.minValue,\n            maxValue: this.props.maxValue,\n            minStep: this.props.minStep,\n            maxLen: this.props.maxLen,\n            maxDataLen: this.props.maxDataLen,\n            \"valid-values\": this.props.validValues,\n            \"valid-values-range\": this.props.validValueRanges,\n        };\n    };\n    /**\n     * Serialize characteristic into json string.\n     *\n     * @param characteristic - Characteristic object.\n     * @private used to store characteristic on disk\n     */\n    Characteristic.serialize = function (characteristic) {\n        var constructorName;\n        if (characteristic.constructor.name !== \"Characteristic\") {\n            constructorName = characteristic.constructor.name;\n        }\n        return {\n            displayName: characteristic.displayName,\n            UUID: characteristic.UUID,\n            eventOnlyCharacteristic: characteristic.UUID === Characteristic.ProgrammableSwitchEvent.UUID, // support downgrades for now\n            constructorName: constructorName,\n            value: characteristic.value,\n            props: (0, clone_1.clone)({}, characteristic.props),\n        };\n    };\n    /**\n     * Deserialize characteristic from json string.\n     *\n     * @param json - Json string representing a characteristic.\n     * @private used to recreate characteristic from disk\n     */\n    Characteristic.deserialize = function (json) {\n        var characteristic;\n        if (json.constructorName && json.constructorName.charAt(0).toUpperCase() === json.constructorName.charAt(0)\n            && Characteristic[json.constructorName]) { // MUST start with uppercase character and must exist on Characteristic object\n            var constructor = Characteristic[json.constructorName];\n            characteristic = new constructor();\n            characteristic.displayName = json.displayName;\n            characteristic.setProps(json.props);\n        }\n        else {\n            characteristic = new Characteristic(json.displayName, json.UUID, json.props);\n        }\n        characteristic.value = json.value;\n        return characteristic;\n    };\n    /**\n     * @deprecated Please use the Formats const enum above.\n     */\n    // @ts-expect-error: forceConsistentCasingInFileNames compiler option\n    Characteristic.Formats = Formats;\n    /**\n     * @deprecated Please use the Units const enum above.\n     */\n    // @ts-expect-error: forceConsistentCasingInFileNames compiler option\n    Characteristic.Units = Units;\n    /**\n     * @deprecated Please use the Perms const enum above.\n     */\n    // @ts-expect-error: forceConsistentCasingInFileNames compiler option\n    Characteristic.Perms = Perms;\n    return Characteristic;\n}(events_1.EventEmitter));\nexports.Characteristic = Characteristic;\n// We have a cyclic dependency problem. Within this file we have the definitions of \"./definitions\" as\n// type imports only (in order to define the static properties). Setting those properties is done outside\n// this file, within the definition files. Therefore, we import it at the end of this file. Seems weird, but is important.\nrequire(\"./definitions/CharacteristicDefinitions\");\n//# sourceMappingURL=Characteristic.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HAPServer = exports.HAPServerEventTypes = exports.HAPPairingHTTPCode = exports.HAPHTTPCode = exports.Status = exports.Codes = exports.IsKnownHAPStatusError = exports.HAPStatus = exports.TLVErrorCode = void 0;\nvar tslib_1 = require(\"tslib\");\nvar crypto_1 = tslib_1.__importDefault(require(\"crypto\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar events_1 = require(\"events\");\nvar fast_srp_hap_1 = require(\"fast-srp-hap\");\nvar tweetnacl_1 = tslib_1.__importDefault(require(\"tweetnacl\"));\nvar url_1 = require(\"url\");\nvar internal_types_1 = require(\"../internal-types\");\nvar eventedhttp_1 = require(\"./util/eventedhttp\");\nvar hapCrypto = tslib_1.__importStar(require(\"./util/hapCrypto\"));\nvar once_1 = require(\"./util/once\");\nvar tlv = tslib_1.__importStar(require(\"./util/tlv\"));\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:HAPServer\");\n/**\n * TLV error codes for the `TLVValues.ERROR_CODE` field.\n *\n * @group HAP Accessory Server\n */\nvar TLVErrorCode;\n(function (TLVErrorCode) {\n    // noinspection JSUnusedGlobalSymbols\n    TLVErrorCode[TLVErrorCode[\"UNKNOWN\"] = 1] = \"UNKNOWN\";\n    TLVErrorCode[TLVErrorCode[\"INVALID_REQUEST\"] = 2] = \"INVALID_REQUEST\";\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    TLVErrorCode[TLVErrorCode[\"AUTHENTICATION\"] = 2] = \"AUTHENTICATION\";\n    TLVErrorCode[TLVErrorCode[\"BACKOFF\"] = 3] = \"BACKOFF\";\n    TLVErrorCode[TLVErrorCode[\"MAX_PEERS\"] = 4] = \"MAX_PEERS\";\n    TLVErrorCode[TLVErrorCode[\"MAX_TRIES\"] = 5] = \"MAX_TRIES\";\n    TLVErrorCode[TLVErrorCode[\"UNAVAILABLE\"] = 6] = \"UNAVAILABLE\";\n    TLVErrorCode[TLVErrorCode[\"BUSY\"] = 7] = \"BUSY\"; // cannot accept pairing request at this time\n})(TLVErrorCode || (exports.TLVErrorCode = TLVErrorCode = {}));\n/**\n * @group HAP Accessory Server\n */\nvar HAPStatus;\n(function (HAPStatus) {\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Success of the request.\n     */\n    HAPStatus[HAPStatus[\"SUCCESS\"] = 0] = \"SUCCESS\";\n    /**\n     * The request was rejected due to insufficient privileges.\n     */\n    HAPStatus[HAPStatus[\"INSUFFICIENT_PRIVILEGES\"] = -70401] = \"INSUFFICIENT_PRIVILEGES\";\n    /**\n     * Operation failed due to some communication failure with the characteristic.\n     */\n    HAPStatus[HAPStatus[\"SERVICE_COMMUNICATION_FAILURE\"] = -70402] = \"SERVICE_COMMUNICATION_FAILURE\";\n    /**\n     * The resource is busy. Try again.\n     */\n    HAPStatus[HAPStatus[\"RESOURCE_BUSY\"] = -70403] = \"RESOURCE_BUSY\";\n    /**\n     * Cannot write a read-only characteristic ({@link Perms.PAIRED_WRITE} not defined).\n     */\n    HAPStatus[HAPStatus[\"READ_ONLY_CHARACTERISTIC\"] = -70404] = \"READ_ONLY_CHARACTERISTIC\";\n    /**\n     * Cannot read from a write-only characteristic ({@link Perms.PAIRED_READ} not defined).\n     */\n    HAPStatus[HAPStatus[\"WRITE_ONLY_CHARACTERISTIC\"] = -70405] = \"WRITE_ONLY_CHARACTERISTIC\";\n    /**\n     * Event notifications are not supported for the requested characteristic ({@link Perms.NOTIFY} not defined).\n     */\n    HAPStatus[HAPStatus[\"NOTIFICATION_NOT_SUPPORTED\"] = -70406] = \"NOTIFICATION_NOT_SUPPORTED\";\n    /**\n     * The device is out of resources to process the request.\n     */\n    HAPStatus[HAPStatus[\"OUT_OF_RESOURCE\"] = -70407] = \"OUT_OF_RESOURCE\";\n    /**\n     * The operation timed out.\n     */\n    HAPStatus[HAPStatus[\"OPERATION_TIMED_OUT\"] = -70408] = \"OPERATION_TIMED_OUT\";\n    /**\n     * The given resource does not exist.\n     */\n    HAPStatus[HAPStatus[\"RESOURCE_DOES_NOT_EXIST\"] = -70409] = \"RESOURCE_DOES_NOT_EXIST\";\n    /**\n     * Received an invalid value in the given request for the given characteristic.\n     */\n    HAPStatus[HAPStatus[\"INVALID_VALUE_IN_REQUEST\"] = -70410] = \"INVALID_VALUE_IN_REQUEST\";\n    /**\n     * Insufficient authorization.\n     */\n    HAPStatus[HAPStatus[\"INSUFFICIENT_AUTHORIZATION\"] = -70411] = \"INSUFFICIENT_AUTHORIZATION\";\n    /**\n     * Operation not allowed in the current state.\n     */\n    HAPStatus[HAPStatus[\"NOT_ALLOWED_IN_CURRENT_STATE\"] = -70412] = \"NOT_ALLOWED_IN_CURRENT_STATE\";\n    // when adding new status codes, remember to update bounds in IsKnownHAPStatusError below\n})(HAPStatus || (exports.HAPStatus = HAPStatus = {}));\n/**\n * Determines if the given status code is a known {@link HAPStatus} error code.\n *\n * @group HAP Accessory Server\n */\nfunction IsKnownHAPStatusError(status) {\n    return (\n    // Lower bound (most negative error code)\n    status >= -70412 /* HAPStatus.NOT_ALLOWED_IN_CURRENT_STATE */ &&\n        // Upper bound (negative error code closest to zero)\n        status <= -70401 /* HAPStatus.INSUFFICIENT_PRIVILEGES */);\n}\nexports.IsKnownHAPStatusError = IsKnownHAPStatusError;\n// noinspection JSUnusedGlobalSymbols\n/**\n * @group HAP Accessory Server\n * @deprecated please use {@link TLVErrorCode} as naming is more precise\n */\n// @ts-expect-error (as we use const enums with --preserveConstEnums)\nexports.Codes = TLVErrorCode;\n// noinspection JSUnusedGlobalSymbols\n/**\n * @group HAP Accessory Server\n * @deprecated please use {@link HAPStatus} as naming is more precise\n */\n// @ts-expect-error (as we use const enums with --preserveConstEnums)\nexports.Status = HAPStatus;\n/**\n * Those status codes are the one listed as appropriate for the HAP spec!\n *\n * When the response is a client error 4xx or server error 5xx, the response\n * must include a status {@link HAPStatus} property.\n *\n * When the response is a MULTI_STATUS EVERY entry in the characteristics property MUST include a status property (even success).\n *\n * @group HAP Accessory Server\n */\nvar HAPHTTPCode;\n(function (HAPHTTPCode) {\n    // noinspection JSUnusedGlobalSymbols\n    HAPHTTPCode[HAPHTTPCode[\"OK\"] = 200] = \"OK\";\n    HAPHTTPCode[HAPHTTPCode[\"NO_CONTENT\"] = 204] = \"NO_CONTENT\";\n    HAPHTTPCode[HAPHTTPCode[\"MULTI_STATUS\"] = 207] = \"MULTI_STATUS\";\n    // client error\n    HAPHTTPCode[HAPHTTPCode[\"BAD_REQUEST\"] = 400] = \"BAD_REQUEST\";\n    HAPHTTPCode[HAPHTTPCode[\"NOT_FOUND\"] = 404] = \"NOT_FOUND\";\n    HAPHTTPCode[HAPHTTPCode[\"UNPROCESSABLE_ENTITY\"] = 422] = \"UNPROCESSABLE_ENTITY\";\n    // server error\n    HAPHTTPCode[HAPHTTPCode[\"INTERNAL_SERVER_ERROR\"] = 500] = \"INTERNAL_SERVER_ERROR\";\n    HAPHTTPCode[HAPHTTPCode[\"SERVICE_UNAVAILABLE\"] = 503] = \"SERVICE_UNAVAILABLE\";\n})(HAPHTTPCode || (exports.HAPHTTPCode = HAPHTTPCode = {}));\n/**\n * When in a request is made to the pairing endpoints, and mime type is 'application/pairing+tlv8'\n * one should use the below status codes.\n *\n * @group HAP Accessory Server\n */\nvar HAPPairingHTTPCode;\n(function (HAPPairingHTTPCode) {\n    // noinspection JSUnusedGlobalSymbols\n    HAPPairingHTTPCode[HAPPairingHTTPCode[\"OK\"] = 200] = \"OK\";\n    HAPPairingHTTPCode[HAPPairingHTTPCode[\"BAD_REQUEST\"] = 400] = \"BAD_REQUEST\";\n    HAPPairingHTTPCode[HAPPairingHTTPCode[\"METHOD_NOT_ALLOWED\"] = 405] = \"METHOD_NOT_ALLOWED\";\n    HAPPairingHTTPCode[HAPPairingHTTPCode[\"TOO_MANY_REQUESTS\"] = 429] = \"TOO_MANY_REQUESTS\";\n    HAPPairingHTTPCode[HAPPairingHTTPCode[\"CONNECTION_AUTHORIZATION_REQUIRED\"] = 470] = \"CONNECTION_AUTHORIZATION_REQUIRED\";\n    HAPPairingHTTPCode[HAPPairingHTTPCode[\"INTERNAL_SERVER_ERROR\"] = 500] = \"INTERNAL_SERVER_ERROR\";\n})(HAPPairingHTTPCode || (exports.HAPPairingHTTPCode = HAPPairingHTTPCode = {}));\n/**\n * @group HAP Accessory Server\n */\nvar HAPServerEventTypes;\n(function (HAPServerEventTypes) {\n    /**\n     * Emitted when the server is fully set up and ready to receive connections.\n     */\n    HAPServerEventTypes[\"LISTENING\"] = \"listening\";\n    /**\n     * Emitted when a client wishes for this server to identify itself before pairing. You must call the\n     * callback to respond to the client with success.\n     */\n    HAPServerEventTypes[\"IDENTIFY\"] = \"identify\";\n    HAPServerEventTypes[\"ADD_PAIRING\"] = \"add-pairing\";\n    HAPServerEventTypes[\"REMOVE_PAIRING\"] = \"remove-pairing\";\n    HAPServerEventTypes[\"LIST_PAIRINGS\"] = \"list-pairings\";\n    /**\n     * This event is emitted when a client completes the \"pairing\" process and exchanges encryption keys.\n     * Note that this does not mean the \"Add Accessory\" process in iOS has completed.\n     * You must call the callback to complete the process.\n     */\n    HAPServerEventTypes[\"PAIR\"] = \"pair\";\n    /**\n     * This event is emitted when a client requests the complete representation of Accessory data for\n     * this Accessory (for instance, what services, characteristics, etc. are supported) and any bridged\n     * Accessories in the case of a Bridge Accessory. The listener must call the provided callback function\n     * when the accessory data is ready. We will automatically JSON.stringify the data.\n     */\n    HAPServerEventTypes[\"ACCESSORIES\"] = \"accessories\";\n    /**\n     * This event is emitted when a client wishes to retrieve the current value of one or more characteristics.\n     * The listener must call the provided callback function when the values are ready. iOS clients can typically\n     * wait up to 10 seconds for this call to return. We will automatically JSON.stringify the data (which must\n     * be an array) and wrap it in an object with a top-level \"characteristics\" property.\n     */\n    HAPServerEventTypes[\"GET_CHARACTERISTICS\"] = \"get-characteristics\";\n    /**\n     * This event is emitted when a client wishes to set the current value of one or more characteristics and/or\n     * subscribe to one or more events. The 'events' param is an initially-empty object, associated with the current\n     * connection, on which you may store event registration keys for later processing. The listener must call\n     * the provided callback when the request has been processed.\n     */\n    HAPServerEventTypes[\"SET_CHARACTERISTICS\"] = \"set-characteristics\";\n    HAPServerEventTypes[\"REQUEST_RESOURCE\"] = \"request-resource\";\n    HAPServerEventTypes[\"CONNECTION_CLOSED\"] = \"connection-closed\";\n})(HAPServerEventTypes || (exports.HAPServerEventTypes = HAPServerEventTypes = {}));\n/**\n * The actual HAP server that iOS devices talk to.\n *\n * Notes\n * -----\n * It turns out that the IP-based version of HomeKit's HAP protocol operates over a sort of pseudo-HTTP.\n * Accessories are meant to host a TCP socket server that initially behaves exactly as an HTTP/1.1 server.\n * So iOS devices will open up a long-lived connection to this server and begin issuing HTTP requests.\n * So far, this conforms with HTTP/1.1 Keepalive. However, after the \"pairing\" process is complete, the\n * connection is expected to be \"upgraded\" to support full-packet encryption of both HTTP headers and data.\n * This encryption is NOT SSL. It is a customized ChaCha20+Poly1305 encryption layer.\n *\n * Additionally, this \"HTTP Server\" supports sending \"event\" responses at any time without warning. The iOS\n * device simply keeps the connection open after it's finished with HTTP request/response traffic, and while\n * the connection is open, the server can elect to issue \"EVENT/1.0 200 OK\" HTTP-style responses. These are\n * typically sent to inform the iOS device of a characteristic change for the accessory (like \"Door was Unlocked\").\n *\n * See {@link EventedHTTPServer} for more detail on the implementation of this protocol.\n *\n * @group HAP Accessory Server\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar HAPServer = /** @class */ (function (_super) {\n    tslib_1.__extends(HAPServer, _super);\n    function HAPServer(accessoryInfo) {\n        var _this = _super.call(this) || this;\n        _this.unsuccessfulPairAttempts = 0; // after 100 unsuccessful attempts the server won't accept any further attempts. Will currently be reset on a reboot\n        _this.accessoryInfo = accessoryInfo;\n        _this.allowInsecureRequest = false;\n        // internal server that does all the actual communication\n        _this.httpServer = new eventedhttp_1.EventedHTTPServer();\n        _this.httpServer.on(\"listening\" /* EventedHTTPServerEvent.LISTENING */, _this.onListening.bind(_this));\n        _this.httpServer.on(\"request\" /* EventedHTTPServerEvent.REQUEST */, _this.handleRequestOnHAPConnection.bind(_this));\n        _this.httpServer.on(\"connection-closed\" /* EventedHTTPServerEvent.CONNECTION_CLOSED */, _this.handleConnectionClosed.bind(_this));\n        return _this;\n    }\n    HAPServer.prototype.listen = function (port, host) {\n        if (port === void 0) { port = 0; }\n        if (host === \"::\") {\n            // this will work around \"EAFNOSUPPORT: address family not supported\" errors\n            // on systems where IPv6 is not supported/enabled, we just use the node default then by supplying undefined\n            host = undefined;\n        }\n        this.httpServer.listen(port, host);\n    };\n    HAPServer.prototype.stop = function () {\n        this.httpServer.stop();\n    };\n    HAPServer.prototype.destroy = function () {\n        this.stop();\n        this.removeAllListeners();\n    };\n    /**\n     * Send an even notification for given characteristic and changed value to all connected clients.\n     * If `originator` is specified, the given {@link HAPConnection} will be excluded from the broadcast.\n     *\n     * @param aid - The accessory id of the updated characteristic.\n     * @param iid - The instance id of the updated characteristic.\n     * @param value - The newly set value of the characteristic.\n     * @param originator - If specified, the connection will not get an event message.\n     * @param immediateDelivery - The HAP spec requires some characteristics to be delivery immediately.\n     *   Namely, for the {@link Characteristic.ButtonEvent} and the {@link Characteristic.ProgrammableSwitchEvent} characteristics.\n     */\n    HAPServer.prototype.sendEventNotifications = function (aid, iid, value, originator, immediateDelivery) {\n        try {\n            this.httpServer.broadcastEvent(aid, iid, value, originator, immediateDelivery);\n        }\n        catch (error) {\n            console.warn(\"[\" + this.accessoryInfo.username + \"] Error when sending event notifications: \" + error.message);\n        }\n    };\n    HAPServer.prototype.onListening = function (port, hostname) {\n        this.emit(\"listening\" /* HAPServerEventTypes.LISTENING */, port, hostname);\n    };\n    // Called when an HTTP request was detected.\n    HAPServer.prototype.handleRequestOnHAPConnection = function (connection, request, response) {\n        var _this = this;\n        debug(\"[%s] HAP Request: %s %s\", this.accessoryInfo.username, request.method, request.url);\n        var buffers = [];\n        request.on(\"data\", function (data) { return buffers.push(data); });\n        request.on(\"end\", function () {\n            var url = new url_1.URL(request.url, \"http://hap-nodejs.local\"); // parse the url (query strings etc)\n            var handler = _this.getHandler(url);\n            if (!handler) {\n                debug(\"[%s] WARNING: Handler for %s not implemented\", _this.accessoryInfo.username, request.url);\n                response.writeHead(404 /* HAPHTTPCode.NOT_FOUND */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                response.end(JSON.stringify({ status: -70409 /* HAPStatus.RESOURCE_DOES_NOT_EXIST */ }));\n            }\n            else {\n                var data = Buffer.concat(buffers);\n                try {\n                    handler(connection, url, request, data, response);\n                }\n                catch (error) {\n                    debug(\"[%s] Error executing route handler: %s\", _this.accessoryInfo.username, error.stack);\n                    response.writeHead(500 /* HAPHTTPCode.INTERNAL_SERVER_ERROR */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                    response.end(JSON.stringify({ status: -70403 /* HAPStatus.RESOURCE_BUSY */ })); // resource busy try again, does somehow fit?\n                }\n            }\n        });\n    };\n    HAPServer.prototype.handleConnectionClosed = function (connection) {\n        this.emit(\"connection-closed\" /* HAPServerEventTypes.CONNECTION_CLOSED */, connection);\n    };\n    HAPServer.prototype.getHandler = function (url) {\n        switch (url.pathname.toLowerCase()) {\n            case \"/identify\":\n                return this.handleIdentifyRequest.bind(this);\n            case \"/pair-setup\":\n                return this.handlePairSetup.bind(this);\n            case \"/pair-verify\":\n                return this.handlePairVerify.bind(this);\n            case \"/pairings\":\n                return this.handlePairings.bind(this);\n            case \"/accessories\":\n                return this.handleAccessories.bind(this);\n            case \"/characteristics\":\n                return this.handleCharacteristics.bind(this);\n            case \"/prepare\":\n                return this.handlePrepareWrite.bind(this);\n            case \"/resource\":\n                return this.handleResource.bind(this);\n            default:\n                return undefined;\n        }\n    };\n    /**\n     * UNPAIRED Accessory identification.\n     */\n    HAPServer.prototype.handleIdentifyRequest = function (connection, url, request, data, response) {\n        var _this = this;\n        // POST body is empty\n        if (this.accessoryInfo.paired() && !this.allowInsecureRequest) {\n            response.writeHead(400 /* HAPHTTPCode.BAD_REQUEST */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n            response.end(JSON.stringify({ status: -70401 /* HAPStatus.INSUFFICIENT_PRIVILEGES */ }));\n            return;\n        }\n        this.emit(\"identify\" /* HAPServerEventTypes.IDENTIFY */, (0, once_1.once)(function (err) {\n            if (!err) {\n                debug(\"[%s] Identification success\", _this.accessoryInfo.username);\n                response.writeHead(204 /* HAPHTTPCode.NO_CONTENT */);\n                response.end();\n            }\n            else {\n                debug(\"[%s] Identification error: %s\", _this.accessoryInfo.username, err.message);\n                response.writeHead(500 /* HAPHTTPCode.INTERNAL_SERVER_ERROR */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                response.end(JSON.stringify({ status: -70403 /* HAPStatus.RESOURCE_BUSY */ }));\n            }\n        }));\n    };\n    HAPServer.prototype.handlePairSetup = function (connection, url, request, data, response) {\n        // Can only be directly paired with one iOS device\n        if (!this.allowInsecureRequest && this.accessoryInfo.paired()) {\n            response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n            response.end(tlv.encode(6 /* TLVValues.STATE */, 2 /* PairingStates.M2 */, 7 /* TLVValues.ERROR_CODE */, 6 /* TLVErrorCode.UNAVAILABLE */));\n            return;\n        }\n        if (this.unsuccessfulPairAttempts > 100) {\n            debug(\"[%s] Reached maximum amount of unsuccessful pair attempts!\", this.accessoryInfo.username);\n            response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n            response.end(tlv.encode(6 /* TLVValues.STATE */, 2 /* PairingStates.M2 */, 7 /* TLVValues.ERROR_CODE */, 5 /* TLVErrorCode.MAX_TRIES */));\n            return;\n        }\n        var tlvData = tlv.decode(data);\n        var sequence = tlvData[6 /* TLVValues.SEQUENCE_NUM */][0]; // value is single byte with sequence number\n        if (sequence === 1 /* PairingStates.M1 */) {\n            this.handlePairSetupM1(connection, request, response);\n        }\n        else if (sequence === 3 /* PairingStates.M3 */ && connection._pairSetupState === 2 /* PairingStates.M2 */) {\n            this.handlePairSetupM3(connection, request, response, tlvData);\n        }\n        else if (sequence === 5 /* PairingStates.M5 */ && connection._pairSetupState === 4 /* PairingStates.M4 */) {\n            this.handlePairSetupM5(connection, request, response, tlvData);\n        }\n        else {\n            // Invalid state/sequence number\n            response.writeHead(400 /* HAPPairingHTTPCode.BAD_REQUEST */, { \"Content-Type\": \"application/pairing+tlv8\" });\n            response.end(tlv.encode(6 /* TLVValues.STATE */, sequence + 1, 7 /* TLVValues.ERROR_CODE */, 1 /* TLVErrorCode.UNKNOWN */));\n            return;\n        }\n    };\n    HAPServer.prototype.handlePairSetupM1 = function (connection, request, response) {\n        var _this = this;\n        debug(\"[%s] Pair step 1/5\", this.accessoryInfo.username);\n        var salt = crypto_1.default.randomBytes(16);\n        var srpParams = fast_srp_hap_1.SRP.params.hap;\n        fast_srp_hap_1.SRP.genKey(32).then(function (key) {\n            // create a new SRP server\n            var srpServer = new fast_srp_hap_1.SrpServer(srpParams, salt, Buffer.from(\"Pair-Setup\"), Buffer.from(_this.accessoryInfo.pincode), key);\n            var srpB = srpServer.computeB();\n            // attach it to the current TCP session\n            connection.srpServer = srpServer;\n            response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n            response.end(tlv.encode(6 /* TLVValues.SEQUENCE_NUM */, 2 /* PairingStates.M2 */, 2 /* TLVValues.SALT */, salt, 3 /* TLVValues.PUBLIC_KEY */, srpB));\n            connection._pairSetupState = 2 /* PairingStates.M2 */;\n        }).catch(function (error) {\n            debug(\"[%s] Error occurred when generating srp key: %s\", _this.accessoryInfo.username, error.message);\n            response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n            response.end(tlv.encode(6 /* TLVValues.STATE */, 2 /* PairingStates.M2 */, 7 /* TLVValues.ERROR_CODE */, 1 /* TLVErrorCode.UNKNOWN */));\n            return;\n        });\n    };\n    HAPServer.prototype.handlePairSetupM3 = function (connection, request, response, tlvData) {\n        debug(\"[%s] Pair step 2/5\", this.accessoryInfo.username);\n        var A = tlvData[3 /* TLVValues.PUBLIC_KEY */]; // \"A is a public key that exists only for a single login session.\"\n        var M1 = tlvData[4 /* TLVValues.PASSWORD_PROOF */]; // \"M1 is the proof that you actually know your own password.\"\n        // pull the SRP server we created in stepOne out of the current session\n        var srpServer = connection.srpServer;\n        srpServer.setA(A);\n        try {\n            srpServer.checkM1(M1);\n        }\n        catch (err) {\n            // most likely the client supplied an incorrect pincode.\n            this.unsuccessfulPairAttempts++;\n            debug(\"[%s] Error while checking pincode: %s\", this.accessoryInfo.username, err.message);\n            response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n            response.end(tlv.encode(6 /* TLVValues.SEQUENCE_NUM */, 4 /* PairingStates.M4 */, 7 /* TLVValues.ERROR_CODE */, 2 /* TLVErrorCode.AUTHENTICATION */));\n            connection._pairSetupState = undefined;\n            return;\n        }\n        // \"M2 is the proof that the server actually knows your password.\"\n        var M2 = srpServer.computeM2();\n        response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n        response.end(tlv.encode(6 /* TLVValues.SEQUENCE_NUM */, 4 /* PairingStates.M4 */, 4 /* TLVValues.PASSWORD_PROOF */, M2));\n        connection._pairSetupState = 4 /* PairingStates.M4 */;\n    };\n    HAPServer.prototype.handlePairSetupM5 = function (connection, request, response, tlvData) {\n        debug(\"[%s] Pair step 3/5\", this.accessoryInfo.username);\n        // pull the SRP server we created in stepOne out of the current session\n        var srpServer = connection.srpServer;\n        var encryptedData = tlvData[5 /* TLVValues.ENCRYPTED_DATA */];\n        var messageData = Buffer.alloc(encryptedData.length - 16);\n        var authTagData = Buffer.alloc(16);\n        encryptedData.copy(messageData, 0, 0, encryptedData.length - 16);\n        encryptedData.copy(authTagData, 0, encryptedData.length - 16, encryptedData.length);\n        var S_private = srpServer.computeK();\n        var encSalt = Buffer.from(\"Pair-Setup-Encrypt-Salt\");\n        var encInfo = Buffer.from(\"Pair-Setup-Encrypt-Info\");\n        var outputKey = hapCrypto.HKDF(\"sha512\", encSalt, S_private, encInfo, 32);\n        var plaintext;\n        try {\n            plaintext = hapCrypto.chacha20_poly1305_decryptAndVerify(outputKey, Buffer.from(\"PS-Msg05\"), null, messageData, authTagData);\n        }\n        catch (error) {\n            debug(\"[%s] Error while decrypting and verifying M5 subTlv: %s\", this.accessoryInfo.username);\n            response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n            response.end(tlv.encode(6 /* TLVValues.SEQUENCE_NUM */, 4 /* PairingStates.M4 */, 7 /* TLVValues.ERROR_CODE */, 2 /* TLVErrorCode.AUTHENTICATION */));\n            connection._pairSetupState = undefined;\n            return;\n        }\n        // decode the client payload and pass it on to the next step\n        var M5Packet = tlv.decode(plaintext);\n        var clientUsername = M5Packet[1 /* TLVValues.USERNAME */];\n        var clientLTPK = M5Packet[3 /* TLVValues.PUBLIC_KEY */];\n        var clientProof = M5Packet[10 /* TLVValues.PROOF */];\n        this.handlePairSetupM5_2(connection, request, response, clientUsername, clientLTPK, clientProof, outputKey);\n    };\n    // M5-2\n    HAPServer.prototype.handlePairSetupM5_2 = function (connection, request, response, clientUsername, clientLTPK, clientProof, hkdfEncKey) {\n        debug(\"[%s] Pair step 4/5\", this.accessoryInfo.username);\n        var S_private = connection.srpServer.computeK();\n        var controllerSalt = Buffer.from(\"Pair-Setup-Controller-Sign-Salt\");\n        var controllerInfo = Buffer.from(\"Pair-Setup-Controller-Sign-Info\");\n        var outputKey = hapCrypto.HKDF(\"sha512\", controllerSalt, S_private, controllerInfo, 32);\n        var completeData = Buffer.concat([outputKey, clientUsername, clientLTPK]);\n        if (!tweetnacl_1.default.sign.detached.verify(completeData, clientProof, clientLTPK)) {\n            debug(\"[%s] Invalid signature\", this.accessoryInfo.username);\n            response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n            response.end(tlv.encode(6 /* TLVValues.SEQUENCE_NUM */, 6 /* PairingStates.M6 */, 7 /* TLVValues.ERROR_CODE */, 2 /* TLVErrorCode.AUTHENTICATION */));\n            connection._pairSetupState = undefined;\n            return;\n        }\n        this.handlePairSetupM5_3(connection, request, response, clientUsername, clientLTPK, hkdfEncKey);\n    };\n    // M5 - F + M6\n    HAPServer.prototype.handlePairSetupM5_3 = function (connection, request, response, clientUsername, clientLTPK, hkdfEncKey) {\n        var _this = this;\n        debug(\"[%s] Pair step 5/5\", this.accessoryInfo.username);\n        var S_private = connection.srpServer.computeK();\n        var accessorySalt = Buffer.from(\"Pair-Setup-Accessory-Sign-Salt\");\n        var accessoryInfo = Buffer.from(\"Pair-Setup-Accessory-Sign-Info\");\n        var outputKey = hapCrypto.HKDF(\"sha512\", accessorySalt, S_private, accessoryInfo, 32);\n        var serverLTPK = this.accessoryInfo.signPk;\n        var usernameData = Buffer.from(this.accessoryInfo.username);\n        var material = Buffer.concat([outputKey, usernameData, serverLTPK]);\n        var privateKey = Buffer.from(this.accessoryInfo.signSk);\n        var serverProof = tweetnacl_1.default.sign.detached(material, privateKey);\n        var message = tlv.encode(1 /* TLVValues.USERNAME */, usernameData, 3 /* TLVValues.PUBLIC_KEY */, serverLTPK, 10 /* TLVValues.PROOF */, serverProof);\n        var encrypted = hapCrypto.chacha20_poly1305_encryptAndSeal(hkdfEncKey, Buffer.from(\"PS-Msg06\"), null, message);\n        // finally, notify listeners that we have been paired with a client\n        this.emit(\"pair\" /* HAPServerEventTypes.PAIR */, clientUsername.toString(), clientLTPK, (0, once_1.once)(function (err) {\n            if (err) {\n                debug(\"[%s] Error adding pairing info: %s\", _this.accessoryInfo.username, err.message);\n                response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n                response.end(tlv.encode(6 /* TLVValues.SEQUENCE_NUM */, 6 /* PairingStates.M6 */, 7 /* TLVValues.ERROR_CODE */, 1 /* TLVErrorCode.UNKNOWN */));\n                connection._pairSetupState = undefined;\n                return;\n            }\n            // send final pairing response to client\n            response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n            response.end(tlv.encode(6 /* TLVValues.SEQUENCE_NUM */, 6 /* PairingStates.M6 */, 5 /* TLVValues.ENCRYPTED_DATA */, Buffer.concat([encrypted.ciphertext, encrypted.authTag])));\n            connection._pairSetupState = undefined;\n        }));\n    };\n    HAPServer.prototype.handlePairVerify = function (connection, url, request, data, response) {\n        var tlvData = tlv.decode(data);\n        var sequence = tlvData[6 /* TLVValues.SEQUENCE_NUM */][0]; // value is single byte with sequence number\n        if (sequence === 1 /* PairingStates.M1 */) {\n            this.handlePairVerifyM1(connection, request, response, tlvData);\n        }\n        else if (sequence === 3 /* PairingStates.M3 */ && connection._pairVerifyState === 2 /* PairingStates.M2 */) {\n            this.handlePairVerifyM3(connection, request, response, tlvData);\n        }\n        else {\n            // Invalid state/sequence number\n            response.writeHead(400 /* HAPPairingHTTPCode.BAD_REQUEST */, { \"Content-Type\": \"application/pairing+tlv8\" });\n            response.end(tlv.encode(6 /* TLVValues.STATE */, sequence + 1, 7 /* TLVValues.ERROR_CODE */, 1 /* TLVErrorCode.UNKNOWN */));\n            return;\n        }\n    };\n    HAPServer.prototype.handlePairVerifyM1 = function (connection, request, response, tlvData) {\n        debug(\"[%s] Pair verify step 1/2\", this.accessoryInfo.username);\n        var clientPublicKey = tlvData[3 /* TLVValues.PUBLIC_KEY */]; // Buffer\n        // generate new encryption keys for this session\n        var keyPair = hapCrypto.generateCurve25519KeyPair();\n        var secretKey = Buffer.from(keyPair.secretKey);\n        var publicKey = Buffer.from(keyPair.publicKey);\n        var sharedSec = Buffer.from(hapCrypto.generateCurve25519SharedSecKey(secretKey, clientPublicKey));\n        var usernameData = Buffer.from(this.accessoryInfo.username);\n        var material = Buffer.concat([publicKey, usernameData, clientPublicKey]);\n        var privateKey = Buffer.from(this.accessoryInfo.signSk);\n        var serverProof = tweetnacl_1.default.sign.detached(material, privateKey);\n        var encSalt = Buffer.from(\"Pair-Verify-Encrypt-Salt\");\n        var encInfo = Buffer.from(\"Pair-Verify-Encrypt-Info\");\n        var outputKey = hapCrypto.HKDF(\"sha512\", encSalt, sharedSec, encInfo, 32).slice(0, 32);\n        connection.encryption = new eventedhttp_1.HAPEncryption(clientPublicKey, secretKey, publicKey, sharedSec, outputKey);\n        // compose the response data in TLV format\n        var message = tlv.encode(1 /* TLVValues.USERNAME */, usernameData, 10 /* TLVValues.PROOF */, serverProof);\n        var encrypted = hapCrypto.chacha20_poly1305_encryptAndSeal(outputKey, Buffer.from(\"PV-Msg02\"), null, message);\n        response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n        response.end(tlv.encode(6 /* TLVValues.SEQUENCE_NUM */, 2 /* PairingStates.M2 */, 5 /* TLVValues.ENCRYPTED_DATA */, Buffer.concat([encrypted.ciphertext, encrypted.authTag]), 3 /* TLVValues.PUBLIC_KEY */, publicKey));\n        connection._pairVerifyState = 2 /* PairingStates.M2 */;\n    };\n    HAPServer.prototype.handlePairVerifyM3 = function (connection, request, response, objects) {\n        debug(\"[%s] Pair verify step 2/2\", this.accessoryInfo.username);\n        var encryptedData = objects[5 /* TLVValues.ENCRYPTED_DATA */];\n        var messageData = Buffer.alloc(encryptedData.length - 16);\n        var authTagData = Buffer.alloc(16);\n        encryptedData.copy(messageData, 0, 0, encryptedData.length - 16);\n        encryptedData.copy(authTagData, 0, encryptedData.length - 16, encryptedData.length);\n        // instance of HAPEncryption (created in handlePairVerifyStepOne)\n        var enc = connection.encryption;\n        var plaintext;\n        try {\n            plaintext = hapCrypto.chacha20_poly1305_decryptAndVerify(enc.hkdfPairEncryptionKey, Buffer.from(\"PV-Msg03\"), null, messageData, authTagData);\n        }\n        catch (error) {\n            debug(\"[%s] M3: Failed to decrypt and/or verify\", this.accessoryInfo.username);\n            response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n            response.end(tlv.encode(6 /* TLVValues.STATE */, 4 /* PairingStates.M4 */, 7 /* TLVValues.ERROR_CODE */, 2 /* TLVErrorCode.AUTHENTICATION */));\n            connection._pairVerifyState = undefined;\n            return;\n        }\n        var decoded = tlv.decode(plaintext);\n        var clientUsername = decoded[1 /* TLVValues.USERNAME */];\n        var proof = decoded[10 /* TLVValues.PROOF */];\n        var material = Buffer.concat([enc.clientPublicKey, clientUsername, enc.publicKey]);\n        // since we're paired, we should have the public key stored for this client\n        var clientPublicKey = this.accessoryInfo.getClientPublicKey(clientUsername.toString());\n        // if we're not actually paired, then there's nothing to verify - this client thinks it's paired with us, but we\n        // disagree. Respond with invalid request (seems to match HomeKit Accessory Simulator behavior)\n        if (!clientPublicKey) {\n            debug(\"[%s] Client %s attempting to verify, but we are not paired; rejecting client\", this.accessoryInfo.username, clientUsername);\n            response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n            response.end(tlv.encode(6 /* TLVValues.STATE */, 4 /* PairingStates.M4 */, 7 /* TLVValues.ERROR_CODE */, 2 /* TLVErrorCode.AUTHENTICATION */));\n            connection._pairVerifyState = undefined;\n            return;\n        }\n        if (!tweetnacl_1.default.sign.detached.verify(material, proof, clientPublicKey)) {\n            debug(\"[%s] Client %s provided an invalid signature\", this.accessoryInfo.username, clientUsername);\n            response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n            response.end(tlv.encode(6 /* TLVValues.STATE */, 4 /* PairingStates.M4 */, 7 /* TLVValues.ERROR_CODE */, 2 /* TLVErrorCode.AUTHENTICATION */));\n            connection._pairVerifyState = undefined;\n            return;\n        }\n        debug(\"[%s] Client %s verification complete\", this.accessoryInfo.username, clientUsername);\n        response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n        response.end(tlv.encode(6 /* TLVValues.SEQUENCE_NUM */, 4 /* PairingStates.M4 */));\n        // now that the client has been verified, we must \"upgrade\" our pseudo-HTTP connection to include\n        // TCP-level encryption. We'll do this by adding some more encryption vars to the session, and using them\n        // in future calls to onEncrypt, onDecrypt.\n        var encSalt = Buffer.from(\"Control-Salt\");\n        var infoRead = Buffer.from(\"Control-Read-Encryption-Key\");\n        var infoWrite = Buffer.from(\"Control-Write-Encryption-Key\");\n        enc.accessoryToControllerKey = hapCrypto.HKDF(\"sha512\", encSalt, enc.sharedSecret, infoRead, 32);\n        enc.controllerToAccessoryKey = hapCrypto.HKDF(\"sha512\", encSalt, enc.sharedSecret, infoWrite, 32);\n        // Our connection is now completely setup. We now want to subscribe this connection to special\n        connection.connectionAuthenticated(clientUsername.toString());\n        connection._pairVerifyState = undefined;\n    };\n    HAPServer.prototype.handlePairings = function (connection, url, request, data, response) {\n        var _this = this;\n        // Only accept /pairing request if there is a secure session\n        if (!this.allowInsecureRequest && !connection.isAuthenticated()) {\n            response.writeHead(470 /* HAPPairingHTTPCode.CONNECTION_AUTHORIZATION_REQUIRED */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n            response.end(JSON.stringify({ status: -70401 /* HAPStatus.INSUFFICIENT_PRIVILEGES */ }));\n            return;\n        }\n        var objects = tlv.decode(data);\n        var method = objects[0 /* TLVValues.METHOD */][0]; // value is single byte with request type\n        var state = objects[6 /* TLVValues.STATE */][0];\n        if (state !== 1 /* PairingStates.M1 */) {\n            return;\n        }\n        if (method === 3 /* PairMethods.ADD_PAIRING */) {\n            var identifier = objects[1 /* TLVValues.IDENTIFIER */].toString();\n            var publicKey = objects[3 /* TLVValues.PUBLIC_KEY */];\n            var permissions = objects[11 /* TLVValues.PERMISSIONS */][0];\n            this.emit(\"add-pairing\" /* HAPServerEventTypes.ADD_PAIRING */, connection, identifier, publicKey, permissions, (0, once_1.once)(function (error) {\n                if (error > 0) {\n                    debug(\"[%s] Pairings: failed ADD_PAIRING with code %d\", _this.accessoryInfo.username, error);\n                    response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n                    response.end(tlv.encode(6 /* TLVValues.STATE */, 2 /* PairingStates.M2 */, 7 /* TLVValues.ERROR_CODE */, error));\n                    return;\n                }\n                response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n                response.end(tlv.encode(6 /* TLVValues.STATE */, 2 /* PairingStates.M2 */));\n                debug(\"[%s] Pairings: successfully executed ADD_PAIRING\", _this.accessoryInfo.username);\n            }));\n        }\n        else if (method === 4 /* PairMethods.REMOVE_PAIRING */) {\n            var identifier = objects[1 /* TLVValues.IDENTIFIER */].toString();\n            this.emit(\"remove-pairing\" /* HAPServerEventTypes.REMOVE_PAIRING */, connection, identifier, (0, once_1.once)(function (error) {\n                if (error > 0) {\n                    debug(\"[%s] Pairings: failed REMOVE_PAIRING with code %d\", _this.accessoryInfo.username, error);\n                    response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n                    response.end(tlv.encode(6 /* TLVValues.STATE */, 2 /* PairingStates.M2 */, 7 /* TLVValues.ERROR_CODE */, error));\n                    return;\n                }\n                response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n                response.end(tlv.encode(6 /* TLVValues.STATE */, 2 /* PairingStates.M2 */));\n                debug(\"[%s] Pairings: successfully executed REMOVE_PAIRING\", _this.accessoryInfo.username);\n            }));\n        }\n        else if (method === 5 /* PairMethods.LIST_PAIRINGS */) {\n            this.emit(\"list-pairings\" /* HAPServerEventTypes.LIST_PAIRINGS */, connection, (0, once_1.once)(function (error, data) {\n                if (error > 0) {\n                    debug(\"[%s] Pairings: failed LIST_PAIRINGS with code %d\", _this.accessoryInfo.username, error);\n                    response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" });\n                    response.end(tlv.encode(6 /* TLVValues.STATE */, 2 /* PairingStates.M2 */, 7 /* TLVValues.ERROR_CODE */, error));\n                    return;\n                }\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var tlvList = [];\n                data.forEach(function (value, index) {\n                    if (index > 0) {\n                        tlvList.push(255 /* TLVValues.SEPARATOR */, Buffer.alloc(0));\n                    }\n                    tlvList.push(1 /* TLVValues.IDENTIFIER */, value.username, 3 /* TLVValues.PUBLIC_KEY */, value.publicKey, 11 /* TLVValues.PERMISSIONS */, value.permission);\n                });\n                var list = tlv.encode.apply(tlv, tslib_1.__spreadArray([6 /* TLVValues.STATE */, 2 /* PairingStates.M2 */], tslib_1.__read(tlvList), false));\n                response.writeHead(200 /* HAPPairingHTTPCode.OK */, { \"Content-Type\": \"application/pairing+tlv8\" /* HAPMimeTypes.PAIRING_TLV8 */ });\n                response.end(list);\n                debug(\"[%s] Pairings: successfully executed LIST_PAIRINGS\", _this.accessoryInfo.username);\n            }));\n        }\n    };\n    HAPServer.prototype.handleAccessories = function (connection, url, request, data, response) {\n        if (!this.allowInsecureRequest && !connection.isAuthenticated()) {\n            response.writeHead(470 /* HAPPairingHTTPCode.CONNECTION_AUTHORIZATION_REQUIRED */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n            response.end(JSON.stringify({ status: -70401 /* HAPStatus.INSUFFICIENT_PRIVILEGES */ }));\n            return;\n        }\n        // call out to listeners to retrieve the latest accessories JSON\n        this.emit(\"accessories\" /* HAPServerEventTypes.ACCESSORIES */, connection, (0, once_1.once)(function (error, result) {\n            if (error) {\n                response.writeHead(error.httpCode, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                response.end(JSON.stringify({ status: error.status }));\n            }\n            else {\n                response.writeHead(200 /* HAPHTTPCode.OK */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                response.end(JSON.stringify(result));\n            }\n        }));\n    };\n    HAPServer.prototype.handleCharacteristics = function (connection, url, request, data, response) {\n        var e_1, _a;\n        if (!this.allowInsecureRequest && !connection.isAuthenticated()) {\n            response.writeHead(470 /* HAPPairingHTTPCode.CONNECTION_AUTHORIZATION_REQUIRED */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n            response.end(JSON.stringify({ status: -70401 /* HAPStatus.INSUFFICIENT_PRIVILEGES */ }));\n            return;\n        }\n        if (request.method === \"GET\") {\n            var searchParams = url.searchParams;\n            var idParam = searchParams.get(\"id\");\n            if (!idParam) {\n                response.writeHead(400 /* HAPHTTPCode.BAD_REQUEST */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                response.end(JSON.stringify({ status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ }));\n                return;\n            }\n            var ids = [];\n            try {\n                for (var _b = tslib_1.__values(idParam.split(\",\")), _c = _b.next(); !_c.done; _c = _b.next()) { // [\"1.9\",\"2.14\"]\n                    var entry = _c.value;\n                    var split = entry.split(\".\"); // [\"1\",\"9\"]\n                    ids.push({\n                        aid: parseInt(split[0], 10), // accessory id\n                        iid: parseInt(split[1], 10), // (characteristic) instance id\n                    });\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            var readRequest = {\n                ids: ids,\n                includeMeta: (0, internal_types_1.consideredTrue)(searchParams.get(\"meta\")),\n                includePerms: (0, internal_types_1.consideredTrue)(searchParams.get(\"perms\")),\n                includeType: (0, internal_types_1.consideredTrue)(searchParams.get(\"type\")),\n                includeEvent: (0, internal_types_1.consideredTrue)(searchParams.get(\"ev\")),\n            };\n            this.emit(\"get-characteristics\" /* HAPServerEventTypes.GET_CHARACTERISTICS */, connection, readRequest, (0, once_1.once)(function (error, readResponse) {\n                var e_2, _a, e_3, _b;\n                if (error) {\n                    response.writeHead(error.httpCode, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                    response.end(JSON.stringify({ status: error.status }));\n                    return;\n                }\n                var characteristics = readResponse.characteristics;\n                var errorOccurred = false; // determine if we send a 207 Multi-Status\n                try {\n                    for (var characteristics_1 = tslib_1.__values(characteristics), characteristics_1_1 = characteristics_1.next(); !characteristics_1_1.done; characteristics_1_1 = characteristics_1.next()) {\n                        var data_1 = characteristics_1_1.value;\n                        if (data_1.status) {\n                            errorOccurred = true;\n                            break;\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (characteristics_1_1 && !characteristics_1_1.done && (_a = characteristics_1.return)) _a.call(characteristics_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n                if (errorOccurred) { // on a 207 Multi-Status EVERY characteristic MUST include a status property\n                    try {\n                        for (var characteristics_2 = tslib_1.__values(characteristics), characteristics_2_1 = characteristics_2.next(); !characteristics_2_1.done; characteristics_2_1 = characteristics_2.next()) {\n                            var data_2 = characteristics_2_1.value;\n                            if (!data_2.status) { // a status is undefined if the request was successful\n                                data_2.status = 0 /* HAPStatus.SUCCESS */; // a value of zero indicates success\n                            }\n                        }\n                    }\n                    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                    finally {\n                        try {\n                            if (characteristics_2_1 && !characteristics_2_1.done && (_b = characteristics_2.return)) _b.call(characteristics_2);\n                        }\n                        finally { if (e_3) throw e_3.error; }\n                    }\n                }\n                // 207 \"multi-status\" is returned when an error occurs reading a characteristic. otherwise 200 is returned\n                response.writeHead(errorOccurred ? 207 /* HAPHTTPCode.MULTI_STATUS */ : 200 /* HAPHTTPCode.OK */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                response.end(JSON.stringify({ characteristics: characteristics }));\n            }));\n        }\n        else if (request.method === \"PUT\") {\n            if (!connection.isAuthenticated()) {\n                if (!request.headers || (request.headers && request.headers.authorization !== this.accessoryInfo.pincode)) {\n                    response.writeHead(470 /* HAPPairingHTTPCode.CONNECTION_AUTHORIZATION_REQUIRED */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                    response.end(JSON.stringify({ status: -70401 /* HAPStatus.INSUFFICIENT_PRIVILEGES */ }));\n                    return;\n                }\n            }\n            if (data.length === 0) {\n                response.writeHead(400 /* HAPHTTPCode.BAD_REQUEST */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                response.end(JSON.stringify({ status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ }));\n                return;\n            }\n            var writeRequest = JSON.parse(data.toString(\"utf8\"));\n            this.emit(\"set-characteristics\" /* HAPServerEventTypes.SET_CHARACTERISTICS */, connection, writeRequest, (0, once_1.once)(function (error, writeResponse) {\n                var e_4, _a;\n                if (error) {\n                    response.writeHead(error.httpCode, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                    response.end(JSON.stringify({ status: error.status }));\n                    return;\n                }\n                var characteristics = writeResponse.characteristics;\n                var multiStatus = false;\n                try {\n                    for (var characteristics_3 = tslib_1.__values(characteristics), characteristics_3_1 = characteristics_3.next(); !characteristics_3_1.done; characteristics_3_1 = characteristics_3.next()) {\n                        var data_3 = characteristics_3_1.value;\n                        if (data_3.status || data_3.value !== undefined) {\n                            // also send multiStatus on write response requests\n                            multiStatus = true;\n                            break;\n                        }\n                    }\n                }\n                catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                finally {\n                    try {\n                        if (characteristics_3_1 && !characteristics_3_1.done && (_a = characteristics_3.return)) _a.call(characteristics_3);\n                    }\n                    finally { if (e_4) throw e_4.error; }\n                }\n                if (multiStatus) {\n                    // 207 is \"multi-status\" since HomeKit may be setting multiple things and any one can fail independently\n                    response.writeHead(207 /* HAPHTTPCode.MULTI_STATUS */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                    response.end(JSON.stringify({ characteristics: characteristics }));\n                }\n                else {\n                    // if everything went fine send 204 no content response\n                    response.writeHead(204 /* HAPHTTPCode.NO_CONTENT */);\n                    response.end();\n                }\n            }));\n        }\n        else {\n            response.writeHead(400 /* HAPHTTPCode.BAD_REQUEST */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ }); // method not allowed\n            response.end(JSON.stringify({ status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ }));\n        }\n    };\n    HAPServer.prototype.handlePrepareWrite = function (connection, url, request, data, response) {\n        var _this = this;\n        if (!this.allowInsecureRequest && !connection.isAuthenticated()) {\n            response.writeHead(470 /* HAPPairingHTTPCode.CONNECTION_AUTHORIZATION_REQUIRED */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n            response.end(JSON.stringify({ status: -70401 /* HAPStatus.INSUFFICIENT_PRIVILEGES */ }));\n            return;\n        }\n        if (request.method === \"PUT\") {\n            if (data.length === 0) {\n                response.writeHead(400 /* HAPHTTPCode.BAD_REQUEST */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                response.end(JSON.stringify({ status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ }));\n                return;\n            }\n            var prepareRequest_1 = JSON.parse(data.toString());\n            if (prepareRequest_1.pid && prepareRequest_1.ttl) {\n                debug(\"[%s] Received prepare write request with pid %d and ttl %d\", this.accessoryInfo.username, prepareRequest_1.pid, prepareRequest_1.ttl);\n                if (connection.timedWriteTimeout) { // clear any currently existing timeouts\n                    clearTimeout(connection.timedWriteTimeout);\n                }\n                connection.timedWritePid = prepareRequest_1.pid;\n                connection.timedWriteTimeout = setTimeout(function () {\n                    debug(\"[%s] Timed write request timed out for pid %d\", _this.accessoryInfo.username, prepareRequest_1.pid);\n                    connection.timedWritePid = undefined;\n                    connection.timedWriteTimeout = undefined;\n                }, prepareRequest_1.ttl);\n                response.writeHead(200 /* HAPHTTPCode.OK */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                response.end(JSON.stringify({ status: 0 /* HAPStatus.SUCCESS */ }));\n                return;\n            }\n            else {\n                response.writeHead(400 /* HAPHTTPCode.BAD_REQUEST */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                response.end(JSON.stringify({ status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ }));\n            }\n        }\n        else {\n            response.writeHead(400 /* HAPHTTPCode.BAD_REQUEST */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n            response.end(JSON.stringify({ status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ }));\n        }\n    };\n    HAPServer.prototype.handleResource = function (connection, url, request, data, response) {\n        if (!connection.isAuthenticated()) {\n            if (!(this.allowInsecureRequest && request.headers && request.headers.authorization === this.accessoryInfo.pincode)) {\n                response.writeHead(470 /* HAPPairingHTTPCode.CONNECTION_AUTHORIZATION_REQUIRED */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                response.end(JSON.stringify({ status: -70401 /* HAPStatus.INSUFFICIENT_PRIVILEGES */ }));\n                return;\n            }\n        }\n        if (request.method === \"POST\") {\n            if (data.length === 0) {\n                response.writeHead(400 /* HAPHTTPCode.BAD_REQUEST */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                response.end(JSON.stringify({ status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ }));\n                return;\n            }\n            var resourceRequest = JSON.parse(data.toString());\n            // call out to listeners to retrieve the resource, snapshot only right now\n            this.emit(\"request-resource\" /* HAPServerEventTypes.REQUEST_RESOURCE */, resourceRequest, (0, once_1.once)(function (error, resource) {\n                if (error) {\n                    response.writeHead(error.httpCode, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ });\n                    response.end(JSON.stringify({ status: error.status }));\n                }\n                else {\n                    response.writeHead(200 /* HAPHTTPCode.OK */, { \"Content-Type\": \"image/jpeg\" /* HAPMimeTypes.IMAGE_JPEG */ });\n                    response.end(resource);\n                }\n            }));\n        }\n        else {\n            response.writeHead(400 /* HAPHTTPCode.BAD_REQUEST */, { \"Content-Type\": \"application/hap+json\" /* HAPMimeTypes.HAP_JSON */ }); // method not allowed\n            response.end(JSON.stringify({ status: -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */ }));\n        }\n    };\n    return HAPServer;\n}(events_1.EventEmitter));\nexports.HAPServer = HAPServer;\n//# sourceMappingURL=HAPServer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Service = exports.ServiceEventTypes = void 0;\nvar tslib_1 = require(\"tslib\");\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar events_1 = require(\"events\");\nvar Characteristic_1 = require(\"./Characteristic\");\nvar uuid_1 = require(\"./util/uuid\");\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:Service\");\n/**\n * HAP spec allows a maximum of 100 characteristics per service!\n */\nvar MAX_CHARACTERISTICS = 100;\n/**\n * @group Service\n */\nvar ServiceEventTypes;\n(function (ServiceEventTypes) {\n    ServiceEventTypes[\"CHARACTERISTIC_CHANGE\"] = \"characteristic-change\";\n    ServiceEventTypes[\"SERVICE_CONFIGURATION_CHANGE\"] = \"service-configurationChange\";\n    ServiceEventTypes[\"CHARACTERISTIC_WARNING\"] = \"characteristic-warning\";\n})(ServiceEventTypes || (exports.ServiceEventTypes = ServiceEventTypes = {}));\n/**\n * Service represents a set of grouped values necessary to provide a logical function. For instance, a\n * \"Door Lock Mechanism\" service might contain two values, one for the \"desired lock state\" and one for the\n * \"current lock state\". A particular Service is distinguished from others by its \"type\", which is a UUID.\n * HomeKit provides a set of known Service UUIDs defined in HomeKit.ts along with a corresponding\n * concrete subclass that you can instantiate directly to set up the necessary values. These natively-supported\n * Services are expected to contain a particular set of Characteristics.\n *\n * Unlike Characteristics, where you cannot have two Characteristics with the same UUID in the same Service,\n * you can actually have multiple Services with the same UUID in a single Accessory. For instance, imagine\n * a Garage Door Opener with both a \"security light\" and a \"backlight\" for the display. Each light could be\n * a \"Lightbulb\" Service with the same UUID. To account for this situation, we define an extra \"subtype\"\n * property on Service, that can be a string or other string-convertible object that uniquely identifies the\n * Service among its peers in an Accessory. For instance, you might have `service1.subtype = 'security_light'`\n * for one and `service2.subtype = 'backlight'` for the other.\n *\n * You can also define custom Services by providing your own UUID for the type that you generate yourself.\n * Custom Services can contain an arbitrary set of Characteristics, but Siri will likely not be able to\n * work with these.\n *\n * @group Service\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar Service = /** @class */ (function (_super) {\n    tslib_1.__extends(Service, _super);\n    function Service(displayName, UUID, subtype) {\n        if (displayName === void 0) { displayName = \"\"; }\n        var _this = _super.call(this) || this;\n        _this.iid = null; // assigned later by our containing Accessory\n        _this.name = null;\n        _this.characteristics = [];\n        _this.optionalCharacteristics = [];\n        /**\n         * @private\n         */\n        _this.isHiddenService = false;\n        /**\n         * @private\n         */\n        _this.isPrimaryService = false; // do not write to this directly\n        /**\n         * @private\n         */\n        _this.linkedServices = [];\n        (0, assert_1.default)(UUID, \"Services must be created with a valid UUID.\");\n        _this.displayName = displayName;\n        _this.UUID = UUID;\n        _this.subtype = subtype;\n        // every service has an optional Characteristic.Name property - we'll set it to our displayName\n        // if one was given\n        // if you don't provide a display name, some HomeKit apps may choose to hide the device.\n        if (displayName) {\n            // create the characteristic if necessary\n            var nameCharacteristic = _this.getCharacteristic(Characteristic_1.Characteristic.Name) ||\n                _this.addCharacteristic(Characteristic_1.Characteristic.Name);\n            nameCharacteristic.updateValue(displayName);\n        }\n        return _this;\n    }\n    /**\n     * Returns an id which uniquely identifies a service on the associated accessory.\n     * The serviceId is a concatenation of the UUID for the service (defined by HAP) and the subtype (could be empty)\n     * which is programmatically defined by the programmer.\n     *\n     * @returns the serviceId\n     */\n    Service.prototype.getServiceId = function () {\n        return this.UUID + (this.subtype || \"\");\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Service.prototype.addCharacteristic = function (input) {\n        // characteristic might be a constructor like `Characteristic.Brightness` instead of an instance of Characteristic. Coerce if necessary.\n        var e_1, _a;\n        var constructorArgs = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            constructorArgs[_i - 1] = arguments[_i];\n        }\n        var characteristic = typeof input === \"function\" ? new (input.bind.apply(input, tslib_1.__spreadArray([void 0], tslib_1.__read(constructorArgs), false)))() : input;\n        try {\n            // check for UUID conflict\n            for (var _b = tslib_1.__values(this.characteristics), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var existing = _c.value;\n                if (existing.UUID === characteristic.UUID) {\n                    if (characteristic.UUID === \"00000052-0000-1000-8000-0026BB765291\") {\n                        //This is a special workaround for the Firmware Revision characteristic.\n                        return existing;\n                    }\n                    throw new Error(\"Cannot add a Characteristic with the same UUID as another Characteristic in this Service: \" + existing.UUID);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        if (this.characteristics.length >= MAX_CHARACTERISTICS) {\n            throw new Error(\"Cannot add more than \" + MAX_CHARACTERISTICS + \" characteristics to a single service!\");\n        }\n        this.setupCharacteristicEventHandlers(characteristic);\n        this.characteristics.push(characteristic);\n        this.emit(\"service-configurationChange\" /* ServiceEventTypes.SERVICE_CONFIGURATION_CHANGE */);\n        return characteristic;\n    };\n    /**\n     * Sets this service as the new primary service.\n     * Any currently active primary service will be reset to be not primary.\n     * This will happen immediately, if the service was already added to an accessory, or later\n     * when the service gets added to an accessory.\n     *\n     * @param isPrimary - optional boolean (default true) if the service should be the primary service\n     */\n    Service.prototype.setPrimaryService = function (isPrimary) {\n        if (isPrimary === void 0) { isPrimary = true; }\n        this.isPrimaryService = isPrimary;\n        this.emit(\"service-configurationChange\" /* ServiceEventTypes.SERVICE_CONFIGURATION_CHANGE */);\n    };\n    /**\n     * Marks the service as hidden\n     *\n     * @param isHidden - optional boolean (default true) if the service should be marked hidden\n     */\n    Service.prototype.setHiddenService = function (isHidden) {\n        if (isHidden === void 0) { isHidden = true; }\n        this.isHiddenService = isHidden;\n        this.emit(\"service-configurationChange\" /* ServiceEventTypes.SERVICE_CONFIGURATION_CHANGE */);\n    };\n    /**\n     * Adds a new link to the specified service. The service MUST be already added to\n     * the SAME accessory.\n     *\n     * @param service - The service this service should link to\n     */\n    Service.prototype.addLinkedService = function (service) {\n        //TODO: Add a check if the service is on the same accessory.\n        if (!this.linkedServices.includes(service)) {\n            this.linkedServices.push(service);\n        }\n        this.emit(\"service-configurationChange\" /* ServiceEventTypes.SERVICE_CONFIGURATION_CHANGE */);\n    };\n    /**\n     * Removes a link to the specified service which was previously added with {@link addLinkedService}\n     *\n     * @param service - Previously linked service\n     */\n    Service.prototype.removeLinkedService = function (service) {\n        //TODO: Add a check if the service is on the same accessory.\n        var index = this.linkedServices.indexOf(service);\n        if (index !== -1) {\n            this.linkedServices.splice(index, 1);\n        }\n        this.emit(\"service-configurationChange\" /* ServiceEventTypes.SERVICE_CONFIGURATION_CHANGE */);\n    };\n    Service.prototype.removeCharacteristic = function (characteristic) {\n        var index = this.characteristics.indexOf(characteristic);\n        if (index !== -1) {\n            this.characteristics.splice(index, 1);\n            characteristic.removeAllListeners();\n            this.emit(\"service-configurationChange\" /* ServiceEventTypes.SERVICE_CONFIGURATION_CHANGE */);\n        }\n    };\n    Service.prototype.getCharacteristic = function (name) {\n        // returns a characteristic object from the service\n        // If  Service.prototype.getCharacteristic(Characteristic.Type)  does not find the characteristic,\n        // but the type is in optionalCharacteristics, it adds the characteristic.type to the service and returns it.\n        var e_2, _a, e_3, _b;\n        try {\n            for (var _c = tslib_1.__values(this.characteristics), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var characteristic = _d.value;\n                if (typeof name === \"string\" && characteristic.displayName === name) {\n                    return characteristic;\n                }\n                else {\n                    // @ts-expect-error ('UUID' does not exist on type 'never')\n                    if (typeof name === \"function\" && ((characteristic instanceof name) || (name.UUID === characteristic.UUID))) {\n                        return characteristic;\n                    }\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        if (typeof name === \"function\") {\n            try {\n                for (var _e = tslib_1.__values(this.optionalCharacteristics), _f = _e.next(); !_f.done; _f = _e.next()) {\n                    var characteristic = _f.value;\n                    // @ts-expect-error ('UUID' does not exist on type 'never')\n                    if ((characteristic instanceof name) || (name.UUID === characteristic.UUID)) {\n                        return this.addCharacteristic(name);\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            var instance = this.addCharacteristic(name);\n            // Not found in optional Characteristics. Adding anyway, but warning about it if it isn't the Name.\n            if (name.UUID !== Characteristic_1.Characteristic.Name.UUID) {\n                this.emitCharacteristicWarningEvent(instance, \"warn-message\" /* CharacteristicWarningType.WARN_MESSAGE */, \"Characteristic not in required or optional characteristic section for service \" + this.constructor.name + \". Adding anyway.\");\n            }\n            return instance;\n        }\n    };\n    Service.prototype.testCharacteristic = function (name) {\n        var e_4, _a;\n        try {\n            // checks for the existence of a characteristic object in the service\n            for (var _b = tslib_1.__values(this.characteristics), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var characteristic = _c.value;\n                if (typeof name === \"string\" && characteristic.displayName === name) {\n                    return true;\n                }\n                else {\n                    // @ts-expect-error ('UUID' does not exist on type 'never')\n                    if (typeof name === \"function\" && ((characteristic instanceof name) || (name.UUID === characteristic.UUID))) {\n                        return true;\n                    }\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        return false;\n    };\n    Service.prototype.setCharacteristic = function (name, value) {\n        // @ts-expect-error: We know that both overloads exists individually. There is just no publicly exposed type for that!\n        this.getCharacteristic(name).setValue(value);\n        return this; // for chaining\n    };\n    Service.prototype.updateCharacteristic = function (name, value) {\n        this.getCharacteristic(name).updateValue(value);\n        return this;\n    };\n    Service.prototype.addOptionalCharacteristic = function (characteristic) {\n        // characteristic might be a constructor like `Characteristic.Brightness` instead of an instance\n        // of Characteristic. Coerce if necessary.\n        if (typeof characteristic === \"function\") {\n            characteristic = new characteristic();\n        }\n        this.optionalCharacteristics.push(characteristic);\n    };\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * This method was created to copy all characteristics from another service to this.\n     * It's only adopting is currently in homebridge to merge the AccessoryInformation service. So some things\n     * may be explicitly tailored towards this use case.\n     *\n     * It will not remove characteristics which are present currently but not added on the other characteristic.\n     * It will not replace the characteristic if the value is falsy (except of '0' or 'false')\n     * @param service\n     * @private used by homebridge\n     */\n    Service.prototype.replaceCharacteristicsFromService = function (service) {\n        var _this = this;\n        if (this.UUID !== service.UUID) {\n            throw new Error(\"Incompatible services. Tried replacing characteristics of \".concat(this.UUID, \" with characteristics from \").concat(service.UUID));\n        }\n        var foreignCharacteristics = {}; // index foreign characteristics by UUID\n        service.characteristics.forEach(function (characteristic) { return foreignCharacteristics[characteristic.UUID] = characteristic; });\n        this.characteristics.forEach(function (characteristic) {\n            var foreignCharacteristic = foreignCharacteristics[characteristic.UUID];\n            if (foreignCharacteristic) {\n                delete foreignCharacteristics[characteristic.UUID];\n                if (!foreignCharacteristic.value && foreignCharacteristic.value !== 0 && foreignCharacteristic.value !== false) {\n                    return; // ignore falsy values except if it's the number zero or literally false\n                }\n                characteristic.replaceBy(foreignCharacteristic);\n            }\n        });\n        // add all additional characteristics which where not present already\n        Object.values(foreignCharacteristics).forEach(function (characteristic) { return _this.addCharacteristic(characteristic); });\n    };\n    /**\n     * @private\n     */\n    Service.prototype.getCharacteristicByIID = function (iid) {\n        var e_5, _a;\n        try {\n            for (var _b = tslib_1.__values(this.characteristics), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var characteristic = _c.value;\n                if (characteristic.iid === iid) {\n                    return characteristic;\n                }\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n    };\n    /**\n     * @private\n     */\n    Service.prototype._assignIDs = function (identifierCache, accessoryName, baseIID) {\n        var e_6, _a;\n        if (baseIID === void 0) { baseIID = 0; }\n        // the Accessory Information service must have a (reserved by IdentifierCache) ID of 1\n        if (this.UUID === \"0000003E-0000-1000-8000-0026BB765291\") {\n            this.iid = 1;\n        }\n        else {\n            // assign our own ID based on our UUID\n            this.iid = baseIID + identifierCache.getIID(accessoryName, this.UUID, this.subtype);\n        }\n        try {\n            // assign IIDs to our Characteristics\n            for (var _b = tslib_1.__values(this.characteristics), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var characteristic = _c.value;\n                characteristic._assignID(identifierCache, accessoryName, this.UUID, this.subtype);\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n    };\n    /**\n     * Returns a JSON representation of this service suitable for delivering to HAP clients.\n     * @private used to generate response to /accessories query\n     */\n    Service.prototype.toHAP = function (connection, contactGetHandlers) {\n        var _this = this;\n        if (contactGetHandlers === void 0) { contactGetHandlers = true; }\n        return new Promise(function (resolve) {\n            var e_7, _a, e_8, _b;\n            (0, assert_1.default)(_this.iid, \"iid cannot be undefined for service '\" + _this.displayName + \"'\");\n            (0, assert_1.default)(_this.characteristics.length, \"service '\" + _this.displayName + \"' does not have any characteristics!\");\n            var service = {\n                type: (0, uuid_1.toShortForm)(_this.UUID),\n                iid: _this.iid,\n                characteristics: [],\n                hidden: _this.isHiddenService ? true : undefined,\n                primary: _this.isPrimaryService ? true : undefined,\n            };\n            if (_this.linkedServices.length) {\n                service.linked = [];\n                try {\n                    for (var _c = tslib_1.__values(_this.linkedServices), _d = _c.next(); !_d.done; _d = _c.next()) {\n                        var linked = _d.value;\n                        if (!linked.iid) {\n                            // we got a linked service which is not added to the accessory\n                            // as it doesn't \"exists\" we just ignore it.\n                            // we have some (at least one) plugins on homebridge which link to the AccessoryInformation service.\n                            // homebridge always creates its own AccessoryInformation service and ignores the user supplied one\n                            // thus the link is automatically broken.\n                            debug(\"iid of linked service '\".concat(linked.displayName, \"' \").concat(linked.UUID, \" is undefined on service '\").concat(_this.displayName, \"'\"));\n                            continue;\n                        }\n                        service.linked.push(linked.iid);\n                    }\n                }\n                catch (e_7_1) { e_7 = { error: e_7_1 }; }\n                finally {\n                    try {\n                        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                    }\n                    finally { if (e_7) throw e_7.error; }\n                }\n            }\n            var missingCharacteristics = new Set();\n            var timeout = setTimeout(function () {\n                var e_9, _a;\n                try {\n                    for (var missingCharacteristics_1 = tslib_1.__values(missingCharacteristics), missingCharacteristics_1_1 = missingCharacteristics_1.next(); !missingCharacteristics_1_1.done; missingCharacteristics_1_1 = missingCharacteristics_1.next()) {\n                        var characteristic = missingCharacteristics_1_1.value;\n                        _this.emitCharacteristicWarningEvent(characteristic, \"slow-read\" /* CharacteristicWarningType.SLOW_READ */, \"The read handler for the characteristic '\".concat(characteristic.displayName, \"' was slow to respond!\"));\n                    }\n                }\n                catch (e_9_1) { e_9 = { error: e_9_1 }; }\n                finally {\n                    try {\n                        if (missingCharacteristics_1_1 && !missingCharacteristics_1_1.done && (_a = missingCharacteristics_1.return)) _a.call(missingCharacteristics_1);\n                    }\n                    finally { if (e_9) throw e_9.error; }\n                }\n                timeout = setTimeout(function () {\n                    var e_10, _a;\n                    timeout = undefined;\n                    try {\n                        for (var missingCharacteristics_2 = tslib_1.__values(missingCharacteristics), missingCharacteristics_2_1 = missingCharacteristics_2.next(); !missingCharacteristics_2_1.done; missingCharacteristics_2_1 = missingCharacteristics_2.next()) {\n                            var characteristic = missingCharacteristics_2_1.value;\n                            _this.emitCharacteristicWarningEvent(characteristic, \"timeout-read\" /* CharacteristicWarningType.TIMEOUT_READ */, \"The read handler for the characteristic '\" + (characteristic === null || characteristic === void 0 ? void 0 : characteristic.displayName) +\n                                \"' didn't respond at all!. Please check that you properly call the callback!\");\n                            service.characteristics.push(characteristic.internalHAPRepresentation()); // value is set to null\n                        }\n                    }\n                    catch (e_10_1) { e_10 = { error: e_10_1 }; }\n                    finally {\n                        try {\n                            if (missingCharacteristics_2_1 && !missingCharacteristics_2_1.done && (_a = missingCharacteristics_2.return)) _a.call(missingCharacteristics_2);\n                        }\n                        finally { if (e_10) throw e_10.error; }\n                    }\n                    missingCharacteristics.clear();\n                    resolve(service);\n                }, 6000);\n            }, 3000);\n            var _loop_1 = function (characteristic) {\n                missingCharacteristics.add(characteristic);\n                characteristic.toHAP(connection, contactGetHandlers).then(function (value) {\n                    if (!timeout) {\n                        return; // if timeout is undefined, response was already sent out\n                    }\n                    missingCharacteristics.delete(characteristic);\n                    service.characteristics.push(value);\n                    if (missingCharacteristics.size === 0) {\n                        if (timeout) {\n                            clearTimeout(timeout);\n                            timeout = undefined;\n                        }\n                        resolve(service);\n                    }\n                });\n            };\n            try {\n                for (var _e = tslib_1.__values(_this.characteristics), _f = _e.next(); !_f.done; _f = _e.next()) {\n                    var characteristic = _f.value;\n                    _loop_1(characteristic);\n                }\n            }\n            catch (e_8_1) { e_8 = { error: e_8_1 }; }\n            finally {\n                try {\n                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                }\n                finally { if (e_8) throw e_8.error; }\n            }\n        });\n    };\n    /**\n     * Returns a JSON representation of this service without characteristic values.\n     * @private used to generate the config hash\n     */\n    Service.prototype.internalHAPRepresentation = function () {\n        var e_11, _a;\n        (0, assert_1.default)(this.iid, \"iid cannot be undefined for service '\" + this.displayName + \"'\");\n        (0, assert_1.default)(this.characteristics.length, \"service '\" + this.displayName + \"' does not have any characteristics!\");\n        var service = {\n            type: (0, uuid_1.toShortForm)(this.UUID),\n            iid: this.iid,\n            characteristics: this.characteristics.map(function (characteristic) { return characteristic.internalHAPRepresentation(); }),\n            hidden: this.isHiddenService ? true : undefined,\n            primary: this.isPrimaryService ? true : undefined,\n        };\n        if (this.linkedServices.length) {\n            service.linked = [];\n            try {\n                for (var _b = tslib_1.__values(this.linkedServices), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var linked = _c.value;\n                    if (!linked.iid) {\n                        // we got a linked service which is not added to the accessory\n                        // as it doesn't \"exists\" we just ignore it.\n                        // we have some (at least one) plugins on homebridge which link to the AccessoryInformation service.\n                        // homebridge always creates its own AccessoryInformation service and ignores the user supplied one\n                        // thus the link is automatically broken.\n                        debug(\"iid of linked service '\".concat(linked.displayName, \"' \").concat(linked.UUID, \" is undefined on service '\").concat(this.displayName, \"'\"));\n                        continue;\n                    }\n                    service.linked.push(linked.iid);\n                }\n            }\n            catch (e_11_1) { e_11 = { error: e_11_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_11) throw e_11.error; }\n            }\n        }\n        return service;\n    };\n    /**\n     * @private\n     */\n    Service.prototype.setupCharacteristicEventHandlers = function (characteristic) {\n        var _this = this;\n        // listen for changes in characteristics and bubble them up\n        characteristic.on(\"change\" /* CharacteristicEventTypes.CHANGE */, function (change) {\n            _this.emit(\"characteristic-change\" /* ServiceEventTypes.CHARACTERISTIC_CHANGE */, tslib_1.__assign(tslib_1.__assign({}, change), { characteristic: characteristic }));\n        });\n        characteristic.on(\"characteristic-warning\" /* CharacteristicEventTypes.CHARACTERISTIC_WARNING */, this.emitCharacteristicWarningEvent.bind(this, characteristic));\n    };\n    /**\n     * @private\n     */\n    Service.prototype.emitCharacteristicWarningEvent = function (characteristic, type, message, stack) {\n        this.emit(\"characteristic-warning\" /* ServiceEventTypes.CHARACTERISTIC_WARNING */, {\n            characteristic: characteristic,\n            type: type,\n            message: message,\n            originatorChain: [this.displayName, characteristic.displayName],\n            stack: stack,\n        });\n    };\n    /**\n     * @private\n     */\n    Service.prototype._sideloadCharacteristics = function (targetCharacteristics) {\n        var e_12, _a;\n        try {\n            for (var targetCharacteristics_1 = tslib_1.__values(targetCharacteristics), targetCharacteristics_1_1 = targetCharacteristics_1.next(); !targetCharacteristics_1_1.done; targetCharacteristics_1_1 = targetCharacteristics_1.next()) {\n                var target = targetCharacteristics_1_1.value;\n                this.setupCharacteristicEventHandlers(target);\n            }\n        }\n        catch (e_12_1) { e_12 = { error: e_12_1 }; }\n        finally {\n            try {\n                if (targetCharacteristics_1_1 && !targetCharacteristics_1_1.done && (_a = targetCharacteristics_1.return)) _a.call(targetCharacteristics_1);\n            }\n            finally { if (e_12) throw e_12.error; }\n        }\n        this.characteristics = targetCharacteristics.slice();\n    };\n    /**\n     * @private\n     */\n    Service.serialize = function (service) {\n        var constructorName;\n        if (service.constructor.name !== \"Service\") {\n            constructorName = service.constructor.name;\n        }\n        return {\n            displayName: service.displayName,\n            UUID: service.UUID,\n            subtype: service.subtype,\n            constructorName: constructorName,\n            hiddenService: service.isHiddenService,\n            primaryService: service.isPrimaryService,\n            characteristics: service.characteristics.map(function (characteristic) { return Characteristic_1.Characteristic.serialize(characteristic); }),\n            optionalCharacteristics: service.optionalCharacteristics.map(function (characteristic) { return Characteristic_1.Characteristic.serialize(characteristic); }),\n        };\n    };\n    /**\n     * @private\n     */\n    Service.deserialize = function (json) {\n        var service;\n        if (json.constructorName && json.constructorName.charAt(0).toUpperCase() === json.constructorName.charAt(0)\n            && Service[json.constructorName]) { // MUST start with uppercase character and must exist on Service object\n            var constructor = Service[json.constructorName];\n            service = new constructor(json.displayName, json.subtype);\n        }\n        else {\n            service = new Service(json.displayName, json.UUID, json.subtype);\n        }\n        service.isHiddenService = !!json.hiddenService;\n        service.isPrimaryService = !!json.primaryService;\n        var characteristics = json.characteristics.map(function (serialized) { return Characteristic_1.Characteristic.deserialize(serialized); });\n        service._sideloadCharacteristics(characteristics);\n        if (json.optionalCharacteristics) {\n            service.optionalCharacteristics = json.optionalCharacteristics.map(function (serialized) { return Characteristic_1.Characteristic.deserialize(serialized); });\n        }\n        return service;\n    };\n    return Service;\n}(events_1.EventEmitter));\nexports.Service = Service;\n// We have a cyclic dependency problem. Within this file we have the definitions of \"./definitions\" as\n// type imports only (in order to define the static properties). Setting those properties is done outside\n// this file, within the definition files. Therefore, we import it at the end of this file. Seems weird, but is important.\nrequire(\"./definitions/ServiceDefinitions\");\n//# sourceMappingURL=Service.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LegacyCameraSourceAdapter = void 0;\n/**\n * @group Camera\n */\n// noinspection JSDeprecatedSymbols\nvar LegacyCameraSourceAdapter = /** @class */ (function () {\n    function LegacyCameraSourceAdapter(cameraSource) {\n        this.cameraSource = cameraSource;\n    }\n    LegacyCameraSourceAdapter.prototype.handleSnapshotRequest = function (request, callback) {\n        this.cameraSource.handleSnapshotRequest(request, function (error, buffer) {\n            callback(error ? error : undefined, buffer);\n        });\n    };\n    LegacyCameraSourceAdapter.prototype.prepareStream = function (request, callback) {\n        this.cameraSource.prepareStream(request, function (response) {\n            callback(undefined, response);\n        });\n    };\n    LegacyCameraSourceAdapter.prototype.handleStreamRequest = function (request, callback) {\n        // @ts-expect-error: compatible types\n        this.cameraSource.handleStreamRequest(request);\n        callback();\n    };\n    LegacyCameraSourceAdapter.prototype.forwardCloseConnection = function (sessionID) {\n        // In the legacy type CameraSource API it was required that the plugin dev would forward this call to the\n        // handleCloseConnection of the \"StreamController\". This is not needed anymore and is automatically handled\n        // by HAP-NodeJS. However, devs could possibly define other stuff in there so we still forward this call.\n        this.cameraSource.handleCloseConnection(sessionID);\n    };\n    return LegacyCameraSourceAdapter;\n}());\nexports.LegacyCameraSourceAdapter = LegacyCameraSourceAdapter;\n//# sourceMappingURL=Camera.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar dgram_1 = tslib_1.__importDefault(require(\"dgram\"));\n/**\n * RTPProxy to proxy unencrypted RTP and RTCP\n *\n * At early days of HomeKit camera support, HomeKit allowed for unencrypted RTP stream.\n * The proxy was created to deal with RTCP and SSRC related stuff from external streams back in that days.\n * Later HomeKit removed support for unencrypted stream so its mostly no longer useful anymore, only really for testing\n * with a custom HAP controller.\n * @group Camera\n */\nvar RTPProxy = /** @class */ (function () {\n    function RTPProxy(options) {\n        this.options = options;\n        this.startingPort = 10000;\n        this.type = options.isIPV6 ? \"udp6\" : \"udp4\";\n        this.startingPort = 10000;\n        this.outgoingAddress = options.outgoingAddress;\n        this.outgoingPort = options.outgoingPort;\n        this.incomingPayloadType = 0;\n        this.outgoingSSRC = options.outgoingSSRC;\n        this.disabled = options.disabled;\n        this.incomingSSRC = null;\n        this.outgoingPayloadType = null;\n    }\n    RTPProxy.prototype.setup = function () {\n        var _this = this;\n        return this.createSocketPair(this.type)\n            .then(function (sockets) {\n            _this.incomingRTPSocket = sockets[0];\n            _this.incomingRTCPSocket = sockets[1];\n            return _this.createSocket(_this.type);\n        }).then(function (socket) {\n            _this.outgoingSocket = socket;\n            _this.onBound();\n        });\n    };\n    RTPProxy.prototype.destroy = function () {\n        if (this.incomingRTPSocket) {\n            this.incomingRTPSocket.close();\n        }\n        if (this.incomingRTCPSocket) {\n            this.incomingRTCPSocket.close();\n        }\n        if (this.outgoingSocket) {\n            this.outgoingSocket.close();\n        }\n    };\n    RTPProxy.prototype.incomingRTPPort = function () {\n        var address = this.incomingRTPSocket.address();\n        if (typeof address !== \"string\") {\n            return address.port;\n        }\n        throw new Error(\"Unsupported socket!\");\n    };\n    RTPProxy.prototype.incomingRTCPPort = function () {\n        var address = this.incomingRTCPSocket.address();\n        if (typeof address !== \"string\") {\n            return address.port;\n        }\n        throw new Error(\"Unsupported socket!\");\n    };\n    RTPProxy.prototype.outgoingLocalPort = function () {\n        var address = this.outgoingSocket.address();\n        if (typeof address !== \"string\") {\n            return address.port;\n        }\n        throw new Error(\"Unsupported socket!\");\n    };\n    RTPProxy.prototype.setServerAddress = function (address) {\n        this.serverAddress = address;\n    };\n    RTPProxy.prototype.setServerRTPPort = function (port) {\n        this.serverRTPPort = port;\n    };\n    RTPProxy.prototype.setServerRTCPPort = function (port) {\n        this.serverRTCPPort = port;\n    };\n    RTPProxy.prototype.setIncomingPayloadType = function (pt) {\n        this.incomingPayloadType = pt;\n    };\n    RTPProxy.prototype.setOutgoingPayloadType = function (pt) {\n        this.outgoingPayloadType = pt;\n    };\n    RTPProxy.prototype.sendOut = function (msg) {\n        // Just drop it if we're not setup yet, I guess.\n        if (!this.outgoingAddress || !this.outgoingPort) {\n            return;\n        }\n        this.outgoingSocket.send(msg, this.outgoingPort, this.outgoingAddress);\n    };\n    RTPProxy.prototype.sendBack = function (msg) {\n        // Just drop it if we're not setup yet, I guess.\n        if (!this.serverAddress || !this.serverRTCPPort) {\n            return;\n        }\n        this.outgoingSocket.send(msg, this.serverRTCPPort, this.serverAddress);\n    };\n    RTPProxy.prototype.onBound = function () {\n        var _this = this;\n        if (this.disabled) {\n            return;\n        }\n        this.incomingRTPSocket.on(\"message\", function (msg) {\n            _this.rtpMessage(msg);\n        });\n        this.incomingRTCPSocket.on(\"message\", function (msg) {\n            _this.rtcpMessage(msg);\n        });\n        this.outgoingSocket.on(\"message\", function (msg) {\n            _this.rtcpReply(msg);\n        });\n    };\n    RTPProxy.prototype.rtpMessage = function (msg) {\n        if (msg.length < 12) {\n            // Not a proper RTP packet. Just forward it.\n            this.sendOut(msg);\n            return;\n        }\n        var mpt = msg.readUInt8(1);\n        var pt = mpt & 0x7F;\n        if (pt === this.incomingPayloadType) {\n            mpt = (mpt & 0x80) | this.outgoingPayloadType;\n            msg.writeUInt8(mpt, 1);\n        }\n        if (this.incomingSSRC === null) {\n            this.incomingSSRC = msg.readUInt32BE(4);\n        }\n        msg.writeUInt32BE(this.outgoingSSRC, 8);\n        this.sendOut(msg);\n    };\n    RTPProxy.prototype.processRTCPMessage = function (msg, transform) {\n        var rtcpPackets = [];\n        var offset = 0;\n        while ((offset + 4) <= msg.length) {\n            var pt = msg.readUInt8(offset + 1);\n            var len = msg.readUInt16BE(offset + 2) * 4;\n            if ((offset + 4 + len) > msg.length) {\n                break;\n            }\n            var packet = msg.slice(offset, offset + 4 + len);\n            packet = transform(pt, packet);\n            if (packet) {\n                rtcpPackets.push(packet);\n            }\n            offset += 4 + len;\n        }\n        if (rtcpPackets.length > 0) {\n            return Buffer.concat(rtcpPackets);\n        }\n        return null;\n    };\n    RTPProxy.prototype.rtcpMessage = function (msg) {\n        var _this = this;\n        var processed = this.processRTCPMessage(msg, function (pt, packet) {\n            if (pt !== 200 || packet.length < 8) {\n                return packet;\n            }\n            if (_this.incomingSSRC === null) {\n                _this.incomingSSRC = packet.readUInt32BE(4);\n            }\n            packet.writeUInt32BE(_this.outgoingSSRC, 4);\n            return packet;\n        });\n        if (processed) {\n            this.sendOut(processed);\n        }\n    };\n    RTPProxy.prototype.rtcpReply = function (msg) {\n        var _this = this;\n        var processed = this.processRTCPMessage(msg, function (pt, packet) {\n            if (pt !== 201 || packet.length < 12) {\n                return packet;\n            }\n            // Assume source 1 is the one we want to edit.\n            packet.writeUInt32BE(_this.incomingSSRC, 8);\n            return packet;\n        });\n        if (processed) {\n            this.sendOut(processed);\n        }\n    };\n    RTPProxy.prototype.createSocket = function (type) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            var retry = function () {\n                var socket = dgram_1.default.createSocket(type);\n                var bindErrorHandler = function () {\n                    if (_this.startingPort === 65535) {\n                        _this.startingPort = 10000;\n                    }\n                    else {\n                        ++_this.startingPort;\n                    }\n                    socket.close();\n                    retry();\n                };\n                socket.once(\"error\", bindErrorHandler);\n                socket.on(\"listening\", function () {\n                    resolve(socket);\n                });\n                socket.bind(_this.startingPort);\n            };\n            retry();\n        });\n    };\n    RTPProxy.prototype.createSocketPair = function (type) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            var retry = function () {\n                var socket1 = dgram_1.default.createSocket(type);\n                var socket2 = dgram_1.default.createSocket(type);\n                var state = { socket1: 0, socket2: 0 };\n                var recheck = function () {\n                    if (state.socket1 === 0 || state.socket2 === 0) {\n                        return;\n                    }\n                    if (state.socket1 === 2 && state.socket2 === 2) {\n                        resolve([socket1, socket2]);\n                        return;\n                    }\n                    if (_this.startingPort === 65534) {\n                        _this.startingPort = 10000;\n                    }\n                    else {\n                        ++_this.startingPort;\n                    }\n                    socket1.close();\n                    socket2.close();\n                    retry();\n                };\n                socket1.once(\"error\", function () {\n                    state.socket1 = 1;\n                    recheck();\n                });\n                socket2.once(\"error\", function () {\n                    state.socket2 = 1;\n                    recheck();\n                });\n                socket1.once(\"listening\", function () {\n                    state.socket1 = 2;\n                    recheck();\n                });\n                socket2.once(\"listening\", function () {\n                    state.socket2 = 2;\n                    recheck();\n                });\n                socket1.bind(_this.startingPort);\n                socket2.bind(_this.startingPort + 1);\n            };\n            retry();\n        });\n    };\n    return RTPProxy;\n}());\nexports.default = RTPProxy;\n//# sourceMappingURL=RTPProxy.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StreamController = exports.RTPStreamManagement = exports.StreamRequestTypes = exports.AudioStreamingSamplerate = exports.AudioStreamingCodecType = exports.SRTPCryptoSuites = exports.AudioSamplerate = exports.AudioBitrate = exports.VideoCodecPacketizationMode = exports.H264Level = exports.H264Profile = exports.VideoCodecType = void 0;\nvar tslib_1 = require(\"tslib\");\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar crypto_1 = tslib_1.__importDefault(require(\"crypto\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar net_1 = tslib_1.__importDefault(require(\"net\"));\nvar Characteristic_1 = require(\"../Characteristic\");\nvar controller_1 = require(\"../controller\");\nvar Service_1 = require(\"../Service\");\nvar hapStatusError_1 = require(\"../util/hapStatusError\");\nvar once_1 = require(\"../util/once\");\nvar tlv = tslib_1.__importStar(require(\"../util/tlv\"));\nvar uuid = tslib_1.__importStar(require(\"../util/uuid\"));\n// noinspection JSDeprecatedSymbols\nvar Camera_1 = require(\"./Camera\");\nvar RTPProxy_1 = tslib_1.__importDefault(require(\"./RTPProxy\"));\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:Camera:RTPStreamManagement\");\n// ---------------------------------- TLV DEFINITIONS START ----------------------------------\nvar StreamingStatusTypes;\n(function (StreamingStatusTypes) {\n    StreamingStatusTypes[StreamingStatusTypes[\"STATUS\"] = 1] = \"STATUS\";\n})(StreamingStatusTypes || (StreamingStatusTypes = {}));\nvar StreamingStatus;\n(function (StreamingStatus) {\n    StreamingStatus[StreamingStatus[\"AVAILABLE\"] = 0] = \"AVAILABLE\";\n    StreamingStatus[StreamingStatus[\"IN_USE\"] = 1] = \"IN_USE\";\n    StreamingStatus[StreamingStatus[\"UNAVAILABLE\"] = 2] = \"UNAVAILABLE\";\n})(StreamingStatus || (StreamingStatus = {}));\n// ----------\nvar SupportedVideoStreamConfigurationTypes;\n(function (SupportedVideoStreamConfigurationTypes) {\n    SupportedVideoStreamConfigurationTypes[SupportedVideoStreamConfigurationTypes[\"VIDEO_CODEC_CONFIGURATION\"] = 1] = \"VIDEO_CODEC_CONFIGURATION\";\n})(SupportedVideoStreamConfigurationTypes || (SupportedVideoStreamConfigurationTypes = {}));\nvar VideoCodecConfigurationTypes;\n(function (VideoCodecConfigurationTypes) {\n    VideoCodecConfigurationTypes[VideoCodecConfigurationTypes[\"CODEC_TYPE\"] = 1] = \"CODEC_TYPE\";\n    VideoCodecConfigurationTypes[VideoCodecConfigurationTypes[\"CODEC_PARAMETERS\"] = 2] = \"CODEC_PARAMETERS\";\n    VideoCodecConfigurationTypes[VideoCodecConfigurationTypes[\"ATTRIBUTES\"] = 3] = \"ATTRIBUTES\";\n})(VideoCodecConfigurationTypes || (VideoCodecConfigurationTypes = {}));\nvar VideoCodecParametersTypes;\n(function (VideoCodecParametersTypes) {\n    VideoCodecParametersTypes[VideoCodecParametersTypes[\"PROFILE_ID\"] = 1] = \"PROFILE_ID\";\n    VideoCodecParametersTypes[VideoCodecParametersTypes[\"LEVEL\"] = 2] = \"LEVEL\";\n    VideoCodecParametersTypes[VideoCodecParametersTypes[\"PACKETIZATION_MODE\"] = 3] = \"PACKETIZATION_MODE\";\n    VideoCodecParametersTypes[VideoCodecParametersTypes[\"CVO_ENABLED\"] = 4] = \"CVO_ENABLED\";\n    VideoCodecParametersTypes[VideoCodecParametersTypes[\"CVO_ID\"] = 5] = \"CVO_ID\";\n})(VideoCodecParametersTypes || (VideoCodecParametersTypes = {}));\nvar VideoAttributesTypes;\n(function (VideoAttributesTypes) {\n    VideoAttributesTypes[VideoAttributesTypes[\"IMAGE_WIDTH\"] = 1] = \"IMAGE_WIDTH\";\n    VideoAttributesTypes[VideoAttributesTypes[\"IMAGE_HEIGHT\"] = 2] = \"IMAGE_HEIGHT\";\n    VideoAttributesTypes[VideoAttributesTypes[\"FRAME_RATE\"] = 3] = \"FRAME_RATE\";\n})(VideoAttributesTypes || (VideoAttributesTypes = {}));\n/**\n * @group Camera\n */\nvar VideoCodecType;\n(function (VideoCodecType) {\n    VideoCodecType[VideoCodecType[\"H264\"] = 0] = \"H264\";\n    // while the namespace is already reserved for H265 it isn't currently supported.\n    // H265 = 0x01,\n})(VideoCodecType || (exports.VideoCodecType = VideoCodecType = {}));\n/**\n * @group Camera\n */\nvar H264Profile;\n(function (H264Profile) {\n    H264Profile[H264Profile[\"BASELINE\"] = 0] = \"BASELINE\";\n    H264Profile[H264Profile[\"MAIN\"] = 1] = \"MAIN\";\n    H264Profile[H264Profile[\"HIGH\"] = 2] = \"HIGH\";\n})(H264Profile || (exports.H264Profile = H264Profile = {}));\n/**\n * @group Camera\n */\nvar H264Level;\n(function (H264Level) {\n    H264Level[H264Level[\"LEVEL3_1\"] = 0] = \"LEVEL3_1\";\n    H264Level[H264Level[\"LEVEL3_2\"] = 1] = \"LEVEL3_2\";\n    H264Level[H264Level[\"LEVEL4_0\"] = 2] = \"LEVEL4_0\";\n})(H264Level || (exports.H264Level = H264Level = {}));\n/**\n * @group Camera\n */\nvar VideoCodecPacketizationMode;\n(function (VideoCodecPacketizationMode) {\n    VideoCodecPacketizationMode[VideoCodecPacketizationMode[\"NON_INTERLEAVED\"] = 0] = \"NON_INTERLEAVED\";\n})(VideoCodecPacketizationMode || (exports.VideoCodecPacketizationMode = VideoCodecPacketizationMode = {}));\nvar VideoCodecCVO;\n(function (VideoCodecCVO) {\n    VideoCodecCVO[VideoCodecCVO[\"UNSUPPORTED\"] = 0] = \"UNSUPPORTED\";\n    VideoCodecCVO[VideoCodecCVO[\"SUPPORTED\"] = 1] = \"SUPPORTED\";\n})(VideoCodecCVO || (VideoCodecCVO = {}));\n// ----------\nvar SupportedAudioStreamConfigurationTypes;\n(function (SupportedAudioStreamConfigurationTypes) {\n    SupportedAudioStreamConfigurationTypes[SupportedAudioStreamConfigurationTypes[\"AUDIO_CODEC_CONFIGURATION\"] = 1] = \"AUDIO_CODEC_CONFIGURATION\";\n    SupportedAudioStreamConfigurationTypes[SupportedAudioStreamConfigurationTypes[\"COMFORT_NOISE_SUPPORT\"] = 2] = \"COMFORT_NOISE_SUPPORT\";\n})(SupportedAudioStreamConfigurationTypes || (SupportedAudioStreamConfigurationTypes = {}));\nvar AudioCodecConfigurationTypes;\n(function (AudioCodecConfigurationTypes) {\n    AudioCodecConfigurationTypes[AudioCodecConfigurationTypes[\"CODEC_TYPE\"] = 1] = \"CODEC_TYPE\";\n    AudioCodecConfigurationTypes[AudioCodecConfigurationTypes[\"CODEC_PARAMETERS\"] = 2] = \"CODEC_PARAMETERS\";\n})(AudioCodecConfigurationTypes || (AudioCodecConfigurationTypes = {}));\nvar AudioCodecTypes;\n(function (AudioCodecTypes) {\n    AudioCodecTypes[AudioCodecTypes[\"PCMU\"] = 0] = \"PCMU\";\n    AudioCodecTypes[AudioCodecTypes[\"PCMA\"] = 1] = \"PCMA\";\n    AudioCodecTypes[AudioCodecTypes[\"AAC_ELD\"] = 2] = \"AAC_ELD\";\n    AudioCodecTypes[AudioCodecTypes[\"OPUS\"] = 3] = \"OPUS\";\n    AudioCodecTypes[AudioCodecTypes[\"MSBC\"] = 4] = \"MSBC\";\n    AudioCodecTypes[AudioCodecTypes[\"AMR\"] = 5] = \"AMR\";\n    AudioCodecTypes[AudioCodecTypes[\"AMR_WB\"] = 6] = \"AMR_WB\";\n})(AudioCodecTypes || (AudioCodecTypes = {}));\nvar AudioCodecParametersTypes;\n(function (AudioCodecParametersTypes) {\n    AudioCodecParametersTypes[AudioCodecParametersTypes[\"CHANNEL\"] = 1] = \"CHANNEL\";\n    AudioCodecParametersTypes[AudioCodecParametersTypes[\"BIT_RATE\"] = 2] = \"BIT_RATE\";\n    AudioCodecParametersTypes[AudioCodecParametersTypes[\"SAMPLE_RATE\"] = 3] = \"SAMPLE_RATE\";\n    AudioCodecParametersTypes[AudioCodecParametersTypes[\"PACKET_TIME\"] = 4] = \"PACKET_TIME\"; // only present in selected audio codec parameters tlv\n})(AudioCodecParametersTypes || (AudioCodecParametersTypes = {}));\n/**\n * @group Camera\n */\nvar AudioBitrate;\n(function (AudioBitrate) {\n    AudioBitrate[AudioBitrate[\"VARIABLE\"] = 0] = \"VARIABLE\";\n    AudioBitrate[AudioBitrate[\"CONSTANT\"] = 1] = \"CONSTANT\";\n})(AudioBitrate || (exports.AudioBitrate = AudioBitrate = {}));\n/**\n * @group Camera\n */\nvar AudioSamplerate;\n(function (AudioSamplerate) {\n    AudioSamplerate[AudioSamplerate[\"KHZ_8\"] = 0] = \"KHZ_8\";\n    AudioSamplerate[AudioSamplerate[\"KHZ_16\"] = 1] = \"KHZ_16\";\n    AudioSamplerate[AudioSamplerate[\"KHZ_24\"] = 2] = \"KHZ_24\";\n    // 3, 4, 5 are theoretically defined, but no idea to what kHz value they correspond to\n    // probably KHZ_32, KHZ_44_1, KHZ_48 (as supported by Secure Video recordings)\n})(AudioSamplerate || (exports.AudioSamplerate = AudioSamplerate = {}));\n// ----------\nvar SupportedRTPConfigurationTypes;\n(function (SupportedRTPConfigurationTypes) {\n    SupportedRTPConfigurationTypes[SupportedRTPConfigurationTypes[\"SRTP_CRYPTO_SUITE\"] = 2] = \"SRTP_CRYPTO_SUITE\";\n})(SupportedRTPConfigurationTypes || (SupportedRTPConfigurationTypes = {}));\n/**\n * @group Camera\n */\nvar SRTPCryptoSuites;\n(function (SRTPCryptoSuites) {\n    SRTPCryptoSuites[SRTPCryptoSuites[\"AES_CM_128_HMAC_SHA1_80\"] = 0] = \"AES_CM_128_HMAC_SHA1_80\";\n    SRTPCryptoSuites[SRTPCryptoSuites[\"AES_CM_256_HMAC_SHA1_80\"] = 1] = \"AES_CM_256_HMAC_SHA1_80\";\n    SRTPCryptoSuites[SRTPCryptoSuites[\"NONE\"] = 2] = \"NONE\";\n})(SRTPCryptoSuites || (exports.SRTPCryptoSuites = SRTPCryptoSuites = {}));\n// ----------\nvar SetupEndpointsTypes;\n(function (SetupEndpointsTypes) {\n    SetupEndpointsTypes[SetupEndpointsTypes[\"SESSION_ID\"] = 1] = \"SESSION_ID\";\n    SetupEndpointsTypes[SetupEndpointsTypes[\"CONTROLLER_ADDRESS\"] = 3] = \"CONTROLLER_ADDRESS\";\n    SetupEndpointsTypes[SetupEndpointsTypes[\"VIDEO_SRTP_PARAMETERS\"] = 4] = \"VIDEO_SRTP_PARAMETERS\";\n    SetupEndpointsTypes[SetupEndpointsTypes[\"AUDIO_SRTP_PARAMETERS\"] = 5] = \"AUDIO_SRTP_PARAMETERS\";\n})(SetupEndpointsTypes || (SetupEndpointsTypes = {}));\nvar AddressTypes;\n(function (AddressTypes) {\n    AddressTypes[AddressTypes[\"ADDRESS_VERSION\"] = 1] = \"ADDRESS_VERSION\";\n    AddressTypes[AddressTypes[\"ADDRESS\"] = 2] = \"ADDRESS\";\n    AddressTypes[AddressTypes[\"VIDEO_RTP_PORT\"] = 3] = \"VIDEO_RTP_PORT\";\n    AddressTypes[AddressTypes[\"AUDIO_RTP_PORT\"] = 4] = \"AUDIO_RTP_PORT\";\n})(AddressTypes || (AddressTypes = {}));\nvar IPAddressVersion;\n(function (IPAddressVersion) {\n    IPAddressVersion[IPAddressVersion[\"IPV4\"] = 0] = \"IPV4\";\n    IPAddressVersion[IPAddressVersion[\"IPV6\"] = 1] = \"IPV6\";\n})(IPAddressVersion || (IPAddressVersion = {}));\nvar SRTPParametersTypes;\n(function (SRTPParametersTypes) {\n    SRTPParametersTypes[SRTPParametersTypes[\"SRTP_CRYPTO_SUITE\"] = 1] = \"SRTP_CRYPTO_SUITE\";\n    SRTPParametersTypes[SRTPParametersTypes[\"MASTER_KEY\"] = 2] = \"MASTER_KEY\";\n    SRTPParametersTypes[SRTPParametersTypes[\"MASTER_SALT\"] = 3] = \"MASTER_SALT\"; // 14 bytes\n})(SRTPParametersTypes || (SRTPParametersTypes = {}));\nvar SetupEndpointsResponseTypes;\n(function (SetupEndpointsResponseTypes) {\n    SetupEndpointsResponseTypes[SetupEndpointsResponseTypes[\"SESSION_ID\"] = 1] = \"SESSION_ID\";\n    SetupEndpointsResponseTypes[SetupEndpointsResponseTypes[\"STATUS\"] = 2] = \"STATUS\";\n    SetupEndpointsResponseTypes[SetupEndpointsResponseTypes[\"ACCESSORY_ADDRESS\"] = 3] = \"ACCESSORY_ADDRESS\";\n    SetupEndpointsResponseTypes[SetupEndpointsResponseTypes[\"VIDEO_SRTP_PARAMETERS\"] = 4] = \"VIDEO_SRTP_PARAMETERS\";\n    SetupEndpointsResponseTypes[SetupEndpointsResponseTypes[\"AUDIO_SRTP_PARAMETERS\"] = 5] = \"AUDIO_SRTP_PARAMETERS\";\n    SetupEndpointsResponseTypes[SetupEndpointsResponseTypes[\"VIDEO_SSRC\"] = 6] = \"VIDEO_SSRC\";\n    SetupEndpointsResponseTypes[SetupEndpointsResponseTypes[\"AUDIO_SSRC\"] = 7] = \"AUDIO_SSRC\";\n})(SetupEndpointsResponseTypes || (SetupEndpointsResponseTypes = {}));\nvar SetupEndpointsStatus;\n(function (SetupEndpointsStatus) {\n    SetupEndpointsStatus[SetupEndpointsStatus[\"SUCCESS\"] = 0] = \"SUCCESS\";\n    SetupEndpointsStatus[SetupEndpointsStatus[\"BUSY\"] = 1] = \"BUSY\";\n    SetupEndpointsStatus[SetupEndpointsStatus[\"ERROR\"] = 2] = \"ERROR\";\n})(SetupEndpointsStatus || (SetupEndpointsStatus = {}));\n// ----------\nvar SelectedRTPStreamConfigurationTypes;\n(function (SelectedRTPStreamConfigurationTypes) {\n    SelectedRTPStreamConfigurationTypes[SelectedRTPStreamConfigurationTypes[\"SESSION_CONTROL\"] = 1] = \"SESSION_CONTROL\";\n    SelectedRTPStreamConfigurationTypes[SelectedRTPStreamConfigurationTypes[\"SELECTED_VIDEO_PARAMETERS\"] = 2] = \"SELECTED_VIDEO_PARAMETERS\";\n    SelectedRTPStreamConfigurationTypes[SelectedRTPStreamConfigurationTypes[\"SELECTED_AUDIO_PARAMETERS\"] = 3] = \"SELECTED_AUDIO_PARAMETERS\";\n})(SelectedRTPStreamConfigurationTypes || (SelectedRTPStreamConfigurationTypes = {}));\nvar SessionControlTypes;\n(function (SessionControlTypes) {\n    SessionControlTypes[SessionControlTypes[\"SESSION_IDENTIFIER\"] = 1] = \"SESSION_IDENTIFIER\";\n    SessionControlTypes[SessionControlTypes[\"COMMAND\"] = 2] = \"COMMAND\";\n})(SessionControlTypes || (SessionControlTypes = {}));\nvar SessionControlCommand;\n(function (SessionControlCommand) {\n    SessionControlCommand[SessionControlCommand[\"END_SESSION\"] = 0] = \"END_SESSION\";\n    SessionControlCommand[SessionControlCommand[\"START_SESSION\"] = 1] = \"START_SESSION\";\n    SessionControlCommand[SessionControlCommand[\"SUSPEND_SESSION\"] = 2] = \"SUSPEND_SESSION\";\n    SessionControlCommand[SessionControlCommand[\"RESUME_SESSION\"] = 3] = \"RESUME_SESSION\";\n    SessionControlCommand[SessionControlCommand[\"RECONFIGURE_SESSION\"] = 4] = \"RECONFIGURE_SESSION\";\n})(SessionControlCommand || (SessionControlCommand = {}));\nvar SelectedVideoParametersTypes;\n(function (SelectedVideoParametersTypes) {\n    SelectedVideoParametersTypes[SelectedVideoParametersTypes[\"CODEC_TYPE\"] = 1] = \"CODEC_TYPE\";\n    SelectedVideoParametersTypes[SelectedVideoParametersTypes[\"CODEC_PARAMETERS\"] = 2] = \"CODEC_PARAMETERS\";\n    SelectedVideoParametersTypes[SelectedVideoParametersTypes[\"ATTRIBUTES\"] = 3] = \"ATTRIBUTES\";\n    SelectedVideoParametersTypes[SelectedVideoParametersTypes[\"RTP_PARAMETERS\"] = 4] = \"RTP_PARAMETERS\";\n})(SelectedVideoParametersTypes || (SelectedVideoParametersTypes = {}));\nvar VideoRTPParametersTypes;\n(function (VideoRTPParametersTypes) {\n    VideoRTPParametersTypes[VideoRTPParametersTypes[\"PAYLOAD_TYPE\"] = 1] = \"PAYLOAD_TYPE\";\n    VideoRTPParametersTypes[VideoRTPParametersTypes[\"SYNCHRONIZATION_SOURCE\"] = 2] = \"SYNCHRONIZATION_SOURCE\";\n    VideoRTPParametersTypes[VideoRTPParametersTypes[\"MAX_BIT_RATE\"] = 3] = \"MAX_BIT_RATE\";\n    VideoRTPParametersTypes[VideoRTPParametersTypes[\"MIN_RTCP_INTERVAL\"] = 4] = \"MIN_RTCP_INTERVAL\";\n    VideoRTPParametersTypes[VideoRTPParametersTypes[\"MAX_MTU\"] = 5] = \"MAX_MTU\";\n})(VideoRTPParametersTypes || (VideoRTPParametersTypes = {}));\nvar SelectedAudioParametersTypes;\n(function (SelectedAudioParametersTypes) {\n    SelectedAudioParametersTypes[SelectedAudioParametersTypes[\"CODEC_TYPE\"] = 1] = \"CODEC_TYPE\";\n    SelectedAudioParametersTypes[SelectedAudioParametersTypes[\"CODEC_PARAMETERS\"] = 2] = \"CODEC_PARAMETERS\";\n    SelectedAudioParametersTypes[SelectedAudioParametersTypes[\"RTP_PARAMETERS\"] = 3] = \"RTP_PARAMETERS\";\n    SelectedAudioParametersTypes[SelectedAudioParametersTypes[\"COMFORT_NOISE\"] = 4] = \"COMFORT_NOISE\";\n})(SelectedAudioParametersTypes || (SelectedAudioParametersTypes = {}));\nvar AudioRTPParametersTypes;\n(function (AudioRTPParametersTypes) {\n    AudioRTPParametersTypes[AudioRTPParametersTypes[\"PAYLOAD_TYPE\"] = 1] = \"PAYLOAD_TYPE\";\n    AudioRTPParametersTypes[AudioRTPParametersTypes[\"SYNCHRONIZATION_SOURCE\"] = 2] = \"SYNCHRONIZATION_SOURCE\";\n    AudioRTPParametersTypes[AudioRTPParametersTypes[\"MAX_BIT_RATE\"] = 3] = \"MAX_BIT_RATE\";\n    AudioRTPParametersTypes[AudioRTPParametersTypes[\"MIN_RTCP_INTERVAL\"] = 4] = \"MIN_RTCP_INTERVAL\";\n    AudioRTPParametersTypes[AudioRTPParametersTypes[\"COMFORT_NOISE_PAYLOAD_TYPE\"] = 6] = \"COMFORT_NOISE_PAYLOAD_TYPE\";\n})(AudioRTPParametersTypes || (AudioRTPParametersTypes = {}));\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isLegacySRTPOptions(options) {\n    return \"srtp\" in options;\n}\n/**\n * @group Camera\n */\nvar AudioStreamingCodecType;\n(function (AudioStreamingCodecType) {\n    AudioStreamingCodecType[\"PCMU\"] = \"PCMU\";\n    AudioStreamingCodecType[\"PCMA\"] = \"PCMA\";\n    AudioStreamingCodecType[\"AAC_ELD\"] = \"AAC-eld\";\n    AudioStreamingCodecType[\"OPUS\"] = \"OPUS\";\n    AudioStreamingCodecType[\"MSBC\"] = \"mSBC\";\n    AudioStreamingCodecType[\"AMR\"] = \"AMR\";\n    AudioStreamingCodecType[\"AMR_WB\"] = \"AMR-WB\";\n})(AudioStreamingCodecType || (exports.AudioStreamingCodecType = AudioStreamingCodecType = {}));\n/**\n * @group Camera\n */\nvar AudioStreamingSamplerate;\n(function (AudioStreamingSamplerate) {\n    AudioStreamingSamplerate[AudioStreamingSamplerate[\"KHZ_8\"] = 8] = \"KHZ_8\";\n    AudioStreamingSamplerate[AudioStreamingSamplerate[\"KHZ_16\"] = 16] = \"KHZ_16\";\n    AudioStreamingSamplerate[AudioStreamingSamplerate[\"KHZ_24\"] = 24] = \"KHZ_24\";\n})(AudioStreamingSamplerate || (exports.AudioStreamingSamplerate = AudioStreamingSamplerate = {}));\n/**\n * @group Camera\n */\nvar StreamRequestTypes;\n(function (StreamRequestTypes) {\n    StreamRequestTypes[\"RECONFIGURE\"] = \"reconfigure\";\n    StreamRequestTypes[\"START\"] = \"start\";\n    StreamRequestTypes[\"STOP\"] = \"stop\";\n})(StreamRequestTypes || (exports.StreamRequestTypes = StreamRequestTypes = {}));\n/**\n * @group Camera\n */\nvar RTPStreamManagement = /** @class */ (function () {\n    function RTPStreamManagement(id, options, delegate, service, disabledThroughOperatingMode) {\n        this.videoOnly = false;\n        this.sessionIdentifier = undefined;\n        /**\n         * @private private API\n         */\n        this.streamStatus = 0 /* StreamingStatus.AVAILABLE */; // use _updateStreamStatus to update this property\n        this.selectedConfiguration = \"\"; // base64 representation of the currently selected configuration\n        this.setupEndpointsResponse = \"\"; // response of the SetupEndpoints Characteristic\n        this.id = id;\n        this.delegate = delegate;\n        this.requireProxy = options.proxy || false;\n        this.disableAudioProxy = options.disable_audio_proxy || false;\n        if (isLegacySRTPOptions(options)) {\n            this.supportedCryptoSuites = [options.srtp ? 0 /* SRTPCryptoSuites.AES_CM_128_HMAC_SHA1_80 */ : 2 /* SRTPCryptoSuites.NONE */];\n        }\n        else {\n            this.supportedCryptoSuites = options.supportedCryptoSuites;\n        }\n        if (this.supportedCryptoSuites.length === 0) {\n            this.supportedCryptoSuites.push(2 /* SRTPCryptoSuites.NONE */);\n        }\n        if (!options.video) {\n            throw new Error(\"Video parameters cannot be undefined in options\");\n        }\n        this.supportedRTPConfiguration = RTPStreamManagement._supportedRTPConfiguration(this.supportedCryptoSuites);\n        this.supportedVideoStreamConfiguration = RTPStreamManagement._supportedVideoStreamConfiguration(options.video);\n        this.supportedAudioStreamConfiguration = this._supportedAudioStreamConfiguration(options.audio);\n        this.activeConnectionClosedListener = this._handleStopStream.bind(this);\n        this.service = service || this.constructService(id);\n        this.setupServiceHandlers();\n        this.resetSetupEndpointsResponse();\n        this.resetSelectedStreamConfiguration();\n        this.disabledThroughOperatingMode = disabledThroughOperatingMode;\n    }\n    RTPStreamManagement.prototype.forceStop = function () {\n        this.handleSessionClosed();\n    };\n    RTPStreamManagement.prototype.getService = function () {\n        return this.service;\n    };\n    // noinspection JSUnusedGlobalSymbols,JSUnusedLocalSymbols\n    /**\n     * @deprecated\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    RTPStreamManagement.prototype.handleCloseConnection = function (connectionID) {\n        // This method is only here for legacy compatibility. It used to be called by legacy style CameraSource\n        // implementations to signal that the associated HAP connection was closed.\n        // This is now handled automatically. Thus, we don't need to do anything anymore.\n    };\n    RTPStreamManagement.prototype.handleFactoryReset = function () {\n        this.resetSelectedStreamConfiguration();\n        this.resetSetupEndpointsResponse();\n        this.service.updateCharacteristic(Characteristic_1.Characteristic.Active, true);\n        // on a factory reset the assumption is that all connections were already terminated and thus \"handleStopStream\" was already called\n    };\n    RTPStreamManagement.prototype.destroy = function () {\n        if (this.activeConnection) {\n            this._handleStopStream();\n        }\n    };\n    RTPStreamManagement.prototype.constructService = function (id) {\n        var managementService = new Service_1.Service.CameraRTPStreamManagement(\"\", id.toString());\n        // this service is required only when recording is enabled. We don't really have access to this info here,\n        // so we just add the characteristic. Doesn't really hurt.\n        managementService.setCharacteristic(Characteristic_1.Characteristic.Active, true);\n        return managementService;\n    };\n    RTPStreamManagement.prototype.setupServiceHandlers = function () {\n        var _this = this;\n        if (!this.service.testCharacteristic(Characteristic_1.Characteristic.Active)) {\n            // the active characteristic might not be present on some older configurations.\n            this.service.setCharacteristic(Characteristic_1.Characteristic.Active, true);\n        }\n        this.service.getCharacteristic(Characteristic_1.Characteristic.Active)\n            .on(\"change\" /* CharacteristicEventTypes.CHANGE */, function () { var _a; return (_a = _this.stateChangeDelegate) === null || _a === void 0 ? void 0 : _a.call(_this); })\n            .setProps({ adminOnlyAccess: [1 /* Access.WRITE */] });\n        // ensure that configurations are up-to-date and reflected in the characteristic values\n        this.service.setCharacteristic(Characteristic_1.Characteristic.SupportedRTPConfiguration, this.supportedRTPConfiguration);\n        this.service.setCharacteristic(Characteristic_1.Characteristic.SupportedVideoStreamConfiguration, this.supportedVideoStreamConfiguration);\n        this.service.setCharacteristic(Characteristic_1.Characteristic.SupportedAudioStreamConfiguration, this.supportedAudioStreamConfiguration);\n        this._updateStreamStatus(0 /* StreamingStatus.AVAILABLE */); // reset streaming status to available\n        this.service.setCharacteristic(Characteristic_1.Characteristic.SetupEndpoints, this.setupEndpointsResponse); // reset SetupEndpoints to default\n        this.service.getCharacteristic(Characteristic_1.Characteristic.SelectedRTPStreamConfiguration)\n            .on(\"get\" /* CharacteristicEventTypes.GET */, function (callback) {\n            if (_this.streamingIsDisabled()) {\n                callback(null, tlv.encode(1 /* SelectedRTPStreamConfigurationTypes.SESSION_CONTROL */, tlv.encode(2 /* SessionControlTypes.COMMAND */, SessionControlCommand.SUSPEND_SESSION)).toString(\"base64\"));\n                return;\n            }\n            callback(null, _this.selectedConfiguration);\n        })\n            .on(\"set\" /* CharacteristicEventTypes.SET */, this._handleSelectedStreamConfigurationWrite.bind(this));\n        this.service.getCharacteristic(Characteristic_1.Characteristic.SetupEndpoints)\n            .on(\"get\" /* CharacteristicEventTypes.GET */, function (callback) {\n            if (_this.streamingIsDisabled()) {\n                callback(null, tlv.encode(2 /* SetupEndpointsResponseTypes.STATUS */, 2 /* SetupEndpointsStatus.ERROR */).toString(\"base64\"));\n                return;\n            }\n            callback(null, _this.setupEndpointsResponse);\n        })\n            .on(\"set\" /* CharacteristicEventTypes.SET */, function (value, callback, context, connection) {\n            if (!connection) {\n                debug(\"Set event handler for SetupEndpoints cannot be called from plugin. Connection undefined!\");\n                callback(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */);\n                return;\n            }\n            _this.handleSetupEndpoints(value, callback, connection);\n        });\n    };\n    RTPStreamManagement.prototype.handleSessionClosed = function () {\n        this.resetSelectedStreamConfiguration();\n        this.resetSetupEndpointsResponse();\n        if (this.activeConnection) {\n            this.activeConnection.removeListener(\"closed\" /* HAPConnectionEvent.CLOSED */, this.activeConnectionClosedListener);\n            this.activeConnection = undefined;\n        }\n        this._updateStreamStatus(0 /* StreamingStatus.AVAILABLE */);\n        this.sessionIdentifier = undefined;\n        // noinspection JSDeprecatedSymbols\n        this.connectionID = undefined;\n        this.ipVersion = undefined;\n        if (this.videoProxy) {\n            this.videoProxy.destroy();\n            this.videoProxy = undefined;\n        }\n        if (this.audioProxy) {\n            this.audioProxy.destroy();\n            this.audioProxy = undefined;\n        }\n    };\n    RTPStreamManagement.prototype.streamingIsDisabled = function (callback) {\n        var _a;\n        if (!this.service.getCharacteristic(Characteristic_1.Characteristic.Active).value) {\n            callback && callback(new hapStatusError_1.HapStatusError(-70412 /* HAPStatus.NOT_ALLOWED_IN_CURRENT_STATE */));\n            return true;\n        }\n        if ((_a = this.disabledThroughOperatingMode) === null || _a === void 0 ? void 0 : _a.call(this)) {\n            callback && callback(new hapStatusError_1.HapStatusError(-70412 /* HAPStatus.NOT_ALLOWED_IN_CURRENT_STATE */));\n            return true;\n        }\n        return false;\n    };\n    RTPStreamManagement.prototype._handleSelectedStreamConfigurationWrite = function (value, callback) {\n        var _this = this;\n        if (this.streamingIsDisabled(callback)) {\n            return;\n        }\n        var data = Buffer.from(value, \"base64\");\n        var objects = tlv.decode(data);\n        var sessionControl = tlv.decode(objects[1 /* SelectedRTPStreamConfigurationTypes.SESSION_CONTROL */]);\n        var sessionIdentifier = uuid.unparse(sessionControl[1 /* SessionControlTypes.SESSION_IDENTIFIER */]);\n        var requestType = sessionControl[2 /* SessionControlTypes.COMMAND */][0];\n        if (sessionIdentifier !== this.sessionIdentifier) {\n            debug(\"Received unknown session Identifier with request to \".concat(SessionControlCommand[requestType]));\n            callback(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */);\n            return;\n        }\n        this.selectedConfiguration = value;\n        // intercept the callback chain to check if an error occurred.\n        var streamCallback = function (error, writeResponse) {\n            callback(error, writeResponse); // does not support writeResponse, but how knows what comes in the future.\n            if (error) {\n                _this.handleSessionClosed();\n            }\n        };\n        switch (requestType) {\n            case SessionControlCommand.START_SESSION: {\n                var selectedVideoParameters = tlv.decode(objects[2 /* SelectedRTPStreamConfigurationTypes.SELECTED_VIDEO_PARAMETERS */]);\n                var selectedAudioParameters = tlv.decode(objects[3 /* SelectedRTPStreamConfigurationTypes.SELECTED_AUDIO_PARAMETERS */]);\n                this._handleStartStream(selectedVideoParameters, selectedAudioParameters, streamCallback);\n                break;\n            }\n            case SessionControlCommand.RECONFIGURE_SESSION: {\n                var reconfiguredVideoParameters = tlv.decode(objects[2 /* SelectedRTPStreamConfigurationTypes.SELECTED_VIDEO_PARAMETERS */]);\n                this.handleReconfigureStream(reconfiguredVideoParameters, streamCallback);\n                break;\n            }\n            case SessionControlCommand.END_SESSION:\n                this._handleStopStream(streamCallback);\n                break;\n            case SessionControlCommand.RESUME_SESSION:\n            case SessionControlCommand.SUSPEND_SESSION:\n            default:\n                debug(\"Unhandled request type \".concat(SessionControlCommand[requestType]));\n                callback(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */);\n                return;\n        }\n    };\n    RTPStreamManagement.prototype._handleStartStream = function (videoConfiguration, audioConfiguration, callback) {\n        // selected video configuration\n        // noinspection JSUnusedLocalSymbols\n        var videoCodec = videoConfiguration[1 /* SelectedVideoParametersTypes.CODEC_TYPE */]; // always 0x00 for h264\n        var videoParametersTLV = videoConfiguration[2 /* SelectedVideoParametersTypes.CODEC_PARAMETERS */];\n        var videoAttributesTLV = videoConfiguration[3 /* SelectedVideoParametersTypes.ATTRIBUTES */];\n        var videoRTPParametersTLV = videoConfiguration[4 /* SelectedVideoParametersTypes.RTP_PARAMETERS */];\n        // video parameters\n        var videoParameters = tlv.decode(videoParametersTLV);\n        var h264Profile = videoParameters[1 /* VideoCodecParametersTypes.PROFILE_ID */][0];\n        var h264Level = videoParameters[2 /* VideoCodecParametersTypes.LEVEL */][0];\n        var packetizationMode = videoParameters[3 /* VideoCodecParametersTypes.PACKETIZATION_MODE */][0];\n        var cvoEnabled = videoParameters[4 /* VideoCodecParametersTypes.CVO_ENABLED */];\n        var cvoId = undefined;\n        if (cvoEnabled && cvoEnabled[0] === 1 /* VideoCodecCVO.SUPPORTED */) {\n            cvoId = videoParameters[5 /* VideoCodecParametersTypes.CVO_ID */].readUInt8(0);\n        }\n        // video attributes\n        var videoAttributes = tlv.decode(videoAttributesTLV);\n        var width = videoAttributes[1 /* VideoAttributesTypes.IMAGE_WIDTH */].readUInt16LE(0);\n        var height = videoAttributes[2 /* VideoAttributesTypes.IMAGE_HEIGHT */].readUInt16LE(0);\n        var frameRate = videoAttributes[3 /* VideoAttributesTypes.FRAME_RATE */].readUInt8(0);\n        // video rtp parameters\n        var videoRTPParameters = tlv.decode(videoRTPParametersTLV);\n        var videoPayloadType = videoRTPParameters[1 /* VideoRTPParametersTypes.PAYLOAD_TYPE */].readUInt8(0); // 99\n        var videoSSRC = videoRTPParameters[2 /* VideoRTPParametersTypes.SYNCHRONIZATION_SOURCE */].readUInt32LE(0);\n        var videoMaximumBitrate = videoRTPParameters[3 /* VideoRTPParametersTypes.MAX_BIT_RATE */].readUInt16LE(0);\n        var videoRTCPInterval = videoRTPParameters[4 /* VideoRTPParametersTypes.MIN_RTCP_INTERVAL */].readFloatLE(0);\n        var maxMTU = this.ipVersion === \"ipv6\" ? 1228 : 1378; // default values ipv4: 1378 bytes; ipv6: 1228 bytes\n        if (videoRTPParameters[5 /* VideoRTPParametersTypes.MAX_MTU */]) {\n            maxMTU = videoRTPParameters[5 /* VideoRTPParametersTypes.MAX_MTU */].readUInt16LE(0);\n        }\n        // selected audio configuration\n        var audioCodec = audioConfiguration[1 /* SelectedAudioParametersTypes.CODEC_TYPE */][0];\n        var audioParametersTLV = audioConfiguration[2 /* SelectedAudioParametersTypes.CODEC_PARAMETERS */];\n        var audioRTPParametersTLV = audioConfiguration[3 /* SelectedAudioParametersTypes.RTP_PARAMETERS */];\n        var comfortNoise = !!audioConfiguration[4 /* SelectedAudioParametersTypes.COMFORT_NOISE */].readUInt8(0);\n        // audio parameters\n        var audioParameters = tlv.decode(audioParametersTLV);\n        var channels = audioParameters[1 /* AudioCodecParametersTypes.CHANNEL */][0];\n        var audioBitrate = audioParameters[2 /* AudioCodecParametersTypes.BIT_RATE */][0];\n        var samplerate = audioParameters[3 /* AudioCodecParametersTypes.SAMPLE_RATE */][0];\n        var rtpPacketTime = audioParameters[4 /* AudioCodecParametersTypes.PACKET_TIME */].readUInt8(0);\n        // audio rtp parameters\n        var audioRTPParameters = tlv.decode(audioRTPParametersTLV);\n        var audioPayloadType = audioRTPParameters[1 /* AudioRTPParametersTypes.PAYLOAD_TYPE */].readUInt8(0); // 110\n        var audioSSRC = audioRTPParameters[2 /* AudioRTPParametersTypes.SYNCHRONIZATION_SOURCE */].readUInt32LE(0);\n        var audioMaximumBitrate = audioRTPParameters[3 /* AudioRTPParametersTypes.MAX_BIT_RATE */].readUInt16LE(0);\n        var audioRTCPInterval = audioRTPParameters[4 /* AudioRTPParametersTypes.MIN_RTCP_INTERVAL */].readFloatLE(0);\n        var comfortNoisePayloadType = audioRTPParameters[6 /* AudioRTPParametersTypes.COMFORT_NOISE_PAYLOAD_TYPE */].readUInt8(0); // 13\n        if (this.requireProxy) {\n            this.videoProxy.setOutgoingPayloadType(videoPayloadType);\n            if (!this.disableAudioProxy) {\n                this.audioProxy.setOutgoingPayloadType(audioPayloadType);\n            }\n        }\n        var videoInfo = {\n            codec: videoCodec.readUInt8(0),\n            profile: h264Profile,\n            level: h264Level,\n            packetizationMode: packetizationMode,\n            cvoId: cvoId,\n            width: width,\n            height: height,\n            fps: frameRate,\n            pt: videoPayloadType,\n            ssrc: videoSSRC,\n            max_bit_rate: videoMaximumBitrate,\n            rtcp_interval: videoRTCPInterval,\n            mtu: maxMTU,\n        };\n        var audioCodecName;\n        var samplerateNum;\n        switch (audioCodec) {\n            case 0 /* AudioCodecTypes.PCMU */:\n                audioCodecName = \"PCMU\" /* AudioStreamingCodecType.PCMU */;\n                break;\n            case 1 /* AudioCodecTypes.PCMA */:\n                audioCodecName = \"PCMA\" /* AudioStreamingCodecType.PCMA */;\n                break;\n            case 2 /* AudioCodecTypes.AAC_ELD */:\n                audioCodecName = \"AAC-eld\" /* AudioStreamingCodecType.AAC_ELD */;\n                break;\n            case 3 /* AudioCodecTypes.OPUS */:\n                audioCodecName = \"OPUS\" /* AudioStreamingCodecType.OPUS */;\n                break;\n            case 4 /* AudioCodecTypes.MSBC */:\n                audioCodecName = \"mSBC\" /* AudioStreamingCodecType.MSBC */;\n                break;\n            case 5 /* AudioCodecTypes.AMR */:\n                audioCodecName = \"AMR\" /* AudioStreamingCodecType.AMR */;\n                break;\n            case 6 /* AudioCodecTypes.AMR_WB */:\n                audioCodecName = \"AMR-WB\" /* AudioStreamingCodecType.AMR_WB */;\n                break;\n            default:\n                throw new Error(\"Encountered unknown selected audio codec \".concat(audioCodec));\n        }\n        switch (samplerate) {\n            case 0 /* AudioSamplerate.KHZ_8 */:\n                samplerateNum = 8;\n                break;\n            case 1 /* AudioSamplerate.KHZ_16 */:\n                samplerateNum = 16;\n                break;\n            case 2 /* AudioSamplerate.KHZ_24 */:\n                samplerateNum = 24;\n                break;\n            default:\n                throw new Error(\"Encountered unknown selected audio samplerate \".concat(samplerate));\n        }\n        var audioInfo = {\n            codec: audioCodecName,\n            channel: channels,\n            bit_rate: audioBitrate,\n            sample_rate: samplerateNum,\n            packet_time: rtpPacketTime,\n            pt: audioPayloadType,\n            ssrc: audioSSRC,\n            max_bit_rate: audioMaximumBitrate,\n            rtcp_interval: audioRTCPInterval,\n            comfort_pt: comfortNoisePayloadType,\n            comfortNoiseEnabled: comfortNoise,\n        };\n        var request = {\n            sessionID: this.sessionIdentifier,\n            type: \"start\" /* StreamRequestTypes.START */,\n            video: videoInfo,\n            audio: audioInfo,\n        };\n        this.delegate.handleStreamRequest(request, function (error) { return callback(error); });\n    };\n    RTPStreamManagement.prototype.handleReconfigureStream = function (videoConfiguration, callback) {\n        // selected video configuration\n        var videoAttributesTLV = videoConfiguration[3 /* SelectedVideoParametersTypes.ATTRIBUTES */];\n        var videoRTPParametersTLV = videoConfiguration[4 /* SelectedVideoParametersTypes.RTP_PARAMETERS */];\n        // video attributes\n        var videoAttributes = tlv.decode(videoAttributesTLV);\n        var width = videoAttributes[1 /* VideoAttributesTypes.IMAGE_WIDTH */].readUInt16LE(0);\n        var height = videoAttributes[2 /* VideoAttributesTypes.IMAGE_HEIGHT */].readUInt16LE(0);\n        var frameRate = videoAttributes[3 /* VideoAttributesTypes.FRAME_RATE */].readUInt8(0);\n        // video rtp parameters\n        var videoRTPParameters = tlv.decode(videoRTPParametersTLV);\n        var videoMaximumBitrate = videoRTPParameters[3 /* VideoRTPParametersTypes.MAX_BIT_RATE */].readUInt16LE(0);\n        // seems to be always zero, use default of 0.5\n        var videoRTCPInterval = videoRTPParameters[4 /* VideoRTPParametersTypes.MIN_RTCP_INTERVAL */].readFloatLE(0) || 0.5;\n        var reconfiguredVideoInfo = {\n            width: width,\n            height: height,\n            fps: frameRate,\n            max_bit_rate: videoMaximumBitrate,\n            rtcp_interval: videoRTCPInterval,\n        };\n        var request = {\n            sessionID: this.sessionIdentifier,\n            type: \"reconfigure\" /* StreamRequestTypes.RECONFIGURE */,\n            video: reconfiguredVideoInfo,\n        };\n        this.delegate.handleStreamRequest(request, function (error) { return callback(error); });\n    };\n    RTPStreamManagement.prototype._handleStopStream = function (callback) {\n        var request = {\n            sessionID: this.sessionIdentifier, // save sessionIdentifier before handleSessionClosed is called\n            type: \"stop\" /* StreamRequestTypes.STOP */,\n        };\n        this.handleSessionClosed();\n        this.delegate.handleStreamRequest(request, function (error) { return callback ? callback(error) : undefined; });\n    };\n    RTPStreamManagement.prototype.handleSetupEndpoints = function (value, callback, connection) {\n        var _this = this;\n        if (this.streamingIsDisabled(callback)) {\n            return;\n        }\n        var data = Buffer.from(value, \"base64\");\n        var objects = tlv.decode(data);\n        var sessionIdentifier = uuid.unparse(objects[1 /* SetupEndpointsTypes.SESSION_ID */]);\n        if (this.streamStatus !== 0 /* StreamingStatus.AVAILABLE */) {\n            this.setupEndpointsResponse = tlv.encode(1 /* SetupEndpointsResponseTypes.SESSION_ID */, uuid.write(sessionIdentifier), 2 /* SetupEndpointsResponseTypes.STATUS */, 1 /* SetupEndpointsStatus.BUSY */).toString(\"base64\");\n            callback();\n            return;\n        }\n        (0, assert_1.default)(this.activeConnection == null, \"Found non-nil `activeConnection` when trying to setup streaming endpoints, even though streamStatus is reported to be AVAILABLE!\");\n        this.activeConnection = connection;\n        this.activeConnection.on(\"closed\" /* HAPConnectionEvent.CLOSED */, this.activeConnectionClosedListener);\n        // noinspection JSDeprecatedSymbols\n        this.connectionID = connection.sessionID;\n        this.sessionIdentifier = sessionIdentifier;\n        this._updateStreamStatus(1 /* StreamingStatus.IN_USE */);\n        // Address\n        var targetAddressPayload = objects[3 /* SetupEndpointsTypes.CONTROLLER_ADDRESS */];\n        var processedAddressInfo = tlv.decode(targetAddressPayload);\n        var addressVersion = processedAddressInfo[1 /* AddressTypes.ADDRESS_VERSION */][0];\n        var controllerAddress = processedAddressInfo[2 /* AddressTypes.ADDRESS */].toString(\"utf8\");\n        var targetVideoPort = processedAddressInfo[3 /* AddressTypes.VIDEO_RTP_PORT */].readUInt16LE(0);\n        var targetAudioPort = processedAddressInfo[4 /* AddressTypes.AUDIO_RTP_PORT */].readUInt16LE(0);\n        // Video SRTP Params\n        var videoSRTPPayload = objects[4 /* SetupEndpointsTypes.VIDEO_SRTP_PARAMETERS */];\n        var processedVideoInfo = tlv.decode(videoSRTPPayload);\n        var videoCryptoSuite = processedVideoInfo[1 /* SRTPParametersTypes.SRTP_CRYPTO_SUITE */][0];\n        var videoMasterKey = processedVideoInfo[2 /* SRTPParametersTypes.MASTER_KEY */];\n        var videoMasterSalt = processedVideoInfo[3 /* SRTPParametersTypes.MASTER_SALT */];\n        // Audio SRTP Params\n        var audioSRTPPayload = objects[5 /* SetupEndpointsTypes.AUDIO_SRTP_PARAMETERS */];\n        var processedAudioInfo = tlv.decode(audioSRTPPayload);\n        var audioCryptoSuite = processedAudioInfo[1 /* SRTPParametersTypes.SRTP_CRYPTO_SUITE */][0];\n        var audioMasterKey = processedAudioInfo[2 /* SRTPParametersTypes.MASTER_KEY */];\n        var audioMasterSalt = processedAudioInfo[3 /* SRTPParametersTypes.MASTER_SALT */];\n        debug(\"Session: \", sessionIdentifier, \"\\nControllerAddress: \", controllerAddress, \"\\nVideoPort: \", targetVideoPort, \"\\nAudioPort: \", targetAudioPort, \"\\nVideo Crypto: \", videoCryptoSuite, \"\\nVideo Master Key: \", videoMasterKey, \"\\nVideo Master Salt: \", videoMasterSalt, \"\\nAudio Crypto: \", audioCryptoSuite, \"\\nAudio Master Key: \", audioMasterKey, \"\\nAudio Master Salt: \", audioMasterSalt);\n        var prepareRequest = {\n            sessionID: sessionIdentifier,\n            sourceAddress: connection.localAddress,\n            targetAddress: controllerAddress,\n            addressVersion: addressVersion === 1 /* IPAddressVersion.IPV6 */ ? \"ipv6\" : \"ipv4\",\n            video: {\n                port: targetVideoPort,\n                srtpCryptoSuite: videoCryptoSuite,\n                srtp_key: videoMasterKey,\n                srtp_salt: videoMasterSalt,\n            },\n            audio: {\n                port: targetAudioPort,\n                srtpCryptoSuite: audioCryptoSuite,\n                srtp_key: audioMasterKey,\n                srtp_salt: audioMasterSalt,\n            },\n        };\n        var promises = [];\n        if (this.requireProxy) {\n            prepareRequest.targetAddress = connection.getLocalAddress(addressVersion === 1 /* IPAddressVersion.IPV6 */ ? \"ipv6\" : \"ipv4\"); // ip versions must be the same\n            this.videoProxy = new RTPProxy_1.default({\n                outgoingAddress: controllerAddress,\n                outgoingPort: targetVideoPort,\n                outgoingSSRC: crypto_1.default.randomBytes(4).readUInt32LE(0), // videoSSRC\n                disabled: false,\n            });\n            promises.push(this.videoProxy.setup().then(function () {\n                prepareRequest.video.proxy_rtp = _this.videoProxy.incomingRTPPort();\n                prepareRequest.video.proxy_rtcp = _this.videoProxy.incomingRTCPPort();\n            }));\n            if (!this.disableAudioProxy) {\n                this.audioProxy = new RTPProxy_1.default({\n                    outgoingAddress: controllerAddress,\n                    outgoingPort: targetAudioPort,\n                    outgoingSSRC: crypto_1.default.randomBytes(4).readUInt32LE(0), // audioSSRC\n                    disabled: this.videoOnly,\n                });\n                promises.push(this.audioProxy.setup().then(function () {\n                    prepareRequest.audio.proxy_rtp = _this.audioProxy.incomingRTPPort();\n                    prepareRequest.audio.proxy_rtcp = _this.audioProxy.incomingRTCPPort();\n                }));\n            }\n        }\n        Promise.all(promises).then(function () {\n            _this.delegate.prepareStream(prepareRequest, (0, once_1.once)(function (error, response) {\n                if (error || !response) {\n                    debug(\"PrepareStream request encountered an error: \".concat(error ? error.message : undefined));\n                    _this.setupEndpointsResponse = tlv.encode(1 /* SetupEndpointsResponseTypes.SESSION_ID */, uuid.write(sessionIdentifier), 2 /* SetupEndpointsResponseTypes.STATUS */, 2 /* SetupEndpointsStatus.ERROR */).toString(\"base64\");\n                    _this.handleSessionClosed();\n                    callback(error);\n                }\n                else {\n                    _this.generateSetupEndpointResponse(connection, sessionIdentifier, prepareRequest, response, callback);\n                }\n            }));\n        });\n    };\n    RTPStreamManagement.prototype.generateSetupEndpointResponse = function (connection, identifier, request, response, callback) {\n        var address;\n        var addressVersion = request.addressVersion;\n        var videoPort;\n        var audioPort;\n        var videoCryptoSuite;\n        var videoSRTPKey;\n        var videoSRTPSalt;\n        var audioCryptoSuite;\n        var audioSRTPKey;\n        var audioSRTPSalt;\n        var videoSSRC;\n        var audioSSRC;\n        if (!this.videoOnly && !response.audio) {\n            throw new Error(\"Audio was enabled but not supplied in PrepareStreamResponse!\");\n        }\n        // Provide default values if audio was not supplied\n        var audio = response.audio || {\n            port: request.audio.port,\n            ssrc: controller_1.CameraController.generateSynchronisationSource(),\n            srtp_key: request.audio.srtp_key,\n            srtp_salt: request.audio.srtp_salt,\n        };\n        if (!this.requireProxy) {\n            var videoInfo = response.video;\n            var audioInfo = audio;\n            if (response.addressOverride) {\n                addressVersion = net_1.default.isIPv4(response.addressOverride) ? \"ipv4\" : \"ipv6\";\n                address = response.addressOverride;\n            }\n            else {\n                address = connection.getLocalAddress(addressVersion);\n            }\n            if (request.addressVersion !== addressVersion) {\n                throw new Error(\"Incoming and outgoing ip address versions must match! Expected \".concat(request.addressVersion, \" but got \").concat(addressVersion));\n            }\n            videoPort = videoInfo.port;\n            audioPort = audioInfo.port;\n            if (request.video.srtpCryptoSuite !== 2 /* SRTPCryptoSuites.NONE */\n                && (videoInfo.srtp_key === undefined || videoInfo.srtp_salt === undefined)) {\n                throw new Error(\"SRTP was selected for the prepared video stream, but no 'srtp_key' or 'srtp_salt' was specified!\");\n            }\n            if (request.audio.srtpCryptoSuite !== 2 /* SRTPCryptoSuites.NONE */\n                && (audioInfo.srtp_key === undefined || audioInfo.srtp_salt === undefined)) {\n                throw new Error(\"SRTP was selected for the prepared audio stream, but no 'srtp_key' or 'srtp_salt' was specified!\");\n            }\n            videoCryptoSuite = request.video.srtpCryptoSuite;\n            videoSRTPKey = videoInfo.srtp_key || Buffer.alloc(0); // key and salt are zero-length for cryptoSuite = NONE\n            videoSRTPSalt = videoInfo.srtp_salt || Buffer.alloc(0);\n            audioCryptoSuite = request.audio.srtpCryptoSuite;\n            audioSRTPKey = audioInfo.srtp_key || Buffer.alloc(0); // key and salt are zero-length for cryptoSuite = NONE\n            audioSRTPSalt = audioInfo.srtp_salt || Buffer.alloc(0);\n            videoSSRC = videoInfo.ssrc;\n            audioSSRC = audioInfo.ssrc;\n        }\n        else {\n            var videoInfo = response.video;\n            address = connection.getLocalAddress(request.addressVersion);\n            videoCryptoSuite = 2 /* SRTPCryptoSuites.NONE */;\n            videoSRTPKey = Buffer.alloc(0);\n            videoSRTPSalt = Buffer.alloc(0);\n            audioCryptoSuite = 2 /* SRTPCryptoSuites.NONE */;\n            audioSRTPKey = Buffer.alloc(0);\n            audioSRTPSalt = Buffer.alloc(0);\n            this.videoProxy.setIncomingPayloadType(videoInfo.proxy_pt);\n            this.videoProxy.setServerAddress(videoInfo.proxy_server_address);\n            this.videoProxy.setServerRTPPort(videoInfo.proxy_server_rtp);\n            this.videoProxy.setServerRTCPPort(videoInfo.proxy_server_rtcp);\n            videoPort = this.videoProxy.outgoingLocalPort();\n            videoSSRC = this.videoProxy.outgoingSSRC;\n            if (!this.disableAudioProxy) {\n                var audioInfo = response.audio;\n                this.audioProxy.setIncomingPayloadType(audioInfo.proxy_pt);\n                this.audioProxy.setServerAddress(audioInfo.proxy_server_address);\n                this.audioProxy.setServerRTPPort(audioInfo.proxy_server_rtp);\n                this.audioProxy.setServerRTCPPort(audioInfo.proxy_server_rtcp);\n                audioPort = this.audioProxy.outgoingLocalPort();\n                audioSSRC = this.audioProxy.outgoingSSRC;\n            }\n            else {\n                var audioInfo = response.audio;\n                audioPort = audioInfo.port;\n                audioSSRC = audioInfo.ssrc;\n            }\n        }\n        this.ipVersion = addressVersion; // we need to save this in order to calculate some default mtu values later\n        var accessoryAddress = tlv.encode(1 /* AddressTypes.ADDRESS_VERSION */, addressVersion === \"ipv4\" ? 0 /* IPAddressVersion.IPV4 */ : 1 /* IPAddressVersion.IPV6 */, 2 /* AddressTypes.ADDRESS */, address, 3 /* AddressTypes.VIDEO_RTP_PORT */, tlv.writeUInt16(videoPort), 4 /* AddressTypes.AUDIO_RTP_PORT */, tlv.writeUInt16(audioPort));\n        var videoSRTPParameters = tlv.encode(1 /* SRTPParametersTypes.SRTP_CRYPTO_SUITE */, videoCryptoSuite, 2 /* SRTPParametersTypes.MASTER_KEY */, videoSRTPKey, 3 /* SRTPParametersTypes.MASTER_SALT */, videoSRTPSalt);\n        var audioSRTPParameters = tlv.encode(1 /* SRTPParametersTypes.SRTP_CRYPTO_SUITE */, audioCryptoSuite, 2 /* SRTPParametersTypes.MASTER_KEY */, audioSRTPKey, 3 /* SRTPParametersTypes.MASTER_SALT */, audioSRTPSalt);\n        this.setupEndpointsResponse = tlv.encode(1 /* SetupEndpointsResponseTypes.SESSION_ID */, uuid.write(identifier), 2 /* SetupEndpointsResponseTypes.STATUS */, 0 /* SetupEndpointsStatus.SUCCESS */, 3 /* SetupEndpointsResponseTypes.ACCESSORY_ADDRESS */, accessoryAddress, 4 /* SetupEndpointsResponseTypes.VIDEO_SRTP_PARAMETERS */, videoSRTPParameters, 5 /* SetupEndpointsResponseTypes.AUDIO_SRTP_PARAMETERS */, audioSRTPParameters, 6 /* SetupEndpointsResponseTypes.VIDEO_SSRC */, tlv.writeUInt32(videoSSRC), 7 /* SetupEndpointsResponseTypes.AUDIO_SSRC */, tlv.writeUInt32(audioSSRC)).toString(\"base64\");\n        callback();\n    };\n    RTPStreamManagement.prototype._updateStreamStatus = function (status) {\n        this.streamStatus = status;\n        this.service.updateCharacteristic(Characteristic_1.Characteristic.StreamingStatus, tlv.encode(1 /* StreamingStatusTypes.STATUS */, this.streamStatus).toString(\"base64\"));\n    };\n    RTPStreamManagement._supportedRTPConfiguration = function (supportedCryptoSuites) {\n        if (supportedCryptoSuites.length === 1 && supportedCryptoSuites[0] === 2 /* SRTPCryptoSuites.NONE */) {\n            debug(\"Client claims it doesn't support SRTP. The stream may stops working with future iOS releases.\");\n        }\n        return tlv.encode(2 /* SupportedRTPConfigurationTypes.SRTP_CRYPTO_SUITE */, supportedCryptoSuites).toString(\"base64\");\n    };\n    RTPStreamManagement._supportedVideoStreamConfiguration = function (videoOptions) {\n        if (!videoOptions.codec) {\n            throw new Error(\"Video codec cannot be undefined\");\n        }\n        if (!videoOptions.resolutions) {\n            throw new Error(\"Video resolutions cannot be undefined\");\n        }\n        var codecParameters = tlv.encode(1 /* VideoCodecParametersTypes.PROFILE_ID */, videoOptions.codec.profiles, 2 /* VideoCodecParametersTypes.LEVEL */, videoOptions.codec.levels, 3 /* VideoCodecParametersTypes.PACKETIZATION_MODE */, 0 /* VideoCodecPacketizationMode.NON_INTERLEAVED */);\n        if (videoOptions.cvoId != null) {\n            codecParameters = Buffer.concat([\n                codecParameters,\n                tlv.encode(4 /* VideoCodecParametersTypes.CVO_ENABLED */, 1 /* VideoCodecCVO.SUPPORTED */, 5 /* VideoCodecParametersTypes.CVO_ID */, videoOptions.cvoId),\n            ]);\n        }\n        var videoStreamConfiguration = tlv.encode(1 /* VideoCodecConfigurationTypes.CODEC_TYPE */, 0 /* VideoCodecType.H264 */, 2 /* VideoCodecConfigurationTypes.CODEC_PARAMETERS */, codecParameters, 3 /* VideoCodecConfigurationTypes.ATTRIBUTES */, videoOptions.resolutions.map(function (resolution) {\n            if (resolution.length !== 3) {\n                throw new Error(\"Unexpected video resolution\");\n            }\n            var width = Buffer.alloc(2);\n            var height = Buffer.alloc(2);\n            var frameRate = Buffer.alloc(1);\n            width.writeUInt16LE(resolution[0], 0);\n            height.writeUInt16LE(resolution[1], 0);\n            frameRate.writeUInt8(resolution[2], 0);\n            return tlv.encode(1 /* VideoAttributesTypes.IMAGE_WIDTH */, width, 2 /* VideoAttributesTypes.IMAGE_HEIGHT */, height, 3 /* VideoAttributesTypes.FRAME_RATE */, frameRate);\n        }));\n        return tlv.encode(1 /* SupportedVideoStreamConfigurationTypes.VIDEO_CODEC_CONFIGURATION */, videoStreamConfiguration).toString(\"base64\");\n    };\n    RTPStreamManagement.prototype.checkForLegacyAudioCodecRepresentation = function (codecs) {\n        var codecMap = {};\n        codecs.slice().forEach(function (codec) {\n            var previous = codecMap[codec.type];\n            if (previous) {\n                if (typeof previous.samplerate === \"number\") {\n                    previous.samplerate = [previous.samplerate];\n                }\n                previous.samplerate = previous.samplerate.concat(codec.samplerate);\n                var index = codecs.indexOf(codec);\n                if (index >= 0) {\n                    codecs.splice(index, 1);\n                }\n            }\n            else {\n                codecMap[codec.type] = codec;\n            }\n        });\n    };\n    RTPStreamManagement.prototype._supportedAudioStreamConfiguration = function (audioOptions) {\n        // Only AAC-ELD and OPUS are accepted by iOS currently, and we need to give it something it will accept\n        // for it to start the video stream.\n        var comfortNoise = audioOptions && !!audioOptions.comfort_noise;\n        var supportedCodecs = (audioOptions && audioOptions.codecs) || [];\n        this.checkForLegacyAudioCodecRepresentation(supportedCodecs);\n        if (supportedCodecs.length === 0) { // Fake a Codec if we haven't got anything\n            debug(\"Client doesn't support any audio codec that HomeKit supports.\");\n            this.videoOnly = true;\n            supportedCodecs.push({\n                type: \"OPUS\" /* AudioStreamingCodecType.OPUS */, // Opus @16K required by Apple Watch AFAIK\n                samplerate: [16 /* AudioStreamingSamplerate.KHZ_16 */, 24 /* AudioStreamingSamplerate.KHZ_24 */], // 16 and 24 must be supported\n            });\n        }\n        var codecConfigurations = supportedCodecs.map(function (codec) {\n            var type;\n            switch (codec.type) {\n                case \"OPUS\" /* AudioStreamingCodecType.OPUS */:\n                    type = 3 /* AudioCodecTypes.OPUS */;\n                    break;\n                case \"AAC-eld\" /* AudioStreamingCodecType.AAC_ELD */:\n                    type = 2 /* AudioCodecTypes.AAC_ELD */;\n                    break;\n                case \"PCMA\" /* AudioStreamingCodecType.PCMA */:\n                    type = 1 /* AudioCodecTypes.PCMA */;\n                    break;\n                case \"PCMU\" /* AudioStreamingCodecType.PCMU */:\n                    type = 0 /* AudioCodecTypes.PCMU */;\n                    break;\n                case \"mSBC\" /* AudioStreamingCodecType.MSBC */:\n                    type = 4 /* AudioCodecTypes.MSBC */;\n                    break;\n                case \"AMR\" /* AudioStreamingCodecType.AMR */:\n                    type = 5 /* AudioCodecTypes.AMR */;\n                    break;\n                case \"AMR-WB\" /* AudioStreamingCodecType.AMR_WB */:\n                    type = 6 /* AudioCodecTypes.AMR_WB */;\n                    break;\n                default:\n                    throw new Error(\"Unsupported codec: \" + codec.type);\n            }\n            var providedSamplerates = (typeof codec.samplerate === \"number\" ? [codec.samplerate] : codec.samplerate).map(function (rate) {\n                var samplerate;\n                switch (rate) {\n                    case 8 /* AudioStreamingSamplerate.KHZ_8 */:\n                        samplerate = 0 /* AudioSamplerate.KHZ_8 */;\n                        break;\n                    case 16 /* AudioStreamingSamplerate.KHZ_16 */:\n                        samplerate = 1 /* AudioSamplerate.KHZ_16 */;\n                        break;\n                    case 24 /* AudioStreamingSamplerate.KHZ_24 */:\n                        samplerate = 2 /* AudioSamplerate.KHZ_24 */;\n                        break;\n                    default:\n                        console.log(\"Unsupported sample rate: \", codec.samplerate);\n                        samplerate = -1;\n                }\n                return samplerate;\n            }).filter(function (rate) { return rate !== -1; });\n            if (providedSamplerates.length === 0) {\n                throw new Error(\"Audio samplerate cannot be empty!\");\n            }\n            var audioParameters = tlv.encode(1 /* AudioCodecParametersTypes.CHANNEL */, Math.max(1, codec.audioChannels || 1), 2 /* AudioCodecParametersTypes.BIT_RATE */, codec.bitrate || 0 /* AudioBitrate.VARIABLE */, 3 /* AudioCodecParametersTypes.SAMPLE_RATE */, providedSamplerates);\n            return tlv.encode(1 /* AudioCodecConfigurationTypes.CODEC_TYPE */, type, 2 /* AudioCodecConfigurationTypes.CODEC_PARAMETERS */, audioParameters);\n        });\n        return tlv.encode(1 /* SupportedAudioStreamConfigurationTypes.AUDIO_CODEC_CONFIGURATION */, codecConfigurations, 2 /* SupportedAudioStreamConfigurationTypes.COMFORT_NOISE_SUPPORT */, comfortNoise ? 1 : 0).toString(\"base64\");\n    };\n    RTPStreamManagement.prototype.resetSetupEndpointsResponse = function () {\n        this.setupEndpointsResponse = tlv.encode(2 /* SetupEndpointsResponseTypes.STATUS */, 2 /* SetupEndpointsStatus.ERROR */).toString(\"base64\");\n        this.service.updateCharacteristic(Characteristic_1.Characteristic.SetupEndpoints, this.setupEndpointsResponse);\n    };\n    RTPStreamManagement.prototype.resetSelectedStreamConfiguration = function () {\n        this.selectedConfiguration = tlv.encode(1 /* SelectedRTPStreamConfigurationTypes.SESSION_CONTROL */, tlv.encode(2 /* SessionControlTypes.COMMAND */, SessionControlCommand.SUSPEND_SESSION)).toString(\"base64\");\n        this.service.updateCharacteristic(Characteristic_1.Characteristic.SelectedRTPStreamConfiguration, this.selectedConfiguration);\n    };\n    /**\n     * @private\n     */\n    RTPStreamManagement.prototype.serialize = function () {\n        var characteristicValue = this.service.getCharacteristic(Characteristic_1.Characteristic.Active).value;\n        if (characteristicValue === true) {\n            return undefined;\n        }\n        return {\n            id: this.id,\n            active: !!characteristicValue,\n        };\n    };\n    /**\n     * @private\n     */\n    RTPStreamManagement.prototype.deserialize = function (serialized) {\n        (0, assert_1.default)(serialized.id === this.id, \"Tried to initialize RTPStreamManagement \".concat(this.id, \" with data from management with id \").concat(serialized.id, \"!\"));\n        this.service.updateCharacteristic(Characteristic_1.Characteristic.Active, serialized.active);\n    };\n    /**\n     * @private\n     */\n    RTPStreamManagement.prototype.setupStateChangeDelegate = function (delegate) {\n        this.stateChangeDelegate = delegate;\n    };\n    /**\n     * @deprecated Please use the SRTPCryptoSuites const enum above.\n     */\n    // @ts-expect-error: forceConsistentCasingInFileNames compiler option\n    RTPStreamManagement.SRTPCryptoSuites = SRTPCryptoSuites;\n    /**\n     * @deprecated Please use the H264Profile const enum above.\n     */\n    // @ts-expect-error: forceConsistentCasingInFileNames compiler option\n    RTPStreamManagement.VideoCodecParamProfileIDTypes = H264Profile;\n    /**\n     * @deprecated won't be updated anymore. Please use the H264Level const enum above.\n     */\n    RTPStreamManagement.VideoCodecParamLevelTypes = Object.freeze({ TYPE3_1: 0, TYPE3_2: 1, TYPE4_0: 2 });\n    return RTPStreamManagement;\n}());\nexports.RTPStreamManagement = RTPStreamManagement;\n/**\n * @group Camera\n * @deprecated - only there for backwards compatibility, please use {@link RTPStreamManagement} directly\n */\nvar StreamController = /** @class */ (function (_super) {\n    tslib_1.__extends(StreamController, _super);\n    // noinspection JSDeprecatedSymbols\n    function StreamController(id, options, delegate, service) {\n        var _this = _super.call(this, id, options, new Camera_1.LegacyCameraSourceAdapter(delegate), service) || this;\n        _this.options = options;\n        return _this;\n    }\n    return StreamController;\n}(RTPStreamManagement));\nexports.StreamController = StreamController;\n//# sourceMappingURL=RTPStreamManagement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RecordingManagement = exports.PacketDataType = exports.AudioRecordingSamplerate = exports.AudioRecordingCodecType = exports.MediaContainerType = exports.EventTriggerOption = void 0;\nvar tslib_1 = require(\"tslib\");\nvar crypto_1 = tslib_1.__importDefault(require(\"crypto\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar events_1 = require(\"events\");\nvar Characteristic_1 = require(\"../Characteristic\");\nvar datastream_1 = require(\"../datastream\");\nvar Service_1 = require(\"../Service\");\nvar hapStatusError_1 = require(\"../util/hapStatusError\");\nvar tlv = tslib_1.__importStar(require(\"../util/tlv\"));\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:Camera:RecordingManagement\");\n/**\n * Describes the Event trigger.\n *\n * @group Camera\n */\nvar EventTriggerOption;\n(function (EventTriggerOption) {\n    /**\n     * The Motion trigger. If enabled motion should trigger the start of a recording.\n     */\n    EventTriggerOption[EventTriggerOption[\"MOTION\"] = 1] = \"MOTION\";\n    /**\n     * The Doorbell trigger. If enabled a doorbell button press should trigger the start of a recording.\n     *\n     * Note: While the doorbell is defined by the HomeKit specification and HAP-NodeJS supports (and the\n     * {@link RecordingManagement} advertises support for it), HomeKit HomeHubs will (as of now, iOS 15-16)\n     * never enable Doorbell triggers. Seemingly this is currently unsupported by Apple.\n     * See https://github.com/homebridge/HAP-NodeJS/issues/976#issuecomment-1280301989.\n     */\n    EventTriggerOption[EventTriggerOption[\"DOORBELL\"] = 2] = \"DOORBELL\";\n})(EventTriggerOption || (exports.EventTriggerOption = EventTriggerOption = {}));\n/**\n * @group Camera\n */\nvar MediaContainerType;\n(function (MediaContainerType) {\n    MediaContainerType[MediaContainerType[\"FRAGMENTED_MP4\"] = 0] = \"FRAGMENTED_MP4\";\n})(MediaContainerType || (exports.MediaContainerType = MediaContainerType = {}));\nvar VideoCodecConfigurationTypes;\n(function (VideoCodecConfigurationTypes) {\n    VideoCodecConfigurationTypes[VideoCodecConfigurationTypes[\"CODEC_TYPE\"] = 1] = \"CODEC_TYPE\";\n    VideoCodecConfigurationTypes[VideoCodecConfigurationTypes[\"CODEC_PARAMETERS\"] = 2] = \"CODEC_PARAMETERS\";\n    VideoCodecConfigurationTypes[VideoCodecConfigurationTypes[\"ATTRIBUTES\"] = 3] = \"ATTRIBUTES\";\n})(VideoCodecConfigurationTypes || (VideoCodecConfigurationTypes = {}));\nvar VideoCodecParametersTypes;\n(function (VideoCodecParametersTypes) {\n    VideoCodecParametersTypes[VideoCodecParametersTypes[\"PROFILE_ID\"] = 1] = \"PROFILE_ID\";\n    VideoCodecParametersTypes[VideoCodecParametersTypes[\"LEVEL\"] = 2] = \"LEVEL\";\n    VideoCodecParametersTypes[VideoCodecParametersTypes[\"BITRATE\"] = 3] = \"BITRATE\";\n    VideoCodecParametersTypes[VideoCodecParametersTypes[\"IFRAME_INTERVAL\"] = 4] = \"IFRAME_INTERVAL\";\n})(VideoCodecParametersTypes || (VideoCodecParametersTypes = {}));\nvar VideoAttributesTypes;\n(function (VideoAttributesTypes) {\n    VideoAttributesTypes[VideoAttributesTypes[\"IMAGE_WIDTH\"] = 1] = \"IMAGE_WIDTH\";\n    VideoAttributesTypes[VideoAttributesTypes[\"IMAGE_HEIGHT\"] = 2] = \"IMAGE_HEIGHT\";\n    VideoAttributesTypes[VideoAttributesTypes[\"FRAME_RATE\"] = 3] = \"FRAME_RATE\";\n})(VideoAttributesTypes || (VideoAttributesTypes = {}));\nvar SelectedCameraRecordingConfigurationTypes;\n(function (SelectedCameraRecordingConfigurationTypes) {\n    SelectedCameraRecordingConfigurationTypes[SelectedCameraRecordingConfigurationTypes[\"SELECTED_RECORDING_CONFIGURATION\"] = 1] = \"SELECTED_RECORDING_CONFIGURATION\";\n    SelectedCameraRecordingConfigurationTypes[SelectedCameraRecordingConfigurationTypes[\"SELECTED_VIDEO_CONFIGURATION\"] = 2] = \"SELECTED_VIDEO_CONFIGURATION\";\n    SelectedCameraRecordingConfigurationTypes[SelectedCameraRecordingConfigurationTypes[\"SELECTED_AUDIO_CONFIGURATION\"] = 3] = \"SELECTED_AUDIO_CONFIGURATION\";\n})(SelectedCameraRecordingConfigurationTypes || (SelectedCameraRecordingConfigurationTypes = {}));\n/**\n * @group Camera\n */\nvar AudioRecordingCodecType;\n(function (AudioRecordingCodecType) {\n    AudioRecordingCodecType[AudioRecordingCodecType[\"AAC_LC\"] = 0] = \"AAC_LC\";\n    AudioRecordingCodecType[AudioRecordingCodecType[\"AAC_ELD\"] = 1] = \"AAC_ELD\";\n})(AudioRecordingCodecType || (exports.AudioRecordingCodecType = AudioRecordingCodecType = {}));\n/**\n * @group Camera\n */\nvar AudioRecordingSamplerate;\n(function (AudioRecordingSamplerate) {\n    AudioRecordingSamplerate[AudioRecordingSamplerate[\"KHZ_8\"] = 0] = \"KHZ_8\";\n    AudioRecordingSamplerate[AudioRecordingSamplerate[\"KHZ_16\"] = 1] = \"KHZ_16\";\n    AudioRecordingSamplerate[AudioRecordingSamplerate[\"KHZ_24\"] = 2] = \"KHZ_24\";\n    AudioRecordingSamplerate[AudioRecordingSamplerate[\"KHZ_32\"] = 3] = \"KHZ_32\";\n    AudioRecordingSamplerate[AudioRecordingSamplerate[\"KHZ_44_1\"] = 4] = \"KHZ_44_1\";\n    AudioRecordingSamplerate[AudioRecordingSamplerate[\"KHZ_48\"] = 5] = \"KHZ_48\";\n})(AudioRecordingSamplerate || (exports.AudioRecordingSamplerate = AudioRecordingSamplerate = {}));\nvar SupportedVideoRecordingConfigurationTypes;\n(function (SupportedVideoRecordingConfigurationTypes) {\n    SupportedVideoRecordingConfigurationTypes[SupportedVideoRecordingConfigurationTypes[\"VIDEO_CODEC_CONFIGURATION\"] = 1] = \"VIDEO_CODEC_CONFIGURATION\";\n})(SupportedVideoRecordingConfigurationTypes || (SupportedVideoRecordingConfigurationTypes = {}));\nvar SupportedCameraRecordingConfigurationTypes;\n(function (SupportedCameraRecordingConfigurationTypes) {\n    SupportedCameraRecordingConfigurationTypes[SupportedCameraRecordingConfigurationTypes[\"PREBUFFER_LENGTH\"] = 1] = \"PREBUFFER_LENGTH\";\n    SupportedCameraRecordingConfigurationTypes[SupportedCameraRecordingConfigurationTypes[\"EVENT_TRIGGER_OPTIONS\"] = 2] = \"EVENT_TRIGGER_OPTIONS\";\n    SupportedCameraRecordingConfigurationTypes[SupportedCameraRecordingConfigurationTypes[\"MEDIA_CONTAINER_CONFIGURATIONS\"] = 3] = \"MEDIA_CONTAINER_CONFIGURATIONS\";\n})(SupportedCameraRecordingConfigurationTypes || (SupportedCameraRecordingConfigurationTypes = {}));\nvar MediaContainerConfigurationTypes;\n(function (MediaContainerConfigurationTypes) {\n    MediaContainerConfigurationTypes[MediaContainerConfigurationTypes[\"MEDIA_CONTAINER_TYPE\"] = 1] = \"MEDIA_CONTAINER_TYPE\";\n    MediaContainerConfigurationTypes[MediaContainerConfigurationTypes[\"MEDIA_CONTAINER_PARAMETERS\"] = 2] = \"MEDIA_CONTAINER_PARAMETERS\";\n})(MediaContainerConfigurationTypes || (MediaContainerConfigurationTypes = {}));\nvar MediaContainerParameterTypes;\n(function (MediaContainerParameterTypes) {\n    MediaContainerParameterTypes[MediaContainerParameterTypes[\"FRAGMENT_LENGTH\"] = 1] = \"FRAGMENT_LENGTH\";\n})(MediaContainerParameterTypes || (MediaContainerParameterTypes = {}));\nvar AudioCodecParametersTypes;\n(function (AudioCodecParametersTypes) {\n    AudioCodecParametersTypes[AudioCodecParametersTypes[\"CHANNEL\"] = 1] = \"CHANNEL\";\n    AudioCodecParametersTypes[AudioCodecParametersTypes[\"BIT_RATE\"] = 2] = \"BIT_RATE\";\n    AudioCodecParametersTypes[AudioCodecParametersTypes[\"SAMPLE_RATE\"] = 3] = \"SAMPLE_RATE\";\n    AudioCodecParametersTypes[AudioCodecParametersTypes[\"MAX_AUDIO_BITRATE\"] = 4] = \"MAX_AUDIO_BITRATE\"; // only present in selected audio codec parameters tlv\n})(AudioCodecParametersTypes || (AudioCodecParametersTypes = {}));\nvar AudioCodecConfigurationTypes;\n(function (AudioCodecConfigurationTypes) {\n    AudioCodecConfigurationTypes[AudioCodecConfigurationTypes[\"CODEC_TYPE\"] = 1] = \"CODEC_TYPE\";\n    AudioCodecConfigurationTypes[AudioCodecConfigurationTypes[\"CODEC_PARAMETERS\"] = 2] = \"CODEC_PARAMETERS\";\n})(AudioCodecConfigurationTypes || (AudioCodecConfigurationTypes = {}));\nvar SupportedAudioRecordingConfigurationTypes;\n(function (SupportedAudioRecordingConfigurationTypes) {\n    SupportedAudioRecordingConfigurationTypes[SupportedAudioRecordingConfigurationTypes[\"AUDIO_CODEC_CONFIGURATION\"] = 1] = \"AUDIO_CODEC_CONFIGURATION\";\n})(SupportedAudioRecordingConfigurationTypes || (SupportedAudioRecordingConfigurationTypes = {}));\n/**\n * @group Camera\n */\nvar PacketDataType;\n(function (PacketDataType) {\n    /**\n     * mp4 moov box\n     */\n    PacketDataType[\"MEDIA_INITIALIZATION\"] = \"mediaInitialization\";\n    /**\n     * mp4 moof + mdat boxes\n     */\n    PacketDataType[\"MEDIA_FRAGMENT\"] = \"mediaFragment\";\n})(PacketDataType || (exports.PacketDataType = PacketDataType = {}));\n/**\n * @group Camera\n */\nvar RecordingManagement = /** @class */ (function () {\n    function RecordingManagement(options, delegate, eventTriggerOptions, services) {\n        var e_1, _a;\n        /**\n         * Array of sensor services (e.g. {@link Service.MotionSensor} or {@link Service.OccupancySensor}).\n         * Any service in this array owns a {@link Characteristic.StatusActive} characteristic.\n         * The value of the {@link Characteristic.HomeKitCameraActive} is mirrored towards the {@link Characteristic.StatusActive} characteristic.\n         * The array is initialized my the caller shortly after calling the constructor.\n         */\n        this.sensorServices = [];\n        /**\n         * Defines if recording is enabled for this recording management.\n         */\n        this.recordingActive = false;\n        this.options = options;\n        this.delegate = delegate;\n        var recordingServices = services || this.constructService();\n        this.recordingManagementService = recordingServices.recordingManagement;\n        this.operatingModeService = recordingServices.operatingMode;\n        this.dataStreamManagement = recordingServices.dataStreamManagement;\n        this.eventTriggerOptions = 0;\n        try {\n            for (var eventTriggerOptions_1 = tslib_1.__values(eventTriggerOptions), eventTriggerOptions_1_1 = eventTriggerOptions_1.next(); !eventTriggerOptions_1_1.done; eventTriggerOptions_1_1 = eventTriggerOptions_1.next()) {\n                var option = eventTriggerOptions_1_1.value;\n                this.eventTriggerOptions |= option; // OR\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (eventTriggerOptions_1_1 && !eventTriggerOptions_1_1.done && (_a = eventTriggerOptions_1.return)) _a.call(eventTriggerOptions_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        this.supportedCameraRecordingConfiguration = this._supportedCameraRecordingConfiguration(options);\n        this.supportedVideoRecordingConfiguration = this._supportedVideoRecordingConfiguration(options.video);\n        this.supportedAudioRecordingConfiguration = this._supportedAudioStreamConfiguration(options.audio);\n        this.setupServiceHandlers();\n    }\n    RecordingManagement.prototype.constructService = function () {\n        var recordingManagement = new Service_1.Service.CameraRecordingManagement(\"\", \"\");\n        recordingManagement.setCharacteristic(Characteristic_1.Characteristic.Active, false);\n        recordingManagement.setCharacteristic(Characteristic_1.Characteristic.RecordingAudioActive, false);\n        var operatingMode = new Service_1.Service.CameraOperatingMode(\"\", \"\");\n        operatingMode.setCharacteristic(Characteristic_1.Characteristic.EventSnapshotsActive, true);\n        operatingMode.setCharacteristic(Characteristic_1.Characteristic.HomeKitCameraActive, true);\n        operatingMode.setCharacteristic(Characteristic_1.Characteristic.PeriodicSnapshotsActive, true);\n        var dataStreamManagement = new datastream_1.DataStreamManagement();\n        recordingManagement.addLinkedService(dataStreamManagement.getService());\n        return {\n            recordingManagement: recordingManagement,\n            operatingMode: operatingMode,\n            dataStreamManagement: dataStreamManagement,\n        };\n    };\n    RecordingManagement.prototype.setupServiceHandlers = function () {\n        var _this = this;\n        // update the current configuration values to the current state.\n        this.recordingManagementService.setCharacteristic(Characteristic_1.Characteristic.SupportedCameraRecordingConfiguration, this.supportedCameraRecordingConfiguration);\n        this.recordingManagementService.setCharacteristic(Characteristic_1.Characteristic.SupportedVideoRecordingConfiguration, this.supportedVideoRecordingConfiguration);\n        this.recordingManagementService.setCharacteristic(Characteristic_1.Characteristic.SupportedAudioRecordingConfiguration, this.supportedAudioRecordingConfiguration);\n        this.recordingManagementService.getCharacteristic(Characteristic_1.Characteristic.SelectedCameraRecordingConfiguration)\n            .onGet(this.handleSelectedCameraRecordingConfigurationRead.bind(this))\n            .onSet(this.handleSelectedCameraRecordingConfigurationWrite.bind(this))\n            .setProps({ adminOnlyAccess: [1 /* Access.WRITE */] });\n        this.recordingManagementService.getCharacteristic(Characteristic_1.Characteristic.Active)\n            .onSet(function (value) {\n            if (!!value === _this.recordingActive) {\n                return; // skip delegate call if state didn't change!\n            }\n            _this.recordingActive = !!value;\n            _this.delegate.updateRecordingActive(_this.recordingActive);\n        })\n            .on(\"change\" /* CharacteristicEventTypes.CHANGE */, function () { var _a; return (_a = _this.stateChangeDelegate) === null || _a === void 0 ? void 0 : _a.call(_this); })\n            .setProps({ adminOnlyAccess: [1 /* Access.WRITE */] });\n        this.recordingManagementService.getCharacteristic(Characteristic_1.Characteristic.RecordingAudioActive)\n            .on(\"change\" /* CharacteristicEventTypes.CHANGE */, function () { var _a; return (_a = _this.stateChangeDelegate) === null || _a === void 0 ? void 0 : _a.call(_this); });\n        this.operatingModeService.getCharacteristic(Characteristic_1.Characteristic.HomeKitCameraActive)\n            .on(\"change\" /* CharacteristicEventTypes.CHANGE */, function (change) {\n            var e_2, _a;\n            var _b;\n            try {\n                for (var _c = tslib_1.__values(_this.sensorServices), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var service = _d.value;\n                    service.setCharacteristic(Characteristic_1.Characteristic.StatusActive, !!change.newValue);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            if (!change.newValue && _this.recordingStream) {\n                _this.recordingStream.close(1 /* HDSProtocolSpecificErrorReason.NOT_ALLOWED */);\n            }\n            (_b = _this.stateChangeDelegate) === null || _b === void 0 ? void 0 : _b.call(_this);\n        })\n            .setProps({ adminOnlyAccess: [1 /* Access.WRITE */] });\n        this.operatingModeService.getCharacteristic(Characteristic_1.Characteristic.EventSnapshotsActive)\n            .on(\"change\" /* CharacteristicEventTypes.CHANGE */, function () { var _a; return (_a = _this.stateChangeDelegate) === null || _a === void 0 ? void 0 : _a.call(_this); })\n            .setProps({ adminOnlyAccess: [1 /* Access.WRITE */] });\n        this.operatingModeService.getCharacteristic(Characteristic_1.Characteristic.PeriodicSnapshotsActive)\n            .on(\"change\" /* CharacteristicEventTypes.CHANGE */, function () { var _a; return (_a = _this.stateChangeDelegate) === null || _a === void 0 ? void 0 : _a.call(_this); })\n            .setProps({ adminOnlyAccess: [1 /* Access.WRITE */] });\n        this.dataStreamManagement\n            .onRequestMessage(\"dataSend\" /* Protocols.DATA_SEND */, \"open\" /* Topics.OPEN */, this.handleDataSendOpen.bind(this));\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    RecordingManagement.prototype.handleDataSendOpen = function (connection, id, message) {\n        var _this = this;\n        // for message fields see https://github.com/Supereg/secure-video-specification#41-start\n        var streamId = message.streamId;\n        var type = message.type;\n        var target = message.target;\n        var reason = message.reason;\n        if (target !== \"controller\" || type !== \"ipcamera.recording\") {\n            debug(\"[HDS %s] Received data send with unexpected target: %s or type: %d. Rejecting...\", connection.remoteAddress, target, type);\n            connection.sendResponse(\"dataSend\" /* Protocols.DATA_SEND */, \"open\" /* Topics.OPEN */, id, datastream_1.HDSStatus.PROTOCOL_SPECIFIC_ERROR, {\n                status: 5 /* HDSProtocolSpecificErrorReason.UNEXPECTED_FAILURE */,\n            });\n            return;\n        }\n        if (!this.recordingActive) {\n            connection.sendResponse(\"dataSend\" /* Protocols.DATA_SEND */, \"open\" /* Topics.OPEN */, id, datastream_1.HDSStatus.PROTOCOL_SPECIFIC_ERROR, {\n                status: 1 /* HDSProtocolSpecificErrorReason.NOT_ALLOWED */,\n            });\n            return;\n        }\n        if (!this.operatingModeService.getCharacteristic(Characteristic_1.Characteristic.HomeKitCameraActive).value) {\n            connection.sendResponse(\"dataSend\" /* Protocols.DATA_SEND */, \"open\" /* Topics.OPEN */, id, datastream_1.HDSStatus.PROTOCOL_SPECIFIC_ERROR, {\n                status: 1 /* HDSProtocolSpecificErrorReason.NOT_ALLOWED */,\n            });\n            return;\n        }\n        if (this.recordingStream) {\n            debug(\"[HDS %s] Rejecting DATA_SEND OPEN as another stream (%s) is already recording with streamId %d!\", connection.remoteAddress, this.recordingStream.connection.remoteAddress, this.recordingStream.streamId);\n            // there is already a recording stream running.\n            connection.sendResponse(\"dataSend\" /* Protocols.DATA_SEND */, \"open\" /* Topics.OPEN */, id, datastream_1.HDSStatus.PROTOCOL_SPECIFIC_ERROR, {\n                status: 2 /* HDSProtocolSpecificErrorReason.BUSY */,\n            });\n            return;\n        }\n        if (!this.selectedConfiguration) {\n            connection.sendResponse(\"dataSend\" /* Protocols.DATA_SEND */, \"open\" /* Topics.OPEN */, id, datastream_1.HDSStatus.PROTOCOL_SPECIFIC_ERROR, {\n                status: 9 /* HDSProtocolSpecificErrorReason.INVALID_CONFIGURATION */,\n            });\n            return;\n        }\n        debug(\"[HDS %s] HDS DATA_SEND Open with reason '%s'.\", connection.remoteAddress, reason);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        this.recordingStream = new CameraRecordingStream(connection, this.delegate, id, streamId);\n        this.recordingStream.on(\"closed\" /* CameraRecordingStreamEvents.CLOSED */, function () {\n            debug(\"[HDS %s] Removing active recoding session from recording management!\");\n            _this.recordingStream = undefined;\n        });\n        this.recordingStream.startStreaming();\n    };\n    RecordingManagement.prototype.handleSelectedCameraRecordingConfigurationRead = function () {\n        if (!this.selectedConfiguration) {\n            throw new hapStatusError_1.HapStatusError(-70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */);\n        }\n        return this.selectedConfiguration.base64;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    RecordingManagement.prototype.handleSelectedCameraRecordingConfigurationWrite = function (value) {\n        var _a, _b;\n        var configuration = this.parseSelectedConfiguration(value);\n        var changed = ((_a = this.selectedConfiguration) === null || _a === void 0 ? void 0 : _a.base64) !== value;\n        this.selectedConfiguration = {\n            parsed: configuration,\n            base64: value,\n        };\n        if (changed) {\n            this.delegate.updateRecordingConfiguration(this.selectedConfiguration.parsed);\n            // notify controller storage about updated values!\n            (_b = this.stateChangeDelegate) === null || _b === void 0 ? void 0 : _b.call(this);\n        }\n    };\n    RecordingManagement.prototype.parseSelectedConfiguration = function (value) {\n        var decoded = tlv.decode(Buffer.from(value, \"base64\"));\n        var recording = tlv.decode(decoded[1 /* SelectedCameraRecordingConfigurationTypes.SELECTED_RECORDING_CONFIGURATION */]);\n        var video = tlv.decode(decoded[2 /* SelectedCameraRecordingConfigurationTypes.SELECTED_VIDEO_CONFIGURATION */]);\n        var audio = tlv.decode(decoded[3 /* SelectedCameraRecordingConfigurationTypes.SELECTED_AUDIO_CONFIGURATION */]);\n        var prebufferLength = recording[1 /* SupportedCameraRecordingConfigurationTypes.PREBUFFER_LENGTH */].readInt32LE(0);\n        var eventTriggerOptions = recording[2 /* SupportedCameraRecordingConfigurationTypes.EVENT_TRIGGER_OPTIONS */].readInt32LE(0);\n        var mediaContainerConfiguration = tlv.decode(recording[3 /* SupportedCameraRecordingConfigurationTypes.MEDIA_CONTAINER_CONFIGURATIONS */]);\n        var containerType = mediaContainerConfiguration[1 /* MediaContainerConfigurationTypes.MEDIA_CONTAINER_TYPE */][0];\n        var mediaContainerParameters = tlv.decode(mediaContainerConfiguration[2 /* MediaContainerConfigurationTypes.MEDIA_CONTAINER_PARAMETERS */]);\n        var fragmentLength = mediaContainerParameters[1 /* MediaContainerParameterTypes.FRAGMENT_LENGTH */].readInt32LE(0);\n        var videoCodec = video[1 /* VideoCodecConfigurationTypes.CODEC_TYPE */][0];\n        var videoParameters = tlv.decode(video[2 /* VideoCodecConfigurationTypes.CODEC_PARAMETERS */]);\n        var videoAttributes = tlv.decode(video[3 /* VideoCodecConfigurationTypes.ATTRIBUTES */]);\n        var profile = videoParameters[1 /* VideoCodecParametersTypes.PROFILE_ID */][0];\n        var level = videoParameters[2 /* VideoCodecParametersTypes.LEVEL */][0];\n        var videoBitrate = videoParameters[3 /* VideoCodecParametersTypes.BITRATE */].readInt32LE(0);\n        var iFrameInterval = videoParameters[4 /* VideoCodecParametersTypes.IFRAME_INTERVAL */].readInt32LE(0);\n        var width = videoAttributes[1 /* VideoAttributesTypes.IMAGE_WIDTH */].readInt16LE(0);\n        var height = videoAttributes[2 /* VideoAttributesTypes.IMAGE_HEIGHT */].readInt16LE(0);\n        var framerate = videoAttributes[3 /* VideoAttributesTypes.FRAME_RATE */][0];\n        var audioCodec = audio[1 /* AudioCodecConfigurationTypes.CODEC_TYPE */][0];\n        var audioParameters = tlv.decode(audio[2 /* AudioCodecConfigurationTypes.CODEC_PARAMETERS */]);\n        var audioChannels = audioParameters[1 /* AudioCodecParametersTypes.CHANNEL */][0];\n        var samplerate = audioParameters[3 /* AudioCodecParametersTypes.SAMPLE_RATE */][0];\n        var audioBitrateMode = audioParameters[2 /* AudioCodecParametersTypes.BIT_RATE */][0];\n        var audioBitrate = audioParameters[4 /* AudioCodecParametersTypes.MAX_AUDIO_BITRATE */].readUInt32LE(0);\n        var typedEventTriggers = [];\n        var bit_index = 0;\n        while (eventTriggerOptions > 0) {\n            if (eventTriggerOptions & 0x01) { // of the lowest bit is set add the next event trigger option\n                typedEventTriggers.push(1 << bit_index);\n            }\n            eventTriggerOptions = eventTriggerOptions >> 1; // shift to right till we reach zero.\n            bit_index += 1; // count our current bit index\n        }\n        return {\n            prebufferLength: prebufferLength,\n            eventTriggerTypes: typedEventTriggers,\n            mediaContainerConfiguration: {\n                type: containerType,\n                fragmentLength: fragmentLength,\n            },\n            videoCodec: {\n                type: videoCodec,\n                parameters: {\n                    profile: profile,\n                    level: level,\n                    bitRate: videoBitrate,\n                    iFrameInterval: iFrameInterval,\n                },\n                resolution: [width, height, framerate],\n            },\n            audioCodec: {\n                audioChannels: audioChannels,\n                type: audioCodec,\n                samplerate: samplerate,\n                bitrateMode: audioBitrateMode,\n                bitrate: audioBitrate,\n            },\n        };\n    };\n    RecordingManagement.prototype._supportedCameraRecordingConfiguration = function (options) {\n        var mediaContainers = Array.isArray(options.mediaContainerConfiguration)\n            ? options.mediaContainerConfiguration\n            : [options.mediaContainerConfiguration];\n        var prebufferLength = Buffer.alloc(4);\n        var eventTriggerOptions = Buffer.alloc(8);\n        prebufferLength.writeInt32LE(options.prebufferLength, 0);\n        eventTriggerOptions.writeInt32LE(this.eventTriggerOptions, 0);\n        return tlv.encode(1 /* SupportedCameraRecordingConfigurationTypes.PREBUFFER_LENGTH */, prebufferLength, 2 /* SupportedCameraRecordingConfigurationTypes.EVENT_TRIGGER_OPTIONS */, eventTriggerOptions, 3 /* SupportedCameraRecordingConfigurationTypes.MEDIA_CONTAINER_CONFIGURATIONS */, mediaContainers.map(function (config) {\n            var fragmentLength = Buffer.alloc(4);\n            fragmentLength.writeInt32LE(config.fragmentLength, 0);\n            return tlv.encode(1 /* MediaContainerConfigurationTypes.MEDIA_CONTAINER_TYPE */, config.type, 2 /* MediaContainerConfigurationTypes.MEDIA_CONTAINER_PARAMETERS */, tlv.encode(1 /* MediaContainerParameterTypes.FRAGMENT_LENGTH */, fragmentLength));\n        })).toString(\"base64\");\n    };\n    RecordingManagement.prototype._supportedVideoRecordingConfiguration = function (videoOptions) {\n        if (!videoOptions.parameters) {\n            throw new Error(\"Video parameters cannot be undefined\");\n        }\n        if (!videoOptions.resolutions) {\n            throw new Error(\"Video resolutions cannot be undefined\");\n        }\n        var codecParameters = tlv.encode(1 /* VideoCodecParametersTypes.PROFILE_ID */, videoOptions.parameters.profiles, 2 /* VideoCodecParametersTypes.LEVEL */, videoOptions.parameters.levels);\n        var videoStreamConfiguration = tlv.encode(1 /* VideoCodecConfigurationTypes.CODEC_TYPE */, videoOptions.type, 2 /* VideoCodecConfigurationTypes.CODEC_PARAMETERS */, codecParameters, 3 /* VideoCodecConfigurationTypes.ATTRIBUTES */, videoOptions.resolutions.map(function (resolution) {\n            if (resolution.length !== 3) {\n                throw new Error(\"Unexpected video resolution\");\n            }\n            var width = Buffer.alloc(2);\n            var height = Buffer.alloc(2);\n            var frameRate = Buffer.alloc(1);\n            width.writeUInt16LE(resolution[0], 0);\n            height.writeUInt16LE(resolution[1], 0);\n            frameRate.writeUInt8(resolution[2], 0);\n            return tlv.encode(1 /* VideoAttributesTypes.IMAGE_WIDTH */, width, 2 /* VideoAttributesTypes.IMAGE_HEIGHT */, height, 3 /* VideoAttributesTypes.FRAME_RATE */, frameRate);\n        }));\n        return tlv.encode(1 /* SupportedVideoRecordingConfigurationTypes.VIDEO_CODEC_CONFIGURATION */, videoStreamConfiguration).toString(\"base64\");\n    };\n    RecordingManagement.prototype._supportedAudioStreamConfiguration = function (audioOptions) {\n        var audioCodecs = Array.isArray(audioOptions.codecs)\n            ? audioOptions.codecs\n            : [audioOptions.codecs];\n        if (audioCodecs.length === 0) {\n            throw Error(\"CameraRecordingOptions.audio: At least one audio codec configuration must be specified!\");\n        }\n        var codecConfigurations = audioCodecs.map(function (codec) {\n            var providedSamplerates = Array.isArray(codec.samplerate)\n                ? codec.samplerate\n                : [codec.samplerate];\n            if (providedSamplerates.length === 0) {\n                throw new Error(\"CameraRecordingOptions.audio.codecs: Audio samplerate cannot be empty!\");\n            }\n            var audioParameters = tlv.encode(1 /* AudioCodecParametersTypes.CHANNEL */, Math.max(1, codec.audioChannels || 1), 2 /* AudioCodecParametersTypes.BIT_RATE */, codec.bitrateMode || 0 /* AudioBitrate.VARIABLE */, 3 /* AudioCodecParametersTypes.SAMPLE_RATE */, providedSamplerates);\n            return tlv.encode(1 /* AudioCodecConfigurationTypes.CODEC_TYPE */, codec.type, 2 /* AudioCodecConfigurationTypes.CODEC_PARAMETERS */, audioParameters);\n        });\n        return tlv.encode(1 /* SupportedAudioRecordingConfigurationTypes.AUDIO_CODEC_CONFIGURATION */, codecConfigurations).toString(\"base64\");\n    };\n    RecordingManagement.prototype.computeConfigurationHash = function (algorithm) {\n        if (algorithm === void 0) { algorithm = \"sha256\"; }\n        var configurationHash = crypto_1.default.createHash(algorithm);\n        configurationHash.update(this.supportedCameraRecordingConfiguration);\n        configurationHash.update(this.supportedVideoRecordingConfiguration);\n        configurationHash.update(this.supportedAudioRecordingConfiguration);\n        return configurationHash.digest().toString(\"hex\");\n    };\n    /**\n     * @private\n     */\n    RecordingManagement.prototype.serialize = function () {\n        var _a;\n        return {\n            configurationHash: {\n                algorithm: \"sha256\",\n                hash: this.computeConfigurationHash(\"sha256\"),\n            },\n            selectedConfiguration: (_a = this.selectedConfiguration) === null || _a === void 0 ? void 0 : _a.base64,\n            recordingActive: this.recordingActive,\n            recordingAudioActive: !!this.recordingManagementService.getCharacteristic(Characteristic_1.Characteristic.RecordingAudioActive).value,\n            eventSnapshotsActive: !!this.operatingModeService.getCharacteristic(Characteristic_1.Characteristic.EventSnapshotsActive).value,\n            homeKitCameraActive: !!this.operatingModeService.getCharacteristic(Characteristic_1.Characteristic.HomeKitCameraActive).value,\n            periodicSnapshotsActive: !!this.operatingModeService.getCharacteristic(Characteristic_1.Characteristic.PeriodicSnapshotsActive).value,\n        };\n    };\n    /**\n     * @private\n     */\n    RecordingManagement.prototype.deserialize = function (serialized) {\n        var e_3, _a;\n        var _b;\n        var changedState = false;\n        // we only restore the `selectedConfiguration` if our supported configuration hasn't changed.\n        var currentConfigurationHash = this.computeConfigurationHash(serialized.configurationHash.algorithm);\n        if (serialized.selectedConfiguration) {\n            if (currentConfigurationHash === serialized.configurationHash.hash) {\n                this.selectedConfiguration = {\n                    base64: serialized.selectedConfiguration,\n                    parsed: this.parseSelectedConfiguration(serialized.selectedConfiguration),\n                };\n            }\n            else {\n                changedState = true;\n            }\n        }\n        this.recordingActive = serialized.recordingActive;\n        this.recordingManagementService.updateCharacteristic(Characteristic_1.Characteristic.Active, serialized.recordingActive);\n        this.recordingManagementService.updateCharacteristic(Characteristic_1.Characteristic.RecordingAudioActive, serialized.recordingAudioActive);\n        this.operatingModeService.updateCharacteristic(Characteristic_1.Characteristic.EventSnapshotsActive, serialized.eventSnapshotsActive);\n        this.operatingModeService.updateCharacteristic(Characteristic_1.Characteristic.PeriodicSnapshotsActive, serialized.periodicSnapshotsActive);\n        this.operatingModeService.updateCharacteristic(Characteristic_1.Characteristic.HomeKitCameraActive, serialized.homeKitCameraActive);\n        try {\n            for (var _c = tslib_1.__values(this.sensorServices), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var service = _d.value;\n                service.setCharacteristic(Characteristic_1.Characteristic.StatusActive, serialized.homeKitCameraActive);\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        try {\n            if (this.selectedConfiguration) {\n                this.delegate.updateRecordingConfiguration(this.selectedConfiguration.parsed);\n            }\n            if (serialized.recordingActive) {\n                this.delegate.updateRecordingActive(serialized.recordingActive);\n            }\n        }\n        catch (error) {\n            console.error(\"Failed to properly initialize CameraRecordingDelegate from persistent storage: \" + error.stack);\n        }\n        if (changedState) {\n            (_b = this.stateChangeDelegate) === null || _b === void 0 ? void 0 : _b.call(this);\n        }\n    };\n    /**\n     * @private\n     */\n    RecordingManagement.prototype.setupStateChangeDelegate = function (delegate) {\n        this.stateChangeDelegate = delegate;\n    };\n    RecordingManagement.prototype.destroy = function () {\n        this.dataStreamManagement.destroy();\n    };\n    RecordingManagement.prototype.handleFactoryReset = function () {\n        var e_4, _a;\n        this.selectedConfiguration = undefined;\n        this.recordingManagementService.updateCharacteristic(Characteristic_1.Characteristic.Active, false);\n        this.recordingManagementService.updateCharacteristic(Characteristic_1.Characteristic.RecordingAudioActive, false);\n        this.operatingModeService.updateCharacteristic(Characteristic_1.Characteristic.EventSnapshotsActive, true);\n        this.operatingModeService.updateCharacteristic(Characteristic_1.Characteristic.PeriodicSnapshotsActive, true);\n        this.operatingModeService.updateCharacteristic(Characteristic_1.Characteristic.HomeKitCameraActive, true);\n        try {\n            for (var _b = tslib_1.__values(this.sensorServices), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var service = _c.value;\n                service.setCharacteristic(Characteristic_1.Characteristic.StatusActive, true);\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        try {\n            // notifying the delegate about the updated state\n            this.delegate.updateRecordingActive(false);\n            this.delegate.updateRecordingConfiguration(undefined);\n        }\n        catch (error) {\n            console.error(\"CameraRecordingDelegate failed to update state after handleFactoryReset: \" + error.stack);\n        }\n    };\n    return RecordingManagement;\n}());\nexports.RecordingManagement = RecordingManagement;\n/**\n * @group Camera\n */\nvar CameraRecordingStreamEvents;\n(function (CameraRecordingStreamEvents) {\n    /**\n     * This event is fired when the recording stream is closed.\n     * Either due to a normal exit (e.g. the HomeKit Controller acknowledging the stream)\n     * or due to an erroneous exit (e.g. HDS connection getting closed).\n     */\n    CameraRecordingStreamEvents[\"CLOSED\"] = \"closed\";\n})(CameraRecordingStreamEvents || (CameraRecordingStreamEvents = {}));\n/**\n * A `CameraRecordingStream` represents an ongoing stream request for a HomeKit Secure Video recording.\n * A single camera can only support one ongoing recording at a time.\n *\n * @group Camera\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar CameraRecordingStream = /** @class */ (function (_super) {\n    tslib_1.__extends(CameraRecordingStream, _super);\n    function CameraRecordingStream(connection, delegate, requestId, streamId) {\n        var _a;\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.eventHandler = (_a = {},\n            _a[\"close\" /* Topics.CLOSE */] = _this.handleDataSendClose.bind(_this),\n            _a[\"ack\" /* Topics.ACK */] = _this.handleDataSendAck.bind(_this),\n            _a);\n        _this.requestHandler = undefined;\n        _this.connection = connection;\n        _this.delegate = delegate;\n        _this.hdsRequestId = requestId;\n        _this.streamId = streamId;\n        _this.connection.on(\"closed\" /* DataStreamConnectionEvent.CLOSED */, _this.closeListener = _this.handleDataStreamConnectionClosed.bind(_this));\n        _this.connection.addProtocolHandler(\"dataSend\" /* Protocols.DATA_SEND */, _this);\n        return _this;\n    }\n    CameraRecordingStream.prototype.startStreaming = function () {\n        // noinspection JSIgnoredPromiseFromCall\n        this._startStreaming();\n    };\n    CameraRecordingStream.prototype._startStreaming = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var maxChunk, initialization, dataSequenceNumber, lastFragmentWasMarkedLast, _a, _b, _c, packet, fragment, offset, dataChunkSequenceNumber, data, event, e_5_1, error_1, closeReason;\n            var _d, e_5, _e, _f;\n            return tslib_1.__generator(this, function (_g) {\n                switch (_g.label) {\n                    case 0:\n                        debug(\"[HDS %s] Sending DATA_SEND OPEN response for streamId %d\", this.connection.remoteAddress, this.streamId);\n                        this.connection.sendResponse(\"dataSend\" /* Protocols.DATA_SEND */, \"open\" /* Topics.OPEN */, this.hdsRequestId, datastream_1.HDSStatus.SUCCESS, {\n                            status: datastream_1.HDSStatus.SUCCESS,\n                        });\n                        maxChunk = 0x40000;\n                        initialization = true;\n                        dataSequenceNumber = 1;\n                        lastFragmentWasMarkedLast = false;\n                        _g.label = 1;\n                    case 1:\n                        _g.trys.push([1, 14, 15, 16]);\n                        this.generator = this.delegate.handleRecordingStreamRequest(this.streamId);\n                        _g.label = 2;\n                    case 2:\n                        _g.trys.push([2, 7, 8, 13]);\n                        _a = true, _b = tslib_1.__asyncValues(this.generator);\n                        _g.label = 3;\n                    case 3: return [4 /*yield*/, _b.next()];\n                    case 4:\n                        if (!(_c = _g.sent(), _d = _c.done, !_d)) return [3 /*break*/, 6];\n                        _f = _c.value;\n                        _a = false;\n                        packet = _f;\n                        if (this.closed) {\n                            console.error(\"[HDS \".concat(this.connection.remoteAddress, \"] Delegate yielded fragment after stream \").concat(this.streamId, \" was already closed!\"));\n                            return [3 /*break*/, 6];\n                        }\n                        if (lastFragmentWasMarkedLast) {\n                            console.error(\"[HDS \".concat(this.connection.remoteAddress, \"] Delegate yielded fragment for stream \").concat(this.streamId, \" after already signaling end of stream!\"));\n                            return [3 /*break*/, 6];\n                        }\n                        fragment = packet.data;\n                        offset = 0;\n                        dataChunkSequenceNumber = 1;\n                        while (offset < fragment.length) {\n                            data = fragment.slice(offset, offset + maxChunk);\n                            offset += data.length;\n                            event = {\n                                streamId: this.streamId,\n                                packets: [{\n                                        data: data,\n                                        metadata: {\n                                            dataType: initialization ? \"mediaInitialization\" /* PacketDataType.MEDIA_INITIALIZATION */ : \"mediaFragment\" /* PacketDataType.MEDIA_FRAGMENT */,\n                                            dataSequenceNumber: dataSequenceNumber,\n                                            dataChunkSequenceNumber: dataChunkSequenceNumber,\n                                            isLastDataChunk: offset >= fragment.length,\n                                            dataTotalSize: dataChunkSequenceNumber === 1 ? fragment.length : undefined,\n                                        },\n                                    }],\n                                endOfStream: offset >= fragment.length ? Boolean(packet.isLast).valueOf() : undefined,\n                            };\n                            debug(\"[HDS %s] Sending DATA_SEND DATA for stream %d with metadata: %o and length %d; EoS: %s\", this.connection.remoteAddress, this.streamId, event.packets[0].metadata, data.length, event.endOfStream);\n                            this.connection.sendEvent(\"dataSend\" /* Protocols.DATA_SEND */, \"data\" /* Topics.DATA */, event);\n                            dataChunkSequenceNumber++;\n                            initialization = false;\n                        }\n                        lastFragmentWasMarkedLast = packet.isLast;\n                        if (packet.isLast) {\n                            return [3 /*break*/, 6];\n                        }\n                        dataSequenceNumber++;\n                        _g.label = 5;\n                    case 5:\n                        _a = true;\n                        return [3 /*break*/, 3];\n                    case 6: return [3 /*break*/, 13];\n                    case 7:\n                        e_5_1 = _g.sent();\n                        e_5 = { error: e_5_1 };\n                        return [3 /*break*/, 13];\n                    case 8:\n                        _g.trys.push([8, , 11, 12]);\n                        if (!(!_a && !_d && (_e = _b.return))) return [3 /*break*/, 10];\n                        return [4 /*yield*/, _e.call(_b)];\n                    case 9:\n                        _g.sent();\n                        _g.label = 10;\n                    case 10: return [3 /*break*/, 12];\n                    case 11:\n                        if (e_5) throw e_5.error;\n                        return [7 /*endfinally*/];\n                    case 12: return [7 /*endfinally*/];\n                    case 13:\n                        if (!lastFragmentWasMarkedLast && !this.closed) {\n                            // Delegate violates the contract. Exited normally on a non-closed stream without properly setting `isLast`.\n                            console.warn(\"[HDS \".concat(this.connection.remoteAddress, \"] Delegate finished streaming for \").concat(this.streamId, \" without setting RecordingPacket.isLast.         Can't notify Controller about endOfStream!\"));\n                        }\n                        return [3 /*break*/, 16];\n                    case 14:\n                        error_1 = _g.sent();\n                        if (this.closed) {\n                            console.warn(\"[HDS \".concat(this.connection.remoteAddress, \"] Encountered unexpected error on already closed recording stream \").concat(this.streamId, \": \").concat(error_1.stack));\n                        }\n                        else {\n                            closeReason = 5 /* HDSProtocolSpecificErrorReason.UNEXPECTED_FAILURE */;\n                            if (error_1 instanceof datastream_1.HDSProtocolError) {\n                                closeReason = error_1.reason;\n                                debug(\"[HDS %s] Delegate signaled to close the recording stream %d.\", this.connection.remoteAddress, this.streamId);\n                            }\n                            else if (error_1 instanceof datastream_1.HDSConnectionError && error_1.type === 2 /* HDSConnectionErrorType.CLOSED_SOCKET */) {\n                                // we are probably on a shutdown or just late. Connection is dead. End the stream!\n                                debug(\"[HDS %s] Exited recording stream due to closed HDS socket: stream id %d.\", this.connection.remoteAddress, this.streamId);\n                                return [2 /*return*/]; // execute finally and then exit (we want to skip the `sendEvent` below)\n                            }\n                            else {\n                                console.error(\"[HDS \".concat(this.connection.remoteAddress, \"] Encountered unexpected error for recording stream \").concat(this.streamId, \": \").concat(error_1.stack));\n                            }\n                            // call close to go through standard close routine!\n                            this.close(closeReason);\n                        }\n                        return [2 /*return*/];\n                    case 15:\n                        this.generator = undefined;\n                        if (this.generatorTimeout) {\n                            clearTimeout(this.generatorTimeout);\n                        }\n                        if (!this.closed) {\n                            // e.g. when returning with `endOfStream` we rely on the HomeHub to send an ACK event to close the recording.\n                            // With this timer we ensure that the HomeHub has the chance to close the stream gracefully but at the same time\n                            // ensure that if something fails the recording stream is freed nonetheless.\n                            this.kickOffCloseTimeout();\n                        }\n                        return [7 /*endfinally*/];\n                    case 16:\n                        if (initialization) { // we never actually sent anything out there!\n                            console.warn(\"[HDS \".concat(this.connection.remoteAddress, \"] Delegate finished recording stream \").concat(this.streamId, \" without sending anything out.       Controller will CANCEL.\"));\n                        }\n                        debug(\"[HDS %s] Finished DATA_SEND transmission for stream %d!\", this.connection.remoteAddress, this.streamId);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    CameraRecordingStream.prototype.handleDataSendAck = function (message) {\n        var _this = this;\n        var streamId = message.streamId;\n        var endOfStream = message.endOfStream;\n        // The HomeKit Controller will send a DATA_SEND ACK if we set the `endOfStream` flag in the last packet\n        // of our DATA_SEND DATA packet.\n        // To my testing the session is then considered complete and the HomeKit controller will close the HDS Connection after 5 seconds.\n        debug(\"[HDS %s] Received DATA_SEND ACK packet for streamId %s. Acknowledged %s.\", this.connection.remoteAddress, streamId, endOfStream);\n        this.handleClosed(function () { var _a, _b; return (_b = (_a = _this.delegate).acknowledgeStream) === null || _b === void 0 ? void 0 : _b.call(_a, _this.streamId); });\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    CameraRecordingStream.prototype.handleDataSendClose = function (message) {\n        var _this = this;\n        // see https://github.com/Supereg/secure-video-specification#43-close\n        var streamId = message.streamId;\n        var reason = message.reason;\n        if (streamId !== this.streamId) {\n            return;\n        }\n        debug(\"[HDS %s] Received DATA_SEND CLOSE for streamId %d with reason %s\", \n        // @ts-expect-error: forceConsistentCasingInFileNames compiler option\n        this.connection.remoteAddress, streamId, datastream_1.HDSProtocolSpecificErrorReason[reason]);\n        this.handleClosed(function () { return _this.delegate.closeRecordingStream(streamId, reason); });\n    };\n    CameraRecordingStream.prototype.handleDataStreamConnectionClosed = function () {\n        var _this = this;\n        debug(\"[HDS %s] The HDS connection of the stream %d closed.\", this.connection.remoteAddress, this.streamId);\n        this.handleClosed(function () { return _this.delegate.closeRecordingStream(_this.streamId, undefined); });\n    };\n    CameraRecordingStream.prototype.handleClosed = function (closure) {\n        var _this = this;\n        this.closed = true;\n        if (this.closingTimeout) {\n            clearTimeout(this.closingTimeout);\n            this.closingTimeout = undefined;\n        }\n        this.connection.removeProtocolHandler(\"dataSend\" /* Protocols.DATA_SEND */, this);\n        this.connection.removeListener(\"closed\" /* DataStreamConnectionEvent.CLOSED */, this.closeListener);\n        if (this.generator) {\n            // when this variable is defined, the generator hasn't returned yet.\n            // we start a timeout to uncover potential programming mistakes where we await forever and can't free resources.\n            this.generatorTimeout = setTimeout(function () {\n                console.error(\"[HDS %s] Recording download stream %d is still awaiting generator although stream was closed 10s ago! \" +\n                    \"This is a programming mistake by the camera implementation which prevents freeing up resources.\", _this.connection.remoteAddress, _this.streamId);\n            }, 10000);\n        }\n        try {\n            closure();\n        }\n        catch (error) {\n            console.error(\"[HDS \".concat(this.connection.remoteAddress, \"] CameraRecordingDelegated failed to handle closing the stream \").concat(this.streamId, \": \").concat(error.stack));\n        }\n        this.emit(\"closed\" /* CameraRecordingStreamEvents.CLOSED */);\n    };\n    /**\n     * This method can be used to close a recording session from the outside.\n     * @param reason - The reason to close the stream with.\n     */\n    CameraRecordingStream.prototype.close = function (reason) {\n        var _this = this;\n        if (this.closed) {\n            return;\n        }\n        debug(\"[HDS %s] Recording stream %d was closed manually with reason %s.\", \n        // @ts-expect-error: forceConsistentCasingInFileNames compiler option\n        this.connection.remoteAddress, this.streamId, reason ? datastream_1.HDSProtocolSpecificErrorReason[reason] : \"CLOSED\");\n        // the `isConsideredClosed` check just ensures that the won't ever throw here and that `handledClosed` is always executed.\n        if (!this.connection.isConsideredClosed()) {\n            this.connection.sendEvent(\"dataSend\" /* Protocols.DATA_SEND */, \"close\" /* Topics.CLOSE */, {\n                streamId: this.streamId,\n                reason: reason,\n            });\n        }\n        this.handleClosed(function () { return _this.delegate.closeRecordingStream(_this.streamId, reason); });\n    };\n    CameraRecordingStream.prototype.kickOffCloseTimeout = function () {\n        var _this = this;\n        if (this.closingTimeout) {\n            clearTimeout(this.closingTimeout);\n        }\n        this.closingTimeout = setTimeout(function () {\n            if (_this.closed) {\n                return;\n            }\n            debug(\"[HDS %s] Recording stream %d took longer than expected to fully close. Force closing now!\", _this.connection.remoteAddress, _this.streamId);\n            _this.close(3 /* HDSProtocolSpecificErrorReason.CANCELLED */);\n        }, 12000);\n    };\n    return CameraRecordingStream;\n}(events_1.EventEmitter));\n//# sourceMappingURL=RecordingManagement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\ntslib_1.__exportStar(require(\"./Camera\"), exports);\ntslib_1.__exportStar(require(\"./RTPProxy\"), exports);\ntslib_1.__exportStar(require(\"./RTPStreamManagement\"), exports);\ntslib_1.__exportStar(require(\"./RecordingManagement\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AdaptiveLightingController = exports.AdaptiveLightingControllerEvents = exports.AdaptiveLightingControllerMode = void 0;\nvar tslib_1 = require(\"tslib\");\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar color_utils_1 = require(\"../util/color-utils\");\nvar hapStatusError_1 = require(\"../util/hapStatusError\");\nvar time_1 = require(\"../util/time\");\nvar uuid = tslib_1.__importStar(require(\"../util/uuid\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar events_1 = require(\"events\");\nvar Characteristic_1 = require(\"../Characteristic\");\nvar tlv = tslib_1.__importStar(require(\"../util/tlv\"));\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:Controller:TransitionControl\");\nvar SupportedCharacteristicValueTransitionConfigurationsTypes;\n(function (SupportedCharacteristicValueTransitionConfigurationsTypes) {\n    SupportedCharacteristicValueTransitionConfigurationsTypes[SupportedCharacteristicValueTransitionConfigurationsTypes[\"SUPPORTED_TRANSITION_CONFIGURATION\"] = 1] = \"SUPPORTED_TRANSITION_CONFIGURATION\";\n})(SupportedCharacteristicValueTransitionConfigurationsTypes || (SupportedCharacteristicValueTransitionConfigurationsTypes = {}));\nvar SupportedValueTransitionConfigurationTypes;\n(function (SupportedValueTransitionConfigurationTypes) {\n    SupportedValueTransitionConfigurationTypes[SupportedValueTransitionConfigurationTypes[\"CHARACTERISTIC_IID\"] = 1] = \"CHARACTERISTIC_IID\";\n    SupportedValueTransitionConfigurationTypes[SupportedValueTransitionConfigurationTypes[\"TRANSITION_TYPE\"] = 2] = \"TRANSITION_TYPE\";\n})(SupportedValueTransitionConfigurationTypes || (SupportedValueTransitionConfigurationTypes = {}));\nvar TransitionType;\n(function (TransitionType) {\n    TransitionType[TransitionType[\"BRIGHTNESS\"] = 1] = \"BRIGHTNESS\";\n    TransitionType[TransitionType[\"COLOR_TEMPERATURE\"] = 2] = \"COLOR_TEMPERATURE\";\n})(TransitionType || (TransitionType = {}));\nvar TransitionControlTypes;\n(function (TransitionControlTypes) {\n    TransitionControlTypes[TransitionControlTypes[\"READ_CURRENT_VALUE_TRANSITION_CONFIGURATION\"] = 1] = \"READ_CURRENT_VALUE_TRANSITION_CONFIGURATION\";\n    TransitionControlTypes[TransitionControlTypes[\"UPDATE_VALUE_TRANSITION_CONFIGURATION\"] = 2] = \"UPDATE_VALUE_TRANSITION_CONFIGURATION\";\n})(TransitionControlTypes || (TransitionControlTypes = {}));\nvar ReadValueTransitionConfiguration;\n(function (ReadValueTransitionConfiguration) {\n    ReadValueTransitionConfiguration[ReadValueTransitionConfiguration[\"CHARACTERISTIC_IID\"] = 1] = \"CHARACTERISTIC_IID\";\n})(ReadValueTransitionConfiguration || (ReadValueTransitionConfiguration = {}));\nvar UpdateValueTransitionConfigurationsTypes;\n(function (UpdateValueTransitionConfigurationsTypes) {\n    UpdateValueTransitionConfigurationsTypes[UpdateValueTransitionConfigurationsTypes[\"VALUE_TRANSITION_CONFIGURATION\"] = 1] = \"VALUE_TRANSITION_CONFIGURATION\";\n})(UpdateValueTransitionConfigurationsTypes || (UpdateValueTransitionConfigurationsTypes = {}));\nvar ValueTransitionConfigurationTypes;\n(function (ValueTransitionConfigurationTypes) {\n    // noinspection JSUnusedGlobalSymbols\n    ValueTransitionConfigurationTypes[ValueTransitionConfigurationTypes[\"CHARACTERISTIC_IID\"] = 1] = \"CHARACTERISTIC_IID\";\n    ValueTransitionConfigurationTypes[ValueTransitionConfigurationTypes[\"TRANSITION_PARAMETERS\"] = 2] = \"TRANSITION_PARAMETERS\";\n    ValueTransitionConfigurationTypes[ValueTransitionConfigurationTypes[\"UNKNOWN_3\"] = 3] = \"UNKNOWN_3\";\n    ValueTransitionConfigurationTypes[ValueTransitionConfigurationTypes[\"UNKNOWN_4\"] = 4] = \"UNKNOWN_4\";\n    ValueTransitionConfigurationTypes[ValueTransitionConfigurationTypes[\"TRANSITION_CURVE_CONFIGURATION\"] = 5] = \"TRANSITION_CURVE_CONFIGURATION\";\n    ValueTransitionConfigurationTypes[ValueTransitionConfigurationTypes[\"UPDATE_INTERVAL\"] = 6] = \"UPDATE_INTERVAL\";\n    ValueTransitionConfigurationTypes[ValueTransitionConfigurationTypes[\"UNKNOWN_7\"] = 7] = \"UNKNOWN_7\";\n    ValueTransitionConfigurationTypes[ValueTransitionConfigurationTypes[\"NOTIFY_INTERVAL_THRESHOLD\"] = 8] = \"NOTIFY_INTERVAL_THRESHOLD\";\n})(ValueTransitionConfigurationTypes || (ValueTransitionConfigurationTypes = {}));\nvar ValueTransitionParametersTypes;\n(function (ValueTransitionParametersTypes) {\n    ValueTransitionParametersTypes[ValueTransitionParametersTypes[\"TRANSITION_ID\"] = 1] = \"TRANSITION_ID\";\n    ValueTransitionParametersTypes[ValueTransitionParametersTypes[\"START_TIME\"] = 2] = \"START_TIME\";\n    ValueTransitionParametersTypes[ValueTransitionParametersTypes[\"UNKNOWN_3\"] = 3] = \"UNKNOWN_3\";\n})(ValueTransitionParametersTypes || (ValueTransitionParametersTypes = {}));\nvar TransitionCurveConfigurationTypes;\n(function (TransitionCurveConfigurationTypes) {\n    TransitionCurveConfigurationTypes[TransitionCurveConfigurationTypes[\"TRANSITION_ENTRY\"] = 1] = \"TRANSITION_ENTRY\";\n    TransitionCurveConfigurationTypes[TransitionCurveConfigurationTypes[\"ADJUSTMENT_CHARACTERISTIC_IID\"] = 2] = \"ADJUSTMENT_CHARACTERISTIC_IID\";\n    TransitionCurveConfigurationTypes[TransitionCurveConfigurationTypes[\"ADJUSTMENT_MULTIPLIER_RANGE\"] = 3] = \"ADJUSTMENT_MULTIPLIER_RANGE\";\n})(TransitionCurveConfigurationTypes || (TransitionCurveConfigurationTypes = {}));\nvar TransitionEntryTypes;\n(function (TransitionEntryTypes) {\n    TransitionEntryTypes[TransitionEntryTypes[\"ADJUSTMENT_FACTOR\"] = 1] = \"ADJUSTMENT_FACTOR\";\n    TransitionEntryTypes[TransitionEntryTypes[\"VALUE\"] = 2] = \"VALUE\";\n    TransitionEntryTypes[TransitionEntryTypes[\"TRANSITION_OFFSET\"] = 3] = \"TRANSITION_OFFSET\";\n    TransitionEntryTypes[TransitionEntryTypes[\"DURATION\"] = 4] = \"DURATION\";\n})(TransitionEntryTypes || (TransitionEntryTypes = {}));\nvar TransitionAdjustmentMultiplierRange;\n(function (TransitionAdjustmentMultiplierRange) {\n    TransitionAdjustmentMultiplierRange[TransitionAdjustmentMultiplierRange[\"MINIMUM_ADJUSTMENT_MULTIPLIER\"] = 1] = \"MINIMUM_ADJUSTMENT_MULTIPLIER\";\n    TransitionAdjustmentMultiplierRange[TransitionAdjustmentMultiplierRange[\"MAXIMUM_ADJUSTMENT_MULTIPLIER\"] = 2] = \"MAXIMUM_ADJUSTMENT_MULTIPLIER\";\n})(TransitionAdjustmentMultiplierRange || (TransitionAdjustmentMultiplierRange = {}));\nvar ValueTransitionConfigurationResponseTypes;\n(function (ValueTransitionConfigurationResponseTypes) {\n    ValueTransitionConfigurationResponseTypes[ValueTransitionConfigurationResponseTypes[\"VALUE_CONFIGURATION_STATUS\"] = 1] = \"VALUE_CONFIGURATION_STATUS\";\n})(ValueTransitionConfigurationResponseTypes || (ValueTransitionConfigurationResponseTypes = {}));\nvar ValueTransitionConfigurationStatusTypes;\n(function (ValueTransitionConfigurationStatusTypes) {\n    ValueTransitionConfigurationStatusTypes[ValueTransitionConfigurationStatusTypes[\"CHARACTERISTIC_IID\"] = 1] = \"CHARACTERISTIC_IID\";\n    ValueTransitionConfigurationStatusTypes[ValueTransitionConfigurationStatusTypes[\"TRANSITION_PARAMETERS\"] = 2] = \"TRANSITION_PARAMETERS\";\n    ValueTransitionConfigurationStatusTypes[ValueTransitionConfigurationStatusTypes[\"TIME_SINCE_START\"] = 3] = \"TIME_SINCE_START\";\n})(ValueTransitionConfigurationStatusTypes || (ValueTransitionConfigurationStatusTypes = {}));\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isAdaptiveLightingContext(context) {\n    return context && \"controller\" in context;\n}\n/**\n * Defines in which mode the {@link AdaptiveLightingController} will operate in.\n * @group Adaptive Lighting\n */\nvar AdaptiveLightingControllerMode;\n(function (AdaptiveLightingControllerMode) {\n    /**\n     * In automatic mode pretty much everything from setup to transition scheduling is done by the controller.\n     */\n    AdaptiveLightingControllerMode[AdaptiveLightingControllerMode[\"AUTOMATIC\"] = 1] = \"AUTOMATIC\";\n    /**\n     * In manual mode setup is done by the controller but the actual transition must be done by the user.\n     * This is useful for lights which natively support transitions.\n     */\n    AdaptiveLightingControllerMode[AdaptiveLightingControllerMode[\"MANUAL\"] = 2] = \"MANUAL\";\n})(AdaptiveLightingControllerMode || (exports.AdaptiveLightingControllerMode = AdaptiveLightingControllerMode = {}));\n/**\n * @group Adaptive Lighting\n */\nvar AdaptiveLightingControllerEvents;\n(function (AdaptiveLightingControllerEvents) {\n    /**\n     * This event is called once a HomeKit controller enables Adaptive Lighting\n     * or a HomeHub sends a updated transition schedule for the next 24 hours.\n     * This is also called on startup when AdaptiveLighting was previously enabled.\n     */\n    AdaptiveLightingControllerEvents[\"UPDATE\"] = \"update\";\n    /**\n     * In yet unknown circumstances HomeKit may also send a dedicated disable command\n     * via the control point characteristic. You may want to handle that in manual mode as well.\n     * The current transition will still be associated with the controller object when this event is called.\n     */\n    AdaptiveLightingControllerEvents[\"DISABLED\"] = \"disable\";\n})(AdaptiveLightingControllerEvents || (exports.AdaptiveLightingControllerEvents = AdaptiveLightingControllerEvents = {}));\n/**\n * This class allows adding Adaptive Lighting support to Lightbulb services.\n * The Lightbulb service MUST have the {@link Characteristic.ColorTemperature} characteristic AND\n * the {@link Characteristic.Brightness} characteristic added.\n * The light may also expose {@link Characteristic.Hue} and {@link Characteristic.Saturation} characteristics\n * (though additional work is required to keep them in sync with the color temperature characteristic. see below)\n *\n * How Adaptive Lighting works:\n *  When enabling AdaptiveLighting the iDevice will send a transition schedule for the next 24 hours.\n *  This schedule will be renewed all 24 hours by a HomeHub in your home\n *  (updating the schedule according to your current day/night situation).\n *  Once enabled the lightbulb will execute the provided transitions. The color temperature value set is always\n *  dependent on the current brightness value. Meaning brighter light will be colder and darker light will be warmer.\n *  HomeKit considers Adaptive Lighting to be disabled as soon a write happens to either the\n *  Hue/Saturation or the ColorTemperature characteristics.\n *  The AdaptiveLighting state must persist across reboots.\n *\n * The AdaptiveLightingController can be operated in two modes: {@link AdaptiveLightingControllerMode.AUTOMATIC} and\n * {@link AdaptiveLightingControllerMode.MANUAL} with AUTOMATIC being the default.\n * The goal would be that the color transition is done DIRECTLY on the light itself, thus not creating any\n * additional/heavy traffic on the network.\n * So if your light hardware/API supports transitions please go the extra mile and use MANUAL mode.\n *\n *\n *\n * Below is an overview what you need to or consider when enabling AdaptiveLighting (categorized by mode).\n * The {@link AdaptiveLightingControllerMode} can be defined with the second constructor argument.\n *\n * <b>AUTOMATIC (Default mode):</b>\n *\n *  This is the easiest mode to setup and needs less to no work form your side for AdaptiveLighting to work.\n *  The AdaptiveLightingController will go through setup procedure with HomeKit and automatically update\n *  the color temperature characteristic base on the current transition schedule.\n *  It is also adjusting the color temperature when a write to the brightness characteristic happens.\n *  Additionally, it will also handle turning off AdaptiveLighting, when it detects a write happening to the\n *  ColorTemperature, Hue or Saturation characteristic (though it can only detect writes coming from HomeKit and\n *  can't detect changes done to the physical devices directly! See below).\n *\n *  So what do you need to consider in automatic mode:\n *   - Brightness and ColorTemperature characteristics MUST be set up. Hue and Saturation may be added for color support.\n *   - Color temperature will be updated all 60 seconds by calling the SET handler of the ColorTemperature characteristic.\n *    So every transition behaves like a regular write to the ColorTemperature characteristic.\n *   - Every transition step is dependent on the current brightness value. Try to keep the internal cache updated\n *    as the controller won't call the GET handler every 60 seconds.\n *    (The cached brightness value is updated on SET/GET operations or by manually calling {@link Characteristic.updateValue}\n *    on the brightness characteristic).\n *   - Detecting changes on the lightbulb side:\n *    Any manual change to ColorTemperature or Hue/Saturation is considered as a signal to turn AdaptiveLighting off.\n *    In order to notify the AdaptiveLightingController of such an event happening OUTSIDE of HomeKit\n *    you must call {@link disableAdaptiveLighting} manually!\n *   - Be aware that even when the light is turned off the transition will continue to call the SET handler\n *    of the ColorTemperature characteristic.\n *   - When using Hue/Saturation:\n *    When using Hue/Saturation in combination with the ColorTemperature characteristic you need to update the\n *    respective other in a particular way depending on if being in \"color mode\" or \"color temperature mode\".\n *    When a write happens to Hue/Saturation characteristic in is advised to set the internal value of the\n *    ColorTemperature to the minimal (NOT RAISING an event).\n *    When a write happens to the ColorTemperature characteristic just MUST convert to a proper representation\n *    in hue and saturation values, with RAISING an event.\n *    As noted above you MUST NOT call the {@link Characteristic.setValue} method for this, as this will be considered\n *    a write to the characteristic and will turn off AdaptiveLighting. Instead, you should use\n *    {@link Characteristic.updateValue} for this.\n *    You can and SHOULD use the supplied utility method {@link ColorUtils.colorTemperatureToHueAndSaturation}\n *    for converting mired to hue and saturation values.\n *\n *\n * <b>MANUAL mode:</b>\n *\n *  Manual mode is recommended for any accessories which support transitions natively on the devices end.\n *  Like for example ZigBee lights which support sending transitions directly to the lightbulb which\n *  then get executed ON the lightbulb itself reducing unnecessary network traffic.\n *  Here is a quick overview what you have to consider to successfully implement AdaptiveLighting support.\n *  The AdaptiveLightingController will also in manual mode do all the setup procedure.\n *  It will also save the transition schedule to disk to keep AdaptiveLighting enabled across reboots.\n *  The \"only\" thing you have to do yourself is handling the actual transitions, check that event notifications\n *  are only sent in the defined interval threshold, adjust the color temperature when brightness is changed\n *  and signal that Adaptive Lighting should be disabled if ColorTemperature, Hue or Saturation is changed manually.\n *\n *  First step is to setup up an event handler for the {@link AdaptiveLightingControllerEvents.UPDATE}, which is called\n *  when AdaptiveLighting is enabled, the HomeHub updates the schedule for the next 24 hours or AdaptiveLighting\n *  is restored from disk on startup.\n *  In the event handler you can get the current schedule via {@link AdaptiveLightingController.getAdaptiveLightingTransitionCurve},\n *  retrieve current intervals like {@link AdaptiveLightingController.getAdaptiveLightingUpdateInterval} or\n *  {@link AdaptiveLightingController.getAdaptiveLightingNotifyIntervalThreshold} and get the date in epoch millis\n *  when the current transition curve started using {@link AdaptiveLightingController.getAdaptiveLightingStartTimeOfTransition}.\n *  Additionally {@link AdaptiveLightingController.getAdaptiveLightingBrightnessMultiplierRange} can be used\n *  to get the valid range for the brightness value to calculate the brightness adjustment factor.\n *  The method {@link AdaptiveLightingController.isAdaptiveLightingActive} can be used to check if AdaptiveLighting is enabled.\n *  Besides, actually running the transition (see {@link AdaptiveLightingTransitionCurveEntry}) you must correctly update\n *  the color temperature when the brightness of the lightbulb changes (see {@link AdaptiveLightingTransitionCurveEntry.brightnessAdjustmentFactor}),\n *  and signal when AdaptiveLighting got disabled by calling {@link AdaptiveLightingController.disableAdaptiveLighting}\n *  when ColorTemperature, Hue or Saturation where changed manually.\n *  Lastly you should set up a event handler for the {@link AdaptiveLightingControllerEvents.DISABLED} event.\n *  In yet unknown circumstances HomeKit may also send a dedicated disable command via the control point characteristic.\n *  Be prepared to handle that.\n *\n *  @group Adaptive Lighting\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar AdaptiveLightingController = /** @class */ (function (_super) {\n    tslib_1.__extends(AdaptiveLightingController, _super);\n    /**\n     * Creates a new instance of the AdaptiveLightingController.\n     * Refer to the {@link AdaptiveLightingController} documentation on how to use it.\n     *\n     * @param service - The lightbulb to which Adaptive Lighting support should be added.\n     * @param options - Optional options to define the operating mode (automatic vs manual).\n     */\n    function AdaptiveLightingController(service, options) {\n        var _a, _b;\n        var _this = _super.call(this) || this;\n        _this.didRunFirstInitializationStep = false;\n        _this.lastEventNotificationSent = 0;\n        _this.lastNotifiedTemperatureValue = 0;\n        _this.lastNotifiedSaturationValue = 0;\n        _this.lastNotifiedHueValue = 0;\n        _this.lightbulb = service;\n        _this.mode = (_a = options === null || options === void 0 ? void 0 : options.controllerMode) !== null && _a !== void 0 ? _a : 1 /* AdaptiveLightingControllerMode.AUTOMATIC */;\n        _this.customTemperatureAdjustment = (_b = options === null || options === void 0 ? void 0 : options.customTemperatureAdjustment) !== null && _b !== void 0 ? _b : 0;\n        (0, assert_1.default)(_this.lightbulb.testCharacteristic(Characteristic_1.Characteristic.ColorTemperature), \"Lightbulb must have the ColorTemperature characteristic added!\");\n        (0, assert_1.default)(_this.lightbulb.testCharacteristic(Characteristic_1.Characteristic.Brightness), \"Lightbulb must have the Brightness characteristic added!\");\n        _this.adjustmentFactorChangedListener = _this.handleAdjustmentFactorChanged.bind(_this);\n        _this.characteristicManualWrittenChangeListener = _this.handleCharacteristicManualWritten.bind(_this);\n        return _this;\n    }\n    /**\n     * @private\n     */\n    AdaptiveLightingController.prototype.controllerId = function () {\n        return \"characteristic-transition\" /* DefaultControllerType.CHARACTERISTIC_TRANSITION */ + \"-\" + this.lightbulb.getServiceId();\n    };\n    // ----------- PUBLIC API START -----------\n    /**\n     * Returns if a Adaptive Lighting transition is currently active.\n     */\n    AdaptiveLightingController.prototype.isAdaptiveLightingActive = function () {\n        return !!this.activeTransition;\n    };\n    /**\n     * This method can be called to manually disable the current active Adaptive Lighting transition.\n     * When using {@link AdaptiveLightingControllerMode.AUTOMATIC} you won't need to call this method.\n     * In {@link AdaptiveLightingControllerMode.MANUAL} you must call this method when Adaptive Lighting should be disabled.\n     * This is the case when the user manually changes the value of Hue, Saturation or ColorTemperature characteristics\n     * (or if any of those values is changed by physical interaction with the lightbulb).\n     */\n    AdaptiveLightingController.prototype.disableAdaptiveLighting = function () {\n        var _a;\n        if (this.updateTimeout) {\n            clearTimeout(this.updateTimeout);\n            this.updateTimeout = undefined;\n        }\n        if (this.activeTransition) {\n            this.colorTemperatureCharacteristic.removeListener(\"change\" /* CharacteristicEventTypes.CHANGE */, this.characteristicManualWrittenChangeListener);\n            this.brightnessCharacteristic.removeListener(\"change\" /* CharacteristicEventTypes.CHANGE */, this.adjustmentFactorChangedListener);\n            if (this.hueCharacteristic) {\n                this.hueCharacteristic.removeListener(\"change\" /* CharacteristicEventTypes.CHANGE */, this.characteristicManualWrittenChangeListener);\n            }\n            if (this.saturationCharacteristic) {\n                this.saturationCharacteristic.removeListener(\"change\" /* CharacteristicEventTypes.CHANGE */, this.characteristicManualWrittenChangeListener);\n            }\n            this.activeTransition = undefined;\n            (_a = this.stateChangeDelegate) === null || _a === void 0 ? void 0 : _a.call(this);\n        }\n        this.colorTemperatureCharacteristic = undefined;\n        this.brightnessCharacteristic = undefined;\n        this.hueCharacteristic = undefined;\n        this.saturationCharacteristic = undefined;\n        this.lastTransitionPointInfo = undefined;\n        this.lastEventNotificationSent = 0;\n        this.lastNotifiedTemperatureValue = 0;\n        this.lastNotifiedSaturationValue = 0;\n        this.lastNotifiedHueValue = 0;\n        this.didRunFirstInitializationStep = false;\n        this.activeTransitionCount.sendEventNotification(0);\n        debug(\"[%s] Disabling adaptive lighting\", this.lightbulb.displayName);\n    };\n    /**\n     * Returns the time where the current transition curve was started in epoch time millis.\n     * A transition curves is active for 24 hours typically and is renewed every 24 hours by a HomeHub.\n     * Additionally see {@link getAdaptiveLightingTimeOffset}.\n     */\n    AdaptiveLightingController.prototype.getAdaptiveLightingStartTimeOfTransition = function () {\n        if (!this.activeTransition) {\n            throw new Error(\"There is no active transition!\");\n        }\n        return this.activeTransition.transitionStartMillis;\n    };\n    /**\n     * It is not necessarily given, that we have the same time (or rather the correct time) as the HomeKit controller\n     * who set up the transition schedule.\n     * Thus we record the delta between our current time and the the time send with the setup request.\n     * <code>timeOffset</code> is defined as <code>Date.now() - getAdaptiveLightingStartTimeOfTransition();</code>.\n     * So in the case were we actually have a correct local time, it most likely will be positive (due to network latency).\n     * But of course it can also be negative.\n     */\n    AdaptiveLightingController.prototype.getAdaptiveLightingTimeOffset = function () {\n        if (!this.activeTransition) {\n            throw new Error(\"There is no active transition!\");\n        }\n        return this.activeTransition.timeMillisOffset;\n    };\n    AdaptiveLightingController.prototype.getAdaptiveLightingTransitionCurve = function () {\n        if (!this.activeTransition) {\n            throw new Error(\"There is no active transition!\");\n        }\n        return this.activeTransition.transitionCurve;\n    };\n    AdaptiveLightingController.prototype.getAdaptiveLightingBrightnessMultiplierRange = function () {\n        if (!this.activeTransition) {\n            throw new Error(\"There is no active transition!\");\n        }\n        return this.activeTransition.brightnessAdjustmentRange;\n    };\n    /**\n     * This method returns the interval (in milliseconds) in which the light should update its internal color temperature\n     * (aka changes it physical color).\n     * A lightbulb should ideally change this also when turned of in oder to have a smooth transition when turning the light on.\n     *\n     * Typically this evaluates to 60000 milliseconds (60 seconds).\n     */\n    AdaptiveLightingController.prototype.getAdaptiveLightingUpdateInterval = function () {\n        if (!this.activeTransition) {\n            throw new Error(\"There is no active transition!\");\n        }\n        return this.activeTransition.updateInterval;\n    };\n    /**\n     * Returns the minimum interval threshold (in milliseconds) a accessory may notify HomeKit controllers about a new\n     * color temperature value via event notifications (what happens when you call {@link Characteristic.updateValue}).\n     * Meaning the accessory should only send event notifications to subscribed HomeKit controllers at the specified interval.\n     *\n     * Typically this evaluates to 600000 milliseconds (10 minutes).\n     */\n    AdaptiveLightingController.prototype.getAdaptiveLightingNotifyIntervalThreshold = function () {\n        if (!this.activeTransition) {\n            throw new Error(\"There is no active transition!\");\n        }\n        return this.activeTransition.notifyIntervalThreshold;\n    };\n    // ----------- PUBLIC API END -----------\n    AdaptiveLightingController.prototype.handleActiveTransitionUpdated = function (calledFromDeserializer) {\n        var _a;\n        if (calledFromDeserializer === void 0) { calledFromDeserializer = false; }\n        if (!calledFromDeserializer) {\n            this.activeTransitionCount.sendEventNotification(1);\n        }\n        else {\n            this.activeTransitionCount.value = 1;\n        }\n        if (this.mode === 1 /* AdaptiveLightingControllerMode.AUTOMATIC */) {\n            this.scheduleNextUpdate();\n        }\n        else if (this.mode === 2 /* AdaptiveLightingControllerMode.MANUAL */) {\n            this.emit(\"update\" /* AdaptiveLightingControllerEvents.UPDATE */);\n        }\n        else {\n            throw new Error(\"Unsupported adaptive lighting controller mode: \" + this.mode);\n        }\n        if (!calledFromDeserializer) {\n            (_a = this.stateChangeDelegate) === null || _a === void 0 ? void 0 : _a.call(this);\n        }\n    };\n    AdaptiveLightingController.prototype.handleAdaptiveLightingEnabled = function () {\n        if (!this.activeTransition) {\n            throw new Error(\"There is no active transition!\");\n        }\n        this.colorTemperatureCharacteristic = this.lightbulb.getCharacteristic(Characteristic_1.Characteristic.ColorTemperature);\n        this.brightnessCharacteristic = this.lightbulb.getCharacteristic(Characteristic_1.Characteristic.Brightness);\n        this.colorTemperatureCharacteristic.on(\"change\" /* CharacteristicEventTypes.CHANGE */, this.characteristicManualWrittenChangeListener);\n        this.brightnessCharacteristic.on(\"change\" /* CharacteristicEventTypes.CHANGE */, this.adjustmentFactorChangedListener);\n        if (this.lightbulb.testCharacteristic(Characteristic_1.Characteristic.Hue)) {\n            this.hueCharacteristic = this.lightbulb.getCharacteristic(Characteristic_1.Characteristic.Hue)\n                .on(\"change\" /* CharacteristicEventTypes.CHANGE */, this.characteristicManualWrittenChangeListener);\n        }\n        if (this.lightbulb.testCharacteristic(Characteristic_1.Characteristic.Saturation)) {\n            this.saturationCharacteristic = this.lightbulb.getCharacteristic(Characteristic_1.Characteristic.Saturation)\n                .on(\"change\" /* CharacteristicEventTypes.CHANGE */, this.characteristicManualWrittenChangeListener);\n        }\n    };\n    AdaptiveLightingController.prototype.handleAdaptiveLightingDisabled = function () {\n        if (this.mode === 2 /* AdaptiveLightingControllerMode.MANUAL */ && this.activeTransition) { // only emit the event if a transition is actually enabled\n            this.emit(\"disable\" /* AdaptiveLightingControllerEvents.DISABLED */);\n        }\n        this.disableAdaptiveLighting();\n    };\n    AdaptiveLightingController.prototype.handleAdjustmentFactorChanged = function (change) {\n        var _this = this;\n        if (change.newValue === change.oldValue) {\n            return;\n        }\n        // consider the following scenario:\n        // a HomeKit controller queries the light (meaning e.g. Brightness, Hue and Saturation characteristics).\n        // As of the implementation of the light the brightness characteristic get handler returns first\n        // (and returns a value different than the cached value).\n        // This change handler gets called and we will update the color temperature accordingly\n        // (which also adjusts the internal cached values for Hue and Saturation).\n        // After some short time the Hue or Saturation get handler return with the last known value to the plugin.\n        // As those values now differ from the cached values (we already updated) we get a call to handleCharacteristicManualWritten\n        // which again disables adaptive lighting.\n        if (change.reason === \"read\" /* ChangeReason.READ */) {\n            // if the reason is a read request, we expect that Hue/Saturation are also read\n            // thus we postpone our update to ColorTemperature a bit.\n            // It doesn't ensure that those race conditions do not happen anymore, but with a 1s delay it reduces the possibility by a bit\n            setTimeout(function () {\n                if (!_this.activeTransition) {\n                    return; // was disabled in the mean time\n                }\n                _this.scheduleNextUpdate(true);\n            }, 1000).unref();\n        }\n        else {\n            this.scheduleNextUpdate(true); // run a dry scheduleNextUpdate to adjust the colorTemperature using the new brightness value\n        }\n    };\n    /**\n     * This method is called when a change happens to the Hue/Saturation or ColorTemperature characteristic.\n     * When such a write happens (caused by the user changing the color/temperature) Adaptive Lighting must be disabled.\n     *\n     * @param change\n     */\n    AdaptiveLightingController.prototype.handleCharacteristicManualWritten = function (change) {\n        if (change.reason === \"write\" /* ChangeReason.WRITE */ && !(isAdaptiveLightingContext(change.context) && change.context.controller === this)) {\n            // we ignore write request which are the result of calls made to updateValue or sendEventNotification\n            // or the result of a changed value returned by a read handler\n            // or the change was done by the controller itself\n            debug(\"[%s] Received a manual write to an characteristic (newValue: %d, oldValue: %d, reason: %s). Thus disabling adaptive lighting!\", this.lightbulb.displayName, change.newValue, change.oldValue, change.reason);\n            this.disableAdaptiveLighting();\n        }\n    };\n    /**\n     * Retrieve the {@link AdaptiveLightingTransitionPoint} for the current timestamp.\n     * Returns undefined if the current transition schedule reached its end.\n     */\n    AdaptiveLightingController.prototype.getCurrentAdaptiveLightingTransitionPoint = function () {\n        var _a, _b, _c, _d, _e;\n        if (!this.activeTransition) {\n            throw new Error(\"Cannot calculate current transition point if no transition is active!\");\n        }\n        // adjustedNow is the now() date corrected to the time of the initiating controller\n        var adjustedNow = Date.now() - this.activeTransition.timeMillisOffset;\n        // \"offset\" since the start of the transition schedule\n        var offset = adjustedNow - this.activeTransition.transitionStartMillis;\n        var i = (_b = (_a = this.lastTransitionPointInfo) === null || _a === void 0 ? void 0 : _a.curveIndex) !== null && _b !== void 0 ? _b : 0;\n        var lowerBoundTimeOffset = (_d = (_c = this.lastTransitionPointInfo) === null || _c === void 0 ? void 0 : _c.lowerBoundTimeOffset) !== null && _d !== void 0 ? _d : 0; // time offset to the lowerBound transition entry\n        var lowerBound = undefined;\n        var upperBound = undefined;\n        for (; i + 1 < this.activeTransition.transitionCurve.length; i++) {\n            var lowerBound0 = this.activeTransition.transitionCurve[i];\n            var upperBound0 = this.activeTransition.transitionCurve[i + 1];\n            var lowerBoundDuration = (_e = lowerBound0.duration) !== null && _e !== void 0 ? _e : 0;\n            lowerBoundTimeOffset += lowerBound0.transitionTime;\n            if (offset >= lowerBoundTimeOffset) {\n                if (offset <= lowerBoundTimeOffset + lowerBoundDuration + upperBound0.transitionTime) {\n                    lowerBound = lowerBound0;\n                    upperBound = upperBound0;\n                    break;\n                }\n            }\n            else if (this.lastTransitionPointInfo) {\n                // if we reached here the entry in the transitionCurve we are searching for is somewhere before current i.\n                // This can only happen when we have a faulty lastTransitionPointInfo (otherwise we would start from i=0).\n                // Thus we try again by searching from i=0\n                this.lastTransitionPointInfo = undefined;\n                return this.getCurrentAdaptiveLightingTransitionPoint();\n            }\n            lowerBoundTimeOffset += lowerBoundDuration;\n        }\n        if (!lowerBound || !upperBound) {\n            this.lastTransitionPointInfo = undefined;\n            return undefined;\n        }\n        this.lastTransitionPointInfo = {\n            curveIndex: i,\n            // we need to subtract lowerBound.transitionTime. When we start the loop above\n            // with a saved transition point, we will always add lowerBound.transitionTime as first step.\n            // Otherwise our calculations are simply wrong.\n            lowerBoundTimeOffset: lowerBoundTimeOffset - lowerBound.transitionTime,\n        };\n        return {\n            lowerBoundTimeOffset: lowerBoundTimeOffset,\n            transitionOffset: offset - lowerBoundTimeOffset,\n            lowerBound: lowerBound,\n            upperBound: upperBound,\n        };\n    };\n    AdaptiveLightingController.prototype.scheduleNextUpdate = function (dryRun) {\n        var _this = this;\n        var _a, _b, _c, _d, _e;\n        if (dryRun === void 0) { dryRun = false; }\n        if (!this.activeTransition) {\n            throw new Error(\"tried scheduling transition when no transition was active!\");\n        }\n        if (!dryRun) {\n            this.updateTimeout = undefined;\n        }\n        if (!this.didRunFirstInitializationStep) {\n            this.didRunFirstInitializationStep = true;\n            this.handleAdaptiveLightingEnabled();\n        }\n        var transitionPoint = this.getCurrentAdaptiveLightingTransitionPoint();\n        if (!transitionPoint) {\n            debug(\"[%s] Reached end of transition curve!\", this.lightbulb.displayName);\n            if (!dryRun) {\n                // the transition schedule is only for 24 hours, we reached the end?\n                this.disableAdaptiveLighting();\n            }\n            return;\n        }\n        var lowerBound = transitionPoint.lowerBound;\n        var upperBound = transitionPoint.upperBound;\n        var interpolatedTemperature;\n        var interpolatedAdjustmentFactor;\n        if (lowerBound.duration && transitionPoint.transitionOffset <= lowerBound.duration) {\n            interpolatedTemperature = lowerBound.temperature;\n            interpolatedAdjustmentFactor = lowerBound.brightnessAdjustmentFactor;\n        }\n        else {\n            var timePercentage = (transitionPoint.transitionOffset - ((_a = lowerBound.duration) !== null && _a !== void 0 ? _a : 0)) / upperBound.transitionTime;\n            interpolatedTemperature = lowerBound.temperature + (upperBound.temperature - lowerBound.temperature) * timePercentage;\n            interpolatedAdjustmentFactor = lowerBound.brightnessAdjustmentFactor\n                + (upperBound.brightnessAdjustmentFactor - lowerBound.brightnessAdjustmentFactor) * timePercentage;\n        }\n        var adjustmentMultiplier = Math.max(this.activeTransition.brightnessAdjustmentRange.minBrightnessValue, Math.min(this.activeTransition.brightnessAdjustmentRange.maxBrightnessValue, this.brightnessCharacteristic.value));\n        var temperature = Math.round(interpolatedTemperature + interpolatedAdjustmentFactor * adjustmentMultiplier);\n        // apply any manually applied temperature adjustments\n        temperature += this.customTemperatureAdjustment;\n        var min = (_c = (_b = this.colorTemperatureCharacteristic) === null || _b === void 0 ? void 0 : _b.props.minValue) !== null && _c !== void 0 ? _c : 140;\n        var max = (_e = (_d = this.colorTemperatureCharacteristic) === null || _d === void 0 ? void 0 : _d.props.maxValue) !== null && _e !== void 0 ? _e : 500;\n        temperature = Math.max(min, Math.min(max, temperature));\n        var color = color_utils_1.ColorUtils.colorTemperatureToHueAndSaturation(temperature);\n        debug(\"[%s] Next temperature value is %d (for brightness %d adj: %s)\", this.lightbulb.displayName, temperature, adjustmentMultiplier, this.customTemperatureAdjustment);\n        var context = {\n            controller: this,\n            omitEventUpdate: true,\n        };\n        /*\n         * We set saturation and hue values BEFORE we call the ColorTemperature SET handler (via setValue).\n         * First thought was so the API user could get the values in the SET handler of the color temperature characteristic.\n         * Do this is probably not really elegant cause this would only work when Adaptive Lighting is turned on\n         * an the accessory MUST in any case update the Hue/Saturation values on a ColorTemperature write\n         * (obviously only if Hue/Saturation characteristics are added to the service).\n         *\n         * The clever thing about this though is that, that it prevents notifications from being sent for Hue and Saturation\n         * outside the specified notifyIntervalThreshold (see below where notifications are manually sent).\n         * As the dev will or must call something like updateValue to propagate the updated hue and saturation values\n         * to all HomeKit clients (so that the color is reflected in the UI), HAP-NodeJS won't send notifications\n         * as the values are the same.\n         * This of course only works if the plugin uses the exact same algorithm of \"converting\" the color temperature\n         * value to the hue and saturation representation.\n         */\n        if (this.saturationCharacteristic) {\n            this.saturationCharacteristic.value = color.saturation;\n        }\n        if (this.hueCharacteristic) {\n            this.hueCharacteristic.value = color.hue;\n        }\n        this.colorTemperatureCharacteristic.handleSetRequest(temperature, undefined, context).catch(function (reason) {\n            debug(\"[%s] Failed to next adaptive lighting transition point: %d\", _this.lightbulb.displayName, reason);\n        });\n        if (!this.activeTransition) {\n            console.warn(\"[\" + this.lightbulb.displayName + \"] Adaptive Lighting was probably disable my mistake by some call in \" +\n                \"the SET handler of the ColorTemperature characteristic! \" +\n                \"Please check that you don't call setValue/setCharacteristic on the Hue, Saturation or ColorTemperature characteristic!\");\n            return;\n        }\n        var now = Date.now();\n        if (!dryRun && now - this.lastEventNotificationSent >= this.activeTransition.notifyIntervalThreshold) {\n            debug(\"[%s] Sending event notifications for current transition!\", this.lightbulb.displayName);\n            this.lastEventNotificationSent = now;\n            var eventContext = {\n                controller: this,\n            };\n            if (this.lastNotifiedTemperatureValue !== temperature) {\n                this.colorTemperatureCharacteristic.sendEventNotification(temperature, eventContext);\n                this.lastNotifiedTemperatureValue = temperature;\n            }\n            if (this.saturationCharacteristic && this.lastNotifiedSaturationValue !== color.saturation) {\n                this.saturationCharacteristic.sendEventNotification(color.saturation, eventContext);\n                this.lastNotifiedSaturationValue = color.saturation;\n            }\n            if (this.hueCharacteristic && this.lastNotifiedHueValue !== color.hue) {\n                this.hueCharacteristic.sendEventNotification(color.hue, eventContext);\n                this.lastNotifiedHueValue = color.hue;\n            }\n        }\n        if (!dryRun) {\n            this.updateTimeout = setTimeout(this.scheduleNextUpdate.bind(this), this.activeTransition.updateInterval);\n        }\n    };\n    /**\n     * @private\n     */\n    AdaptiveLightingController.prototype.constructServices = function () {\n        return {};\n    };\n    /**\n     * @private\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    AdaptiveLightingController.prototype.initWithServices = function (serviceMap) {\n        // do nothing\n    };\n    /**\n     * @private\n     */\n    AdaptiveLightingController.prototype.configureServices = function () {\n        var _this = this;\n        this.supportedTransitionConfiguration = this.lightbulb.getCharacteristic(Characteristic_1.Characteristic.SupportedCharacteristicValueTransitionConfiguration);\n        this.transitionControl = this.lightbulb.getCharacteristic(Characteristic_1.Characteristic.CharacteristicValueTransitionControl)\n            .updateValue(\"\");\n        this.activeTransitionCount = this.lightbulb.getCharacteristic(Characteristic_1.Characteristic.CharacteristicValueActiveTransitionCount)\n            .updateValue(0);\n        this.supportedTransitionConfiguration\n            .onGet(this.handleSupportedTransitionConfigurationRead.bind(this));\n        this.transitionControl\n            .onGet(function () {\n            return _this.buildTransitionControlResponseBuffer().toString(\"base64\");\n        })\n            .onSet(function (value) {\n            try {\n                return _this.handleTransitionControlWrite(value);\n            }\n            catch (error) {\n                console.warn(\"[%s] DEBUG: '\".concat(value, \"'\"));\n                console.warn(\"[%s] Encountered error on CharacteristicValueTransitionControl characteristic: \" + error.stack);\n                _this.disableAdaptiveLighting();\n                throw new hapStatusError_1.HapStatusError(-70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */);\n            }\n        });\n    };\n    /**\n     * @private\n     */\n    AdaptiveLightingController.prototype.handleControllerRemoved = function () {\n        this.lightbulb.removeCharacteristic(this.supportedTransitionConfiguration);\n        this.lightbulb.removeCharacteristic(this.transitionControl);\n        this.lightbulb.removeCharacteristic(this.activeTransitionCount);\n        this.supportedTransitionConfiguration = undefined;\n        this.transitionControl = undefined;\n        this.activeTransitionCount = undefined;\n        this.removeAllListeners();\n    };\n    /**\n     * @private\n     */\n    AdaptiveLightingController.prototype.handleFactoryReset = function () {\n        this.handleAdaptiveLightingDisabled();\n    };\n    /**\n     * @private\n     */\n    AdaptiveLightingController.prototype.serialize = function () {\n        if (!this.activeTransition) {\n            return undefined;\n        }\n        return {\n            activeTransition: this.activeTransition,\n        };\n    };\n    /**\n     * @private\n     */\n    AdaptiveLightingController.prototype.deserialize = function (serialized) {\n        this.activeTransition = serialized.activeTransition;\n        // Data migrations from beta builds\n        if (!this.activeTransition.transitionId) {\n            // @ts-expect-error: data migration from beta builds\n            this.activeTransition.transitionId = this.activeTransition.id1;\n            // @ts-expect-error: data migration from beta builds\n            delete this.activeTransition.id1;\n        }\n        if (!this.activeTransition.timeMillisOffset) { // compatibility to data produced by early betas\n            this.activeTransition.timeMillisOffset = 0;\n        }\n        this.handleActiveTransitionUpdated(true);\n    };\n    /**\n     * @private\n     */\n    AdaptiveLightingController.prototype.setupStateChangeDelegate = function (delegate) {\n        this.stateChangeDelegate = delegate;\n    };\n    AdaptiveLightingController.prototype.handleSupportedTransitionConfigurationRead = function () {\n        var brightnessIID = this.lightbulb.getCharacteristic(Characteristic_1.Characteristic.Brightness).iid;\n        var temperatureIID = this.lightbulb.getCharacteristic(Characteristic_1.Characteristic.ColorTemperature).iid;\n        (0, assert_1.default)(brightnessIID, \"iid for brightness characteristic is undefined\");\n        (0, assert_1.default)(temperatureIID, \"iid for temperature characteristic is undefined\");\n        return tlv.encode(1 /* SupportedCharacteristicValueTransitionConfigurationsTypes.SUPPORTED_TRANSITION_CONFIGURATION */, [\n            tlv.encode(1 /* SupportedValueTransitionConfigurationTypes.CHARACTERISTIC_IID */, tlv.writeVariableUIntLE(brightnessIID), 2 /* SupportedValueTransitionConfigurationTypes.TRANSITION_TYPE */, 1 /* TransitionType.BRIGHTNESS */),\n            tlv.encode(1 /* SupportedValueTransitionConfigurationTypes.CHARACTERISTIC_IID */, tlv.writeVariableUIntLE(temperatureIID), 2 /* SupportedValueTransitionConfigurationTypes.TRANSITION_TYPE */, 2 /* TransitionType.COLOR_TEMPERATURE */),\n        ]).toString(\"base64\");\n    };\n    AdaptiveLightingController.prototype.buildTransitionControlResponseBuffer = function (time) {\n        if (!this.activeTransition) {\n            return Buffer.alloc(0);\n        }\n        var active = this.activeTransition;\n        var timeSinceStart = time !== null && time !== void 0 ? time : (Date.now() - active.timeMillisOffset - active.transitionStartMillis);\n        var timeSinceStartBuffer = tlv.writeVariableUIntLE(timeSinceStart);\n        var parameters = tlv.encode(1 /* ValueTransitionParametersTypes.TRANSITION_ID */, uuid.write(active.transitionId), 2 /* ValueTransitionParametersTypes.START_TIME */, Buffer.from(active.transitionStartBuffer, \"hex\"));\n        if (active.id3) {\n            parameters = Buffer.concat([\n                parameters,\n                tlv.encode(3 /* ValueTransitionParametersTypes.UNKNOWN_3 */, Buffer.from(active.id3, \"hex\")),\n            ]);\n        }\n        var status = tlv.encode(1 /* ValueTransitionConfigurationStatusTypes.CHARACTERISTIC_IID */, tlv.writeVariableUIntLE(active.iid), 2 /* ValueTransitionConfigurationStatusTypes.TRANSITION_PARAMETERS */, parameters, 3 /* ValueTransitionConfigurationStatusTypes.TIME_SINCE_START */, timeSinceStartBuffer);\n        return tlv.encode(1 /* ValueTransitionConfigurationResponseTypes.VALUE_CONFIGURATION_STATUS */, status);\n    };\n    AdaptiveLightingController.prototype.handleTransitionControlWrite = function (value) {\n        if (typeof value !== \"string\") {\n            throw new hapStatusError_1.HapStatusError(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */);\n        }\n        var tlvData = tlv.decode(Buffer.from(value, \"base64\"));\n        var responseBuffers = [];\n        var readTransition = tlvData[1 /* TransitionControlTypes.READ_CURRENT_VALUE_TRANSITION_CONFIGURATION */];\n        if (readTransition) {\n            var readTransitionResponse = this.handleTransitionControlReadTransition(readTransition);\n            if (readTransitionResponse) {\n                responseBuffers.push(readTransitionResponse);\n            }\n        }\n        var updateTransition = tlvData[2 /* TransitionControlTypes.UPDATE_VALUE_TRANSITION_CONFIGURATION */];\n        if (updateTransition) {\n            var updateTransitionResponse = this.handleTransitionControlUpdateTransition(updateTransition);\n            if (updateTransitionResponse) {\n                responseBuffers.push(updateTransitionResponse);\n            }\n        }\n        return Buffer.concat(responseBuffers).toString(\"base64\");\n    };\n    AdaptiveLightingController.prototype.handleTransitionControlReadTransition = function (buffer) {\n        var readTransition = tlv.decode(buffer);\n        var iid = tlv.readVariableUIntLE(readTransition[1 /* ReadValueTransitionConfiguration.CHARACTERISTIC_IID */]);\n        if (this.activeTransition) {\n            if (this.activeTransition.iid !== iid) {\n                console.warn(\"[\" + this.lightbulb.displayName + \"] iid of current adaptive lighting transition (\" + this.activeTransition.iid\n                    + \") doesn't match the requested one \" + iid);\n                throw new hapStatusError_1.HapStatusError(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */);\n            }\n            var parameters = tlv.encode(1 /* ValueTransitionParametersTypes.TRANSITION_ID */, uuid.write(this.activeTransition.transitionId), 2 /* ValueTransitionParametersTypes.START_TIME */, Buffer.from(this.activeTransition.transitionStartBuffer, \"hex\"));\n            if (this.activeTransition.id3) {\n                parameters = Buffer.concat([\n                    parameters,\n                    tlv.encode(3 /* ValueTransitionParametersTypes.UNKNOWN_3 */, Buffer.from(this.activeTransition.id3, \"hex\")),\n                ]);\n            }\n            return tlv.encode(1 /* TransitionControlTypes.READ_CURRENT_VALUE_TRANSITION_CONFIGURATION */, tlv.encode(1 /* ValueTransitionConfigurationTypes.CHARACTERISTIC_IID */, tlv.writeVariableUIntLE(this.activeTransition.iid), 2 /* ValueTransitionConfigurationTypes.TRANSITION_PARAMETERS */, parameters, 3 /* ValueTransitionConfigurationTypes.UNKNOWN_3 */, 1, 5 /* ValueTransitionConfigurationTypes.TRANSITION_CURVE_CONFIGURATION */, tlv.encode(1 /* TransitionCurveConfigurationTypes.TRANSITION_ENTRY */, this.activeTransition.transitionCurve.map(function (entry, index, array) {\n                var _a, _b;\n                var duration = (_b = (_a = array[index - 1]) === null || _a === void 0 ? void 0 : _a.duration) !== null && _b !== void 0 ? _b : 0; // we store stuff differently :sweat_smile:\n                return tlv.encode(1 /* TransitionEntryTypes.ADJUSTMENT_FACTOR */, tlv.writeFloat32LE(entry.brightnessAdjustmentFactor), 2 /* TransitionEntryTypes.VALUE */, tlv.writeFloat32LE(entry.temperature), 3 /* TransitionEntryTypes.TRANSITION_OFFSET */, tlv.writeVariableUIntLE(entry.transitionTime), 4 /* TransitionEntryTypes.DURATION */, tlv.writeVariableUIntLE(duration));\n            }), 2 /* TransitionCurveConfigurationTypes.ADJUSTMENT_CHARACTERISTIC_IID */, tlv.writeVariableUIntLE(this.activeTransition.brightnessCharacteristicIID), 3 /* TransitionCurveConfigurationTypes.ADJUSTMENT_MULTIPLIER_RANGE */, tlv.encode(1 /* TransitionAdjustmentMultiplierRange.MINIMUM_ADJUSTMENT_MULTIPLIER */, tlv.writeUInt32(this.activeTransition.brightnessAdjustmentRange.minBrightnessValue), 2 /* TransitionAdjustmentMultiplierRange.MAXIMUM_ADJUSTMENT_MULTIPLIER */, tlv.writeUInt32(this.activeTransition.brightnessAdjustmentRange.maxBrightnessValue))), 6 /* ValueTransitionConfigurationTypes.UPDATE_INTERVAL */, tlv.writeVariableUIntLE(this.activeTransition.updateInterval), 8 /* ValueTransitionConfigurationTypes.NOTIFY_INTERVAL_THRESHOLD */, tlv.writeVariableUIntLE(this.activeTransition.notifyIntervalThreshold)));\n        }\n        else {\n            return undefined; // returns empty string\n        }\n    };\n    AdaptiveLightingController.prototype.handleTransitionControlUpdateTransition = function (buffer) {\n        var e_1, _a;\n        var _b, _c;\n        var updateTransition = tlv.decode(buffer);\n        var transitionConfiguration = tlv.decode(updateTransition[1 /* UpdateValueTransitionConfigurationsTypes.VALUE_TRANSITION_CONFIGURATION */]);\n        var iid = tlv.readVariableUIntLE(transitionConfiguration[1 /* ValueTransitionConfigurationTypes.CHARACTERISTIC_IID */]);\n        if (!this.lightbulb.getCharacteristicByIID(iid)) {\n            throw new hapStatusError_1.HapStatusError(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */);\n        }\n        var param3 = (_b = transitionConfiguration[3 /* ValueTransitionConfigurationTypes.UNKNOWN_3 */]) === null || _b === void 0 ? void 0 : _b.readUInt8(0); // when present it is always 1\n        if (!param3) { // if HomeKit just sends the iid, we consider that as \"disable adaptive lighting\" (assumption)\n            this.handleAdaptiveLightingDisabled();\n            return tlv.encode(2 /* TransitionControlTypes.UPDATE_VALUE_TRANSITION_CONFIGURATION */, Buffer.alloc(0));\n        }\n        var parametersTLV = tlv.decode(transitionConfiguration[2 /* ValueTransitionConfigurationTypes.TRANSITION_PARAMETERS */]);\n        var curveConfiguration = tlv.decodeWithLists(transitionConfiguration[5 /* ValueTransitionConfigurationTypes.TRANSITION_CURVE_CONFIGURATION */]);\n        var updateInterval = (_c = transitionConfiguration[6 /* ValueTransitionConfigurationTypes.UPDATE_INTERVAL */]) === null || _c === void 0 ? void 0 : _c.readUInt16LE(0);\n        var notifyIntervalThreshold = transitionConfiguration[8 /* ValueTransitionConfigurationTypes.NOTIFY_INTERVAL_THRESHOLD */].readUInt32LE(0);\n        var transitionId = parametersTLV[1 /* ValueTransitionParametersTypes.TRANSITION_ID */];\n        var startTime = parametersTLV[2 /* ValueTransitionParametersTypes.START_TIME */];\n        var id3 = parametersTLV[3 /* ValueTransitionParametersTypes.UNKNOWN_3 */]; // this may be undefined\n        var startTimeMillis = (0, time_1.epochMillisFromMillisSince2001_01_01Buffer)(startTime);\n        var timeMillisOffset = Date.now() - startTimeMillis;\n        var transitionCurve = [];\n        var previous = undefined;\n        var transitions = curveConfiguration[1 /* TransitionCurveConfigurationTypes.TRANSITION_ENTRY */];\n        try {\n            for (var transitions_1 = tslib_1.__values(transitions), transitions_1_1 = transitions_1.next(); !transitions_1_1.done; transitions_1_1 = transitions_1.next()) {\n                var entry = transitions_1_1.value;\n                var tlvEntry = tlv.decode(entry);\n                var adjustmentFactor = tlvEntry[1 /* TransitionEntryTypes.ADJUSTMENT_FACTOR */].readFloatLE(0);\n                var value = tlvEntry[2 /* TransitionEntryTypes.VALUE */].readFloatLE(0);\n                var transitionOffset = tlv.readVariableUIntLE(tlvEntry[3 /* TransitionEntryTypes.TRANSITION_OFFSET */]);\n                var duration = tlvEntry[4 /* TransitionEntryTypes.DURATION */] ? tlv.readVariableUIntLE(tlvEntry[4 /* TransitionEntryTypes.DURATION */]) : undefined;\n                if (previous) {\n                    previous.duration = duration;\n                }\n                previous = {\n                    temperature: value,\n                    brightnessAdjustmentFactor: adjustmentFactor,\n                    transitionTime: transitionOffset,\n                };\n                transitionCurve.push(previous);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (transitions_1_1 && !transitions_1_1.done && (_a = transitions_1.return)) _a.call(transitions_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var adjustmentIID = tlv.readVariableUIntLE(curveConfiguration[2 /* TransitionCurveConfigurationTypes.ADJUSTMENT_CHARACTERISTIC_IID */]);\n        var adjustmentMultiplierRange = tlv.decode(curveConfiguration[3 /* TransitionCurveConfigurationTypes.ADJUSTMENT_MULTIPLIER_RANGE */]);\n        var minAdjustmentMultiplier = adjustmentMultiplierRange[1 /* TransitionAdjustmentMultiplierRange.MINIMUM_ADJUSTMENT_MULTIPLIER */].readUInt32LE(0);\n        var maxAdjustmentMultiplier = adjustmentMultiplierRange[2 /* TransitionAdjustmentMultiplierRange.MAXIMUM_ADJUSTMENT_MULTIPLIER */].readUInt32LE(0);\n        this.activeTransition = {\n            iid: iid,\n            transitionStartMillis: startTimeMillis,\n            timeMillisOffset: timeMillisOffset,\n            transitionId: uuid.unparse(transitionId),\n            transitionStartBuffer: startTime.toString(\"hex\"),\n            id3: id3 === null || id3 === void 0 ? void 0 : id3.toString(\"hex\"),\n            brightnessCharacteristicIID: adjustmentIID,\n            brightnessAdjustmentRange: {\n                minBrightnessValue: minAdjustmentMultiplier,\n                maxBrightnessValue: maxAdjustmentMultiplier,\n            },\n            transitionCurve: transitionCurve,\n            updateInterval: updateInterval !== null && updateInterval !== void 0 ? updateInterval : 60000,\n            notifyIntervalThreshold: notifyIntervalThreshold,\n        };\n        if (this.updateTimeout) {\n            clearTimeout(this.updateTimeout);\n            this.updateTimeout = undefined;\n            debug(\"[%s] Adaptive lighting was renewed.\", this.lightbulb.displayName);\n        }\n        else {\n            debug(\"[%s] Adaptive lighting was enabled.\", this.lightbulb.displayName);\n        }\n        this.handleActiveTransitionUpdated();\n        return tlv.encode(2 /* TransitionControlTypes.UPDATE_VALUE_TRANSITION_CONFIGURATION */, this.buildTransitionControlResponseBuffer(0));\n    };\n    return AdaptiveLightingController;\n}(events_1.EventEmitter));\nexports.AdaptiveLightingController = AdaptiveLightingController;\n//# sourceMappingURL=AdaptiveLightingController.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CameraController = exports.CameraControllerEvents = exports.ResourceRequestReason = void 0;\nvar tslib_1 = require(\"tslib\");\nvar crypto_1 = tslib_1.__importDefault(require(\"crypto\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar events_1 = require(\"events\");\nvar camera_1 = require(\"../camera\");\nvar Characteristic_1 = require(\"../Characteristic\");\nvar datastream_1 = require(\"../datastream\");\nvar Service_1 = require(\"../Service\");\nvar hapStatusError_1 = require(\"../util/hapStatusError\");\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:Camera:Controller\");\n/**\n * @group Camera\n */\nvar ResourceRequestReason;\n(function (ResourceRequestReason) {\n    /**\n     * The reason describes periodic resource requests.\n     * In the example of camera image snapshots those are the typical preview images every 10 seconds.\n     */\n    ResourceRequestReason[ResourceRequestReason[\"PERIODIC\"] = 0] = \"PERIODIC\";\n    /**\n     * The resource request is the result of some event.\n     * In the example of camera image snapshots, requests are made due to e.g. a motion event or similar.\n     */\n    ResourceRequestReason[ResourceRequestReason[\"EVENT\"] = 1] = \"EVENT\";\n})(ResourceRequestReason || (exports.ResourceRequestReason = ResourceRequestReason = {}));\n/**\n * @group Camera\n */\nvar CameraControllerEvents;\n(function (CameraControllerEvents) {\n    /**\n     *  Emitted when the mute state or the volume changed. The Apple Home App typically does not set those values\n     *  except the mute state. When you adjust the volume in the Camera view it will reset the muted state if it was set previously.\n     *  The value of volume has nothing to do with the volume slider in the Camera view of the Home app.\n     */\n    CameraControllerEvents[\"MICROPHONE_PROPERTIES_CHANGED\"] = \"microphone-change\";\n    /**\n     * Emitted when the mute state or the volume changed. The Apple Home App typically does not set those values\n     * except the mute state. When you unmute the device microphone it will reset the mute state if it was set previously.\n     */\n    CameraControllerEvents[\"SPEAKER_PROPERTIES_CHANGED\"] = \"speaker-change\";\n})(CameraControllerEvents || (exports.CameraControllerEvents = CameraControllerEvents = {}));\n/**\n * Everything needed to expose a HomeKit Camera.\n *\n * @group Camera\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar CameraController = /** @class */ (function (_super) {\n    tslib_1.__extends(CameraController, _super);\n    function CameraController(options, legacyMode) {\n        if (legacyMode === void 0) { legacyMode = false; }\n        var _this = _super.call(this) || this;\n        _this.legacyMode = false;\n        /**\n         * @private\n         */\n        _this.streamManagements = [];\n        _this.microphoneMuted = false;\n        _this.microphoneVolume = 100;\n        _this.speakerMuted = false;\n        _this.speakerVolume = 100;\n        _this.motionServiceExternallySupplied = false;\n        _this.occupancyServiceExternallySupplied = false;\n        _this.streamCount = Math.max(1, options.cameraStreamCount || 1);\n        _this.delegate = options.delegate;\n        _this.streamingOptions = options.streamingOptions;\n        _this.recording = options.recording;\n        _this.sensorOptions = options.sensors;\n        _this.legacyMode = legacyMode; // legacy mode will prevent from Microphone and Speaker services to get created to avoid collisions\n        return _this;\n    }\n    /**\n     * @private\n     */\n    CameraController.prototype.controllerId = function () {\n        return \"camera\" /* DefaultControllerType.CAMERA */;\n    };\n    // ----------------------------------- STREAM API ------------------------------------\n    /**\n     * Call this method if you want to forcefully suspend an ongoing streaming session.\n     * This would be adequate if the rtp server or media encoding encountered an unexpected error.\n     *\n     * @param sessionId - id of the current ongoing streaming session\n     */\n    CameraController.prototype.forceStopStreamingSession = function (sessionId) {\n        this.streamManagements.forEach(function (management) {\n            if (management.sessionIdentifier === sessionId) {\n                management.forceStop();\n            }\n        });\n    };\n    CameraController.generateSynchronisationSource = function () {\n        var ssrc = crypto_1.default.randomBytes(4); // range [-2.14748e+09 - 2.14748e+09]\n        ssrc[0] = 0;\n        return ssrc.readInt32BE(0);\n    };\n    // ----------------------------- MICROPHONE/SPEAKER API ------------------------------\n    CameraController.prototype.setMicrophoneMuted = function (muted) {\n        if (muted === void 0) { muted = true; }\n        if (!this.microphoneService) {\n            return;\n        }\n        this.microphoneMuted = muted;\n        this.microphoneService.updateCharacteristic(Characteristic_1.Characteristic.Mute, muted);\n    };\n    CameraController.prototype.setMicrophoneVolume = function (volume) {\n        if (!this.microphoneService) {\n            return;\n        }\n        this.microphoneVolume = volume;\n        this.microphoneService.updateCharacteristic(Characteristic_1.Characteristic.Volume, volume);\n    };\n    CameraController.prototype.setSpeakerMuted = function (muted) {\n        if (muted === void 0) { muted = true; }\n        if (!this.speakerService) {\n            return;\n        }\n        this.speakerMuted = muted;\n        this.speakerService.updateCharacteristic(Characteristic_1.Characteristic.Mute, muted);\n    };\n    CameraController.prototype.setSpeakerVolume = function (volume) {\n        if (!this.speakerService) {\n            return;\n        }\n        this.speakerVolume = volume;\n        this.speakerService.updateCharacteristic(Characteristic_1.Characteristic.Volume, volume);\n    };\n    CameraController.prototype.emitMicrophoneChange = function () {\n        this.emit(\"microphone-change\" /* CameraControllerEvents.MICROPHONE_PROPERTIES_CHANGED */, this.microphoneMuted, this.microphoneVolume);\n    };\n    CameraController.prototype.emitSpeakerChange = function () {\n        this.emit(\"speaker-change\" /* CameraControllerEvents.SPEAKER_PROPERTIES_CHANGED */, this.speakerMuted, this.speakerVolume);\n    };\n    // -----------------------------------------------------------------------------------\n    /**\n     * @private\n     */\n    CameraController.prototype.constructServices = function () {\n        var _a, _b, _c, _d;\n        for (var i = 0; i < this.streamCount; i++) {\n            var rtp = new camera_1.RTPStreamManagement(i, this.streamingOptions, this.delegate, undefined, this.rtpStreamManagementDisabledThroughOperatingMode.bind(this));\n            this.streamManagements.push(rtp);\n        }\n        if (!this.legacyMode && this.streamingOptions.audio) {\n            // In theory the Microphone Service is a necessity. In practice, it's not. lol.\n            // So we just add it if the user wants to support audio\n            this.microphoneService = new Service_1.Service.Microphone(\"\", \"\");\n            this.microphoneService.setCharacteristic(Characteristic_1.Characteristic.Volume, this.microphoneVolume);\n            if (this.streamingOptions.audio.twoWayAudio) {\n                this.speakerService = new Service_1.Service.Speaker(\"\", \"\");\n                this.speakerService.setCharacteristic(Characteristic_1.Characteristic.Volume, this.speakerVolume);\n            }\n        }\n        if (this.recording) {\n            this.recordingManagement = new camera_1.RecordingManagement(this.recording.options, this.recording.delegate, this.retrieveEventTriggerOptions());\n        }\n        if ((_a = this.sensorOptions) === null || _a === void 0 ? void 0 : _a.motion) {\n            if (typeof this.sensorOptions.motion === \"boolean\") {\n                this.motionService = new Service_1.Service.MotionSensor(\"\", \"\");\n            }\n            else {\n                this.motionService = this.sensorOptions.motion;\n                this.motionServiceExternallySupplied = true;\n            }\n            this.motionService.setCharacteristic(Characteristic_1.Characteristic.StatusActive, true);\n            (_b = this.recordingManagement) === null || _b === void 0 ? void 0 : _b.recordingManagementService.addLinkedService(this.motionService);\n        }\n        if ((_c = this.sensorOptions) === null || _c === void 0 ? void 0 : _c.occupancy) {\n            if (typeof this.sensorOptions.occupancy === \"boolean\") {\n                this.occupancyService = new Service_1.Service.OccupancySensor(\"\", \"\");\n            }\n            else {\n                this.occupancyService = this.sensorOptions.occupancy;\n                this.occupancyServiceExternallySupplied = true;\n            }\n            this.occupancyService.setCharacteristic(Characteristic_1.Characteristic.StatusActive, true);\n            (_d = this.recordingManagement) === null || _d === void 0 ? void 0 : _d.recordingManagementService.addLinkedService(this.occupancyService);\n        }\n        var serviceMap = {\n            microphone: this.microphoneService,\n            speaker: this.speakerService,\n            motionService: !this.motionServiceExternallySupplied ? this.motionService : undefined,\n            occupancyService: !this.occupancyServiceExternallySupplied ? this.occupancyService : undefined,\n        };\n        if (this.recordingManagement) {\n            serviceMap.cameraEventRecordingManagement = this.recordingManagement.recordingManagementService;\n            serviceMap.cameraOperatingMode = this.recordingManagement.operatingModeService;\n            serviceMap.dataStreamTransportManagement = this.recordingManagement.dataStreamManagement.getService();\n        }\n        this.streamManagements.forEach(function (management, index) {\n            serviceMap[CameraController.STREAM_MANAGEMENT + index] = management.getService();\n        });\n        this.recording = undefined;\n        this.sensorOptions = undefined;\n        return serviceMap;\n    };\n    /**\n     * @private\n     */\n    CameraController.prototype.initWithServices = function (serviceMap) {\n        var result = this._initWithServices(serviceMap);\n        if (result.updated) { // serviceMap must only be returned if anything actually changed\n            return result.serviceMap;\n        }\n    };\n    CameraController.prototype._initWithServices = function (serviceMap) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        var modifiedServiceMap = false;\n        // eslint-disable-next-line no-constant-condition\n        for (var i = 0; true; i++) {\n            var streamManagementService = serviceMap[CameraController.STREAM_MANAGEMENT + i];\n            if (i < this.streamCount) {\n                var operatingModeClosure = this.rtpStreamManagementDisabledThroughOperatingMode.bind(this);\n                if (streamManagementService) { // normal init\n                    this.streamManagements.push(new camera_1.RTPStreamManagement(i, this.streamingOptions, this.delegate, streamManagementService, operatingModeClosure));\n                }\n                else { // stream count got bigger, we need to create a new service\n                    var management = new camera_1.RTPStreamManagement(i, this.streamingOptions, this.delegate, undefined, operatingModeClosure);\n                    this.streamManagements.push(management);\n                    serviceMap[CameraController.STREAM_MANAGEMENT + i] = management.getService();\n                    modifiedServiceMap = true;\n                }\n            }\n            else {\n                if (streamManagementService) { // stream count got reduced, we need to remove old service\n                    delete serviceMap[CameraController.STREAM_MANAGEMENT + i];\n                    modifiedServiceMap = true;\n                }\n                else {\n                    break; // we finished counting, and we got no saved service; we are finished\n                }\n            }\n        }\n        // MICROPHONE\n        if (!this.legacyMode && this.streamingOptions.audio) { // microphone should be present\n            if (serviceMap.microphone) {\n                this.microphoneService = serviceMap.microphone;\n            }\n            else {\n                // microphone wasn't created yet => create a new one\n                this.microphoneService = new Service_1.Service.Microphone(\"\", \"\");\n                this.microphoneService.setCharacteristic(Characteristic_1.Characteristic.Volume, this.microphoneVolume);\n                serviceMap.microphone = this.microphoneService;\n                modifiedServiceMap = true;\n            }\n        }\n        else if (serviceMap.microphone) { // microphone service supplied, though settings seemed to have changed\n            // we need to remove it\n            delete serviceMap.microphone;\n            modifiedServiceMap = true;\n        }\n        // SPEAKER\n        if (!this.legacyMode && ((_a = this.streamingOptions.audio) === null || _a === void 0 ? void 0 : _a.twoWayAudio)) { // speaker should be present\n            if (serviceMap.speaker) {\n                this.speakerService = serviceMap.speaker;\n            }\n            else {\n                // speaker wasn't created yet => create a new one\n                this.speakerService = new Service_1.Service.Speaker(\"\", \"\");\n                this.speakerService.setCharacteristic(Characteristic_1.Characteristic.Volume, this.speakerVolume);\n                serviceMap.speaker = this.speakerService;\n                modifiedServiceMap = true;\n            }\n        }\n        else if (serviceMap.speaker) { // speaker service supplied, though settings seemed to have changed\n            // we need to remove it\n            delete serviceMap.speaker;\n            modifiedServiceMap = true;\n        }\n        // RECORDING\n        if (this.recording) {\n            var eventTriggers = this.retrieveEventTriggerOptions();\n            // RECORDING MANAGEMENT\n            if (serviceMap.cameraEventRecordingManagement && serviceMap.cameraOperatingMode && serviceMap.dataStreamTransportManagement) {\n                this.recordingManagement = new camera_1.RecordingManagement(this.recording.options, this.recording.delegate, eventTriggers, {\n                    recordingManagement: serviceMap.cameraEventRecordingManagement,\n                    operatingMode: serviceMap.cameraOperatingMode,\n                    dataStreamManagement: new datastream_1.DataStreamManagement(serviceMap.dataStreamTransportManagement),\n                });\n            }\n            else {\n                this.recordingManagement = new camera_1.RecordingManagement(this.recording.options, this.recording.delegate, eventTriggers);\n                serviceMap.cameraEventRecordingManagement = this.recordingManagement.recordingManagementService;\n                serviceMap.cameraOperatingMode = this.recordingManagement.operatingModeService;\n                serviceMap.dataStreamTransportManagement = this.recordingManagement.dataStreamManagement.getService();\n                modifiedServiceMap = true;\n            }\n        }\n        else {\n            if (serviceMap.cameraEventRecordingManagement) {\n                delete serviceMap.cameraEventRecordingManagement;\n                modifiedServiceMap = true;\n            }\n            if (serviceMap.cameraOperatingMode) {\n                delete serviceMap.cameraOperatingMode;\n                modifiedServiceMap = true;\n            }\n            if (serviceMap.dataStreamTransportManagement) {\n                delete serviceMap.dataStreamTransportManagement;\n                modifiedServiceMap = true;\n            }\n        }\n        // MOTION SENSOR\n        if ((_b = this.sensorOptions) === null || _b === void 0 ? void 0 : _b.motion) {\n            if (typeof this.sensorOptions.motion === \"boolean\") {\n                if (serviceMap.motionService) {\n                    this.motionService = serviceMap.motionService;\n                }\n                else {\n                    // it could be the case that we previously had a manually supplied motion service\n                    // at this point we can't remove the iid from the list of linked services from the recording management!\n                    this.motionService = new Service_1.Service.MotionSensor(\"\", \"\");\n                }\n            }\n            else {\n                this.motionService = this.sensorOptions.motion;\n                this.motionServiceExternallySupplied = true;\n                if (serviceMap.motionService) { // motion service previously supplied as bool option\n                    (_c = this.recordingManagement) === null || _c === void 0 ? void 0 : _c.recordingManagementService.removeLinkedService(serviceMap.motionService);\n                    delete serviceMap.motionService;\n                    modifiedServiceMap = true;\n                }\n            }\n            this.motionService.setCharacteristic(Characteristic_1.Characteristic.StatusActive, true);\n            (_d = this.recordingManagement) === null || _d === void 0 ? void 0 : _d.recordingManagementService.addLinkedService(this.motionService);\n        }\n        else {\n            if (serviceMap.motionService) {\n                (_e = this.recordingManagement) === null || _e === void 0 ? void 0 : _e.recordingManagementService.removeLinkedService(serviceMap.motionService);\n                delete serviceMap.motionService;\n                modifiedServiceMap = true;\n            }\n        }\n        // OCCUPANCY SENSOR\n        if ((_f = this.sensorOptions) === null || _f === void 0 ? void 0 : _f.occupancy) {\n            if (typeof this.sensorOptions.occupancy === \"boolean\") {\n                if (serviceMap.occupancyService) {\n                    this.occupancyService = serviceMap.occupancyService;\n                }\n                else {\n                    // it could be the case that we previously had a manually supplied occupancy service\n                    // at this point we can't remove the iid from the list of linked services from the recording management!\n                    this.occupancyService = new Service_1.Service.OccupancySensor(\"\", \"\");\n                }\n            }\n            else {\n                this.occupancyService = this.sensorOptions.occupancy;\n                this.occupancyServiceExternallySupplied = true;\n                if (serviceMap.occupancyService) { // occupancy service previously supplied as bool option\n                    (_g = this.recordingManagement) === null || _g === void 0 ? void 0 : _g.recordingManagementService.removeLinkedService(serviceMap.occupancyService);\n                    delete serviceMap.occupancyService;\n                    modifiedServiceMap = true;\n                }\n            }\n            this.occupancyService.setCharacteristic(Characteristic_1.Characteristic.StatusActive, true);\n            (_h = this.recordingManagement) === null || _h === void 0 ? void 0 : _h.recordingManagementService.addLinkedService(this.occupancyService);\n        }\n        else {\n            if (serviceMap.occupancyService) {\n                (_j = this.recordingManagement) === null || _j === void 0 ? void 0 : _j.recordingManagementService.removeLinkedService(serviceMap.occupancyService);\n                delete serviceMap.occupancyService;\n                modifiedServiceMap = true;\n            }\n        }\n        if (this.migrateFromDoorbell(serviceMap)) {\n            modifiedServiceMap = true;\n        }\n        this.recording = undefined;\n        this.sensorOptions = undefined;\n        return {\n            serviceMap: serviceMap,\n            updated: modifiedServiceMap,\n        };\n    };\n    // overwritten in DoorbellController (to avoid cyclic dependencies, I hate typescript for that)\n    CameraController.prototype.migrateFromDoorbell = function (serviceMap) {\n        if (serviceMap.doorbell) { // See NOTICE in DoorbellController\n            delete serviceMap.doorbell;\n            return true;\n        }\n        return false;\n    };\n    CameraController.prototype.retrieveEventTriggerOptions = function () {\n        var e_1, _a;\n        var _b;\n        if (!this.recording) {\n            return new Set();\n        }\n        var triggerOptions = new Set();\n        if (this.recording.options.overrideEventTriggerOptions) {\n            try {\n                for (var _c = tslib_1.__values(this.recording.options.overrideEventTriggerOptions), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var option = _d.value;\n                    triggerOptions.add(option);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        if ((_b = this.sensorOptions) === null || _b === void 0 ? void 0 : _b.motion) {\n            triggerOptions.add(1 /* EventTriggerOption.MOTION */);\n        }\n        // this method is overwritten by the `DoorbellController` to automatically configure EventTriggerOption.DOORBELL\n        return triggerOptions;\n    };\n    /**\n     * @private\n     */\n    CameraController.prototype.configureServices = function () {\n        var _this = this;\n        var _a, _b;\n        if (this.microphoneService) {\n            this.microphoneService.getCharacteristic(Characteristic_1.Characteristic.Mute)\n                .on(\"get\" /* CharacteristicEventTypes.GET */, function (callback) {\n                callback(undefined, _this.microphoneMuted);\n            })\n                .on(\"set\" /* CharacteristicEventTypes.SET */, function (value, callback) {\n                _this.microphoneMuted = value;\n                callback();\n                _this.emitMicrophoneChange();\n            });\n            this.microphoneService.getCharacteristic(Characteristic_1.Characteristic.Volume)\n                .on(\"get\" /* CharacteristicEventTypes.GET */, function (callback) {\n                callback(undefined, _this.microphoneVolume);\n            })\n                .on(\"set\" /* CharacteristicEventTypes.SET */, function (value, callback) {\n                _this.microphoneVolume = value;\n                callback();\n                _this.emitMicrophoneChange();\n            });\n        }\n        if (this.speakerService) {\n            this.speakerService.getCharacteristic(Characteristic_1.Characteristic.Mute)\n                .on(\"get\" /* CharacteristicEventTypes.GET */, function (callback) {\n                callback(undefined, _this.speakerMuted);\n            })\n                .on(\"set\" /* CharacteristicEventTypes.SET */, function (value, callback) {\n                _this.speakerMuted = value;\n                callback();\n                _this.emitSpeakerChange();\n            });\n            this.speakerService.getCharacteristic(Characteristic_1.Characteristic.Volume)\n                .on(\"get\" /* CharacteristicEventTypes.GET */, function (callback) {\n                callback(undefined, _this.speakerVolume);\n            })\n                .on(\"set\" /* CharacteristicEventTypes.SET */, function (value, callback) {\n                _this.speakerVolume = value;\n                callback();\n                _this.emitSpeakerChange();\n            });\n        }\n        // make the sensor services available to the RecordingManagement.\n        if (this.motionService) {\n            (_a = this.recordingManagement) === null || _a === void 0 ? void 0 : _a.sensorServices.push(this.motionService);\n        }\n        if (this.occupancyService) {\n            (_b = this.recordingManagement) === null || _b === void 0 ? void 0 : _b.sensorServices.push(this.occupancyService);\n        }\n    };\n    CameraController.prototype.rtpStreamManagementDisabledThroughOperatingMode = function () {\n        return this.recordingManagement\n            ? !this.recordingManagement.operatingModeService.getCharacteristic(Characteristic_1.Characteristic.HomeKitCameraActive).value\n            : false;\n    };\n    /**\n     * @private\n     */\n    CameraController.prototype.handleControllerRemoved = function () {\n        var e_2, _a;\n        var _b;\n        this.handleFactoryReset();\n        try {\n            for (var _c = tslib_1.__values(this.streamManagements), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var management = _d.value;\n                management.destroy();\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        this.streamManagements.splice(0, this.streamManagements.length);\n        this.microphoneService = undefined;\n        this.speakerService = undefined;\n        (_b = this.recordingManagement) === null || _b === void 0 ? void 0 : _b.destroy();\n        this.recordingManagement = undefined;\n        this.removeAllListeners();\n    };\n    /**\n     * @private\n     */\n    CameraController.prototype.handleFactoryReset = function () {\n        var _a;\n        this.streamManagements.forEach(function (management) { return management.handleFactoryReset(); });\n        (_a = this.recordingManagement) === null || _a === void 0 ? void 0 : _a.handleFactoryReset();\n        this.microphoneMuted = false;\n        this.microphoneVolume = 100;\n        this.speakerMuted = false;\n        this.speakerVolume = 100;\n    };\n    /**\n     * @private\n     */\n    CameraController.prototype.serialize = function () {\n        var e_3, _a;\n        var _b;\n        var streamManagementStates = [];\n        try {\n            for (var _c = tslib_1.__values(this.streamManagements), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var management = _d.value;\n                var serializedState = management.serialize();\n                if (serializedState) {\n                    streamManagementStates.push(serializedState);\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return {\n            streamManagements: streamManagementStates,\n            recordingManagement: (_b = this.recordingManagement) === null || _b === void 0 ? void 0 : _b.serialize(),\n        };\n    };\n    /**\n     * @private\n     */\n    CameraController.prototype.deserialize = function (serialized) {\n        var e_4, _a, e_5, _b;\n        var _c;\n        try {\n            for (var _d = tslib_1.__values(serialized.streamManagements), _e = _d.next(); !_e.done; _e = _d.next()) {\n                var streamManagementState = _e.value;\n                var streamManagement = this.streamManagements[streamManagementState.id];\n                if (streamManagement) {\n                    streamManagement.deserialize(streamManagementState);\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        if (serialized.recordingManagement) {\n            if (this.recordingManagement) {\n                this.recordingManagement.deserialize(serialized.recordingManagement);\n            }\n            else {\n                try {\n                    // Active characteristic cannot be controlled if removing HSV, ensure they are all active!\n                    for (var _f = tslib_1.__values(this.streamManagements), _g = _f.next(); !_g.done; _g = _f.next()) {\n                        var streamManagement = _g.value;\n                        streamManagement.service.updateCharacteristic(Characteristic_1.Characteristic.Active, true);\n                    }\n                }\n                catch (e_5_1) { e_5 = { error: e_5_1 }; }\n                finally {\n                    try {\n                        if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n                    }\n                    finally { if (e_5) throw e_5.error; }\n                }\n                (_c = this.stateChangeDelegate) === null || _c === void 0 ? void 0 : _c.call(this);\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    CameraController.prototype.setupStateChangeDelegate = function (delegate) {\n        var e_6, _a;\n        var _b;\n        this.stateChangeDelegate = delegate;\n        try {\n            for (var _c = tslib_1.__values(this.streamManagements), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var streamManagement = _d.value;\n                streamManagement.setupStateChangeDelegate(delegate);\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n        (_b = this.recordingManagement) === null || _b === void 0 ? void 0 : _b.setupStateChangeDelegate(delegate);\n    };\n    /**\n     * @private\n     */\n    CameraController.prototype.handleSnapshotRequest = function (height, width, accessoryName, reason) {\n        var _this = this;\n        // first step is to verify that the reason is applicable to our current policy\n        var streamingDisabled = this.streamManagements\n            .map(function (management) { return !management.getService().getCharacteristic(Characteristic_1.Characteristic.Active).value; })\n            .reduce(function (previousValue, currentValue) { return previousValue && currentValue; });\n        if (streamingDisabled) {\n            debug(\"[%s] Rejecting snapshot as streaming is disabled.\", accessoryName);\n            return Promise.reject(-70412 /* HAPStatus.NOT_ALLOWED_IN_CURRENT_STATE */);\n        }\n        if (this.recordingManagement) {\n            var operatingModeService = this.recordingManagement.operatingModeService;\n            if (!operatingModeService.getCharacteristic(Characteristic_1.Characteristic.HomeKitCameraActive).value) {\n                debug(\"[%s] Rejecting snapshot as HomeKit camera is disabled.\", accessoryName);\n                return Promise.reject(-70412 /* HAPStatus.NOT_ALLOWED_IN_CURRENT_STATE */);\n            }\n            var eventSnapshotsActive = operatingModeService\n                .getCharacteristic(Characteristic_1.Characteristic.EventSnapshotsActive)\n                .value;\n            if (!eventSnapshotsActive) {\n                if (reason == null) {\n                    debug(\"[%s] Rejecting snapshot as reason is required due to disabled event snapshots.\", accessoryName);\n                    return Promise.reject(-70401 /* HAPStatus.INSUFFICIENT_PRIVILEGES */);\n                }\n                else if (reason === 1 /* ResourceRequestReason.EVENT */) {\n                    debug(\"[%s] Rejecting snapshot as even snapshots are disabled.\", accessoryName);\n                    return Promise.reject(-70412 /* HAPStatus.NOT_ALLOWED_IN_CURRENT_STATE */);\n                }\n            }\n            var periodicSnapshotsActive = operatingModeService\n                .getCharacteristic(Characteristic_1.Characteristic.PeriodicSnapshotsActive)\n                .value;\n            if (!periodicSnapshotsActive) {\n                if (reason == null) {\n                    debug(\"[%s] Rejecting snapshot as reason is required due to disabled periodic snapshots.\", accessoryName);\n                    return Promise.reject(-70401 /* HAPStatus.INSUFFICIENT_PRIVILEGES */);\n                }\n                else if (reason === 0 /* ResourceRequestReason.PERIODIC */) {\n                    debug(\"[%s] Rejecting snapshot as periodic snapshots are disabled.\", accessoryName);\n                    return Promise.reject(-70412 /* HAPStatus.NOT_ALLOWED_IN_CURRENT_STATE */);\n                }\n            }\n        }\n        // now do the actual snapshot request.\n        return new Promise(function (resolve, reject) {\n            // TODO test and make timeouts configurable!\n            var timeout = setTimeout(function () {\n                console.warn(\"[\".concat(accessoryName, \"] The image snapshot handler for the given accessory is slow to respond! See https://homebridge.io/w/JtMGR for more info.\"));\n                timeout = setTimeout(function () {\n                    timeout = undefined;\n                    console.warn(\"[\".concat(accessoryName, \"] The image snapshot handler for the given accessory didn't respond at all! See https://homebridge.io/w/JtMGR for more info.\"));\n                    reject(-70408 /* HAPStatus.OPERATION_TIMED_OUT */);\n                }, 17000);\n                timeout.unref();\n            }, 5000);\n            timeout.unref();\n            try {\n                _this.delegate.handleSnapshotRequest({\n                    height: height,\n                    width: width,\n                    reason: reason,\n                }, function (error, buffer) {\n                    if (!timeout) {\n                        return;\n                    }\n                    else {\n                        clearTimeout(timeout);\n                        timeout = undefined;\n                    }\n                    if (error) {\n                        if (typeof error === \"number\") {\n                            reject(error);\n                        }\n                        else {\n                            debug(\"[%s] Error getting snapshot: %s\", accessoryName, error.stack);\n                            reject(-70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */);\n                        }\n                        return;\n                    }\n                    if (!buffer || buffer.length === 0) {\n                        console.warn(\"[\".concat(accessoryName, \"] Snapshot request handler provided empty image buffer!\"));\n                        reject(-70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */);\n                    }\n                    else {\n                        resolve(buffer);\n                    }\n                });\n            }\n            catch (error) {\n                if (!timeout) {\n                    return;\n                }\n                else {\n                    clearTimeout(timeout);\n                    timeout = undefined;\n                }\n                console.warn(\"[\".concat(accessoryName, \"] Unhandled error thrown inside snapshot request handler: \").concat(error.stack));\n                reject(error instanceof hapStatusError_1.HapStatusError ? error.hapStatus : -70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */);\n            }\n        });\n    };\n    /**\n     * @private\n     */\n    CameraController.prototype.handleCloseConnection = function (sessionID) {\n        if (this.delegate instanceof camera_1.LegacyCameraSourceAdapter) {\n            this.delegate.forwardCloseConnection(sessionID);\n        }\n    };\n    CameraController.STREAM_MANAGEMENT = \"streamManagement\"; // key to index all RTPStreamManagement services\n    return CameraController;\n}(events_1.EventEmitter));\nexports.CameraController = CameraController;\n//# sourceMappingURL=CameraController.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isSerializableController = exports.DefaultControllerType = void 0;\n/**\n * @group Controller API\n */\nvar DefaultControllerType;\n(function (DefaultControllerType) {\n    DefaultControllerType[\"CAMERA\"] = \"camera\";\n    DefaultControllerType[\"REMOTE\"] = \"remote\";\n    DefaultControllerType[\"TV\"] = \"tv\";\n    DefaultControllerType[\"ROUTER\"] = \"router\";\n    DefaultControllerType[\"LOCK\"] = \"lock\";\n    DefaultControllerType[\"CHARACTERISTIC_TRANSITION\"] = \"characteristic-transition\";\n})(DefaultControllerType || (exports.DefaultControllerType = DefaultControllerType = {}));\n/**\n * @param controller\n * @group Controller API\n */\nfunction isSerializableController(controller) {\n    return \"serialize\" in controller && \"deserialize\" in controller && \"setupStateChangeDelegate\" in controller;\n}\nexports.isSerializableController = isSerializableController;\n//# sourceMappingURL=Controller.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DoorbellController = void 0;\nvar tslib_1 = require(\"tslib\");\nvar Characteristic_1 = require(\"../Characteristic\");\nvar Service_1 = require(\"../Service\");\nvar CameraController_1 = require(\"./CameraController\");\n/**\n * The `DoorbellController` to efficiently manage doorbell implementations with HAP-NodeJS.\n *\n * NOTICE: We subclass from the {@link CameraController} here and deliberately do not introduce/set an\n * own/custom ControllerType for Doorbells, as Cameras and Doorbells are pretty much the same thing\n * and would collide otherwise.\n * As the possibility exists, both the CameraController and DoorbellController are written to support migration\n * from one to another. Meaning a serialized CameraController can be initialized as a DoorbellController\n * (on startup in {@link initWithServices}) and vice versa.\n *\n * @group Doorbell\n */\nvar DoorbellController = /** @class */ (function (_super) {\n    tslib_1.__extends(DoorbellController, _super);\n    /**\n     * Initializes a new `DoorbellController`.\n     * @param options - The {@link CameraControllerOptions} and optional {@link DoorbellOptions}.\n     */\n    function DoorbellController(options) {\n        var _this = _super.call(this, options) || this;\n        _this.doorbellServiceExternallySupplied = false;\n        _this.doorbellOptions = {\n            name: options.name,\n            externalDoorbellService: options.externalDoorbellService,\n        };\n        return _this;\n    }\n    /**\n     * Call this method to signal a doorbell button press.\n     */\n    DoorbellController.prototype.ringDoorbell = function () {\n        this.doorbellService.updateCharacteristic(Characteristic_1.Characteristic.ProgrammableSwitchEvent, Characteristic_1.Characteristic.ProgrammableSwitchEvent.SINGLE_PRESS);\n    };\n    DoorbellController.prototype.constructServices = function () {\n        var _a, _b, _c;\n        if ((_a = this.doorbellOptions) === null || _a === void 0 ? void 0 : _a.externalDoorbellService) {\n            this.doorbellService = this.doorbellOptions.externalDoorbellService;\n            this.doorbellServiceExternallySupplied = true;\n        }\n        else {\n            this.doorbellService = new Service_1.Service.Doorbell((_c = (_b = this.doorbellOptions) === null || _b === void 0 ? void 0 : _b.name) !== null && _c !== void 0 ? _c : \"\", \"\");\n        }\n        this.doorbellService.setPrimaryService();\n        var serviceMap = _super.prototype.constructServices.call(this);\n        if (!this.doorbellServiceExternallySupplied) {\n            serviceMap.doorbell = this.doorbellService;\n        }\n        return serviceMap;\n    };\n    DoorbellController.prototype.initWithServices = function (serviceMap) {\n        var _a, _b, _c;\n        var result = _super.prototype._initWithServices.call(this, serviceMap);\n        if ((_a = this.doorbellOptions) === null || _a === void 0 ? void 0 : _a.externalDoorbellService) {\n            this.doorbellService = this.doorbellOptions.externalDoorbellService;\n            this.doorbellServiceExternallySupplied = true;\n            if (result.serviceMap.doorbell) {\n                delete result.serviceMap.doorbell;\n                result.updated = true;\n            }\n        }\n        else {\n            this.doorbellService = result.serviceMap.doorbell;\n            if (!this.doorbellService) { // see NOTICE above\n                this.doorbellService = new Service_1.Service.Doorbell((_c = (_b = this.doorbellOptions) === null || _b === void 0 ? void 0 : _b.name) !== null && _c !== void 0 ? _c : \"\", \"\");\n                result.serviceMap.doorbell = this.doorbellService;\n                result.updated = true;\n            }\n        }\n        this.doorbellService.setPrimaryService();\n        if (result.updated) {\n            return result.serviceMap;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DoorbellController.prototype.migrateFromDoorbell = function (serviceMap) {\n        return false;\n    };\n    DoorbellController.prototype.retrieveEventTriggerOptions = function () {\n        var result = _super.prototype.retrieveEventTriggerOptions.call(this);\n        result.add(2 /* EventTriggerOption.DOORBELL */);\n        return result;\n    };\n    DoorbellController.prototype.handleControllerRemoved = function () {\n        _super.prototype.handleControllerRemoved.call(this);\n        this.doorbellService = undefined;\n    };\n    DoorbellController.prototype.configureServices = function () {\n        _super.prototype.configureServices.call(this);\n        this.doorbellService.getCharacteristic(Characteristic_1.Characteristic.ProgrammableSwitchEvent)\n            .onGet(function () { return null; }); // a value of null represent nothing is pressed\n        this.doorbellOptions = undefined;\n    };\n    return DoorbellController;\n}(CameraController_1.CameraController));\nexports.DoorbellController = DoorbellController;\n//# sourceMappingURL=DoorbellController.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SiriAudioSession = exports.SiriAudioSessionEvents = exports.HomeKitRemoteController = exports.RemoteController = exports.RemoteControllerEvents = exports.TargetUpdates = exports.AudioCodecTypes = exports.ButtonState = exports.TargetCategory = exports.ButtonType = void 0;\nvar tslib_1 = require(\"tslib\");\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar events_1 = require(\"events\");\nvar Characteristic_1 = require(\"../Characteristic\");\nvar datastream_1 = require(\"../datastream\");\nvar Service_1 = require(\"../Service\");\nvar tlv = tslib_1.__importStar(require(\"../util/tlv\"));\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:Remote:Controller\");\nvar TargetControlCommands;\n(function (TargetControlCommands) {\n    TargetControlCommands[TargetControlCommands[\"MAXIMUM_TARGETS\"] = 1] = \"MAXIMUM_TARGETS\";\n    TargetControlCommands[TargetControlCommands[\"TICKS_PER_SECOND\"] = 2] = \"TICKS_PER_SECOND\";\n    TargetControlCommands[TargetControlCommands[\"SUPPORTED_BUTTON_CONFIGURATION\"] = 3] = \"SUPPORTED_BUTTON_CONFIGURATION\";\n    TargetControlCommands[TargetControlCommands[\"TYPE\"] = 4] = \"TYPE\";\n})(TargetControlCommands || (TargetControlCommands = {}));\nvar SupportedButtonConfigurationTypes;\n(function (SupportedButtonConfigurationTypes) {\n    SupportedButtonConfigurationTypes[SupportedButtonConfigurationTypes[\"BUTTON_ID\"] = 1] = \"BUTTON_ID\";\n    SupportedButtonConfigurationTypes[SupportedButtonConfigurationTypes[\"BUTTON_TYPE\"] = 2] = \"BUTTON_TYPE\";\n})(SupportedButtonConfigurationTypes || (SupportedButtonConfigurationTypes = {}));\n/**\n * @group Apple TV Remote\n */\nvar ButtonType;\n(function (ButtonType) {\n    // noinspection JSUnusedGlobalSymbols\n    ButtonType[ButtonType[\"UNDEFINED\"] = 0] = \"UNDEFINED\";\n    ButtonType[ButtonType[\"MENU\"] = 1] = \"MENU\";\n    ButtonType[ButtonType[\"PLAY_PAUSE\"] = 2] = \"PLAY_PAUSE\";\n    ButtonType[ButtonType[\"TV_HOME\"] = 3] = \"TV_HOME\";\n    ButtonType[ButtonType[\"SELECT\"] = 4] = \"SELECT\";\n    ButtonType[ButtonType[\"ARROW_UP\"] = 5] = \"ARROW_UP\";\n    ButtonType[ButtonType[\"ARROW_RIGHT\"] = 6] = \"ARROW_RIGHT\";\n    ButtonType[ButtonType[\"ARROW_DOWN\"] = 7] = \"ARROW_DOWN\";\n    ButtonType[ButtonType[\"ARROW_LEFT\"] = 8] = \"ARROW_LEFT\";\n    ButtonType[ButtonType[\"VOLUME_UP\"] = 9] = \"VOLUME_UP\";\n    ButtonType[ButtonType[\"VOLUME_DOWN\"] = 10] = \"VOLUME_DOWN\";\n    ButtonType[ButtonType[\"SIRI\"] = 11] = \"SIRI\";\n    ButtonType[ButtonType[\"POWER\"] = 12] = \"POWER\";\n    ButtonType[ButtonType[\"GENERIC\"] = 13] = \"GENERIC\";\n})(ButtonType || (exports.ButtonType = ButtonType = {}));\nvar TargetControlList;\n(function (TargetControlList) {\n    TargetControlList[TargetControlList[\"OPERATION\"] = 1] = \"OPERATION\";\n    TargetControlList[TargetControlList[\"TARGET_CONFIGURATION\"] = 2] = \"TARGET_CONFIGURATION\";\n})(TargetControlList || (TargetControlList = {}));\nvar Operation;\n(function (Operation) {\n    // noinspection JSUnusedGlobalSymbols\n    Operation[Operation[\"UNDEFINED\"] = 0] = \"UNDEFINED\";\n    Operation[Operation[\"LIST\"] = 1] = \"LIST\";\n    Operation[Operation[\"ADD\"] = 2] = \"ADD\";\n    Operation[Operation[\"REMOVE\"] = 3] = \"REMOVE\";\n    Operation[Operation[\"RESET\"] = 4] = \"RESET\";\n    Operation[Operation[\"UPDATE\"] = 5] = \"UPDATE\";\n})(Operation || (Operation = {}));\nvar TargetConfigurationTypes;\n(function (TargetConfigurationTypes) {\n    TargetConfigurationTypes[TargetConfigurationTypes[\"TARGET_IDENTIFIER\"] = 1] = \"TARGET_IDENTIFIER\";\n    TargetConfigurationTypes[TargetConfigurationTypes[\"TARGET_NAME\"] = 2] = \"TARGET_NAME\";\n    TargetConfigurationTypes[TargetConfigurationTypes[\"TARGET_CATEGORY\"] = 3] = \"TARGET_CATEGORY\";\n    TargetConfigurationTypes[TargetConfigurationTypes[\"BUTTON_CONFIGURATION\"] = 4] = \"BUTTON_CONFIGURATION\";\n})(TargetConfigurationTypes || (TargetConfigurationTypes = {}));\n/**\n * @group Apple TV Remote\n */\nvar TargetCategory;\n(function (TargetCategory) {\n    // noinspection JSUnusedGlobalSymbols\n    TargetCategory[TargetCategory[\"UNDEFINED\"] = 0] = \"UNDEFINED\";\n    TargetCategory[TargetCategory[\"APPLE_TV\"] = 24] = \"APPLE_TV\";\n})(TargetCategory || (exports.TargetCategory = TargetCategory = {}));\nvar ButtonConfigurationTypes;\n(function (ButtonConfigurationTypes) {\n    ButtonConfigurationTypes[ButtonConfigurationTypes[\"BUTTON_ID\"] = 1] = \"BUTTON_ID\";\n    ButtonConfigurationTypes[ButtonConfigurationTypes[\"BUTTON_TYPE\"] = 2] = \"BUTTON_TYPE\";\n    ButtonConfigurationTypes[ButtonConfigurationTypes[\"BUTTON_NAME\"] = 3] = \"BUTTON_NAME\";\n})(ButtonConfigurationTypes || (ButtonConfigurationTypes = {}));\nvar ButtonEvent;\n(function (ButtonEvent) {\n    ButtonEvent[ButtonEvent[\"BUTTON_ID\"] = 1] = \"BUTTON_ID\";\n    ButtonEvent[ButtonEvent[\"BUTTON_STATE\"] = 2] = \"BUTTON_STATE\";\n    ButtonEvent[ButtonEvent[\"TIMESTAMP\"] = 3] = \"TIMESTAMP\";\n    ButtonEvent[ButtonEvent[\"ACTIVE_IDENTIFIER\"] = 4] = \"ACTIVE_IDENTIFIER\";\n})(ButtonEvent || (ButtonEvent = {}));\n/**\n * @group Apple TV Remote\n */\nvar ButtonState;\n(function (ButtonState) {\n    ButtonState[ButtonState[\"UP\"] = 0] = \"UP\";\n    ButtonState[ButtonState[\"DOWN\"] = 1] = \"DOWN\";\n})(ButtonState || (exports.ButtonState = ButtonState = {}));\nvar SelectedAudioInputStreamConfigurationTypes;\n(function (SelectedAudioInputStreamConfigurationTypes) {\n    SelectedAudioInputStreamConfigurationTypes[SelectedAudioInputStreamConfigurationTypes[\"SELECTED_AUDIO_INPUT_STREAM_CONFIGURATION\"] = 1] = \"SELECTED_AUDIO_INPUT_STREAM_CONFIGURATION\";\n})(SelectedAudioInputStreamConfigurationTypes || (SelectedAudioInputStreamConfigurationTypes = {}));\n// ----------\nvar SupportedAudioStreamConfigurationTypes;\n(function (SupportedAudioStreamConfigurationTypes) {\n    // noinspection JSUnusedGlobalSymbols\n    SupportedAudioStreamConfigurationTypes[SupportedAudioStreamConfigurationTypes[\"AUDIO_CODEC_CONFIGURATION\"] = 1] = \"AUDIO_CODEC_CONFIGURATION\";\n    SupportedAudioStreamConfigurationTypes[SupportedAudioStreamConfigurationTypes[\"COMFORT_NOISE_SUPPORT\"] = 2] = \"COMFORT_NOISE_SUPPORT\";\n})(SupportedAudioStreamConfigurationTypes || (SupportedAudioStreamConfigurationTypes = {}));\nvar AudioCodecConfigurationTypes;\n(function (AudioCodecConfigurationTypes) {\n    AudioCodecConfigurationTypes[AudioCodecConfigurationTypes[\"CODEC_TYPE\"] = 1] = \"CODEC_TYPE\";\n    AudioCodecConfigurationTypes[AudioCodecConfigurationTypes[\"CODEC_PARAMETERS\"] = 2] = \"CODEC_PARAMETERS\";\n})(AudioCodecConfigurationTypes || (AudioCodecConfigurationTypes = {}));\n/**\n * @group Camera\n */\nvar AudioCodecTypes;\n(function (AudioCodecTypes) {\n    // noinspection JSUnusedGlobalSymbols\n    AudioCodecTypes[AudioCodecTypes[\"PCMU\"] = 0] = \"PCMU\";\n    AudioCodecTypes[AudioCodecTypes[\"PCMA\"] = 1] = \"PCMA\";\n    AudioCodecTypes[AudioCodecTypes[\"AAC_ELD\"] = 2] = \"AAC_ELD\";\n    AudioCodecTypes[AudioCodecTypes[\"OPUS\"] = 3] = \"OPUS\";\n    AudioCodecTypes[AudioCodecTypes[\"MSBC\"] = 4] = \"MSBC\";\n    AudioCodecTypes[AudioCodecTypes[\"AMR\"] = 5] = \"AMR\";\n    AudioCodecTypes[AudioCodecTypes[\"AMR_WB\"] = 6] = \"AMR_WB\";\n})(AudioCodecTypes || (exports.AudioCodecTypes = AudioCodecTypes = {}));\nvar AudioCodecParametersTypes;\n(function (AudioCodecParametersTypes) {\n    AudioCodecParametersTypes[AudioCodecParametersTypes[\"CHANNEL\"] = 1] = \"CHANNEL\";\n    AudioCodecParametersTypes[AudioCodecParametersTypes[\"BIT_RATE\"] = 2] = \"BIT_RATE\";\n    AudioCodecParametersTypes[AudioCodecParametersTypes[\"SAMPLE_RATE\"] = 3] = \"SAMPLE_RATE\";\n    AudioCodecParametersTypes[AudioCodecParametersTypes[\"PACKET_TIME\"] = 4] = \"PACKET_TIME\"; // only present in selected audio codec parameters tlv\n})(AudioCodecParametersTypes || (AudioCodecParametersTypes = {}));\nvar SiriAudioSessionState;\n(function (SiriAudioSessionState) {\n    SiriAudioSessionState[SiriAudioSessionState[\"STARTING\"] = 0] = \"STARTING\";\n    SiriAudioSessionState[SiriAudioSessionState[\"SENDING\"] = 1] = \"SENDING\";\n    SiriAudioSessionState[SiriAudioSessionState[\"CLOSING\"] = 2] = \"CLOSING\";\n    SiriAudioSessionState[SiriAudioSessionState[\"CLOSED\"] = 3] = \"CLOSED\";\n})(SiriAudioSessionState || (SiriAudioSessionState = {}));\n/**\n * @group Apple TV Remote\n */\nvar TargetUpdates;\n(function (TargetUpdates) {\n    TargetUpdates[TargetUpdates[\"NAME\"] = 0] = \"NAME\";\n    TargetUpdates[TargetUpdates[\"CATEGORY\"] = 1] = \"CATEGORY\";\n    TargetUpdates[TargetUpdates[\"UPDATED_BUTTONS\"] = 2] = \"UPDATED_BUTTONS\";\n    TargetUpdates[TargetUpdates[\"REMOVED_BUTTONS\"] = 3] = \"REMOVED_BUTTONS\";\n})(TargetUpdates || (exports.TargetUpdates = TargetUpdates = {}));\n/**\n * @group Apple TV Remote\n */\nvar RemoteControllerEvents;\n(function (RemoteControllerEvents) {\n    /**\n     * This event is emitted when the active state of the remote has changed.\n     * active = true indicates that there is currently an Apple TV listening of button presses and audio streams.\n     */\n    RemoteControllerEvents[\"ACTIVE_CHANGE\"] = \"active-change\";\n    /**\n     * This event is emitted when the currently selected target has changed.\n     * Possible reasons for a changed active identifier: manual change via api call, first target configuration\n     * gets added, active target gets removed, accessory gets unpaired, reset request was sent.\n     * An activeIdentifier of 0 indicates that no target is selected.\n     */\n    RemoteControllerEvents[\"ACTIVE_IDENTIFIER_CHANGE\"] = \"active-identifier-change\";\n    /**\n     * This event is emitted when a new target configuration is received. As we currently do not persistently store\n     * configured targets, this will be called at every startup for every Apple TV configured in the home.\n     */\n    RemoteControllerEvents[\"TARGET_ADDED\"] = \"target-add\";\n    /**\n     * This event is emitted when an existing target was updated.\n     * The 'updates' array indicates what exactly was changed for the target.\n     */\n    RemoteControllerEvents[\"TARGET_UPDATED\"] = \"target-update\";\n    /**\n     * This event is emitted when an existing configuration for a target was removed.\n     */\n    RemoteControllerEvents[\"TARGET_REMOVED\"] = \"target-remove\";\n    /**\n     * This event is emitted when a reset of the target configuration is requested.\n     * With this event every configuration made should be reset. This event is also called\n     * when the accessory gets unpaired.\n     */\n    RemoteControllerEvents[\"TARGETS_RESET\"] = \"targets-reset\";\n})(RemoteControllerEvents || (exports.RemoteControllerEvents = RemoteControllerEvents = {}));\n/**\n * Handles everything needed to implement a fully working HomeKit remote controller.\n *\n * @group Apple TV Remote\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar RemoteController = /** @class */ (function (_super) {\n    tslib_1.__extends(RemoteController, _super);\n    /**\n     * Creates a new RemoteController.\n     * If siri voice input is supported the constructor to an SiriAudioStreamProducer needs to be supplied.\n     * Otherwise, a remote without voice support will be created.\n     *\n     * For every audio session a new SiriAudioStreamProducer will be constructed.\n     *\n     * @param audioProducerConstructor - constructor for a SiriAudioStreamProducer\n     * @param producerOptions - if supplied this argument will be supplied as third argument of the SiriAudioStreamProducer\n     *                          constructor. This should be used to supply configurations to the stream producer.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/explicit-module-boundary-types\n    function RemoteController(audioProducerConstructor, producerOptions) {\n        var _this = _super.call(this) || this;\n        _this.buttons = {}; // internal mapping of buttonId to buttonType for supported buttons\n        _this.targetConfigurations = new Map();\n        _this.targetConfigurationsString = \"\";\n        _this.lastButtonEvent = \"\";\n        _this.activeIdentifier = 0; // id of 0 means no device selected\n        _this.dataStreamConnections = new Map(); // maps targetIdentifiers to active data stream connections\n        _this.audioSupported = audioProducerConstructor !== undefined;\n        _this.audioProducerConstructor = audioProducerConstructor;\n        _this.audioProducerOptions = producerOptions;\n        var configuration = _this.constructSupportedConfiguration();\n        _this.supportedConfiguration = _this.buildTargetControlSupportedConfigurationTLV(configuration);\n        var audioConfiguration = _this.constructSupportedAudioConfiguration();\n        _this.supportedAudioConfiguration = RemoteController.buildSupportedAudioConfigurationTLV(audioConfiguration);\n        _this.selectedAudioConfiguration = {\n            codecType: 3 /* AudioCodecTypes.OPUS */,\n            parameters: {\n                channels: 1,\n                bitrate: 0 /* AudioBitrate.VARIABLE */,\n                samplerate: 1 /* AudioSamplerate.KHZ_16 */,\n                rtpTime: 20,\n            },\n        };\n        _this.selectedAudioConfigurationString = RemoteController.buildSelectedAudioConfigurationTLV({\n            audioCodecConfiguration: _this.selectedAudioConfiguration,\n        });\n        return _this;\n    }\n    /**\n     * @private\n     */\n    RemoteController.prototype.controllerId = function () {\n        return \"remote\" /* DefaultControllerType.REMOTE */;\n    };\n    /**\n     * Set a new target as active target. A value of 0 indicates that no target is selected currently.\n     *\n     * @param activeIdentifier - target identifier\n     */\n    RemoteController.prototype.setActiveIdentifier = function (activeIdentifier) {\n        var _this = this;\n        if (activeIdentifier === this.activeIdentifier) {\n            return;\n        }\n        if (activeIdentifier !== 0 && !this.targetConfigurations.has(activeIdentifier)) {\n            throw Error(\"Tried setting unconfigured targetIdentifier to active\");\n        }\n        debug(\"%d is now the active target\", activeIdentifier);\n        this.activeIdentifier = activeIdentifier;\n        this.targetControlService.getCharacteristic(Characteristic_1.Characteristic.ActiveIdentifier).updateValue(activeIdentifier);\n        if (this.activeAudioSession) {\n            this.handleSiriAudioStop();\n        }\n        setTimeout(function () { return _this.emit(\"active-identifier-change\" /* RemoteControllerEvents.ACTIVE_IDENTIFIER_CHANGE */, activeIdentifier); }, 0);\n        this.setInactive();\n    };\n    /**\n     * @returns if the current target is active, meaning the active device is listening for button events or audio sessions\n     */\n    RemoteController.prototype.isActive = function () {\n        return !!this.activeConnection;\n    };\n    /**\n     * Checks if the supplied targetIdentifier is configured.\n     *\n     * @param targetIdentifier - The target identifier.\n     */\n    RemoteController.prototype.isConfigured = function (targetIdentifier) {\n        return this.targetConfigurations.has(targetIdentifier);\n    };\n    /**\n     * Returns the targetIdentifier for a give device name\n     *\n     * @param name - The name of the device.\n     * @returns The targetIdentifier of the device or undefined if not existent.\n     */\n    RemoteController.prototype.getTargetIdentifierByName = function (name) {\n        var e_1, _a;\n        try {\n            for (var _b = tslib_1.__values(Object.entries(this.targetConfigurations)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = tslib_1.__read(_c.value, 2), activeIdentifier = _d[0], configuration = _d[1];\n                if (configuration.targetName === name) {\n                    return parseInt(activeIdentifier, 10);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return undefined;\n    };\n    /**\n     * Sends a button event to press the supplied button.\n     *\n     * @param button - button to be pressed\n     */\n    RemoteController.prototype.pushButton = function (button) {\n        this.sendButtonEvent(button, 1 /* ButtonState.DOWN */);\n    };\n    /**\n     * Sends a button event that the supplied button was released.\n     *\n     * @param button - button which was released\n     */\n    RemoteController.prototype.releaseButton = function (button) {\n        this.sendButtonEvent(button, 0 /* ButtonState.UP */);\n    };\n    /**\n     * Presses a supplied button for a given time.\n     *\n     * @param button - button to be pressed and released\n     * @param time - time in milliseconds (defaults to 200ms)\n     */\n    RemoteController.prototype.pushAndReleaseButton = function (button, time) {\n        var _this = this;\n        if (time === void 0) { time = 200; }\n        this.pushButton(button);\n        setTimeout(function () { return _this.releaseButton(button); }, time);\n    };\n    /**\n     * This method adds and configures the remote services for a give accessory.\n     *\n     * @param accessory - the give accessory this remote should be added to\n     * @deprecated - use {@link Accessory.configureController} instead\n     */\n    RemoteController.prototype.addServicesToAccessory = function (accessory) {\n        accessory.configureController(this);\n    };\n    // ---------------------------------- CONFIGURATION ----------------------------------\n    // override methods if you would like to change anything (but should not be necessary most likely)\n    RemoteController.prototype.constructSupportedConfiguration = function () {\n        var _this = this;\n        var configuration = {\n            maximumTargets: 10, // some random number. (ten should be okay?)\n            ticksPerSecond: 1000, // we rely on unix timestamps\n            supportedButtonConfiguration: [],\n            hardwareImplemented: this.audioSupported, // siri is only allowed for hardware implemented remotes\n        };\n        var supportedButtons = [\n            1 /* ButtonType.MENU */, 2 /* ButtonType.PLAY_PAUSE */, 3 /* ButtonType.TV_HOME */, 4 /* ButtonType.SELECT */,\n            5 /* ButtonType.ARROW_UP */, 6 /* ButtonType.ARROW_RIGHT */, 7 /* ButtonType.ARROW_DOWN */, 8 /* ButtonType.ARROW_LEFT */,\n            9 /* ButtonType.VOLUME_UP */, 10 /* ButtonType.VOLUME_DOWN */, 12 /* ButtonType.POWER */, 13 /* ButtonType.GENERIC */,\n        ];\n        if (this.audioSupported) { // add siri button if this remote supports it\n            supportedButtons.push(11 /* ButtonType.SIRI */);\n        }\n        supportedButtons.forEach(function (button) {\n            var buttonConfiguration = {\n                buttonID: 100 + button,\n                buttonType: button,\n            };\n            configuration.supportedButtonConfiguration.push(buttonConfiguration);\n            _this.buttons[button] = buttonConfiguration.buttonID; // also saving mapping of type to id locally\n        });\n        return configuration;\n    };\n    RemoteController.prototype.constructSupportedAudioConfiguration = function () {\n        // the following parameters are expected from HomeKit for a remote\n        return {\n            audioCodecConfiguration: {\n                codecType: 3 /* AudioCodecTypes.OPUS */,\n                parameters: {\n                    channels: 1,\n                    bitrate: 0 /* AudioBitrate.VARIABLE */,\n                    samplerate: 1 /* AudioSamplerate.KHZ_16 */,\n                },\n            },\n        };\n    };\n    // --------------------------------- TARGET CONTROL ----------------------------------\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    RemoteController.prototype.handleTargetControlWrite = function (value, callback) {\n        var data = Buffer.from(value, \"base64\");\n        var objects = tlv.decode(data);\n        var operation = objects[1 /* TargetControlList.OPERATION */][0];\n        var targetConfiguration = undefined;\n        if (objects[2 /* TargetControlList.TARGET_CONFIGURATION */]) { // if target configuration was sent, parse it\n            targetConfiguration = this.parseTargetConfigurationTLV(objects[2 /* TargetControlList.TARGET_CONFIGURATION */]);\n        }\n        debug(\"Received TargetControl write operation %s\", Operation[operation]);\n        var handler;\n        switch (operation) {\n            case Operation.ADD:\n                handler = this.handleAddTarget.bind(this);\n                break;\n            case Operation.UPDATE:\n                handler = this.handleUpdateTarget.bind(this);\n                break;\n            case Operation.REMOVE:\n                handler = this.handleRemoveTarget.bind(this);\n                break;\n            case Operation.RESET:\n                handler = this.handleResetTargets.bind(this);\n                break;\n            case Operation.LIST:\n                handler = this.handleListTargets.bind(this);\n                break;\n            default:\n                callback(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */, undefined);\n                return;\n        }\n        var status = handler(targetConfiguration);\n        if (status === 0 /* HAPStatus.SUCCESS */) {\n            callback(undefined, this.targetConfigurationsString); // passing value for write response\n            if (operation === Operation.ADD && this.activeIdentifier === 0) {\n                this.setActiveIdentifier(targetConfiguration.targetIdentifier);\n            }\n        }\n        else {\n            callback(new Error(status + \"\"));\n        }\n    };\n    RemoteController.prototype.handleAddTarget = function (targetConfiguration) {\n        var _this = this;\n        if (!targetConfiguration) {\n            return -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */;\n        }\n        this.targetConfigurations.set(targetConfiguration.targetIdentifier, targetConfiguration);\n        debug(\"Configured new target '\" + targetConfiguration.targetName + \"' with targetIdentifier '\" + targetConfiguration.targetIdentifier + \"'\");\n        setTimeout(function () { return _this.emit(\"target-add\" /* RemoteControllerEvents.TARGET_ADDED */, targetConfiguration); }, 0);\n        this.updatedTargetConfiguration(); // set response\n        return 0 /* HAPStatus.SUCCESS */;\n    };\n    RemoteController.prototype.handleUpdateTarget = function (targetConfiguration) {\n        var e_2, _a;\n        var _this = this;\n        if (!targetConfiguration) {\n            return -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */;\n        }\n        var updates = [];\n        var configuredTarget = this.targetConfigurations.get(targetConfiguration.targetIdentifier);\n        if (!configuredTarget) {\n            return -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */;\n        }\n        if (targetConfiguration.targetName) {\n            debug(\"Target name was updated '%s' => '%s' (%d)\", configuredTarget.targetName, targetConfiguration.targetName, configuredTarget.targetIdentifier);\n            configuredTarget.targetName = targetConfiguration.targetName;\n            updates.push(0 /* TargetUpdates.NAME */);\n        }\n        if (targetConfiguration.targetCategory) {\n            debug(\"Target category was updated '%d' => '%d' for target '%s' (%d)\", configuredTarget.targetCategory, targetConfiguration.targetCategory, configuredTarget.targetName, configuredTarget.targetIdentifier);\n            configuredTarget.targetCategory = targetConfiguration.targetCategory;\n            updates.push(1 /* TargetUpdates.CATEGORY */);\n        }\n        if (targetConfiguration.buttonConfiguration) {\n            debug(\"%d button configurations were updated for target '%s' (%d)\", Object.keys(targetConfiguration.buttonConfiguration).length, configuredTarget.targetName, configuredTarget.targetIdentifier);\n            try {\n                for (var _b = tslib_1.__values(Object.values(targetConfiguration.buttonConfiguration)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var configuration = _c.value;\n                    var savedConfiguration = configuredTarget.buttonConfiguration[configuration.buttonID];\n                    savedConfiguration.buttonType = configuration.buttonType;\n                    savedConfiguration.buttonName = configuration.buttonName;\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            updates.push(2 /* TargetUpdates.UPDATED_BUTTONS */);\n        }\n        setTimeout(function () { return _this.emit(\"target-update\" /* RemoteControllerEvents.TARGET_UPDATED */, targetConfiguration, updates); }, 0);\n        this.updatedTargetConfiguration(); // set response\n        return 0 /* HAPStatus.SUCCESS */;\n    };\n    RemoteController.prototype.handleRemoveTarget = function (targetConfiguration) {\n        var _this = this;\n        if (!targetConfiguration) {\n            return -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */;\n        }\n        var configuredTarget = this.targetConfigurations.get(targetConfiguration.targetIdentifier);\n        if (!configuredTarget) {\n            return -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */;\n        }\n        if (targetConfiguration.buttonConfiguration) {\n            for (var key in targetConfiguration.buttonConfiguration) {\n                if (Object.prototype.hasOwnProperty.call(targetConfiguration.buttonConfiguration, key)) {\n                    delete configuredTarget.buttonConfiguration[key];\n                }\n            }\n            debug(\"Removed %d button configurations of target '%s' (%d)\", Object.keys(targetConfiguration.buttonConfiguration).length, configuredTarget.targetName, configuredTarget.targetIdentifier);\n            setTimeout(function () { return _this.emit(\"target-update\" /* RemoteControllerEvents.TARGET_UPDATED */, configuredTarget, [3 /* TargetUpdates.REMOVED_BUTTONS */]); }, 0);\n        }\n        else {\n            this.targetConfigurations.delete(targetConfiguration.targetIdentifier);\n            debug(\"Target '%s' (%d) was removed\", configuredTarget.targetName, configuredTarget.targetIdentifier);\n            setTimeout(function () { return _this.emit(\"target-remove\" /* RemoteControllerEvents.TARGET_REMOVED */, targetConfiguration.targetIdentifier); }, 0);\n            var keys = Object.keys(this.targetConfigurations);\n            this.setActiveIdentifier(keys.length === 0 ? 0 : parseInt(keys[0], 10)); // switch to next available remote\n        }\n        this.updatedTargetConfiguration(); // set response\n        return 0 /* HAPStatus.SUCCESS */;\n    };\n    RemoteController.prototype.handleResetTargets = function (targetConfiguration) {\n        var _this = this;\n        if (targetConfiguration) {\n            return -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */;\n        }\n        debug(\"Resetting all target configurations\");\n        this.targetConfigurations = new Map();\n        this.updatedTargetConfiguration(); // set response\n        setTimeout(function () { return _this.emit(\"targets-reset\" /* RemoteControllerEvents.TARGETS_RESET */); }, 0);\n        this.setActiveIdentifier(0); // resetting active identifier (also sets active to false)\n        return 0 /* HAPStatus.SUCCESS */;\n    };\n    RemoteController.prototype.handleListTargets = function (targetConfiguration) {\n        if (targetConfiguration) {\n            return -70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */;\n        }\n        // this.targetConfigurationsString is updated after each change, so we basically don't need to do anything here\n        debug(\"Returning \" + Object.keys(this.targetConfigurations).length + \" target configurations\");\n        return 0 /* HAPStatus.SUCCESS */;\n    };\n    RemoteController.prototype.handleActiveWrite = function (value, callback, connection) {\n        if (this.activeIdentifier === 0) {\n            debug(\"Tried to change active state. There is no active target set though\");\n            callback(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */);\n            return;\n        }\n        if (this.activeConnection) {\n            this.activeConnection.removeListener(\"closed\" /* HAPConnectionEvent.CLOSED */, this.activeConnectionDisconnectListener);\n            this.activeConnection = undefined;\n            this.activeConnectionDisconnectListener = undefined;\n        }\n        this.activeConnection = value ? connection : undefined;\n        if (this.activeConnection) { // register listener when hap connection disconnects\n            this.activeConnectionDisconnectListener = this.handleActiveSessionDisconnected.bind(this, this.activeConnection);\n            this.activeConnection.on(\"closed\" /* HAPConnectionEvent.CLOSED */, this.activeConnectionDisconnectListener);\n        }\n        var activeTarget = this.targetConfigurations.get(this.activeIdentifier);\n        if (!activeTarget) {\n            callback(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */);\n            return;\n        }\n        debug(\"Remote with activeTarget '%s' (%d) was set to %s\", activeTarget.targetName, this.activeIdentifier, value ? \"ACTIVE\" : \"INACTIVE\");\n        callback();\n        this.emit(\"active-change\" /* RemoteControllerEvents.ACTIVE_CHANGE */, value);\n    };\n    RemoteController.prototype.setInactive = function () {\n        var _this = this;\n        if (this.activeConnection === undefined) {\n            return;\n        }\n        this.activeConnection.removeListener(\"closed\" /* HAPConnectionEvent.CLOSED */, this.activeConnectionDisconnectListener);\n        this.activeConnection = undefined;\n        this.activeConnectionDisconnectListener = undefined;\n        this.targetControlService.getCharacteristic(Characteristic_1.Characteristic.Active).updateValue(false);\n        debug(\"Remote was set to INACTIVE\");\n        setTimeout(function () { return _this.emit(\"active-change\" /* RemoteControllerEvents.ACTIVE_CHANGE */, false); }, 0);\n    };\n    RemoteController.prototype.handleActiveSessionDisconnected = function (connection) {\n        if (connection !== this.activeConnection) {\n            return;\n        }\n        debug(\"Active hap session disconnected!\");\n        this.setInactive();\n    };\n    RemoteController.prototype.sendButtonEvent = function (button, buttonState) {\n        var buttonID = this.buttons[button];\n        if (buttonID === undefined || buttonID === 0) {\n            throw new Error(\"Tried sending button event for unsupported button (\" + button + \")\");\n        }\n        if (this.activeIdentifier === 0) { // cannot press button if no device is selected\n            throw new Error(\"Tried sending button event although no target was selected\");\n        }\n        if (!this.isActive()) { // cannot press button if device is not active (aka no Apple TV is listening)\n            throw new Error(\"Tried sending button event although target was not marked as active\");\n        }\n        if (button === 11 /* ButtonType.SIRI */ && this.audioSupported) {\n            if (buttonState === 1 /* ButtonState.DOWN */) { // start streaming session\n                this.handleSiriAudioStart();\n            }\n            else if (buttonState === 0 /* ButtonState.UP */) { // stop streaming session\n                this.handleSiriAudioStop();\n            }\n            return;\n        }\n        var buttonIdTlv = tlv.encode(1 /* ButtonEvent.BUTTON_ID */, buttonID);\n        var buttonStateTlv = tlv.encode(2 /* ButtonEvent.BUTTON_STATE */, buttonState);\n        var timestampTlv = tlv.encode(3 /* ButtonEvent.TIMESTAMP */, tlv.writeVariableUIntLE(new Date().getTime()));\n        var activeIdentifierTlv = tlv.encode(4 /* ButtonEvent.ACTIVE_IDENTIFIER */, tlv.writeUInt32(this.activeIdentifier));\n        this.lastButtonEvent = Buffer.concat([\n            buttonIdTlv, buttonStateTlv, timestampTlv, activeIdentifierTlv,\n        ]).toString(\"base64\");\n        this.targetControlService.getCharacteristic(Characteristic_1.Characteristic.ButtonEvent).sendEventNotification(this.lastButtonEvent);\n    };\n    RemoteController.prototype.parseTargetConfigurationTLV = function (data) {\n        var configTLV = tlv.decode(data);\n        var identifier = tlv.readUInt32(configTLV[1 /* TargetConfigurationTypes.TARGET_IDENTIFIER */]);\n        var name = undefined;\n        if (configTLV[2 /* TargetConfigurationTypes.TARGET_NAME */]) {\n            name = configTLV[2 /* TargetConfigurationTypes.TARGET_NAME */].toString();\n        }\n        var category = undefined;\n        if (configTLV[3 /* TargetConfigurationTypes.TARGET_CATEGORY */]) {\n            category = tlv.readUInt16(configTLV[3 /* TargetConfigurationTypes.TARGET_CATEGORY */]);\n        }\n        var buttonConfiguration = {};\n        if (configTLV[4 /* TargetConfigurationTypes.BUTTON_CONFIGURATION */]) {\n            var buttonConfigurationTLV = tlv.decodeList(configTLV[4 /* TargetConfigurationTypes.BUTTON_CONFIGURATION */], 1 /* ButtonConfigurationTypes.BUTTON_ID */);\n            buttonConfigurationTLV.forEach(function (entry) {\n                var buttonId = entry[1 /* ButtonConfigurationTypes.BUTTON_ID */][0];\n                var buttonType = tlv.readUInt16(entry[2 /* ButtonConfigurationTypes.BUTTON_TYPE */]);\n                var buttonName;\n                if (entry[3 /* ButtonConfigurationTypes.BUTTON_NAME */]) {\n                    buttonName = entry[3 /* ButtonConfigurationTypes.BUTTON_NAME */].toString();\n                }\n                else {\n                    // @ts-expect-error: forceConsistentCasingInFileNames compiler option\n                    buttonName = ButtonType[buttonType];\n                }\n                buttonConfiguration[buttonId] = {\n                    buttonID: buttonId,\n                    buttonType: buttonType,\n                    buttonName: buttonName,\n                };\n            });\n        }\n        return {\n            targetIdentifier: identifier,\n            targetName: name,\n            targetCategory: category,\n            buttonConfiguration: buttonConfiguration,\n        };\n    };\n    RemoteController.prototype.updatedTargetConfiguration = function () {\n        var e_3, _a, e_4, _b;\n        var _c;\n        var bufferList = [];\n        try {\n            for (var _d = tslib_1.__values(Object.values(this.targetConfigurations)), _e = _d.next(); !_e.done; _e = _d.next()) {\n                var configuration = _e.value;\n                var targetIdentifier = tlv.encode(1 /* TargetConfigurationTypes.TARGET_IDENTIFIER */, tlv.writeUInt32(configuration.targetIdentifier));\n                var targetName = tlv.encode(2 /* TargetConfigurationTypes.TARGET_NAME */, configuration.targetName);\n                var targetCategory = tlv.encode(3 /* TargetConfigurationTypes.TARGET_CATEGORY */, tlv.writeUInt16(configuration.targetCategory));\n                var buttonConfigurationBuffers = [];\n                try {\n                    for (var _f = (e_4 = void 0, tslib_1.__values(configuration.buttonConfiguration.values())), _g = _f.next(); !_g.done; _g = _f.next()) {\n                        var value = _g.value;\n                        var tlvBuffer = tlv.encode(1 /* ButtonConfigurationTypes.BUTTON_ID */, value.buttonID, 2 /* ButtonConfigurationTypes.BUTTON_TYPE */, tlv.writeUInt16(value.buttonType));\n                        if (value.buttonName) {\n                            tlvBuffer = Buffer.concat([\n                                tlvBuffer,\n                                tlv.encode(3 /* ButtonConfigurationTypes.BUTTON_NAME */, value.buttonName),\n                            ]);\n                        }\n                        buttonConfigurationBuffers.push(tlvBuffer);\n                    }\n                }\n                catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                finally {\n                    try {\n                        if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n                    }\n                    finally { if (e_4) throw e_4.error; }\n                }\n                var buttonConfiguration = tlv.encode(4 /* TargetConfigurationTypes.BUTTON_CONFIGURATION */, Buffer.concat(buttonConfigurationBuffers));\n                var targetConfiguration = Buffer.concat([targetIdentifier, targetName, targetCategory, buttonConfiguration]);\n                bufferList.push(tlv.encode(2 /* TargetControlList.TARGET_CONFIGURATION */, targetConfiguration));\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        this.targetConfigurationsString = Buffer.concat(bufferList).toString(\"base64\");\n        (_c = this.stateChangeDelegate) === null || _c === void 0 ? void 0 : _c.call(this);\n    };\n    RemoteController.prototype.buildTargetControlSupportedConfigurationTLV = function (configuration) {\n        var maximumTargets = tlv.encode(1 /* TargetControlCommands.MAXIMUM_TARGETS */, configuration.maximumTargets);\n        var ticksPerSecond = tlv.encode(2 /* TargetControlCommands.TICKS_PER_SECOND */, tlv.writeVariableUIntLE(configuration.ticksPerSecond));\n        var supportedButtonConfigurationBuffers = [];\n        configuration.supportedButtonConfiguration.forEach(function (value) {\n            var tlvBuffer = tlv.encode(1 /* SupportedButtonConfigurationTypes.BUTTON_ID */, value.buttonID, 2 /* SupportedButtonConfigurationTypes.BUTTON_TYPE */, tlv.writeUInt16(value.buttonType));\n            supportedButtonConfigurationBuffers.push(tlvBuffer);\n        });\n        var supportedButtonConfiguration = tlv.encode(3 /* TargetControlCommands.SUPPORTED_BUTTON_CONFIGURATION */, Buffer.concat(supportedButtonConfigurationBuffers));\n        var type = tlv.encode(4 /* TargetControlCommands.TYPE */, configuration.hardwareImplemented ? 1 : 0);\n        return Buffer.concat([maximumTargets, ticksPerSecond, supportedButtonConfiguration, type]).toString(\"base64\");\n    };\n    // --------------------------------- SIRI/DATA STREAM --------------------------------\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    RemoteController.prototype.handleTargetControlWhoAmI = function (connection, message) {\n        var targetIdentifier = message.identifier;\n        this.dataStreamConnections.set(targetIdentifier, connection);\n        debug(\"Discovered HDS connection for targetIdentifier %s\", targetIdentifier);\n        connection.addProtocolHandler(\"dataSend\" /* Protocols.DATA_SEND */, this);\n    };\n    RemoteController.prototype.handleSiriAudioStart = function () {\n        if (!this.audioSupported) {\n            throw new Error(\"Cannot start siri stream on remote where siri is not supported\");\n        }\n        if (!this.isActive()) {\n            debug(\"Tried opening Siri audio stream, however no controller is connected!\");\n            return;\n        }\n        if (this.activeAudioSession && (!this.activeAudioSession.isClosing() || this.nextAudioSession)) {\n            // there is already a session running, which is not in closing state and/or there is even already a\n            // nextAudioSession running. ignoring start request\n            debug(\"Tried opening Siri audio stream, however there is already one in progress\");\n            return;\n        }\n        var connection = this.dataStreamConnections.get(this.activeIdentifier); // get connection for current target\n        if (connection === undefined) { // target seems not connected, ignore it\n            debug(\"Tried opening Siri audio stream however target is not connected via HDS\");\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        var audioSession = new SiriAudioSession(connection, this.selectedAudioConfiguration, this.audioProducerConstructor, this.audioProducerOptions);\n        if (!this.activeAudioSession) {\n            this.activeAudioSession = audioSession;\n        }\n        else {\n            // we checked above that this only happens if the activeAudioSession is in closing state,\n            // so no collision with the input device can happen\n            this.nextAudioSession = audioSession;\n        }\n        audioSession.on(\"close\" /* SiriAudioSessionEvents.CLOSE */, this.handleSiriAudioSessionClosed.bind(this, audioSession));\n        audioSession.start();\n    };\n    RemoteController.prototype.handleSiriAudioStop = function () {\n        if (this.activeAudioSession) {\n            if (!this.activeAudioSession.isClosing()) {\n                this.activeAudioSession.stop();\n                return;\n            }\n            else if (this.nextAudioSession && !this.nextAudioSession.isClosing()) {\n                this.nextAudioSession.stop();\n                return;\n            }\n        }\n        debug(\"handleSiriAudioStop called although no audio session was started\");\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    RemoteController.prototype.handleDataSendAckEvent = function (message) {\n        var streamId = message.streamId;\n        var endOfStream = message.endOfStream;\n        if (this.activeAudioSession && this.activeAudioSession.streamId === streamId) {\n            this.activeAudioSession.handleDataSendAckEvent(endOfStream);\n        }\n        else if (this.nextAudioSession && this.nextAudioSession.streamId === streamId) {\n            this.nextAudioSession.handleDataSendAckEvent(endOfStream);\n        }\n        else {\n            debug(\"Received dataSend acknowledgment event for unknown streamId '%s'\", streamId);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    RemoteController.prototype.handleDataSendCloseEvent = function (message) {\n        var streamId = message.streamId;\n        var reason = message.reason;\n        if (this.activeAudioSession && this.activeAudioSession.streamId === streamId) {\n            this.activeAudioSession.handleDataSendCloseEvent(reason);\n        }\n        else if (this.nextAudioSession && this.nextAudioSession.streamId === streamId) {\n            this.nextAudioSession.handleDataSendCloseEvent(reason);\n        }\n        else {\n            debug(\"Received dataSend close event for unknown streamId '%s'\", streamId);\n        }\n    };\n    RemoteController.prototype.handleSiriAudioSessionClosed = function (session) {\n        if (session === this.activeAudioSession) {\n            this.activeAudioSession = this.nextAudioSession;\n            this.nextAudioSession = undefined;\n        }\n        else if (session === this.nextAudioSession) {\n            this.nextAudioSession = undefined;\n        }\n    };\n    RemoteController.prototype.handleDataStreamConnectionClosed = function (connection) {\n        var e_5, _a;\n        try {\n            for (var _b = tslib_1.__values(this.dataStreamConnections), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = tslib_1.__read(_c.value, 2), targetIdentifier = _d[0], connection0 = _d[1];\n                if (connection === connection0) {\n                    debug(\"HDS connection disconnected for targetIdentifier %s\", targetIdentifier);\n                    this.dataStreamConnections.delete(targetIdentifier);\n                    break;\n                }\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n    };\n    // ------------------------------- AUDIO CONFIGURATION -------------------------------\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    RemoteController.prototype.handleSelectedAudioConfigurationWrite = function (value, callback) {\n        var data = Buffer.from(value, \"base64\");\n        var objects = tlv.decode(data);\n        var selectedAudioStreamConfiguration = tlv.decode(objects[1 /* SelectedAudioInputStreamConfigurationTypes.SELECTED_AUDIO_INPUT_STREAM_CONFIGURATION */]);\n        var codec = selectedAudioStreamConfiguration[1 /* AudioCodecConfigurationTypes.CODEC_TYPE */][0];\n        var parameters = tlv.decode(selectedAudioStreamConfiguration[2 /* AudioCodecConfigurationTypes.CODEC_PARAMETERS */]);\n        var channels = parameters[1 /* AudioCodecParametersTypes.CHANNEL */][0];\n        var bitrate = parameters[2 /* AudioCodecParametersTypes.BIT_RATE */][0];\n        var samplerate = parameters[3 /* AudioCodecParametersTypes.SAMPLE_RATE */][0];\n        this.selectedAudioConfiguration = {\n            codecType: codec,\n            parameters: {\n                channels: channels,\n                bitrate: bitrate,\n                samplerate: samplerate,\n                rtpTime: 20,\n            },\n        };\n        this.selectedAudioConfigurationString = RemoteController.buildSelectedAudioConfigurationTLV({\n            audioCodecConfiguration: this.selectedAudioConfiguration,\n        });\n        callback();\n    };\n    RemoteController.buildSupportedAudioConfigurationTLV = function (configuration) {\n        var codecConfigurationTLV = RemoteController.buildCodecConfigurationTLV(configuration.audioCodecConfiguration);\n        var supportedAudioStreamConfiguration = tlv.encode(1 /* SupportedAudioStreamConfigurationTypes.AUDIO_CODEC_CONFIGURATION */, codecConfigurationTLV);\n        return supportedAudioStreamConfiguration.toString(\"base64\");\n    };\n    RemoteController.buildSelectedAudioConfigurationTLV = function (configuration) {\n        var codecConfigurationTLV = RemoteController.buildCodecConfigurationTLV(configuration.audioCodecConfiguration);\n        var supportedAudioStreamConfiguration = tlv.encode(1 /* SelectedAudioInputStreamConfigurationTypes.SELECTED_AUDIO_INPUT_STREAM_CONFIGURATION */, codecConfigurationTLV);\n        return supportedAudioStreamConfiguration.toString(\"base64\");\n    };\n    RemoteController.buildCodecConfigurationTLV = function (codecConfiguration) {\n        var parameters = codecConfiguration.parameters;\n        var parametersTLV = tlv.encode(1 /* AudioCodecParametersTypes.CHANNEL */, parameters.channels, 2 /* AudioCodecParametersTypes.BIT_RATE */, parameters.bitrate, 3 /* AudioCodecParametersTypes.SAMPLE_RATE */, parameters.samplerate);\n        if (parameters.rtpTime) {\n            parametersTLV = Buffer.concat([\n                parametersTLV,\n                tlv.encode(4 /* AudioCodecParametersTypes.PACKET_TIME */, parameters.rtpTime),\n            ]);\n        }\n        return tlv.encode(1 /* AudioCodecConfigurationTypes.CODEC_TYPE */, codecConfiguration.codecType, 2 /* AudioCodecConfigurationTypes.CODEC_PARAMETERS */, parametersTLV);\n    };\n    // -----------------------------------------------------------------------------------\n    /**\n     * @private\n     */\n    RemoteController.prototype.constructServices = function () {\n        var _a;\n        this.targetControlManagementService = new Service_1.Service.TargetControlManagement(\"\", \"\");\n        this.targetControlManagementService.setCharacteristic(Characteristic_1.Characteristic.TargetControlSupportedConfiguration, this.supportedConfiguration);\n        this.targetControlManagementService.setCharacteristic(Characteristic_1.Characteristic.TargetControlList, this.targetConfigurationsString);\n        this.targetControlManagementService.setPrimaryService();\n        // you can also expose multiple TargetControl services to control multiple apple tvs simultaneously.\n        // should we extend this class to support multiple TargetControl services or should users just create a second accessory?\n        this.targetControlService = new Service_1.Service.TargetControl(\"\", \"\");\n        this.targetControlService.setCharacteristic(Characteristic_1.Characteristic.ActiveIdentifier, 0);\n        this.targetControlService.setCharacteristic(Characteristic_1.Characteristic.Active, false);\n        this.targetControlService.setCharacteristic(Characteristic_1.Characteristic.ButtonEvent, this.lastButtonEvent);\n        if (this.audioSupported) {\n            this.siriService = new Service_1.Service.Siri(\"\", \"\");\n            this.siriService.setCharacteristic(Characteristic_1.Characteristic.SiriInputType, Characteristic_1.Characteristic.SiriInputType.PUSH_BUTTON_TRIGGERED_APPLE_TV);\n            this.audioStreamManagementService = new Service_1.Service.AudioStreamManagement(\"\", \"\");\n            this.audioStreamManagementService.setCharacteristic(Characteristic_1.Characteristic.SupportedAudioStreamConfiguration, this.supportedAudioConfiguration);\n            this.audioStreamManagementService.setCharacteristic(Characteristic_1.Characteristic.SelectedAudioStreamConfiguration, this.selectedAudioConfigurationString);\n            this.dataStreamManagement = new datastream_1.DataStreamManagement();\n            this.siriService.addLinkedService(this.dataStreamManagement.getService());\n            this.siriService.addLinkedService(this.audioStreamManagementService);\n        }\n        return {\n            targetControlManagement: this.targetControlManagementService,\n            targetControl: this.targetControlService,\n            siri: this.siriService,\n            audioStreamManagement: this.audioStreamManagementService,\n            dataStreamTransportManagement: (_a = this.dataStreamManagement) === null || _a === void 0 ? void 0 : _a.getService(),\n        };\n    };\n    /**\n     * @private\n     */\n    RemoteController.prototype.initWithServices = function (serviceMap) {\n        this.targetControlManagementService = serviceMap.targetControlManagement;\n        this.targetControlService = serviceMap.targetControl;\n        this.siriService = serviceMap.siri;\n        this.audioStreamManagementService = serviceMap.audioStreamManagement;\n        this.dataStreamManagement = new datastream_1.DataStreamManagement(serviceMap.dataStreamTransportManagement);\n    };\n    /**\n     * @private\n     */\n    RemoteController.prototype.configureServices = function () {\n        var _a;\n        var _this = this;\n        if (!this.targetControlManagementService || !this.targetControlService) {\n            throw new Error(\"Unexpected state: Services not configured!\"); // playing it save\n        }\n        this.targetControlManagementService.getCharacteristic(Characteristic_1.Characteristic.TargetControlList)\n            .on(\"get\" /* CharacteristicEventTypes.GET */, function (callback) {\n            callback(null, _this.targetConfigurationsString);\n        })\n            .on(\"set\" /* CharacteristicEventTypes.SET */, this.handleTargetControlWrite.bind(this));\n        this.targetControlService.getCharacteristic(Characteristic_1.Characteristic.ActiveIdentifier)\n            .on(\"get\" /* CharacteristicEventTypes.GET */, function (callback) {\n            callback(undefined, _this.activeIdentifier);\n        });\n        this.targetControlService.getCharacteristic(Characteristic_1.Characteristic.Active)\n            .on(\"get\" /* CharacteristicEventTypes.GET */, function (callback) {\n            callback(undefined, _this.isActive());\n        })\n            .on(\"set\" /* CharacteristicEventTypes.SET */, function (value, callback, context, connection) {\n            if (!connection) {\n                debug(\"Set event handler for Remote.Active cannot be called from plugin. Connection undefined!\");\n                callback(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */);\n                return;\n            }\n            _this.handleActiveWrite(value, callback, connection);\n        });\n        this.targetControlService.getCharacteristic(Characteristic_1.Characteristic.ButtonEvent)\n            .on(\"get\" /* CharacteristicEventTypes.GET */, function (callback) {\n            callback(undefined, _this.lastButtonEvent);\n        });\n        if (this.audioSupported) {\n            this.audioStreamManagementService.getCharacteristic(Characteristic_1.Characteristic.SelectedAudioStreamConfiguration)\n                .on(\"get\" /* CharacteristicEventTypes.GET */, function (callback) {\n                callback(null, _this.selectedAudioConfigurationString);\n            })\n                .on(\"set\" /* CharacteristicEventTypes.SET */, this.handleSelectedAudioConfigurationWrite.bind(this))\n                .updateValue(this.selectedAudioConfigurationString);\n            this.dataStreamManagement\n                .onEventMessage(\"targetControl\" /* Protocols.TARGET_CONTROL */, \"whoami\" /* Topics.WHOAMI */, this.handleTargetControlWhoAmI.bind(this))\n                .onServerEvent(\"connection-closed\" /* DataStreamServerEvent.CONNECTION_CLOSED */, this.handleDataStreamConnectionClosed.bind(this));\n            this.eventHandler = (_a = {},\n                _a[\"ack\" /* Topics.ACK */] = this.handleDataSendAckEvent.bind(this),\n                _a[\"close\" /* Topics.CLOSE */] = this.handleDataSendCloseEvent.bind(this),\n                _a);\n        }\n    };\n    /**\n     * @private\n     */\n    RemoteController.prototype.handleControllerRemoved = function () {\n        var _a;\n        this.targetControlManagementService = undefined;\n        this.targetControlService = undefined;\n        this.siriService = undefined;\n        this.audioStreamManagementService = undefined;\n        this.eventHandler = undefined;\n        this.requestHandler = undefined;\n        (_a = this.dataStreamManagement) === null || _a === void 0 ? void 0 : _a.destroy();\n        this.dataStreamManagement = undefined;\n        // the call to dataStreamManagement.destroy will close any open data stream connection\n        // which will result in a call to this.handleDataStreamConnectionClosed, cleaning up this.dataStreamConnections.\n        // It will also result in a call to SiriAudioSession.handleDataStreamConnectionClosed (if there are any open session)\n        // which again results in a call to this.handleSiriAudioSessionClosed,cleaning up this.activeAudioSession and this.nextAudioSession.\n    };\n    /**\n     * @private\n     */\n    RemoteController.prototype.handleFactoryReset = function () {\n        debug(\"Running factory reset. Resetting targets...\");\n        this.handleResetTargets(undefined);\n        this.lastButtonEvent = \"\";\n    };\n    /**\n     * @private\n     */\n    RemoteController.prototype.serialize = function () {\n        if (!this.activeIdentifier && Object.keys(this.targetConfigurations).length === 0) {\n            return undefined;\n        }\n        return {\n            activeIdentifier: this.activeIdentifier,\n            targetConfigurations: tslib_1.__spreadArray([], tslib_1.__read(this.targetConfigurations), false).reduce(function (obj, _a) {\n                var _b = tslib_1.__read(_a, 2), key = _b[0], value = _b[1];\n                obj[key] = value;\n                return obj;\n            }, {}),\n        };\n    };\n    /**\n     * @private\n     */\n    RemoteController.prototype.deserialize = function (serialized) {\n        this.activeIdentifier = serialized.activeIdentifier;\n        this.targetConfigurations = Object.entries(serialized.targetConfigurations).reduce(function (map, _a) {\n            var _b = tslib_1.__read(_a, 2), key = _b[0], value = _b[1];\n            var identifier = parseInt(key, 10);\n            map.set(identifier, value);\n            return map;\n        }, new Map());\n        this.updatedTargetConfiguration();\n    };\n    /**\n     * @private\n     */\n    RemoteController.prototype.setupStateChangeDelegate = function (delegate) {\n        this.stateChangeDelegate = delegate;\n    };\n    return RemoteController;\n}(events_1.EventEmitter));\nexports.RemoteController = RemoteController;\n// noinspection JSUnusedGlobalSymbols\n/**\n * @deprecated - only there for backwards compatibility, please use {@link RemoteController} directly\n * @group Apple TV Remote\n */\nvar HomeKitRemoteController = /** @class */ (function (_super) {\n    tslib_1.__extends(HomeKitRemoteController, _super);\n    function HomeKitRemoteController() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return HomeKitRemoteController;\n}(RemoteController)); // backwards compatibility\nexports.HomeKitRemoteController = HomeKitRemoteController;\n/**\n * @group Apple TV Remote\n */\nvar SiriAudioSessionEvents;\n(function (SiriAudioSessionEvents) {\n    SiriAudioSessionEvents[\"CLOSE\"] = \"close\";\n})(SiriAudioSessionEvents || (exports.SiriAudioSessionEvents = SiriAudioSessionEvents = {}));\n/**\n * Represents an ongoing audio transmission\n * @group Apple TV Remote\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar SiriAudioSession = /** @class */ (function (_super) {\n    tslib_1.__extends(SiriAudioSession, _super);\n    function SiriAudioSession(connection, selectedAudioConfiguration, producerConstructor, \n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/no-explicit-any\n    producerOptions) {\n        var _this = _super.call(this) || this;\n        _this.producerRunning = false; // indicates if the producer is running\n        /**\n         * @private file private API\n         */\n        _this.state = 0 /* SiriAudioSessionState.STARTING */;\n        _this.endOfStream = false;\n        _this.audioFrameQueue = [];\n        _this.maxQueueSize = 1024;\n        _this.sequenceNumber = 0;\n        _this.connection = connection;\n        _this.selectedAudioConfiguration = selectedAudioConfiguration;\n        _this.producer = new producerConstructor(_this.handleSiriAudioFrame.bind(_this), _this.handleProducerError.bind(_this), producerOptions);\n        _this.connection.on(\"closed\" /* DataStreamConnectionEvent.CLOSED */, _this.closeListener = _this.handleDataStreamConnectionClosed.bind(_this));\n        return _this;\n    }\n    /**\n     * Called when siri button is pressed\n     */\n    SiriAudioSession.prototype.start = function () {\n        var _this = this;\n        debug(\"Sending request to start siri audio stream\");\n        // opening dataSend\n        this.connection.sendRequest(\"dataSend\" /* Protocols.DATA_SEND */, \"open\" /* Topics.OPEN */, {\n            target: \"controller\",\n            type: \"audio.siri\",\n        }, function (error, status, message) {\n            if (_this.state === 3 /* SiriAudioSessionState.CLOSED */) {\n                debug(\"Ignoring dataSend open response as the session is already closed\");\n                return;\n            }\n            assert_1.default.strictEqual(_this.state, 0 /* SiriAudioSessionState.STARTING */);\n            _this.state = 1 /* SiriAudioSessionState.SENDING */;\n            if (error || status) {\n                if (error) { // errors get produced by hap-nodejs\n                    debug(\"Error occurred trying to start siri audio stream: %s\", error.message);\n                }\n                else if (status) { // status codes are those returned by the hds response\n                    debug(\"Controller responded with non-zero status code: %s\", datastream_1.HDSStatus[status]);\n                }\n                _this.closed();\n            }\n            else {\n                _this.streamId = message.streamId;\n                if (!_this.producerRunning) { // audio producer errored in the meantime\n                    _this.sendDataSendCloseEvent(3 /* HDSProtocolSpecificErrorReason.CANCELLED */);\n                }\n                else {\n                    debug(\"Successfully setup siri audio stream with streamId %d\", _this.streamId);\n                }\n            }\n        });\n        this.startAudioProducer(); // start audio producer and queue frames in the meantime\n    };\n    /**\n     * @returns if the audio session is closing\n     */\n    SiriAudioSession.prototype.isClosing = function () {\n        return this.state >= 2 /* SiriAudioSessionState.CLOSING */;\n    };\n    /**\n     * Called when siri button is released (or active identifier is changed to another device)\n     */\n    SiriAudioSession.prototype.stop = function () {\n        (0, assert_1.default)(this.state <= 1 /* SiriAudioSessionState.SENDING */, \"state was higher than SENDING\");\n        debug(\"Stopping siri audio stream with streamId %d\", this.streamId);\n        this.endOfStream = true; // mark as endOfStream\n        this.stopAudioProducer();\n        if (this.state === 1 /* SiriAudioSessionState.SENDING */) {\n            this.handleSiriAudioFrame(undefined); // send out last few audio frames with endOfStream property set\n            this.state = 2 /* SiriAudioSessionState.CLOSING */; // we are waiting for an acknowledgment (triggered by endOfStream property)\n        }\n        else { // if state is not SENDING (aka state is STARTING) the callback for DATA_SEND OPEN did not yet return (or never will)\n            this.closed();\n        }\n    };\n    SiriAudioSession.prototype.startAudioProducer = function () {\n        var _this = this;\n        this.producer.startAudioProduction(this.selectedAudioConfiguration);\n        this.producerRunning = true;\n        this.producerTimer = setTimeout(function () {\n            debug(\"Didn't receive any frames from audio producer for stream with streamId %s. Canceling the stream now.\", _this.streamId);\n            _this.producerTimer = undefined;\n            _this.handleProducerError(3 /* HDSProtocolSpecificErrorReason.CANCELLED */);\n        }, 3000);\n        this.producerTimer.unref();\n    };\n    SiriAudioSession.prototype.stopAudioProducer = function () {\n        this.producer.stopAudioProduction();\n        this.producerRunning = false;\n        if (this.producerTimer) {\n            clearTimeout(this.producerTimer);\n            this.producerTimer = undefined;\n        }\n    };\n    SiriAudioSession.prototype.handleSiriAudioFrame = function (frame) {\n        var _this = this;\n        if (this.state >= 2 /* SiriAudioSessionState.CLOSING */) {\n            return;\n        }\n        if (this.producerTimer) { // if producerTimer is defined, then this is the first frame we are receiving\n            clearTimeout(this.producerTimer);\n            this.producerTimer = undefined;\n        }\n        if (frame && this.audioFrameQueue.length < this.maxQueueSize) { // add frame to queue whilst it is not full\n            this.audioFrameQueue.push(frame);\n        }\n        if (this.state !== 1 /* SiriAudioSessionState.SENDING */) { // dataSend isn't open yet\n            return;\n        }\n        var queued;\n        var _loop_1 = function () {\n            var packets = [];\n            queued.forEach(function (frame) {\n                var packetData = {\n                    data: frame.data,\n                    metadata: {\n                        rms: new datastream_1.Float32(frame.rms),\n                        sequenceNumber: new datastream_1.Int64(_this.sequenceNumber++),\n                    },\n                };\n                packets.push(packetData);\n            });\n            var message = {\n                packets: packets,\n                streamId: new datastream_1.Int64(this_1.streamId),\n                endOfStream: this_1.endOfStream,\n            };\n            try {\n                this_1.connection.sendEvent(\"dataSend\" /* Protocols.DATA_SEND */, \"data\" /* Topics.DATA */, message);\n            }\n            catch (error) {\n                debug(\"Error occurred when trying to send audio frame of hds connection: %s\", error.message);\n                this_1.stopAudioProducer();\n                this_1.closed();\n            }\n            if (this_1.endOfStream) {\n                return \"break\";\n            }\n        };\n        var this_1 = this;\n        while ((queued = this.popSome()) !== null) {\n            var state_1 = _loop_1();\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    SiriAudioSession.prototype.handleProducerError = function (error) {\n        if (this.state >= 2 /* SiriAudioSessionState.CLOSING */) {\n            return;\n        }\n        this.stopAudioProducer(); // ensure backend is closed\n        if (this.state === 1 /* SiriAudioSessionState.SENDING */) { // if state is less than sending dataSend isn't open (yet)\n            this.sendDataSendCloseEvent(error); // cancel submission\n        }\n    };\n    SiriAudioSession.prototype.handleDataSendAckEvent = function (endOfStream) {\n        assert_1.default.strictEqual(endOfStream, true);\n        debug(\"Received acknowledgment for siri audio stream with streamId %s, closing it now\", this.streamId);\n        this.sendDataSendCloseEvent(0 /* HDSProtocolSpecificErrorReason.NORMAL */);\n    };\n    SiriAudioSession.prototype.handleDataSendCloseEvent = function (reason) {\n        // @ts-expect-error: forceConsistentCasingInFileNames compiler option\n        debug(\"Received close event from controller with reason %s for stream with streamId %s\", datastream_1.HDSProtocolSpecificErrorReason[reason], this.streamId);\n        if (this.state <= 1 /* SiriAudioSessionState.SENDING */) {\n            this.stopAudioProducer();\n        }\n        this.closed();\n    };\n    SiriAudioSession.prototype.sendDataSendCloseEvent = function (reason) {\n        (0, assert_1.default)(this.state >= 1 /* SiriAudioSessionState.SENDING */, \"state was less than SENDING\");\n        (0, assert_1.default)(this.state <= 2 /* SiriAudioSessionState.CLOSING */, \"state was higher than CLOSING\");\n        this.connection.sendEvent(\"dataSend\" /* Protocols.DATA_SEND */, \"close\" /* Topics.CLOSE */, {\n            streamId: new datastream_1.Int64(this.streamId),\n            reason: new datastream_1.Int64(reason),\n        });\n        this.closed();\n    };\n    SiriAudioSession.prototype.handleDataStreamConnectionClosed = function () {\n        debug(\"Closing audio session with streamId %d\", this.streamId);\n        if (this.state <= 1 /* SiriAudioSessionState.SENDING */) {\n            this.stopAudioProducer();\n        }\n        this.closed();\n    };\n    SiriAudioSession.prototype.closed = function () {\n        var lastState = this.state;\n        this.state = 3 /* SiriAudioSessionState.CLOSED */;\n        if (lastState !== 3 /* SiriAudioSessionState.CLOSED */) {\n            this.emit(\"close\" /* SiriAudioSessionEvents.CLOSE */);\n            this.connection.removeListener(\"closed\" /* DataStreamConnectionEvent.CLOSED */, this.closeListener);\n        }\n        this.removeAllListeners();\n    };\n    SiriAudioSession.prototype.popSome = function () {\n        if (this.audioFrameQueue.length < 5 && !this.endOfStream) {\n            return null;\n        }\n        var size = Math.min(this.audioFrameQueue.length, 5); // 5 frames per hap packet seems fine\n        var result = [];\n        for (var i = 0; i < size; i++) {\n            var element = this.audioFrameQueue.shift(); // removes first element\n            result.push(element);\n        }\n        return result;\n    };\n    return SiriAudioSession;\n}(events_1.EventEmitter));\nexports.SiriAudioSession = SiriAudioSession;\n//# sourceMappingURL=RemoteController.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\ntslib_1.__exportStar(require(\"./Controller\"), exports);\ntslib_1.__exportStar(require(\"./AdaptiveLightingController\"), exports);\ntslib_1.__exportStar(require(\"./RemoteController\"), exports);\ntslib_1.__exportStar(require(\"./CameraController\"), exports);\ntslib_1.__exportStar(require(\"./DoorbellController\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DataStreamManagement = exports.DataStreamStatus = void 0;\nvar tslib_1 = require(\"tslib\");\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar Characteristic_1 = require(\"../Characteristic\");\nvar Service_1 = require(\"../Service\");\nvar tlv = tslib_1.__importStar(require(\"../util/tlv\"));\nvar DataStreamServer_1 = require(\"./DataStreamServer\");\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:DataStream:Management\");\nvar TransferTransportConfigurationTypes;\n(function (TransferTransportConfigurationTypes) {\n    TransferTransportConfigurationTypes[TransferTransportConfigurationTypes[\"TRANSFER_TRANSPORT_CONFIGURATION\"] = 1] = \"TRANSFER_TRANSPORT_CONFIGURATION\";\n})(TransferTransportConfigurationTypes || (TransferTransportConfigurationTypes = {}));\nvar TransportTypeTypes;\n(function (TransportTypeTypes) {\n    TransportTypeTypes[TransportTypeTypes[\"TRANSPORT_TYPE\"] = 1] = \"TRANSPORT_TYPE\";\n})(TransportTypeTypes || (TransportTypeTypes = {}));\nvar SetupDataStreamSessionTypes;\n(function (SetupDataStreamSessionTypes) {\n    SetupDataStreamSessionTypes[SetupDataStreamSessionTypes[\"SESSION_COMMAND_TYPE\"] = 1] = \"SESSION_COMMAND_TYPE\";\n    SetupDataStreamSessionTypes[SetupDataStreamSessionTypes[\"TRANSPORT_TYPE\"] = 2] = \"TRANSPORT_TYPE\";\n    SetupDataStreamSessionTypes[SetupDataStreamSessionTypes[\"CONTROLLER_KEY_SALT\"] = 3] = \"CONTROLLER_KEY_SALT\";\n})(SetupDataStreamSessionTypes || (SetupDataStreamSessionTypes = {}));\nvar SetupDataStreamWriteResponseTypes;\n(function (SetupDataStreamWriteResponseTypes) {\n    SetupDataStreamWriteResponseTypes[SetupDataStreamWriteResponseTypes[\"STATUS\"] = 1] = \"STATUS\";\n    SetupDataStreamWriteResponseTypes[SetupDataStreamWriteResponseTypes[\"TRANSPORT_TYPE_SESSION_PARAMETERS\"] = 2] = \"TRANSPORT_TYPE_SESSION_PARAMETERS\";\n    SetupDataStreamWriteResponseTypes[SetupDataStreamWriteResponseTypes[\"ACCESSORY_KEY_SALT\"] = 3] = \"ACCESSORY_KEY_SALT\";\n})(SetupDataStreamWriteResponseTypes || (SetupDataStreamWriteResponseTypes = {}));\nvar TransportSessionConfiguration;\n(function (TransportSessionConfiguration) {\n    TransportSessionConfiguration[TransportSessionConfiguration[\"TCP_LISTENING_PORT\"] = 1] = \"TCP_LISTENING_PORT\";\n})(TransportSessionConfiguration || (TransportSessionConfiguration = {}));\nvar TransportType;\n(function (TransportType) {\n    TransportType[TransportType[\"HOMEKIT_DATA_STREAM\"] = 0] = \"HOMEKIT_DATA_STREAM\";\n})(TransportType || (TransportType = {}));\nvar SessionCommandType;\n(function (SessionCommandType) {\n    SessionCommandType[SessionCommandType[\"START_SESSION\"] = 0] = \"START_SESSION\";\n})(SessionCommandType || (SessionCommandType = {}));\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar DataStreamStatus;\n(function (DataStreamStatus) {\n    DataStreamStatus[DataStreamStatus[\"SUCCESS\"] = 0] = \"SUCCESS\";\n    DataStreamStatus[DataStreamStatus[\"GENERIC_ERROR\"] = 1] = \"GENERIC_ERROR\";\n    DataStreamStatus[DataStreamStatus[\"BUSY\"] = 2] = \"BUSY\";\n})(DataStreamStatus || (exports.DataStreamStatus = DataStreamStatus = {}));\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar DataStreamManagement = /** @class */ (function () {\n    function DataStreamManagement(service) {\n        // one server per accessory is probably the best practice\n        this.dataStreamServer = new DataStreamServer_1.DataStreamServer(); // TODO how to handle Remote+future HKSV controller at the same time?\n        this.lastSetupDataStreamTransportResponse = \"\"; // stripped. excludes ACCESSORY_KEY_SALT\n        var supportedConfiguration = [TransportType.HOMEKIT_DATA_STREAM];\n        this.supportedDataStreamTransportConfiguration = this.buildSupportedDataStreamTransportConfigurationTLV(supportedConfiguration);\n        this.dataStreamTransportManagementService = service || this.constructService();\n        this.setupServiceHandlers();\n    }\n    DataStreamManagement.prototype.destroy = function () {\n        this.dataStreamServer.destroy(); // removes ALL listeners\n        this.dataStreamTransportManagementService.getCharacteristic(Characteristic_1.Characteristic.SetupDataStreamTransport)\n            .removeOnGet()\n            .removeAllListeners(\"set\" /* CharacteristicEventTypes.SET */);\n        this.lastSetupDataStreamTransportResponse = \"\";\n    };\n    /**\n     * @returns the DataStreamTransportManagement service\n     */\n    DataStreamManagement.prototype.getService = function () {\n        return this.dataStreamTransportManagementService;\n    };\n    /**\n     * Registers a new event handler to handle incoming event messages.\n     * The handler is only called for a connection if for the give protocol no ProtocolHandler\n     * was registered on the connection level.\n     *\n     * @param protocol - name of the protocol to register the handler for\n     * @param event - name of the event (also referred to as topic. See {@link Topics} for some known ones)\n     * @param handler - function to be called for every occurring event\n     */\n    DataStreamManagement.prototype.onEventMessage = function (protocol, event, handler) {\n        this.dataStreamServer.onEventMessage(protocol, event, handler);\n        return this;\n    };\n    /**\n     * Removes a registered event handler.\n     *\n     * @param protocol - name of the protocol to unregister the handler for\n     * @param event - name of the event (also referred to as topic. See {@link Topics} for some known ones)\n     * @param handler - registered event handler\n     */\n    DataStreamManagement.prototype.removeEventHandler = function (protocol, event, handler) {\n        this.dataStreamServer.removeEventHandler(protocol, event, handler);\n        return this;\n    };\n    /**\n     * Registers a new request handler to handle incoming request messages.\n     * The handler is only called for a connection if for the give protocol no ProtocolHandler\n     * was registered on the connection level.\n     *\n     * @param protocol - name of the protocol to register the handler for\n     * @param request - name of the request (also referred to as topic. See {@link Topics} for some known ones)\n     * @param handler - function to be called for every occurring request\n     */\n    DataStreamManagement.prototype.onRequestMessage = function (protocol, request, handler) {\n        this.dataStreamServer.onRequestMessage(protocol, request, handler);\n        return this;\n    };\n    /**\n     * Removes a registered request handler.\n     *\n     * @param protocol - name of the protocol to unregister the handler for\n     * @param request - name of the request (also referred to as topic. See {@link Topics} for some known ones)\n     * @param handler - registered request handler\n     */\n    DataStreamManagement.prototype.removeRequestHandler = function (protocol, request, handler) {\n        this.dataStreamServer.removeRequestHandler(protocol, request, handler);\n        return this;\n    };\n    /**\n     * Forwards any event listener for an DataStreamServer event to the DataStreamServer instance\n     *\n     * @param event - the event to register for\n     * @param listener - the event handler\n     */\n    DataStreamManagement.prototype.onServerEvent = function (event, listener) {\n        // @ts-expect-error: event type\n        this.dataStreamServer.on(event, listener);\n        return this;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DataStreamManagement.prototype.handleSetupDataStreamTransportWrite = function (value, callback, connection) {\n        var _this = this;\n        var data = Buffer.from(value, \"base64\");\n        var objects = tlv.decode(data);\n        var sessionCommandType = objects[1 /* SetupDataStreamSessionTypes.SESSION_COMMAND_TYPE */][0];\n        var transportType = objects[2 /* SetupDataStreamSessionTypes.TRANSPORT_TYPE */][0];\n        var controllerKeySalt = objects[3 /* SetupDataStreamSessionTypes.CONTROLLER_KEY_SALT */];\n        debug(\"Received setup write with command %s and transport type %s\", SessionCommandType[sessionCommandType], TransportType[transportType]);\n        if (sessionCommandType === SessionCommandType.START_SESSION) {\n            if (transportType !== TransportType.HOMEKIT_DATA_STREAM || controllerKeySalt.length !== 32) {\n                callback(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */);\n                return;\n            }\n            this.dataStreamServer.prepareSession(connection, controllerKeySalt, function (error, preparedSession) {\n                if (error || !preparedSession) {\n                    callback(error !== null && error !== void 0 ? error : new Error(\"PreparedSession was undefined!\"));\n                    return;\n                }\n                var listeningPort = tlv.encode(1 /* TransportSessionConfiguration.TCP_LISTENING_PORT */, tlv.writeUInt16(preparedSession.port));\n                var response = Buffer.concat([\n                    tlv.encode(1 /* SetupDataStreamWriteResponseTypes.STATUS */, 0 /* DataStreamStatus.SUCCESS */),\n                    tlv.encode(2 /* SetupDataStreamWriteResponseTypes.TRANSPORT_TYPE_SESSION_PARAMETERS */, listeningPort),\n                ]);\n                _this.lastSetupDataStreamTransportResponse = response.toString(\"base64\"); // save last response without accessory key salt\n                response = Buffer.concat([\n                    response,\n                    tlv.encode(3 /* SetupDataStreamWriteResponseTypes.ACCESSORY_KEY_SALT */, preparedSession.accessoryKeySalt),\n                ]);\n                callback(null, response.toString(\"base64\"));\n            });\n        }\n        else {\n            callback(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */);\n            return;\n        }\n    };\n    DataStreamManagement.prototype.buildSupportedDataStreamTransportConfigurationTLV = function (supportedConfiguration) {\n        var buffers = [];\n        supportedConfiguration.forEach(function (type) {\n            var transportType = tlv.encode(1 /* TransportTypeTypes.TRANSPORT_TYPE */, type);\n            var transferTransportConfiguration = tlv.encode(1 /* TransferTransportConfigurationTypes.TRANSFER_TRANSPORT_CONFIGURATION */, transportType);\n            buffers.push(transferTransportConfiguration);\n        });\n        return Buffer.concat(buffers).toString(\"base64\");\n    };\n    DataStreamManagement.prototype.constructService = function () {\n        var dataStreamTransportManagement = new Service_1.Service.DataStreamTransportManagement(\"\", \"\");\n        dataStreamTransportManagement.setCharacteristic(Characteristic_1.Characteristic.SupportedDataStreamTransportConfiguration, this.supportedDataStreamTransportConfiguration);\n        dataStreamTransportManagement.setCharacteristic(Characteristic_1.Characteristic.Version, DataStreamServer_1.DataStreamServer.version);\n        return dataStreamTransportManagement;\n    };\n    DataStreamManagement.prototype.setupServiceHandlers = function () {\n        var _this = this;\n        this.dataStreamTransportManagementService.getCharacteristic(Characteristic_1.Characteristic.SetupDataStreamTransport)\n            .onGet(function () { return _this.lastSetupDataStreamTransportResponse; })\n            .on(\"set\" /* CharacteristicEventTypes.SET */, function (value, callback, context, connection) {\n            if (!connection) {\n                debug(\"Set event handler for SetupDataStreamTransport cannot be called from plugin! Connection undefined!\");\n                callback(-70410 /* HAPStatus.INVALID_VALUE_IN_REQUEST */);\n                return;\n            }\n            _this.handleSetupDataStreamTransportWrite(value, callback, connection);\n        })\n            .updateValue(this.lastSetupDataStreamTransportResponse);\n    };\n    return DataStreamManagement;\n}());\nexports.DataStreamManagement = DataStreamManagement;\n//# sourceMappingURL=DataStreamManagement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DataStreamWriter = exports.DataStreamReader = exports.DataStreamParser = exports.DataFormatTags = exports.UUID = exports.SecondsSince2001 = exports.Float64 = exports.Float32 = exports.Int64 = exports.Int32 = exports.Int16 = exports.Int8 = exports.ValueWrapper = void 0;\nvar tslib_1 = require(\"tslib\");\nvar uuid = tslib_1.__importStar(require(\"../util/uuid\"));\nvar hapCrypto = tslib_1.__importStar(require(\"../util/hapCrypto\"));\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\n// welcome to hell :)\n// in this file lies madness and frustration. and It's not only about HDS. Also, JavaScript is hell\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:DataStream:Parser\");\nvar Magics = /** @class */ (function () {\n    function Magics() {\n    }\n    Magics.TERMINATOR = { type: \"terminator\" };\n    return Magics;\n}());\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar ValueWrapper = /** @class */ (function () {\n    function ValueWrapper(value) {\n        this.value = value;\n    }\n    ValueWrapper.prototype.equals = function (obj) {\n        return this.constructor.name === obj.constructor.name && obj.value === this.value;\n    };\n    return ValueWrapper;\n}());\nexports.ValueWrapper = ValueWrapper;\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar Int8 = /** @class */ (function (_super) {\n    tslib_1.__extends(Int8, _super);\n    function Int8() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return Int8;\n}(ValueWrapper));\nexports.Int8 = Int8;\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar Int16 = /** @class */ (function (_super) {\n    tslib_1.__extends(Int16, _super);\n    function Int16() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return Int16;\n}(ValueWrapper));\nexports.Int16 = Int16;\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar Int32 = /** @class */ (function (_super) {\n    tslib_1.__extends(Int32, _super);\n    function Int32() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return Int32;\n}(ValueWrapper));\nexports.Int32 = Int32;\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar Int64 = /** @class */ (function (_super) {\n    tslib_1.__extends(Int64, _super);\n    function Int64() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return Int64;\n}(ValueWrapper));\nexports.Int64 = Int64;\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar Float32 = /** @class */ (function (_super) {\n    tslib_1.__extends(Float32, _super);\n    function Float32() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return Float32;\n}(ValueWrapper));\nexports.Float32 = Float32;\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar Float64 = /** @class */ (function (_super) {\n    tslib_1.__extends(Float64, _super);\n    function Float64() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return Float64;\n}(ValueWrapper));\nexports.Float64 = Float64;\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar SecondsSince2001 = /** @class */ (function (_super) {\n    tslib_1.__extends(SecondsSince2001, _super);\n    function SecondsSince2001() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return SecondsSince2001;\n}(ValueWrapper));\nexports.SecondsSince2001 = SecondsSince2001;\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar UUID = /** @class */ (function (_super) {\n    tslib_1.__extends(UUID, _super);\n    function UUID(value) {\n        (0, assert_1.default)(uuid.isValid(value), \"invalid uuid format\");\n        return _super.call(this, value) || this;\n    }\n    return UUID;\n}(ValueWrapper));\nexports.UUID = UUID;\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar DataFormatTags;\n(function (DataFormatTags) {\n    DataFormatTags[DataFormatTags[\"INVALID\"] = 0] = \"INVALID\";\n    DataFormatTags[DataFormatTags[\"TRUE\"] = 1] = \"TRUE\";\n    DataFormatTags[DataFormatTags[\"FALSE\"] = 2] = \"FALSE\";\n    DataFormatTags[DataFormatTags[\"TERMINATOR\"] = 3] = \"TERMINATOR\";\n    DataFormatTags[DataFormatTags[\"NULL\"] = 4] = \"NULL\";\n    DataFormatTags[DataFormatTags[\"UUID\"] = 5] = \"UUID\";\n    DataFormatTags[DataFormatTags[\"DATE\"] = 6] = \"DATE\";\n    DataFormatTags[DataFormatTags[\"INTEGER_MINUS_ONE\"] = 7] = \"INTEGER_MINUS_ONE\";\n    DataFormatTags[DataFormatTags[\"INTEGER_RANGE_START_0\"] = 8] = \"INTEGER_RANGE_START_0\";\n    DataFormatTags[DataFormatTags[\"INTEGER_RANGE_STOP_39\"] = 46] = \"INTEGER_RANGE_STOP_39\";\n    DataFormatTags[DataFormatTags[\"INT8\"] = 48] = \"INT8\";\n    DataFormatTags[DataFormatTags[\"INT16LE\"] = 49] = \"INT16LE\";\n    DataFormatTags[DataFormatTags[\"INT32LE\"] = 50] = \"INT32LE\";\n    DataFormatTags[DataFormatTags[\"INT64LE\"] = 51] = \"INT64LE\";\n    DataFormatTags[DataFormatTags[\"FLOAT32LE\"] = 53] = \"FLOAT32LE\";\n    DataFormatTags[DataFormatTags[\"FLOAT64LE\"] = 54] = \"FLOAT64LE\";\n    DataFormatTags[DataFormatTags[\"UTF8_LENGTH_START\"] = 64] = \"UTF8_LENGTH_START\";\n    DataFormatTags[DataFormatTags[\"UTF8_LENGTH_STOP\"] = 96] = \"UTF8_LENGTH_STOP\";\n    DataFormatTags[DataFormatTags[\"UTF8_LENGTH8\"] = 97] = \"UTF8_LENGTH8\";\n    DataFormatTags[DataFormatTags[\"UTF8_LENGTH16LE\"] = 98] = \"UTF8_LENGTH16LE\";\n    DataFormatTags[DataFormatTags[\"UTF8_LENGTH32LE\"] = 99] = \"UTF8_LENGTH32LE\";\n    DataFormatTags[DataFormatTags[\"UTF8_LENGTH64LE\"] = 100] = \"UTF8_LENGTH64LE\";\n    DataFormatTags[DataFormatTags[\"UTF8_NULL_TERMINATED\"] = 111] = \"UTF8_NULL_TERMINATED\";\n    DataFormatTags[DataFormatTags[\"DATA_LENGTH_START\"] = 112] = \"DATA_LENGTH_START\";\n    DataFormatTags[DataFormatTags[\"DATA_LENGTH_STOP\"] = 144] = \"DATA_LENGTH_STOP\";\n    DataFormatTags[DataFormatTags[\"DATA_LENGTH8\"] = 145] = \"DATA_LENGTH8\";\n    DataFormatTags[DataFormatTags[\"DATA_LENGTH16LE\"] = 146] = \"DATA_LENGTH16LE\";\n    DataFormatTags[DataFormatTags[\"DATA_LENGTH32LE\"] = 147] = \"DATA_LENGTH32LE\";\n    DataFormatTags[DataFormatTags[\"DATA_LENGTH64LE\"] = 148] = \"DATA_LENGTH64LE\";\n    DataFormatTags[DataFormatTags[\"DATA_TERMINATED\"] = 159] = \"DATA_TERMINATED\";\n    DataFormatTags[DataFormatTags[\"COMPRESSION_START\"] = 160] = \"COMPRESSION_START\";\n    DataFormatTags[DataFormatTags[\"COMPRESSION_STOP\"] = 207] = \"COMPRESSION_STOP\";\n    DataFormatTags[DataFormatTags[\"ARRAY_LENGTH_START\"] = 208] = \"ARRAY_LENGTH_START\";\n    DataFormatTags[DataFormatTags[\"ARRAY_LENGTH_STOP\"] = 222] = \"ARRAY_LENGTH_STOP\";\n    DataFormatTags[DataFormatTags[\"ARRAY_TERMINATED\"] = 223] = \"ARRAY_TERMINATED\";\n    DataFormatTags[DataFormatTags[\"DICTIONARY_LENGTH_START\"] = 224] = \"DICTIONARY_LENGTH_START\";\n    DataFormatTags[DataFormatTags[\"DICTIONARY_LENGTH_STOP\"] = 238] = \"DICTIONARY_LENGTH_STOP\";\n    DataFormatTags[DataFormatTags[\"DICTIONARY_TERMINATED\"] = 239] = \"DICTIONARY_TERMINATED\";\n})(DataFormatTags || (exports.DataFormatTags = DataFormatTags = {}));\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar DataStreamParser = /** @class */ (function () {\n    function DataStreamParser() {\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DataStreamParser.decode = function (buffer) {\n        var tag = buffer.readTag();\n        if (tag === 0 /* DataFormatTags.INVALID */) {\n            throw new Error(\"HDSDecoder: zero tag detected on index \" + buffer.readerIndex);\n        }\n        else if (tag === 1 /* DataFormatTags.TRUE */) {\n            return buffer.readTrue();\n        }\n        else if (tag === 2 /* DataFormatTags.FALSE */) {\n            return buffer.readFalse();\n        }\n        else if (tag === 3 /* DataFormatTags.TERMINATOR */) {\n            return Magics.TERMINATOR;\n        }\n        else if (tag === 4 /* DataFormatTags.NULL */) {\n            return null;\n        }\n        else if (tag === 5 /* DataFormatTags.UUID */) {\n            return buffer.readUUID();\n        }\n        else if (tag === 6 /* DataFormatTags.DATE */) {\n            return buffer.readSecondsSince2001_01_01();\n        }\n        else if (tag === 7 /* DataFormatTags.INTEGER_MINUS_ONE */) {\n            return buffer.readNegOne();\n        }\n        else if (tag >= 8 /* DataFormatTags.INTEGER_RANGE_START_0 */ && tag <= 46 /* DataFormatTags.INTEGER_RANGE_STOP_39 */) {\n            return buffer.readIntRange(tag); // integer values from 0-39\n        }\n        else if (tag === 48 /* DataFormatTags.INT8 */) {\n            return buffer.readInt8();\n        }\n        else if (tag === 49 /* DataFormatTags.INT16LE */) {\n            return buffer.readInt16LE();\n        }\n        else if (tag === 50 /* DataFormatTags.INT32LE */) {\n            return buffer.readInt32LE();\n        }\n        else if (tag === 51 /* DataFormatTags.INT64LE */) {\n            return buffer.readInt64LE();\n        }\n        else if (tag === 53 /* DataFormatTags.FLOAT32LE */) {\n            return buffer.readFloat32LE();\n        }\n        else if (tag === 54 /* DataFormatTags.FLOAT64LE */) {\n            return buffer.readFloat64LE();\n        }\n        else if (tag >= 64 /* DataFormatTags.UTF8_LENGTH_START */ && tag <= 96 /* DataFormatTags.UTF8_LENGTH_STOP */) {\n            var length = tag - 64 /* DataFormatTags.UTF8_LENGTH_START */;\n            return buffer.readUTF8(length);\n        }\n        else if (tag === 97 /* DataFormatTags.UTF8_LENGTH8 */) {\n            return buffer.readUTF8_Length8();\n        }\n        else if (tag === 98 /* DataFormatTags.UTF8_LENGTH16LE */) {\n            return buffer.readUTF8_Length16LE();\n        }\n        else if (tag === 99 /* DataFormatTags.UTF8_LENGTH32LE */) {\n            return buffer.readUTF8_Length32LE();\n        }\n        else if (tag === 100 /* DataFormatTags.UTF8_LENGTH64LE */) {\n            return buffer.readUTF8_Length64LE();\n        }\n        else if (tag === 111 /* DataFormatTags.UTF8_NULL_TERMINATED */) {\n            return buffer.readUTF8_NULL_terminated();\n        }\n        else if (tag >= 112 /* DataFormatTags.DATA_LENGTH_START */ && tag <= 144 /* DataFormatTags.DATA_LENGTH_STOP */) {\n            var length = tag - 112 /* DataFormatTags.DATA_LENGTH_START */;\n            buffer.readData(length);\n        }\n        else if (tag === 145 /* DataFormatTags.DATA_LENGTH8 */) {\n            return buffer.readData_Length8();\n        }\n        else if (tag === 146 /* DataFormatTags.DATA_LENGTH16LE */) {\n            return buffer.readData_Length16LE();\n        }\n        else if (tag === 147 /* DataFormatTags.DATA_LENGTH32LE */) {\n            return buffer.readData_Length32LE();\n        }\n        else if (tag === 148 /* DataFormatTags.DATA_LENGTH64LE */) {\n            return buffer.readData_Length64LE();\n        }\n        else if (tag === 159 /* DataFormatTags.DATA_TERMINATED */) {\n            return buffer.readData_terminated();\n        }\n        else if (tag >= 160 /* DataFormatTags.COMPRESSION_START */ && tag <= 207 /* DataFormatTags.COMPRESSION_STOP */) {\n            var index = tag - 160 /* DataFormatTags.COMPRESSION_START */;\n            return buffer.decompressData(index);\n        }\n        else if (tag >= 208 /* DataFormatTags.ARRAY_LENGTH_START */ && tag <= 222 /* DataFormatTags.ARRAY_LENGTH_STOP */) {\n            var length = tag - 208 /* DataFormatTags.ARRAY_LENGTH_START */;\n            var array = [];\n            for (var i = 0; i < length; i++) {\n                array.push(this.decode(buffer));\n            }\n            return array;\n        }\n        else if (tag === 223 /* DataFormatTags.ARRAY_TERMINATED */) {\n            var array = [];\n            var element = void 0;\n            while ((element = this.decode(buffer)) !== Magics.TERMINATOR) {\n                array.push(element);\n            }\n            return array;\n        }\n        else if (tag >= 224 /* DataFormatTags.DICTIONARY_LENGTH_START */ && tag <= 238 /* DataFormatTags.DICTIONARY_LENGTH_STOP */) {\n            var length = tag - 224 /* DataFormatTags.DICTIONARY_LENGTH_START */;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var dictionary = {};\n            for (var i = 0; i < length; i++) {\n                var key = this.decode(buffer);\n                dictionary[key] = this.decode(buffer);\n            }\n            return dictionary;\n        }\n        else if (tag === 239 /* DataFormatTags.DICTIONARY_TERMINATED */) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var dictionary = {};\n            var key = void 0;\n            while ((key = this.decode(buffer)) !== Magics.TERMINATOR) {\n                dictionary[key] = this.decode(buffer); // decode value\n            }\n            return dictionary;\n        }\n        else {\n            throw new Error(\"HDSDecoder: encountered unknown tag on index \" + buffer.readerIndex + \": \" + tag.toString(16));\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types,@typescript-eslint/no-explicit-any\n    DataStreamParser.encode = function (data, buffer) {\n        var _this = this;\n        if (data === undefined) {\n            throw new Error(\"HDSEncoder: cannot encode undefined\");\n        }\n        if (data === null) {\n            buffer.writeTag(4 /* DataFormatTags.NULL */);\n            return;\n        }\n        switch (typeof data) {\n            case \"boolean\":\n                if (data) {\n                    buffer.writeTrue();\n                }\n                else {\n                    buffer.writeFalse();\n                }\n                break;\n            case \"number\":\n                if (Number.isInteger(data)) {\n                    buffer.writeNumber(data);\n                }\n                else {\n                    buffer.writeFloat64LE(new Float64(data));\n                }\n                break;\n            case \"string\":\n                buffer.writeUTF8(data);\n                break;\n            case \"object\":\n                if (Array.isArray(data)) {\n                    var length = data.length;\n                    if (length <= 12) {\n                        buffer.writeTag(208 /* DataFormatTags.ARRAY_LENGTH_START */ + length);\n                    }\n                    else {\n                        buffer.writeTag(223 /* DataFormatTags.ARRAY_TERMINATED */);\n                    }\n                    data.forEach(function (element) {\n                        _this.encode(element, buffer);\n                    });\n                    if (length > 12) {\n                        buffer.writeTag(3 /* DataFormatTags.TERMINATOR */);\n                    }\n                }\n                else if (data instanceof ValueWrapper) {\n                    if (data instanceof Int8) {\n                        buffer.writeInt8(data);\n                    }\n                    else if (data instanceof Int16) {\n                        buffer.writeInt16LE(data);\n                    }\n                    else if (data instanceof Int32) {\n                        buffer.writeInt32LE(data);\n                    }\n                    else if (data instanceof Int64) {\n                        buffer.writeInt64LE(data);\n                    }\n                    else if (data instanceof Float32) {\n                        buffer.writeFloat32LE(data);\n                    }\n                    else if (data instanceof Float64) {\n                        buffer.writeFloat64LE(data);\n                    }\n                    else if (data instanceof SecondsSince2001) {\n                        buffer.writeSecondsSince2001_01_01(data);\n                    }\n                    else if (data instanceof UUID) {\n                        buffer.writeUUID(data.value);\n                    }\n                    else {\n                        throw new Error(\"Unknown wrapped object 'ValueWrapper' of class \" + data.constructor.name);\n                    }\n                }\n                else if (data instanceof Buffer) {\n                    buffer.writeData(data);\n                }\n                else { // object is treated as dictionary\n                    var entries = Object.entries(data)\n                        .filter(function (entry) { return entry[1] !== undefined; }); // explicitly setting undefined will result in an entry here\n                    if (entries.length <= 14) {\n                        buffer.writeTag(224 /* DataFormatTags.DICTIONARY_LENGTH_START */ + entries.length);\n                    }\n                    else {\n                        buffer.writeTag(239 /* DataFormatTags.DICTIONARY_TERMINATED */);\n                    }\n                    entries.forEach(function (entry) {\n                        _this.encode(entry[0], buffer); // encode key\n                        _this.encode(entry[1], buffer); // encode value\n                    });\n                    if (entries.length > 14) {\n                        buffer.writeTag(3 /* DataFormatTags.TERMINATOR */);\n                    }\n                }\n                break;\n            default:\n                throw new Error(\"HDSEncoder: no idea how to encode value of type '\" + (typeof data) + \"': \" + data);\n        }\n    };\n    return DataStreamParser;\n}());\nexports.DataStreamParser = DataStreamParser;\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar DataStreamReader = /** @class */ (function () {\n    function DataStreamReader(data) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.trackedCompressedData = [];\n        this.data = data;\n        this.readerIndex = 0;\n    }\n    DataStreamReader.prototype.finished = function () {\n        if (this.readerIndex < this.data.length) {\n            var remainingHex = this.data.slice(this.readerIndex, this.data.length).toString(\"hex\");\n            debug(\"WARNING Finished reading HDS stream, but there are still %d bytes remaining () %s\", this.data.length - this.readerIndex, remainingHex);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DataStreamReader.prototype.decompressData = function (index) {\n        if (index >= this.trackedCompressedData.length) {\n            throw new Error(\"HDSDecoder: Tried decompression of data for an index out of range (index \" + index +\n                \" and got \" + this.trackedCompressedData.length + \" elements)\");\n        }\n        return this.trackedCompressedData[index];\n    };\n    DataStreamReader.prototype.trackData = function (data) {\n        this.trackedCompressedData.push(data);\n        return data;\n    };\n    DataStreamReader.prototype.ensureLength = function (bytes) {\n        if (this.readerIndex + bytes > this.data.length) {\n            var remaining = this.data.length - this.readerIndex;\n            throw new Error(\"HDSDecoder: End of data stream. Tried reading \" + bytes + \" bytes however got only \" + remaining + \" remaining!\");\n        }\n    };\n    DataStreamReader.prototype.readTag = function () {\n        this.ensureLength(1);\n        return this.data.readUInt8(this.readerIndex++);\n    };\n    DataStreamReader.prototype.readTrue = function () {\n        return this.trackData(true); // do those tag encoded values get cached?\n    };\n    DataStreamReader.prototype.readFalse = function () {\n        return this.trackData(false);\n    };\n    DataStreamReader.prototype.readNegOne = function () {\n        return this.trackData(-1);\n    };\n    DataStreamReader.prototype.readIntRange = function (tag) {\n        return this.trackData(tag - 8 /* DataFormatTags.INTEGER_RANGE_START_0 */); // integer values from 0-39\n    };\n    DataStreamReader.prototype.readInt8 = function () {\n        this.ensureLength(1);\n        return this.trackData(this.data.readInt8(this.readerIndex++));\n    };\n    DataStreamReader.prototype.readInt16LE = function () {\n        this.ensureLength(2);\n        var value = this.data.readInt16LE(this.readerIndex);\n        this.readerIndex += 2;\n        return this.trackData(value);\n    };\n    DataStreamReader.prototype.readInt32LE = function () {\n        this.ensureLength(4);\n        var value = this.data.readInt32LE(this.readerIndex);\n        this.readerIndex += 4;\n        return this.trackData(value);\n    };\n    DataStreamReader.prototype.readInt64LE = function () {\n        this.ensureLength(8);\n        var low = this.data.readInt32LE(this.readerIndex);\n        var value = this.data.readInt32LE(this.readerIndex + 4) * 0x100000000 + low;\n        if (low < 0) {\n            value += 0x100000000;\n        }\n        this.readerIndex += 8;\n        return this.trackData(value);\n    };\n    DataStreamReader.prototype.readFloat32LE = function () {\n        this.ensureLength(4);\n        var value = this.data.readFloatLE(this.readerIndex);\n        this.readerIndex += 4;\n        return this.trackData(value);\n    };\n    DataStreamReader.prototype.readFloat64LE = function () {\n        this.ensureLength(8);\n        var value = this.data.readDoubleLE(this.readerIndex);\n        return this.trackData(value);\n    };\n    DataStreamReader.prototype.readLength8 = function () {\n        this.ensureLength(1);\n        return this.data.readUInt8(this.readerIndex++);\n    };\n    DataStreamReader.prototype.readLength16LE = function () {\n        this.ensureLength(2);\n        var value = this.data.readUInt16LE(this.readerIndex);\n        this.readerIndex += 2;\n        return value;\n    };\n    DataStreamReader.prototype.readLength32LE = function () {\n        this.ensureLength(4);\n        var value = this.data.readUInt32LE(this.readerIndex);\n        this.readerIndex += 4;\n        return value;\n    };\n    DataStreamReader.prototype.readLength64LE = function () {\n        this.ensureLength(8);\n        var low = this.data.readUInt32LE(this.readerIndex);\n        var value = this.data.readUInt32LE(this.readerIndex + 4) * 0x100000000 + low;\n        this.readerIndex += 8;\n        return value;\n    };\n    DataStreamReader.prototype.readUTF8 = function (length) {\n        this.ensureLength(length);\n        var value = this.data.toString(\"utf8\", this.readerIndex, this.readerIndex + length);\n        this.readerIndex += length;\n        return this.trackData(value);\n    };\n    DataStreamReader.prototype.readUTF8_Length8 = function () {\n        var length = this.readLength8();\n        return this.readUTF8(length);\n    };\n    DataStreamReader.prototype.readUTF8_Length16LE = function () {\n        var length = this.readLength16LE();\n        return this.readUTF8(length);\n    };\n    DataStreamReader.prototype.readUTF8_Length32LE = function () {\n        var length = this.readLength32LE();\n        return this.readUTF8(length);\n    };\n    DataStreamReader.prototype.readUTF8_Length64LE = function () {\n        var length = this.readLength64LE();\n        return this.readUTF8(length);\n    };\n    DataStreamReader.prototype.readUTF8_NULL_terminated = function () {\n        var offset = this.readerIndex;\n        var nextByte;\n        for (;;) {\n            nextByte = this.data[offset];\n            if (nextByte === undefined) {\n                throw new Error(\"HDSDecoder: Reached end of data stream while reading NUL terminated string!\");\n            }\n            else if (nextByte === 0) {\n                break;\n            }\n            else {\n                offset++;\n            }\n        }\n        var value = this.data.toString(\"utf8\", this.readerIndex, offset);\n        this.readerIndex = offset + 1;\n        return this.trackData(value);\n    };\n    DataStreamReader.prototype.readData = function (length) {\n        this.ensureLength(length);\n        var value = this.data.slice(this.readerIndex, this.readerIndex + length);\n        this.readerIndex += length;\n        return this.trackData(value);\n    };\n    DataStreamReader.prototype.readData_Length8 = function () {\n        var length = this.readLength8();\n        return this.readData(length);\n    };\n    DataStreamReader.prototype.readData_Length16LE = function () {\n        var length = this.readLength16LE();\n        return this.readData(length);\n    };\n    DataStreamReader.prototype.readData_Length32LE = function () {\n        var length = this.readLength32LE();\n        return this.readData(length);\n    };\n    DataStreamReader.prototype.readData_Length64LE = function () {\n        var length = this.readLength64LE();\n        return this.readData(length);\n    };\n    DataStreamReader.prototype.readData_terminated = function () {\n        var offset = this.readerIndex;\n        var nextByte;\n        for (;;) {\n            nextByte = this.data[offset];\n            if (nextByte === undefined) {\n                throw new Error(\"HDSDecoder: Reached end of data stream while reading terminated data!\");\n            }\n            else if (nextByte === 3 /* DataFormatTags.TERMINATOR */) {\n                break;\n            }\n            else {\n                offset++;\n            }\n        }\n        var value = this.data.slice(this.readerIndex, offset);\n        this.readerIndex = offset + 1;\n        return this.trackData(value);\n    };\n    DataStreamReader.prototype.readSecondsSince2001_01_01 = function () {\n        // second since 2001-01-01 00:00:00\n        return this.readFloat64LE();\n    };\n    DataStreamReader.prototype.readUUID = function () {\n        this.ensureLength(16);\n        var value = uuid.unparse(this.data, this.readerIndex);\n        this.readerIndex += 16;\n        return this.trackData(value);\n    };\n    return DataStreamReader;\n}());\nexports.DataStreamReader = DataStreamReader;\nvar WrittenDataList = /** @class */ (function () {\n    function WrittenDataList() {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.writtenData = [];\n    }\n    WrittenDataList.prototype.push = function (data) {\n        this.writtenData.push(data);\n    };\n    WrittenDataList.prototype.indexOf = function (data) {\n        for (var i = 0; i < this.writtenData.length; i++) {\n            var data0 = this.writtenData[i];\n            if (data === data0) {\n                return i;\n            }\n            if (data instanceof ValueWrapper && data0 instanceof ValueWrapper) {\n                if (data.equals(data0)) {\n                    return i;\n                }\n            }\n        }\n        return -1;\n    };\n    return WrittenDataList;\n}());\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar DataStreamWriter = /** @class */ (function () {\n    function DataStreamWriter() {\n        this.writtenData = new WrittenDataList();\n        this.data = Buffer.alloc(DataStreamWriter.chunkSize);\n        this.writerIndex = 0;\n    }\n    DataStreamWriter.prototype.length = function () {\n        return this.writerIndex; // since writerIndex points to the next FREE index it also represents the length\n    };\n    DataStreamWriter.prototype.getData = function () {\n        return this.data.slice(0, this.writerIndex);\n    };\n    DataStreamWriter.prototype.ensureLength = function (bytes) {\n        var neededBytes = (this.writerIndex + bytes) - this.data.length;\n        if (neededBytes > 0) {\n            var chunks = Math.ceil(neededBytes / DataStreamWriter.chunkSize);\n            // don't know if it's best for performance to immediately concatenate the buffers. That way it's\n            // the easiest way to handle writing though.\n            this.data = Buffer.concat([this.data, Buffer.alloc(chunks * DataStreamWriter.chunkSize)]);\n        }\n    };\n    DataStreamWriter.prototype.compressDataIfPossible = function (data) {\n        var index = this.writtenData.indexOf(data);\n        if (index < 0) {\n            // data is not present yet\n            this.writtenData.push(data);\n            return false;\n        }\n        else if (index <= 207 /* DataFormatTags.COMPRESSION_STOP */ - 160 /* DataFormatTags.COMPRESSION_START */) {\n            // data was already written and the index is in the applicable range => shorten the payload\n            this.writeTag(160 /* DataFormatTags.COMPRESSION_START */ + index);\n            return true;\n        }\n        return false;\n    };\n    DataStreamWriter.prototype.writeTag = function (tag) {\n        this.ensureLength(1);\n        this.data.writeUInt8(tag, this.writerIndex++);\n    };\n    DataStreamWriter.prototype.writeTrue = function () {\n        this.writeTag(1 /* DataFormatTags.TRUE */);\n    };\n    DataStreamWriter.prototype.writeFalse = function () {\n        this.writeTag(2 /* DataFormatTags.FALSE */);\n    };\n    DataStreamWriter.prototype.writeNumber = function (number) {\n        if (number === -1) {\n            this.writeTag(7 /* DataFormatTags.INTEGER_MINUS_ONE */);\n        }\n        else if (number >= 0 && number <= 39) {\n            this.writeTag(8 /* DataFormatTags.INTEGER_RANGE_START_0 */ + number);\n        }\n        else if (number >= -128 && number <= 127) {\n            this.writeInt8(new Int8(number));\n        }\n        else if (number >= -32768 && number <= 32767) {\n            this.writeInt16LE(new Int16(number));\n        }\n        else if (number >= -2147483648 && number <= -2147483648) {\n            this.writeInt32LE(new Int32(number));\n        }\n        else if (number >= Number.MIN_SAFE_INTEGER && number <= Number.MAX_SAFE_INTEGER) { // use correct uin64 restriction when we convert to bigint\n            this.writeInt64LE(new Int64(number));\n        }\n        else {\n            throw new Error(\"Tried writing unrepresentable number (\" + number + \")\");\n        }\n    };\n    DataStreamWriter.prototype.writeInt8 = function (int8) {\n        if (this.compressDataIfPossible(int8)) {\n            return;\n        }\n        this.ensureLength(2);\n        this.writeTag(48 /* DataFormatTags.INT8 */);\n        this.data.writeInt8(int8.value, this.writerIndex++);\n    };\n    DataStreamWriter.prototype.writeInt16LE = function (int16) {\n        if (this.compressDataIfPossible(int16)) {\n            return;\n        }\n        this.ensureLength(3);\n        this.writeTag(49 /* DataFormatTags.INT16LE */);\n        this.data.writeInt16LE(int16.value, this.writerIndex);\n        this.writerIndex += 2;\n    };\n    DataStreamWriter.prototype.writeInt32LE = function (int32) {\n        if (this.compressDataIfPossible(int32)) {\n            return;\n        }\n        this.ensureLength(5);\n        this.writeTag(50 /* DataFormatTags.INT32LE */);\n        this.data.writeInt32LE(int32.value, this.writerIndex);\n        this.writerIndex += 4;\n    };\n    DataStreamWriter.prototype.writeInt64LE = function (int64) {\n        if (this.compressDataIfPossible(int64)) {\n            return;\n        }\n        this.ensureLength(9);\n        this.writeTag(51 /* DataFormatTags.INT64LE */);\n        this.data.writeUInt32LE(int64.value, this.writerIndex); // TODO correctly implement int64; currently it's basically an int32\n        this.data.writeUInt32LE(0, this.writerIndex + 4);\n        this.writerIndex += 8;\n    };\n    DataStreamWriter.prototype.writeFloat32LE = function (float32) {\n        if (this.compressDataIfPossible(float32)) {\n            return;\n        }\n        this.ensureLength(5);\n        this.writeTag(53 /* DataFormatTags.FLOAT32LE */);\n        this.data.writeFloatLE(float32.value, this.writerIndex);\n        this.writerIndex += 4;\n    };\n    DataStreamWriter.prototype.writeFloat64LE = function (float64) {\n        if (this.compressDataIfPossible(float64)) {\n            return;\n        }\n        this.ensureLength(9);\n        this.writeTag(54 /* DataFormatTags.FLOAT64LE */);\n        this.data.writeDoubleLE(float64.value, this.writerIndex);\n        this.writerIndex += 8;\n    };\n    DataStreamWriter.prototype.writeLength8 = function (length) {\n        this.ensureLength(1);\n        this.data.writeUInt8(length, this.writerIndex++);\n    };\n    DataStreamWriter.prototype.writeLength16LE = function (length) {\n        this.ensureLength(2);\n        this.data.writeUInt16LE(length, this.writerIndex);\n        this.writerIndex += 2;\n    };\n    DataStreamWriter.prototype.writeLength32LE = function (length) {\n        this.ensureLength(4);\n        this.data.writeUInt32LE(length, this.writerIndex);\n        this.writerIndex += 4;\n    };\n    DataStreamWriter.prototype.writeLength64LE = function (length) {\n        this.ensureLength(8);\n        hapCrypto.writeUInt64LE(length, this.data, this.writerIndex);\n        this.writerIndex += 8;\n    };\n    DataStreamWriter.prototype.writeUTF8 = function (utf8) {\n        if (this.compressDataIfPossible(utf8)) {\n            return;\n        }\n        var length = Buffer.byteLength(utf8);\n        if (length <= 32) {\n            this.ensureLength(1 + length);\n            this.writeTag(64 /* DataFormatTags.UTF8_LENGTH_START */ + utf8.length);\n            this._writeUTF8(utf8);\n        }\n        else if (length <= 255) {\n            this.writeUTF8_Length8(utf8);\n        }\n        else if (length <= 65535) {\n            this.writeUTF8_Length16LE(utf8);\n        }\n        else if (length <= 4294967295) {\n            this.writeUTF8_Length32LE(utf8);\n        }\n        else if (length <= Number.MAX_SAFE_INTEGER) { // use correct uin64 restriction when we convert to bigint\n            this.writeUTF8_Length64LE(utf8);\n        }\n        else {\n            this.writeUTF8_NULL_terminated(utf8);\n        }\n    };\n    DataStreamWriter.prototype._writeUTF8 = function (utf8) {\n        var byteLength = Buffer.byteLength(utf8);\n        this.ensureLength(byteLength);\n        this.data.write(utf8, this.writerIndex, byteLength, \"utf8\");\n        this.writerIndex += byteLength;\n    };\n    DataStreamWriter.prototype.writeUTF8_Length8 = function (utf8) {\n        var length = Buffer.byteLength(utf8);\n        this.ensureLength(2 + length);\n        this.writeTag(97 /* DataFormatTags.UTF8_LENGTH8 */);\n        this.writeLength8(length);\n        this._writeUTF8(utf8);\n    };\n    DataStreamWriter.prototype.writeUTF8_Length16LE = function (utf8) {\n        var length = Buffer.byteLength(utf8);\n        this.ensureLength(3 + length);\n        this.writeTag(98 /* DataFormatTags.UTF8_LENGTH16LE */);\n        this.writeLength16LE(length);\n        this._writeUTF8(utf8);\n    };\n    DataStreamWriter.prototype.writeUTF8_Length32LE = function (utf8) {\n        var length = Buffer.byteLength(utf8);\n        this.ensureLength(5 + length);\n        this.writeTag(99 /* DataFormatTags.UTF8_LENGTH32LE */);\n        this.writeLength32LE(length);\n        this._writeUTF8(utf8);\n    };\n    DataStreamWriter.prototype.writeUTF8_Length64LE = function (utf8) {\n        var length = Buffer.byteLength(utf8);\n        this.ensureLength(9 + length);\n        this.writeTag(100 /* DataFormatTags.UTF8_LENGTH64LE */);\n        this.writeLength64LE(length);\n        this._writeUTF8(utf8);\n    };\n    DataStreamWriter.prototype.writeUTF8_NULL_terminated = function (utf8) {\n        this.ensureLength(1 + Buffer.byteLength(utf8) + 1);\n        this.writeTag(111 /* DataFormatTags.UTF8_NULL_TERMINATED */);\n        this._writeUTF8(utf8);\n        this.data.writeUInt8(0, this.writerIndex++);\n    };\n    DataStreamWriter.prototype.writeData = function (data) {\n        if (this.compressDataIfPossible(data)) {\n            return;\n        }\n        if (data.length <= 32) {\n            this.writeTag(112 /* DataFormatTags.DATA_LENGTH_START */ + data.length);\n            this._writeData(data);\n        }\n        else if (data.length <= 255) {\n            this.writeData_Length8(data);\n        }\n        else if (data.length <= 65535) {\n            this.writeData_Length16LE(data);\n        }\n        else if (data.length <= 4294967295) {\n            this.writeData_Length32LE(data);\n        }\n        else if (data.length <= Number.MAX_SAFE_INTEGER) {\n            this.writeData_Length64LE(data);\n        }\n        else {\n            this.writeData_terminated(data);\n        }\n    };\n    DataStreamWriter.prototype._writeData = function (data) {\n        this.ensureLength(data.length);\n        for (var i = 0; i < data.length; i++) {\n            this.data[this.writerIndex++] = data[i];\n        }\n    };\n    DataStreamWriter.prototype.writeData_Length8 = function (data) {\n        this.ensureLength(2 + data.length);\n        this.writeTag(145 /* DataFormatTags.DATA_LENGTH8 */);\n        this.writeLength8(data.length);\n        this._writeData(data);\n    };\n    DataStreamWriter.prototype.writeData_Length16LE = function (data) {\n        this.ensureLength(3 + data.length);\n        this.writeTag(146 /* DataFormatTags.DATA_LENGTH16LE */);\n        this.writeLength16LE(data.length);\n        this._writeData(data);\n    };\n    DataStreamWriter.prototype.writeData_Length32LE = function (data) {\n        this.ensureLength(5 + data.length);\n        this.writeTag(147 /* DataFormatTags.DATA_LENGTH32LE */);\n        this.writeLength32LE(data.length);\n        this._writeData(data);\n    };\n    DataStreamWriter.prototype.writeData_Length64LE = function (data) {\n        this.ensureLength(9 + data.length);\n        this.writeTag(148 /* DataFormatTags.DATA_LENGTH64LE */);\n        this.writeLength64LE(data.length);\n        this._writeData(data);\n    };\n    DataStreamWriter.prototype.writeData_terminated = function (data) {\n        this.ensureLength(1 + data.length + 1);\n        this.writeTag(159 /* DataFormatTags.DATA_TERMINATED */);\n        this._writeData(data);\n        this.writeTag(3 /* DataFormatTags.TERMINATOR */);\n    };\n    DataStreamWriter.prototype.writeSecondsSince2001_01_01 = function (seconds) {\n        if (this.compressDataIfPossible(seconds)) {\n            return;\n        }\n        this.ensureLength(9);\n        this.writeTag(6 /* DataFormatTags.DATE */);\n        this.data.writeDoubleLE(seconds.value, this.writerIndex);\n        this.writerIndex += 8;\n    };\n    DataStreamWriter.prototype.writeUUID = function (uuid_string) {\n        (0, assert_1.default)(uuid.isValid(uuid_string), \"supplied uuid is invalid\");\n        if (this.compressDataIfPossible(new UUID(uuid_string))) {\n            return;\n        }\n        this.ensureLength(17);\n        this.writeTag(5 /* DataFormatTags.UUID */);\n        uuid.write(uuid_string, this.data, this.writerIndex);\n        this.writerIndex += 16;\n    };\n    DataStreamWriter.chunkSize = 128; // seems to be a good default\n    return DataStreamWriter;\n}());\nexports.DataStreamWriter = DataStreamWriter;\n//# sourceMappingURL=DataStreamParser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DataStreamConnection = exports.HDSConnectionError = exports.HDSConnectionErrorType = exports.DataStreamConnectionEvent = exports.DataStreamServer = exports.DataStreamServerEvent = exports.MessageType = exports.HDSProtocolError = exports.HDSProtocolSpecificErrorReason = exports.HDSStatus = exports.Topics = exports.Protocols = void 0;\nvar tslib_1 = require(\"tslib\");\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar crypto_1 = tslib_1.__importDefault(require(\"crypto\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar events_1 = require(\"events\");\nvar net_1 = tslib_1.__importDefault(require(\"net\"));\nvar hapCrypto = tslib_1.__importStar(require(\"../util/hapCrypto\"));\nvar DataStreamParser_1 = require(\"./DataStreamParser\");\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:DataStream:Server\");\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar Protocols;\n(function (Protocols) {\n    Protocols[\"CONTROL\"] = \"control\";\n    Protocols[\"TARGET_CONTROL\"] = \"targetControl\";\n    Protocols[\"DATA_SEND\"] = \"dataSend\";\n})(Protocols || (exports.Protocols = Protocols = {}));\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar Topics;\n(function (Topics) {\n    // control\n    Topics[\"HELLO\"] = \"hello\";\n    // targetControl\n    Topics[\"WHOAMI\"] = \"whoami\";\n    // dataSend\n    Topics[\"OPEN\"] = \"open\";\n    Topics[\"DATA\"] = \"data\";\n    Topics[\"ACK\"] = \"ack\";\n    Topics[\"CLOSE\"] = \"close\";\n})(Topics || (exports.Topics = Topics = {}));\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar HDSStatus;\n(function (HDSStatus) {\n    // noinspection JSUnusedGlobalSymbols\n    HDSStatus[HDSStatus[\"SUCCESS\"] = 0] = \"SUCCESS\";\n    HDSStatus[HDSStatus[\"OUT_OF_MEMORY\"] = 1] = \"OUT_OF_MEMORY\";\n    HDSStatus[HDSStatus[\"TIMEOUT\"] = 2] = \"TIMEOUT\";\n    HDSStatus[HDSStatus[\"HEADER_ERROR\"] = 3] = \"HEADER_ERROR\";\n    HDSStatus[HDSStatus[\"PAYLOAD_ERROR\"] = 4] = \"PAYLOAD_ERROR\";\n    HDSStatus[HDSStatus[\"MISSING_PROTOCOL\"] = 5] = \"MISSING_PROTOCOL\";\n    HDSStatus[HDSStatus[\"PROTOCOL_SPECIFIC_ERROR\"] = 6] = \"PROTOCOL_SPECIFIC_ERROR\";\n})(HDSStatus || (exports.HDSStatus = HDSStatus = {}));\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar HDSProtocolSpecificErrorReason;\n(function (HDSProtocolSpecificErrorReason) {\n    // noinspection JSUnusedGlobalSymbols\n    HDSProtocolSpecificErrorReason[HDSProtocolSpecificErrorReason[\"NORMAL\"] = 0] = \"NORMAL\";\n    HDSProtocolSpecificErrorReason[HDSProtocolSpecificErrorReason[\"NOT_ALLOWED\"] = 1] = \"NOT_ALLOWED\";\n    HDSProtocolSpecificErrorReason[HDSProtocolSpecificErrorReason[\"BUSY\"] = 2] = \"BUSY\";\n    HDSProtocolSpecificErrorReason[HDSProtocolSpecificErrorReason[\"CANCELLED\"] = 3] = \"CANCELLED\";\n    HDSProtocolSpecificErrorReason[HDSProtocolSpecificErrorReason[\"UNSUPPORTED\"] = 4] = \"UNSUPPORTED\";\n    HDSProtocolSpecificErrorReason[HDSProtocolSpecificErrorReason[\"UNEXPECTED_FAILURE\"] = 5] = \"UNEXPECTED_FAILURE\";\n    HDSProtocolSpecificErrorReason[HDSProtocolSpecificErrorReason[\"TIMEOUT\"] = 6] = \"TIMEOUT\";\n    HDSProtocolSpecificErrorReason[HDSProtocolSpecificErrorReason[\"BAD_DATA\"] = 7] = \"BAD_DATA\";\n    HDSProtocolSpecificErrorReason[HDSProtocolSpecificErrorReason[\"PROTOCOL_ERROR\"] = 8] = \"PROTOCOL_ERROR\";\n    HDSProtocolSpecificErrorReason[HDSProtocolSpecificErrorReason[\"INVALID_CONFIGURATION\"] = 9] = \"INVALID_CONFIGURATION\";\n})(HDSProtocolSpecificErrorReason || (exports.HDSProtocolSpecificErrorReason = HDSProtocolSpecificErrorReason = {}));\n/**\n * An error indicating a protocol level HDS error.\n * E.g. it may be used to encode a {@link HDSStatus.PROTOCOL_SPECIFIC_ERROR} in the {@link Protocols.DATA_SEND} protocol.\n * @group HomeKit Data Streams (HDS)\n */\nvar HDSProtocolError = /** @class */ (function (_super) {\n    tslib_1.__extends(HDSProtocolError, _super);\n    /**\n     * Initializes a new `HDSProtocolError`\n     * @param reason - The {@link HDSProtocolSpecificErrorReason}.\n     *  Values MUST NOT be {@link HDSProtocolSpecificErrorReason.NORMAL}.\n     */\n    function HDSProtocolError(reason) {\n        var _this = _super.call(this, \"HDSProtocolError: \" + reason) || this;\n        (0, assert_1.default)(reason !== 0 /* HDSProtocolSpecificErrorReason.NORMAL */, \"Cannot initialize a HDSProtocolError with NORMAL!\");\n        _this.reason = reason;\n        return _this;\n    }\n    return HDSProtocolError;\n}(Error));\nexports.HDSProtocolError = HDSProtocolError;\nvar ServerState;\n(function (ServerState) {\n    ServerState[ServerState[\"UNINITIALIZED\"] = 0] = \"UNINITIALIZED\";\n    ServerState[ServerState[\"BINDING\"] = 1] = \"BINDING\";\n    ServerState[ServerState[\"LISTENING\"] = 2] = \"LISTENING\";\n    ServerState[ServerState[\"CLOSING\"] = 3] = \"CLOSING\";\n})(ServerState || (ServerState = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"UNIDENTIFIED\"] = 0] = \"UNIDENTIFIED\";\n    ConnectionState[ConnectionState[\"EXPECTING_HELLO\"] = 1] = \"EXPECTING_HELLO\";\n    ConnectionState[ConnectionState[\"READY\"] = 2] = \"READY\";\n    ConnectionState[ConnectionState[\"CLOSING\"] = 3] = \"CLOSING\";\n    ConnectionState[ConnectionState[\"CLOSED\"] = 4] = \"CLOSED\";\n})(ConnectionState || (ConnectionState = {}));\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar MessageType;\n(function (MessageType) {\n    MessageType[MessageType[\"EVENT\"] = 1] = \"EVENT\";\n    MessageType[MessageType[\"REQUEST\"] = 2] = \"REQUEST\";\n    MessageType[MessageType[\"RESPONSE\"] = 3] = \"RESPONSE\";\n})(MessageType || (exports.MessageType = MessageType = {}));\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar DataStreamServerEvent;\n(function (DataStreamServerEvent) {\n    /**\n     * This event is emitted when a new client socket is received. At this point we have no idea to what\n     * hap session this connection will be matched.\n     */\n    DataStreamServerEvent[\"CONNECTION_OPENED\"] = \"connection-opened\";\n    /**\n     * This event is emitted when the socket of a connection gets closed.\n     */\n    DataStreamServerEvent[\"CONNECTION_CLOSED\"] = \"connection-closed\";\n})(DataStreamServerEvent || (exports.DataStreamServerEvent = DataStreamServerEvent = {}));\n/**\n * DataStreamServer which listens for incoming tcp connections and handles identification of new connections\n * @group HomeKit Data Streams (HDS)\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar DataStreamServer = /** @class */ (function (_super) {\n    tslib_1.__extends(DataStreamServer, _super);\n    function DataStreamServer() {\n        var _this = _super.call(this) || this;\n        _this.state = 0 /* ServerState.UNINITIALIZED */;\n        _this.preparedSessions = [];\n        _this.connections = [];\n        _this.removeListenersOnceClosed = false;\n        _this.internalEventEmitter = new events_1.EventEmitter(); // used for message event and message request handlers\n        return _this;\n    }\n    /**\n     * Registers a new event handler to handle incoming event messages.\n     * The handler is only called for a connection if for the give protocol no ProtocolHandler\n     * was registered on the connection level.\n     *\n     * @param protocol - name of the protocol to register the handler for\n     * @param event - name of the event (also referred to as topic. See {@link Topics} for some known ones)\n     * @param handler - function to be called for every occurring event\n     */\n    DataStreamServer.prototype.onEventMessage = function (protocol, event, handler) {\n        this.internalEventEmitter.on(protocol + \"-e-\" + event, handler);\n        return this;\n    };\n    /**\n     * Removes a registered event handler.\n     *\n     * @param protocol - name of the protocol to unregister the handler for\n     * @param event - name of the event (also referred to as topic. See {@link Topics} for some known ones)\n     * @param handler - registered event handler\n     */\n    DataStreamServer.prototype.removeEventHandler = function (protocol, event, handler) {\n        this.internalEventEmitter.removeListener(protocol + \"-e-\" + event, handler);\n        return this;\n    };\n    /**\n     * Registers a new request handler to handle incoming request messages.\n     * The handler is only called for a connection if for the give protocol no ProtocolHandler\n     * was registered on the connection level.\n     *\n     * @param protocol - name of the protocol to register the handler for\n     * @param request - name of the request (also referred to as topic. See {@link Topics} for some known ones)\n     * @param handler - function to be called for every occurring request\n     */\n    DataStreamServer.prototype.onRequestMessage = function (protocol, request, handler) {\n        this.internalEventEmitter.on(protocol + \"-r-\" + request, handler);\n        return this;\n    };\n    /**\n     * Removes a registered request handler.\n     *\n     * @param protocol - name of the protocol to unregister the handler for\n     * @param request - name of the request (also referred to as topic. See {@link Topics} for some known ones)\n     * @param handler - registered request handler\n     */\n    DataStreamServer.prototype.removeRequestHandler = function (protocol, request, handler) {\n        this.internalEventEmitter.removeListener(protocol + \"-r-\" + request, handler);\n        return this;\n    };\n    DataStreamServer.prototype.prepareSession = function (connection, controllerKeySalt, callback) {\n        var _this = this;\n        debug(\"Preparing for incoming HDS connection from %s\", connection.sessionID);\n        var accessoryKeySalt = crypto_1.default.randomBytes(32);\n        var salt = Buffer.concat([controllerKeySalt, accessoryKeySalt]);\n        var accessoryToControllerEncryptionKey = hapCrypto.HKDF(\"sha512\", salt, connection.encryption.sharedSecret, DataStreamServer.accessoryToControllerInfo, 32);\n        var controllerToAccessoryEncryptionKey = hapCrypto.HKDF(\"sha512\", salt, connection.encryption.sharedSecret, DataStreamServer.controllerToAccessoryInfo, 32);\n        var preparedSession = {\n            connection: connection,\n            accessoryToControllerEncryptionKey: accessoryToControllerEncryptionKey,\n            controllerToAccessoryEncryptionKey: controllerToAccessoryEncryptionKey,\n            accessoryKeySalt: accessoryKeySalt,\n            connectTimeout: setTimeout(function () { return _this.timeoutPreparedSession(preparedSession); }, 10000),\n        };\n        preparedSession.connectTimeout.unref();\n        this.preparedSessions.push(preparedSession);\n        this.checkTCPServerEstablished(preparedSession, function (error) {\n            if (error) {\n                callback(error);\n            }\n            else {\n                callback(undefined, preparedSession);\n            }\n        });\n    };\n    DataStreamServer.prototype.timeoutPreparedSession = function (preparedSession) {\n        debug(\"Prepared HDS session timed out out since no connection was opened for 10 seconds (%s)\", preparedSession.connection.sessionID);\n        var index = this.preparedSessions.indexOf(preparedSession);\n        if (index >= 0) {\n            this.preparedSessions.splice(index, 1);\n        }\n        this.checkCloseable();\n    };\n    DataStreamServer.prototype.checkTCPServerEstablished = function (preparedSession, callback) {\n        var _this = this;\n        switch (this.state) {\n            case 0 /* ServerState.UNINITIALIZED */:\n                debug(\"Starting up TCP server.\");\n                this.tcpServer = net_1.default.createServer();\n                this.tcpServer.once(\"listening\", this.listening.bind(this, preparedSession, callback));\n                this.tcpServer.on(\"connection\", this.onConnection.bind(this));\n                this.tcpServer.on(\"close\", this.closed.bind(this));\n                this.tcpServer.listen();\n                this.state = 1 /* ServerState.BINDING */;\n                break;\n            case 1 /* ServerState.BINDING */:\n                debug(\"TCP server already running. Waiting for it to bind.\");\n                this.tcpServer.once(\"listening\", this.listening.bind(this, preparedSession, callback));\n                break;\n            case 2 /* ServerState.LISTENING */:\n                debug(\"Instructing client to connect to already running TCP server\");\n                preparedSession.port = this.tcpPort;\n                callback();\n                break;\n            case 3 /* ServerState.CLOSING */:\n                debug(\"TCP socket is currently closing. Trying again when server is fully closed and opening a new one then.\");\n                this.tcpServer.once(\"close\", function () { return setTimeout(function () { return _this.checkTCPServerEstablished(preparedSession, callback); }, 10); });\n                break;\n        }\n    };\n    DataStreamServer.prototype.listening = function (preparedSession, callback) {\n        this.state = 2 /* ServerState.LISTENING */;\n        var address = this.tcpServer.address();\n        if (address && typeof address !== \"string\") { // address is only typeof string when listening to a pipe or unix socket\n            this.tcpPort = address.port;\n            preparedSession.port = address.port;\n            debug(\"TCP server is now listening for new data stream connections on port %s\", address.port);\n            callback();\n        }\n    };\n    DataStreamServer.prototype.onConnection = function (socket) {\n        debug(\"[%s] New DataStream connection was established\", socket.remoteAddress);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        var connection = new DataStreamConnection(socket);\n        connection.on(\"identification\" /* DataStreamConnectionEvent.IDENTIFICATION */, this.handleSessionIdentification.bind(this, connection));\n        connection.on(\"handle-message-globally\" /* DataStreamConnectionEvent.HANDLE_MESSAGE_GLOBALLY */, this.handleMessageGlobally.bind(this, connection));\n        connection.on(\"closed\" /* DataStreamConnectionEvent.CLOSED */, this.connectionClosed.bind(this, connection));\n        this.connections.push(connection);\n        this.emit(\"connection-opened\" /* DataStreamServerEvent.CONNECTION_OPENED */, connection);\n    };\n    DataStreamServer.prototype.handleSessionIdentification = function (connection, firstFrame, callback) {\n        var identifiedSession = undefined;\n        for (var i = 0; i < this.preparedSessions.length; i++) {\n            var preparedSession = this.preparedSessions[i];\n            // if we successfully decrypt the first frame with this key we know to which session this connection belongs\n            if (connection.decryptHDSFrame(firstFrame, preparedSession.controllerToAccessoryEncryptionKey)) {\n                identifiedSession = preparedSession;\n                break;\n            }\n        }\n        callback(identifiedSession);\n        if (identifiedSession) {\n            debug(\"[%s] Connection was successfully identified (linked with sessionId: %s)\", connection.remoteAddress, identifiedSession.connection.sessionID);\n            var index = this.preparedSessions.indexOf(identifiedSession);\n            if (index >= 0) {\n                this.preparedSessions.splice(index, 1);\n            }\n            clearTimeout(identifiedSession.connectTimeout);\n            identifiedSession.connectTimeout = undefined;\n            // we have currently no experience with data stream connections, maybe it would be good to index active connections\n            // by their hap sessionId in order to clear out old but still open connections when the controller opens a new one\n            // on the other hand the keepAlive should handle that also :thinking:\n        }\n        else { // we looped through all session and didn't find anything\n            debug(\"[%s] Could not identify connection. Terminating.\", connection.remoteAddress);\n            connection.close(); // disconnecting since first message was not a valid hello\n        }\n    };\n    DataStreamServer.prototype.handleMessageGlobally = function (connection, message) {\n        var _a;\n        assert_1.default.notStrictEqual(message.type, 3 /* MessageType.RESPONSE */); // responses can't physically get here\n        var separator = \"\";\n        var args = [];\n        if (message.type === 1 /* MessageType.EVENT */) {\n            separator = \"-e-\";\n        }\n        else if (message.type === 2 /* MessageType.REQUEST */) {\n            separator = \"-r-\";\n            args.push(message.id);\n        }\n        args.push(message.message);\n        var hadListeners;\n        try {\n            hadListeners = (_a = this.internalEventEmitter).emit.apply(_a, tslib_1.__spreadArray([message.protocol + separator + message.topic, connection], tslib_1.__read(args), false));\n        }\n        catch (error) {\n            hadListeners = true;\n            debug(\"[%s] Error occurred while dispatching handler for HDS message: %o\", connection.remoteAddress, message);\n            debug(error.stack);\n        }\n        if (!hadListeners) {\n            debug(\"[%s] WARNING no handler was found for message: %o\", connection.remoteAddress, message);\n        }\n    };\n    DataStreamServer.prototype.connectionClosed = function (connection) {\n        debug(\"[%s] DataStream connection closed\", connection.remoteAddress);\n        this.connections.splice(this.connections.indexOf(connection), 1);\n        this.emit(\"connection-closed\" /* DataStreamServerEvent.CONNECTION_CLOSED */, connection);\n        this.checkCloseable();\n        if (this.state === 3 /* ServerState.CLOSING */ && this.removeListenersOnceClosed && this.connections.length === 0) {\n            this.removeAllListeners(); // see this.destroy()\n        }\n    };\n    DataStreamServer.prototype.checkCloseable = function () {\n        if (this.connections.length === 0 && this.preparedSessions.length === 0 && this.state < 3 /* ServerState.CLOSING */) {\n            debug(\"Last connection disconnected. Closing the server now.\");\n            this.state = 3 /* ServerState.CLOSING */;\n            this.tcpServer.close();\n        }\n    };\n    /**\n     * This method will fully stop the DataStreamServer\n     */\n    DataStreamServer.prototype.destroy = function () {\n        var e_1, _a;\n        if (this.state > 0 /* ServerState.UNINITIALIZED */ && this.state < 3 /* ServerState.CLOSING */) {\n            this.tcpServer.close();\n            try {\n                for (var _b = tslib_1.__values(this.connections), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var connection = _c.value;\n                    connection.close();\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n        this.state = 3 /* ServerState.CLOSING */;\n        this.removeListenersOnceClosed = true;\n        this.internalEventEmitter.removeAllListeners();\n    };\n    DataStreamServer.prototype.closed = function () {\n        this.tcpServer = undefined;\n        this.tcpPort = undefined;\n        this.state = 0 /* ServerState.UNINITIALIZED */;\n    };\n    DataStreamServer.version = \"1.0\";\n    DataStreamServer.accessoryToControllerInfo = Buffer.from(\"HDS-Read-Encryption-Key\");\n    DataStreamServer.controllerToAccessoryInfo = Buffer.from(\"HDS-Write-Encryption-Key\");\n    return DataStreamServer;\n}(events_1.EventEmitter));\nexports.DataStreamServer = DataStreamServer;\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar DataStreamConnectionEvent;\n(function (DataStreamConnectionEvent) {\n    /**\n     * This event is emitted when the first HDSFrame is received from a new connection.\n     * The connection expects the handler to identify the connection by trying to match the decryption keys.\n     * If identification was successful the PreparedDataStreamSession should be supplied to the callback,\n     * otherwise undefined should be supplied.\n     */\n    DataStreamConnectionEvent[\"IDENTIFICATION\"] = \"identification\";\n    /**\n     * This event is emitted when no handler could be found for the given protocol of an event or request message.\n     */\n    DataStreamConnectionEvent[\"HANDLE_MESSAGE_GLOBALLY\"] = \"handle-message-globally\";\n    /**\n     * This event is emitted when the socket of the connection was closed.\n     */\n    DataStreamConnectionEvent[\"CLOSED\"] = \"closed\";\n})(DataStreamConnectionEvent || (exports.DataStreamConnectionEvent = DataStreamConnectionEvent = {}));\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar HDSConnectionErrorType;\n(function (HDSConnectionErrorType) {\n    HDSConnectionErrorType[HDSConnectionErrorType[\"ILLEGAL_STATE\"] = 1] = \"ILLEGAL_STATE\";\n    HDSConnectionErrorType[HDSConnectionErrorType[\"CLOSED_SOCKET\"] = 2] = \"CLOSED_SOCKET\";\n    HDSConnectionErrorType[HDSConnectionErrorType[\"MAX_PAYLOAD_LENGTH\"] = 3] = \"MAX_PAYLOAD_LENGTH\";\n})(HDSConnectionErrorType || (exports.HDSConnectionErrorType = HDSConnectionErrorType = {}));\n/**\n * @group HomeKit Data Streams (HDS)\n */\nvar HDSConnectionError = /** @class */ (function (_super) {\n    tslib_1.__extends(HDSConnectionError, _super);\n    function HDSConnectionError(message, type) {\n        var _this = _super.call(this, message) || this;\n        _this.type = type;\n        return _this;\n    }\n    return HDSConnectionError;\n}(Error));\nexports.HDSConnectionError = HDSConnectionError;\n/**\n * DataStream connection which holds any necessary state information, encryption and decryption keys, manages\n * protocol handlers and also handles sending and receiving of data stream frames.\n *\n * @group HomeKit Data Streams (HDS)\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar DataStreamConnection = /** @class */ (function (_super) {\n    tslib_1.__extends(DataStreamConnection, _super);\n    function DataStreamConnection(socket) {\n        var _a;\n        var _this = _super.call(this) || this;\n        /*\n              Since our DataStream server does only listen on one port and this port is supplied to every client\n              which wants to connect, we do not really know which client is who when we receive a tcp connection.\n              Thus, we find the correct PreparedDataStreamSession object by testing the encryption keys of all available\n              prepared sessions. Then we can reference this hds connection with the correct hap connection and mark it as identified.\n           */\n        _this.state = 0 /* ConnectionState.UNIDENTIFIED */;\n        _this.protocolHandlers = {}; // used to store protocolHandlers identified by their protocol name\n        _this.responseHandlers = {}; // used to store responseHandlers indexed by their respective requestId\n        _this.responseTimers = {}; // used to store response timeouts indexed by their respective requestId\n        _this.socket = socket;\n        _this.remoteAddress = socket.remoteAddress;\n        _this.socket.setNoDelay(true); // disable Nagle algorithm\n        _this.socket.setKeepAlive(true);\n        _this.accessoryToControllerNonce = 0;\n        _this.accessoryToControllerNonceBuffer = Buffer.alloc(8);\n        _this.controllerToAccessoryNonce = 0;\n        _this.controllerToAccessoryNonceBuffer = Buffer.alloc(8);\n        _this.hapConnectionClosedListener = _this.onHAPSessionClosed.bind(_this);\n        _this.addProtocolHandler(\"control\" /* Protocols.CONTROL */, {\n            requestHandler: (_a = {},\n                _a[\"hello\" /* Topics.HELLO */] = _this.handleHello.bind(_this),\n                _a),\n        });\n        _this.helloTimer = setTimeout(function () {\n            debug(\"[%s] Hello message did not arrive in time. Killing the connection\", _this.remoteAddress);\n            _this.close();\n        }, 10000);\n        _this.socket.on(\"data\", _this.onSocketData.bind(_this));\n        _this.socket.on(\"error\", _this.onSocketError.bind(_this));\n        _this.socket.on(\"close\", _this.onSocketClose.bind(_this));\n        // this is to mitigate the event emitter \"memory leak warning\".\n        // e.g. with HSV there might be multiple cameras subscribing to the CLOSE event. one subscription for\n        // every active recording stream on a camera. The default limit of 10 might be easily reached.\n        // Setting a high limit isn't the prefect solution, but will avoid false positives but ensures that\n        // a warning is still be printed if running long enough.\n        _this.setMaxListeners(100);\n        return _this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DataStreamConnection.prototype.handleHello = function (id, message) {\n        // that hello is indeed the _first_ message received is verified in onSocketData(...)\n        debug(\"[%s] Received hello message from client: %o\", this.remoteAddress, message);\n        clearTimeout(this.helloTimer);\n        this.helloTimer = undefined;\n        this.state = 2 /* ConnectionState.READY */;\n        this.sendResponse(\"control\" /* Protocols.CONTROL */, \"hello\" /* Topics.HELLO */, id);\n    };\n    /**\n     * Registers a new protocol handler to handle incoming messages.\n     * The same protocol cannot be registered multiple times.\n     *\n     * @param protocol - name of the protocol to register the handler for\n     * @param protocolHandler - object to be registered as protocol handler\n     */\n    DataStreamConnection.prototype.addProtocolHandler = function (protocol, protocolHandler) {\n        if (this.protocolHandlers[protocol] !== undefined) {\n            return false;\n        }\n        this.protocolHandlers[protocol] = protocolHandler;\n        return true;\n    };\n    /**\n     * Removes a protocol handler if it is registered.\n     *\n     * @param protocol - name of the protocol to unregister the handler for\n     * @param protocolHandler - object which will be unregistered\n     */\n    DataStreamConnection.prototype.removeProtocolHandler = function (protocol, protocolHandler) {\n        var current = this.protocolHandlers[protocol];\n        if (current === protocolHandler) {\n            delete this.protocolHandlers[protocol];\n        }\n    };\n    /**\n     * Sends a new event message to the connected client.\n     *\n     * @param protocol - name of the protocol\n     * @param event - name of the event (also referred to as topic. See {@link Topics} for some known ones)\n     * @param message - message dictionary which gets sent along the event\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DataStreamConnection.prototype.sendEvent = function (protocol, event, message) {\n        if (message === void 0) { message = {}; }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var header = {};\n        header.protocol = protocol;\n        header.event = event;\n        this.sendHDSFrame(header, message);\n    };\n    /**\n     * Sends a new request message to the connected client.\n     *\n     * @param protocol - name of the protocol\n     * @param request - name of the request (also referred to as topic. See {@link Topics} for some known ones)\n     * @param message - message dictionary which gets sent along the request\n     * @param callback - handler which gets supplied with an error object if the response didn't\n     *                   arrive in time or the status and the message dictionary from the response\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DataStreamConnection.prototype.sendRequest = function (protocol, request, message, callback) {\n        var _this = this;\n        if (message === void 0) { message = {}; }\n        var requestId;\n        do { // generate unused requestId\n            // currently writing int64 to data stream is not really supported, so 32-bit int will be the max\n            requestId = Math.floor(Math.random() * 4294967295);\n        } while (this.responseHandlers[requestId] !== undefined);\n        this.responseHandlers[requestId] = callback;\n        this.responseTimers[requestId] = setTimeout(function () {\n            // we did not receive a response => close socket\n            _this.close();\n            var handler = _this.responseHandlers[requestId];\n            delete _this.responseHandlers[requestId];\n            delete _this.responseTimers[requestId];\n            // handler should be able to clean up their stuff\n            handler(new Error(\"timeout\"), undefined, {});\n        }, 10000); // 10s timer\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var header = {};\n        header.protocol = protocol;\n        header.request = request;\n        header.id = new DataStreamParser_1.Int64(requestId);\n        this.sendHDSFrame(header, message);\n    };\n    /**\n     * Send a new response message to a received request message to the client.\n     *\n     * @param protocol - name of the protocol\n     * @param response - name of the response (also referred to as topic. See {@link Topics} for some known ones)\n     * @param id - id from the request, to associate the response to the request\n     * @param status - status indication if the request was successful. A status of zero indicates success.\n     * @param message - message dictionary which gets sent along the response\n     */\n    DataStreamConnection.prototype.sendResponse = function (protocol, response, id, status, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    message) {\n        if (status === void 0) { status = HDSStatus.SUCCESS; }\n        if (message === void 0) { message = {}; }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var header = {};\n        header.protocol = protocol;\n        header.response = response;\n        header.id = new DataStreamParser_1.Int64(id);\n        header.status = new DataStreamParser_1.Int64(status);\n        this.sendHDSFrame(header, message);\n    };\n    DataStreamConnection.prototype.onSocketData = function (data) {\n        var _this = this;\n        if (this.state >= 3 /* ConnectionState.CLOSING */) {\n            return;\n        }\n        var frameIndex = 0;\n        var frames = this.decodeHDSFrames(data);\n        if (frames.length === 0) { // not enough data\n            return;\n        }\n        if (this.state === 0 /* ConnectionState.UNIDENTIFIED */) {\n            // at the beginning we are only interested in trying to decrypt the first frame in order to test decryption keys\n            var firstFrame = frames[frameIndex++];\n            this.emit(\"identification\" /* DataStreamConnectionEvent.IDENTIFICATION */, firstFrame, function (identifiedSession) {\n                if (identifiedSession) {\n                    // horray, we found our connection\n                    _this.connection = identifiedSession.connection;\n                    _this.accessoryToControllerEncryptionKey = identifiedSession.accessoryToControllerEncryptionKey;\n                    _this.controllerToAccessoryEncryptionKey = identifiedSession.controllerToAccessoryEncryptionKey;\n                    _this.state = 1 /* ConnectionState.EXPECTING_HELLO */;\n                    // below listener is removed in .close()\n                    _this.connection.setMaxListeners(_this.connection.getMaxListeners() + 1);\n                    _this.connection.on(\"closed\" /* HAPConnectionEvent.CLOSED */, _this.hapConnectionClosedListener); // register close listener\n                    debug(\"[%s] Registering CLOSED handler to HAP connection. Connection currently has %d close handlers!\", _this.remoteAddress, _this.connection.listeners(\"closed\" /* HAPConnectionEvent.CLOSED */).length);\n                }\n            });\n            if (this.state === 0 /* ConnectionState.UNIDENTIFIED */) {\n                // did not find a prepared connection, server already closed this connection; nothing to do here\n                return;\n            }\n        }\n        for (; frameIndex < frames.length; frameIndex++) { // decrypt all remaining frames\n            if (!this.decryptHDSFrame(frames[frameIndex])) {\n                debug(\"[%s] HDS frame decryption or authentication failed. Connection will be terminated!\", this.remoteAddress);\n                this.close();\n                return;\n            }\n        }\n        var messages = this.decodePayloads(frames); // decode contents of payload\n        if (this.state === 1 /* ConnectionState.EXPECTING_HELLO */) {\n            var firstMessage = messages[0];\n            if (firstMessage.protocol !== \"control\" /* Protocols.CONTROL */ || firstMessage.type !== 2 /* MessageType.REQUEST */ || firstMessage.topic !== \"hello\" /* Topics.HELLO */) {\n                // first message is not the expected hello request\n                debug(\"[%s] First message received was not the expected hello message. Instead got: %o\", this.remoteAddress, firstMessage);\n                this.close();\n                return;\n            }\n        }\n        messages.forEach(function (message) {\n            if (message.type === 3 /* MessageType.RESPONSE */) {\n                // protocol and topic are currently not tested here; just assumed they are correct;\n                // probably they are as the requestId is unique per connection no matter what protocol is used\n                var responseHandler = _this.responseHandlers[message.id];\n                var responseTimer = _this.responseTimers[message.id];\n                if (responseTimer) {\n                    clearTimeout(responseTimer);\n                    delete _this.responseTimers[message.id];\n                }\n                if (!responseHandler) {\n                    // we got a response to a request we did not send; we ignore it for now, since nobody will be hurt\n                    debug(\"WARNING we received a response to a request we have not sent: %o\", message);\n                    return;\n                }\n                try {\n                    responseHandler(undefined, message.status, message.message);\n                }\n                catch (error) {\n                    debug(\"[%s] Error occurred while dispatching response handler for HDS message: %o\", _this.remoteAddress, message);\n                    debug(error.stack);\n                }\n                delete _this.responseHandlers[message.id];\n            }\n            else {\n                var handler = _this.protocolHandlers[message.protocol];\n                if (handler === undefined) {\n                    // send message to the server to check if there are some global handlers for it\n                    _this.emit(\"handle-message-globally\" /* DataStreamConnectionEvent.HANDLE_MESSAGE_GLOBALLY */, message);\n                    return;\n                }\n                if (message.type === 1 /* MessageType.EVENT */) {\n                    var eventHandler = void 0;\n                    if (!handler.eventHandler || !(eventHandler = handler.eventHandler[message.topic])) {\n                        debug(\"[%s] WARNING no event handler was found for message: %o\", _this.remoteAddress, message);\n                        return;\n                    }\n                    try {\n                        eventHandler(message.message);\n                    }\n                    catch (error) {\n                        debug(\"[%s] Error occurred while dispatching event handler for HDS message: %o\", _this.remoteAddress, message);\n                        debug(error.stack);\n                    }\n                }\n                else if (message.type === 2 /* MessageType.REQUEST */) {\n                    var requestHandler = void 0;\n                    if (!handler.requestHandler || !(requestHandler = handler.requestHandler[message.topic])) {\n                        debug(\"[%s] WARNING no request handler was found for message: %o\", _this.remoteAddress, message);\n                        return;\n                    }\n                    try {\n                        requestHandler(message.id, message.message);\n                    }\n                    catch (error) {\n                        debug(\"[%s] Error occurred while dispatching request handler for HDS message: %o\", _this.remoteAddress, message);\n                        debug(error.stack);\n                    }\n                }\n                else {\n                    debug(\"[%s] Encountered unknown message type with id %d\", _this.remoteAddress, message.type);\n                }\n            }\n        });\n    };\n    DataStreamConnection.prototype.decodeHDSFrames = function (data) {\n        if (this.frameBuffer !== undefined) {\n            data = Buffer.concat([this.frameBuffer, data]);\n            this.frameBuffer = undefined;\n        }\n        var totalBufferLength = data.length;\n        var frames = [];\n        for (var frameBegin = 0; frameBegin < totalBufferLength;) {\n            if (frameBegin + 4 > totalBufferLength) {\n                // we don't have enough data in the buffer for the next header\n                this.frameBuffer = data.slice(frameBegin);\n                break;\n            }\n            var payloadType = data.readUInt8(frameBegin); // type defining structure of payload; 8-bit; currently expected to be 1\n            var payloadLength = data.readUIntBE(frameBegin + 1, 3); // read 24-bit big-endian uint length field\n            if (payloadLength > DataStreamConnection.MAX_PAYLOAD_LENGTH) {\n                debug(\"[%s] Connection send payload with size bigger than the maximum allow for data stream\", this.remoteAddress);\n                this.close();\n                return [];\n            }\n            var remainingBufferLength = totalBufferLength - frameBegin - 4; // subtract 4 for payloadType (1-byte) and payloadLength (3-byte)\n            // check if the data from this frame is already there (payload + 16-byte authTag)\n            if (payloadLength + 16 > remainingBufferLength) {\n                // Frame is fragmented, so we wait until we receive more\n                this.frameBuffer = data.slice(frameBegin);\n                break;\n            }\n            var payloadBegin = frameBegin + 4;\n            var authTagBegin = payloadBegin + payloadLength;\n            var header = data.slice(frameBegin, payloadBegin); // header is also authenticated using authTag\n            var cipheredPayload = data.slice(payloadBegin, authTagBegin);\n            var plaintextPayload = Buffer.alloc(payloadLength);\n            var authTag = data.slice(authTagBegin, authTagBegin + 16);\n            frameBegin = authTagBegin + 16; // move to next frame\n            if (payloadType === 1) {\n                var hdsFrame = {\n                    header: header,\n                    cipheredPayload: cipheredPayload,\n                    authTag: authTag,\n                };\n                frames.push(hdsFrame);\n            }\n            else {\n                debug(\"[%s] Encountered unknown payload type %d for payload: %s\", this.remoteAddress, plaintextPayload.toString(\"hex\"));\n            }\n        }\n        return frames;\n    };\n    /**\n     * @private file-private API\n     */\n    DataStreamConnection.prototype.decryptHDSFrame = function (frame, keyOverwrite) {\n        hapCrypto.writeUInt64LE(this.controllerToAccessoryNonce, this.controllerToAccessoryNonceBuffer, 0); // update nonce buffer\n        var key = keyOverwrite || this.controllerToAccessoryEncryptionKey;\n        try {\n            frame.plaintextPayload = hapCrypto.chacha20_poly1305_decryptAndVerify(key, this.controllerToAccessoryNonceBuffer, frame.header, frame.cipheredPayload, frame.authTag);\n            this.controllerToAccessoryNonce++; // we had a successful encryption, increment the nonce\n            return true;\n        }\n        catch (error) {\n            // frame decryption or authentication failed. Could happen when our guess for a PreparedDataStreamSession is wrong\n            return false;\n        }\n    };\n    DataStreamConnection.prototype.decodePayloads = function (frames) {\n        var _this = this;\n        var messages = [];\n        frames.forEach(function (frame) {\n            var payload = frame.plaintextPayload;\n            if (!payload) {\n                throw new HDSConnectionError(\"Reached illegal state. Encountered HDSFrame with wasn't decrypted yet!\", 1 /* HDSConnectionErrorType.ILLEGAL_STATE */);\n            }\n            var headerLength = payload.readUInt8(0);\n            var messageLength = payload.length - headerLength - 1;\n            var headerBegin = 1;\n            var messageBegin = headerBegin + headerLength;\n            var headerPayload = new DataStreamParser_1.DataStreamReader(payload.slice(headerBegin, headerBegin + headerLength));\n            var messagePayload = new DataStreamParser_1.DataStreamReader(payload.slice(messageBegin, messageBegin + messageLength));\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var headerDictionary;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var messageDictionary;\n            try {\n                headerDictionary = DataStreamParser_1.DataStreamParser.decode(headerPayload);\n                headerPayload.finished();\n            }\n            catch (error) {\n                debug(\"[%s] Failed to decode header payload: %s\", _this.remoteAddress, error.message);\n                return;\n            }\n            try {\n                messageDictionary = DataStreamParser_1.DataStreamParser.decode(messagePayload);\n                messagePayload.finished();\n            }\n            catch (error) {\n                debug(\"[%s] Failed to decode message payload: %s (header: %o)\", _this.remoteAddress, error.message, headerDictionary);\n                return;\n            }\n            var type;\n            var protocol = headerDictionary.protocol;\n            var topic;\n            var id = undefined;\n            var status = undefined;\n            if (headerDictionary.event !== undefined) {\n                type = 1 /* MessageType.EVENT */;\n                topic = headerDictionary.event;\n            }\n            else if (headerDictionary.request !== undefined) {\n                type = 2 /* MessageType.REQUEST */;\n                topic = headerDictionary.request;\n                id = headerDictionary.id;\n            }\n            else if (headerDictionary.response !== undefined) {\n                type = 3 /* MessageType.RESPONSE */;\n                topic = headerDictionary.response;\n                id = headerDictionary.id;\n                status = headerDictionary.status;\n            }\n            else {\n                debug(\"[%s] Encountered unknown payload header format: %o (message: %o)\", _this.remoteAddress, headerDictionary, messageDictionary);\n                return;\n            }\n            var message = {\n                type: type,\n                protocol: protocol,\n                topic: topic,\n                id: id,\n                status: status,\n                message: messageDictionary,\n            };\n            messages.push(message);\n        });\n        return messages;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DataStreamConnection.prototype.sendHDSFrame = function (header, message) {\n        if (this.state >= 3 /* ConnectionState.CLOSING */) {\n            throw new HDSConnectionError(\"Cannot send message on closing/closed socket!\", 2 /* HDSConnectionErrorType.CLOSED_SOCKET */);\n        }\n        var headerWriter = new DataStreamParser_1.DataStreamWriter();\n        var messageWriter = new DataStreamParser_1.DataStreamWriter();\n        DataStreamParser_1.DataStreamParser.encode(header, headerWriter);\n        DataStreamParser_1.DataStreamParser.encode(message, messageWriter);\n        var payloadHeaderBuffer = Buffer.alloc(1);\n        payloadHeaderBuffer.writeUInt8(headerWriter.length(), 0);\n        var payloadBuffer = Buffer.concat([payloadHeaderBuffer, headerWriter.getData(), messageWriter.getData()]);\n        if (payloadBuffer.length > DataStreamConnection.MAX_PAYLOAD_LENGTH) {\n            throw new HDSConnectionError(\"Tried sending payload with length larger than the maximum allowed for data stream\", 3 /* HDSConnectionErrorType.MAX_PAYLOAD_LENGTH */);\n        }\n        var frameTypeBuffer = Buffer.alloc(1);\n        frameTypeBuffer.writeUInt8(1, 0);\n        var frameLengthBuffer = Buffer.alloc(4);\n        frameLengthBuffer.writeUInt32BE(payloadBuffer.length, 0);\n        frameLengthBuffer = frameLengthBuffer.slice(1, 4); // a bit hacky but the only real way to write 24-bit int in node\n        var frameHeader = Buffer.concat([frameTypeBuffer, frameLengthBuffer]);\n        hapCrypto.writeUInt64LE(this.accessoryToControllerNonce++, this.accessoryToControllerNonceBuffer);\n        var encrypted = hapCrypto.chacha20_poly1305_encryptAndSeal(this.accessoryToControllerEncryptionKey, this.accessoryToControllerNonceBuffer, frameHeader, payloadBuffer);\n        this.socket.write(Buffer.concat([frameHeader, encrypted.ciphertext, encrypted.authTag]));\n        /* Useful for debugging outgoing packages and detecting encoding errors\n            console.log(\"SENT DATA: \" + payloadBuffer.toString(\"hex\"));\n            const frame: HDSFrame = {\n                header: frameHeader,\n                plaintextPayload: payloadBuffer,\n                cipheredPayload: cipheredPayload,\n                authTag: authTag,\n            };\n            const sentMessage = this.decodePayloads([frame])[0];\n            console.log(\"Sent message: \" + JSON.stringify(sentMessage, null, 4));\n            //*/\n    };\n    DataStreamConnection.prototype.close = function () {\n        if (this.state >= 3 /* ConnectionState.CLOSING */) {\n            return; // connection is already closing/closed\n        }\n        this.state = 3 /* ConnectionState.CLOSING */;\n        this.socket.end();\n    };\n    DataStreamConnection.prototype.isConsideredClosed = function () {\n        return this.state >= 3 /* ConnectionState.CLOSING */;\n    };\n    DataStreamConnection.prototype.onHAPSessionClosed = function () {\n        // If the hap connection is closed it is probably also a good idea to close the data stream connection\n        debug(\"[%s] HAP connection disconnected. Also closing DataStream connection now.\", this.remoteAddress);\n        this.close();\n    };\n    DataStreamConnection.prototype.onSocketError = function (error) {\n        debug(\"[%s] Encountered socket error: %s\", this.remoteAddress, error.message);\n        // onSocketClose will be called next\n    };\n    DataStreamConnection.prototype.onSocketClose = function () {\n        var _a, _b;\n        // this instance is now considered completely dead\n        this.state = 4 /* ConnectionState.CLOSED */;\n        this.emit(\"closed\" /* DataStreamConnectionEvent.CLOSED */);\n        (_a = this.connection) === null || _a === void 0 ? void 0 : _a.removeListener(\"closed\" /* HAPConnectionEvent.CLOSED */, this.hapConnectionClosedListener);\n        (_b = this.connection) === null || _b === void 0 ? void 0 : _b.setMaxListeners(this.connection.getMaxListeners() - 1);\n        this.removeAllListeners();\n    };\n    DataStreamConnection.MAX_PAYLOAD_LENGTH = 1048575;\n    return DataStreamConnection;\n}(events_1.EventEmitter));\nexports.DataStreamConnection = DataStreamConnection;\n//# sourceMappingURL=DataStreamServer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\ntslib_1.__exportStar(require(\"./DataStreamManagement\"), exports);\ntslib_1.__exportStar(require(\"./DataStreamServer\"), exports);\ntslib_1.__exportStar(require(\"./DataStreamParser\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\n// THIS FILE IS AUTO-GENERATED - DO NOT MODIFY\n// V=880\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CurrentMediaState = exports.CurrentHumidifierDehumidifierState = exports.CurrentHorizontalTiltAngle = exports.CurrentHeatingCoolingState = exports.CurrentHeaterCoolerState = exports.CurrentFanState = exports.CurrentDoorState = exports.CurrentAmbientLightLevel = exports.CurrentAirPurifierState = exports.CryptoHash = exports.CoolingThresholdTemperature = exports.ContactSensorState = exports.ConfiguredName = exports.ConfigureBridgedAccessoryStatus = exports.ConfigureBridgedAccessory = exports.ConfigurationState = exports.ColorTemperature = exports.ClosedCaptions = exports.ChargingState = exports.CharacteristicValueTransitionControl = exports.CharacteristicValueActiveTransitionCount = exports.CCASignalDetectThreshold = exports.CCAEnergyDetectThreshold = exports.Category = exports.CarbonMonoxidePeakLevel = exports.CarbonMonoxideLevel = exports.CarbonMonoxideDetected = exports.CarbonDioxidePeakLevel = exports.CarbonDioxideLevel = exports.CarbonDioxideDetected = exports.CameraOperatingModeIndicator = exports.ButtonEvent = exports.Brightness = exports.BatteryLevel = exports.AudioFeedback = exports.AssetUpdateReadiness = exports.AppMatchingIdentifier = exports.AirQuality = exports.AirPlayEnable = exports.AirParticulateSize = exports.AirParticulateDensity = exports.AdministratorOnlyAccess = exports.ActivityInterval = exports.ActiveIdentifier = exports.Active = exports.AccessoryIdentifier = exports.AccessoryFlags = exports.AccessControlLevel = exports.AccessCodeSupportedConfiguration = exports.AccessCodeControlPoint = void 0;\nexports.Logs = exports.LockTargetState = exports.LockPhysicalControls = exports.LockManagementAutoSecurityTimeout = exports.LockLastKnownAction = exports.LockCurrentState = exports.LockControlPoint = exports.ListPairings = exports.LinkQuality = exports.LeakDetected = exports.IsConfigured = exports.InUse = exports.InputSourceType = exports.InputDeviceType = exports.ImageRotation = exports.ImageMirroring = exports.Identify = exports.Identifier = exports.Hue = exports.HomeKitCameraActive = exports.HoldPosition = exports.HeatingThresholdTemperature = exports.HeartBeat = exports.HardwareRevision = exports.HardwareFinish = exports.FirmwareUpdateStatus = exports.FirmwareUpdateReadiness = exports.FirmwareRevision = exports.FilterLifeLevel = exports.FilterChangeIndication = exports.EventTransmissionCounters = exports.EventSnapshotsActive = exports.EventRetransmissionMaximum = exports.DisplayOrder = exports.DiscoveredBridgedAccessories = exports.DiscoverBridgedAccessories = exports.DigitalZoom = exports.DiagonalFieldOfView = exports.DayoftheWeek = exports.DataStreamHAPTransportInterrupt = exports.DataStreamHAPTransport = exports.CurrentVisibilityState = exports.CurrentVerticalTiltAngle = exports.CurrentTransport = exports.CurrentTime = exports.CurrentTiltAngle = exports.CurrentTemperature = exports.CurrentSlatState = exports.CurrentRelativeHumidity = exports.CurrentPosition = void 0;\nexports.RelayState = exports.RelayEnabled = exports.RelayControlPoint = exports.RelativeHumidityHumidifierThreshold = exports.RelativeHumidityDehumidifierThreshold = exports.RecordingAudioActive = exports.ReceiverSensitivity = exports.ReceivedSignalStrengthIndication = exports.Reachable = exports.ProgramMode = exports.ProgrammableSwitchOutputState = exports.ProgrammableSwitchEvent = exports.ProductData = exports.PowerModeSelection = exports.PositionState = exports.PM2_5Density = exports.PM10Density = exports.Ping = exports.PictureMode = exports.PeriodicSnapshotsActive = exports.PasswordSetting = exports.PairVerify = exports.PairSetup = exports.PairingFeatures = exports.OzoneDensity = exports.OutletInUse = exports.OpticalZoom = exports.OperatingStateResponse = exports.On = exports.OccupancyDetected = exports.ObstructionDetected = exports.NitrogenDioxideDensity = exports.NightVision = exports.NFCAccessSupportedConfiguration = exports.NFCAccessControlPoint = exports.NetworkClientStatusControl = exports.NetworkClientProfileControl = exports.NetworkAccessViolationControl = exports.Name = exports.Mute = exports.MultifunctionButton = exports.MotionDetected = exports.Model = exports.MetricsBufferFullState = exports.MaximumTransmitPower = exports.Manufacturer = exports.ManuallyDisabled = exports.ManagedNetworkEnable = exports.MACTransmissionCounters = exports.MACRetransmissionMaximum = void 0;\nexports.SupportedDiagnosticsModes = exports.SupportedDataStreamTransportConfiguration = exports.SupportedCharacteristicValueTransitionConfiguration = exports.SupportedCameraRecordingConfiguration = exports.SupportedAudioStreamConfiguration = exports.SupportedAudioRecordingConfiguration = exports.SupportedAssetTypes = exports.SulphurDioxideDensity = exports.StreamingStatus = exports.StatusTampered = exports.StatusLowBattery = exports.StatusJammed = exports.StatusFault = exports.StatusActive = exports.StagedFirmwareVersion = exports.SoftwareRevision = exports.SmokeDetected = exports.SleepInterval = exports.SleepDiscoveryMode = exports.SlatType = exports.SiriTouchToUse = exports.SiriListening = exports.SiriLightOnUse = exports.SiriInputType = exports.SiriEngineVersion = exports.SiriEndpointSessionStatus = exports.SiriEnable = exports.SignalToNoiseRatio = exports.SetupTransferTransport = exports.SetupEndpoints = exports.SetupDataStreamTransport = exports.SetDuration = exports.ServiceLabelNamespace = exports.ServiceLabelIndex = exports.SerialNumber = exports.SelectedSleepConfiguration = exports.SelectedRTPStreamConfiguration = exports.SelectedDiagnosticsModes = exports.SelectedCameraRecordingConfiguration = exports.SelectedAudioStreamConfiguration = exports.SecuritySystemTargetState = exports.SecuritySystemCurrentState = exports.SecuritySystemAlarmType = exports.Saturation = exports.RouterStatus = exports.RotationSpeed = exports.RotationDirection = exports.ResetFilterIndication = exports.RemoteKey = exports.RemainingDuration = void 0;\nexports.WakeConfiguration = exports.VolumeSelector = exports.VolumeControlType = exports.Volume = exports.VOCDensity = exports.VideoAnalysisActive = exports.Version = exports.ValveType = exports.TunneledAccessoryStateNumber = exports.TunneledAccessoryConnected = exports.TunneledAccessoryAdvertising = exports.TunnelConnectionTimeout = exports.TransmitPower = exports.Token = exports.TimeUpdate = exports.ThreadStatus = exports.ThreadOpenThreadVersion = exports.ThreadNodeCapabilities = exports.ThreadControlPoint = exports.ThirdPartyCameraActive = exports.TemperatureDisplayUnits = exports.TargetVisibilityState = exports.TargetVerticalTiltAngle = exports.TargetTiltAngle = exports.TargetTemperature = exports.TargetSlatState = exports.TargetRelativeHumidity = exports.TargetPosition = exports.TargetMediaState = exports.TargetHumidifierDehumidifierState = exports.TargetHorizontalTiltAngle = exports.TargetHeatingCoolingState = exports.TargetHeaterCoolerState = exports.TargetFanState = exports.TargetDoorState = exports.TargetControlSupportedConfiguration = exports.TargetControlList = exports.TargetAirQuality = exports.TargetAirPurifierState = exports.TapType = exports.SwingMode = exports.SupportedVideoStreamConfiguration = exports.SupportedVideoRecordingConfiguration = exports.SupportedTransferTransportConfiguration = exports.SupportedSleepConfiguration = exports.SupportedRTPConfiguration = exports.SupportedRouterConfiguration = exports.SupportedMetrics = exports.SupportedFirmwareUpdateConfiguration = exports.SupportedDiagnosticsSnapshot = void 0;\nexports.WiFiSatelliteStatus = exports.WiFiConfigurationControl = exports.WiFiCapabilities = exports.WaterLevel = exports.WANStatusList = exports.WANConfigurationList = void 0;\nvar tslib_1 = require(\"tslib\");\nvar Characteristic_1 = require(\"../Characteristic\");\n/**\n * Characteristic \"Access Code Control Point\"\n * @since iOS 15\n */\nvar AccessCodeControlPoint = /** @class */ (function (_super) {\n    tslib_1.__extends(AccessCodeControlPoint, _super);\n    function AccessCodeControlPoint() {\n        var _this = _super.call(this, \"Access Code Control Point\", AccessCodeControlPoint.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"wr\" /* Perms.WRITE_RESPONSE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    AccessCodeControlPoint.UUID = \"00000262-0000-1000-8000-0026BB765291\";\n    return AccessCodeControlPoint;\n}(Characteristic_1.Characteristic));\nexports.AccessCodeControlPoint = AccessCodeControlPoint;\nCharacteristic_1.Characteristic.AccessCodeControlPoint = AccessCodeControlPoint;\n/**\n * Characteristic \"Access Code Supported Configuration\"\n * @since iOS 15\n */\nvar AccessCodeSupportedConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(AccessCodeSupportedConfiguration, _super);\n    function AccessCodeSupportedConfiguration() {\n        var _this = _super.call(this, \"Access Code Supported Configuration\", AccessCodeSupportedConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    AccessCodeSupportedConfiguration.UUID = \"00000261-0000-1000-8000-0026BB765291\";\n    return AccessCodeSupportedConfiguration;\n}(Characteristic_1.Characteristic));\nexports.AccessCodeSupportedConfiguration = AccessCodeSupportedConfiguration;\nCharacteristic_1.Characteristic.AccessCodeSupportedConfiguration = AccessCodeSupportedConfiguration;\n/**\n * Characteristic \"Access Control Level\"\n */\nvar AccessControlLevel = /** @class */ (function (_super) {\n    tslib_1.__extends(AccessControlLevel, _super);\n    function AccessControlLevel() {\n        var _this = _super.call(this, \"Access Control Level\", AccessControlLevel.UUID, {\n            format: \"uint16\" /* Formats.UINT16 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 2,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    AccessControlLevel.UUID = \"000000E5-0000-1000-8000-0026BB765291\";\n    return AccessControlLevel;\n}(Characteristic_1.Characteristic));\nexports.AccessControlLevel = AccessControlLevel;\nCharacteristic_1.Characteristic.AccessControlLevel = AccessControlLevel;\n/**\n * Characteristic \"Accessory Flags\"\n */\nvar AccessoryFlags = /** @class */ (function (_super) {\n    tslib_1.__extends(AccessoryFlags, _super);\n    function AccessoryFlags() {\n        var _this = _super.call(this, \"Accessory Flags\", AccessoryFlags.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    AccessoryFlags.UUID = \"000000A6-0000-1000-8000-0026BB765291\";\n    AccessoryFlags.REQUIRES_ADDITIONAL_SETUP_BIT_MASK = 1;\n    return AccessoryFlags;\n}(Characteristic_1.Characteristic));\nexports.AccessoryFlags = AccessoryFlags;\nCharacteristic_1.Characteristic.AccessoryFlags = AccessoryFlags;\n/**\n * Characteristic \"Accessory Identifier\"\n */\nvar AccessoryIdentifier = /** @class */ (function (_super) {\n    tslib_1.__extends(AccessoryIdentifier, _super);\n    function AccessoryIdentifier() {\n        var _this = _super.call(this, \"Accessory Identifier\", AccessoryIdentifier.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    AccessoryIdentifier.UUID = \"00000057-0000-1000-8000-0026BB765291\";\n    return AccessoryIdentifier;\n}(Characteristic_1.Characteristic));\nexports.AccessoryIdentifier = AccessoryIdentifier;\nCharacteristic_1.Characteristic.AccessoryIdentifier = AccessoryIdentifier;\n/**\n * Characteristic \"Active\"\n */\nvar Active = /** @class */ (function (_super) {\n    tslib_1.__extends(Active, _super);\n    function Active() {\n        var _this = _super.call(this, \"Active\", Active.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Active.UUID = \"000000B0-0000-1000-8000-0026BB765291\";\n    Active.INACTIVE = 0;\n    Active.ACTIVE = 1;\n    return Active;\n}(Characteristic_1.Characteristic));\nexports.Active = Active;\nCharacteristic_1.Characteristic.Active = Active;\n/**\n * Characteristic \"Active Identifier\"\n */\nvar ActiveIdentifier = /** @class */ (function (_super) {\n    tslib_1.__extends(ActiveIdentifier, _super);\n    function ActiveIdentifier() {\n        var _this = _super.call(this, \"Active Identifier\", ActiveIdentifier.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ActiveIdentifier.UUID = \"000000E7-0000-1000-8000-0026BB765291\";\n    return ActiveIdentifier;\n}(Characteristic_1.Characteristic));\nexports.ActiveIdentifier = ActiveIdentifier;\nCharacteristic_1.Characteristic.ActiveIdentifier = ActiveIdentifier;\n/**\n * Characteristic \"Activity Interval\"\n * @since iOS 14\n */\nvar ActivityInterval = /** @class */ (function (_super) {\n    tslib_1.__extends(ActivityInterval, _super);\n    function ActivityInterval() {\n        var _this = _super.call(this, \"Activity Interval\", ActivityInterval.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ActivityInterval.UUID = \"0000023B-0000-1000-8000-0026BB765291\";\n    return ActivityInterval;\n}(Characteristic_1.Characteristic));\nexports.ActivityInterval = ActivityInterval;\nCharacteristic_1.Characteristic.ActivityInterval = ActivityInterval;\n/**\n * Characteristic \"Administrator Only Access\"\n */\nvar AdministratorOnlyAccess = /** @class */ (function (_super) {\n    tslib_1.__extends(AdministratorOnlyAccess, _super);\n    function AdministratorOnlyAccess() {\n        var _this = _super.call(this, \"Administrator Only Access\", AdministratorOnlyAccess.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    AdministratorOnlyAccess.UUID = \"00000001-0000-1000-8000-0026BB765291\";\n    return AdministratorOnlyAccess;\n}(Characteristic_1.Characteristic));\nexports.AdministratorOnlyAccess = AdministratorOnlyAccess;\nCharacteristic_1.Characteristic.AdministratorOnlyAccess = AdministratorOnlyAccess;\n/**\n * Characteristic \"Air Particulate Density\"\n */\nvar AirParticulateDensity = /** @class */ (function (_super) {\n    tslib_1.__extends(AirParticulateDensity, _super);\n    function AirParticulateDensity() {\n        var _this = _super.call(this, \"Air Particulate Density\", AirParticulateDensity.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1000,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    AirParticulateDensity.UUID = \"00000064-0000-1000-8000-0026BB765291\";\n    return AirParticulateDensity;\n}(Characteristic_1.Characteristic));\nexports.AirParticulateDensity = AirParticulateDensity;\nCharacteristic_1.Characteristic.AirParticulateDensity = AirParticulateDensity;\n/**\n * Characteristic \"Air Particulate Size\"\n */\nvar AirParticulateSize = /** @class */ (function (_super) {\n    tslib_1.__extends(AirParticulateSize, _super);\n    function AirParticulateSize() {\n        var _this = _super.call(this, \"Air Particulate Size\", AirParticulateSize.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    AirParticulateSize.UUID = \"00000065-0000-1000-8000-0026BB765291\";\n    AirParticulateSize._2_5_M = 0;\n    AirParticulateSize._10_M = 1;\n    return AirParticulateSize;\n}(Characteristic_1.Characteristic));\nexports.AirParticulateSize = AirParticulateSize;\nCharacteristic_1.Characteristic.AirParticulateSize = AirParticulateSize;\n/**\n * Characteristic \"AirPlay Enable\"\n */\nvar AirPlayEnable = /** @class */ (function (_super) {\n    tslib_1.__extends(AirPlayEnable, _super);\n    function AirPlayEnable() {\n        var _this = _super.call(this, \"AirPlay Enable\", AirPlayEnable.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    AirPlayEnable.UUID = \"0000025B-0000-1000-8000-0026BB765291\";\n    return AirPlayEnable;\n}(Characteristic_1.Characteristic));\nexports.AirPlayEnable = AirPlayEnable;\nCharacteristic_1.Characteristic.AirPlayEnable = AirPlayEnable;\n/**\n * Characteristic \"Air Quality\"\n */\nvar AirQuality = /** @class */ (function (_super) {\n    tslib_1.__extends(AirQuality, _super);\n    function AirQuality() {\n        var _this = _super.call(this, \"Air Quality\", AirQuality.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 5,\n            minStep: 1,\n            validValues: [0, 1, 2, 3, 4, 5],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    AirQuality.UUID = \"00000095-0000-1000-8000-0026BB765291\";\n    AirQuality.UNKNOWN = 0;\n    AirQuality.EXCELLENT = 1;\n    AirQuality.GOOD = 2;\n    AirQuality.FAIR = 3;\n    AirQuality.INFERIOR = 4;\n    AirQuality.POOR = 5;\n    return AirQuality;\n}(Characteristic_1.Characteristic));\nexports.AirQuality = AirQuality;\nCharacteristic_1.Characteristic.AirQuality = AirQuality;\n/**\n * Characteristic \"App Matching Identifier\"\n */\nvar AppMatchingIdentifier = /** @class */ (function (_super) {\n    tslib_1.__extends(AppMatchingIdentifier, _super);\n    function AppMatchingIdentifier() {\n        var _this = _super.call(this, \"App Matching Identifier\", AppMatchingIdentifier.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    AppMatchingIdentifier.UUID = \"000000A4-0000-1000-8000-0026BB765291\";\n    return AppMatchingIdentifier;\n}(Characteristic_1.Characteristic));\nexports.AppMatchingIdentifier = AppMatchingIdentifier;\nCharacteristic_1.Characteristic.AppMatchingIdentifier = AppMatchingIdentifier;\n/**\n * Characteristic \"Asset Update Readiness\"\n */\nvar AssetUpdateReadiness = /** @class */ (function (_super) {\n    tslib_1.__extends(AssetUpdateReadiness, _super);\n    function AssetUpdateReadiness() {\n        var _this = _super.call(this, \"Asset Update Readiness\", AssetUpdateReadiness.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    AssetUpdateReadiness.UUID = \"00000269-0000-1000-8000-0026BB765291\";\n    return AssetUpdateReadiness;\n}(Characteristic_1.Characteristic));\nexports.AssetUpdateReadiness = AssetUpdateReadiness;\nCharacteristic_1.Characteristic.AssetUpdateReadiness = AssetUpdateReadiness;\n/**\n * Characteristic \"Audio Feedback\"\n */\nvar AudioFeedback = /** @class */ (function (_super) {\n    tslib_1.__extends(AudioFeedback, _super);\n    function AudioFeedback() {\n        var _this = _super.call(this, \"Audio Feedback\", AudioFeedback.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    AudioFeedback.UUID = \"00000005-0000-1000-8000-0026BB765291\";\n    return AudioFeedback;\n}(Characteristic_1.Characteristic));\nexports.AudioFeedback = AudioFeedback;\nCharacteristic_1.Characteristic.AudioFeedback = AudioFeedback;\n/**\n * Characteristic \"Battery Level\"\n */\nvar BatteryLevel = /** @class */ (function (_super) {\n    tslib_1.__extends(BatteryLevel, _super);\n    function BatteryLevel() {\n        var _this = _super.call(this, \"Battery Level\", BatteryLevel.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            unit: \"percentage\" /* Units.PERCENTAGE */,\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    BatteryLevel.UUID = \"00000068-0000-1000-8000-0026BB765291\";\n    return BatteryLevel;\n}(Characteristic_1.Characteristic));\nexports.BatteryLevel = BatteryLevel;\nCharacteristic_1.Characteristic.BatteryLevel = BatteryLevel;\n/**\n * Characteristic \"Brightness\"\n */\nvar Brightness = /** @class */ (function (_super) {\n    tslib_1.__extends(Brightness, _super);\n    function Brightness() {\n        var _this = _super.call(this, \"Brightness\", Brightness.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"percentage\" /* Units.PERCENTAGE */,\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Brightness.UUID = \"00000008-0000-1000-8000-0026BB765291\";\n    return Brightness;\n}(Characteristic_1.Characteristic));\nexports.Brightness = Brightness;\nCharacteristic_1.Characteristic.Brightness = Brightness;\n/**\n * Characteristic \"Button Event\"\n */\nvar ButtonEvent = /** @class */ (function (_super) {\n    tslib_1.__extends(ButtonEvent, _super);\n    function ButtonEvent() {\n        var _this = _super.call(this, \"Button Event\", ButtonEvent.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            adminOnlyAccess: [2 /* Access.NOTIFY */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ButtonEvent.UUID = \"00000126-0000-1000-8000-0026BB765291\";\n    return ButtonEvent;\n}(Characteristic_1.Characteristic));\nexports.ButtonEvent = ButtonEvent;\nCharacteristic_1.Characteristic.ButtonEvent = ButtonEvent;\n/**\n * Characteristic \"Camera Operating Mode Indicator\"\n */\nvar CameraOperatingModeIndicator = /** @class */ (function (_super) {\n    tslib_1.__extends(CameraOperatingModeIndicator, _super);\n    function CameraOperatingModeIndicator() {\n        var _this = _super.call(this, \"Camera Operating Mode Indicator\", CameraOperatingModeIndicator.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"tw\" /* Perms.TIMED_WRITE */],\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CameraOperatingModeIndicator.UUID = \"0000021D-0000-1000-8000-0026BB765291\";\n    CameraOperatingModeIndicator.DISABLE = 0;\n    CameraOperatingModeIndicator.ENABLE = 1;\n    return CameraOperatingModeIndicator;\n}(Characteristic_1.Characteristic));\nexports.CameraOperatingModeIndicator = CameraOperatingModeIndicator;\nCharacteristic_1.Characteristic.CameraOperatingModeIndicator = CameraOperatingModeIndicator;\n/**\n * Characteristic \"Carbon Dioxide Detected\"\n */\nvar CarbonDioxideDetected = /** @class */ (function (_super) {\n    tslib_1.__extends(CarbonDioxideDetected, _super);\n    function CarbonDioxideDetected() {\n        var _this = _super.call(this, \"Carbon Dioxide Detected\", CarbonDioxideDetected.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CarbonDioxideDetected.UUID = \"00000092-0000-1000-8000-0026BB765291\";\n    CarbonDioxideDetected.CO2_LEVELS_NORMAL = 0;\n    CarbonDioxideDetected.CO2_LEVELS_ABNORMAL = 1;\n    return CarbonDioxideDetected;\n}(Characteristic_1.Characteristic));\nexports.CarbonDioxideDetected = CarbonDioxideDetected;\nCharacteristic_1.Characteristic.CarbonDioxideDetected = CarbonDioxideDetected;\n/**\n * Characteristic \"Carbon Dioxide Level\"\n */\nvar CarbonDioxideLevel = /** @class */ (function (_super) {\n    tslib_1.__extends(CarbonDioxideLevel, _super);\n    function CarbonDioxideLevel() {\n        var _this = _super.call(this, \"Carbon Dioxide Level\", CarbonDioxideLevel.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 100000,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CarbonDioxideLevel.UUID = \"00000093-0000-1000-8000-0026BB765291\";\n    return CarbonDioxideLevel;\n}(Characteristic_1.Characteristic));\nexports.CarbonDioxideLevel = CarbonDioxideLevel;\nCharacteristic_1.Characteristic.CarbonDioxideLevel = CarbonDioxideLevel;\n/**\n * Characteristic \"Carbon Dioxide Peak Level\"\n */\nvar CarbonDioxidePeakLevel = /** @class */ (function (_super) {\n    tslib_1.__extends(CarbonDioxidePeakLevel, _super);\n    function CarbonDioxidePeakLevel() {\n        var _this = _super.call(this, \"Carbon Dioxide Peak Level\", CarbonDioxidePeakLevel.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 100000,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CarbonDioxidePeakLevel.UUID = \"00000094-0000-1000-8000-0026BB765291\";\n    return CarbonDioxidePeakLevel;\n}(Characteristic_1.Characteristic));\nexports.CarbonDioxidePeakLevel = CarbonDioxidePeakLevel;\nCharacteristic_1.Characteristic.CarbonDioxidePeakLevel = CarbonDioxidePeakLevel;\n/**\n * Characteristic \"Carbon Monoxide Detected\"\n */\nvar CarbonMonoxideDetected = /** @class */ (function (_super) {\n    tslib_1.__extends(CarbonMonoxideDetected, _super);\n    function CarbonMonoxideDetected() {\n        var _this = _super.call(this, \"Carbon Monoxide Detected\", CarbonMonoxideDetected.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CarbonMonoxideDetected.UUID = \"00000069-0000-1000-8000-0026BB765291\";\n    CarbonMonoxideDetected.CO_LEVELS_NORMAL = 0;\n    CarbonMonoxideDetected.CO_LEVELS_ABNORMAL = 1;\n    return CarbonMonoxideDetected;\n}(Characteristic_1.Characteristic));\nexports.CarbonMonoxideDetected = CarbonMonoxideDetected;\nCharacteristic_1.Characteristic.CarbonMonoxideDetected = CarbonMonoxideDetected;\n/**\n * Characteristic \"Carbon Monoxide Level\"\n */\nvar CarbonMonoxideLevel = /** @class */ (function (_super) {\n    tslib_1.__extends(CarbonMonoxideLevel, _super);\n    function CarbonMonoxideLevel() {\n        var _this = _super.call(this, \"Carbon Monoxide Level\", CarbonMonoxideLevel.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CarbonMonoxideLevel.UUID = \"00000090-0000-1000-8000-0026BB765291\";\n    return CarbonMonoxideLevel;\n}(Characteristic_1.Characteristic));\nexports.CarbonMonoxideLevel = CarbonMonoxideLevel;\nCharacteristic_1.Characteristic.CarbonMonoxideLevel = CarbonMonoxideLevel;\n/**\n * Characteristic \"Carbon Monoxide Peak Level\"\n */\nvar CarbonMonoxidePeakLevel = /** @class */ (function (_super) {\n    tslib_1.__extends(CarbonMonoxidePeakLevel, _super);\n    function CarbonMonoxidePeakLevel() {\n        var _this = _super.call(this, \"Carbon Monoxide Peak Level\", CarbonMonoxidePeakLevel.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CarbonMonoxidePeakLevel.UUID = \"00000091-0000-1000-8000-0026BB765291\";\n    return CarbonMonoxidePeakLevel;\n}(Characteristic_1.Characteristic));\nexports.CarbonMonoxidePeakLevel = CarbonMonoxidePeakLevel;\nCharacteristic_1.Characteristic.CarbonMonoxidePeakLevel = CarbonMonoxidePeakLevel;\n/**\n * Characteristic \"Category\"\n * @deprecated Removed and not used anymore\n */\nvar Category = /** @class */ (function (_super) {\n    tslib_1.__extends(Category, _super);\n    function Category() {\n        var _this = _super.call(this, \"Category\", Category.UUID, {\n            format: \"uint16\" /* Formats.UINT16 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 1,\n            maxValue: 16,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Category.UUID = \"000000A3-0000-1000-8000-0026BB765291\";\n    return Category;\n}(Characteristic_1.Characteristic));\nexports.Category = Category;\n// noinspection JSDeprecatedSymbols\nCharacteristic_1.Characteristic.Category = Category;\n/**\n * Characteristic \"CCA Energy Detect Threshold\"\n * @since iOS 14\n */\nvar CCAEnergyDetectThreshold = /** @class */ (function (_super) {\n    tslib_1.__extends(CCAEnergyDetectThreshold, _super);\n    function CCAEnergyDetectThreshold() {\n        var _this = _super.call(this, \"CCA Energy Detect Threshold\", CCAEnergyDetectThreshold.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CCAEnergyDetectThreshold.UUID = \"00000246-0000-1000-8000-0026BB765291\";\n    return CCAEnergyDetectThreshold;\n}(Characteristic_1.Characteristic));\nexports.CCAEnergyDetectThreshold = CCAEnergyDetectThreshold;\nCharacteristic_1.Characteristic.CCAEnergyDetectThreshold = CCAEnergyDetectThreshold;\n/**\n * Characteristic \"CCA Signal Detect Threshold\"\n * @since iOS 14\n */\nvar CCASignalDetectThreshold = /** @class */ (function (_super) {\n    tslib_1.__extends(CCASignalDetectThreshold, _super);\n    function CCASignalDetectThreshold() {\n        var _this = _super.call(this, \"CCA Signal Detect Threshold\", CCASignalDetectThreshold.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CCASignalDetectThreshold.UUID = \"00000245-0000-1000-8000-0026BB765291\";\n    return CCASignalDetectThreshold;\n}(Characteristic_1.Characteristic));\nexports.CCASignalDetectThreshold = CCASignalDetectThreshold;\nCharacteristic_1.Characteristic.CCASignalDetectThreshold = CCASignalDetectThreshold;\n/**\n * Characteristic \"Characteristic Value Active Transition Count\"\n * @since iOS 14\n */\nvar CharacteristicValueActiveTransitionCount = /** @class */ (function (_super) {\n    tslib_1.__extends(CharacteristicValueActiveTransitionCount, _super);\n    function CharacteristicValueActiveTransitionCount() {\n        var _this = _super.call(this, \"Characteristic Value Active Transition Count\", CharacteristicValueActiveTransitionCount.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CharacteristicValueActiveTransitionCount.UUID = \"0000024B-0000-1000-8000-0026BB765291\";\n    return CharacteristicValueActiveTransitionCount;\n}(Characteristic_1.Characteristic));\nexports.CharacteristicValueActiveTransitionCount = CharacteristicValueActiveTransitionCount;\nCharacteristic_1.Characteristic.CharacteristicValueActiveTransitionCount = CharacteristicValueActiveTransitionCount;\n/**\n * Characteristic \"Characteristic Value Transition Control\"\n * @since iOS 14\n */\nvar CharacteristicValueTransitionControl = /** @class */ (function (_super) {\n    tslib_1.__extends(CharacteristicValueTransitionControl, _super);\n    function CharacteristicValueTransitionControl() {\n        var _this = _super.call(this, \"Characteristic Value Transition Control\", CharacteristicValueTransitionControl.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"wr\" /* Perms.WRITE_RESPONSE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CharacteristicValueTransitionControl.UUID = \"00000143-0000-1000-8000-0026BB765291\";\n    return CharacteristicValueTransitionControl;\n}(Characteristic_1.Characteristic));\nexports.CharacteristicValueTransitionControl = CharacteristicValueTransitionControl;\nCharacteristic_1.Characteristic.CharacteristicValueTransitionControl = CharacteristicValueTransitionControl;\n/**\n * Characteristic \"Charging State\"\n */\nvar ChargingState = /** @class */ (function (_super) {\n    tslib_1.__extends(ChargingState, _super);\n    function ChargingState() {\n        var _this = _super.call(this, \"Charging State\", ChargingState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 2,\n            minStep: 1,\n            validValues: [0, 1, 2],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ChargingState.UUID = \"0000008F-0000-1000-8000-0026BB765291\";\n    ChargingState.NOT_CHARGING = 0;\n    ChargingState.CHARGING = 1;\n    ChargingState.NOT_CHARGEABLE = 2;\n    return ChargingState;\n}(Characteristic_1.Characteristic));\nexports.ChargingState = ChargingState;\nCharacteristic_1.Characteristic.ChargingState = ChargingState;\n/**\n * Characteristic \"Closed Captions\"\n */\nvar ClosedCaptions = /** @class */ (function (_super) {\n    tslib_1.__extends(ClosedCaptions, _super);\n    function ClosedCaptions() {\n        var _this = _super.call(this, \"Closed Captions\", ClosedCaptions.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ClosedCaptions.UUID = \"000000DD-0000-1000-8000-0026BB765291\";\n    ClosedCaptions.DISABLED = 0;\n    ClosedCaptions.ENABLED = 1;\n    return ClosedCaptions;\n}(Characteristic_1.Characteristic));\nexports.ClosedCaptions = ClosedCaptions;\nCharacteristic_1.Characteristic.ClosedCaptions = ClosedCaptions;\n/**\n * Characteristic \"Color Temperature\"\n */\nvar ColorTemperature = /** @class */ (function (_super) {\n    tslib_1.__extends(ColorTemperature, _super);\n    function ColorTemperature() {\n        var _this = _super.call(this, \"Color Temperature\", ColorTemperature.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 140,\n            maxValue: 500,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ColorTemperature.UUID = \"000000CE-0000-1000-8000-0026BB765291\";\n    return ColorTemperature;\n}(Characteristic_1.Characteristic));\nexports.ColorTemperature = ColorTemperature;\nCharacteristic_1.Characteristic.ColorTemperature = ColorTemperature;\n/**\n * Characteristic \"Configuration State\"\n * @since iOS 15\n */\nvar ConfigurationState = /** @class */ (function (_super) {\n    tslib_1.__extends(ConfigurationState, _super);\n    function ConfigurationState() {\n        var _this = _super.call(this, \"Configuration State\", ConfigurationState.UUID, {\n            format: \"uint16\" /* Formats.UINT16 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ConfigurationState.UUID = \"00000263-0000-1000-8000-0026BB765291\";\n    return ConfigurationState;\n}(Characteristic_1.Characteristic));\nexports.ConfigurationState = ConfigurationState;\nCharacteristic_1.Characteristic.ConfigurationState = ConfigurationState;\n/**\n * Characteristic \"Configure Bridged Accessory\"\n * @deprecated Removed and not used anymore\n */\nvar ConfigureBridgedAccessory = /** @class */ (function (_super) {\n    tslib_1.__extends(ConfigureBridgedAccessory, _super);\n    function ConfigureBridgedAccessory() {\n        var _this = _super.call(this, \"Configure Bridged Accessory\", ConfigureBridgedAccessory.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ConfigureBridgedAccessory.UUID = \"000000A0-0000-1000-8000-0026BB765291\";\n    return ConfigureBridgedAccessory;\n}(Characteristic_1.Characteristic));\nexports.ConfigureBridgedAccessory = ConfigureBridgedAccessory;\n// noinspection JSDeprecatedSymbols\nCharacteristic_1.Characteristic.ConfigureBridgedAccessory = ConfigureBridgedAccessory;\n/**\n * Characteristic \"Configure Bridged Accessory Status\"\n * @deprecated Removed and not used anymore\n */\nvar ConfigureBridgedAccessoryStatus = /** @class */ (function (_super) {\n    tslib_1.__extends(ConfigureBridgedAccessoryStatus, _super);\n    function ConfigureBridgedAccessoryStatus() {\n        var _this = _super.call(this, \"Configure Bridged Accessory Status\", ConfigureBridgedAccessoryStatus.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ConfigureBridgedAccessoryStatus.UUID = \"0000009D-0000-1000-8000-0026BB765291\";\n    return ConfigureBridgedAccessoryStatus;\n}(Characteristic_1.Characteristic));\nexports.ConfigureBridgedAccessoryStatus = ConfigureBridgedAccessoryStatus;\n// noinspection JSDeprecatedSymbols\nCharacteristic_1.Characteristic.ConfigureBridgedAccessoryStatus = ConfigureBridgedAccessoryStatus;\n/**\n * Characteristic \"Configured Name\"\n */\nvar ConfiguredName = /** @class */ (function (_super) {\n    tslib_1.__extends(ConfiguredName, _super);\n    function ConfiguredName() {\n        var _this = _super.call(this, \"Configured Name\", ConfiguredName.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ConfiguredName.UUID = \"000000E3-0000-1000-8000-0026BB765291\";\n    return ConfiguredName;\n}(Characteristic_1.Characteristic));\nexports.ConfiguredName = ConfiguredName;\nCharacteristic_1.Characteristic.ConfiguredName = ConfiguredName;\n/**\n * Characteristic \"Contact Sensor State\"\n */\nvar ContactSensorState = /** @class */ (function (_super) {\n    tslib_1.__extends(ContactSensorState, _super);\n    function ContactSensorState() {\n        var _this = _super.call(this, \"Contact Sensor State\", ContactSensorState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ContactSensorState.UUID = \"0000006A-0000-1000-8000-0026BB765291\";\n    ContactSensorState.CONTACT_DETECTED = 0;\n    ContactSensorState.CONTACT_NOT_DETECTED = 1;\n    return ContactSensorState;\n}(Characteristic_1.Characteristic));\nexports.ContactSensorState = ContactSensorState;\nCharacteristic_1.Characteristic.ContactSensorState = ContactSensorState;\n/**\n * Characteristic \"Cooling Threshold Temperature\"\n */\nvar CoolingThresholdTemperature = /** @class */ (function (_super) {\n    tslib_1.__extends(CoolingThresholdTemperature, _super);\n    function CoolingThresholdTemperature() {\n        var _this = _super.call(this, \"Cooling Threshold Temperature\", CoolingThresholdTemperature.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"celsius\" /* Units.CELSIUS */,\n            minValue: 10,\n            maxValue: 35,\n            minStep: 0.1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CoolingThresholdTemperature.UUID = \"0000000D-0000-1000-8000-0026BB765291\";\n    return CoolingThresholdTemperature;\n}(Characteristic_1.Characteristic));\nexports.CoolingThresholdTemperature = CoolingThresholdTemperature;\nCharacteristic_1.Characteristic.CoolingThresholdTemperature = CoolingThresholdTemperature;\n/**\n * Characteristic \"Crypto Hash\"\n */\nvar CryptoHash = /** @class */ (function (_super) {\n    tslib_1.__extends(CryptoHash, _super);\n    function CryptoHash() {\n        var _this = _super.call(this, \"Crypto Hash\", CryptoHash.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pw\" /* Perms.PAIRED_WRITE */, \"wr\" /* Perms.WRITE_RESPONSE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CryptoHash.UUID = \"00000250-0000-1000-8000-0026BB765291\";\n    return CryptoHash;\n}(Characteristic_1.Characteristic));\nexports.CryptoHash = CryptoHash;\nCharacteristic_1.Characteristic.CryptoHash = CryptoHash;\n/**\n * Characteristic \"Current Air Purifier State\"\n */\nvar CurrentAirPurifierState = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentAirPurifierState, _super);\n    function CurrentAirPurifierState() {\n        var _this = _super.call(this, \"Current Air Purifier State\", CurrentAirPurifierState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 2,\n            minStep: 1,\n            validValues: [0, 1, 2],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentAirPurifierState.UUID = \"000000A9-0000-1000-8000-0026BB765291\";\n    CurrentAirPurifierState.INACTIVE = 0;\n    CurrentAirPurifierState.IDLE = 1;\n    CurrentAirPurifierState.PURIFYING_AIR = 2;\n    return CurrentAirPurifierState;\n}(Characteristic_1.Characteristic));\nexports.CurrentAirPurifierState = CurrentAirPurifierState;\nCharacteristic_1.Characteristic.CurrentAirPurifierState = CurrentAirPurifierState;\n/**\n * Characteristic \"Current Ambient Light Level\"\n */\nvar CurrentAmbientLightLevel = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentAmbientLightLevel, _super);\n    function CurrentAmbientLightLevel() {\n        var _this = _super.call(this, \"Current Ambient Light Level\", CurrentAmbientLightLevel.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            unit: \"lux\" /* Units.LUX */,\n            minValue: 0.0001,\n            maxValue: 100000,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentAmbientLightLevel.UUID = \"0000006B-0000-1000-8000-0026BB765291\";\n    return CurrentAmbientLightLevel;\n}(Characteristic_1.Characteristic));\nexports.CurrentAmbientLightLevel = CurrentAmbientLightLevel;\nCharacteristic_1.Characteristic.CurrentAmbientLightLevel = CurrentAmbientLightLevel;\n/**\n * Characteristic \"Current Door State\"\n */\nvar CurrentDoorState = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentDoorState, _super);\n    function CurrentDoorState() {\n        var _this = _super.call(this, \"Current Door State\", CurrentDoorState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 4,\n            minStep: 1,\n            validValues: [0, 1, 2, 3, 4],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentDoorState.UUID = \"0000000E-0000-1000-8000-0026BB765291\";\n    CurrentDoorState.OPEN = 0;\n    CurrentDoorState.CLOSED = 1;\n    CurrentDoorState.OPENING = 2;\n    CurrentDoorState.CLOSING = 3;\n    CurrentDoorState.STOPPED = 4;\n    return CurrentDoorState;\n}(Characteristic_1.Characteristic));\nexports.CurrentDoorState = CurrentDoorState;\nCharacteristic_1.Characteristic.CurrentDoorState = CurrentDoorState;\n/**\n * Characteristic \"Current Fan State\"\n */\nvar CurrentFanState = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentFanState, _super);\n    function CurrentFanState() {\n        var _this = _super.call(this, \"Current Fan State\", CurrentFanState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 2,\n            minStep: 1,\n            validValues: [0, 1, 2],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentFanState.UUID = \"000000AF-0000-1000-8000-0026BB765291\";\n    CurrentFanState.INACTIVE = 0;\n    CurrentFanState.IDLE = 1;\n    CurrentFanState.BLOWING_AIR = 2;\n    return CurrentFanState;\n}(Characteristic_1.Characteristic));\nexports.CurrentFanState = CurrentFanState;\nCharacteristic_1.Characteristic.CurrentFanState = CurrentFanState;\n/**\n * Characteristic \"Current Heater-Cooler State\"\n */\nvar CurrentHeaterCoolerState = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentHeaterCoolerState, _super);\n    function CurrentHeaterCoolerState() {\n        var _this = _super.call(this, \"Current Heater-Cooler State\", CurrentHeaterCoolerState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 3,\n            minStep: 1,\n            validValues: [0, 1, 2, 3],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentHeaterCoolerState.UUID = \"000000B1-0000-1000-8000-0026BB765291\";\n    CurrentHeaterCoolerState.INACTIVE = 0;\n    CurrentHeaterCoolerState.IDLE = 1;\n    CurrentHeaterCoolerState.HEATING = 2;\n    CurrentHeaterCoolerState.COOLING = 3;\n    return CurrentHeaterCoolerState;\n}(Characteristic_1.Characteristic));\nexports.CurrentHeaterCoolerState = CurrentHeaterCoolerState;\nCharacteristic_1.Characteristic.CurrentHeaterCoolerState = CurrentHeaterCoolerState;\n/**\n * Characteristic \"Current Heating Cooling State\"\n */\nvar CurrentHeatingCoolingState = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentHeatingCoolingState, _super);\n    function CurrentHeatingCoolingState() {\n        var _this = _super.call(this, \"Current Heating Cooling State\", CurrentHeatingCoolingState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 2,\n            minStep: 1,\n            validValues: [0, 1, 2],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentHeatingCoolingState.UUID = \"0000000F-0000-1000-8000-0026BB765291\";\n    CurrentHeatingCoolingState.OFF = 0;\n    CurrentHeatingCoolingState.HEAT = 1;\n    CurrentHeatingCoolingState.COOL = 2;\n    return CurrentHeatingCoolingState;\n}(Characteristic_1.Characteristic));\nexports.CurrentHeatingCoolingState = CurrentHeatingCoolingState;\nCharacteristic_1.Characteristic.CurrentHeatingCoolingState = CurrentHeatingCoolingState;\n/**\n * Characteristic \"Current Horizontal Tilt Angle\"\n */\nvar CurrentHorizontalTiltAngle = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentHorizontalTiltAngle, _super);\n    function CurrentHorizontalTiltAngle() {\n        var _this = _super.call(this, \"Current Horizontal Tilt Angle\", CurrentHorizontalTiltAngle.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            unit: \"arcdegrees\" /* Units.ARC_DEGREE */,\n            minValue: -90,\n            maxValue: 90,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentHorizontalTiltAngle.UUID = \"0000006C-0000-1000-8000-0026BB765291\";\n    return CurrentHorizontalTiltAngle;\n}(Characteristic_1.Characteristic));\nexports.CurrentHorizontalTiltAngle = CurrentHorizontalTiltAngle;\nCharacteristic_1.Characteristic.CurrentHorizontalTiltAngle = CurrentHorizontalTiltAngle;\n/**\n * Characteristic \"Current Humidifier-Dehumidifier State\"\n */\nvar CurrentHumidifierDehumidifierState = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentHumidifierDehumidifierState, _super);\n    function CurrentHumidifierDehumidifierState() {\n        var _this = _super.call(this, \"Current Humidifier-Dehumidifier State\", CurrentHumidifierDehumidifierState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 3,\n            minStep: 1,\n            validValues: [0, 1, 2, 3],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentHumidifierDehumidifierState.UUID = \"000000B3-0000-1000-8000-0026BB765291\";\n    CurrentHumidifierDehumidifierState.INACTIVE = 0;\n    CurrentHumidifierDehumidifierState.IDLE = 1;\n    CurrentHumidifierDehumidifierState.HUMIDIFYING = 2;\n    CurrentHumidifierDehumidifierState.DEHUMIDIFYING = 3;\n    return CurrentHumidifierDehumidifierState;\n}(Characteristic_1.Characteristic));\nexports.CurrentHumidifierDehumidifierState = CurrentHumidifierDehumidifierState;\nCharacteristic_1.Characteristic.CurrentHumidifierDehumidifierState = CurrentHumidifierDehumidifierState;\n/**\n * Characteristic \"Current Media State\"\n */\nvar CurrentMediaState = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentMediaState, _super);\n    function CurrentMediaState() {\n        var _this = _super.call(this, \"Current Media State\", CurrentMediaState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 5,\n            minStep: 1,\n            validValues: [0, 1, 2, 4, 5],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentMediaState.UUID = \"000000E0-0000-1000-8000-0026BB765291\";\n    CurrentMediaState.PLAY = 0;\n    CurrentMediaState.PAUSE = 1;\n    CurrentMediaState.STOP = 2;\n    CurrentMediaState.LOADING = 4;\n    CurrentMediaState.INTERRUPTED = 5;\n    return CurrentMediaState;\n}(Characteristic_1.Characteristic));\nexports.CurrentMediaState = CurrentMediaState;\nCharacteristic_1.Characteristic.CurrentMediaState = CurrentMediaState;\n/**\n * Characteristic \"Current Position\"\n */\nvar CurrentPosition = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentPosition, _super);\n    function CurrentPosition() {\n        var _this = _super.call(this, \"Current Position\", CurrentPosition.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            unit: \"percentage\" /* Units.PERCENTAGE */,\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentPosition.UUID = \"0000006D-0000-1000-8000-0026BB765291\";\n    return CurrentPosition;\n}(Characteristic_1.Characteristic));\nexports.CurrentPosition = CurrentPosition;\nCharacteristic_1.Characteristic.CurrentPosition = CurrentPosition;\n/**\n * Characteristic \"Current Relative Humidity\"\n */\nvar CurrentRelativeHumidity = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentRelativeHumidity, _super);\n    function CurrentRelativeHumidity() {\n        var _this = _super.call(this, \"Current Relative Humidity\", CurrentRelativeHumidity.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            unit: \"percentage\" /* Units.PERCENTAGE */,\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentRelativeHumidity.UUID = \"00000010-0000-1000-8000-0026BB765291\";\n    return CurrentRelativeHumidity;\n}(Characteristic_1.Characteristic));\nexports.CurrentRelativeHumidity = CurrentRelativeHumidity;\nCharacteristic_1.Characteristic.CurrentRelativeHumidity = CurrentRelativeHumidity;\n/**\n * Characteristic \"Current Slat State\"\n */\nvar CurrentSlatState = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentSlatState, _super);\n    function CurrentSlatState() {\n        var _this = _super.call(this, \"Current Slat State\", CurrentSlatState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 2,\n            minStep: 1,\n            validValues: [0, 1, 2],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentSlatState.UUID = \"000000AA-0000-1000-8000-0026BB765291\";\n    CurrentSlatState.FIXED = 0;\n    CurrentSlatState.JAMMED = 1;\n    CurrentSlatState.SWINGING = 2;\n    return CurrentSlatState;\n}(Characteristic_1.Characteristic));\nexports.CurrentSlatState = CurrentSlatState;\nCharacteristic_1.Characteristic.CurrentSlatState = CurrentSlatState;\n/**\n * Characteristic \"Current Temperature\"\n */\nvar CurrentTemperature = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentTemperature, _super);\n    function CurrentTemperature() {\n        var _this = _super.call(this, \"Current Temperature\", CurrentTemperature.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            unit: \"celsius\" /* Units.CELSIUS */,\n            minValue: -270,\n            maxValue: 100,\n            minStep: 0.1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentTemperature.UUID = \"00000011-0000-1000-8000-0026BB765291\";\n    return CurrentTemperature;\n}(Characteristic_1.Characteristic));\nexports.CurrentTemperature = CurrentTemperature;\nCharacteristic_1.Characteristic.CurrentTemperature = CurrentTemperature;\n/**\n * Characteristic \"Current Tilt Angle\"\n */\nvar CurrentTiltAngle = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentTiltAngle, _super);\n    function CurrentTiltAngle() {\n        var _this = _super.call(this, \"Current Tilt Angle\", CurrentTiltAngle.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            unit: \"arcdegrees\" /* Units.ARC_DEGREE */,\n            minValue: -90,\n            maxValue: 90,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentTiltAngle.UUID = \"000000C1-0000-1000-8000-0026BB765291\";\n    return CurrentTiltAngle;\n}(Characteristic_1.Characteristic));\nexports.CurrentTiltAngle = CurrentTiltAngle;\nCharacteristic_1.Characteristic.CurrentTiltAngle = CurrentTiltAngle;\n/**\n * Characteristic \"Current Time\"\n * @deprecated Removed and not used anymore\n */\nvar CurrentTime = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentTime, _super);\n    function CurrentTime() {\n        var _this = _super.call(this, \"Current Time\", CurrentTime.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentTime.UUID = \"0000009B-0000-1000-8000-0026BB765291\";\n    return CurrentTime;\n}(Characteristic_1.Characteristic));\nexports.CurrentTime = CurrentTime;\n// noinspection JSDeprecatedSymbols\nCharacteristic_1.Characteristic.CurrentTime = CurrentTime;\n/**\n * Characteristic \"Current Transport\"\n * @since iOS 14\n */\nvar CurrentTransport = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentTransport, _super);\n    function CurrentTransport() {\n        var _this = _super.call(this, \"Current Transport\", CurrentTransport.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentTransport.UUID = \"0000022B-0000-1000-8000-0026BB765291\";\n    return CurrentTransport;\n}(Characteristic_1.Characteristic));\nexports.CurrentTransport = CurrentTransport;\nCharacteristic_1.Characteristic.CurrentTransport = CurrentTransport;\n/**\n * Characteristic \"Current Vertical Tilt Angle\"\n */\nvar CurrentVerticalTiltAngle = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentVerticalTiltAngle, _super);\n    function CurrentVerticalTiltAngle() {\n        var _this = _super.call(this, \"Current Vertical Tilt Angle\", CurrentVerticalTiltAngle.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            unit: \"arcdegrees\" /* Units.ARC_DEGREE */,\n            minValue: -90,\n            maxValue: 90,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentVerticalTiltAngle.UUID = \"0000006E-0000-1000-8000-0026BB765291\";\n    return CurrentVerticalTiltAngle;\n}(Characteristic_1.Characteristic));\nexports.CurrentVerticalTiltAngle = CurrentVerticalTiltAngle;\nCharacteristic_1.Characteristic.CurrentVerticalTiltAngle = CurrentVerticalTiltAngle;\n/**\n * Characteristic \"Current Visibility State\"\n */\nvar CurrentVisibilityState = /** @class */ (function (_super) {\n    tslib_1.__extends(CurrentVisibilityState, _super);\n    function CurrentVisibilityState() {\n        var _this = _super.call(this, \"Current Visibility State\", CurrentVisibilityState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    CurrentVisibilityState.UUID = \"00000135-0000-1000-8000-0026BB765291\";\n    CurrentVisibilityState.SHOWN = 0;\n    CurrentVisibilityState.HIDDEN = 1;\n    return CurrentVisibilityState;\n}(Characteristic_1.Characteristic));\nexports.CurrentVisibilityState = CurrentVisibilityState;\nCharacteristic_1.Characteristic.CurrentVisibilityState = CurrentVisibilityState;\n/**\n * Characteristic \"Data Stream HAP Transport\"\n * @since iOS 14\n */\nvar DataStreamHAPTransport = /** @class */ (function (_super) {\n    tslib_1.__extends(DataStreamHAPTransport, _super);\n    function DataStreamHAPTransport() {\n        var _this = _super.call(this, \"Data Stream HAP Transport\", DataStreamHAPTransport.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"wr\" /* Perms.WRITE_RESPONSE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    DataStreamHAPTransport.UUID = \"00000138-0000-1000-8000-0026BB765291\";\n    return DataStreamHAPTransport;\n}(Characteristic_1.Characteristic));\nexports.DataStreamHAPTransport = DataStreamHAPTransport;\nCharacteristic_1.Characteristic.DataStreamHAPTransport = DataStreamHAPTransport;\n/**\n * Characteristic \"Data Stream HAP Transport Interrupt\"\n * @since iOS 14\n */\nvar DataStreamHAPTransportInterrupt = /** @class */ (function (_super) {\n    tslib_1.__extends(DataStreamHAPTransportInterrupt, _super);\n    function DataStreamHAPTransportInterrupt() {\n        var _this = _super.call(this, \"Data Stream HAP Transport Interrupt\", DataStreamHAPTransportInterrupt.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    DataStreamHAPTransportInterrupt.UUID = \"00000139-0000-1000-8000-0026BB765291\";\n    return DataStreamHAPTransportInterrupt;\n}(Characteristic_1.Characteristic));\nexports.DataStreamHAPTransportInterrupt = DataStreamHAPTransportInterrupt;\nCharacteristic_1.Characteristic.DataStreamHAPTransportInterrupt = DataStreamHAPTransportInterrupt;\n/**\n * Characteristic \"Day of the Week\"\n * @deprecated Removed and not used anymore\n */\nvar DayoftheWeek = /** @class */ (function (_super) {\n    tslib_1.__extends(DayoftheWeek, _super);\n    function DayoftheWeek() {\n        var _this = _super.call(this, \"Day of the Week\", DayoftheWeek.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 1,\n            maxValue: 7,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    DayoftheWeek.UUID = \"00000098-0000-1000-8000-0026BB765291\";\n    return DayoftheWeek;\n}(Characteristic_1.Characteristic));\nexports.DayoftheWeek = DayoftheWeek;\n// noinspection JSDeprecatedSymbols\nCharacteristic_1.Characteristic.DayoftheWeek = DayoftheWeek;\n/**\n * Characteristic \"Diagonal Field Of View\"\n * @since iOS 13.2\n */\nvar DiagonalFieldOfView = /** @class */ (function (_super) {\n    tslib_1.__extends(DiagonalFieldOfView, _super);\n    function DiagonalFieldOfView() {\n        var _this = _super.call(this, \"Diagonal Field Of View\", DiagonalFieldOfView.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            unit: \"arcdegrees\" /* Units.ARC_DEGREE */,\n            minValue: 0,\n            maxValue: 360,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    DiagonalFieldOfView.UUID = \"00000224-0000-1000-8000-0026BB765291\";\n    return DiagonalFieldOfView;\n}(Characteristic_1.Characteristic));\nexports.DiagonalFieldOfView = DiagonalFieldOfView;\nCharacteristic_1.Characteristic.DiagonalFieldOfView = DiagonalFieldOfView;\n/**\n * Characteristic \"Digital Zoom\"\n */\nvar DigitalZoom = /** @class */ (function (_super) {\n    tslib_1.__extends(DigitalZoom, _super);\n    function DigitalZoom() {\n        var _this = _super.call(this, \"Digital Zoom\", DigitalZoom.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minStep: 0.1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    DigitalZoom.UUID = \"0000011D-0000-1000-8000-0026BB765291\";\n    return DigitalZoom;\n}(Characteristic_1.Characteristic));\nexports.DigitalZoom = DigitalZoom;\nCharacteristic_1.Characteristic.DigitalZoom = DigitalZoom;\n/**\n * Characteristic \"Discover Bridged Accessories\"\n * @deprecated Removed and not used anymore\n */\nvar DiscoverBridgedAccessories = /** @class */ (function (_super) {\n    tslib_1.__extends(DiscoverBridgedAccessories, _super);\n    function DiscoverBridgedAccessories() {\n        var _this = _super.call(this, \"Discover Bridged Accessories\", DiscoverBridgedAccessories.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    DiscoverBridgedAccessories.UUID = \"0000009E-0000-1000-8000-0026BB765291\";\n    return DiscoverBridgedAccessories;\n}(Characteristic_1.Characteristic));\nexports.DiscoverBridgedAccessories = DiscoverBridgedAccessories;\n// noinspection JSDeprecatedSymbols\nCharacteristic_1.Characteristic.DiscoverBridgedAccessories = DiscoverBridgedAccessories;\n/**\n * Characteristic \"Discovered Bridged Accessories\"\n * @deprecated Removed and not used anymore\n */\nvar DiscoveredBridgedAccessories = /** @class */ (function (_super) {\n    tslib_1.__extends(DiscoveredBridgedAccessories, _super);\n    function DiscoveredBridgedAccessories() {\n        var _this = _super.call(this, \"Discovered Bridged Accessories\", DiscoveredBridgedAccessories.UUID, {\n            format: \"uint16\" /* Formats.UINT16 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    DiscoveredBridgedAccessories.UUID = \"0000009F-0000-1000-8000-0026BB765291\";\n    return DiscoveredBridgedAccessories;\n}(Characteristic_1.Characteristic));\nexports.DiscoveredBridgedAccessories = DiscoveredBridgedAccessories;\n// noinspection JSDeprecatedSymbols\nCharacteristic_1.Characteristic.DiscoveredBridgedAccessories = DiscoveredBridgedAccessories;\n/**\n * Characteristic \"Display Order\"\n */\nvar DisplayOrder = /** @class */ (function (_super) {\n    tslib_1.__extends(DisplayOrder, _super);\n    function DisplayOrder() {\n        var _this = _super.call(this, \"Display Order\", DisplayOrder.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    DisplayOrder.UUID = \"00000136-0000-1000-8000-0026BB765291\";\n    return DisplayOrder;\n}(Characteristic_1.Characteristic));\nexports.DisplayOrder = DisplayOrder;\nCharacteristic_1.Characteristic.DisplayOrder = DisplayOrder;\n/**\n * Characteristic \"Event Retransmission Maximum\"\n * @since iOS 14\n */\nvar EventRetransmissionMaximum = /** @class */ (function (_super) {\n    tslib_1.__extends(EventRetransmissionMaximum, _super);\n    function EventRetransmissionMaximum() {\n        var _this = _super.call(this, \"Event Retransmission Maximum\", EventRetransmissionMaximum.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    EventRetransmissionMaximum.UUID = \"0000023D-0000-1000-8000-0026BB765291\";\n    return EventRetransmissionMaximum;\n}(Characteristic_1.Characteristic));\nexports.EventRetransmissionMaximum = EventRetransmissionMaximum;\nCharacteristic_1.Characteristic.EventRetransmissionMaximum = EventRetransmissionMaximum;\n/**\n * Characteristic \"Event Snapshots Active\"\n */\nvar EventSnapshotsActive = /** @class */ (function (_super) {\n    tslib_1.__extends(EventSnapshotsActive, _super);\n    function EventSnapshotsActive() {\n        var _this = _super.call(this, \"Event Snapshots Active\", EventSnapshotsActive.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    EventSnapshotsActive.UUID = \"00000223-0000-1000-8000-0026BB765291\";\n    EventSnapshotsActive.DISABLE = 0;\n    EventSnapshotsActive.ENABLE = 1;\n    return EventSnapshotsActive;\n}(Characteristic_1.Characteristic));\nexports.EventSnapshotsActive = EventSnapshotsActive;\nCharacteristic_1.Characteristic.EventSnapshotsActive = EventSnapshotsActive;\n/**\n * Characteristic \"Event Transmission Counters\"\n * @since iOS 14\n */\nvar EventTransmissionCounters = /** @class */ (function (_super) {\n    tslib_1.__extends(EventTransmissionCounters, _super);\n    function EventTransmissionCounters() {\n        var _this = _super.call(this, \"Event Transmission Counters\", EventTransmissionCounters.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    EventTransmissionCounters.UUID = \"0000023E-0000-1000-8000-0026BB765291\";\n    return EventTransmissionCounters;\n}(Characteristic_1.Characteristic));\nexports.EventTransmissionCounters = EventTransmissionCounters;\nCharacteristic_1.Characteristic.EventTransmissionCounters = EventTransmissionCounters;\n/**\n * Characteristic \"Filter Change Indication\"\n */\nvar FilterChangeIndication = /** @class */ (function (_super) {\n    tslib_1.__extends(FilterChangeIndication, _super);\n    function FilterChangeIndication() {\n        var _this = _super.call(this, \"Filter Change Indication\", FilterChangeIndication.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    FilterChangeIndication.UUID = \"000000AC-0000-1000-8000-0026BB765291\";\n    FilterChangeIndication.FILTER_OK = 0;\n    FilterChangeIndication.CHANGE_FILTER = 1;\n    return FilterChangeIndication;\n}(Characteristic_1.Characteristic));\nexports.FilterChangeIndication = FilterChangeIndication;\nCharacteristic_1.Characteristic.FilterChangeIndication = FilterChangeIndication;\n/**\n * Characteristic \"Filter Life Level\"\n */\nvar FilterLifeLevel = /** @class */ (function (_super) {\n    tslib_1.__extends(FilterLifeLevel, _super);\n    function FilterLifeLevel() {\n        var _this = _super.call(this, \"Filter Life Level\", FilterLifeLevel.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    FilterLifeLevel.UUID = \"000000AB-0000-1000-8000-0026BB765291\";\n    return FilterLifeLevel;\n}(Characteristic_1.Characteristic));\nexports.FilterLifeLevel = FilterLifeLevel;\nCharacteristic_1.Characteristic.FilterLifeLevel = FilterLifeLevel;\n/**\n * Characteristic \"Firmware Revision\"\n */\nvar FirmwareRevision = /** @class */ (function (_super) {\n    tslib_1.__extends(FirmwareRevision, _super);\n    function FirmwareRevision() {\n        var _this = _super.call(this, \"Firmware Revision\", FirmwareRevision.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    FirmwareRevision.UUID = \"00000052-0000-1000-8000-0026BB765291\";\n    return FirmwareRevision;\n}(Characteristic_1.Characteristic));\nexports.FirmwareRevision = FirmwareRevision;\nCharacteristic_1.Characteristic.FirmwareRevision = FirmwareRevision;\n/**\n * Characteristic \"Firmware Update Readiness\"\n */\nvar FirmwareUpdateReadiness = /** @class */ (function (_super) {\n    tslib_1.__extends(FirmwareUpdateReadiness, _super);\n    function FirmwareUpdateReadiness() {\n        var _this = _super.call(this, \"Firmware Update Readiness\", FirmwareUpdateReadiness.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    FirmwareUpdateReadiness.UUID = \"00000234-0000-1000-8000-0026BB765291\";\n    return FirmwareUpdateReadiness;\n}(Characteristic_1.Characteristic));\nexports.FirmwareUpdateReadiness = FirmwareUpdateReadiness;\nCharacteristic_1.Characteristic.FirmwareUpdateReadiness = FirmwareUpdateReadiness;\n/**\n * Characteristic \"Firmware Update Status\"\n */\nvar FirmwareUpdateStatus = /** @class */ (function (_super) {\n    tslib_1.__extends(FirmwareUpdateStatus, _super);\n    function FirmwareUpdateStatus() {\n        var _this = _super.call(this, \"Firmware Update Status\", FirmwareUpdateStatus.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    FirmwareUpdateStatus.UUID = \"00000235-0000-1000-8000-0026BB765291\";\n    return FirmwareUpdateStatus;\n}(Characteristic_1.Characteristic));\nexports.FirmwareUpdateStatus = FirmwareUpdateStatus;\nCharacteristic_1.Characteristic.FirmwareUpdateStatus = FirmwareUpdateStatus;\n/**\n * Characteristic \"Hardware Finish\"\n * @since iOS 15\n */\nvar HardwareFinish = /** @class */ (function (_super) {\n    tslib_1.__extends(HardwareFinish, _super);\n    function HardwareFinish() {\n        var _this = _super.call(this, \"Hardware Finish\", HardwareFinish.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    HardwareFinish.UUID = \"0000026C-0000-1000-8000-0026BB765291\";\n    return HardwareFinish;\n}(Characteristic_1.Characteristic));\nexports.HardwareFinish = HardwareFinish;\nCharacteristic_1.Characteristic.HardwareFinish = HardwareFinish;\n/**\n * Characteristic \"Hardware Revision\"\n */\nvar HardwareRevision = /** @class */ (function (_super) {\n    tslib_1.__extends(HardwareRevision, _super);\n    function HardwareRevision() {\n        var _this = _super.call(this, \"Hardware Revision\", HardwareRevision.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    HardwareRevision.UUID = \"00000053-0000-1000-8000-0026BB765291\";\n    return HardwareRevision;\n}(Characteristic_1.Characteristic));\nexports.HardwareRevision = HardwareRevision;\nCharacteristic_1.Characteristic.HardwareRevision = HardwareRevision;\n/**\n * Characteristic \"Heart Beat\"\n * @since iOS 14\n */\nvar HeartBeat = /** @class */ (function (_super) {\n    tslib_1.__extends(HeartBeat, _super);\n    function HeartBeat() {\n        var _this = _super.call(this, \"Heart Beat\", HeartBeat.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    HeartBeat.UUID = \"0000024A-0000-1000-8000-0026BB765291\";\n    return HeartBeat;\n}(Characteristic_1.Characteristic));\nexports.HeartBeat = HeartBeat;\nCharacteristic_1.Characteristic.HeartBeat = HeartBeat;\n/**\n * Characteristic \"Heating Threshold Temperature\"\n */\nvar HeatingThresholdTemperature = /** @class */ (function (_super) {\n    tslib_1.__extends(HeatingThresholdTemperature, _super);\n    function HeatingThresholdTemperature() {\n        var _this = _super.call(this, \"Heating Threshold Temperature\", HeatingThresholdTemperature.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"celsius\" /* Units.CELSIUS */,\n            minValue: 0,\n            maxValue: 25,\n            minStep: 0.1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    HeatingThresholdTemperature.UUID = \"00000012-0000-1000-8000-0026BB765291\";\n    return HeatingThresholdTemperature;\n}(Characteristic_1.Characteristic));\nexports.HeatingThresholdTemperature = HeatingThresholdTemperature;\nCharacteristic_1.Characteristic.HeatingThresholdTemperature = HeatingThresholdTemperature;\n/**\n * Characteristic \"Hold Position\"\n */\nvar HoldPosition = /** @class */ (function (_super) {\n    tslib_1.__extends(HoldPosition, _super);\n    function HoldPosition() {\n        var _this = _super.call(this, \"Hold Position\", HoldPosition.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    HoldPosition.UUID = \"0000006F-0000-1000-8000-0026BB765291\";\n    return HoldPosition;\n}(Characteristic_1.Characteristic));\nexports.HoldPosition = HoldPosition;\nCharacteristic_1.Characteristic.HoldPosition = HoldPosition;\n/**\n * Characteristic \"HomeKit Camera Active\"\n */\nvar HomeKitCameraActive = /** @class */ (function (_super) {\n    tslib_1.__extends(HomeKitCameraActive, _super);\n    function HomeKitCameraActive() {\n        var _this = _super.call(this, \"HomeKit Camera Active\", HomeKitCameraActive.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    HomeKitCameraActive.UUID = \"0000021B-0000-1000-8000-0026BB765291\";\n    HomeKitCameraActive.OFF = 0;\n    HomeKitCameraActive.ON = 1;\n    return HomeKitCameraActive;\n}(Characteristic_1.Characteristic));\nexports.HomeKitCameraActive = HomeKitCameraActive;\nCharacteristic_1.Characteristic.HomeKitCameraActive = HomeKitCameraActive;\n/**\n * Characteristic \"Hue\"\n */\nvar Hue = /** @class */ (function (_super) {\n    tslib_1.__extends(Hue, _super);\n    function Hue() {\n        var _this = _super.call(this, \"Hue\", Hue.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"arcdegrees\" /* Units.ARC_DEGREE */,\n            minValue: 0,\n            maxValue: 360,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Hue.UUID = \"00000013-0000-1000-8000-0026BB765291\";\n    return Hue;\n}(Characteristic_1.Characteristic));\nexports.Hue = Hue;\nCharacteristic_1.Characteristic.Hue = Hue;\n/**\n * Characteristic \"Identifier\"\n */\nvar Identifier = /** @class */ (function (_super) {\n    tslib_1.__extends(Identifier, _super);\n    function Identifier() {\n        var _this = _super.call(this, \"Identifier\", Identifier.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Identifier.UUID = \"000000E6-0000-1000-8000-0026BB765291\";\n    return Identifier;\n}(Characteristic_1.Characteristic));\nexports.Identifier = Identifier;\nCharacteristic_1.Characteristic.Identifier = Identifier;\n/**\n * Characteristic \"Identify\"\n */\nvar Identify = /** @class */ (function (_super) {\n    tslib_1.__extends(Identify, _super);\n    function Identify() {\n        var _this = _super.call(this, \"Identify\", Identify.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Identify.UUID = \"00000014-0000-1000-8000-0026BB765291\";\n    return Identify;\n}(Characteristic_1.Characteristic));\nexports.Identify = Identify;\nCharacteristic_1.Characteristic.Identify = Identify;\n/**\n * Characteristic \"Image Mirroring\"\n */\nvar ImageMirroring = /** @class */ (function (_super) {\n    tslib_1.__extends(ImageMirroring, _super);\n    function ImageMirroring() {\n        var _this = _super.call(this, \"Image Mirroring\", ImageMirroring.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ImageMirroring.UUID = \"0000011F-0000-1000-8000-0026BB765291\";\n    return ImageMirroring;\n}(Characteristic_1.Characteristic));\nexports.ImageMirroring = ImageMirroring;\nCharacteristic_1.Characteristic.ImageMirroring = ImageMirroring;\n/**\n * Characteristic \"Image Rotation\"\n */\nvar ImageRotation = /** @class */ (function (_super) {\n    tslib_1.__extends(ImageRotation, _super);\n    function ImageRotation() {\n        var _this = _super.call(this, \"Image Rotation\", ImageRotation.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"arcdegrees\" /* Units.ARC_DEGREE */,\n            minValue: 0,\n            maxValue: 360,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ImageRotation.UUID = \"0000011E-0000-1000-8000-0026BB765291\";\n    return ImageRotation;\n}(Characteristic_1.Characteristic));\nexports.ImageRotation = ImageRotation;\nCharacteristic_1.Characteristic.ImageRotation = ImageRotation;\n/**\n * Characteristic \"Input Device Type\"\n */\nvar InputDeviceType = /** @class */ (function (_super) {\n    tslib_1.__extends(InputDeviceType, _super);\n    function InputDeviceType() {\n        var _this = _super.call(this, \"Input Device Type\", InputDeviceType.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 6,\n            minStep: 1,\n            validValues: [0, 1, 2, 3, 4, 5, 6],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    InputDeviceType.UUID = \"000000DC-0000-1000-8000-0026BB765291\";\n    InputDeviceType.OTHER = 0;\n    InputDeviceType.TV = 1;\n    InputDeviceType.RECORDING = 2;\n    InputDeviceType.TUNER = 3;\n    InputDeviceType.PLAYBACK = 4;\n    InputDeviceType.AUDIO_SYSTEM = 5;\n    return InputDeviceType;\n}(Characteristic_1.Characteristic));\nexports.InputDeviceType = InputDeviceType;\nCharacteristic_1.Characteristic.InputDeviceType = InputDeviceType;\n/**\n * Characteristic \"Input Source Type\"\n */\nvar InputSourceType = /** @class */ (function (_super) {\n    tslib_1.__extends(InputSourceType, _super);\n    function InputSourceType() {\n        var _this = _super.call(this, \"Input Source Type\", InputSourceType.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 10,\n            minStep: 1,\n            validValues: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    InputSourceType.UUID = \"000000DB-0000-1000-8000-0026BB765291\";\n    InputSourceType.OTHER = 0;\n    InputSourceType.HOME_SCREEN = 1;\n    InputSourceType.TUNER = 2;\n    InputSourceType.HDMI = 3;\n    InputSourceType.COMPOSITE_VIDEO = 4;\n    InputSourceType.S_VIDEO = 5;\n    InputSourceType.COMPONENT_VIDEO = 6;\n    InputSourceType.DVI = 7;\n    InputSourceType.AIRPLAY = 8;\n    InputSourceType.USB = 9;\n    InputSourceType.APPLICATION = 10;\n    return InputSourceType;\n}(Characteristic_1.Characteristic));\nexports.InputSourceType = InputSourceType;\nCharacteristic_1.Characteristic.InputSourceType = InputSourceType;\n/**\n * Characteristic \"In Use\"\n */\nvar InUse = /** @class */ (function (_super) {\n    tslib_1.__extends(InUse, _super);\n    function InUse() {\n        var _this = _super.call(this, \"In Use\", InUse.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    InUse.UUID = \"000000D2-0000-1000-8000-0026BB765291\";\n    InUse.NOT_IN_USE = 0;\n    InUse.IN_USE = 1;\n    return InUse;\n}(Characteristic_1.Characteristic));\nexports.InUse = InUse;\nCharacteristic_1.Characteristic.InUse = InUse;\n/**\n * Characteristic \"Is Configured\"\n */\nvar IsConfigured = /** @class */ (function (_super) {\n    tslib_1.__extends(IsConfigured, _super);\n    function IsConfigured() {\n        var _this = _super.call(this, \"Is Configured\", IsConfigured.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    IsConfigured.UUID = \"000000D6-0000-1000-8000-0026BB765291\";\n    IsConfigured.NOT_CONFIGURED = 0;\n    IsConfigured.CONFIGURED = 1;\n    return IsConfigured;\n}(Characteristic_1.Characteristic));\nexports.IsConfigured = IsConfigured;\nCharacteristic_1.Characteristic.IsConfigured = IsConfigured;\n/**\n * Characteristic \"Leak Detected\"\n */\nvar LeakDetected = /** @class */ (function (_super) {\n    tslib_1.__extends(LeakDetected, _super);\n    function LeakDetected() {\n        var _this = _super.call(this, \"Leak Detected\", LeakDetected.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    LeakDetected.UUID = \"00000070-0000-1000-8000-0026BB765291\";\n    LeakDetected.LEAK_NOT_DETECTED = 0;\n    LeakDetected.LEAK_DETECTED = 1;\n    return LeakDetected;\n}(Characteristic_1.Characteristic));\nexports.LeakDetected = LeakDetected;\nCharacteristic_1.Characteristic.LeakDetected = LeakDetected;\n/**\n * Characteristic \"Link Quality\"\n * @deprecated Removed and not used anymore\n */\nvar LinkQuality = /** @class */ (function (_super) {\n    tslib_1.__extends(LinkQuality, _super);\n    function LinkQuality() {\n        var _this = _super.call(this, \"Link Quality\", LinkQuality.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 1,\n            maxValue: 4,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    LinkQuality.UUID = \"0000009C-0000-1000-8000-0026BB765291\";\n    return LinkQuality;\n}(Characteristic_1.Characteristic));\nexports.LinkQuality = LinkQuality;\n// noinspection JSDeprecatedSymbols\nCharacteristic_1.Characteristic.LinkQuality = LinkQuality;\n/**\n * Characteristic \"List Pairings\"\n */\nvar ListPairings = /** @class */ (function (_super) {\n    tslib_1.__extends(ListPairings, _super);\n    function ListPairings() {\n        var _this = _super.call(this, \"List Pairings\", ListPairings.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ListPairings.UUID = \"00000050-0000-1000-8000-0026BB765291\";\n    return ListPairings;\n}(Characteristic_1.Characteristic));\nexports.ListPairings = ListPairings;\nCharacteristic_1.Characteristic.ListPairings = ListPairings;\n/**\n * Characteristic \"Lock Control Point\"\n */\nvar LockControlPoint = /** @class */ (function (_super) {\n    tslib_1.__extends(LockControlPoint, _super);\n    function LockControlPoint() {\n        var _this = _super.call(this, \"Lock Control Point\", LockControlPoint.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    LockControlPoint.UUID = \"00000019-0000-1000-8000-0026BB765291\";\n    return LockControlPoint;\n}(Characteristic_1.Characteristic));\nexports.LockControlPoint = LockControlPoint;\nCharacteristic_1.Characteristic.LockControlPoint = LockControlPoint;\n/**\n * Characteristic \"Lock Current State\"\n */\nvar LockCurrentState = /** @class */ (function (_super) {\n    tslib_1.__extends(LockCurrentState, _super);\n    function LockCurrentState() {\n        var _this = _super.call(this, \"Lock Current State\", LockCurrentState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 3,\n            minStep: 1,\n            validValues: [0, 1, 2, 3],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    LockCurrentState.UUID = \"0000001D-0000-1000-8000-0026BB765291\";\n    LockCurrentState.UNSECURED = 0;\n    LockCurrentState.SECURED = 1;\n    LockCurrentState.JAMMED = 2;\n    LockCurrentState.UNKNOWN = 3;\n    return LockCurrentState;\n}(Characteristic_1.Characteristic));\nexports.LockCurrentState = LockCurrentState;\nCharacteristic_1.Characteristic.LockCurrentState = LockCurrentState;\n/**\n * Characteristic \"Lock Last Known Action\"\n */\nvar LockLastKnownAction = /** @class */ (function (_super) {\n    tslib_1.__extends(LockLastKnownAction, _super);\n    function LockLastKnownAction() {\n        var _this = _super.call(this, \"Lock Last Known Action\", LockLastKnownAction.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 10,\n            minStep: 1,\n            validValues: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    LockLastKnownAction.UUID = \"0000001C-0000-1000-8000-0026BB765291\";\n    LockLastKnownAction.SECURED_PHYSICALLY_INTERIOR = 0;\n    LockLastKnownAction.UNSECURED_PHYSICALLY_INTERIOR = 1;\n    LockLastKnownAction.SECURED_PHYSICALLY_EXTERIOR = 2;\n    LockLastKnownAction.UNSECURED_PHYSICALLY_EXTERIOR = 3;\n    LockLastKnownAction.SECURED_BY_KEYPAD = 4;\n    LockLastKnownAction.UNSECURED_BY_KEYPAD = 5;\n    LockLastKnownAction.SECURED_REMOTELY = 6;\n    LockLastKnownAction.UNSECURED_REMOTELY = 7;\n    LockLastKnownAction.SECURED_BY_AUTO_SECURE_TIMEOUT = 8;\n    LockLastKnownAction.SECURED_PHYSICALLY = 9;\n    LockLastKnownAction.UNSECURED_PHYSICALLY = 10;\n    return LockLastKnownAction;\n}(Characteristic_1.Characteristic));\nexports.LockLastKnownAction = LockLastKnownAction;\nCharacteristic_1.Characteristic.LockLastKnownAction = LockLastKnownAction;\n/**\n * Characteristic \"Lock Management Auto Security Timeout\"\n */\nvar LockManagementAutoSecurityTimeout = /** @class */ (function (_super) {\n    tslib_1.__extends(LockManagementAutoSecurityTimeout, _super);\n    function LockManagementAutoSecurityTimeout() {\n        var _this = _super.call(this, \"Lock Management Auto Security Timeout\", LockManagementAutoSecurityTimeout.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"seconds\" /* Units.SECONDS */,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    LockManagementAutoSecurityTimeout.UUID = \"0000001A-0000-1000-8000-0026BB765291\";\n    return LockManagementAutoSecurityTimeout;\n}(Characteristic_1.Characteristic));\nexports.LockManagementAutoSecurityTimeout = LockManagementAutoSecurityTimeout;\nCharacteristic_1.Characteristic.LockManagementAutoSecurityTimeout = LockManagementAutoSecurityTimeout;\n/**\n * Characteristic \"Lock Physical Controls\"\n */\nvar LockPhysicalControls = /** @class */ (function (_super) {\n    tslib_1.__extends(LockPhysicalControls, _super);\n    function LockPhysicalControls() {\n        var _this = _super.call(this, \"Lock Physical Controls\", LockPhysicalControls.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    LockPhysicalControls.UUID = \"000000A7-0000-1000-8000-0026BB765291\";\n    LockPhysicalControls.CONTROL_LOCK_DISABLED = 0;\n    LockPhysicalControls.CONTROL_LOCK_ENABLED = 1;\n    return LockPhysicalControls;\n}(Characteristic_1.Characteristic));\nexports.LockPhysicalControls = LockPhysicalControls;\nCharacteristic_1.Characteristic.LockPhysicalControls = LockPhysicalControls;\n/**\n * Characteristic \"Lock Target State\"\n */\nvar LockTargetState = /** @class */ (function (_super) {\n    tslib_1.__extends(LockTargetState, _super);\n    function LockTargetState() {\n        var _this = _super.call(this, \"Lock Target State\", LockTargetState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    LockTargetState.UUID = \"0000001E-0000-1000-8000-0026BB765291\";\n    LockTargetState.UNSECURED = 0;\n    LockTargetState.SECURED = 1;\n    return LockTargetState;\n}(Characteristic_1.Characteristic));\nexports.LockTargetState = LockTargetState;\nCharacteristic_1.Characteristic.LockTargetState = LockTargetState;\n/**\n * Characteristic \"Logs\"\n */\nvar Logs = /** @class */ (function (_super) {\n    tslib_1.__extends(Logs, _super);\n    function Logs() {\n        var _this = _super.call(this, \"Logs\", Logs.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Logs.UUID = \"0000001F-0000-1000-8000-0026BB765291\";\n    return Logs;\n}(Characteristic_1.Characteristic));\nexports.Logs = Logs;\nCharacteristic_1.Characteristic.Logs = Logs;\n/**\n * Characteristic \"MAC Retransmission Maximum\"\n * @since iOS 14\n */\nvar MACRetransmissionMaximum = /** @class */ (function (_super) {\n    tslib_1.__extends(MACRetransmissionMaximum, _super);\n    function MACRetransmissionMaximum() {\n        var _this = _super.call(this, \"MAC Retransmission Maximum\", MACRetransmissionMaximum.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    MACRetransmissionMaximum.UUID = \"00000247-0000-1000-8000-0026BB765291\";\n    return MACRetransmissionMaximum;\n}(Characteristic_1.Characteristic));\nexports.MACRetransmissionMaximum = MACRetransmissionMaximum;\nCharacteristic_1.Characteristic.MACRetransmissionMaximum = MACRetransmissionMaximum;\n/**\n * Characteristic \"MAC Transmission Counters\"\n */\nvar MACTransmissionCounters = /** @class */ (function (_super) {\n    tslib_1.__extends(MACTransmissionCounters, _super);\n    function MACTransmissionCounters() {\n        var _this = _super.call(this, \"MAC Transmission Counters\", MACTransmissionCounters.UUID, {\n            format: \"data\" /* Formats.DATA */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    MACTransmissionCounters.UUID = \"00000248-0000-1000-8000-0026BB765291\";\n    return MACTransmissionCounters;\n}(Characteristic_1.Characteristic));\nexports.MACTransmissionCounters = MACTransmissionCounters;\nCharacteristic_1.Characteristic.MACTransmissionCounters = MACTransmissionCounters;\n/**\n * Characteristic \"Managed Network Enable\"\n */\nvar ManagedNetworkEnable = /** @class */ (function (_super) {\n    tslib_1.__extends(ManagedNetworkEnable, _super);\n    function ManagedNetworkEnable() {\n        var _this = _super.call(this, \"Managed Network Enable\", ManagedNetworkEnable.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"tw\" /* Perms.TIMED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ManagedNetworkEnable.UUID = \"00000215-0000-1000-8000-0026BB765291\";\n    ManagedNetworkEnable.DISABLED = 0;\n    ManagedNetworkEnable.ENABLED = 1;\n    return ManagedNetworkEnable;\n}(Characteristic_1.Characteristic));\nexports.ManagedNetworkEnable = ManagedNetworkEnable;\nCharacteristic_1.Characteristic.ManagedNetworkEnable = ManagedNetworkEnable;\n/**\n * Characteristic \"Manually Disabled\"\n */\nvar ManuallyDisabled = /** @class */ (function (_super) {\n    tslib_1.__extends(ManuallyDisabled, _super);\n    function ManuallyDisabled() {\n        var _this = _super.call(this, \"Manually Disabled\", ManuallyDisabled.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ManuallyDisabled.UUID = \"00000227-0000-1000-8000-0026BB765291\";\n    ManuallyDisabled.ENABLED = 0;\n    ManuallyDisabled.DISABLED = 1;\n    return ManuallyDisabled;\n}(Characteristic_1.Characteristic));\nexports.ManuallyDisabled = ManuallyDisabled;\nCharacteristic_1.Characteristic.ManuallyDisabled = ManuallyDisabled;\n/**\n * Characteristic \"Manufacturer\"\n */\nvar Manufacturer = /** @class */ (function (_super) {\n    tslib_1.__extends(Manufacturer, _super);\n    function Manufacturer() {\n        var _this = _super.call(this, \"Manufacturer\", Manufacturer.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n            maxLen: 64,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Manufacturer.UUID = \"00000020-0000-1000-8000-0026BB765291\";\n    return Manufacturer;\n}(Characteristic_1.Characteristic));\nexports.Manufacturer = Manufacturer;\nCharacteristic_1.Characteristic.Manufacturer = Manufacturer;\n/**\n * Characteristic \"Maximum Transmit Power\"\n * @since iOS 14\n */\nvar MaximumTransmitPower = /** @class */ (function (_super) {\n    tslib_1.__extends(MaximumTransmitPower, _super);\n    function MaximumTransmitPower() {\n        var _this = _super.call(this, \"Maximum Transmit Power\", MaximumTransmitPower.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    MaximumTransmitPower.UUID = \"00000243-0000-1000-8000-0026BB765291\";\n    return MaximumTransmitPower;\n}(Characteristic_1.Characteristic));\nexports.MaximumTransmitPower = MaximumTransmitPower;\nCharacteristic_1.Characteristic.MaximumTransmitPower = MaximumTransmitPower;\n/**\n * Characteristic \"Metrics Buffer Full State\"\n */\nvar MetricsBufferFullState = /** @class */ (function (_super) {\n    tslib_1.__extends(MetricsBufferFullState, _super);\n    function MetricsBufferFullState() {\n        var _this = _super.call(this, \"Metrics Buffer Full State\", MetricsBufferFullState.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    MetricsBufferFullState.UUID = \"00000272-0000-1000-8000-0026BB765291\";\n    return MetricsBufferFullState;\n}(Characteristic_1.Characteristic));\nexports.MetricsBufferFullState = MetricsBufferFullState;\nCharacteristic_1.Characteristic.MetricsBufferFullState = MetricsBufferFullState;\n/**\n * Characteristic \"Model\"\n */\nvar Model = /** @class */ (function (_super) {\n    tslib_1.__extends(Model, _super);\n    function Model() {\n        var _this = _super.call(this, \"Model\", Model.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n            maxLen: 64,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Model.UUID = \"00000021-0000-1000-8000-0026BB765291\";\n    return Model;\n}(Characteristic_1.Characteristic));\nexports.Model = Model;\nCharacteristic_1.Characteristic.Model = Model;\n/**\n * Characteristic \"Motion Detected\"\n */\nvar MotionDetected = /** @class */ (function (_super) {\n    tslib_1.__extends(MotionDetected, _super);\n    function MotionDetected() {\n        var _this = _super.call(this, \"Motion Detected\", MotionDetected.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    MotionDetected.UUID = \"00000022-0000-1000-8000-0026BB765291\";\n    return MotionDetected;\n}(Characteristic_1.Characteristic));\nexports.MotionDetected = MotionDetected;\nCharacteristic_1.Characteristic.MotionDetected = MotionDetected;\n/**\n * Characteristic \"Multifunction Button\"\n */\nvar MultifunctionButton = /** @class */ (function (_super) {\n    tslib_1.__extends(MultifunctionButton, _super);\n    function MultifunctionButton() {\n        var _this = _super.call(this, \"Multifunction Button\", MultifunctionButton.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    MultifunctionButton.UUID = \"0000026B-0000-1000-8000-0026BB765291\";\n    return MultifunctionButton;\n}(Characteristic_1.Characteristic));\nexports.MultifunctionButton = MultifunctionButton;\nCharacteristic_1.Characteristic.MultifunctionButton = MultifunctionButton;\n/**\n * Characteristic \"Mute\"\n */\nvar Mute = /** @class */ (function (_super) {\n    tslib_1.__extends(Mute, _super);\n    function Mute() {\n        var _this = _super.call(this, \"Mute\", Mute.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Mute.UUID = \"0000011A-0000-1000-8000-0026BB765291\";\n    return Mute;\n}(Characteristic_1.Characteristic));\nexports.Mute = Mute;\nCharacteristic_1.Characteristic.Mute = Mute;\n/**\n * Characteristic \"Name\"\n */\nvar Name = /** @class */ (function (_super) {\n    tslib_1.__extends(Name, _super);\n    function Name() {\n        var _this = _super.call(this, \"Name\", Name.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n            maxLen: 64,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Name.UUID = \"00000023-0000-1000-8000-0026BB765291\";\n    return Name;\n}(Characteristic_1.Characteristic));\nexports.Name = Name;\nCharacteristic_1.Characteristic.Name = Name;\n/**\n * Characteristic \"Network Access Violation Control\"\n */\nvar NetworkAccessViolationControl = /** @class */ (function (_super) {\n    tslib_1.__extends(NetworkAccessViolationControl, _super);\n    function NetworkAccessViolationControl() {\n        var _this = _super.call(this, \"Network Access Violation Control\", NetworkAccessViolationControl.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"tw\" /* Perms.TIMED_WRITE */, \"wr\" /* Perms.WRITE_RESPONSE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    NetworkAccessViolationControl.UUID = \"0000021F-0000-1000-8000-0026BB765291\";\n    return NetworkAccessViolationControl;\n}(Characteristic_1.Characteristic));\nexports.NetworkAccessViolationControl = NetworkAccessViolationControl;\nCharacteristic_1.Characteristic.NetworkAccessViolationControl = NetworkAccessViolationControl;\n/**\n * Characteristic \"Network Client Profile Control\"\n */\nvar NetworkClientProfileControl = /** @class */ (function (_super) {\n    tslib_1.__extends(NetworkClientProfileControl, _super);\n    function NetworkClientProfileControl() {\n        var _this = _super.call(this, \"Network Client Profile Control\", NetworkClientProfileControl.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"tw\" /* Perms.TIMED_WRITE */, \"wr\" /* Perms.WRITE_RESPONSE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    NetworkClientProfileControl.UUID = \"0000020C-0000-1000-8000-0026BB765291\";\n    return NetworkClientProfileControl;\n}(Characteristic_1.Characteristic));\nexports.NetworkClientProfileControl = NetworkClientProfileControl;\nCharacteristic_1.Characteristic.NetworkClientProfileControl = NetworkClientProfileControl;\n/**\n * Characteristic \"Network Client Status Control\"\n */\nvar NetworkClientStatusControl = /** @class */ (function (_super) {\n    tslib_1.__extends(NetworkClientStatusControl, _super);\n    function NetworkClientStatusControl() {\n        var _this = _super.call(this, \"Network Client Status Control\", NetworkClientStatusControl.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"wr\" /* Perms.WRITE_RESPONSE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    NetworkClientStatusControl.UUID = \"0000020D-0000-1000-8000-0026BB765291\";\n    return NetworkClientStatusControl;\n}(Characteristic_1.Characteristic));\nexports.NetworkClientStatusControl = NetworkClientStatusControl;\nCharacteristic_1.Characteristic.NetworkClientStatusControl = NetworkClientStatusControl;\n/**\n * Characteristic \"NFC Access Control Point\"\n * @since iOS 15\n */\nvar NFCAccessControlPoint = /** @class */ (function (_super) {\n    tslib_1.__extends(NFCAccessControlPoint, _super);\n    function NFCAccessControlPoint() {\n        var _this = _super.call(this, \"NFC Access Control Point\", NFCAccessControlPoint.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"wr\" /* Perms.WRITE_RESPONSE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    NFCAccessControlPoint.UUID = \"00000264-0000-1000-8000-0026BB765291\";\n    return NFCAccessControlPoint;\n}(Characteristic_1.Characteristic));\nexports.NFCAccessControlPoint = NFCAccessControlPoint;\nCharacteristic_1.Characteristic.NFCAccessControlPoint = NFCAccessControlPoint;\n/**\n * Characteristic \"NFC Access Supported Configuration\"\n * @since iOS 15\n */\nvar NFCAccessSupportedConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(NFCAccessSupportedConfiguration, _super);\n    function NFCAccessSupportedConfiguration() {\n        var _this = _super.call(this, \"NFC Access Supported Configuration\", NFCAccessSupportedConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    NFCAccessSupportedConfiguration.UUID = \"00000265-0000-1000-8000-0026BB765291\";\n    return NFCAccessSupportedConfiguration;\n}(Characteristic_1.Characteristic));\nexports.NFCAccessSupportedConfiguration = NFCAccessSupportedConfiguration;\nCharacteristic_1.Characteristic.NFCAccessSupportedConfiguration = NFCAccessSupportedConfiguration;\n/**\n * Characteristic \"Night Vision\"\n */\nvar NightVision = /** @class */ (function (_super) {\n    tslib_1.__extends(NightVision, _super);\n    function NightVision() {\n        var _this = _super.call(this, \"Night Vision\", NightVision.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"tw\" /* Perms.TIMED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    NightVision.UUID = \"0000011B-0000-1000-8000-0026BB765291\";\n    return NightVision;\n}(Characteristic_1.Characteristic));\nexports.NightVision = NightVision;\nCharacteristic_1.Characteristic.NightVision = NightVision;\n/**\n * Characteristic \"Nitrogen Dioxide Density\"\n */\nvar NitrogenDioxideDensity = /** @class */ (function (_super) {\n    tslib_1.__extends(NitrogenDioxideDensity, _super);\n    function NitrogenDioxideDensity() {\n        var _this = _super.call(this, \"Nitrogen Dioxide Density\", NitrogenDioxideDensity.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1000,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    NitrogenDioxideDensity.UUID = \"000000C4-0000-1000-8000-0026BB765291\";\n    return NitrogenDioxideDensity;\n}(Characteristic_1.Characteristic));\nexports.NitrogenDioxideDensity = NitrogenDioxideDensity;\nCharacteristic_1.Characteristic.NitrogenDioxideDensity = NitrogenDioxideDensity;\n/**\n * Characteristic \"Obstruction Detected\"\n */\nvar ObstructionDetected = /** @class */ (function (_super) {\n    tslib_1.__extends(ObstructionDetected, _super);\n    function ObstructionDetected() {\n        var _this = _super.call(this, \"Obstruction Detected\", ObstructionDetected.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ObstructionDetected.UUID = \"00000024-0000-1000-8000-0026BB765291\";\n    return ObstructionDetected;\n}(Characteristic_1.Characteristic));\nexports.ObstructionDetected = ObstructionDetected;\nCharacteristic_1.Characteristic.ObstructionDetected = ObstructionDetected;\n/**\n * Characteristic \"Occupancy Detected\"\n */\nvar OccupancyDetected = /** @class */ (function (_super) {\n    tslib_1.__extends(OccupancyDetected, _super);\n    function OccupancyDetected() {\n        var _this = _super.call(this, \"Occupancy Detected\", OccupancyDetected.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    OccupancyDetected.UUID = \"00000071-0000-1000-8000-0026BB765291\";\n    OccupancyDetected.OCCUPANCY_NOT_DETECTED = 0;\n    OccupancyDetected.OCCUPANCY_DETECTED = 1;\n    return OccupancyDetected;\n}(Characteristic_1.Characteristic));\nexports.OccupancyDetected = OccupancyDetected;\nCharacteristic_1.Characteristic.OccupancyDetected = OccupancyDetected;\n/**\n * Characteristic \"On\"\n */\nvar On = /** @class */ (function (_super) {\n    tslib_1.__extends(On, _super);\n    function On() {\n        var _this = _super.call(this, \"On\", On.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    On.UUID = \"00000025-0000-1000-8000-0026BB765291\";\n    return On;\n}(Characteristic_1.Characteristic));\nexports.On = On;\nCharacteristic_1.Characteristic.On = On;\n/**\n * Characteristic \"Operating State Response\"\n * @since iOS 14\n */\nvar OperatingStateResponse = /** @class */ (function (_super) {\n    tslib_1.__extends(OperatingStateResponse, _super);\n    function OperatingStateResponse() {\n        var _this = _super.call(this, \"Operating State Response\", OperatingStateResponse.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    OperatingStateResponse.UUID = \"00000232-0000-1000-8000-0026BB765291\";\n    return OperatingStateResponse;\n}(Characteristic_1.Characteristic));\nexports.OperatingStateResponse = OperatingStateResponse;\nCharacteristic_1.Characteristic.OperatingStateResponse = OperatingStateResponse;\n/**\n * Characteristic \"Optical Zoom\"\n */\nvar OpticalZoom = /** @class */ (function (_super) {\n    tslib_1.__extends(OpticalZoom, _super);\n    function OpticalZoom() {\n        var _this = _super.call(this, \"Optical Zoom\", OpticalZoom.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minStep: 0.1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    OpticalZoom.UUID = \"0000011C-0000-1000-8000-0026BB765291\";\n    return OpticalZoom;\n}(Characteristic_1.Characteristic));\nexports.OpticalZoom = OpticalZoom;\nCharacteristic_1.Characteristic.OpticalZoom = OpticalZoom;\n/**\n * Characteristic \"Outlet In Use\"\n */\nvar OutletInUse = /** @class */ (function (_super) {\n    tslib_1.__extends(OutletInUse, _super);\n    function OutletInUse() {\n        var _this = _super.call(this, \"Outlet In Use\", OutletInUse.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    OutletInUse.UUID = \"00000026-0000-1000-8000-0026BB765291\";\n    return OutletInUse;\n}(Characteristic_1.Characteristic));\nexports.OutletInUse = OutletInUse;\nCharacteristic_1.Characteristic.OutletInUse = OutletInUse;\n/**\n * Characteristic \"Ozone Density\"\n */\nvar OzoneDensity = /** @class */ (function (_super) {\n    tslib_1.__extends(OzoneDensity, _super);\n    function OzoneDensity() {\n        var _this = _super.call(this, \"Ozone Density\", OzoneDensity.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1000,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    OzoneDensity.UUID = \"000000C3-0000-1000-8000-0026BB765291\";\n    return OzoneDensity;\n}(Characteristic_1.Characteristic));\nexports.OzoneDensity = OzoneDensity;\nCharacteristic_1.Characteristic.OzoneDensity = OzoneDensity;\n/**\n * Characteristic \"Pairing Features\"\n */\nvar PairingFeatures = /** @class */ (function (_super) {\n    tslib_1.__extends(PairingFeatures, _super);\n    function PairingFeatures() {\n        var _this = _super.call(this, \"Pairing Features\", PairingFeatures.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    PairingFeatures.UUID = \"0000004F-0000-1000-8000-0026BB765291\";\n    return PairingFeatures;\n}(Characteristic_1.Characteristic));\nexports.PairingFeatures = PairingFeatures;\nCharacteristic_1.Characteristic.PairingFeatures = PairingFeatures;\n/**\n * Characteristic \"Pair Setup\"\n */\nvar PairSetup = /** @class */ (function (_super) {\n    tslib_1.__extends(PairSetup, _super);\n    function PairSetup() {\n        var _this = _super.call(this, \"Pair Setup\", PairSetup.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    PairSetup.UUID = \"0000004C-0000-1000-8000-0026BB765291\";\n    return PairSetup;\n}(Characteristic_1.Characteristic));\nexports.PairSetup = PairSetup;\nCharacteristic_1.Characteristic.PairSetup = PairSetup;\n/**\n * Characteristic \"Pair Verify\"\n */\nvar PairVerify = /** @class */ (function (_super) {\n    tslib_1.__extends(PairVerify, _super);\n    function PairVerify() {\n        var _this = _super.call(this, \"Pair Verify\", PairVerify.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    PairVerify.UUID = \"0000004E-0000-1000-8000-0026BB765291\";\n    return PairVerify;\n}(Characteristic_1.Characteristic));\nexports.PairVerify = PairVerify;\nCharacteristic_1.Characteristic.PairVerify = PairVerify;\n/**\n * Characteristic \"Password Setting\"\n */\nvar PasswordSetting = /** @class */ (function (_super) {\n    tslib_1.__extends(PasswordSetting, _super);\n    function PasswordSetting() {\n        var _this = _super.call(this, \"Password Setting\", PasswordSetting.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    PasswordSetting.UUID = \"000000E4-0000-1000-8000-0026BB765291\";\n    return PasswordSetting;\n}(Characteristic_1.Characteristic));\nexports.PasswordSetting = PasswordSetting;\nCharacteristic_1.Characteristic.PasswordSetting = PasswordSetting;\n/**\n * Characteristic \"Periodic Snapshots Active\"\n */\nvar PeriodicSnapshotsActive = /** @class */ (function (_super) {\n    tslib_1.__extends(PeriodicSnapshotsActive, _super);\n    function PeriodicSnapshotsActive() {\n        var _this = _super.call(this, \"Periodic Snapshots Active\", PeriodicSnapshotsActive.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    PeriodicSnapshotsActive.UUID = \"00000225-0000-1000-8000-0026BB765291\";\n    PeriodicSnapshotsActive.DISABLE = 0;\n    PeriodicSnapshotsActive.ENABLE = 1;\n    return PeriodicSnapshotsActive;\n}(Characteristic_1.Characteristic));\nexports.PeriodicSnapshotsActive = PeriodicSnapshotsActive;\nCharacteristic_1.Characteristic.PeriodicSnapshotsActive = PeriodicSnapshotsActive;\n/**\n * Characteristic \"Picture Mode\"\n */\nvar PictureMode = /** @class */ (function (_super) {\n    tslib_1.__extends(PictureMode, _super);\n    function PictureMode() {\n        var _this = _super.call(this, \"Picture Mode\", PictureMode.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 13,\n            minStep: 1,\n            validValues: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    PictureMode.UUID = \"000000E2-0000-1000-8000-0026BB765291\";\n    PictureMode.OTHER = 0;\n    PictureMode.STANDARD = 1;\n    PictureMode.CALIBRATED = 2;\n    PictureMode.CALIBRATED_DARK = 3;\n    PictureMode.VIVID = 4;\n    PictureMode.GAME = 5;\n    PictureMode.COMPUTER = 6;\n    PictureMode.CUSTOM = 7;\n    return PictureMode;\n}(Characteristic_1.Characteristic));\nexports.PictureMode = PictureMode;\nCharacteristic_1.Characteristic.PictureMode = PictureMode;\n/**\n * Characteristic \"Ping\"\n * @since iOS 14\n */\nvar Ping = /** @class */ (function (_super) {\n    tslib_1.__extends(Ping, _super);\n    function Ping() {\n        var _this = _super.call(this, \"Ping\", Ping.UUID, {\n            format: \"data\" /* Formats.DATA */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Ping.UUID = \"0000023C-0000-1000-8000-0026BB765291\";\n    return Ping;\n}(Characteristic_1.Characteristic));\nexports.Ping = Ping;\nCharacteristic_1.Characteristic.Ping = Ping;\n/**\n * Characteristic \"PM10 Density\"\n */\nvar PM10Density = /** @class */ (function (_super) {\n    tslib_1.__extends(PM10Density, _super);\n    function PM10Density() {\n        var _this = _super.call(this, \"PM10 Density\", PM10Density.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1000,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    PM10Density.UUID = \"000000C7-0000-1000-8000-0026BB765291\";\n    return PM10Density;\n}(Characteristic_1.Characteristic));\nexports.PM10Density = PM10Density;\nCharacteristic_1.Characteristic.PM10Density = PM10Density;\n/**\n * Characteristic \"PM2.5 Density\"\n */\nvar PM2_5Density = /** @class */ (function (_super) {\n    tslib_1.__extends(PM2_5Density, _super);\n    function PM2_5Density() {\n        var _this = _super.call(this, \"PM2.5 Density\", PM2_5Density.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1000,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    PM2_5Density.UUID = \"000000C6-0000-1000-8000-0026BB765291\";\n    return PM2_5Density;\n}(Characteristic_1.Characteristic));\nexports.PM2_5Density = PM2_5Density;\nCharacteristic_1.Characteristic.PM2_5Density = PM2_5Density;\n/**\n * Characteristic \"Position State\"\n */\nvar PositionState = /** @class */ (function (_super) {\n    tslib_1.__extends(PositionState, _super);\n    function PositionState() {\n        var _this = _super.call(this, \"Position State\", PositionState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 2,\n            minStep: 1,\n            validValues: [0, 1, 2],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    PositionState.UUID = \"00000072-0000-1000-8000-0026BB765291\";\n    PositionState.DECREASING = 0;\n    PositionState.INCREASING = 1;\n    PositionState.STOPPED = 2;\n    return PositionState;\n}(Characteristic_1.Characteristic));\nexports.PositionState = PositionState;\nCharacteristic_1.Characteristic.PositionState = PositionState;\n/**\n * Characteristic \"Power Mode Selection\"\n */\nvar PowerModeSelection = /** @class */ (function (_super) {\n    tslib_1.__extends(PowerModeSelection, _super);\n    function PowerModeSelection() {\n        var _this = _super.call(this, \"Power Mode Selection\", PowerModeSelection.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    PowerModeSelection.UUID = \"000000DF-0000-1000-8000-0026BB765291\";\n    PowerModeSelection.SHOW = 0;\n    PowerModeSelection.HIDE = 1;\n    return PowerModeSelection;\n}(Characteristic_1.Characteristic));\nexports.PowerModeSelection = PowerModeSelection;\nCharacteristic_1.Characteristic.PowerModeSelection = PowerModeSelection;\n/**\n * Characteristic \"Product Data\"\n */\nvar ProductData = /** @class */ (function (_super) {\n    tslib_1.__extends(ProductData, _super);\n    function ProductData() {\n        var _this = _super.call(this, \"Product Data\", ProductData.UUID, {\n            format: \"data\" /* Formats.DATA */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ProductData.UUID = \"00000220-0000-1000-8000-0026BB765291\";\n    return ProductData;\n}(Characteristic_1.Characteristic));\nexports.ProductData = ProductData;\nCharacteristic_1.Characteristic.ProductData = ProductData;\n/**\n * Characteristic \"Programmable Switch Event\"\n */\nvar ProgrammableSwitchEvent = /** @class */ (function (_super) {\n    tslib_1.__extends(ProgrammableSwitchEvent, _super);\n    function ProgrammableSwitchEvent() {\n        var _this = _super.call(this, \"Programmable Switch Event\", ProgrammableSwitchEvent.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 2,\n            minStep: 1,\n            validValues: [0, 1, 2],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ProgrammableSwitchEvent.UUID = \"00000073-0000-1000-8000-0026BB765291\";\n    ProgrammableSwitchEvent.SINGLE_PRESS = 0;\n    ProgrammableSwitchEvent.DOUBLE_PRESS = 1;\n    ProgrammableSwitchEvent.LONG_PRESS = 2;\n    return ProgrammableSwitchEvent;\n}(Characteristic_1.Characteristic));\nexports.ProgrammableSwitchEvent = ProgrammableSwitchEvent;\nCharacteristic_1.Characteristic.ProgrammableSwitchEvent = ProgrammableSwitchEvent;\n/**\n * Characteristic \"Programmable Switch Output State\"\n */\nvar ProgrammableSwitchOutputState = /** @class */ (function (_super) {\n    tslib_1.__extends(ProgrammableSwitchOutputState, _super);\n    function ProgrammableSwitchOutputState() {\n        var _this = _super.call(this, \"Programmable Switch Output State\", ProgrammableSwitchOutputState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ProgrammableSwitchOutputState.UUID = \"00000074-0000-1000-8000-0026BB765291\";\n    return ProgrammableSwitchOutputState;\n}(Characteristic_1.Characteristic));\nexports.ProgrammableSwitchOutputState = ProgrammableSwitchOutputState;\nCharacteristic_1.Characteristic.ProgrammableSwitchOutputState = ProgrammableSwitchOutputState;\n/**\n * Characteristic \"Program Mode\"\n */\nvar ProgramMode = /** @class */ (function (_super) {\n    tslib_1.__extends(ProgramMode, _super);\n    function ProgramMode() {\n        var _this = _super.call(this, \"Program Mode\", ProgramMode.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 2,\n            minStep: 1,\n            validValues: [0, 1, 2],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ProgramMode.UUID = \"000000D1-0000-1000-8000-0026BB765291\";\n    ProgramMode.NO_PROGRAM_SCHEDULED = 0;\n    ProgramMode.PROGRAM_SCHEDULED = 1;\n    ProgramMode.PROGRAM_SCHEDULED_MANUAL_MODE_ = 2;\n    return ProgramMode;\n}(Characteristic_1.Characteristic));\nexports.ProgramMode = ProgramMode;\nCharacteristic_1.Characteristic.ProgramMode = ProgramMode;\n/**\n * Characteristic \"Reachable\"\n * @deprecated Removed and not used anymore\n */\nvar Reachable = /** @class */ (function (_super) {\n    tslib_1.__extends(Reachable, _super);\n    function Reachable() {\n        var _this = _super.call(this, \"Reachable\", Reachable.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Reachable.UUID = \"00000063-0000-1000-8000-0026BB765291\";\n    return Reachable;\n}(Characteristic_1.Characteristic));\nexports.Reachable = Reachable;\n// noinspection JSDeprecatedSymbols\nCharacteristic_1.Characteristic.Reachable = Reachable;\n/**\n * Characteristic \"Received Signal Strength Indication\"\n * @since iOS 14\n */\nvar ReceivedSignalStrengthIndication = /** @class */ (function (_super) {\n    tslib_1.__extends(ReceivedSignalStrengthIndication, _super);\n    function ReceivedSignalStrengthIndication() {\n        var _this = _super.call(this, \"Received Signal Strength Indication\", ReceivedSignalStrengthIndication.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ReceivedSignalStrengthIndication.UUID = \"0000023F-0000-1000-8000-0026BB765291\";\n    return ReceivedSignalStrengthIndication;\n}(Characteristic_1.Characteristic));\nexports.ReceivedSignalStrengthIndication = ReceivedSignalStrengthIndication;\nCharacteristic_1.Characteristic.ReceivedSignalStrengthIndication = ReceivedSignalStrengthIndication;\n/**\n * Characteristic \"Receiver Sensitivity\"\n * @since iOS 14\n */\nvar ReceiverSensitivity = /** @class */ (function (_super) {\n    tslib_1.__extends(ReceiverSensitivity, _super);\n    function ReceiverSensitivity() {\n        var _this = _super.call(this, \"Receiver Sensitivity\", ReceiverSensitivity.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ReceiverSensitivity.UUID = \"00000244-0000-1000-8000-0026BB765291\";\n    return ReceiverSensitivity;\n}(Characteristic_1.Characteristic));\nexports.ReceiverSensitivity = ReceiverSensitivity;\nCharacteristic_1.Characteristic.ReceiverSensitivity = ReceiverSensitivity;\n/**\n * Characteristic \"Recording Audio Active\"\n */\nvar RecordingAudioActive = /** @class */ (function (_super) {\n    tslib_1.__extends(RecordingAudioActive, _super);\n    function RecordingAudioActive() {\n        var _this = _super.call(this, \"Recording Audio Active\", RecordingAudioActive.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"tw\" /* Perms.TIMED_WRITE */],\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    RecordingAudioActive.UUID = \"00000226-0000-1000-8000-0026BB765291\";\n    RecordingAudioActive.DISABLE = 0;\n    RecordingAudioActive.ENABLE = 1;\n    return RecordingAudioActive;\n}(Characteristic_1.Characteristic));\nexports.RecordingAudioActive = RecordingAudioActive;\nCharacteristic_1.Characteristic.RecordingAudioActive = RecordingAudioActive;\n/**\n * Characteristic \"Relative Humidity Dehumidifier Threshold\"\n */\nvar RelativeHumidityDehumidifierThreshold = /** @class */ (function (_super) {\n    tslib_1.__extends(RelativeHumidityDehumidifierThreshold, _super);\n    function RelativeHumidityDehumidifierThreshold() {\n        var _this = _super.call(this, \"Relative Humidity Dehumidifier Threshold\", RelativeHumidityDehumidifierThreshold.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"percentage\" /* Units.PERCENTAGE */,\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    RelativeHumidityDehumidifierThreshold.UUID = \"000000C9-0000-1000-8000-0026BB765291\";\n    return RelativeHumidityDehumidifierThreshold;\n}(Characteristic_1.Characteristic));\nexports.RelativeHumidityDehumidifierThreshold = RelativeHumidityDehumidifierThreshold;\nCharacteristic_1.Characteristic.RelativeHumidityDehumidifierThreshold = RelativeHumidityDehumidifierThreshold;\n/**\n * Characteristic \"Relative Humidity Humidifier Threshold\"\n */\nvar RelativeHumidityHumidifierThreshold = /** @class */ (function (_super) {\n    tslib_1.__extends(RelativeHumidityHumidifierThreshold, _super);\n    function RelativeHumidityHumidifierThreshold() {\n        var _this = _super.call(this, \"Relative Humidity Humidifier Threshold\", RelativeHumidityHumidifierThreshold.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"percentage\" /* Units.PERCENTAGE */,\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    RelativeHumidityHumidifierThreshold.UUID = \"000000CA-0000-1000-8000-0026BB765291\";\n    return RelativeHumidityHumidifierThreshold;\n}(Characteristic_1.Characteristic));\nexports.RelativeHumidityHumidifierThreshold = RelativeHumidityHumidifierThreshold;\nCharacteristic_1.Characteristic.RelativeHumidityHumidifierThreshold = RelativeHumidityHumidifierThreshold;\n/**\n * Characteristic \"Relay Control Point\"\n */\nvar RelayControlPoint = /** @class */ (function (_super) {\n    tslib_1.__extends(RelayControlPoint, _super);\n    function RelayControlPoint() {\n        var _this = _super.call(this, \"Relay Control Point\", RelayControlPoint.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    RelayControlPoint.UUID = \"0000005E-0000-1000-8000-0026BB765291\";\n    return RelayControlPoint;\n}(Characteristic_1.Characteristic));\nexports.RelayControlPoint = RelayControlPoint;\nCharacteristic_1.Characteristic.RelayControlPoint = RelayControlPoint;\n/**\n * Characteristic \"Relay Enabled\"\n */\nvar RelayEnabled = /** @class */ (function (_super) {\n    tslib_1.__extends(RelayEnabled, _super);\n    function RelayEnabled() {\n        var _this = _super.call(this, \"Relay Enabled\", RelayEnabled.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    RelayEnabled.UUID = \"0000005B-0000-1000-8000-0026BB765291\";\n    return RelayEnabled;\n}(Characteristic_1.Characteristic));\nexports.RelayEnabled = RelayEnabled;\nCharacteristic_1.Characteristic.RelayEnabled = RelayEnabled;\n/**\n * Characteristic \"Relay State\"\n */\nvar RelayState = /** @class */ (function (_super) {\n    tslib_1.__extends(RelayState, _super);\n    function RelayState() {\n        var _this = _super.call(this, \"Relay State\", RelayState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 5,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    RelayState.UUID = \"0000005C-0000-1000-8000-0026BB765291\";\n    return RelayState;\n}(Characteristic_1.Characteristic));\nexports.RelayState = RelayState;\nCharacteristic_1.Characteristic.RelayState = RelayState;\n/**\n * Characteristic \"Remaining Duration\"\n */\nvar RemainingDuration = /** @class */ (function (_super) {\n    tslib_1.__extends(RemainingDuration, _super);\n    function RemainingDuration() {\n        var _this = _super.call(this, \"Remaining Duration\", RemainingDuration.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            unit: \"seconds\" /* Units.SECONDS */,\n            minValue: 0,\n            maxValue: 3600,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    RemainingDuration.UUID = \"000000D4-0000-1000-8000-0026BB765291\";\n    return RemainingDuration;\n}(Characteristic_1.Characteristic));\nexports.RemainingDuration = RemainingDuration;\nCharacteristic_1.Characteristic.RemainingDuration = RemainingDuration;\n/**\n * Characteristic \"Remote Key\"\n */\nvar RemoteKey = /** @class */ (function (_super) {\n    tslib_1.__extends(RemoteKey, _super);\n    function RemoteKey() {\n        var _this = _super.call(this, \"Remote Key\", RemoteKey.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 16,\n            minStep: 1,\n            validValues: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    RemoteKey.UUID = \"000000E1-0000-1000-8000-0026BB765291\";\n    RemoteKey.REWIND = 0;\n    RemoteKey.FAST_FORWARD = 1;\n    RemoteKey.NEXT_TRACK = 2;\n    RemoteKey.PREVIOUS_TRACK = 3;\n    RemoteKey.ARROW_UP = 4;\n    RemoteKey.ARROW_DOWN = 5;\n    RemoteKey.ARROW_LEFT = 6;\n    RemoteKey.ARROW_RIGHT = 7;\n    RemoteKey.SELECT = 8;\n    RemoteKey.BACK = 9;\n    RemoteKey.EXIT = 10;\n    RemoteKey.PLAY_PAUSE = 11;\n    RemoteKey.INFORMATION = 15;\n    return RemoteKey;\n}(Characteristic_1.Characteristic));\nexports.RemoteKey = RemoteKey;\nCharacteristic_1.Characteristic.RemoteKey = RemoteKey;\n/**\n * Characteristic \"Reset Filter Indication\"\n */\nvar ResetFilterIndication = /** @class */ (function (_super) {\n    tslib_1.__extends(ResetFilterIndication, _super);\n    function ResetFilterIndication() {\n        var _this = _super.call(this, \"Reset Filter Indication\", ResetFilterIndication.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 1,\n            maxValue: 1,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ResetFilterIndication.UUID = \"000000AD-0000-1000-8000-0026BB765291\";\n    return ResetFilterIndication;\n}(Characteristic_1.Characteristic));\nexports.ResetFilterIndication = ResetFilterIndication;\nCharacteristic_1.Characteristic.ResetFilterIndication = ResetFilterIndication;\n/**\n * Characteristic \"Rotation Direction\"\n */\nvar RotationDirection = /** @class */ (function (_super) {\n    tslib_1.__extends(RotationDirection, _super);\n    function RotationDirection() {\n        var _this = _super.call(this, \"Rotation Direction\", RotationDirection.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    RotationDirection.UUID = \"00000028-0000-1000-8000-0026BB765291\";\n    RotationDirection.CLOCKWISE = 0;\n    RotationDirection.COUNTER_CLOCKWISE = 1;\n    return RotationDirection;\n}(Characteristic_1.Characteristic));\nexports.RotationDirection = RotationDirection;\nCharacteristic_1.Characteristic.RotationDirection = RotationDirection;\n/**\n * Characteristic \"Rotation Speed\"\n */\nvar RotationSpeed = /** @class */ (function (_super) {\n    tslib_1.__extends(RotationSpeed, _super);\n    function RotationSpeed() {\n        var _this = _super.call(this, \"Rotation Speed\", RotationSpeed.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"percentage\" /* Units.PERCENTAGE */,\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    RotationSpeed.UUID = \"00000029-0000-1000-8000-0026BB765291\";\n    return RotationSpeed;\n}(Characteristic_1.Characteristic));\nexports.RotationSpeed = RotationSpeed;\nCharacteristic_1.Characteristic.RotationSpeed = RotationSpeed;\n/**\n * Characteristic \"Router Status\"\n */\nvar RouterStatus = /** @class */ (function (_super) {\n    tslib_1.__extends(RouterStatus, _super);\n    function RouterStatus() {\n        var _this = _super.call(this, \"Router Status\", RouterStatus.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    RouterStatus.UUID = \"0000020E-0000-1000-8000-0026BB765291\";\n    RouterStatus.READY = 0;\n    RouterStatus.NOT_READY = 1;\n    return RouterStatus;\n}(Characteristic_1.Characteristic));\nexports.RouterStatus = RouterStatus;\nCharacteristic_1.Characteristic.RouterStatus = RouterStatus;\n/**\n * Characteristic \"Saturation\"\n */\nvar Saturation = /** @class */ (function (_super) {\n    tslib_1.__extends(Saturation, _super);\n    function Saturation() {\n        var _this = _super.call(this, \"Saturation\", Saturation.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"percentage\" /* Units.PERCENTAGE */,\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Saturation.UUID = \"0000002F-0000-1000-8000-0026BB765291\";\n    return Saturation;\n}(Characteristic_1.Characteristic));\nexports.Saturation = Saturation;\nCharacteristic_1.Characteristic.Saturation = Saturation;\n/**\n * Characteristic \"Security System Alarm Type\"\n */\nvar SecuritySystemAlarmType = /** @class */ (function (_super) {\n    tslib_1.__extends(SecuritySystemAlarmType, _super);\n    function SecuritySystemAlarmType() {\n        var _this = _super.call(this, \"Security System Alarm Type\", SecuritySystemAlarmType.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SecuritySystemAlarmType.UUID = \"0000008E-0000-1000-8000-0026BB765291\";\n    return SecuritySystemAlarmType;\n}(Characteristic_1.Characteristic));\nexports.SecuritySystemAlarmType = SecuritySystemAlarmType;\nCharacteristic_1.Characteristic.SecuritySystemAlarmType = SecuritySystemAlarmType;\n/**\n * Characteristic \"Security System Current State\"\n */\nvar SecuritySystemCurrentState = /** @class */ (function (_super) {\n    tslib_1.__extends(SecuritySystemCurrentState, _super);\n    function SecuritySystemCurrentState() {\n        var _this = _super.call(this, \"Security System Current State\", SecuritySystemCurrentState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 4,\n            minStep: 1,\n            validValues: [0, 1, 2, 3, 4],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SecuritySystemCurrentState.UUID = \"00000066-0000-1000-8000-0026BB765291\";\n    SecuritySystemCurrentState.STAY_ARM = 0;\n    SecuritySystemCurrentState.AWAY_ARM = 1;\n    SecuritySystemCurrentState.NIGHT_ARM = 2;\n    SecuritySystemCurrentState.DISARMED = 3;\n    SecuritySystemCurrentState.ALARM_TRIGGERED = 4;\n    return SecuritySystemCurrentState;\n}(Characteristic_1.Characteristic));\nexports.SecuritySystemCurrentState = SecuritySystemCurrentState;\nCharacteristic_1.Characteristic.SecuritySystemCurrentState = SecuritySystemCurrentState;\n/**\n * Characteristic \"Security System Target State\"\n */\nvar SecuritySystemTargetState = /** @class */ (function (_super) {\n    tslib_1.__extends(SecuritySystemTargetState, _super);\n    function SecuritySystemTargetState() {\n        var _this = _super.call(this, \"Security System Target State\", SecuritySystemTargetState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 3,\n            minStep: 1,\n            validValues: [0, 1, 2, 3],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SecuritySystemTargetState.UUID = \"00000067-0000-1000-8000-0026BB765291\";\n    SecuritySystemTargetState.STAY_ARM = 0;\n    SecuritySystemTargetState.AWAY_ARM = 1;\n    SecuritySystemTargetState.NIGHT_ARM = 2;\n    SecuritySystemTargetState.DISARM = 3;\n    return SecuritySystemTargetState;\n}(Characteristic_1.Characteristic));\nexports.SecuritySystemTargetState = SecuritySystemTargetState;\nCharacteristic_1.Characteristic.SecuritySystemTargetState = SecuritySystemTargetState;\n/**\n * Characteristic \"Selected Audio Stream Configuration\"\n */\nvar SelectedAudioStreamConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SelectedAudioStreamConfiguration, _super);\n    function SelectedAudioStreamConfiguration() {\n        var _this = _super.call(this, \"Selected Audio Stream Configuration\", SelectedAudioStreamConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SelectedAudioStreamConfiguration.UUID = \"00000128-0000-1000-8000-0026BB765291\";\n    return SelectedAudioStreamConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SelectedAudioStreamConfiguration = SelectedAudioStreamConfiguration;\nCharacteristic_1.Characteristic.SelectedAudioStreamConfiguration = SelectedAudioStreamConfiguration;\n/**\n * Characteristic \"Selected Camera Recording Configuration\"\n */\nvar SelectedCameraRecordingConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SelectedCameraRecordingConfiguration, _super);\n    function SelectedCameraRecordingConfiguration() {\n        var _this = _super.call(this, \"Selected Camera Recording Configuration\", SelectedCameraRecordingConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SelectedCameraRecordingConfiguration.UUID = \"00000209-0000-1000-8000-0026BB765291\";\n    return SelectedCameraRecordingConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SelectedCameraRecordingConfiguration = SelectedCameraRecordingConfiguration;\nCharacteristic_1.Characteristic.SelectedCameraRecordingConfiguration = SelectedCameraRecordingConfiguration;\n/**\n * Characteristic \"Selected Diagnostics Modes\"\n */\nvar SelectedDiagnosticsModes = /** @class */ (function (_super) {\n    tslib_1.__extends(SelectedDiagnosticsModes, _super);\n    function SelectedDiagnosticsModes() {\n        var _this = _super.call(this, \"Selected Diagnostics Modes\", SelectedDiagnosticsModes.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SelectedDiagnosticsModes.UUID = \"0000024D-0000-1000-8000-0026BB765291\";\n    return SelectedDiagnosticsModes;\n}(Characteristic_1.Characteristic));\nexports.SelectedDiagnosticsModes = SelectedDiagnosticsModes;\nCharacteristic_1.Characteristic.SelectedDiagnosticsModes = SelectedDiagnosticsModes;\n/**\n * Characteristic \"Selected RTP Stream Configuration\"\n */\nvar SelectedRTPStreamConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SelectedRTPStreamConfiguration, _super);\n    function SelectedRTPStreamConfiguration() {\n        var _this = _super.call(this, \"Selected RTP Stream Configuration\", SelectedRTPStreamConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SelectedRTPStreamConfiguration.UUID = \"00000117-0000-1000-8000-0026BB765291\";\n    return SelectedRTPStreamConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SelectedRTPStreamConfiguration = SelectedRTPStreamConfiguration;\nCharacteristic_1.Characteristic.SelectedRTPStreamConfiguration = SelectedRTPStreamConfiguration;\n/**\n * Characteristic \"Selected Sleep Configuration\"\n */\nvar SelectedSleepConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SelectedSleepConfiguration, _super);\n    function SelectedSleepConfiguration() {\n        var _this = _super.call(this, \"Selected Sleep Configuration\", SelectedSleepConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"wr\" /* Perms.WRITE_RESPONSE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SelectedSleepConfiguration.UUID = \"00000252-0000-1000-8000-0026BB765291\";\n    return SelectedSleepConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SelectedSleepConfiguration = SelectedSleepConfiguration;\nCharacteristic_1.Characteristic.SelectedSleepConfiguration = SelectedSleepConfiguration;\n/**\n * Characteristic \"Serial Number\"\n */\nvar SerialNumber = /** @class */ (function (_super) {\n    tslib_1.__extends(SerialNumber, _super);\n    function SerialNumber() {\n        var _this = _super.call(this, \"Serial Number\", SerialNumber.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n            maxLen: 64,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SerialNumber.UUID = \"00000030-0000-1000-8000-0026BB765291\";\n    return SerialNumber;\n}(Characteristic_1.Characteristic));\nexports.SerialNumber = SerialNumber;\nCharacteristic_1.Characteristic.SerialNumber = SerialNumber;\n/**\n * Characteristic \"Service Label Index\"\n */\nvar ServiceLabelIndex = /** @class */ (function (_super) {\n    tslib_1.__extends(ServiceLabelIndex, _super);\n    function ServiceLabelIndex() {\n        var _this = _super.call(this, \"Service Label Index\", ServiceLabelIndex.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n            minValue: 1,\n            maxValue: 255,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ServiceLabelIndex.UUID = \"000000CB-0000-1000-8000-0026BB765291\";\n    return ServiceLabelIndex;\n}(Characteristic_1.Characteristic));\nexports.ServiceLabelIndex = ServiceLabelIndex;\nCharacteristic_1.Characteristic.ServiceLabelIndex = ServiceLabelIndex;\n/**\n * Characteristic \"Service Label Namespace\"\n */\nvar ServiceLabelNamespace = /** @class */ (function (_super) {\n    tslib_1.__extends(ServiceLabelNamespace, _super);\n    function ServiceLabelNamespace() {\n        var _this = _super.call(this, \"Service Label Namespace\", ServiceLabelNamespace.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ServiceLabelNamespace.UUID = \"000000CD-0000-1000-8000-0026BB765291\";\n    ServiceLabelNamespace.DOTS = 0;\n    ServiceLabelNamespace.ARABIC_NUMERALS = 1;\n    return ServiceLabelNamespace;\n}(Characteristic_1.Characteristic));\nexports.ServiceLabelNamespace = ServiceLabelNamespace;\nCharacteristic_1.Characteristic.ServiceLabelNamespace = ServiceLabelNamespace;\n/**\n * Characteristic \"Set Duration\"\n */\nvar SetDuration = /** @class */ (function (_super) {\n    tslib_1.__extends(SetDuration, _super);\n    function SetDuration() {\n        var _this = _super.call(this, \"Set Duration\", SetDuration.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"seconds\" /* Units.SECONDS */,\n            minValue: 0,\n            maxValue: 3600,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SetDuration.UUID = \"000000D3-0000-1000-8000-0026BB765291\";\n    return SetDuration;\n}(Characteristic_1.Characteristic));\nexports.SetDuration = SetDuration;\nCharacteristic_1.Characteristic.SetDuration = SetDuration;\n/**\n * Characteristic \"Setup Data Stream Transport\"\n */\nvar SetupDataStreamTransport = /** @class */ (function (_super) {\n    tslib_1.__extends(SetupDataStreamTransport, _super);\n    function SetupDataStreamTransport() {\n        var _this = _super.call(this, \"Setup Data Stream Transport\", SetupDataStreamTransport.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"wr\" /* Perms.WRITE_RESPONSE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SetupDataStreamTransport.UUID = \"00000131-0000-1000-8000-0026BB765291\";\n    return SetupDataStreamTransport;\n}(Characteristic_1.Characteristic));\nexports.SetupDataStreamTransport = SetupDataStreamTransport;\nCharacteristic_1.Characteristic.SetupDataStreamTransport = SetupDataStreamTransport;\n/**\n * Characteristic \"Setup Endpoints\"\n */\nvar SetupEndpoints = /** @class */ (function (_super) {\n    tslib_1.__extends(SetupEndpoints, _super);\n    function SetupEndpoints() {\n        var _this = _super.call(this, \"Setup Endpoints\", SetupEndpoints.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SetupEndpoints.UUID = \"00000118-0000-1000-8000-0026BB765291\";\n    return SetupEndpoints;\n}(Characteristic_1.Characteristic));\nexports.SetupEndpoints = SetupEndpoints;\nCharacteristic_1.Characteristic.SetupEndpoints = SetupEndpoints;\n/**\n * Characteristic \"Setup Transfer Transport\"\n * @since iOS 13.4\n */\nvar SetupTransferTransport = /** @class */ (function (_super) {\n    tslib_1.__extends(SetupTransferTransport, _super);\n    function SetupTransferTransport() {\n        var _this = _super.call(this, \"Setup Transfer Transport\", SetupTransferTransport.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pw\" /* Perms.PAIRED_WRITE */, \"wr\" /* Perms.WRITE_RESPONSE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SetupTransferTransport.UUID = \"00000201-0000-1000-8000-0026BB765291\";\n    return SetupTransferTransport;\n}(Characteristic_1.Characteristic));\nexports.SetupTransferTransport = SetupTransferTransport;\nCharacteristic_1.Characteristic.SetupTransferTransport = SetupTransferTransport;\n/**\n * Characteristic \"Signal To Noise Ratio\"\n * @since iOS 14\n */\nvar SignalToNoiseRatio = /** @class */ (function (_super) {\n    tslib_1.__extends(SignalToNoiseRatio, _super);\n    function SignalToNoiseRatio() {\n        var _this = _super.call(this, \"Signal To Noise Ratio\", SignalToNoiseRatio.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SignalToNoiseRatio.UUID = \"00000241-0000-1000-8000-0026BB765291\";\n    return SignalToNoiseRatio;\n}(Characteristic_1.Characteristic));\nexports.SignalToNoiseRatio = SignalToNoiseRatio;\nCharacteristic_1.Characteristic.SignalToNoiseRatio = SignalToNoiseRatio;\n/**\n * Characteristic \"Siri Enable\"\n */\nvar SiriEnable = /** @class */ (function (_super) {\n    tslib_1.__extends(SiriEnable, _super);\n    function SiriEnable() {\n        var _this = _super.call(this, \"Siri Enable\", SiriEnable.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SiriEnable.UUID = \"00000255-0000-1000-8000-0026BB765291\";\n    return SiriEnable;\n}(Characteristic_1.Characteristic));\nexports.SiriEnable = SiriEnable;\nCharacteristic_1.Characteristic.SiriEnable = SiriEnable;\n/**\n * Characteristic \"Siri Endpoint Session Status\"\n */\nvar SiriEndpointSessionStatus = /** @class */ (function (_super) {\n    tslib_1.__extends(SiriEndpointSessionStatus, _super);\n    function SiriEndpointSessionStatus() {\n        var _this = _super.call(this, \"Siri Endpoint Session Status\", SiriEndpointSessionStatus.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SiriEndpointSessionStatus.UUID = \"00000254-0000-1000-8000-0026BB765291\";\n    return SiriEndpointSessionStatus;\n}(Characteristic_1.Characteristic));\nexports.SiriEndpointSessionStatus = SiriEndpointSessionStatus;\nCharacteristic_1.Characteristic.SiriEndpointSessionStatus = SiriEndpointSessionStatus;\n/**\n * Characteristic \"Siri Engine Version\"\n */\nvar SiriEngineVersion = /** @class */ (function (_super) {\n    tslib_1.__extends(SiriEngineVersion, _super);\n    function SiriEngineVersion() {\n        var _this = _super.call(this, \"Siri Engine Version\", SiriEngineVersion.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SiriEngineVersion.UUID = \"0000025A-0000-1000-8000-0026BB765291\";\n    return SiriEngineVersion;\n}(Characteristic_1.Characteristic));\nexports.SiriEngineVersion = SiriEngineVersion;\nCharacteristic_1.Characteristic.SiriEngineVersion = SiriEngineVersion;\n/**\n * Characteristic \"Siri Input Type\"\n */\nvar SiriInputType = /** @class */ (function (_super) {\n    tslib_1.__extends(SiriInputType, _super);\n    function SiriInputType() {\n        var _this = _super.call(this, \"Siri Input Type\", SiriInputType.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 0,\n            validValues: [0],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SiriInputType.UUID = \"00000132-0000-1000-8000-0026BB765291\";\n    SiriInputType.PUSH_BUTTON_TRIGGERED_APPLE_TV = 0;\n    return SiriInputType;\n}(Characteristic_1.Characteristic));\nexports.SiriInputType = SiriInputType;\nCharacteristic_1.Characteristic.SiriInputType = SiriInputType;\n/**\n * Characteristic \"Siri Light On Use\"\n */\nvar SiriLightOnUse = /** @class */ (function (_super) {\n    tslib_1.__extends(SiriLightOnUse, _super);\n    function SiriLightOnUse() {\n        var _this = _super.call(this, \"Siri Light On Use\", SiriLightOnUse.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SiriLightOnUse.UUID = \"00000258-0000-1000-8000-0026BB765291\";\n    return SiriLightOnUse;\n}(Characteristic_1.Characteristic));\nexports.SiriLightOnUse = SiriLightOnUse;\nCharacteristic_1.Characteristic.SiriLightOnUse = SiriLightOnUse;\n/**\n * Characteristic \"Siri Listening\"\n */\nvar SiriListening = /** @class */ (function (_super) {\n    tslib_1.__extends(SiriListening, _super);\n    function SiriListening() {\n        var _this = _super.call(this, \"Siri Listening\", SiriListening.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SiriListening.UUID = \"00000256-0000-1000-8000-0026BB765291\";\n    return SiriListening;\n}(Characteristic_1.Characteristic));\nexports.SiriListening = SiriListening;\nCharacteristic_1.Characteristic.SiriListening = SiriListening;\n/**\n * Characteristic \"Siri Touch To Use\"\n */\nvar SiriTouchToUse = /** @class */ (function (_super) {\n    tslib_1.__extends(SiriTouchToUse, _super);\n    function SiriTouchToUse() {\n        var _this = _super.call(this, \"Siri Touch To Use\", SiriTouchToUse.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SiriTouchToUse.UUID = \"00000257-0000-1000-8000-0026BB765291\";\n    return SiriTouchToUse;\n}(Characteristic_1.Characteristic));\nexports.SiriTouchToUse = SiriTouchToUse;\nCharacteristic_1.Characteristic.SiriTouchToUse = SiriTouchToUse;\n/**\n * Characteristic \"Slat Type\"\n */\nvar SlatType = /** @class */ (function (_super) {\n    tslib_1.__extends(SlatType, _super);\n    function SlatType() {\n        var _this = _super.call(this, \"Slat Type\", SlatType.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SlatType.UUID = \"000000C0-0000-1000-8000-0026BB765291\";\n    SlatType.HORIZONTAL = 0;\n    SlatType.VERTICAL = 1;\n    return SlatType;\n}(Characteristic_1.Characteristic));\nexports.SlatType = SlatType;\nCharacteristic_1.Characteristic.SlatType = SlatType;\n/**\n * Characteristic \"Sleep Discovery Mode\"\n */\nvar SleepDiscoveryMode = /** @class */ (function (_super) {\n    tslib_1.__extends(SleepDiscoveryMode, _super);\n    function SleepDiscoveryMode() {\n        var _this = _super.call(this, \"Sleep Discovery Mode\", SleepDiscoveryMode.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SleepDiscoveryMode.UUID = \"000000E8-0000-1000-8000-0026BB765291\";\n    SleepDiscoveryMode.NOT_DISCOVERABLE = 0;\n    SleepDiscoveryMode.ALWAYS_DISCOVERABLE = 1;\n    return SleepDiscoveryMode;\n}(Characteristic_1.Characteristic));\nexports.SleepDiscoveryMode = SleepDiscoveryMode;\nCharacteristic_1.Characteristic.SleepDiscoveryMode = SleepDiscoveryMode;\n/**\n * Characteristic \"Sleep Interval\"\n * @since iOS 14\n */\nvar SleepInterval = /** @class */ (function (_super) {\n    tslib_1.__extends(SleepInterval, _super);\n    function SleepInterval() {\n        var _this = _super.call(this, \"Sleep Interval\", SleepInterval.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SleepInterval.UUID = \"0000023A-0000-1000-8000-0026BB765291\";\n    return SleepInterval;\n}(Characteristic_1.Characteristic));\nexports.SleepInterval = SleepInterval;\nCharacteristic_1.Characteristic.SleepInterval = SleepInterval;\n/**\n * Characteristic \"Smoke Detected\"\n */\nvar SmokeDetected = /** @class */ (function (_super) {\n    tslib_1.__extends(SmokeDetected, _super);\n    function SmokeDetected() {\n        var _this = _super.call(this, \"Smoke Detected\", SmokeDetected.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SmokeDetected.UUID = \"00000076-0000-1000-8000-0026BB765291\";\n    SmokeDetected.SMOKE_NOT_DETECTED = 0;\n    SmokeDetected.SMOKE_DETECTED = 1;\n    return SmokeDetected;\n}(Characteristic_1.Characteristic));\nexports.SmokeDetected = SmokeDetected;\nCharacteristic_1.Characteristic.SmokeDetected = SmokeDetected;\n/**\n * Characteristic \"Software Revision\"\n */\nvar SoftwareRevision = /** @class */ (function (_super) {\n    tslib_1.__extends(SoftwareRevision, _super);\n    function SoftwareRevision() {\n        var _this = _super.call(this, \"Software Revision\", SoftwareRevision.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SoftwareRevision.UUID = \"00000054-0000-1000-8000-0026BB765291\";\n    return SoftwareRevision;\n}(Characteristic_1.Characteristic));\nexports.SoftwareRevision = SoftwareRevision;\nCharacteristic_1.Characteristic.SoftwareRevision = SoftwareRevision;\n/**\n * Characteristic \"Staged Firmware Version\"\n */\nvar StagedFirmwareVersion = /** @class */ (function (_super) {\n    tslib_1.__extends(StagedFirmwareVersion, _super);\n    function StagedFirmwareVersion() {\n        var _this = _super.call(this, \"Staged Firmware Version\", StagedFirmwareVersion.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    StagedFirmwareVersion.UUID = \"00000249-0000-1000-8000-0026BB765291\";\n    return StagedFirmwareVersion;\n}(Characteristic_1.Characteristic));\nexports.StagedFirmwareVersion = StagedFirmwareVersion;\nCharacteristic_1.Characteristic.StagedFirmwareVersion = StagedFirmwareVersion;\n/**\n * Characteristic \"Status Active\"\n */\nvar StatusActive = /** @class */ (function (_super) {\n    tslib_1.__extends(StatusActive, _super);\n    function StatusActive() {\n        var _this = _super.call(this, \"Status Active\", StatusActive.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    StatusActive.UUID = \"00000075-0000-1000-8000-0026BB765291\";\n    return StatusActive;\n}(Characteristic_1.Characteristic));\nexports.StatusActive = StatusActive;\nCharacteristic_1.Characteristic.StatusActive = StatusActive;\n/**\n * Characteristic \"Status Fault\"\n */\nvar StatusFault = /** @class */ (function (_super) {\n    tslib_1.__extends(StatusFault, _super);\n    function StatusFault() {\n        var _this = _super.call(this, \"Status Fault\", StatusFault.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    StatusFault.UUID = \"00000077-0000-1000-8000-0026BB765291\";\n    StatusFault.NO_FAULT = 0;\n    StatusFault.GENERAL_FAULT = 1;\n    return StatusFault;\n}(Characteristic_1.Characteristic));\nexports.StatusFault = StatusFault;\nCharacteristic_1.Characteristic.StatusFault = StatusFault;\n/**\n * Characteristic \"Status Jammed\"\n */\nvar StatusJammed = /** @class */ (function (_super) {\n    tslib_1.__extends(StatusJammed, _super);\n    function StatusJammed() {\n        var _this = _super.call(this, \"Status Jammed\", StatusJammed.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    StatusJammed.UUID = \"00000078-0000-1000-8000-0026BB765291\";\n    StatusJammed.NOT_JAMMED = 0;\n    StatusJammed.JAMMED = 1;\n    return StatusJammed;\n}(Characteristic_1.Characteristic));\nexports.StatusJammed = StatusJammed;\nCharacteristic_1.Characteristic.StatusJammed = StatusJammed;\n/**\n * Characteristic \"Status Low Battery\"\n */\nvar StatusLowBattery = /** @class */ (function (_super) {\n    tslib_1.__extends(StatusLowBattery, _super);\n    function StatusLowBattery() {\n        var _this = _super.call(this, \"Status Low Battery\", StatusLowBattery.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    StatusLowBattery.UUID = \"00000079-0000-1000-8000-0026BB765291\";\n    StatusLowBattery.BATTERY_LEVEL_NORMAL = 0;\n    StatusLowBattery.BATTERY_LEVEL_LOW = 1;\n    return StatusLowBattery;\n}(Characteristic_1.Characteristic));\nexports.StatusLowBattery = StatusLowBattery;\nCharacteristic_1.Characteristic.StatusLowBattery = StatusLowBattery;\n/**\n * Characteristic \"Status Tampered\"\n */\nvar StatusTampered = /** @class */ (function (_super) {\n    tslib_1.__extends(StatusTampered, _super);\n    function StatusTampered() {\n        var _this = _super.call(this, \"Status Tampered\", StatusTampered.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    StatusTampered.UUID = \"0000007A-0000-1000-8000-0026BB765291\";\n    StatusTampered.NOT_TAMPERED = 0;\n    StatusTampered.TAMPERED = 1;\n    return StatusTampered;\n}(Characteristic_1.Characteristic));\nexports.StatusTampered = StatusTampered;\nCharacteristic_1.Characteristic.StatusTampered = StatusTampered;\n/**\n * Characteristic \"Streaming Status\"\n */\nvar StreamingStatus = /** @class */ (function (_super) {\n    tslib_1.__extends(StreamingStatus, _super);\n    function StreamingStatus() {\n        var _this = _super.call(this, \"Streaming Status\", StreamingStatus.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    StreamingStatus.UUID = \"00000120-0000-1000-8000-0026BB765291\";\n    return StreamingStatus;\n}(Characteristic_1.Characteristic));\nexports.StreamingStatus = StreamingStatus;\nCharacteristic_1.Characteristic.StreamingStatus = StreamingStatus;\n/**\n * Characteristic \"Sulphur Dioxide Density\"\n */\nvar SulphurDioxideDensity = /** @class */ (function (_super) {\n    tslib_1.__extends(SulphurDioxideDensity, _super);\n    function SulphurDioxideDensity() {\n        var _this = _super.call(this, \"Sulphur Dioxide Density\", SulphurDioxideDensity.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1000,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SulphurDioxideDensity.UUID = \"000000C5-0000-1000-8000-0026BB765291\";\n    return SulphurDioxideDensity;\n}(Characteristic_1.Characteristic));\nexports.SulphurDioxideDensity = SulphurDioxideDensity;\nCharacteristic_1.Characteristic.SulphurDioxideDensity = SulphurDioxideDensity;\n/**\n * Characteristic \"Supported Asset Types\"\n */\nvar SupportedAssetTypes = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedAssetTypes, _super);\n    function SupportedAssetTypes() {\n        var _this = _super.call(this, \"Supported Asset Types\", SupportedAssetTypes.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedAssetTypes.UUID = \"00000268-0000-1000-8000-0026BB765291\";\n    return SupportedAssetTypes;\n}(Characteristic_1.Characteristic));\nexports.SupportedAssetTypes = SupportedAssetTypes;\nCharacteristic_1.Characteristic.SupportedAssetTypes = SupportedAssetTypes;\n/**\n * Characteristic \"Supported Audio Recording Configuration\"\n */\nvar SupportedAudioRecordingConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedAudioRecordingConfiguration, _super);\n    function SupportedAudioRecordingConfiguration() {\n        var _this = _super.call(this, \"Supported Audio Recording Configuration\", SupportedAudioRecordingConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedAudioRecordingConfiguration.UUID = \"00000207-0000-1000-8000-0026BB765291\";\n    return SupportedAudioRecordingConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SupportedAudioRecordingConfiguration = SupportedAudioRecordingConfiguration;\nCharacteristic_1.Characteristic.SupportedAudioRecordingConfiguration = SupportedAudioRecordingConfiguration;\n/**\n * Characteristic \"Supported Audio Stream Configuration\"\n */\nvar SupportedAudioStreamConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedAudioStreamConfiguration, _super);\n    function SupportedAudioStreamConfiguration() {\n        var _this = _super.call(this, \"Supported Audio Stream Configuration\", SupportedAudioStreamConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedAudioStreamConfiguration.UUID = \"00000115-0000-1000-8000-0026BB765291\";\n    return SupportedAudioStreamConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SupportedAudioStreamConfiguration = SupportedAudioStreamConfiguration;\nCharacteristic_1.Characteristic.SupportedAudioStreamConfiguration = SupportedAudioStreamConfiguration;\n/**\n * Characteristic \"Supported Camera Recording Configuration\"\n */\nvar SupportedCameraRecordingConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedCameraRecordingConfiguration, _super);\n    function SupportedCameraRecordingConfiguration() {\n        var _this = _super.call(this, \"Supported Camera Recording Configuration\", SupportedCameraRecordingConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedCameraRecordingConfiguration.UUID = \"00000205-0000-1000-8000-0026BB765291\";\n    return SupportedCameraRecordingConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SupportedCameraRecordingConfiguration = SupportedCameraRecordingConfiguration;\nCharacteristic_1.Characteristic.SupportedCameraRecordingConfiguration = SupportedCameraRecordingConfiguration;\n/**\n * Characteristic \"Supported Characteristic Value Transition Configuration\"\n * @since iOS 14\n */\nvar SupportedCharacteristicValueTransitionConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedCharacteristicValueTransitionConfiguration, _super);\n    function SupportedCharacteristicValueTransitionConfiguration() {\n        var _this = _super.call(this, \"Supported Characteristic Value Transition Configuration\", SupportedCharacteristicValueTransitionConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedCharacteristicValueTransitionConfiguration.UUID = \"00000144-0000-1000-8000-0026BB765291\";\n    return SupportedCharacteristicValueTransitionConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SupportedCharacteristicValueTransitionConfiguration = SupportedCharacteristicValueTransitionConfiguration;\nCharacteristic_1.Characteristic.SupportedCharacteristicValueTransitionConfiguration = SupportedCharacteristicValueTransitionConfiguration;\n/**\n * Characteristic \"Supported Data Stream Transport Configuration\"\n */\nvar SupportedDataStreamTransportConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedDataStreamTransportConfiguration, _super);\n    function SupportedDataStreamTransportConfiguration() {\n        var _this = _super.call(this, \"Supported Data Stream Transport Configuration\", SupportedDataStreamTransportConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedDataStreamTransportConfiguration.UUID = \"00000130-0000-1000-8000-0026BB765291\";\n    return SupportedDataStreamTransportConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SupportedDataStreamTransportConfiguration = SupportedDataStreamTransportConfiguration;\nCharacteristic_1.Characteristic.SupportedDataStreamTransportConfiguration = SupportedDataStreamTransportConfiguration;\n/**\n * Characteristic \"Supported Diagnostics Modes\"\n */\nvar SupportedDiagnosticsModes = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedDiagnosticsModes, _super);\n    function SupportedDiagnosticsModes() {\n        var _this = _super.call(this, \"Supported Diagnostics Modes\", SupportedDiagnosticsModes.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedDiagnosticsModes.UUID = \"0000024C-0000-1000-8000-0026BB765291\";\n    return SupportedDiagnosticsModes;\n}(Characteristic_1.Characteristic));\nexports.SupportedDiagnosticsModes = SupportedDiagnosticsModes;\nCharacteristic_1.Characteristic.SupportedDiagnosticsModes = SupportedDiagnosticsModes;\n/**\n * Characteristic \"Supported Diagnostics Snapshot\"\n * @since iOS 14\n */\nvar SupportedDiagnosticsSnapshot = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedDiagnosticsSnapshot, _super);\n    function SupportedDiagnosticsSnapshot() {\n        var _this = _super.call(this, \"Supported Diagnostics Snapshot\", SupportedDiagnosticsSnapshot.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedDiagnosticsSnapshot.UUID = \"00000238-0000-1000-8000-0026BB765291\";\n    return SupportedDiagnosticsSnapshot;\n}(Characteristic_1.Characteristic));\nexports.SupportedDiagnosticsSnapshot = SupportedDiagnosticsSnapshot;\nCharacteristic_1.Characteristic.SupportedDiagnosticsSnapshot = SupportedDiagnosticsSnapshot;\n/**\n * Characteristic \"Supported Firmware Update Configuration\"\n */\nvar SupportedFirmwareUpdateConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedFirmwareUpdateConfiguration, _super);\n    function SupportedFirmwareUpdateConfiguration() {\n        var _this = _super.call(this, \"Supported Firmware Update Configuration\", SupportedFirmwareUpdateConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedFirmwareUpdateConfiguration.UUID = \"00000233-0000-1000-8000-0026BB765291\";\n    return SupportedFirmwareUpdateConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SupportedFirmwareUpdateConfiguration = SupportedFirmwareUpdateConfiguration;\nCharacteristic_1.Characteristic.SupportedFirmwareUpdateConfiguration = SupportedFirmwareUpdateConfiguration;\n/**\n * Characteristic \"Supported Metrics\"\n */\nvar SupportedMetrics = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedMetrics, _super);\n    function SupportedMetrics() {\n        var _this = _super.call(this, \"Supported Metrics\", SupportedMetrics.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedMetrics.UUID = \"00000271-0000-1000-8000-0026BB765291\";\n    return SupportedMetrics;\n}(Characteristic_1.Characteristic));\nexports.SupportedMetrics = SupportedMetrics;\nCharacteristic_1.Characteristic.SupportedMetrics = SupportedMetrics;\n/**\n * Characteristic \"Supported Router Configuration\"\n */\nvar SupportedRouterConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedRouterConfiguration, _super);\n    function SupportedRouterConfiguration() {\n        var _this = _super.call(this, \"Supported Router Configuration\", SupportedRouterConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedRouterConfiguration.UUID = \"00000210-0000-1000-8000-0026BB765291\";\n    return SupportedRouterConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SupportedRouterConfiguration = SupportedRouterConfiguration;\nCharacteristic_1.Characteristic.SupportedRouterConfiguration = SupportedRouterConfiguration;\n/**\n * Characteristic \"Supported RTP Configuration\"\n */\nvar SupportedRTPConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedRTPConfiguration, _super);\n    function SupportedRTPConfiguration() {\n        var _this = _super.call(this, \"Supported RTP Configuration\", SupportedRTPConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedRTPConfiguration.UUID = \"00000116-0000-1000-8000-0026BB765291\";\n    return SupportedRTPConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SupportedRTPConfiguration = SupportedRTPConfiguration;\nCharacteristic_1.Characteristic.SupportedRTPConfiguration = SupportedRTPConfiguration;\n/**\n * Characteristic \"Supported Sleep Configuration\"\n */\nvar SupportedSleepConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedSleepConfiguration, _super);\n    function SupportedSleepConfiguration() {\n        var _this = _super.call(this, \"Supported Sleep Configuration\", SupportedSleepConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedSleepConfiguration.UUID = \"00000251-0000-1000-8000-0026BB765291\";\n    return SupportedSleepConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SupportedSleepConfiguration = SupportedSleepConfiguration;\nCharacteristic_1.Characteristic.SupportedSleepConfiguration = SupportedSleepConfiguration;\n/**\n * Characteristic \"Supported Transfer Transport Configuration\"\n * @since iOS 13.4\n */\nvar SupportedTransferTransportConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedTransferTransportConfiguration, _super);\n    function SupportedTransferTransportConfiguration() {\n        var _this = _super.call(this, \"Supported Transfer Transport Configuration\", SupportedTransferTransportConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedTransferTransportConfiguration.UUID = \"00000202-0000-1000-8000-0026BB765291\";\n    return SupportedTransferTransportConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SupportedTransferTransportConfiguration = SupportedTransferTransportConfiguration;\nCharacteristic_1.Characteristic.SupportedTransferTransportConfiguration = SupportedTransferTransportConfiguration;\n/**\n * Characteristic \"Supported Video Recording Configuration\"\n */\nvar SupportedVideoRecordingConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedVideoRecordingConfiguration, _super);\n    function SupportedVideoRecordingConfiguration() {\n        var _this = _super.call(this, \"Supported Video Recording Configuration\", SupportedVideoRecordingConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedVideoRecordingConfiguration.UUID = \"00000206-0000-1000-8000-0026BB765291\";\n    return SupportedVideoRecordingConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SupportedVideoRecordingConfiguration = SupportedVideoRecordingConfiguration;\nCharacteristic_1.Characteristic.SupportedVideoRecordingConfiguration = SupportedVideoRecordingConfiguration;\n/**\n * Characteristic \"Supported Video Stream Configuration\"\n */\nvar SupportedVideoStreamConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(SupportedVideoStreamConfiguration, _super);\n    function SupportedVideoStreamConfiguration() {\n        var _this = _super.call(this, \"Supported Video Stream Configuration\", SupportedVideoStreamConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SupportedVideoStreamConfiguration.UUID = \"00000114-0000-1000-8000-0026BB765291\";\n    return SupportedVideoStreamConfiguration;\n}(Characteristic_1.Characteristic));\nexports.SupportedVideoStreamConfiguration = SupportedVideoStreamConfiguration;\nCharacteristic_1.Characteristic.SupportedVideoStreamConfiguration = SupportedVideoStreamConfiguration;\n/**\n * Characteristic \"Swing Mode\"\n */\nvar SwingMode = /** @class */ (function (_super) {\n    tslib_1.__extends(SwingMode, _super);\n    function SwingMode() {\n        var _this = _super.call(this, \"Swing Mode\", SwingMode.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    SwingMode.UUID = \"000000B6-0000-1000-8000-0026BB765291\";\n    SwingMode.SWING_DISABLED = 0;\n    SwingMode.SWING_ENABLED = 1;\n    return SwingMode;\n}(Characteristic_1.Characteristic));\nexports.SwingMode = SwingMode;\nCharacteristic_1.Characteristic.SwingMode = SwingMode;\n/**\n * Characteristic \"Tap Type\"\n */\nvar TapType = /** @class */ (function (_super) {\n    tslib_1.__extends(TapType, _super);\n    function TapType() {\n        var _this = _super.call(this, \"Tap Type\", TapType.UUID, {\n            format: \"uint16\" /* Formats.UINT16 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TapType.UUID = \"0000022F-0000-1000-8000-0026BB765291\";\n    return TapType;\n}(Characteristic_1.Characteristic));\nexports.TapType = TapType;\nCharacteristic_1.Characteristic.TapType = TapType;\n/**\n * Characteristic \"Target Air Purifier State\"\n */\nvar TargetAirPurifierState = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetAirPurifierState, _super);\n    function TargetAirPurifierState() {\n        var _this = _super.call(this, \"Target Air Purifier State\", TargetAirPurifierState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetAirPurifierState.UUID = \"000000A8-0000-1000-8000-0026BB765291\";\n    TargetAirPurifierState.MANUAL = 0;\n    TargetAirPurifierState.AUTO = 1;\n    return TargetAirPurifierState;\n}(Characteristic_1.Characteristic));\nexports.TargetAirPurifierState = TargetAirPurifierState;\nCharacteristic_1.Characteristic.TargetAirPurifierState = TargetAirPurifierState;\n/**\n * Characteristic \"Target Air Quality\"\n * @deprecated Removed and not used anymore\n */\nvar TargetAirQuality = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetAirQuality, _super);\n    function TargetAirQuality() {\n        var _this = _super.call(this, \"Target Air Quality\", TargetAirQuality.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 2,\n            validValues: [0, 1, 2],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetAirQuality.UUID = \"000000AE-0000-1000-8000-0026BB765291\";\n    TargetAirQuality.EXCELLENT = 0;\n    TargetAirQuality.GOOD = 1;\n    TargetAirQuality.FAIR = 2;\n    return TargetAirQuality;\n}(Characteristic_1.Characteristic));\nexports.TargetAirQuality = TargetAirQuality;\n// noinspection JSDeprecatedSymbols\nCharacteristic_1.Characteristic.TargetAirQuality = TargetAirQuality;\n/**\n * Characteristic \"Target Control List\"\n */\nvar TargetControlList = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetControlList, _super);\n    function TargetControlList() {\n        var _this = _super.call(this, \"Target Control List\", TargetControlList.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"wr\" /* Perms.WRITE_RESPONSE */],\n            adminOnlyAccess: [0 /* Access.READ */, 1 /* Access.WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetControlList.UUID = \"00000124-0000-1000-8000-0026BB765291\";\n    return TargetControlList;\n}(Characteristic_1.Characteristic));\nexports.TargetControlList = TargetControlList;\nCharacteristic_1.Characteristic.TargetControlList = TargetControlList;\n/**\n * Characteristic \"Target Control Supported Configuration\"\n */\nvar TargetControlSupportedConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetControlSupportedConfiguration, _super);\n    function TargetControlSupportedConfiguration() {\n        var _this = _super.call(this, \"Target Control Supported Configuration\", TargetControlSupportedConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetControlSupportedConfiguration.UUID = \"00000123-0000-1000-8000-0026BB765291\";\n    return TargetControlSupportedConfiguration;\n}(Characteristic_1.Characteristic));\nexports.TargetControlSupportedConfiguration = TargetControlSupportedConfiguration;\nCharacteristic_1.Characteristic.TargetControlSupportedConfiguration = TargetControlSupportedConfiguration;\n/**\n * Characteristic \"Target Door State\"\n */\nvar TargetDoorState = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetDoorState, _super);\n    function TargetDoorState() {\n        var _this = _super.call(this, \"Target Door State\", TargetDoorState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetDoorState.UUID = \"00000032-0000-1000-8000-0026BB765291\";\n    TargetDoorState.OPEN = 0;\n    TargetDoorState.CLOSED = 1;\n    return TargetDoorState;\n}(Characteristic_1.Characteristic));\nexports.TargetDoorState = TargetDoorState;\nCharacteristic_1.Characteristic.TargetDoorState = TargetDoorState;\n/**\n * Characteristic \"Target Fan State\"\n */\nvar TargetFanState = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetFanState, _super);\n    function TargetFanState() {\n        var _this = _super.call(this, \"Target Fan State\", TargetFanState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetFanState.UUID = \"000000BF-0000-1000-8000-0026BB765291\";\n    TargetFanState.MANUAL = 0;\n    TargetFanState.AUTO = 1;\n    return TargetFanState;\n}(Characteristic_1.Characteristic));\nexports.TargetFanState = TargetFanState;\nCharacteristic_1.Characteristic.TargetFanState = TargetFanState;\n/**\n * Characteristic \"Target Heater-Cooler State\"\n */\nvar TargetHeaterCoolerState = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetHeaterCoolerState, _super);\n    function TargetHeaterCoolerState() {\n        var _this = _super.call(this, \"Target Heater-Cooler State\", TargetHeaterCoolerState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 2,\n            minStep: 1,\n            validValues: [0, 1, 2],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetHeaterCoolerState.UUID = \"000000B2-0000-1000-8000-0026BB765291\";\n    TargetHeaterCoolerState.AUTO = 0;\n    TargetHeaterCoolerState.HEAT = 1;\n    TargetHeaterCoolerState.COOL = 2;\n    return TargetHeaterCoolerState;\n}(Characteristic_1.Characteristic));\nexports.TargetHeaterCoolerState = TargetHeaterCoolerState;\nCharacteristic_1.Characteristic.TargetHeaterCoolerState = TargetHeaterCoolerState;\n/**\n * Characteristic \"Target Heating Cooling State\"\n */\nvar TargetHeatingCoolingState = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetHeatingCoolingState, _super);\n    function TargetHeatingCoolingState() {\n        var _this = _super.call(this, \"Target Heating Cooling State\", TargetHeatingCoolingState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 3,\n            minStep: 1,\n            validValues: [0, 1, 2, 3],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetHeatingCoolingState.UUID = \"00000033-0000-1000-8000-0026BB765291\";\n    TargetHeatingCoolingState.OFF = 0;\n    TargetHeatingCoolingState.HEAT = 1;\n    TargetHeatingCoolingState.COOL = 2;\n    TargetHeatingCoolingState.AUTO = 3;\n    return TargetHeatingCoolingState;\n}(Characteristic_1.Characteristic));\nexports.TargetHeatingCoolingState = TargetHeatingCoolingState;\nCharacteristic_1.Characteristic.TargetHeatingCoolingState = TargetHeatingCoolingState;\n/**\n * Characteristic \"Target Horizontal Tilt Angle\"\n */\nvar TargetHorizontalTiltAngle = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetHorizontalTiltAngle, _super);\n    function TargetHorizontalTiltAngle() {\n        var _this = _super.call(this, \"Target Horizontal Tilt Angle\", TargetHorizontalTiltAngle.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"arcdegrees\" /* Units.ARC_DEGREE */,\n            minValue: -90,\n            maxValue: 90,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetHorizontalTiltAngle.UUID = \"0000007B-0000-1000-8000-0026BB765291\";\n    return TargetHorizontalTiltAngle;\n}(Characteristic_1.Characteristic));\nexports.TargetHorizontalTiltAngle = TargetHorizontalTiltAngle;\nCharacteristic_1.Characteristic.TargetHorizontalTiltAngle = TargetHorizontalTiltAngle;\n/**\n * Characteristic \"Target Humidifier-Dehumidifier State\"\n */\nvar TargetHumidifierDehumidifierState = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetHumidifierDehumidifierState, _super);\n    function TargetHumidifierDehumidifierState() {\n        var _this = _super.call(this, \"Target Humidifier-Dehumidifier State\", TargetHumidifierDehumidifierState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 2,\n            minStep: 1,\n            validValues: [0, 1, 2],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetHumidifierDehumidifierState.UUID = \"000000B4-0000-1000-8000-0026BB765291\";\n    /**\n     * @deprecated Removed in iOS 11. Use {@link HUMIDIFIER_OR_DEHUMIDIFIER} instead.\n     */\n    TargetHumidifierDehumidifierState.AUTO = 0;\n    TargetHumidifierDehumidifierState.HUMIDIFIER_OR_DEHUMIDIFIER = 0;\n    TargetHumidifierDehumidifierState.HUMIDIFIER = 1;\n    TargetHumidifierDehumidifierState.DEHUMIDIFIER = 2;\n    return TargetHumidifierDehumidifierState;\n}(Characteristic_1.Characteristic));\nexports.TargetHumidifierDehumidifierState = TargetHumidifierDehumidifierState;\nCharacteristic_1.Characteristic.TargetHumidifierDehumidifierState = TargetHumidifierDehumidifierState;\n/**\n * Characteristic \"Target Media State\"\n */\nvar TargetMediaState = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetMediaState, _super);\n    function TargetMediaState() {\n        var _this = _super.call(this, \"Target Media State\", TargetMediaState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 2,\n            minStep: 1,\n            validValues: [0, 1, 2],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetMediaState.UUID = \"00000137-0000-1000-8000-0026BB765291\";\n    TargetMediaState.PLAY = 0;\n    TargetMediaState.PAUSE = 1;\n    TargetMediaState.STOP = 2;\n    return TargetMediaState;\n}(Characteristic_1.Characteristic));\nexports.TargetMediaState = TargetMediaState;\nCharacteristic_1.Characteristic.TargetMediaState = TargetMediaState;\n/**\n * Characteristic \"Target Position\"\n */\nvar TargetPosition = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetPosition, _super);\n    function TargetPosition() {\n        var _this = _super.call(this, \"Target Position\", TargetPosition.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"percentage\" /* Units.PERCENTAGE */,\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetPosition.UUID = \"0000007C-0000-1000-8000-0026BB765291\";\n    return TargetPosition;\n}(Characteristic_1.Characteristic));\nexports.TargetPosition = TargetPosition;\nCharacteristic_1.Characteristic.TargetPosition = TargetPosition;\n/**\n * Characteristic \"Target Relative Humidity\"\n */\nvar TargetRelativeHumidity = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetRelativeHumidity, _super);\n    function TargetRelativeHumidity() {\n        var _this = _super.call(this, \"Target Relative Humidity\", TargetRelativeHumidity.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"percentage\" /* Units.PERCENTAGE */,\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetRelativeHumidity.UUID = \"00000034-0000-1000-8000-0026BB765291\";\n    return TargetRelativeHumidity;\n}(Characteristic_1.Characteristic));\nexports.TargetRelativeHumidity = TargetRelativeHumidity;\nCharacteristic_1.Characteristic.TargetRelativeHumidity = TargetRelativeHumidity;\n/**\n * Characteristic \"Target Slat State\"\n * @deprecated Removed and not used anymore\n */\nvar TargetSlatState = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetSlatState, _super);\n    function TargetSlatState() {\n        var _this = _super.call(this, \"Target Slat State\", TargetSlatState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetSlatState.UUID = \"000000BE-0000-1000-8000-0026BB765291\";\n    TargetSlatState.MANUAL = 0;\n    TargetSlatState.AUTO = 1;\n    return TargetSlatState;\n}(Characteristic_1.Characteristic));\nexports.TargetSlatState = TargetSlatState;\n// noinspection JSDeprecatedSymbols\nCharacteristic_1.Characteristic.TargetSlatState = TargetSlatState;\n/**\n * Characteristic \"Target Temperature\"\n */\nvar TargetTemperature = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetTemperature, _super);\n    function TargetTemperature() {\n        var _this = _super.call(this, \"Target Temperature\", TargetTemperature.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"celsius\" /* Units.CELSIUS */,\n            minValue: 10,\n            maxValue: 38,\n            minStep: 0.1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetTemperature.UUID = \"00000035-0000-1000-8000-0026BB765291\";\n    return TargetTemperature;\n}(Characteristic_1.Characteristic));\nexports.TargetTemperature = TargetTemperature;\nCharacteristic_1.Characteristic.TargetTemperature = TargetTemperature;\n/**\n * Characteristic \"Target Tilt Angle\"\n */\nvar TargetTiltAngle = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetTiltAngle, _super);\n    function TargetTiltAngle() {\n        var _this = _super.call(this, \"Target Tilt Angle\", TargetTiltAngle.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"arcdegrees\" /* Units.ARC_DEGREE */,\n            minValue: -90,\n            maxValue: 90,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetTiltAngle.UUID = \"000000C2-0000-1000-8000-0026BB765291\";\n    return TargetTiltAngle;\n}(Characteristic_1.Characteristic));\nexports.TargetTiltAngle = TargetTiltAngle;\nCharacteristic_1.Characteristic.TargetTiltAngle = TargetTiltAngle;\n/**\n * Characteristic \"Target Vertical Tilt Angle\"\n */\nvar TargetVerticalTiltAngle = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetVerticalTiltAngle, _super);\n    function TargetVerticalTiltAngle() {\n        var _this = _super.call(this, \"Target Vertical Tilt Angle\", TargetVerticalTiltAngle.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"arcdegrees\" /* Units.ARC_DEGREE */,\n            minValue: -90,\n            maxValue: 90,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetVerticalTiltAngle.UUID = \"0000007D-0000-1000-8000-0026BB765291\";\n    return TargetVerticalTiltAngle;\n}(Characteristic_1.Characteristic));\nexports.TargetVerticalTiltAngle = TargetVerticalTiltAngle;\nCharacteristic_1.Characteristic.TargetVerticalTiltAngle = TargetVerticalTiltAngle;\n/**\n * Characteristic \"Target Visibility State\"\n */\nvar TargetVisibilityState = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetVisibilityState, _super);\n    function TargetVisibilityState() {\n        var _this = _super.call(this, \"Target Visibility State\", TargetVisibilityState.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TargetVisibilityState.UUID = \"00000134-0000-1000-8000-0026BB765291\";\n    TargetVisibilityState.SHOWN = 0;\n    TargetVisibilityState.HIDDEN = 1;\n    return TargetVisibilityState;\n}(Characteristic_1.Characteristic));\nexports.TargetVisibilityState = TargetVisibilityState;\nCharacteristic_1.Characteristic.TargetVisibilityState = TargetVisibilityState;\n/**\n * Characteristic \"Temperature Display Units\"\n */\nvar TemperatureDisplayUnits = /** @class */ (function (_super) {\n    tslib_1.__extends(TemperatureDisplayUnits, _super);\n    function TemperatureDisplayUnits() {\n        var _this = _super.call(this, \"Temperature Display Units\", TemperatureDisplayUnits.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TemperatureDisplayUnits.UUID = \"00000036-0000-1000-8000-0026BB765291\";\n    TemperatureDisplayUnits.CELSIUS = 0;\n    TemperatureDisplayUnits.FAHRENHEIT = 1;\n    return TemperatureDisplayUnits;\n}(Characteristic_1.Characteristic));\nexports.TemperatureDisplayUnits = TemperatureDisplayUnits;\nCharacteristic_1.Characteristic.TemperatureDisplayUnits = TemperatureDisplayUnits;\n/**\n * Characteristic \"Third Party Camera Active\"\n */\nvar ThirdPartyCameraActive = /** @class */ (function (_super) {\n    tslib_1.__extends(ThirdPartyCameraActive, _super);\n    function ThirdPartyCameraActive() {\n        var _this = _super.call(this, \"Third Party Camera Active\", ThirdPartyCameraActive.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ThirdPartyCameraActive.UUID = \"0000021C-0000-1000-8000-0026BB765291\";\n    ThirdPartyCameraActive.OFF = 0;\n    ThirdPartyCameraActive.ON = 1;\n    return ThirdPartyCameraActive;\n}(Characteristic_1.Characteristic));\nexports.ThirdPartyCameraActive = ThirdPartyCameraActive;\nCharacteristic_1.Characteristic.ThirdPartyCameraActive = ThirdPartyCameraActive;\n/**\n * Characteristic \"Thread Control Point\"\n */\nvar ThreadControlPoint = /** @class */ (function (_super) {\n    tslib_1.__extends(ThreadControlPoint, _super);\n    function ThreadControlPoint() {\n        var _this = _super.call(this, \"Thread Control Point\", ThreadControlPoint.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ThreadControlPoint.UUID = \"00000704-0000-1000-8000-0026BB765291\";\n    return ThreadControlPoint;\n}(Characteristic_1.Characteristic));\nexports.ThreadControlPoint = ThreadControlPoint;\nCharacteristic_1.Characteristic.ThreadControlPoint = ThreadControlPoint;\n/**\n * Characteristic \"Thread Node Capabilities\"\n */\nvar ThreadNodeCapabilities = /** @class */ (function (_super) {\n    tslib_1.__extends(ThreadNodeCapabilities, _super);\n    function ThreadNodeCapabilities() {\n        var _this = _super.call(this, \"Thread Node Capabilities\", ThreadNodeCapabilities.UUID, {\n            format: \"uint16\" /* Formats.UINT16 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 31,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ThreadNodeCapabilities.UUID = \"00000702-0000-1000-8000-0026BB765291\";\n    return ThreadNodeCapabilities;\n}(Characteristic_1.Characteristic));\nexports.ThreadNodeCapabilities = ThreadNodeCapabilities;\nCharacteristic_1.Characteristic.ThreadNodeCapabilities = ThreadNodeCapabilities;\n/**\n * Characteristic \"Thread OpenThread Version\"\n */\nvar ThreadOpenThreadVersion = /** @class */ (function (_super) {\n    tslib_1.__extends(ThreadOpenThreadVersion, _super);\n    function ThreadOpenThreadVersion() {\n        var _this = _super.call(this, \"Thread OpenThread Version\", ThreadOpenThreadVersion.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ThreadOpenThreadVersion.UUID = \"00000706-0000-1000-8000-0026BB765291\";\n    return ThreadOpenThreadVersion;\n}(Characteristic_1.Characteristic));\nexports.ThreadOpenThreadVersion = ThreadOpenThreadVersion;\nCharacteristic_1.Characteristic.ThreadOpenThreadVersion = ThreadOpenThreadVersion;\n/**\n * Characteristic \"Thread Status\"\n */\nvar ThreadStatus = /** @class */ (function (_super) {\n    tslib_1.__extends(ThreadStatus, _super);\n    function ThreadStatus() {\n        var _this = _super.call(this, \"Thread Status\", ThreadStatus.UUID, {\n            format: \"uint16\" /* Formats.UINT16 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 6,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ThreadStatus.UUID = \"00000703-0000-1000-8000-0026BB765291\";\n    return ThreadStatus;\n}(Characteristic_1.Characteristic));\nexports.ThreadStatus = ThreadStatus;\nCharacteristic_1.Characteristic.ThreadStatus = ThreadStatus;\n/**\n * Characteristic \"Time Update\"\n * @deprecated Removed and not used anymore\n */\nvar TimeUpdate = /** @class */ (function (_super) {\n    tslib_1.__extends(TimeUpdate, _super);\n    function TimeUpdate() {\n        var _this = _super.call(this, \"Time Update\", TimeUpdate.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TimeUpdate.UUID = \"0000009A-0000-1000-8000-0026BB765291\";\n    return TimeUpdate;\n}(Characteristic_1.Characteristic));\nexports.TimeUpdate = TimeUpdate;\n// noinspection JSDeprecatedSymbols\nCharacteristic_1.Characteristic.TimeUpdate = TimeUpdate;\n/**\n * Characteristic \"Token\"\n */\nvar Token = /** @class */ (function (_super) {\n    tslib_1.__extends(Token, _super);\n    function Token() {\n        var _this = _super.call(this, \"Token\", Token.UUID, {\n            format: \"data\" /* Formats.DATA */,\n            perms: [\"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Token.UUID = \"00000231-0000-1000-8000-0026BB765291\";\n    return Token;\n}(Characteristic_1.Characteristic));\nexports.Token = Token;\nCharacteristic_1.Characteristic.Token = Token;\n/**\n * Characteristic \"Transmit Power\"\n * @since iOS 14\n */\nvar TransmitPower = /** @class */ (function (_super) {\n    tslib_1.__extends(TransmitPower, _super);\n    function TransmitPower() {\n        var _this = _super.call(this, \"Transmit Power\", TransmitPower.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TransmitPower.UUID = \"00000242-0000-1000-8000-0026BB765291\";\n    return TransmitPower;\n}(Characteristic_1.Characteristic));\nexports.TransmitPower = TransmitPower;\nCharacteristic_1.Characteristic.TransmitPower = TransmitPower;\n/**\n * Characteristic \"Tunnel Connection Timeout\"\n */\nvar TunnelConnectionTimeout = /** @class */ (function (_super) {\n    tslib_1.__extends(TunnelConnectionTimeout, _super);\n    function TunnelConnectionTimeout() {\n        var _this = _super.call(this, \"Tunnel Connection Timeout\", TunnelConnectionTimeout.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TunnelConnectionTimeout.UUID = \"00000061-0000-1000-8000-0026BB765291\";\n    return TunnelConnectionTimeout;\n}(Characteristic_1.Characteristic));\nexports.TunnelConnectionTimeout = TunnelConnectionTimeout;\nCharacteristic_1.Characteristic.TunnelConnectionTimeout = TunnelConnectionTimeout;\n/**\n * Characteristic \"Tunneled Accessory Advertising\"\n */\nvar TunneledAccessoryAdvertising = /** @class */ (function (_super) {\n    tslib_1.__extends(TunneledAccessoryAdvertising, _super);\n    function TunneledAccessoryAdvertising() {\n        var _this = _super.call(this, \"Tunneled Accessory Advertising\", TunneledAccessoryAdvertising.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TunneledAccessoryAdvertising.UUID = \"00000060-0000-1000-8000-0026BB765291\";\n    return TunneledAccessoryAdvertising;\n}(Characteristic_1.Characteristic));\nexports.TunneledAccessoryAdvertising = TunneledAccessoryAdvertising;\nCharacteristic_1.Characteristic.TunneledAccessoryAdvertising = TunneledAccessoryAdvertising;\n/**\n * Characteristic \"Tunneled Accessory Connected\"\n */\nvar TunneledAccessoryConnected = /** @class */ (function (_super) {\n    tslib_1.__extends(TunneledAccessoryConnected, _super);\n    function TunneledAccessoryConnected() {\n        var _this = _super.call(this, \"Tunneled Accessory Connected\", TunneledAccessoryConnected.UUID, {\n            format: \"bool\" /* Formats.BOOL */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TunneledAccessoryConnected.UUID = \"00000059-0000-1000-8000-0026BB765291\";\n    return TunneledAccessoryConnected;\n}(Characteristic_1.Characteristic));\nexports.TunneledAccessoryConnected = TunneledAccessoryConnected;\nCharacteristic_1.Characteristic.TunneledAccessoryConnected = TunneledAccessoryConnected;\n/**\n * Characteristic \"Tunneled Accessory State Number\"\n */\nvar TunneledAccessoryStateNumber = /** @class */ (function (_super) {\n    tslib_1.__extends(TunneledAccessoryStateNumber, _super);\n    function TunneledAccessoryStateNumber() {\n        var _this = _super.call(this, \"Tunneled Accessory State Number\", TunneledAccessoryStateNumber.UUID, {\n            format: \"int\" /* Formats.INT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    TunneledAccessoryStateNumber.UUID = \"00000058-0000-1000-8000-0026BB765291\";\n    return TunneledAccessoryStateNumber;\n}(Characteristic_1.Characteristic));\nexports.TunneledAccessoryStateNumber = TunneledAccessoryStateNumber;\nCharacteristic_1.Characteristic.TunneledAccessoryStateNumber = TunneledAccessoryStateNumber;\n/**\n * Characteristic \"Valve Type\"\n */\nvar ValveType = /** @class */ (function (_super) {\n    tslib_1.__extends(ValveType, _super);\n    function ValveType() {\n        var _this = _super.call(this, \"Valve Type\", ValveType.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 3,\n            minStep: 1,\n            validValues: [0, 1, 2, 3],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    ValveType.UUID = \"000000D5-0000-1000-8000-0026BB765291\";\n    ValveType.GENERIC_VALVE = 0;\n    ValveType.IRRIGATION = 1;\n    ValveType.SHOWER_HEAD = 2;\n    ValveType.WATER_FAUCET = 3;\n    return ValveType;\n}(Characteristic_1.Characteristic));\nexports.ValveType = ValveType;\nCharacteristic_1.Characteristic.ValveType = ValveType;\n/**\n * Characteristic \"Version\"\n */\nvar Version = /** @class */ (function (_super) {\n    tslib_1.__extends(Version, _super);\n    function Version() {\n        var _this = _super.call(this, \"Version\", Version.UUID, {\n            format: \"string\" /* Formats.STRING */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n            maxLen: 64,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Version.UUID = \"00000037-0000-1000-8000-0026BB765291\";\n    return Version;\n}(Characteristic_1.Characteristic));\nexports.Version = Version;\nCharacteristic_1.Characteristic.Version = Version;\n/**\n * Characteristic \"Video Analysis Active\"\n * @since iOS 14\n */\nvar VideoAnalysisActive = /** @class */ (function (_super) {\n    tslib_1.__extends(VideoAnalysisActive, _super);\n    function VideoAnalysisActive() {\n        var _this = _super.call(this, \"Video Analysis Active\", VideoAnalysisActive.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    VideoAnalysisActive.UUID = \"00000229-0000-1000-8000-0026BB765291\";\n    return VideoAnalysisActive;\n}(Characteristic_1.Characteristic));\nexports.VideoAnalysisActive = VideoAnalysisActive;\nCharacteristic_1.Characteristic.VideoAnalysisActive = VideoAnalysisActive;\n/**\n * Characteristic \"VOC Density\"\n */\nvar VOCDensity = /** @class */ (function (_super) {\n    tslib_1.__extends(VOCDensity, _super);\n    function VOCDensity() {\n        var _this = _super.call(this, \"VOC Density\", VOCDensity.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 1000,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    VOCDensity.UUID = \"000000C8-0000-1000-8000-0026BB765291\";\n    return VOCDensity;\n}(Characteristic_1.Characteristic));\nexports.VOCDensity = VOCDensity;\nCharacteristic_1.Characteristic.VOCDensity = VOCDensity;\n/**\n * Characteristic \"Volume\"\n */\nvar Volume = /** @class */ (function (_super) {\n    tslib_1.__extends(Volume, _super);\n    function Volume() {\n        var _this = _super.call(this, \"Volume\", Volume.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */],\n            unit: \"percentage\" /* Units.PERCENTAGE */,\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    Volume.UUID = \"00000119-0000-1000-8000-0026BB765291\";\n    return Volume;\n}(Characteristic_1.Characteristic));\nexports.Volume = Volume;\nCharacteristic_1.Characteristic.Volume = Volume;\n/**\n * Characteristic \"Volume Control Type\"\n */\nvar VolumeControlType = /** @class */ (function (_super) {\n    tslib_1.__extends(VolumeControlType, _super);\n    function VolumeControlType() {\n        var _this = _super.call(this, \"Volume Control Type\", VolumeControlType.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 3,\n            minStep: 1,\n            validValues: [0, 1, 2, 3],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    VolumeControlType.UUID = \"000000E9-0000-1000-8000-0026BB765291\";\n    VolumeControlType.NONE = 0;\n    VolumeControlType.RELATIVE = 1;\n    VolumeControlType.RELATIVE_WITH_CURRENT = 2;\n    VolumeControlType.ABSOLUTE = 3;\n    return VolumeControlType;\n}(Characteristic_1.Characteristic));\nexports.VolumeControlType = VolumeControlType;\nCharacteristic_1.Characteristic.VolumeControlType = VolumeControlType;\n/**\n * Characteristic \"Volume Selector\"\n */\nvar VolumeSelector = /** @class */ (function (_super) {\n    tslib_1.__extends(VolumeSelector, _super);\n    function VolumeSelector() {\n        var _this = _super.call(this, \"Volume Selector\", VolumeSelector.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"pw\" /* Perms.PAIRED_WRITE */],\n            minValue: 0,\n            maxValue: 1,\n            minStep: 1,\n            validValues: [0, 1],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    VolumeSelector.UUID = \"000000EA-0000-1000-8000-0026BB765291\";\n    VolumeSelector.INCREMENT = 0;\n    VolumeSelector.DECREMENT = 1;\n    return VolumeSelector;\n}(Characteristic_1.Characteristic));\nexports.VolumeSelector = VolumeSelector;\nCharacteristic_1.Characteristic.VolumeSelector = VolumeSelector;\n/**\n * Characteristic \"Wake Configuration\"\n * @since iOS 13.4\n */\nvar WakeConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(WakeConfiguration, _super);\n    function WakeConfiguration() {\n        var _this = _super.call(this, \"Wake Configuration\", WakeConfiguration.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    WakeConfiguration.UUID = \"00000222-0000-1000-8000-0026BB765291\";\n    return WakeConfiguration;\n}(Characteristic_1.Characteristic));\nexports.WakeConfiguration = WakeConfiguration;\nCharacteristic_1.Characteristic.WakeConfiguration = WakeConfiguration;\n/**\n * Characteristic \"WAN Configuration List\"\n */\nvar WANConfigurationList = /** @class */ (function (_super) {\n    tslib_1.__extends(WANConfigurationList, _super);\n    function WANConfigurationList() {\n        var _this = _super.call(this, \"WAN Configuration List\", WANConfigurationList.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    WANConfigurationList.UUID = \"00000211-0000-1000-8000-0026BB765291\";\n    return WANConfigurationList;\n}(Characteristic_1.Characteristic));\nexports.WANConfigurationList = WANConfigurationList;\nCharacteristic_1.Characteristic.WANConfigurationList = WANConfigurationList;\n/**\n * Characteristic \"WAN Status List\"\n */\nvar WANStatusList = /** @class */ (function (_super) {\n    tslib_1.__extends(WANStatusList, _super);\n    function WANStatusList() {\n        var _this = _super.call(this, \"WAN Status List\", WANStatusList.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    WANStatusList.UUID = \"00000212-0000-1000-8000-0026BB765291\";\n    return WANStatusList;\n}(Characteristic_1.Characteristic));\nexports.WANStatusList = WANStatusList;\nCharacteristic_1.Characteristic.WANStatusList = WANStatusList;\n/**\n * Characteristic \"Water Level\"\n */\nvar WaterLevel = /** @class */ (function (_super) {\n    tslib_1.__extends(WaterLevel, _super);\n    function WaterLevel() {\n        var _this = _super.call(this, \"Water Level\", WaterLevel.UUID, {\n            format: \"float\" /* Formats.FLOAT */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            unit: \"percentage\" /* Units.PERCENTAGE */,\n            minValue: 0,\n            maxValue: 100,\n            minStep: 1,\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    WaterLevel.UUID = \"000000B5-0000-1000-8000-0026BB765291\";\n    return WaterLevel;\n}(Characteristic_1.Characteristic));\nexports.WaterLevel = WaterLevel;\nCharacteristic_1.Characteristic.WaterLevel = WaterLevel;\n/**\n * Characteristic \"Wi-Fi Capabilities\"\n * @since iOS 14\n */\nvar WiFiCapabilities = /** @class */ (function (_super) {\n    tslib_1.__extends(WiFiCapabilities, _super);\n    function WiFiCapabilities() {\n        var _this = _super.call(this, \"Wi-Fi Capabilities\", WiFiCapabilities.UUID, {\n            format: \"uint32\" /* Formats.UINT32 */,\n            perms: [\"pr\" /* Perms.PAIRED_READ */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    WiFiCapabilities.UUID = \"0000022C-0000-1000-8000-0026BB765291\";\n    return WiFiCapabilities;\n}(Characteristic_1.Characteristic));\nexports.WiFiCapabilities = WiFiCapabilities;\nCharacteristic_1.Characteristic.WiFiCapabilities = WiFiCapabilities;\n/**\n * Characteristic \"Wi-Fi Configuration Control\"\n * @since iOS 14\n */\nvar WiFiConfigurationControl = /** @class */ (function (_super) {\n    tslib_1.__extends(WiFiConfigurationControl, _super);\n    function WiFiConfigurationControl() {\n        var _this = _super.call(this, \"Wi-Fi Configuration Control\", WiFiConfigurationControl.UUID, {\n            format: \"tlv8\" /* Formats.TLV8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */, \"pw\" /* Perms.PAIRED_WRITE */, \"tw\" /* Perms.TIMED_WRITE */, \"wr\" /* Perms.WRITE_RESPONSE */],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    WiFiConfigurationControl.UUID = \"0000022D-0000-1000-8000-0026BB765291\";\n    return WiFiConfigurationControl;\n}(Characteristic_1.Characteristic));\nexports.WiFiConfigurationControl = WiFiConfigurationControl;\nCharacteristic_1.Characteristic.WiFiConfigurationControl = WiFiConfigurationControl;\n/**\n * Characteristic \"Wi-Fi Satellite Status\"\n */\nvar WiFiSatelliteStatus = /** @class */ (function (_super) {\n    tslib_1.__extends(WiFiSatelliteStatus, _super);\n    function WiFiSatelliteStatus() {\n        var _this = _super.call(this, \"Wi-Fi Satellite Status\", WiFiSatelliteStatus.UUID, {\n            format: \"uint8\" /* Formats.UINT8 */,\n            perms: [\"ev\" /* Perms.NOTIFY */, \"pr\" /* Perms.PAIRED_READ */],\n            minValue: 0,\n            maxValue: 2,\n            validValues: [0, 1, 2],\n        }) || this;\n        _this.value = _this.getDefaultValue();\n        return _this;\n    }\n    WiFiSatelliteStatus.UUID = \"0000021E-0000-1000-8000-0026BB765291\";\n    WiFiSatelliteStatus.UNKNOWN = 0;\n    WiFiSatelliteStatus.CONNECTED = 1;\n    WiFiSatelliteStatus.NOT_CONNECTED = 2;\n    return WiFiSatelliteStatus;\n}(Characteristic_1.Characteristic));\nexports.WiFiSatelliteStatus = WiFiSatelliteStatus;\nCharacteristic_1.Characteristic.WiFiSatelliteStatus = WiFiSatelliteStatus;\n//# sourceMappingURL=CharacteristicDefinitions.js.map","\"use strict\";\n// THIS FILE IS AUTO-GENERATED - DO NOT MODIFY\n// V=880\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SecuritySystem = exports.ProtocolInformation = exports.PowerManagement = exports.Pairing = exports.Outlet = exports.OccupancySensor = exports.NFCAccess = exports.MotionSensor = exports.Microphone = exports.LockMechanism = exports.LockManagement = exports.LightSensor = exports.Lightbulb = exports.LeakSensor = exports.IrrigationSystem = exports.InputSource = exports.HumiditySensor = exports.HumidifierDehumidifier = exports.HeaterCooler = exports.GarageDoorOpener = exports.FirmwareUpdate = exports.FilterMaintenance = exports.Faucet = exports.Fanv2 = exports.Fan = exports.Doorbell = exports.Door = exports.Diagnostics = exports.DataStreamTransportManagement = exports.ContactSensor = exports.CloudRelay = exports.CarbonMonoxideSensor = exports.CarbonDioxideSensor = exports.CameraRTPStreamManagement = exports.CameraRecordingManagement = exports.CameraOperatingMode = exports.CameraControl = exports.BridgingState = exports.BridgeConfiguration = exports.Battery = exports.AudioStreamManagement = exports.Assistant = exports.AssetUpdate = exports.AirQualitySensor = exports.AirPurifier = exports.AccessoryRuntimeInformation = exports.AccessoryMetrics = exports.AccessoryInformation = exports.AccessControl = exports.AccessCode = void 0;\nexports.WindowCovering = exports.Window = exports.WiFiTransport = exports.WiFiSatellite = exports.WiFiRouter = exports.Valve = exports.Tunnel = exports.TransferTransportManagement = exports.TimeInformation = exports.ThreadTransport = exports.Thermostat = exports.TemperatureSensor = exports.TelevisionSpeaker = exports.Television = exports.TargetControlManagement = exports.TargetControl = exports.TapManagement = exports.Switch = exports.StatelessProgrammableSwitch = exports.StatefulProgrammableSwitch = exports.Speaker = exports.SmokeSensor = exports.SmartSpeaker = exports.Slats = exports.SiriEndpoint = exports.Siri = exports.ServiceLabel = void 0;\nvar tslib_1 = require(\"tslib\");\nvar Characteristic_1 = require(\"../Characteristic\");\nvar Service_1 = require(\"../Service\");\n/**\n * Service \"Access Code\"\n * @since iOS 15\n */\nvar AccessCode = /** @class */ (function (_super) {\n    tslib_1.__extends(AccessCode, _super);\n    function AccessCode(displayName, subtype) {\n        var _this = _super.call(this, displayName, AccessCode.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.AccessCodeControlPoint);\n        _this.addCharacteristic(Characteristic_1.Characteristic.AccessCodeSupportedConfiguration);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ConfigurationState);\n        return _this;\n    }\n    AccessCode.UUID = \"00000260-0000-1000-8000-0026BB765291\";\n    return AccessCode;\n}(Service_1.Service));\nexports.AccessCode = AccessCode;\nService_1.Service.AccessCode = AccessCode;\n/**\n * Service \"Access Control\"\n */\nvar AccessControl = /** @class */ (function (_super) {\n    tslib_1.__extends(AccessControl, _super);\n    function AccessControl(displayName, subtype) {\n        var _this = _super.call(this, displayName, AccessControl.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.AccessControlLevel);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.PasswordSetting);\n        return _this;\n    }\n    AccessControl.UUID = \"000000DA-0000-1000-8000-0026BB765291\";\n    return AccessControl;\n}(Service_1.Service));\nexports.AccessControl = AccessControl;\nService_1.Service.AccessControl = AccessControl;\n/**\n * Service \"Accessory Information\"\n */\nvar AccessoryInformation = /** @class */ (function (_super) {\n    tslib_1.__extends(AccessoryInformation, _super);\n    function AccessoryInformation(displayName, subtype) {\n        var _this = _super.call(this, displayName, AccessoryInformation.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Identify);\n        _this.addCharacteristic(Characteristic_1.Characteristic.Manufacturer);\n        _this.addCharacteristic(Characteristic_1.Characteristic.Model);\n        if (!_this.testCharacteristic(Characteristic_1.Characteristic.Name)) { // workaround for Name characteristic collision in constructor\n            _this.addCharacteristic(Characteristic_1.Characteristic.Name).updateValue(\"Unnamed Service\");\n        }\n        _this.addCharacteristic(Characteristic_1.Characteristic.SerialNumber);\n        _this.addCharacteristic(Characteristic_1.Characteristic.FirmwareRevision);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.AccessoryFlags);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.AppMatchingIdentifier);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ConfiguredName);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.HardwareFinish);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.HardwareRevision);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ProductData);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SoftwareRevision);\n        return _this;\n    }\n    AccessoryInformation.UUID = \"0000003E-0000-1000-8000-0026BB765291\";\n    return AccessoryInformation;\n}(Service_1.Service));\nexports.AccessoryInformation = AccessoryInformation;\nService_1.Service.AccessoryInformation = AccessoryInformation;\n/**\n * Service \"Accessory Metrics\"\n */\nvar AccessoryMetrics = /** @class */ (function (_super) {\n    tslib_1.__extends(AccessoryMetrics, _super);\n    function AccessoryMetrics(displayName, subtype) {\n        var _this = _super.call(this, displayName, AccessoryMetrics.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Active);\n        _this.addCharacteristic(Characteristic_1.Characteristic.MetricsBufferFullState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SupportedMetrics);\n        return _this;\n    }\n    AccessoryMetrics.UUID = \"00000270-0000-1000-8000-0026BB765291\";\n    return AccessoryMetrics;\n}(Service_1.Service));\nexports.AccessoryMetrics = AccessoryMetrics;\nService_1.Service.AccessoryMetrics = AccessoryMetrics;\n/**\n * Service \"Accessory Runtime Information\"\n */\nvar AccessoryRuntimeInformation = /** @class */ (function (_super) {\n    tslib_1.__extends(AccessoryRuntimeInformation, _super);\n    function AccessoryRuntimeInformation(displayName, subtype) {\n        var _this = _super.call(this, displayName, AccessoryRuntimeInformation.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Ping);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ActivityInterval);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.HeartBeat);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SleepInterval);\n        return _this;\n    }\n    AccessoryRuntimeInformation.UUID = \"00000239-0000-1000-8000-0026BB765291\";\n    return AccessoryRuntimeInformation;\n}(Service_1.Service));\nexports.AccessoryRuntimeInformation = AccessoryRuntimeInformation;\nService_1.Service.AccessoryRuntimeInformation = AccessoryRuntimeInformation;\n/**\n * Service \"Air Purifier\"\n */\nvar AirPurifier = /** @class */ (function (_super) {\n    tslib_1.__extends(AirPurifier, _super);\n    function AirPurifier(displayName, subtype) {\n        var _this = _super.call(this, displayName, AirPurifier.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Active);\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentAirPurifierState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TargetAirPurifierState);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.LockPhysicalControls);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.RotationSpeed);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SwingMode);\n        return _this;\n    }\n    AirPurifier.UUID = \"000000BB-0000-1000-8000-0026BB765291\";\n    return AirPurifier;\n}(Service_1.Service));\nexports.AirPurifier = AirPurifier;\nService_1.Service.AirPurifier = AirPurifier;\n/**\n * Service \"Air Quality Sensor\"\n */\nvar AirQualitySensor = /** @class */ (function (_super) {\n    tslib_1.__extends(AirQualitySensor, _super);\n    function AirQualitySensor(displayName, subtype) {\n        var _this = _super.call(this, displayName, AirQualitySensor.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.AirQuality);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.NitrogenDioxideDensity);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.OzoneDensity);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.PM10Density);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.PM2_5Density);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SulphurDioxideDensity);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.VOCDensity);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusActive);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusLowBattery);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusTampered);\n        return _this;\n    }\n    AirQualitySensor.UUID = \"0000008D-0000-1000-8000-0026BB765291\";\n    return AirQualitySensor;\n}(Service_1.Service));\nexports.AirQualitySensor = AirQualitySensor;\nService_1.Service.AirQualitySensor = AirQualitySensor;\n/**\n * Service \"Asset Update\"\n */\nvar AssetUpdate = /** @class */ (function (_super) {\n    tslib_1.__extends(AssetUpdate, _super);\n    function AssetUpdate(displayName, subtype) {\n        var _this = _super.call(this, displayName, AssetUpdate.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.AssetUpdateReadiness);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SupportedAssetTypes);\n        return _this;\n    }\n    AssetUpdate.UUID = \"00000267-0000-1000-8000-0026BB765291\";\n    return AssetUpdate;\n}(Service_1.Service));\nexports.AssetUpdate = AssetUpdate;\nService_1.Service.AssetUpdate = AssetUpdate;\n/**\n * Service \"Assistant\"\n */\nvar Assistant = /** @class */ (function (_super) {\n    tslib_1.__extends(Assistant, _super);\n    function Assistant(displayName, subtype) {\n        var _this = _super.call(this, displayName, Assistant.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Active);\n        _this.addCharacteristic(Characteristic_1.Characteristic.Identifier);\n        if (!_this.testCharacteristic(Characteristic_1.Characteristic.Name)) { // workaround for Name characteristic collision in constructor\n            _this.addCharacteristic(Characteristic_1.Characteristic.Name).updateValue(\"Unnamed Service\");\n        }\n        return _this;\n    }\n    Assistant.UUID = \"0000026A-0000-1000-8000-0026BB765291\";\n    return Assistant;\n}(Service_1.Service));\nexports.Assistant = Assistant;\nService_1.Service.Assistant = Assistant;\n/**\n * Service \"Audio Stream Management\"\n */\nvar AudioStreamManagement = /** @class */ (function (_super) {\n    tslib_1.__extends(AudioStreamManagement, _super);\n    function AudioStreamManagement(displayName, subtype) {\n        var _this = _super.call(this, displayName, AudioStreamManagement.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.SupportedAudioStreamConfiguration);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SelectedAudioStreamConfiguration);\n        return _this;\n    }\n    AudioStreamManagement.UUID = \"00000127-0000-1000-8000-0026BB765291\";\n    return AudioStreamManagement;\n}(Service_1.Service));\nexports.AudioStreamManagement = AudioStreamManagement;\nService_1.Service.AudioStreamManagement = AudioStreamManagement;\n/**\n * Service \"Battery\"\n */\nvar Battery = /** @class */ (function (_super) {\n    tslib_1.__extends(Battery, _super);\n    function Battery(displayName, subtype) {\n        var _this = _super.call(this, displayName, Battery.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.StatusLowBattery);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.BatteryLevel);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ChargingState);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        return _this;\n    }\n    Battery.UUID = \"00000096-0000-1000-8000-0026BB765291\";\n    return Battery;\n}(Service_1.Service));\nexports.Battery = Battery;\n// noinspection JSDeprecatedSymbols\nService_1.Service.BatteryService = Battery;\nService_1.Service.Battery = Battery;\n/**\n * Service \"Bridge Configuration\"\n * @deprecated Removed and not used anymore\n */\nvar BridgeConfiguration = /** @class */ (function (_super) {\n    tslib_1.__extends(BridgeConfiguration, _super);\n    function BridgeConfiguration(displayName, subtype) {\n        var _this = _super.call(this, displayName, BridgeConfiguration.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.ConfigureBridgedAccessoryStatus);\n        _this.addCharacteristic(Characteristic_1.Characteristic.DiscoverBridgedAccessories);\n        _this.addCharacteristic(Characteristic_1.Characteristic.DiscoveredBridgedAccessories);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ConfigureBridgedAccessory);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        return _this;\n    }\n    BridgeConfiguration.UUID = \"000000A1-0000-1000-8000-0026BB765291\";\n    return BridgeConfiguration;\n}(Service_1.Service));\nexports.BridgeConfiguration = BridgeConfiguration;\n// noinspection JSDeprecatedSymbols\nService_1.Service.BridgeConfiguration = BridgeConfiguration;\n/**\n * Service \"Bridging State\"\n * @deprecated Removed and not used anymore\n */\nvar BridgingState = /** @class */ (function (_super) {\n    tslib_1.__extends(BridgingState, _super);\n    function BridgingState(displayName, subtype) {\n        var _this = _super.call(this, displayName, BridgingState.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Reachable);\n        _this.addCharacteristic(Characteristic_1.Characteristic.LinkQuality);\n        _this.addCharacteristic(Characteristic_1.Characteristic.AccessoryIdentifier);\n        _this.addCharacteristic(Characteristic_1.Characteristic.Category);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        return _this;\n    }\n    BridgingState.UUID = \"00000062-0000-1000-8000-0026BB765291\";\n    return BridgingState;\n}(Service_1.Service));\nexports.BridgingState = BridgingState;\n// noinspection JSDeprecatedSymbols\nService_1.Service.BridgingState = BridgingState;\n/**\n * Service \"Camera Control\"\n * @deprecated This service has no usage anymore and will be ignored by iOS\n */\nvar CameraControl = /** @class */ (function (_super) {\n    tslib_1.__extends(CameraControl, _super);\n    function CameraControl(displayName, subtype) {\n        var _this = _super.call(this, displayName, CameraControl.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.On);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CurrentHorizontalTiltAngle);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CurrentVerticalTiltAngle);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.TargetHorizontalTiltAngle);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.TargetVerticalTiltAngle);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.NightVision);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.OpticalZoom);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.DigitalZoom);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ImageRotation);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ImageMirroring);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        return _this;\n    }\n    CameraControl.UUID = \"00000111-0000-1000-8000-0026BB765291\";\n    return CameraControl;\n}(Service_1.Service));\nexports.CameraControl = CameraControl;\n// noinspection JSDeprecatedSymbols\nService_1.Service.CameraControl = CameraControl;\n/**\n * Service \"Camera Operating Mode\"\n */\nvar CameraOperatingMode = /** @class */ (function (_super) {\n    tslib_1.__extends(CameraOperatingMode, _super);\n    function CameraOperatingMode(displayName, subtype) {\n        var _this = _super.call(this, displayName, CameraOperatingMode.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.EventSnapshotsActive);\n        _this.addCharacteristic(Characteristic_1.Characteristic.HomeKitCameraActive);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CameraOperatingModeIndicator);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ManuallyDisabled);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.NightVision);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.PeriodicSnapshotsActive);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ThirdPartyCameraActive);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.DiagonalFieldOfView);\n        return _this;\n    }\n    CameraOperatingMode.UUID = \"0000021A-0000-1000-8000-0026BB765291\";\n    return CameraOperatingMode;\n}(Service_1.Service));\nexports.CameraOperatingMode = CameraOperatingMode;\nService_1.Service.CameraOperatingMode = CameraOperatingMode;\n/**\n * Service \"Camera Recording Management\"\n */\nvar CameraRecordingManagement = /** @class */ (function (_super) {\n    tslib_1.__extends(CameraRecordingManagement, _super);\n    function CameraRecordingManagement(displayName, subtype) {\n        var _this = _super.call(this, displayName, CameraRecordingManagement.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Active);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SelectedCameraRecordingConfiguration);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SupportedAudioRecordingConfiguration);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SupportedCameraRecordingConfiguration);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SupportedVideoRecordingConfiguration);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.RecordingAudioActive);\n        return _this;\n    }\n    CameraRecordingManagement.UUID = \"00000204-0000-1000-8000-0026BB765291\";\n    return CameraRecordingManagement;\n}(Service_1.Service));\nexports.CameraRecordingManagement = CameraRecordingManagement;\n// noinspection JSDeprecatedSymbols\nService_1.Service.CameraEventRecordingManagement = CameraRecordingManagement;\nService_1.Service.CameraRecordingManagement = CameraRecordingManagement;\n/**\n * Service \"Camera RTP Stream Management\"\n */\nvar CameraRTPStreamManagement = /** @class */ (function (_super) {\n    tslib_1.__extends(CameraRTPStreamManagement, _super);\n    function CameraRTPStreamManagement(displayName, subtype) {\n        var _this = _super.call(this, displayName, CameraRTPStreamManagement.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.SelectedRTPStreamConfiguration);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SetupEndpoints);\n        _this.addCharacteristic(Characteristic_1.Characteristic.StreamingStatus);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SupportedAudioStreamConfiguration);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SupportedRTPConfiguration);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SupportedVideoStreamConfiguration);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Active);\n        return _this;\n    }\n    CameraRTPStreamManagement.UUID = \"00000110-0000-1000-8000-0026BB765291\";\n    return CameraRTPStreamManagement;\n}(Service_1.Service));\nexports.CameraRTPStreamManagement = CameraRTPStreamManagement;\nService_1.Service.CameraRTPStreamManagement = CameraRTPStreamManagement;\n/**\n * Service \"Carbon Dioxide Sensor\"\n */\nvar CarbonDioxideSensor = /** @class */ (function (_super) {\n    tslib_1.__extends(CarbonDioxideSensor, _super);\n    function CarbonDioxideSensor(displayName, subtype) {\n        var _this = _super.call(this, displayName, CarbonDioxideSensor.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CarbonDioxideDetected);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CarbonDioxideLevel);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CarbonDioxidePeakLevel);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusActive);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusLowBattery);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusTampered);\n        return _this;\n    }\n    CarbonDioxideSensor.UUID = \"00000097-0000-1000-8000-0026BB765291\";\n    return CarbonDioxideSensor;\n}(Service_1.Service));\nexports.CarbonDioxideSensor = CarbonDioxideSensor;\nService_1.Service.CarbonDioxideSensor = CarbonDioxideSensor;\n/**\n * Service \"Carbon Monoxide Sensor\"\n */\nvar CarbonMonoxideSensor = /** @class */ (function (_super) {\n    tslib_1.__extends(CarbonMonoxideSensor, _super);\n    function CarbonMonoxideSensor(displayName, subtype) {\n        var _this = _super.call(this, displayName, CarbonMonoxideSensor.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CarbonMonoxideDetected);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CarbonMonoxideLevel);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CarbonMonoxidePeakLevel);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusActive);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusLowBattery);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusTampered);\n        return _this;\n    }\n    CarbonMonoxideSensor.UUID = \"0000007F-0000-1000-8000-0026BB765291\";\n    return CarbonMonoxideSensor;\n}(Service_1.Service));\nexports.CarbonMonoxideSensor = CarbonMonoxideSensor;\nService_1.Service.CarbonMonoxideSensor = CarbonMonoxideSensor;\n/**\n * Service \"Cloud Relay\"\n */\nvar CloudRelay = /** @class */ (function (_super) {\n    tslib_1.__extends(CloudRelay, _super);\n    function CloudRelay(displayName, subtype) {\n        var _this = _super.call(this, displayName, CloudRelay.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.RelayControlPoint);\n        _this.addCharacteristic(Characteristic_1.Characteristic.RelayState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.RelayEnabled);\n        return _this;\n    }\n    CloudRelay.UUID = \"0000005A-0000-1000-8000-0026BB765291\";\n    return CloudRelay;\n}(Service_1.Service));\nexports.CloudRelay = CloudRelay;\n// noinspection JSDeprecatedSymbols\nService_1.Service.Relay = CloudRelay;\nService_1.Service.CloudRelay = CloudRelay;\n/**\n * Service \"Contact Sensor\"\n */\nvar ContactSensor = /** @class */ (function (_super) {\n    tslib_1.__extends(ContactSensor, _super);\n    function ContactSensor(displayName, subtype) {\n        var _this = _super.call(this, displayName, ContactSensor.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.ContactSensorState);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusActive);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusLowBattery);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusTampered);\n        return _this;\n    }\n    ContactSensor.UUID = \"00000080-0000-1000-8000-0026BB765291\";\n    return ContactSensor;\n}(Service_1.Service));\nexports.ContactSensor = ContactSensor;\nService_1.Service.ContactSensor = ContactSensor;\n/**\n * Service \"Data Stream Transport Management\"\n */\nvar DataStreamTransportManagement = /** @class */ (function (_super) {\n    tslib_1.__extends(DataStreamTransportManagement, _super);\n    function DataStreamTransportManagement(displayName, subtype) {\n        var _this = _super.call(this, displayName, DataStreamTransportManagement.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.SetupDataStreamTransport);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SupportedDataStreamTransportConfiguration);\n        _this.addCharacteristic(Characteristic_1.Characteristic.Version);\n        return _this;\n    }\n    DataStreamTransportManagement.UUID = \"00000129-0000-1000-8000-0026BB765291\";\n    return DataStreamTransportManagement;\n}(Service_1.Service));\nexports.DataStreamTransportManagement = DataStreamTransportManagement;\nService_1.Service.DataStreamTransportManagement = DataStreamTransportManagement;\n/**\n * Service \"Diagnostics\"\n */\nvar Diagnostics = /** @class */ (function (_super) {\n    tslib_1.__extends(Diagnostics, _super);\n    function Diagnostics(displayName, subtype) {\n        var _this = _super.call(this, displayName, Diagnostics.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.SupportedDiagnosticsSnapshot);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SelectedDiagnosticsModes);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SupportedDiagnosticsModes);\n        return _this;\n    }\n    Diagnostics.UUID = \"00000237-0000-1000-8000-0026BB765291\";\n    return Diagnostics;\n}(Service_1.Service));\nexports.Diagnostics = Diagnostics;\nService_1.Service.Diagnostics = Diagnostics;\n/**\n * Service \"Door\"\n */\nvar Door = /** @class */ (function (_super) {\n    tslib_1.__extends(Door, _super);\n    function Door(displayName, subtype) {\n        var _this = _super.call(this, displayName, Door.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentPosition);\n        _this.addCharacteristic(Characteristic_1.Characteristic.PositionState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TargetPosition);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ObstructionDetected);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.HoldPosition);\n        return _this;\n    }\n    Door.UUID = \"00000081-0000-1000-8000-0026BB765291\";\n    return Door;\n}(Service_1.Service));\nexports.Door = Door;\nService_1.Service.Door = Door;\n/**\n * Service \"Doorbell\"\n */\nvar Doorbell = /** @class */ (function (_super) {\n    tslib_1.__extends(Doorbell, _super);\n    function Doorbell(displayName, subtype) {\n        var _this = _super.call(this, displayName, Doorbell.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.ProgrammableSwitchEvent);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Brightness);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Mute);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.OperatingStateResponse);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Volume);\n        return _this;\n    }\n    Doorbell.UUID = \"00000121-0000-1000-8000-0026BB765291\";\n    return Doorbell;\n}(Service_1.Service));\nexports.Doorbell = Doorbell;\nService_1.Service.Doorbell = Doorbell;\n/**\n * Service \"Fan\"\n */\nvar Fan = /** @class */ (function (_super) {\n    tslib_1.__extends(Fan, _super);\n    function Fan(displayName, subtype) {\n        var _this = _super.call(this, displayName, Fan.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.On);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.RotationDirection);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.RotationSpeed);\n        return _this;\n    }\n    Fan.UUID = \"00000040-0000-1000-8000-0026BB765291\";\n    return Fan;\n}(Service_1.Service));\nexports.Fan = Fan;\nService_1.Service.Fan = Fan;\n/**\n * Service \"Fanv2\"\n */\nvar Fanv2 = /** @class */ (function (_super) {\n    tslib_1.__extends(Fanv2, _super);\n    function Fanv2(displayName, subtype) {\n        var _this = _super.call(this, displayName, Fanv2.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Active);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CurrentFanState);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.TargetFanState);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.LockPhysicalControls);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.RotationDirection);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.RotationSpeed);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SwingMode);\n        return _this;\n    }\n    Fanv2.UUID = \"000000B7-0000-1000-8000-0026BB765291\";\n    return Fanv2;\n}(Service_1.Service));\nexports.Fanv2 = Fanv2;\nService_1.Service.Fanv2 = Fanv2;\n/**\n * Service \"Faucet\"\n */\nvar Faucet = /** @class */ (function (_super) {\n    tslib_1.__extends(Faucet, _super);\n    function Faucet(displayName, subtype) {\n        var _this = _super.call(this, displayName, Faucet.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Active);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        return _this;\n    }\n    Faucet.UUID = \"000000D7-0000-1000-8000-0026BB765291\";\n    return Faucet;\n}(Service_1.Service));\nexports.Faucet = Faucet;\nService_1.Service.Faucet = Faucet;\n/**\n * Service \"Filter Maintenance\"\n */\nvar FilterMaintenance = /** @class */ (function (_super) {\n    tslib_1.__extends(FilterMaintenance, _super);\n    function FilterMaintenance(displayName, subtype) {\n        var _this = _super.call(this, displayName, FilterMaintenance.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.FilterChangeIndication);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.FilterLifeLevel);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ResetFilterIndication);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        return _this;\n    }\n    FilterMaintenance.UUID = \"000000BA-0000-1000-8000-0026BB765291\";\n    return FilterMaintenance;\n}(Service_1.Service));\nexports.FilterMaintenance = FilterMaintenance;\nService_1.Service.FilterMaintenance = FilterMaintenance;\n/**\n * Service \"Firmware Update\"\n */\nvar FirmwareUpdate = /** @class */ (function (_super) {\n    tslib_1.__extends(FirmwareUpdate, _super);\n    function FirmwareUpdate(displayName, subtype) {\n        var _this = _super.call(this, displayName, FirmwareUpdate.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.FirmwareUpdateReadiness);\n        _this.addCharacteristic(Characteristic_1.Characteristic.FirmwareUpdateStatus);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StagedFirmwareVersion);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SupportedFirmwareUpdateConfiguration);\n        return _this;\n    }\n    FirmwareUpdate.UUID = \"00000236-0000-1000-8000-0026BB765291\";\n    return FirmwareUpdate;\n}(Service_1.Service));\nexports.FirmwareUpdate = FirmwareUpdate;\nService_1.Service.FirmwareUpdate = FirmwareUpdate;\n/**\n * Service \"Garage Door Opener\"\n */\nvar GarageDoorOpener = /** @class */ (function (_super) {\n    tslib_1.__extends(GarageDoorOpener, _super);\n    function GarageDoorOpener(displayName, subtype) {\n        var _this = _super.call(this, displayName, GarageDoorOpener.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentDoorState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TargetDoorState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ObstructionDetected);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.LockCurrentState);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.LockTargetState);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        return _this;\n    }\n    GarageDoorOpener.UUID = \"00000041-0000-1000-8000-0026BB765291\";\n    return GarageDoorOpener;\n}(Service_1.Service));\nexports.GarageDoorOpener = GarageDoorOpener;\nService_1.Service.GarageDoorOpener = GarageDoorOpener;\n/**\n * Service \"Heater-Cooler\"\n */\nvar HeaterCooler = /** @class */ (function (_super) {\n    tslib_1.__extends(HeaterCooler, _super);\n    function HeaterCooler(displayName, subtype) {\n        var _this = _super.call(this, displayName, HeaterCooler.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Active);\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentHeaterCoolerState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TargetHeaterCoolerState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentTemperature);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.LockPhysicalControls);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.RotationSpeed);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SwingMode);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CoolingThresholdTemperature);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.HeatingThresholdTemperature);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.TemperatureDisplayUnits);\n        return _this;\n    }\n    HeaterCooler.UUID = \"000000BC-0000-1000-8000-0026BB765291\";\n    return HeaterCooler;\n}(Service_1.Service));\nexports.HeaterCooler = HeaterCooler;\nService_1.Service.HeaterCooler = HeaterCooler;\n/**\n * Service \"Humidifier-Dehumidifier\"\n */\nvar HumidifierDehumidifier = /** @class */ (function (_super) {\n    tslib_1.__extends(HumidifierDehumidifier, _super);\n    function HumidifierDehumidifier(displayName, subtype) {\n        var _this = _super.call(this, displayName, HumidifierDehumidifier.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Active);\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentHumidifierDehumidifierState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TargetHumidifierDehumidifierState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentRelativeHumidity);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.LockPhysicalControls);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.RelativeHumidityDehumidifierThreshold);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.RelativeHumidityHumidifierThreshold);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.RotationSpeed);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SwingMode);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.WaterLevel);\n        return _this;\n    }\n    HumidifierDehumidifier.UUID = \"000000BD-0000-1000-8000-0026BB765291\";\n    return HumidifierDehumidifier;\n}(Service_1.Service));\nexports.HumidifierDehumidifier = HumidifierDehumidifier;\nService_1.Service.HumidifierDehumidifier = HumidifierDehumidifier;\n/**\n * Service \"Humidity Sensor\"\n */\nvar HumiditySensor = /** @class */ (function (_super) {\n    tslib_1.__extends(HumiditySensor, _super);\n    function HumiditySensor(displayName, subtype) {\n        var _this = _super.call(this, displayName, HumiditySensor.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentRelativeHumidity);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusActive);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusLowBattery);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusTampered);\n        return _this;\n    }\n    HumiditySensor.UUID = \"00000082-0000-1000-8000-0026BB765291\";\n    return HumiditySensor;\n}(Service_1.Service));\nexports.HumiditySensor = HumiditySensor;\nService_1.Service.HumiditySensor = HumiditySensor;\n/**\n * Service \"Input Source\"\n */\nvar InputSource = /** @class */ (function (_super) {\n    tslib_1.__extends(InputSource, _super);\n    function InputSource(displayName, subtype) {\n        var _this = _super.call(this, displayName, InputSource.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.ConfiguredName);\n        _this.addCharacteristic(Characteristic_1.Characteristic.InputSourceType);\n        _this.addCharacteristic(Characteristic_1.Characteristic.IsConfigured);\n        if (!_this.testCharacteristic(Characteristic_1.Characteristic.Name)) { // workaround for Name characteristic collision in constructor\n            _this.addCharacteristic(Characteristic_1.Characteristic.Name).updateValue(\"Unnamed Service\");\n        }\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentVisibilityState);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Identifier);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.InputDeviceType);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.TargetVisibilityState);\n        return _this;\n    }\n    InputSource.UUID = \"000000D9-0000-1000-8000-0026BB765291\";\n    return InputSource;\n}(Service_1.Service));\nexports.InputSource = InputSource;\nService_1.Service.InputSource = InputSource;\n/**\n * Service \"Irrigation-System\"\n */\nvar IrrigationSystem = /** @class */ (function (_super) {\n    tslib_1.__extends(IrrigationSystem, _super);\n    function IrrigationSystem(displayName, subtype) {\n        var _this = _super.call(this, displayName, IrrigationSystem.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Active);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ProgramMode);\n        _this.addCharacteristic(Characteristic_1.Characteristic.InUse);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.RemainingDuration);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        return _this;\n    }\n    IrrigationSystem.UUID = \"000000CF-0000-1000-8000-0026BB765291\";\n    return IrrigationSystem;\n}(Service_1.Service));\nexports.IrrigationSystem = IrrigationSystem;\nService_1.Service.IrrigationSystem = IrrigationSystem;\n/**\n * Service \"Leak Sensor\"\n */\nvar LeakSensor = /** @class */ (function (_super) {\n    tslib_1.__extends(LeakSensor, _super);\n    function LeakSensor(displayName, subtype) {\n        var _this = _super.call(this, displayName, LeakSensor.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.LeakDetected);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusActive);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusLowBattery);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusTampered);\n        return _this;\n    }\n    LeakSensor.UUID = \"00000083-0000-1000-8000-0026BB765291\";\n    return LeakSensor;\n}(Service_1.Service));\nexports.LeakSensor = LeakSensor;\nService_1.Service.LeakSensor = LeakSensor;\n/**\n * Service \"Lightbulb\"\n */\nvar Lightbulb = /** @class */ (function (_super) {\n    tslib_1.__extends(Lightbulb, _super);\n    function Lightbulb(displayName, subtype) {\n        var _this = _super.call(this, displayName, Lightbulb.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.On);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Brightness);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CharacteristicValueActiveTransitionCount);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CharacteristicValueTransitionControl);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ColorTemperature);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Hue);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Saturation);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SupportedCharacteristicValueTransitionConfiguration);\n        return _this;\n    }\n    Lightbulb.UUID = \"00000043-0000-1000-8000-0026BB765291\";\n    return Lightbulb;\n}(Service_1.Service));\nexports.Lightbulb = Lightbulb;\nService_1.Service.Lightbulb = Lightbulb;\n/**\n * Service \"Light Sensor\"\n */\nvar LightSensor = /** @class */ (function (_super) {\n    tslib_1.__extends(LightSensor, _super);\n    function LightSensor(displayName, subtype) {\n        var _this = _super.call(this, displayName, LightSensor.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentAmbientLightLevel);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusActive);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusLowBattery);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusTampered);\n        return _this;\n    }\n    LightSensor.UUID = \"00000084-0000-1000-8000-0026BB765291\";\n    return LightSensor;\n}(Service_1.Service));\nexports.LightSensor = LightSensor;\nService_1.Service.LightSensor = LightSensor;\n/**\n * Service \"Lock Management\"\n */\nvar LockManagement = /** @class */ (function (_super) {\n    tslib_1.__extends(LockManagement, _super);\n    function LockManagement(displayName, subtype) {\n        var _this = _super.call(this, displayName, LockManagement.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.LockControlPoint);\n        _this.addCharacteristic(Characteristic_1.Characteristic.Version);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.AdministratorOnlyAccess);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.AudioFeedback);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CurrentDoorState);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.LockManagementAutoSecurityTimeout);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.LockLastKnownAction);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Logs);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.MotionDetected);\n        return _this;\n    }\n    LockManagement.UUID = \"00000044-0000-1000-8000-0026BB765291\";\n    return LockManagement;\n}(Service_1.Service));\nexports.LockManagement = LockManagement;\nService_1.Service.LockManagement = LockManagement;\n/**\n * Service \"Lock Mechanism\"\n */\nvar LockMechanism = /** @class */ (function (_super) {\n    tslib_1.__extends(LockMechanism, _super);\n    function LockMechanism(displayName, subtype) {\n        var _this = _super.call(this, displayName, LockMechanism.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.LockCurrentState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.LockTargetState);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        return _this;\n    }\n    LockMechanism.UUID = \"00000045-0000-1000-8000-0026BB765291\";\n    return LockMechanism;\n}(Service_1.Service));\nexports.LockMechanism = LockMechanism;\nService_1.Service.LockMechanism = LockMechanism;\n/**\n * Service \"Microphone\"\n */\nvar Microphone = /** @class */ (function (_super) {\n    tslib_1.__extends(Microphone, _super);\n    function Microphone(displayName, subtype) {\n        var _this = _super.call(this, displayName, Microphone.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Mute);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Volume);\n        return _this;\n    }\n    Microphone.UUID = \"00000112-0000-1000-8000-0026BB765291\";\n    return Microphone;\n}(Service_1.Service));\nexports.Microphone = Microphone;\nService_1.Service.Microphone = Microphone;\n/**\n * Service \"Motion Sensor\"\n */\nvar MotionSensor = /** @class */ (function (_super) {\n    tslib_1.__extends(MotionSensor, _super);\n    function MotionSensor(displayName, subtype) {\n        var _this = _super.call(this, displayName, MotionSensor.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.MotionDetected);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusActive);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusLowBattery);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusTampered);\n        return _this;\n    }\n    MotionSensor.UUID = \"00000085-0000-1000-8000-0026BB765291\";\n    return MotionSensor;\n}(Service_1.Service));\nexports.MotionSensor = MotionSensor;\nService_1.Service.MotionSensor = MotionSensor;\n/**\n * Service \"NFC Access\"\n * @since iOS 15\n */\nvar NFCAccess = /** @class */ (function (_super) {\n    tslib_1.__extends(NFCAccess, _super);\n    function NFCAccess(displayName, subtype) {\n        var _this = _super.call(this, displayName, NFCAccess.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.ConfigurationState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.NFCAccessControlPoint);\n        _this.addCharacteristic(Characteristic_1.Characteristic.NFCAccessSupportedConfiguration);\n        return _this;\n    }\n    NFCAccess.UUID = \"00000266-0000-1000-8000-0026BB765291\";\n    return NFCAccess;\n}(Service_1.Service));\nexports.NFCAccess = NFCAccess;\nService_1.Service.NFCAccess = NFCAccess;\n/**\n * Service \"Occupancy Sensor\"\n */\nvar OccupancySensor = /** @class */ (function (_super) {\n    tslib_1.__extends(OccupancySensor, _super);\n    function OccupancySensor(displayName, subtype) {\n        var _this = _super.call(this, displayName, OccupancySensor.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.OccupancyDetected);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusActive);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusLowBattery);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusTampered);\n        return _this;\n    }\n    OccupancySensor.UUID = \"00000086-0000-1000-8000-0026BB765291\";\n    return OccupancySensor;\n}(Service_1.Service));\nexports.OccupancySensor = OccupancySensor;\nService_1.Service.OccupancySensor = OccupancySensor;\n/**\n * Service \"Outlet\"\n * @since iOS 13\n */\nvar Outlet = /** @class */ (function (_super) {\n    tslib_1.__extends(Outlet, _super);\n    function Outlet(displayName, subtype) {\n        var _this = _super.call(this, displayName, Outlet.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.On);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.OutletInUse);\n        return _this;\n    }\n    Outlet.UUID = \"00000047-0000-1000-8000-0026BB765291\";\n    return Outlet;\n}(Service_1.Service));\nexports.Outlet = Outlet;\nService_1.Service.Outlet = Outlet;\n/**\n * Service \"Pairing\"\n */\nvar Pairing = /** @class */ (function (_super) {\n    tslib_1.__extends(Pairing, _super);\n    function Pairing(displayName, subtype) {\n        var _this = _super.call(this, displayName, Pairing.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.ListPairings);\n        _this.addCharacteristic(Characteristic_1.Characteristic.PairSetup);\n        _this.addCharacteristic(Characteristic_1.Characteristic.PairVerify);\n        _this.addCharacteristic(Characteristic_1.Characteristic.PairingFeatures);\n        return _this;\n    }\n    Pairing.UUID = \"00000055-0000-1000-8000-0026BB765291\";\n    return Pairing;\n}(Service_1.Service));\nexports.Pairing = Pairing;\nService_1.Service.Pairing = Pairing;\n/**\n * Service \"Power Management\"\n */\nvar PowerManagement = /** @class */ (function (_super) {\n    tslib_1.__extends(PowerManagement, _super);\n    function PowerManagement(displayName, subtype) {\n        var _this = _super.call(this, displayName, PowerManagement.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.WakeConfiguration);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SelectedSleepConfiguration);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SupportedSleepConfiguration);\n        return _this;\n    }\n    PowerManagement.UUID = \"00000221-0000-1000-8000-0026BB765291\";\n    return PowerManagement;\n}(Service_1.Service));\nexports.PowerManagement = PowerManagement;\nService_1.Service.PowerManagement = PowerManagement;\n/**\n * Service \"Protocol Information\"\n */\nvar ProtocolInformation = /** @class */ (function (_super) {\n    tslib_1.__extends(ProtocolInformation, _super);\n    function ProtocolInformation(displayName, subtype) {\n        var _this = _super.call(this, displayName, ProtocolInformation.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Version);\n        return _this;\n    }\n    ProtocolInformation.UUID = \"000000A2-0000-1000-8000-0026BB765291\";\n    return ProtocolInformation;\n}(Service_1.Service));\nexports.ProtocolInformation = ProtocolInformation;\nService_1.Service.ProtocolInformation = ProtocolInformation;\n/**\n * Service \"Security System\"\n */\nvar SecuritySystem = /** @class */ (function (_super) {\n    tslib_1.__extends(SecuritySystem, _super);\n    function SecuritySystem(displayName, subtype) {\n        var _this = _super.call(this, displayName, SecuritySystem.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.SecuritySystemCurrentState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SecuritySystemTargetState);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SecuritySystemAlarmType);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusTampered);\n        return _this;\n    }\n    SecuritySystem.UUID = \"0000007E-0000-1000-8000-0026BB765291\";\n    return SecuritySystem;\n}(Service_1.Service));\nexports.SecuritySystem = SecuritySystem;\nService_1.Service.SecuritySystem = SecuritySystem;\n/**\n * Service \"Service Label\"\n */\nvar ServiceLabel = /** @class */ (function (_super) {\n    tslib_1.__extends(ServiceLabel, _super);\n    function ServiceLabel(displayName, subtype) {\n        var _this = _super.call(this, displayName, ServiceLabel.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.ServiceLabelNamespace);\n        return _this;\n    }\n    ServiceLabel.UUID = \"000000CC-0000-1000-8000-0026BB765291\";\n    return ServiceLabel;\n}(Service_1.Service));\nexports.ServiceLabel = ServiceLabel;\nService_1.Service.ServiceLabel = ServiceLabel;\n/**\n * Service \"Siri\"\n */\nvar Siri = /** @class */ (function (_super) {\n    tslib_1.__extends(Siri, _super);\n    function Siri(displayName, subtype) {\n        var _this = _super.call(this, displayName, Siri.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.SiriInputType);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.MultifunctionButton);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SiriEnable);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SiriEngineVersion);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SiriLightOnUse);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SiriListening);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SiriTouchToUse);\n        return _this;\n    }\n    Siri.UUID = \"00000133-0000-1000-8000-0026BB765291\";\n    return Siri;\n}(Service_1.Service));\nexports.Siri = Siri;\nService_1.Service.Siri = Siri;\n/**\n * Service \"Siri Endpoint\"\n */\nvar SiriEndpoint = /** @class */ (function (_super) {\n    tslib_1.__extends(SiriEndpoint, _super);\n    function SiriEndpoint(displayName, subtype) {\n        var _this = _super.call(this, displayName, SiriEndpoint.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.SiriEndpointSessionStatus);\n        _this.addCharacteristic(Characteristic_1.Characteristic.Version);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ActiveIdentifier);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ManuallyDisabled);\n        return _this;\n    }\n    SiriEndpoint.UUID = \"00000253-0000-1000-8000-0026BB765291\";\n    return SiriEndpoint;\n}(Service_1.Service));\nexports.SiriEndpoint = SiriEndpoint;\nService_1.Service.SiriEndpoint = SiriEndpoint;\n/**\n * Service \"Slats\"\n */\nvar Slats = /** @class */ (function (_super) {\n    tslib_1.__extends(Slats, _super);\n    function Slats(displayName, subtype) {\n        var _this = _super.call(this, displayName, Slats.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentSlatState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SlatType);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SwingMode);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CurrentTiltAngle);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.TargetTiltAngle);\n        return _this;\n    }\n    Slats.UUID = \"000000B9-0000-1000-8000-0026BB765291\";\n    return Slats;\n}(Service_1.Service));\nexports.Slats = Slats;\n// noinspection JSDeprecatedSymbols\nService_1.Service.Slat = Slats;\nService_1.Service.Slats = Slats;\n/**\n * Service \"Smart Speaker\"\n */\nvar SmartSpeaker = /** @class */ (function (_super) {\n    tslib_1.__extends(SmartSpeaker, _super);\n    function SmartSpeaker(displayName, subtype) {\n        var _this = _super.call(this, displayName, SmartSpeaker.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentMediaState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TargetMediaState);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.AirPlayEnable);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ConfiguredName);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Mute);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Volume);\n        return _this;\n    }\n    SmartSpeaker.UUID = \"00000228-0000-1000-8000-0026BB765291\";\n    return SmartSpeaker;\n}(Service_1.Service));\nexports.SmartSpeaker = SmartSpeaker;\nService_1.Service.SmartSpeaker = SmartSpeaker;\n/**\n * Service \"Smoke Sensor\"\n */\nvar SmokeSensor = /** @class */ (function (_super) {\n    tslib_1.__extends(SmokeSensor, _super);\n    function SmokeSensor(displayName, subtype) {\n        var _this = _super.call(this, displayName, SmokeSensor.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.SmokeDetected);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusActive);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusLowBattery);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusTampered);\n        return _this;\n    }\n    SmokeSensor.UUID = \"00000087-0000-1000-8000-0026BB765291\";\n    return SmokeSensor;\n}(Service_1.Service));\nexports.SmokeSensor = SmokeSensor;\nService_1.Service.SmokeSensor = SmokeSensor;\n/**\n * Service \"Speaker\"\n * @since iOS 10\n */\nvar Speaker = /** @class */ (function (_super) {\n    tslib_1.__extends(Speaker, _super);\n    function Speaker(displayName, subtype) {\n        var _this = _super.call(this, displayName, Speaker.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Mute);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Active);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Volume);\n        return _this;\n    }\n    Speaker.UUID = \"00000113-0000-1000-8000-0026BB765291\";\n    return Speaker;\n}(Service_1.Service));\nexports.Speaker = Speaker;\nService_1.Service.Speaker = Speaker;\n/**\n * Service \"Stateful Programmable Switch\"\n */\nvar StatefulProgrammableSwitch = /** @class */ (function (_super) {\n    tslib_1.__extends(StatefulProgrammableSwitch, _super);\n    function StatefulProgrammableSwitch(displayName, subtype) {\n        var _this = _super.call(this, displayName, StatefulProgrammableSwitch.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.ProgrammableSwitchEvent);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ProgrammableSwitchOutputState);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        return _this;\n    }\n    StatefulProgrammableSwitch.UUID = \"00000088-0000-1000-8000-0026BB765291\";\n    return StatefulProgrammableSwitch;\n}(Service_1.Service));\nexports.StatefulProgrammableSwitch = StatefulProgrammableSwitch;\nService_1.Service.StatefulProgrammableSwitch = StatefulProgrammableSwitch;\n/**\n * Service \"Stateless Programmable Switch\"\n */\nvar StatelessProgrammableSwitch = /** @class */ (function (_super) {\n    tslib_1.__extends(StatelessProgrammableSwitch, _super);\n    function StatelessProgrammableSwitch(displayName, subtype) {\n        var _this = _super.call(this, displayName, StatelessProgrammableSwitch.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.ProgrammableSwitchEvent);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ServiceLabelIndex);\n        return _this;\n    }\n    StatelessProgrammableSwitch.UUID = \"00000089-0000-1000-8000-0026BB765291\";\n    return StatelessProgrammableSwitch;\n}(Service_1.Service));\nexports.StatelessProgrammableSwitch = StatelessProgrammableSwitch;\nService_1.Service.StatelessProgrammableSwitch = StatelessProgrammableSwitch;\n/**\n * Service \"Switch\"\n */\nvar Switch = /** @class */ (function (_super) {\n    tslib_1.__extends(Switch, _super);\n    function Switch(displayName, subtype) {\n        var _this = _super.call(this, displayName, Switch.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.On);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        return _this;\n    }\n    Switch.UUID = \"00000049-0000-1000-8000-0026BB765291\";\n    return Switch;\n}(Service_1.Service));\nexports.Switch = Switch;\nService_1.Service.Switch = Switch;\n/**\n * Service \"Tap Management\"\n */\nvar TapManagement = /** @class */ (function (_super) {\n    tslib_1.__extends(TapManagement, _super);\n    function TapManagement(displayName, subtype) {\n        var _this = _super.call(this, displayName, TapManagement.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Active);\n        _this.addCharacteristic(Characteristic_1.Characteristic.CryptoHash);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TapType);\n        _this.addCharacteristic(Characteristic_1.Characteristic.Token);\n        return _this;\n    }\n    TapManagement.UUID = \"0000022E-0000-1000-8000-0026BB765291\";\n    return TapManagement;\n}(Service_1.Service));\nexports.TapManagement = TapManagement;\nService_1.Service.TapManagement = TapManagement;\n/**\n * Service \"Target Control\"\n */\nvar TargetControl = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetControl, _super);\n    function TargetControl(displayName, subtype) {\n        var _this = _super.call(this, displayName, TargetControl.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Active);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ActiveIdentifier);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ButtonEvent);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        return _this;\n    }\n    TargetControl.UUID = \"00000125-0000-1000-8000-0026BB765291\";\n    return TargetControl;\n}(Service_1.Service));\nexports.TargetControl = TargetControl;\nService_1.Service.TargetControl = TargetControl;\n/**\n * Service \"Target Control Management\"\n */\nvar TargetControlManagement = /** @class */ (function (_super) {\n    tslib_1.__extends(TargetControlManagement, _super);\n    function TargetControlManagement(displayName, subtype) {\n        var _this = _super.call(this, displayName, TargetControlManagement.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.TargetControlSupportedConfiguration);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TargetControlList);\n        return _this;\n    }\n    TargetControlManagement.UUID = \"00000122-0000-1000-8000-0026BB765291\";\n    return TargetControlManagement;\n}(Service_1.Service));\nexports.TargetControlManagement = TargetControlManagement;\nService_1.Service.TargetControlManagement = TargetControlManagement;\n/**\n * Service \"Television\"\n */\nvar Television = /** @class */ (function (_super) {\n    tslib_1.__extends(Television, _super);\n    function Television(displayName, subtype) {\n        var _this = _super.call(this, displayName, Television.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Active);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ActiveIdentifier);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ConfiguredName);\n        _this.addCharacteristic(Characteristic_1.Characteristic.RemoteKey);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SleepDiscoveryMode);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Brightness);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ClosedCaptions);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.DisplayOrder);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CurrentMediaState);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.TargetMediaState);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.PictureMode);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.PowerModeSelection);\n        return _this;\n    }\n    Television.UUID = \"000000D8-0000-1000-8000-0026BB765291\";\n    return Television;\n}(Service_1.Service));\nexports.Television = Television;\nService_1.Service.Television = Television;\n/**\n * Service \"Television Speaker\"\n */\nvar TelevisionSpeaker = /** @class */ (function (_super) {\n    tslib_1.__extends(TelevisionSpeaker, _super);\n    function TelevisionSpeaker(displayName, subtype) {\n        var _this = _super.call(this, displayName, TelevisionSpeaker.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Mute);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Active);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Volume);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.VolumeControlType);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.VolumeSelector);\n        return _this;\n    }\n    TelevisionSpeaker.UUID = \"00000113-0000-1000-8000-0026BB765291\";\n    return TelevisionSpeaker;\n}(Service_1.Service));\nexports.TelevisionSpeaker = TelevisionSpeaker;\nService_1.Service.TelevisionSpeaker = TelevisionSpeaker;\n/**\n * Service \"Temperature Sensor\"\n */\nvar TemperatureSensor = /** @class */ (function (_super) {\n    tslib_1.__extends(TemperatureSensor, _super);\n    function TemperatureSensor(displayName, subtype) {\n        var _this = _super.call(this, displayName, TemperatureSensor.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentTemperature);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusActive);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusLowBattery);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusTampered);\n        return _this;\n    }\n    TemperatureSensor.UUID = \"0000008A-0000-1000-8000-0026BB765291\";\n    return TemperatureSensor;\n}(Service_1.Service));\nexports.TemperatureSensor = TemperatureSensor;\nService_1.Service.TemperatureSensor = TemperatureSensor;\n/**\n * Service \"Thermostat\"\n */\nvar Thermostat = /** @class */ (function (_super) {\n    tslib_1.__extends(Thermostat, _super);\n    function Thermostat(displayName, subtype) {\n        var _this = _super.call(this, displayName, Thermostat.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentHeatingCoolingState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TargetHeatingCoolingState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentTemperature);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TargetTemperature);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TemperatureDisplayUnits);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CurrentRelativeHumidity);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.TargetRelativeHumidity);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CoolingThresholdTemperature);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.HeatingThresholdTemperature);\n        return _this;\n    }\n    Thermostat.UUID = \"0000004A-0000-1000-8000-0026BB765291\";\n    return Thermostat;\n}(Service_1.Service));\nexports.Thermostat = Thermostat;\nService_1.Service.Thermostat = Thermostat;\n/**\n * Service \"Thread Transport\"\n */\nvar ThreadTransport = /** @class */ (function (_super) {\n    tslib_1.__extends(ThreadTransport, _super);\n    function ThreadTransport(displayName, subtype) {\n        var _this = _super.call(this, displayName, ThreadTransport.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentTransport);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ThreadControlPoint);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ThreadNodeCapabilities);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ThreadStatus);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CCAEnergyDetectThreshold);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CCASignalDetectThreshold);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.EventRetransmissionMaximum);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.EventTransmissionCounters);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.MACRetransmissionMaximum);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.MACTransmissionCounters);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ReceiverSensitivity);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ReceivedSignalStrengthIndication);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SignalToNoiseRatio);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ThreadOpenThreadVersion);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.TransmitPower);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.MaximumTransmitPower);\n        return _this;\n    }\n    ThreadTransport.UUID = \"00000701-0000-1000-8000-0026BB765291\";\n    return ThreadTransport;\n}(Service_1.Service));\nexports.ThreadTransport = ThreadTransport;\nService_1.Service.ThreadTransport = ThreadTransport;\n/**\n * Service \"Time Information\"\n * @deprecated Removed and not used anymore\n */\nvar TimeInformation = /** @class */ (function (_super) {\n    tslib_1.__extends(TimeInformation, _super);\n    function TimeInformation(displayName, subtype) {\n        var _this = _super.call(this, displayName, TimeInformation.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentTime);\n        _this.addCharacteristic(Characteristic_1.Characteristic.DayoftheWeek);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TimeUpdate);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        return _this;\n    }\n    TimeInformation.UUID = \"00000099-0000-1000-8000-0026BB765291\";\n    return TimeInformation;\n}(Service_1.Service));\nexports.TimeInformation = TimeInformation;\n// noinspection JSDeprecatedSymbols\nService_1.Service.TimeInformation = TimeInformation;\n/**\n * Service \"Transfer Transport Management\"\n */\nvar TransferTransportManagement = /** @class */ (function (_super) {\n    tslib_1.__extends(TransferTransportManagement, _super);\n    function TransferTransportManagement(displayName, subtype) {\n        var _this = _super.call(this, displayName, TransferTransportManagement.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.SupportedTransferTransportConfiguration);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SetupTransferTransport);\n        return _this;\n    }\n    TransferTransportManagement.UUID = \"00000203-0000-1000-8000-0026BB765291\";\n    return TransferTransportManagement;\n}(Service_1.Service));\nexports.TransferTransportManagement = TransferTransportManagement;\nService_1.Service.TransferTransportManagement = TransferTransportManagement;\n/**\n * Service \"Tunnel\"\n */\nvar Tunnel = /** @class */ (function (_super) {\n    tslib_1.__extends(Tunnel, _super);\n    function Tunnel(displayName, subtype) {\n        var _this = _super.call(this, displayName, Tunnel.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.AccessoryIdentifier);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TunnelConnectionTimeout);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TunneledAccessoryAdvertising);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TunneledAccessoryConnected);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TunneledAccessoryStateNumber);\n        return _this;\n    }\n    Tunnel.UUID = \"00000056-0000-1000-8000-0026BB765291\";\n    return Tunnel;\n}(Service_1.Service));\nexports.Tunnel = Tunnel;\n// noinspection JSDeprecatedSymbols\nService_1.Service.TunneledBTLEAccessoryService = Tunnel;\nService_1.Service.Tunnel = Tunnel;\n/**\n * Service \"Valve\"\n */\nvar Valve = /** @class */ (function (_super) {\n    tslib_1.__extends(Valve, _super);\n    function Valve(displayName, subtype) {\n        var _this = _super.call(this, displayName, Valve.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.Active);\n        _this.addCharacteristic(Characteristic_1.Characteristic.InUse);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ValveType);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.IsConfigured);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.RemainingDuration);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ServiceLabelIndex);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.SetDuration);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.StatusFault);\n        return _this;\n    }\n    Valve.UUID = \"000000D0-0000-1000-8000-0026BB765291\";\n    return Valve;\n}(Service_1.Service));\nexports.Valve = Valve;\nService_1.Service.Valve = Valve;\n/**\n * Service \"Wi-Fi Router\"\n */\nvar WiFiRouter = /** @class */ (function (_super) {\n    tslib_1.__extends(WiFiRouter, _super);\n    function WiFiRouter(displayName, subtype) {\n        var _this = _super.call(this, displayName, WiFiRouter.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.ConfiguredName);\n        _this.addCharacteristic(Characteristic_1.Characteristic.ManagedNetworkEnable);\n        _this.addCharacteristic(Characteristic_1.Characteristic.NetworkAccessViolationControl);\n        _this.addCharacteristic(Characteristic_1.Characteristic.NetworkClientProfileControl);\n        _this.addCharacteristic(Characteristic_1.Characteristic.NetworkClientStatusControl);\n        _this.addCharacteristic(Characteristic_1.Characteristic.RouterStatus);\n        _this.addCharacteristic(Characteristic_1.Characteristic.SupportedRouterConfiguration);\n        _this.addCharacteristic(Characteristic_1.Characteristic.WANConfigurationList);\n        _this.addCharacteristic(Characteristic_1.Characteristic.WANStatusList);\n        return _this;\n    }\n    WiFiRouter.UUID = \"0000020A-0000-1000-8000-0026BB765291\";\n    return WiFiRouter;\n}(Service_1.Service));\nexports.WiFiRouter = WiFiRouter;\nService_1.Service.WiFiRouter = WiFiRouter;\n/**\n * Service \"Wi-Fi Satellite\"\n */\nvar WiFiSatellite = /** @class */ (function (_super) {\n    tslib_1.__extends(WiFiSatellite, _super);\n    function WiFiSatellite(displayName, subtype) {\n        var _this = _super.call(this, displayName, WiFiSatellite.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.WiFiSatelliteStatus);\n        return _this;\n    }\n    WiFiSatellite.UUID = \"0000020F-0000-1000-8000-0026BB765291\";\n    return WiFiSatellite;\n}(Service_1.Service));\nexports.WiFiSatellite = WiFiSatellite;\nService_1.Service.WiFiSatellite = WiFiSatellite;\n/**\n * Service \"Wi-Fi Transport\"\n */\nvar WiFiTransport = /** @class */ (function (_super) {\n    tslib_1.__extends(WiFiTransport, _super);\n    function WiFiTransport(displayName, subtype) {\n        var _this = _super.call(this, displayName, WiFiTransport.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentTransport);\n        _this.addCharacteristic(Characteristic_1.Characteristic.WiFiCapabilities);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.WiFiConfigurationControl);\n        return _this;\n    }\n    WiFiTransport.UUID = \"0000022A-0000-1000-8000-0026BB765291\";\n    return WiFiTransport;\n}(Service_1.Service));\nexports.WiFiTransport = WiFiTransport;\nService_1.Service.WiFiTransport = WiFiTransport;\n/**\n * Service \"Window\"\n */\nvar Window = /** @class */ (function (_super) {\n    tslib_1.__extends(Window, _super);\n    function Window(displayName, subtype) {\n        var _this = _super.call(this, displayName, Window.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentPosition);\n        _this.addCharacteristic(Characteristic_1.Characteristic.PositionState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TargetPosition);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ObstructionDetected);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.HoldPosition);\n        return _this;\n    }\n    Window.UUID = \"0000008B-0000-1000-8000-0026BB765291\";\n    return Window;\n}(Service_1.Service));\nexports.Window = Window;\nService_1.Service.Window = Window;\n/**\n * Service \"Window Covering\"\n */\nvar WindowCovering = /** @class */ (function (_super) {\n    tslib_1.__extends(WindowCovering, _super);\n    function WindowCovering(displayName, subtype) {\n        var _this = _super.call(this, displayName, WindowCovering.UUID, subtype) || this;\n        // Required Characteristics\n        _this.addCharacteristic(Characteristic_1.Characteristic.CurrentPosition);\n        _this.addCharacteristic(Characteristic_1.Characteristic.PositionState);\n        _this.addCharacteristic(Characteristic_1.Characteristic.TargetPosition);\n        // Optional Characteristics\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CurrentHorizontalTiltAngle);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.TargetHorizontalTiltAngle);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.Name);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.ObstructionDetected);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.HoldPosition);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.CurrentVerticalTiltAngle);\n        _this.addOptionalCharacteristic(Characteristic_1.Characteristic.TargetVerticalTiltAngle);\n        return _this;\n    }\n    WindowCovering.UUID = \"0000008C-0000-1000-8000-0026BB765291\";\n    return WindowCovering;\n}(Service_1.Service));\nexports.WindowCovering = WindowCovering;\nService_1.Service.WindowCovering = WindowCovering;\n//# sourceMappingURL=ServiceDefinitions.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\ntslib_1.__exportStar(require(\"./CharacteristicDefinitions\"), exports);\ntslib_1.__exportStar(require(\"./ServiceDefinitions\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AccessoryInfo = exports.PermissionTypes = void 0;\nvar tslib_1 = require(\"tslib\");\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar crypto_1 = tslib_1.__importDefault(require(\"crypto\"));\nvar tweetnacl_1 = tslib_1.__importDefault(require(\"tweetnacl\"));\nvar util_1 = tslib_1.__importDefault(require(\"util\"));\nvar eventedhttp_1 = require(\"../util/eventedhttp\");\nvar HAPStorage_1 = require(\"./HAPStorage\");\nfunction getVersion() {\n    // eslint-disable-next-line @typescript-eslint/no-var-requires\n    var packageJson = require(\"../../../package.json\");\n    return packageJson.version;\n}\n/**\n * @group Model\n */\nvar PermissionTypes;\n(function (PermissionTypes) {\n    // noinspection JSUnusedGlobalSymbols\n    PermissionTypes[PermissionTypes[\"USER\"] = 0] = \"USER\";\n    PermissionTypes[PermissionTypes[\"ADMIN\"] = 1] = \"ADMIN\";\n})(PermissionTypes || (exports.PermissionTypes = PermissionTypes = {}));\n/**\n * AccessoryInfo is a model class containing a subset of Accessory data relevant to the internal HAP server,\n * such as encryption keys and username. It is persisted to disk.\n * @group Model\n */\nvar AccessoryInfo = /** @class */ (function () {\n    function AccessoryInfo(username) {\n        var _this = this;\n        this.configVersion = 1;\n        this.lastFirmwareVersion = \"\";\n        // Returns a boolean indicating whether this accessory has been paired with a client.\n        this.paired = function () {\n            return Object.keys(_this.pairedClients).length > 0; // if we have any paired clients, we're paired.\n        };\n        this.username = username;\n        this.displayName = \"\";\n        this.model = \"\";\n        this.category = 1 /* Categories.OTHER */;\n        this.pincode = \"\";\n        this.signSk = Buffer.alloc(0);\n        this.signPk = Buffer.alloc(0);\n        this.pairedClients = {};\n        this.pairedAdminClients = 0;\n        this.configHash = \"\";\n        this.setupID = \"\";\n    }\n    /**\n     * Add a paired client to memory.\n     * @param {HAPUsername} username\n     * @param {Buffer} publicKey\n     * @param {PermissionTypes} permission\n     */\n    AccessoryInfo.prototype.addPairedClient = function (username, publicKey, permission) {\n        this.pairedClients[username] = {\n            username: username,\n            publicKey: publicKey,\n            permission: permission,\n        };\n        if (permission === 1 /* PermissionTypes.ADMIN */) {\n            this.pairedAdminClients++;\n        }\n    };\n    AccessoryInfo.prototype.updatePermission = function (username, permission) {\n        var pairingInformation = this.pairedClients[username];\n        if (pairingInformation) {\n            var oldPermission = pairingInformation.permission;\n            pairingInformation.permission = permission;\n            if (oldPermission === 1 /* PermissionTypes.ADMIN */ && permission !== 1 /* PermissionTypes.ADMIN */) {\n                this.pairedAdminClients--;\n            }\n            else if (oldPermission !== 1 /* PermissionTypes.ADMIN */ && permission === 1 /* PermissionTypes.ADMIN */) {\n                this.pairedAdminClients++;\n            }\n        }\n    };\n    AccessoryInfo.prototype.listPairings = function () {\n        var e_1, _a;\n        var array = [];\n        try {\n            for (var _b = tslib_1.__values(Object.values(this.pairedClients)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var pairingInformation = _c.value;\n                array.push(pairingInformation);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return array;\n    };\n    /**\n     * Remove a paired client from memory.\n     * @param connection - the session of the connection initiated the removal of the pairing\n     * @param {string} username\n     */\n    AccessoryInfo.prototype.removePairedClient = function (connection, username) {\n        var e_2, _a;\n        this._removePairedClient0(connection, username);\n        if (this.pairedAdminClients === 0) { // if we don't have any admin clients left paired it is required to kill all normal clients\n            try {\n                for (var _b = tslib_1.__values(Object.keys(this.pairedClients)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var username0 = _c.value;\n                    this._removePairedClient0(connection, username0);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n    };\n    AccessoryInfo.prototype._removePairedClient0 = function (connection, username) {\n        if (this.pairedClients[username] && this.pairedClients[username].permission === 1 /* PermissionTypes.ADMIN */) {\n            this.pairedAdminClients--;\n        }\n        delete this.pairedClients[username];\n        eventedhttp_1.EventedHTTPServer.destroyExistingConnectionsAfterUnpair(connection, username);\n    };\n    /**\n     * Check if username is paired\n     * @param username\n     */\n    AccessoryInfo.prototype.isPaired = function (username) {\n        return !!this.pairedClients[username];\n    };\n    AccessoryInfo.prototype.hasAdminPermissions = function (username) {\n        if (!username) {\n            return false;\n        }\n        var pairingInformation = this.pairedClients[username];\n        return !!pairingInformation && pairingInformation.permission === 1 /* PermissionTypes.ADMIN */;\n    };\n    // Gets the public key for a paired client as a Buffer, or falsy value if not paired.\n    AccessoryInfo.prototype.getClientPublicKey = function (username) {\n        var pairingInformation = this.pairedClients[username];\n        if (pairingInformation) {\n            return pairingInformation.publicKey;\n        }\n        else {\n            return undefined;\n        }\n    };\n    /**\n     * Checks based on the current accessory configuration if the current configuration number needs to be incremented.\n     * Additionally, if desired, it checks if the firmware version was incremented (aka the HAP-NodeJS) version did grow.\n     *\n     * @param configuration - The current accessory configuration.\n     * @param checkFirmwareIncrement\n     * @returns True if the current configuration number was incremented and thus a new TXT must be advertised.\n     */\n    AccessoryInfo.prototype.checkForCurrentConfigurationNumberIncrement = function (configuration, checkFirmwareIncrement) {\n        var shasum = crypto_1.default.createHash(\"sha1\");\n        shasum.update(JSON.stringify(configuration));\n        var configHash = shasum.digest(\"hex\");\n        var changed = false;\n        if (configHash !== this.configHash) {\n            this.configVersion++;\n            this.configHash = configHash;\n            this.ensureConfigVersionBounds();\n            changed = true;\n        }\n        if (checkFirmwareIncrement) {\n            var version = getVersion();\n            if (this.lastFirmwareVersion !== version) {\n                // we only check if it is different and not only if it is incremented\n                // HomeKit spec prohibits firmware downgrades, but with hap-nodejs it's possible lol\n                this.lastFirmwareVersion = version;\n                changed = true;\n            }\n        }\n        if (changed) {\n            this.save();\n        }\n        return changed;\n    };\n    AccessoryInfo.prototype.getConfigVersion = function () {\n        return this.configVersion;\n    };\n    AccessoryInfo.prototype.ensureConfigVersionBounds = function () {\n        // current configuration number must be in the range of 1-65535 and wrap to 1 when it overflows\n        this.configVersion = this.configVersion % (0xFFFF + 1);\n        if (this.configVersion === 0) {\n            this.configVersion = 1;\n        }\n    };\n    AccessoryInfo.prototype.save = function () {\n        var e_3, _a;\n        var saved = {\n            displayName: this.displayName,\n            category: this.category,\n            pincode: this.pincode,\n            signSk: this.signSk.toString(\"hex\"),\n            signPk: this.signPk.toString(\"hex\"),\n            pairedClients: {},\n            // moving permissions into an extra object, so there is nothing to migrate from old files.\n            // if the legacy node-persist storage should be upgraded some time, it would be reasonable to combine the storage\n            // of public keys (pairedClients object) and permissions.\n            pairedClientsPermission: {},\n            configVersion: this.configVersion,\n            configHash: this.configHash,\n            setupID: this.setupID,\n            lastFirmwareVersion: this.lastFirmwareVersion,\n        };\n        try {\n            for (var _b = tslib_1.__values(Object.entries(this.pairedClients)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = tslib_1.__read(_c.value, 2), username = _d[0], pairingInformation = _d[1];\n                // @ts-expect-error: missing typing, object instead of Record\n                saved.pairedClients[username] = pairingInformation.publicKey.toString(\"hex\");\n                // @ts-expect-error: missing typing, object instead of Record\n                saved.pairedClientsPermission[username] = pairingInformation.permission;\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        var key = AccessoryInfo.persistKey(this.username);\n        HAPStorage_1.HAPStorage.storage().setItemSync(key, saved);\n    };\n    // Gets a key for storing this AccessoryInfo in the filesystem, like \"AccessoryInfo.CC223DE3CEF3.json\"\n    AccessoryInfo.persistKey = function (username) {\n        return util_1.default.format(\"AccessoryInfo.%s.json\", username.replace(/:/g, \"\").toUpperCase());\n    };\n    AccessoryInfo.create = function (username) {\n        AccessoryInfo.assertValidUsername(username);\n        var accessoryInfo = new AccessoryInfo(username);\n        accessoryInfo.lastFirmwareVersion = getVersion();\n        // Create a new unique key pair for this accessory.\n        var keyPair = tweetnacl_1.default.sign.keyPair();\n        accessoryInfo.signSk = Buffer.from(keyPair.secretKey);\n        accessoryInfo.signPk = Buffer.from(keyPair.publicKey);\n        return accessoryInfo;\n    };\n    AccessoryInfo.load = function (username) {\n        var e_4, _a;\n        AccessoryInfo.assertValidUsername(username);\n        var key = AccessoryInfo.persistKey(username);\n        var saved = HAPStorage_1.HAPStorage.storage().getItem(key);\n        if (saved) {\n            var info = new AccessoryInfo(username);\n            info.displayName = saved.displayName || \"\";\n            info.category = saved.category || \"\";\n            info.pincode = saved.pincode || \"\";\n            info.signSk = Buffer.from(saved.signSk || \"\", \"hex\");\n            info.signPk = Buffer.from(saved.signPk || \"\", \"hex\");\n            info.pairedClients = {};\n            try {\n                for (var _b = tslib_1.__values(Object.keys(saved.pairedClients || {})), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var username_1 = _c.value;\n                    var publicKey = saved.pairedClients[username_1];\n                    var permission = saved.pairedClientsPermission ? saved.pairedClientsPermission[username_1] : undefined;\n                    if (permission === undefined) {\n                        permission = 1 /* PermissionTypes.ADMIN */;\n                    } // defaulting to admin permissions is the only suitable solution, there is no way to recover permissions\n                    info.pairedClients[username_1] = {\n                        username: username_1,\n                        publicKey: Buffer.from(publicKey, \"hex\"),\n                        permission: permission,\n                    };\n                    if (permission === 1 /* PermissionTypes.ADMIN */) {\n                        info.pairedAdminClients++;\n                    }\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n            info.configVersion = saved.configVersion || 1;\n            info.configHash = saved.configHash || \"\";\n            info.setupID = saved.setupID || \"\";\n            info.lastFirmwareVersion = saved.lastFirmwareVersion || getVersion();\n            info.ensureConfigVersionBounds();\n            return info;\n        }\n        else {\n            return null;\n        }\n    };\n    AccessoryInfo.remove = function (username) {\n        var key = AccessoryInfo.persistKey(username);\n        HAPStorage_1.HAPStorage.storage().removeItemSync(key);\n    };\n    AccessoryInfo.assertValidUsername = function (username) {\n        assert_1.default.ok(AccessoryInfo.deviceIdPattern.test(username), \"The supplied username (\" + username + \") is not valid \" +\n            \"(expected a format like 'XX:XX:XX:XX:XX:XX' with XX being a valid hexadecimal string). \" +\n            \"Note that, if you had this accessory already paired with the invalid username, you will need to repair \" +\n            \"the accessory and reconfigure your services in the Home app. \" +\n            \"Using an invalid username will lead to unexpected behaviour.\");\n    };\n    AccessoryInfo.deviceIdPattern = /^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/;\n    return AccessoryInfo;\n}());\nexports.AccessoryInfo = AccessoryInfo;\n//# sourceMappingURL=AccessoryInfo.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControllerStorage = void 0;\nvar tslib_1 = require(\"tslib\");\nvar util_1 = tslib_1.__importDefault(require(\"util\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar HAPStorage_1 = require(\"./HAPStorage\");\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:ControllerStorage\");\n/**\n * @group Model\n */\nvar ControllerStorage = /** @class */ (function () {\n    function ControllerStorage(accessory) {\n        this.initialized = false;\n        this.fileCreated = false;\n        this.purgeUnidentifiedAccessoryData = true;\n        // ---------------------------------------------------------\n        this.trackedControllers = []; // used to track controllers before data was loaded from disk\n        this.controllerData = {};\n        this.accessoryUUID = accessory.UUID;\n    }\n    ControllerStorage.prototype.enqueueSaveRequest = function (timeout) {\n        var _this = this;\n        var _a;\n        if (timeout === void 0) { timeout = 0; }\n        if (this.parent) {\n            this.parent.enqueueSaveRequest(timeout);\n            return;\n        }\n        var plannedTime = Date.now() + timeout;\n        if (this.queuedSaveTimeout) {\n            if (plannedTime <= ((_a = this.queuedSaveTime) !== null && _a !== void 0 ? _a : 0)) {\n                return;\n            }\n            clearTimeout(this.queuedSaveTimeout);\n        }\n        this.queuedSaveTimeout = setTimeout(function () {\n            _this.queuedSaveTimeout = _this.queuedSaveTime = undefined;\n            _this.save();\n        }, timeout).unref();\n        this.queuedSaveTime = Date.now() + timeout;\n    };\n    /**\n     * Links a bridged accessory to the ControllerStorage of the bridge accessory.\n     *\n     * @param accessory\n     */\n    ControllerStorage.prototype.linkAccessory = function (accessory) {\n        if (!this.linkedAccessories) {\n            this.linkedAccessories = [];\n        }\n        var storage = accessory.controllerStorage;\n        this.linkedAccessories.push(storage);\n        storage.parent = this;\n        var saved = this.restoredAccessories && this.restoredAccessories[accessory.UUID];\n        if (this.initialized) {\n            storage.init(saved);\n        }\n    };\n    ControllerStorage.prototype.trackController = function (controller) {\n        controller.setupStateChangeDelegate(this.handleStateChange.bind(this, controller)); // setup delegate\n        if (!this.initialized) { // track controller if data isn't loaded yet\n            this.trackedControllers.push(controller);\n        }\n        else {\n            this.restoreController(controller);\n        }\n    };\n    ControllerStorage.prototype.untrackController = function (controller) {\n        var index = this.trackedControllers.indexOf(controller);\n        if (index !== -1) { // remove from trackedControllers if storage wasn't initialized yet\n            this.trackedControllers.splice(index, 1);\n        }\n        controller.setupStateChangeDelegate(undefined); // remove association with this storage object\n        this.purgeControllerData(controller);\n    };\n    ControllerStorage.prototype.purgeControllerData = function (controller) {\n        delete this.controllerData[controller.controllerId()];\n        if (this.initialized) {\n            this.enqueueSaveRequest(100);\n        }\n    };\n    ControllerStorage.prototype.handleStateChange = function (controller) {\n        var id = controller.controllerId();\n        var serialized = controller.serialize();\n        if (!serialized) { // can be undefined when controller wishes to delete data\n            delete this.controllerData[id];\n        }\n        else {\n            var controllerData = this.controllerData[id];\n            if (!controllerData) {\n                this.controllerData[id] = {\n                    data: serialized,\n                };\n            }\n            else {\n                controllerData.data = serialized;\n            }\n        }\n        if (this.initialized) { // only save if data was loaded\n            // run save data \"async\", as handleStateChange call will probably always be caused by a http request\n            // this should improve our response time\n            this.enqueueSaveRequest(100);\n        }\n    };\n    ControllerStorage.prototype.restoreController = function (controller) {\n        if (!this.initialized) {\n            throw new Error(\"Illegal state. Controller data wasn't loaded yet!\");\n        }\n        var controllerData = this.controllerData[controller.controllerId()];\n        if (controllerData) {\n            try {\n                controller.deserialize(controllerData.data);\n            }\n            catch (error) {\n                console.warn(\"Could not initialize controller of type '\".concat(controller.controllerId(), \"' from data stored on disk. Resetting to default: \").concat(error.stack));\n                controller.handleFactoryReset();\n            }\n            controllerData.purgeOnNextLoad = undefined;\n        }\n    };\n    /**\n     * Called when this particular Storage object is feed with data loaded from disk.\n     * This method is only called once.\n     *\n     * @param data - array of {@link StoredControllerData}. undefined if nothing was stored on disk for this particular storage object\n     */\n    ControllerStorage.prototype.init = function (data) {\n        var _this = this;\n        if (this.initialized) {\n            throw new Error(\"ControllerStorage for accessory \".concat(this.accessoryUUID, \" was already initialized!\"));\n        }\n        this.initialized = true;\n        // storing data into our local controllerData Record\n        data && data.forEach(function (saved) { return _this.controllerData[saved.type] = saved.controllerData; });\n        var restoredControllers = [];\n        this.trackedControllers.forEach(function (controller) {\n            _this.restoreController(controller);\n            restoredControllers.push(controller.controllerId());\n        });\n        this.trackedControllers.splice(0, this.trackedControllers.length); // clear tracking list\n        var purgedData = false;\n        Object.entries(this.controllerData).forEach(function (_a) {\n            var _b = tslib_1.__read(_a, 2), id = _b[0], data = _b[1];\n            if (data.purgeOnNextLoad) {\n                delete _this.controllerData[id];\n                purgedData = true;\n                return;\n            }\n            if (!restoredControllers.includes(id)) {\n                data.purgeOnNextLoad = true;\n            }\n        });\n        if (purgedData) {\n            this.enqueueSaveRequest(500);\n        }\n    };\n    ControllerStorage.prototype.load = function (username) {\n        if (this.username) {\n            throw new Error(\"ControllerStorage was already loaded!\");\n        }\n        this.username = username;\n        var key = ControllerStorage.persistKey(username);\n        var saved = HAPStorage_1.HAPStorage.storage().getItem(key);\n        var ownData;\n        if (saved) {\n            this.fileCreated = true;\n            ownData = saved.accessories[this.accessoryUUID];\n            delete saved.accessories[this.accessoryUUID];\n        }\n        this.init(ownData);\n        if (this.linkedAccessories) {\n            this.linkedAccessories.forEach(function (linkedStorage) {\n                var savedData = saved && saved.accessories[linkedStorage.accessoryUUID];\n                linkedStorage.init(savedData);\n                if (saved) {\n                    delete saved.accessories[linkedStorage.accessoryUUID];\n                }\n            });\n        }\n        if (saved && Object.keys(saved.accessories).length > 0) {\n            if (!this.purgeUnidentifiedAccessoryData) {\n                this.restoredAccessories = saved.accessories; // save data for controllers which aren't linked yet\n            }\n            else {\n                debug(\"Purging unidentified controller data for bridge %s\", username);\n            }\n        }\n    };\n    ControllerStorage.prototype.save = function () {\n        var _a;\n        if (this.parent) {\n            this.parent.save();\n            return;\n        }\n        if (!this.initialized) {\n            throw new Error(\"ControllerStorage has not yet been loaded!\");\n        }\n        if (!this.username) {\n            throw new Error(\"Cannot save controllerData for a storage without a username!\");\n        }\n        var accessories = (_a = {},\n            _a[this.accessoryUUID] = this.controllerData,\n            _a);\n        if (this.linkedAccessories) { // grab data from all linked storage objects\n            this.linkedAccessories.forEach(function (accessory) { return accessories[accessory.accessoryUUID] = accessory.controllerData; });\n        }\n        // TODO removed accessories won't ever be deleted?\n        var accessoryData = this.restoredAccessories || {};\n        Object.entries(accessories).forEach(function (_a) {\n            var _b = tslib_1.__read(_a, 2), uuid = _b[0], controllerData = _b[1];\n            var entries = Object.entries(controllerData);\n            if (entries.length > 0) {\n                accessoryData[uuid] = entries.map(function (_a) {\n                    var _b = tslib_1.__read(_a, 2), id = _b[0], data = _b[1];\n                    return ({\n                        type: id,\n                        controllerData: data,\n                    });\n                });\n            }\n        });\n        var key = ControllerStorage.persistKey(this.username);\n        if (Object.keys(accessoryData).length > 0) {\n            var saved = {\n                accessories: accessoryData,\n            };\n            this.fileCreated = true;\n            HAPStorage_1.HAPStorage.storage().setItemSync(key, saved);\n        }\n        else if (this.fileCreated) {\n            this.fileCreated = false;\n            HAPStorage_1.HAPStorage.storage().removeItemSync(key);\n        }\n    };\n    ControllerStorage.persistKey = function (username) {\n        return util_1.default.format(\"ControllerStorage.%s.json\", username.replace(/:/g, \"\").toUpperCase());\n    };\n    ControllerStorage.remove = function (username) {\n        var key = ControllerStorage.persistKey(username);\n        HAPStorage_1.HAPStorage.storage().removeItemSync(key);\n    };\n    return ControllerStorage;\n}());\nexports.ControllerStorage = ControllerStorage;\n//# sourceMappingURL=ControllerStorage.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HAPStorage = void 0;\nvar tslib_1 = require(\"tslib\");\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nvar node_persist_1 = tslib_1.__importDefault(require(\"node-persist\"));\n/**\n * @group Model\n */\nvar HAPStorage = /** @class */ (function () {\n    function HAPStorage() {\n    }\n    HAPStorage.storage = function () {\n        return this.INSTANCE.storage();\n    };\n    HAPStorage.setCustomStoragePath = function (path) {\n        this.INSTANCE.setCustomStoragePath(path);\n    };\n    HAPStorage.prototype.storage = function () {\n        if (!this.localStore) {\n            this.localStore = node_persist_1.default.create();\n            if (this.customStoragePath) {\n                this.localStore.initSync({\n                    dir: this.customStoragePath,\n                });\n            }\n            else {\n                this.localStore.initSync();\n            }\n        }\n        return this.localStore;\n    };\n    HAPStorage.prototype.setCustomStoragePath = function (path) {\n        if (this.localStore) {\n            throw new Error(\"Cannot change storage path after it has already been initialized!\");\n        }\n        this.customStoragePath = path;\n    };\n    HAPStorage.INSTANCE = new HAPStorage();\n    return HAPStorage;\n}());\nexports.HAPStorage = HAPStorage;\n//# sourceMappingURL=HAPStorage.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IdentifierCache = void 0;\nvar tslib_1 = require(\"tslib\");\nvar crypto_1 = tslib_1.__importDefault(require(\"crypto\"));\nvar util_1 = tslib_1.__importDefault(require(\"util\"));\nvar HAPStorage_1 = require(\"./HAPStorage\");\n/**\n * IdentifierCache is a model class that manages a system of associating HAP \"Accessory IDs\" and \"Instance IDs\"\n * with other values that don't usually change. HomeKit Clients use Accessory/Instance IDs as a primary key of\n * sorts, so the IDs need to remain \"stable\". For instance, if you create a HomeKit \"Scene\" called \"Leaving Home\"\n * that sets your Alarm System's \"Target Alarm State\" Characteristic to \"Arm Away\", that Scene will store whatever\n * \"Instance ID\" it was given for the \"Target Alarm State\" Characteristic. If the ID changes later on this server,\n * the scene will stop working.\n * @group Model\n */\nvar IdentifierCache = /** @class */ (function () {\n    function IdentifierCache(username) {\n        this.username = username;\n        this._cache = {}; // cache[key:string] = id:number\n        this._usedCache = null; // for usage tracking and expiring old keys\n        this._savedCacheHash = \"\"; // for checking if new cache need to be saved\n    }\n    IdentifierCache.prototype.startTrackingUsage = function () {\n        this._usedCache = {};\n    };\n    IdentifierCache.prototype.stopTrackingUsageAndExpireUnused = function () {\n        // simply rotate in the new cache that was built during our normal getXYZ() calls.\n        this._cache = this._usedCache || this._cache;\n        this._usedCache = null;\n    };\n    IdentifierCache.prototype.getCache = function (key) {\n        var value = this._cache[key];\n        // track this cache item if needed\n        if (this._usedCache && typeof value !== \"undefined\") {\n            this._usedCache[key] = value;\n        }\n        return value;\n    };\n    IdentifierCache.prototype.setCache = function (key, value) {\n        this._cache[key] = value;\n        // track this cache item if needed\n        if (this._usedCache) {\n            this._usedCache[key] = value;\n        }\n        return value;\n    };\n    IdentifierCache.prototype.getAID = function (accessoryUUID) {\n        var key = accessoryUUID;\n        // ensure that our \"next AID\" field is not expired\n        this.getCache(\"|nextAID\");\n        return this.getCache(key) || this.setCache(key, this.getNextAID());\n    };\n    IdentifierCache.prototype.getIID = function (accessoryUUID, serviceUUID, serviceSubtype, characteristicUUID) {\n        var key = accessoryUUID\n            + \"|\" + serviceUUID\n            + (serviceSubtype ? \"|\" + serviceSubtype : \"\")\n            + (characteristicUUID ? \"|\" + characteristicUUID : \"\");\n        // ensure that our \"next IID\" field for this accessory is not expired\n        this.getCache(accessoryUUID + \"|nextIID\");\n        return this.getCache(key) || this.setCache(key, this.getNextIID(accessoryUUID));\n    };\n    IdentifierCache.prototype.getNextAID = function () {\n        var key = \"|nextAID\";\n        var nextAID = this.getCache(key) || 2; // start at 2 because the root Accessory or Bridge must be 1\n        this.setCache(key, nextAID + 1); // increment\n        return nextAID;\n    };\n    IdentifierCache.prototype.getNextIID = function (accessoryUUID) {\n        var key = accessoryUUID + \"|nextIID\";\n        var nextIID = this.getCache(key) || 2; // iid 1 is reserved for the Accessory Information service\n        this.setCache(key, nextIID + 1); // increment\n        return nextIID;\n    };\n    IdentifierCache.prototype.save = function () {\n        var newCacheHash = crypto_1.default.createHash(\"sha1\").update(JSON.stringify(this._cache)).digest(\"hex\"); //calculate hash of new cache\n        if (newCacheHash !== this._savedCacheHash) { //check if cache need to be saved and proceed accordingly\n            var saved = {\n                cache: this._cache,\n            };\n            var key = IdentifierCache.persistKey(this.username);\n            HAPStorage_1.HAPStorage.storage().setItemSync(key, saved);\n            this._savedCacheHash = newCacheHash; //update hash of saved cache for future use\n        }\n    };\n    /**\n     * Persisting to File System\n     */\n    // Gets a key for storing this IdentifierCache in the filesystem, like \"IdentifierCache.CC223DE3CEF3.json\"\n    IdentifierCache.persistKey = function (username) {\n        return util_1.default.format(\"IdentifierCache.%s.json\", username.replace(/:/g, \"\").toUpperCase());\n    };\n    IdentifierCache.load = function (username) {\n        var key = IdentifierCache.persistKey(username);\n        var saved = HAPStorage_1.HAPStorage.storage().getItem(key);\n        if (saved) {\n            var info = new IdentifierCache(username);\n            info._cache = saved.cache;\n            // calculate hash of the saved hash to decide in future if saving of new cache is needed\n            info._savedCacheHash = crypto_1.default.createHash(\"sha1\").update(JSON.stringify(info._cache)).digest(\"hex\");\n            return info;\n        }\n        else {\n            return null;\n        }\n    };\n    IdentifierCache.remove = function (username) {\n        var key = this.persistKey(username);\n        HAPStorage_1.HAPStorage.storage().removeItemSync(key);\n    };\n    return IdentifierCache;\n}());\nexports.IdentifierCache = IdentifierCache;\n//# sourceMappingURL=IdentifierCache.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AccessControlManagement = exports.AccessControlEvent = exports.AccessLevel = void 0;\nvar tslib_1 = require(\"tslib\");\nvar events_1 = require(\"events\");\nvar Characteristic_1 = require(\"../Characteristic\");\nvar Service_1 = require(\"../Service\");\nvar tlv = tslib_1.__importStar(require(\"../util/tlv\"));\nvar AccessControlTypes;\n(function (AccessControlTypes) {\n    AccessControlTypes[AccessControlTypes[\"PASSWORD\"] = 1] = \"PASSWORD\";\n    AccessControlTypes[AccessControlTypes[\"PASSWORD_REQUIRED\"] = 2] = \"PASSWORD_REQUIRED\";\n})(AccessControlTypes || (AccessControlTypes = {}));\n/**\n * This defines the Access Level for TVs and Speakers. It is pretty much only used for the AirPlay 2 protocol\n * so this information is not really useful.\n *\n * @group Television\n */\nvar AccessLevel;\n(function (AccessLevel) {\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * This access level is set when the users selects \"Anyone\" or \"Anyone On The Same Network\"\n     * in the Access Control settings.\n     */\n    AccessLevel[AccessLevel[\"ANYONE\"] = 0] = \"ANYONE\";\n    /**\n     * This access level is set when the users selects \"Only People Sharing this Home\" in the\n     * Access Control settings.\n     * On this level password setting is ignored.\n     * Requests to the HAPServer can only come from Home members anyways, so there is no real use to it.\n     * This is pretty much only used for the AirPlay 2 protocol.\n     */\n    AccessLevel[AccessLevel[\"HOME_MEMBERS_ONLY\"] = 1] = \"HOME_MEMBERS_ONLY\";\n    // 2 seems to be also a valid value in the range, but never encountered it.\n    // so don't know what's the use of it.\n})(AccessLevel || (exports.AccessLevel = AccessLevel = {}));\n/**\n * @group Television\n */\nvar AccessControlEvent;\n(function (AccessControlEvent) {\n    AccessControlEvent[\"ACCESS_LEVEL_UPDATED\"] = \"update-control-level\";\n    AccessControlEvent[\"PASSWORD_SETTING_UPDATED\"] = \"update-password\";\n})(AccessControlEvent || (exports.AccessControlEvent = AccessControlEvent = {}));\n/**\n * @group Television\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar AccessControlManagement = /** @class */ (function (_super) {\n    tslib_1.__extends(AccessControlManagement, _super);\n    function AccessControlManagement(password, service) {\n        var _this = _super.call(this) || this;\n        /**\n         * The current access level set for the Home\n         */\n        _this.accessLevel = 0;\n        _this.passwordRequired = false;\n        _this.accessControlService = service || new Service_1.Service.AccessControl();\n        _this.setupServiceHandlers(password);\n        return _this;\n    }\n    /**\n     * @returns the AccessControl service\n     */\n    AccessControlManagement.prototype.getService = function () {\n        return this.accessControlService;\n    };\n    /**\n     * @returns the current {@link AccessLevel} configured for the Home\n     */\n    AccessControlManagement.prototype.getAccessLevel = function () {\n        return this.accessLevel;\n    };\n    /**\n     * @returns the current password configured for the Home or `undefined` if no password is required.\n     */\n    AccessControlManagement.prototype.getPassword = function () {\n        return this.passwordRequired ? this.password : undefined;\n    };\n    /**\n     * This destroys the AccessControlManagement.\n     * It unregisters all GET or SET handler it has associated with the given AccessControl service.\n     * It removes all event handlers which were registered to this object.\n     */\n    AccessControlManagement.prototype.destroy = function () {\n        this.removeAllListeners();\n        this.accessControlService.getCharacteristic(Characteristic_1.Characteristic.AccessControlLevel).removeOnSet();\n        if (this.accessControlService.testCharacteristic(Characteristic_1.Characteristic.PasswordSetting)) {\n            this.accessControlService.getCharacteristic(Characteristic_1.Characteristic.PasswordSetting).removeOnSet();\n        }\n    };\n    AccessControlManagement.prototype.handleAccessLevelChange = function (value) {\n        var _this = this;\n        this.accessLevel = value;\n        setTimeout(function () {\n            _this.emit(\"update-control-level\" /* AccessControlEvent.ACCESS_LEVEL_UPDATED */, _this.accessLevel);\n        }, 0).unref();\n    };\n    AccessControlManagement.prototype.handlePasswordChange = function (value) {\n        var _this = this;\n        var data = Buffer.from(value, \"base64\");\n        var objects = tlv.decode(data);\n        if (objects[1 /* AccessControlTypes.PASSWORD */]) {\n            this.password = objects[1 /* AccessControlTypes.PASSWORD */].toString(\"utf8\");\n        }\n        else {\n            this.password = undefined;\n        }\n        this.passwordRequired = !!objects[2 /* AccessControlTypes.PASSWORD_REQUIRED */][0];\n        setTimeout(function () {\n            _this.emit(\"update-password\" /* AccessControlEvent.PASSWORD_SETTING_UPDATED */, _this.password, _this.passwordRequired);\n        }, 0).unref();\n    };\n    AccessControlManagement.prototype.setupServiceHandlers = function (enabledPasswordCharacteristics) {\n        // perms: [Perms.NOTIFY, Perms.PAIRED_READ, Perms.PAIRED_WRITE],\n        var _this = this;\n        this.accessControlService.getCharacteristic(Characteristic_1.Characteristic.AccessControlLevel)\n            .onSet(function (value) { return _this.handleAccessLevelChange(value); })\n            .updateValue(0);\n        if (enabledPasswordCharacteristics) {\n            this.accessControlService.getCharacteristic(Characteristic_1.Characteristic.PasswordSetting)\n                .onSet(function (value) { return _this.handlePasswordChange(value); })\n                .updateValue(\"\");\n        }\n    };\n    return AccessControlManagement;\n}(events_1.EventEmitter));\nexports.AccessControlManagement = AccessControlManagement;\n//# sourceMappingURL=AccessControlManagement.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.clone = void 0;\nvar tslib_1 = require(\"tslib\");\n/**\n * A simple clone function that also allows you to pass an \"extend\" object whose properties will be\n * added to the cloned copy of the original object passed.\n * @group Utils\n */\nfunction clone(object, extend) {\n    var e_1, _a, e_2, _b;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var cloned = {};\n    try {\n        for (var _c = tslib_1.__values(Object.entries(object)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var _e = tslib_1.__read(_d.value, 2), key = _e[0], value = _e[1];\n            cloned[key] = value;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    if (extend) {\n        try {\n            for (var _f = tslib_1.__values(Object.entries(extend)), _g = _f.next(); !_g.done; _g = _f.next()) {\n                var _h = tslib_1.__read(_g.value, 2), key = _h[0], value = _h[1];\n                cloned[key] = value;\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }\n    return cloned;\n}\nexports.clone = clone;\n//# sourceMappingURL=clone.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorUtils = void 0;\nvar tslib_1 = require(\"tslib\");\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar lookupTable = new Map([\n    [100, [19, 222.1]],\n    [101, [18.7, 222.2]],\n    [102, [18.4, 222.3]],\n    [103, [18.2, 222.3]],\n    [104, [17.9, 222.4]],\n    [105, [17.6, 222.5]],\n    [106, [17.3, 222.7]],\n    [107, [17, 222.8]],\n    [108, [16.7, 222.9]],\n    [109, [16.4, 223]],\n    [110, [16.1, 223.2]],\n    [111, [15.8, 223.3]],\n    [112, [15.4, 223.4]],\n    [113, [15.2, 223.6]],\n    [114, [14.9, 223.8]],\n    [115, [14.7, 223.9]],\n    [116, [14.3, 224.1]],\n    [117, [14.1, 224.2]],\n    [118, [13.8, 224.4]],\n    [119, [13.5, 224.6]],\n    [120, [13.2, 224.8]],\n    [121, [12.9, 225]],\n    [122, [12.5, 225.3]],\n    [123, [12.2, 225.6]],\n    [124, [11.8, 225.9]],\n    [125, [11.4, 226.3]],\n    [126, [11.1, 226.7]],\n    [127, [10.7, 227.1]],\n    [128, [10.3, 227.6]],\n    [129, [9.9, 228]],\n    [130, [9.6, 228.5]],\n    [131, [9.3, 229.1]],\n    [132, [8.9, 229.6]],\n    [133, [8.5, 230.2]],\n    [134, [8.2, 230.9]],\n    [135, [7.8, 231.6]],\n    [136, [7.5, 232.5]],\n    [137, [7.1, 233.5]],\n    [138, [6.7, 234.6]],\n    [139, [6.3, 235.8]],\n    [140, [6, 237.1]],\n    [141, [5.6, 238.9]],\n    [142, [5.2, 240.9]],\n    [143, [5, 242.9]],\n    [144, [4.8, 244.9]],\n    [145, [4.6, 246.9]],\n    [146, [4.4, 249.3]],\n    [147, [4.3, 251.9]],\n    [148, [4.1, 254.9]],\n    [149, [3.9, 258]],\n    [150, [3.7, 261.8]],\n    [151, [3.4, 265.9]],\n    [152, [3.2, 271]],\n    [153, [3, 276.4]],\n    [154, [2.8, 283.6]],\n    [155, [2.6, 290.4]],\n    [156, [2.3, 295.3]],\n    [157, [2.1, 300]],\n    [158, [1.9, 300]],\n    [159, [1.6, 300]],\n    [160, [1.4, 195.8]],\n    [161, [1.2, 84.3]],\n    [162, [1.3, 58.2]],\n    [163, [1.5, 55.9]],\n    [164, [1.7, 53.2]],\n    [165, [1.9, 50.2]],\n    [166, [2.1, 47.1]],\n    [167, [2.4, 44.5]],\n    [168, [2.6, 42.6]],\n    [169, [2.9, 40.9]],\n    [170, [3.1, 39.5]],\n    [171, [3.4, 38.3]],\n    [172, [3.7, 37.3]],\n    [173, [3.9, 36.5]],\n    [174, [4.2, 35.7]],\n    [175, [4.4, 35.1]],\n    [176, [4.6, 34.5]],\n    [177, [4.9, 34]],\n    [178, [5.1, 33.5]],\n    [179, [5.3, 33]],\n    [180, [5.6, 32.7]],\n    [181, [5.8, 32.3]],\n    [182, [6, 32]],\n    [183, [6.3, 31.7]],\n    [184, [6.5, 31.4]],\n    [185, [6.7, 31.2]],\n    [186, [7, 30.9]],\n    [187, [7.2, 30.7]],\n    [188, [7.4, 30.5]],\n    [189, [7.6, 30.3]],\n    [190, [7.9, 30.1]],\n    [191, [8.1, 29.9]],\n    [192, [8.4, 29.7]],\n    [193, [8.6, 29.6]],\n    [194, [8.9, 29.5]],\n    [195, [9.1, 29.3]],\n    [196, [9.4, 29.2]],\n    [197, [9.6, 29.1]],\n    [198, [9.8, 29]],\n    [199, [10, 28.9]],\n    [200, [10.2, 28.7]],\n    [201, [10.5, 28.7]],\n    [202, [10.7, 28.6]],\n    [203, [11, 28.5]],\n    [204, [11.2, 28.4]],\n    [205, [11.4, 28.3]],\n    [206, [11.6, 28.3]],\n    [207, [11.8, 28.2]],\n    [208, [12.1, 28.1]],\n    [209, [12.3, 28.1]],\n    [210, [12.5, 28]],\n    [211, [12.7, 28]],\n    [212, [12.9, 27.9]],\n    [213, [13.2, 27.8]],\n    [214, [13.4, 27.8]],\n    [215, [13.6, 27.7]],\n    [216, [13.8, 27.7]],\n    [217, [14, 27.7]],\n    [218, [14.3, 27.6]],\n    [219, [14.5, 27.6]],\n    [220, [14.7, 27.5]],\n    [221, [14.9, 27.5]],\n    [222, [15.1, 27.5]],\n    [223, [15.3, 27.4]],\n    [224, [15.5, 27.4]],\n    [225, [15.8, 27.4]],\n    [226, [16, 27.3]],\n    [227, [16.2, 27.3]],\n    [228, [16.4, 27.3]],\n    [229, [16.6, 27.3]],\n    [230, [16.8, 27.2]],\n    [231, [17, 27.2]],\n    [232, [17.2, 27.2]],\n    [233, [17.4, 27.2]],\n    [234, [17.6, 27.2]],\n    [235, [17.8, 27.1]],\n    [236, [18, 27.1]],\n    [237, [18.2, 27.1]],\n    [238, [18.4, 27.1]],\n    [239, [18.7, 27.1]],\n    [240, [18.8, 27]],\n    [241, [19, 27]],\n    [242, [19.2, 27]],\n    [243, [19.4, 27]],\n    [244, [19.6, 27]],\n    [245, [19.8, 27]],\n    [246, [20, 27]],\n    [247, [20.3, 26.9]],\n    [248, [20.5, 26.9]],\n    [249, [20.6, 26.9]],\n    [250, [20.8, 26.9]],\n    [251, [21, 26.9]],\n    [252, [21.3, 26.9]],\n    [253, [21.5, 26.9]],\n    [254, [21.6, 26.9]],\n    [255, [21.8, 26.8]],\n    [256, [22, 26.8]],\n    [257, [22.2, 26.8]],\n    [258, [22.4, 26.8]],\n    [259, [22.6, 26.8]],\n    [260, [22.8, 26.8]],\n    [261, [23, 26.8]],\n    [262, [23.2, 26.8]],\n    [263, [23.4, 26.8]],\n    [264, [23.6, 26.8]],\n    [265, [23.8, 26.8]],\n    [266, [24, 26.8]],\n    [267, [24.1, 26.8]],\n    [268, [24.3, 26.8]],\n    [269, [24.5, 26.8]],\n    [270, [24.7, 26.8]],\n    [271, [24.8, 26.8]],\n    [272, [25.1, 26.7]],\n    [273, [25.3, 26.7]],\n    [274, [25.4, 26.7]],\n    [275, [25.6, 26.7]],\n    [276, [25.8, 26.7]],\n    [277, [26, 26.7]],\n    [278, [26.1, 26.7]],\n    [279, [26.3, 26.7]],\n    [280, [26.5, 26.7]],\n    [281, [26.7, 26.7]],\n    [282, [26.9, 26.7]],\n    [283, [27.1, 26.7]],\n    [284, [27.3, 26.7]],\n    [285, [27.5, 26.7]],\n    [286, [27.7, 26.7]],\n    [287, [27.8, 26.7]],\n    [288, [28, 26.7]],\n    [289, [28.2, 26.7]],\n    [290, [28.4, 26.7]],\n    [291, [28.6, 26.7]],\n    [292, [28.8, 26.7]],\n    [293, [28.9, 26.7]],\n    [294, [29.1, 26.7]],\n    [295, [29.3, 26.7]],\n    [296, [29.5, 26.7]],\n    [297, [29.6, 26.7]],\n    [298, [29.8, 26.7]],\n    [299, [30, 26.7]],\n    [300, [30.2, 26.7]],\n    [301, [30.4, 26.7]],\n    [302, [30.5, 26.7]],\n    [303, [30.7, 26.7]],\n    [304, [30.9, 26.7]],\n    [305, [31.1, 26.7]],\n    [306, [31.2, 26.7]],\n    [307, [31.4, 26.7]],\n    [308, [31.6, 26.7]],\n    [309, [31.8, 26.8]],\n    [310, [31.9, 26.8]],\n    [311, [32.1, 26.8]],\n    [312, [32.3, 26.8]],\n    [313, [32.5, 26.8]],\n    [314, [32.6, 26.8]],\n    [315, [32.8, 26.8]],\n    [316, [33, 26.8]],\n    [317, [33.2, 26.8]],\n    [318, [33.3, 26.8]],\n    [319, [33.5, 26.8]],\n    [320, [33.7, 26.8]],\n    [321, [33.8, 26.8]],\n    [322, [34, 26.8]],\n    [323, [34.2, 26.8]],\n    [324, [34.4, 26.8]],\n    [325, [34.5, 26.8]],\n    [326, [34.7, 26.8]],\n    [327, [34.9, 26.8]],\n    [328, [35.1, 26.8]],\n    [329, [35.2, 26.8]],\n    [330, [35.4, 26.8]],\n    [331, [35.5, 26.8]],\n    [332, [35.7, 26.8]],\n    [333, [35.9, 26.8]],\n    [334, [36.1, 26.8]],\n    [335, [36.3, 26.9]],\n    [336, [36.5, 26.9]],\n    [337, [36.7, 26.9]],\n    [338, [36.9, 26.9]],\n    [339, [37.1, 26.9]],\n    [340, [37.2, 26.9]],\n    [341, [37.4, 26.9]],\n    [342, [37.5, 26.9]],\n    [343, [37.7, 26.9]],\n    [344, [37.9, 26.9]],\n    [345, [38.1, 26.9]],\n    [346, [38.3, 26.9]],\n    [347, [38.5, 26.9]],\n    [348, [38.7, 26.9]],\n    [349, [38.9, 26.9]],\n    [350, [39, 26.9]],\n    [351, [39.2, 26.9]],\n    [352, [39.3, 27]],\n    [353, [39.5, 27]],\n    [354, [39.7, 27]],\n    [355, [39.9, 27]],\n    [356, [40.1, 27]],\n    [357, [40.2, 27]],\n    [358, [40.4, 27]],\n    [359, [40.6, 27]],\n    [360, [40.8, 27]],\n    [361, [40.9, 27]],\n    [362, [41.1, 27]],\n    [363, [41.2, 27]],\n    [364, [41.4, 27]],\n    [365, [41.6, 27]],\n    [366, [41.8, 27]],\n    [367, [42, 27]],\n    [368, [42.1, 27.1]],\n    [369, [42.3, 27.1]],\n    [370, [42.4, 27.1]],\n    [371, [42.6, 27.1]],\n    [372, [42.8, 27.1]],\n    [373, [43, 27.1]],\n    [374, [43.1, 27.1]],\n    [375, [43.2, 27.1]],\n    [376, [43.4, 27.1]],\n    [377, [43.6, 27.1]],\n    [378, [43.8, 27.1]],\n    [379, [43.9, 27.1]],\n    [380, [44.1, 27.1]],\n    [381, [44.3, 27.2]],\n    [382, [44.4, 27.2]],\n    [383, [44.6, 27.2]],\n    [384, [44.7, 27.2]],\n    [385, [44.9, 27.2]],\n    [386, [45.1, 27.2]],\n    [387, [45.3, 27.2]],\n    [388, [45.5, 27.2]],\n    [389, [45.6, 27.2]],\n    [390, [45.8, 27.2]],\n    [391, [46, 27.2]],\n    [392, [46.2, 27.2]],\n    [393, [46.4, 27.3]],\n    [394, [46.5, 27.3]],\n    [395, [46.7, 27.3]],\n    [396, [46.9, 27.3]],\n    [397, [47.1, 27.3]],\n    [398, [47.2, 27.3]],\n    [399, [47.4, 27.3]],\n    [400, [47.6, 27.3]],\n    [401, [47.7, 27.3]],\n    [402, [47.9, 27.3]],\n    [403, [48.1, 27.3]],\n    [404, [48.3, 27.3]],\n    [405, [48.5, 27.4]],\n    [406, [48.7, 27.4]],\n    [407, [48.8, 27.4]],\n    [408, [49, 27.4]],\n    [409, [49.2, 27.4]],\n    [410, [49.4, 27.4]],\n    [411, [49.6, 27.4]],\n    [412, [49.7, 27.4]],\n    [413, [49.9, 27.4]],\n    [414, [50.1, 27.4]],\n    [415, [50.2, 27.4]],\n    [416, [50.4, 27.4]],\n    [417, [50.6, 27.5]],\n    [418, [50.7, 27.5]],\n    [419, [50.9, 27.5]],\n    [420, [51.1, 27.5]],\n    [421, [51.2, 27.5]],\n    [422, [51.4, 27.5]],\n    [423, [51.6, 27.5]],\n    [424, [51.7, 27.5]],\n    [425, [51.9, 27.5]],\n    [426, [52.1, 27.5]],\n    [427, [51.2, 27.6]],\n    [428, [52.4, 27.6]],\n    [429, [52.5, 27.6]],\n    [430, [52.7, 27.6]],\n    [431, [52.9, 27.6]],\n    [432, [53.1, 27.6]],\n    [433, [53.2, 27.6]],\n    [434, [53.4, 27.6]],\n    [435, [53.6, 27.6]],\n    [436, [53.7, 27.6]],\n    [437, [53.9, 27.6]],\n    [438, [54.1, 27.7]],\n    [439, [54.2, 27.7]],\n    [440, [54.3, 27.7]],\n    [441, [54.5, 27.7]],\n    [442, [54.7, 27.7]],\n    [443, [54.8, 27.7]],\n    [444, [55, 27.7]],\n    [445, [55.2, 27.7]],\n    [446, [55.3, 27.7]],\n    [447, [55.5, 27.7]],\n    [448, [55.7, 27.7]],\n    [449, [55.8, 27.8]],\n    [450, [56, 27.8]],\n    [451, [56.2, 27.8]],\n    [452, [56.3, 27.8]],\n    [453, [56.5, 27.8]],\n    [454, [56.7, 27.8]],\n    [455, [56.8, 27.8]],\n    [456, [57, 27.8]],\n    [457, [57.2, 27.8]],\n    [458, [57.3, 27.9]],\n    [459, [57.4, 27.9]],\n    [460, [57.6, 27.9]],\n    [461, [57.8, 27.9]],\n    [462, [57.9, 27.9]],\n    [463, [58.1, 27.9]],\n    [464, [58.3, 27.9]],\n    [465, [58.4, 27.9]],\n    [466, [58.6, 27.9]],\n    [467, [58.8, 27.9]],\n    [468, [59, 28]],\n    [469, [59.1, 28]],\n    [470, [59.2, 28]],\n    [471, [59.4, 28]],\n    [472, [59.6, 28]],\n    [473, [59.7, 28]],\n    [474, [60, 28]],\n    [475, [60.1, 28]],\n    [476, [60.2, 28]],\n    [477, [60.4, 28]],\n    [478, [60.6, 28.1]],\n    [479, [60.7, 28.1]],\n    [480, [60.9, 28.1]],\n    [481, [60.1, 28.1]],\n    [482, [60.3, 28.1]],\n    [483, [61.4, 28.1]],\n    [484, [61.5, 28.1]],\n    [485, [61.7, 28.1]],\n    [486, [61.9, 28.1]],\n    [487, [62, 28.2]],\n    [488, [62.2, 28.2]],\n    [489, [62.3, 28.2]],\n    [490, [62.5, 28.2]],\n    [491, [62.7, 28.2]],\n    [492, [62.8, 28.2]],\n    [493, [63, 28.2]],\n    [494, [63.2, 28.2]],\n    [495, [63.3, 28.2]],\n    [496, [63.4, 28.2]],\n    [497, [63.6, 28.2]],\n    [498, [63.8, 28.3]],\n    [499, [63.9, 28.3]],\n    [500, [64.1, 28.3]],\n]);\n/**\n * @group Utils\n */\nvar ColorUtils = /** @class */ (function () {\n    function ColorUtils() {\n    }\n    /**\n     * Returns the Hue and Saturation representation of the given color temperature in mired.\n     *\n     * @param colorTemperature - The color temperature in mired.\n     * @param roundResults - The lookup table has a precision of .1 decimal places. The given characteristics only have a step value of 1.\n     *  Thus, the method will round the results by default to an integer value. This can be turned off using this option.\n     * @returns An number array of length 2 with the first element being the saturation and the second argument being the hue.\n     */\n    ColorUtils.colorTemperatureToHueAndSaturation = function (colorTemperature, roundResults) {\n        if (roundResults === void 0) { roundResults = true; }\n        if (colorTemperature > 500) {\n            colorTemperature = 500;\n        }\n        else if (colorTemperature < 100) {\n            colorTemperature = 100;\n        }\n        colorTemperature = Math.round(colorTemperature); // ensure integer\n        var hueAndTemperature = lookupTable.get(colorTemperature);\n        (0, assert_1.default)(colorTemperature != null, \"lookup for temperature \" + colorTemperature + \" did not yield any results\");\n        if (roundResults) {\n            hueAndTemperature[0] = Math.round(hueAndTemperature[0]);\n            hueAndTemperature[1] = Math.round(hueAndTemperature[1]);\n        }\n        return {\n            saturation: hueAndTemperature[0],\n            hue: hueAndTemperature[1],\n        };\n    };\n    return ColorUtils;\n}());\nexports.ColorUtils = ColorUtils;\n//# sourceMappingURL=color-utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HAPConnection = exports.HAPConnectionEvent = exports.HAPConnectionState = exports.EventedHTTPServer = exports.EventedHTTPServerEvent = exports.HAPEncryption = void 0;\nvar tslib_1 = require(\"tslib\");\nvar domain_formatter_1 = require(\"@homebridge/ciao/lib/util/domain-formatter\");\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar debug_1 = tslib_1.__importDefault(require(\"debug\"));\nvar events_1 = require(\"events\");\nvar http_1 = tslib_1.__importDefault(require(\"http\"));\nvar net_1 = tslib_1.__importDefault(require(\"net\"));\nvar os_1 = tslib_1.__importDefault(require(\"os\"));\nvar hapCrypto = tslib_1.__importStar(require(\"./hapCrypto\"));\nvar net_utils_1 = require(\"./net-utils\");\nvar uuid = tslib_1.__importStar(require(\"./uuid\"));\nvar debug = (0, debug_1.default)(\"HAP-NodeJS:EventedHTTPServer\");\nvar debugCon = (0, debug_1.default)(\"HAP-NodeJS:EventedHTTPServer:Connection\");\nvar debugEvents = (0, debug_1.default)(\"HAP-NodeJS:EventEmitter\");\n/**\n * Simple struct to hold vars needed to support HAP encryption.\n *\n * @group Cryptography\n */\nvar HAPEncryption = /** @class */ (function () {\n    function HAPEncryption(clientPublicKey, secretKey, publicKey, sharedSecret, hkdfPairEncryptionKey) {\n        this.accessoryToControllerCount = 0;\n        this.controllerToAccessoryCount = 0;\n        this.clientPublicKey = clientPublicKey;\n        this.secretKey = secretKey;\n        this.publicKey = publicKey;\n        this.sharedSecret = sharedSecret;\n        this.hkdfPairEncryptionKey = hkdfPairEncryptionKey;\n        this.accessoryToControllerKey = Buffer.alloc(0);\n        this.controllerToAccessoryKey = Buffer.alloc(0);\n    }\n    return HAPEncryption;\n}());\nexports.HAPEncryption = HAPEncryption;\n/**\n * @group HAP Accessory Server\n */\nvar EventedHTTPServerEvent;\n(function (EventedHTTPServerEvent) {\n    EventedHTTPServerEvent[\"LISTENING\"] = \"listening\";\n    EventedHTTPServerEvent[\"CONNECTION_OPENED\"] = \"connection-opened\";\n    EventedHTTPServerEvent[\"REQUEST\"] = \"request\";\n    EventedHTTPServerEvent[\"CONNECTION_CLOSED\"] = \"connection-closed\";\n})(EventedHTTPServerEvent || (exports.EventedHTTPServerEvent = EventedHTTPServerEvent = {}));\n/**\n * EventedHTTPServer provides an HTTP-like server that supports HAP \"extensions\" for security and events.\n *\n * Implementation\n * --------------\n * In order to implement the \"custom HTTP\" server required by the HAP protocol (see HAPServer.js) without completely\n * reinventing the wheel, we create both a generic TCP socket server and a standard Node HTTP server.\n * The TCP socket server acts as a proxy, allowing users of this class to transform data (for encryption) as necessary\n * and passing through bytes directly to the HTTP server for processing. This way we get Node to do all\n * the \"heavy lifting\" of HTTP like parsing headers and formatting responses.\n *\n * Events are sent by simply waiting for current HTTP traffic to subside and then sending a custom response packet\n * directly down the wire via the socket.\n *\n * Each connection to the main TCP server gets its own internal HTTP server, so we can track ongoing requests/responses\n * for safe event insertion.\n *\n * @group HAP Accessory Server\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar EventedHTTPServer = /** @class */ (function (_super) {\n    tslib_1.__extends(EventedHTTPServer, _super);\n    function EventedHTTPServer() {\n        var _this = _super.call(this) || this;\n        /**\n         * Set of all currently connected HAP connections.\n         */\n        _this.connections = new Set();\n        /**\n         * Session dictionary indexed by username/identifier. The username uniquely identifies every person added to the home.\n         * So there can be multiple sessions open for a single username (multiple devices connected to the same Apple ID).\n         */\n        _this.connectionsByUsername = new Map();\n        _this.tcpServer = net_1.default.createServer();\n        return _this;\n    }\n    EventedHTTPServer.prototype.scheduleNextConnectionIdleTimeout = function () {\n        var e_1, _a;\n        this.connectionIdleTimeout = undefined;\n        if (!this.tcpServer.listening) {\n            return;\n        }\n        debug(\"Running idle timeout timer...\");\n        var currentTime = new Date().getTime();\n        var nextTimeout = -1;\n        try {\n            for (var _b = tslib_1.__values(this.connections), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var connection = _c.value;\n                var timeDelta = currentTime - connection.lastSocketOperation;\n                if (timeDelta >= EventedHTTPServer.MAX_CONNECTION_IDLE_TIME) {\n                    debug(\"[%s] Closing connection as it was inactive for \" + timeDelta + \"ms\");\n                    connection.close();\n                }\n                else {\n                    nextTimeout = Math.max(nextTimeout, EventedHTTPServer.MAX_CONNECTION_IDLE_TIME - timeDelta);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        if (this.connections.size >= EventedHTTPServer.CONNECTION_TIMEOUT_LIMIT) {\n            this.connectionIdleTimeout = setTimeout(this.scheduleNextConnectionIdleTimeout.bind(this), nextTimeout);\n        }\n    };\n    EventedHTTPServer.prototype.address = function () {\n        return this.tcpServer.address();\n    };\n    EventedHTTPServer.prototype.listen = function (targetPort, hostname) {\n        var _this = this;\n        this.tcpServer.listen(targetPort, hostname, function () {\n            var address = _this.tcpServer.address(); // address() is only a string when listening to unix domain sockets\n            debug(\"Server listening on %s:%s\", address.family === \"IPv6\" ? \"[\".concat(address.address, \"]\") : address.address, address.port);\n            _this.connectionLoggingInterval = setInterval(function () {\n                var connectionInformation = tslib_1.__spreadArray([], tslib_1.__read(_this.connections), false).map(function (connection) { return \"\".concat(connection.remoteAddress, \":\").concat(connection.remotePort); })\n                    .join(\", \");\n                debug(\"Currently %d hap connections open: %s\", _this.connections.size, connectionInformation);\n            }, 60000);\n            _this.connectionLoggingInterval.unref();\n            _this.emit(\"listening\" /* EventedHTTPServerEvent.LISTENING */, address.port, address.address);\n        });\n        this.tcpServer.on(\"connection\", this.onConnection.bind(this));\n    };\n    EventedHTTPServer.prototype.stop = function () {\n        var e_2, _a;\n        if (this.connectionLoggingInterval != null) {\n            clearInterval(this.connectionLoggingInterval);\n            this.connectionLoggingInterval = undefined;\n        }\n        if (this.connectionIdleTimeout != null) {\n            clearTimeout(this.connectionIdleTimeout);\n            this.connectionIdleTimeout = undefined;\n        }\n        this.tcpServer.close();\n        try {\n            for (var _b = tslib_1.__values(this.connections), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var connection = _c.value;\n                connection.close();\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    EventedHTTPServer.prototype.destroy = function () {\n        this.stop();\n        this.removeAllListeners();\n    };\n    /**\n     * Send an event notification for given characteristic and changed value to all connected clients.\n     * If `originator` is specified, the given {@link HAPConnection} will be excluded from the broadcast.\n     *\n     * @param aid - The accessory id of the updated characteristic.\n     * @param iid - The instance id of the updated characteristic.\n     * @param value - The newly set value of the characteristic.\n     * @param originator - If specified, the connection will not get an event message.\n     * @param immediateDelivery - The HAP spec requires some characteristics to be delivery immediately.\n     *   Namely, for the {@link Characteristic.ButtonEvent} and the {@link Characteristic.ProgrammableSwitchEvent} characteristics.\n     */\n    EventedHTTPServer.prototype.broadcastEvent = function (aid, iid, value, originator, immediateDelivery) {\n        var e_3, _a;\n        try {\n            for (var _b = tslib_1.__values(this.connections), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var connection = _c.value;\n                if (connection === originator) {\n                    debug(\"[%s] Muting event '%s' notification for this connection since it originated here.\", connection.remoteAddress, aid + \".\" + iid);\n                    continue;\n                }\n                connection.sendEvent(aid, iid, value, immediateDelivery);\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    };\n    EventedHTTPServer.prototype.onConnection = function (socket) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        var connection = new HAPConnection(this, socket);\n        connection.on(\"request\" /* HAPConnectionEvent.REQUEST */, function (request, response) {\n            _this.emit(\"request\" /* EventedHTTPServerEvent.REQUEST */, connection, request, response);\n        });\n        connection.on(\"authenticated\" /* HAPConnectionEvent.AUTHENTICATED */, this.handleConnectionAuthenticated.bind(this, connection));\n        connection.on(\"closed\" /* HAPConnectionEvent.CLOSED */, this.handleConnectionClose.bind(this, connection));\n        this.connections.add(connection);\n        debug(\"[%s] New connection from client on interface %s (%s)\", connection.remoteAddress, connection.networkInterface, connection.localAddress);\n        this.emit(\"connection-opened\" /* EventedHTTPServerEvent.CONNECTION_OPENED */, connection);\n        if (this.connections.size >= EventedHTTPServer.CONNECTION_TIMEOUT_LIMIT && !this.connectionIdleTimeout) {\n            this.scheduleNextConnectionIdleTimeout();\n        }\n    };\n    EventedHTTPServer.prototype.handleConnectionAuthenticated = function (connection, username) {\n        var connections = this.connectionsByUsername.get(username);\n        if (!connections) {\n            this.connectionsByUsername.set(username, [connection]);\n        }\n        else if (!connections.includes(connection)) { // ensure this doesn't get added more than one time\n            connections.push(connection);\n        }\n    };\n    EventedHTTPServer.prototype.handleConnectionClose = function (connection) {\n        this.emit(\"connection-closed\" /* EventedHTTPServerEvent.CONNECTION_CLOSED */, connection);\n        this.connections.delete(connection);\n        if (connection.username) { // aka connection was authenticated\n            var connections = this.connectionsByUsername.get(connection.username);\n            if (connections) {\n                var index = connections.indexOf(connection);\n                if (index !== -1) {\n                    connections.splice(index, 1);\n                }\n                if (connections.length === 0) {\n                    this.connectionsByUsername.delete(connection.username);\n                }\n            }\n        }\n    };\n    /**\n     * This method is to be called when a given {@link HAPConnection} performs a request that should result in the disconnection\n     * of all other {@link HAPConnection} with the same {@link HAPUsername}.\n     *\n     * The initiator MUST be in the middle of a http request were the response was not served yet.\n     * Otherwise, the initiator connection might reside in a state where it isn't disconnected and can't make any further requests.\n     *\n     * @param initiator - The connection that requested to disconnect all connections of the same username.\n     * @param username - The username for which all connections shall be closed.\n     */\n    EventedHTTPServer.destroyExistingConnectionsAfterUnpair = function (initiator, username) {\n        var e_4, _a;\n        var connections = initiator.server.connectionsByUsername.get(username);\n        if (connections) {\n            try {\n                for (var connections_1 = tslib_1.__values(connections), connections_1_1 = connections_1.next(); !connections_1_1.done; connections_1_1 = connections_1.next()) {\n                    var connection = connections_1_1.value;\n                    connection.closeConnectionAsOfUnpair(initiator);\n                }\n            }\n            catch (e_4_1) { e_4 = { error: e_4_1 }; }\n            finally {\n                try {\n                    if (connections_1_1 && !connections_1_1.done && (_a = connections_1.return)) _a.call(connections_1);\n                }\n                finally { if (e_4) throw e_4.error; }\n            }\n        }\n    };\n    EventedHTTPServer.CONNECTION_TIMEOUT_LIMIT = 16; // if we have more (or equal) # connections we start the timeout\n    EventedHTTPServer.MAX_CONNECTION_IDLE_TIME = 60 * 60 * 1000; // 1h\n    return EventedHTTPServer;\n}(events_1.EventEmitter));\nexports.EventedHTTPServer = EventedHTTPServer;\n/**\n * @private\n * @group HAP Accessory Server\n */\nvar HAPConnectionState;\n(function (HAPConnectionState) {\n    HAPConnectionState[HAPConnectionState[\"CONNECTING\"] = 0] = \"CONNECTING\";\n    HAPConnectionState[HAPConnectionState[\"FULLY_SET_UP\"] = 1] = \"FULLY_SET_UP\";\n    HAPConnectionState[HAPConnectionState[\"AUTHENTICATED\"] = 2] = \"AUTHENTICATED\";\n    // above signals represent an alive connection\n    // below states are considered \"closed or soon closed\"\n    HAPConnectionState[HAPConnectionState[\"TO_BE_TEARED_DOWN\"] = 3] = \"TO_BE_TEARED_DOWN\";\n    HAPConnectionState[HAPConnectionState[\"CLOSING\"] = 4] = \"CLOSING\";\n    HAPConnectionState[HAPConnectionState[\"CLOSED\"] = 5] = \"CLOSED\";\n})(HAPConnectionState || (exports.HAPConnectionState = HAPConnectionState = {}));\n/**\n * @group HAP Accessory Server\n */\nvar HAPConnectionEvent;\n(function (HAPConnectionEvent) {\n    HAPConnectionEvent[\"REQUEST\"] = \"request\";\n    HAPConnectionEvent[\"AUTHENTICATED\"] = \"authenticated\";\n    HAPConnectionEvent[\"CLOSED\"] = \"closed\";\n})(HAPConnectionEvent || (exports.HAPConnectionEvent = HAPConnectionEvent = {}));\n/**\n * Manages a single iOS-initiated HTTP connection during its lifetime.\n * @group HAP Accessory Server\n */\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nvar HAPConnection = /** @class */ (function (_super) {\n    tslib_1.__extends(HAPConnection, _super);\n    function HAPConnection(server, clientSocket) {\n        var _this = _super.call(this) || this;\n        _this.state = 0 /* HAPConnectionState.CONNECTING */;\n        _this.lastSocketOperation = new Date().getTime();\n        _this.pendingClientSocketData = Buffer.alloc(0); // data received from client before HTTP proxy is fully setup\n        _this.handlingRequest = false; // true while we are composing an HTTP response (so events can wait)\n        _this.registeredEvents = new Set();\n        _this.queuedEvents = [];\n        /**\n         * If true, the above {@link queuedEvents} contains events which are set to be delivered immediately!\n         */\n        _this.eventsQueuedForImmediateDelivery = false;\n        _this.server = server;\n        _this.sessionID = uuid.generate(clientSocket.remoteAddress + \":\" + clientSocket.remotePort);\n        _this.localAddress = clientSocket.localAddress;\n        _this.remoteAddress = clientSocket.remoteAddress; // cache because it becomes undefined in 'onClientSocketClose'\n        _this.remotePort = clientSocket.remotePort;\n        _this.networkInterface = HAPConnection.getLocalNetworkInterface(clientSocket);\n        // clientSocket is the socket connected to the actual iOS device\n        _this.tcpSocket = clientSocket;\n        _this.tcpSocket.on(\"data\", _this.onTCPSocketData.bind(_this));\n        _this.tcpSocket.on(\"close\", _this.onTCPSocketClose.bind(_this));\n        // we MUST register for this event, otherwise the error will bubble up to the top and crash the node process entirely.\n        _this.tcpSocket.on(\"error\", _this.onTCPSocketError.bind(_this));\n        _this.tcpSocket.setNoDelay(true); // disable Nagle algorithm\n        // \"HAP accessory servers must not use keepalive messages, which periodically wake up iOS devices\".\n        // Thus, we don't configure any tcp keepalive\n        // create our internal HTTP server for this connection that we will proxy data to and from\n        _this.internalHttpServer = http_1.default.createServer();\n        _this.internalHttpServer.timeout = 0; // clients expect to hold connections open as long as they want\n        _this.internalHttpServer.keepAliveTimeout = 0; // workaround for https://github.com/nodejs/node/issues/13391\n        _this.internalHttpServer.on(\"listening\", _this.onHttpServerListening.bind(_this));\n        _this.internalHttpServer.on(\"request\", _this.handleHttpServerRequest.bind(_this));\n        _this.internalHttpServer.on(\"error\", _this.onHttpServerError.bind(_this));\n        // close event is added later on the \"connect\" event as possible listen retries would throw unnecessary close events\n        _this.internalHttpServer.listen(0, _this.internalHttpServerAddress = (0, net_utils_1.getOSLoopbackAddressIfAvailable)());\n        return _this;\n    }\n    HAPConnection.prototype.debugListenerRegistration = function (event, registration, beforeCount) {\n        if (registration === void 0) { registration = true; }\n        if (beforeCount === void 0) { beforeCount = -1; }\n        var stackTrace = new Error().stack.split(\"\\n\")[3];\n        var eventCount = this.listeners(event).length;\n        var tabs1 = event === \"authenticated\" /* HAPConnectionEvent.AUTHENTICATED */ ? \"\\t\" : \"\\t\\t\";\n        var tabs2 = !registration ? \"\\t\" : \"\\t\\t\";\n        // eslint-disable-next-line max-len\n        debugEvents(\"[\".concat(this.remoteAddress, \"] \").concat(registration ? \"Registered\" : \"Unregistered\", \" event '\").concat(String(event).toUpperCase(), \"' \").concat(tabs1, \"(total: \").concat(eventCount).concat(!registration ? \" Before: \" + beforeCount : \"\", \") \").concat(tabs2).concat(stackTrace));\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    HAPConnection.prototype.on = function (event, listener) {\n        var result = _super.prototype.on.call(this, event, listener);\n        this.debugListenerRegistration(event);\n        return result;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    HAPConnection.prototype.addListener = function (event, listener) {\n        var result = _super.prototype.addListener.call(this, event, listener);\n        this.debugListenerRegistration(event);\n        return result;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    HAPConnection.prototype.removeListener = function (event, listener) {\n        var beforeCount = this.listeners(event).length;\n        var result = _super.prototype.removeListener.call(this, event, listener);\n        this.debugListenerRegistration(event, false, beforeCount);\n        return result;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    HAPConnection.prototype.off = function (event, listener) {\n        var result = _super.prototype.off.call(this, event, listener);\n        var beforeCount = this.listeners(event).length;\n        this.debugListenerRegistration(event, false, beforeCount);\n        return result;\n    };\n    /**\n     * This method is called once the connection has gone through pair-verify.\n     * As any HomeKit controller will initiate a pair-verify after the pair-setup procedure, this method gets\n     * not called on the initial pair-setup.\n     *\n     * Once this method has been called, the connection is authenticated and encryption is turned on.\n     */\n    HAPConnection.prototype.connectionAuthenticated = function (username) {\n        this.state = 2 /* HAPConnectionState.AUTHENTICATED */;\n        this.username = username;\n        this.emit(\"authenticated\" /* HAPConnectionEvent.AUTHENTICATED */, username);\n    };\n    HAPConnection.prototype.isAuthenticated = function () {\n        return this.state === 2 /* HAPConnectionState.AUTHENTICATED */;\n    };\n    HAPConnection.prototype.close = function () {\n        if (this.state >= 4 /* HAPConnectionState.CLOSING */) {\n            return; // already closed/closing\n        }\n        this.state = 4 /* HAPConnectionState.CLOSING */;\n        this.tcpSocket.destroy();\n    };\n    HAPConnection.prototype.closeConnectionAsOfUnpair = function (initiator) {\n        if (this === initiator) {\n            // the initiator of the unpair request is this connection, meaning it unpaired itself.\n            // we still need to send the response packet to the unpair request.\n            this.state = 3 /* HAPConnectionState.TO_BE_TEARED_DOWN */;\n        }\n        else {\n            // as HomeKit requires it, destroy any active session which got unpaired\n            this.close();\n        }\n    };\n    HAPConnection.prototype.sendEvent = function (aid, iid, value, immediateDelivery) {\n        (0, assert_1.default)(aid != null, \"HAPConnection.sendEvent: aid must be defined!\");\n        (0, assert_1.default)(iid != null, \"HAPConnection.sendEvent: iid must be defined!\");\n        var eventName = aid + \".\" + iid;\n        if (!this.registeredEvents.has(eventName)) {\n            // non verified connections can't register events, so this case is covered!\n            return;\n        }\n        var event = {\n            aid: aid,\n            iid: iid,\n            value: value,\n        };\n        if (immediateDelivery) {\n            // some characteristics are required to deliver notifications immediately\n            // we will flush all other events too, on that occasion.\n            this.queuedEvents.push(event);\n            this.eventsQueuedForImmediateDelivery = true;\n            if (this.eventsTimer) {\n                clearTimeout(this.eventsTimer);\n                this.eventsTimer = undefined;\n            }\n            this.handleEventsTimeout();\n            return;\n        }\n        // we search the list of queued events in reverse order.\n        // if the last element with the same aid and iid has the same value we don't want to send the event notification twice.\n        // BUT, we do not want to override previous event notifications which have a different value. Automations must be executed!\n        for (var i = this.queuedEvents.length - 1; i >= 0; i--) {\n            var queuedEvent = this.queuedEvents[i];\n            if (queuedEvent.aid === aid && queuedEvent.iid === iid) {\n                if (queuedEvent.value === value) {\n                    return; // the same event was already queued. do not add it again!\n                }\n                break; // we break in any case\n            }\n        }\n        this.queuedEvents.push(event);\n        // if there is already a timer running we just add it in the queue.\n        if (!this.eventsTimer) {\n            this.eventsTimer = setTimeout(this.handleEventsTimeout.bind(this), 250);\n            this.eventsTimer.unref();\n        }\n    };\n    HAPConnection.prototype.handleEventsTimeout = function () {\n        this.eventsTimer = undefined;\n        if (this.state > 2 /* HAPConnectionState.AUTHENTICATED */) {\n            // connection is closed or about to be closed. no need to send any further events\n            return;\n        }\n        this.writeQueuedEventNotifications();\n    };\n    HAPConnection.prototype.writeQueuedEventNotifications = function () {\n        var e_5, _a;\n        if (this.queuedEvents.length === 0 || this.handlingRequest) {\n            return; // don't send empty event notifications or if we are currently handling a request\n        }\n        if (this.eventsTimer) {\n            // this method might be called when we have enqueued data AND data that is queued for immediate delivery!\n            clearTimeout(this.eventsTimer);\n            this.eventsTimer = undefined;\n        }\n        var eventData = {\n            characteristics: [],\n        };\n        try {\n            for (var _b = tslib_1.__values(this.queuedEvents), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var queuedEvent = _c.value;\n                if (!this.registeredEvents.has(queuedEvent.aid + \".\" + queuedEvent.iid)) {\n                    continue; // client unregistered that event in the meantime\n                }\n                eventData.characteristics.push(queuedEvent);\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n        this.queuedEvents.splice(0, this.queuedEvents.length);\n        this.eventsQueuedForImmediateDelivery = false;\n        this.writeEventNotification(eventData);\n    };\n    /**\n     * This will create an EVENT/1.0 notification header with the provided event notification.\n     * If currently an HTTP request is in progress the assembled packet will be\n     * added to the pending events list.\n     *\n     * @param notification - The event which should be sent out\n     */\n    HAPConnection.prototype.writeEventNotification = function (notification) {\n        debugCon(\"[%s] Sending HAP event notifications %o\", this.remoteAddress, notification.characteristics);\n        (0, assert_1.default)(!this.handlingRequest, \"Can't write event notifications while handling a request!\");\n        // Apple backend processes events in reverse order, so we need to reverse the array\n        // so that events are processed in chronological order.\n        notification.characteristics.reverse();\n        var dataBuffer = Buffer.from(JSON.stringify(notification), \"utf8\");\n        var header = Buffer.from(\"EVENT/1.0 200 OK\\r\\n\" +\n            \"Content-Type: application/hap+json\\r\\n\" +\n            \"Content-Length: \" + dataBuffer.length + \"\\r\\n\" +\n            \"\\r\\n\", \"utf8\");\n        var buffer = Buffer.concat([header, dataBuffer]);\n        this.tcpSocket.write(this.encrypt(buffer), this.handleTCPSocketWriteFulfilled.bind(this));\n    };\n    HAPConnection.prototype.enableEventNotifications = function (aid, iid) {\n        this.registeredEvents.add(aid + \".\" + iid);\n    };\n    HAPConnection.prototype.disableEventNotifications = function (aid, iid) {\n        this.registeredEvents.delete(aid + \".\" + iid);\n    };\n    HAPConnection.prototype.hasEventNotifications = function (aid, iid) {\n        return this.registeredEvents.has(aid + \".\" + iid);\n    };\n    HAPConnection.prototype.getRegisteredEvents = function () {\n        return this.registeredEvents;\n    };\n    HAPConnection.prototype.clearRegisteredEvents = function () {\n        this.registeredEvents.clear();\n    };\n    HAPConnection.prototype.encrypt = function (data) {\n        // if accessoryToControllerKey is not empty, then encryption is enabled for this connection. However, we'll\n        // need to be careful to ensure that we don't encrypt the last few bytes of the response from handlePairVerifyStepTwo.\n        // Since all communication calls are asynchronous, we could easily receive this 'encrypt' event for those bytes.\n        // So we want to make sure that we aren't encrypting data until we have *received* some encrypted data from the client first.\n        if (this.encryption && this.encryption.accessoryToControllerKey.length > 0 && this.encryption.controllerToAccessoryCount > 0) {\n            return hapCrypto.layerEncrypt(data, this.encryption);\n        }\n        return data; // otherwise, we don't encrypt and return plaintext\n    };\n    HAPConnection.prototype.decrypt = function (data) {\n        if (this.encryption && this.encryption.controllerToAccessoryKey.length > 0) {\n            // below call may throw an error if decryption failed\n            return hapCrypto.layerDecrypt(data, this.encryption);\n        }\n        return data; // otherwise, we don't decrypt and return plaintext\n    };\n    HAPConnection.prototype.onHttpServerListening = function () {\n        var _this = this;\n        var addressInfo = this.internalHttpServer.address(); // address() is only a string when listening to unix domain sockets\n        var addressString = addressInfo.family === \"IPv6\" ? \"[\".concat(addressInfo.address, \"]\") : addressInfo.address;\n        this.internalHttpServerPort = addressInfo.port;\n        debugCon(\"[%s] Internal HTTP server listening on %s:%s\", this.remoteAddress, addressString, addressInfo.port);\n        this.internalHttpServer.on(\"close\", this.onHttpServerClose.bind(this));\n        // now we can establish a connection to this running HTTP server for proxying data\n        this.httpSocket = net_1.default.createConnection(this.internalHttpServerPort, this.internalHttpServerAddress); // previously we used addressInfo.address\n        this.httpSocket.setNoDelay(true); // disable Nagle algorithm\n        this.httpSocket.on(\"data\", this.handleHttpServerResponse.bind(this));\n        // we MUST register for this event, otherwise the error will bubble up to the top and crash the node process entirely.\n        this.httpSocket.on(\"error\", this.onHttpSocketError.bind(this));\n        this.httpSocket.on(\"close\", this.onHttpSocketClose.bind(this));\n        this.httpSocket.on(\"connect\", function () {\n            // we are now fully set up:\n            //  - clientSocket is connected to the iOS device\n            //  - serverSocket is connected to the httpServer\n            //  - ready to proxy data!\n            _this.state = 1 /* HAPConnectionState.FULLY_SET_UP */;\n            debugCon(\"[%s] Internal HTTP socket connected. HAPConnection now fully set up!\", _this.remoteAddress);\n            // start by flushing any pending buffered data received from the client while we were setting up\n            if (_this.pendingClientSocketData && _this.pendingClientSocketData.length > 0) {\n                _this.httpSocket.write(_this.pendingClientSocketData);\n            }\n            _this.pendingClientSocketData = undefined;\n        });\n    };\n    /**\n     * This event handler is called when we receive data from a HomeKit controller on our tcp socket.\n     * We store the data if the internal http server is not read yet, or forward it to the http server.\n     */\n    HAPConnection.prototype.onTCPSocketData = function (data) {\n        if (this.state > 2 /* HAPConnectionState.AUTHENTICATED */) {\n            // don't accept data of a connection which is about to be closed or already closed\n            return;\n        }\n        this.handlingRequest = true; // reverted to false once response was sent out\n        this.lastSocketOperation = new Date().getTime();\n        try {\n            data = this.decrypt(data);\n        }\n        catch (error) { // decryption and/or verification failed, disconnect the client\n            debugCon(\"[%s] Error occurred trying to decrypt incoming packet: %s\", this.remoteAddress, error.message);\n            this.close();\n            return;\n        }\n        if (this.state < 1 /* HAPConnectionState.FULLY_SET_UP */) { // we're not setup yet, so add this data to our intermediate buffer\n            this.pendingClientSocketData = Buffer.concat([this.pendingClientSocketData, data]);\n        }\n        else {\n            this.httpSocket.write(data); // proxy it along to the HTTP server\n        }\n    };\n    /**\n     * This event handler is called when the internal http server receives a request.\n     * Meaning we received data from the HomeKit controller in {@link onTCPSocketData}, which then send the\n     * data unencrypted to the internal http server. And now it landed here, fully parsed as a http request.\n     */\n    HAPConnection.prototype.handleHttpServerRequest = function (request, response) {\n        if (this.state > 2 /* HAPConnectionState.AUTHENTICATED */) {\n            // don't accept data of a connection which is about to be closed or already closed\n            return;\n        }\n        debugCon(\"[%s] HTTP request: %s\", this.remoteAddress, request.url);\n        request.socket.setNoDelay(true);\n        this.emit(\"request\" /* HAPConnectionEvent.REQUEST */, request, response);\n    };\n    /**\n     * This event handler is called by the socket which is connected to our internal http server.\n     * It is called with the response returned from the http server.\n     * In this method we have to encrypt and forward the message back to the HomeKit controller.\n     */\n    HAPConnection.prototype.handleHttpServerResponse = function (data) {\n        var _this = this;\n        data = this.encrypt(data);\n        this.tcpSocket.write(data, this.handleTCPSocketWriteFulfilled.bind(this));\n        debugCon(\"[%s] HTTP Response is finished\", this.remoteAddress);\n        this.handlingRequest = false;\n        if (this.state === 3 /* HAPConnectionState.TO_BE_TEARED_DOWN */) {\n            setTimeout(function () { return _this.close(); }, 10);\n        }\n        else if (this.state < 3 /* HAPConnectionState.TO_BE_TEARED_DOWN */) {\n            if (!this.eventsTimer || this.eventsQueuedForImmediateDelivery) {\n                // we deliver events if there is no eventsTimer (meaning it ran out in the meantime)\n                // or when the queue contains events set to be delivered immediately\n                this.writeQueuedEventNotifications();\n            }\n        }\n    };\n    HAPConnection.prototype.handleTCPSocketWriteFulfilled = function () {\n        this.lastSocketOperation = new Date().getTime();\n    };\n    HAPConnection.prototype.onTCPSocketError = function (err) {\n        debugCon(\"[%s] Client connection error: %s\", this.remoteAddress, err.message);\n        // onTCPSocketClose will be called next\n    };\n    HAPConnection.prototype.onTCPSocketClose = function () {\n        this.state = 5 /* HAPConnectionState.CLOSED */;\n        debugCon(\"[%s] Client connection closed\", this.remoteAddress);\n        if (this.httpSocket) {\n            this.httpSocket.destroy();\n        }\n        this.internalHttpServer.close();\n        this.emit(\"closed\" /* HAPConnectionEvent.CLOSED */); // sending final closed event\n        this.removeAllListeners(); // cleanup listeners, we are officially dead now\n    };\n    HAPConnection.prototype.onHttpServerError = function (err) {\n        debugCon(\"[%s] HTTP server error: %s\", this.remoteAddress, err.message);\n        if (err.code === \"EADDRINUSE\") {\n            this.internalHttpServerPort = undefined;\n            this.internalHttpServer.close();\n            this.internalHttpServer.listen(0, this.internalHttpServerAddress = (0, net_utils_1.getOSLoopbackAddressIfAvailable)());\n        }\n    };\n    HAPConnection.prototype.onHttpServerClose = function () {\n        debugCon(\"[%s] HTTP server was closed\", this.remoteAddress);\n        // make sure the iOS side is closed as well\n        this.close();\n    };\n    HAPConnection.prototype.onHttpSocketError = function (err) {\n        debugCon(\"[%s] HTTP connection error: \", this.remoteAddress, err.message);\n        // onHttpSocketClose will be called next\n    };\n    HAPConnection.prototype.onHttpSocketClose = function () {\n        debugCon(\"[%s] HTTP connection was closed\", this.remoteAddress);\n        // we only support a single long-lived connection to our internal HTTP server. Since it's closed,\n        // we'll need to shut it down entirely.\n        this.internalHttpServer.close();\n    };\n    HAPConnection.prototype.getLocalAddress = function (ipVersion) {\n        var e_6, _a, e_7, _b;\n        var infos = os_1.default.networkInterfaces()[this.networkInterface];\n        if (ipVersion === \"ipv4\") {\n            if (infos) {\n                try {\n                    for (var infos_1 = tslib_1.__values(infos), infos_1_1 = infos_1.next(); !infos_1_1.done; infos_1_1 = infos_1.next()) {\n                        var info = infos_1_1.value;\n                        // @ts-expect-error Nodejs 18+ uses the number 4 the string \"IPv4\"\n                        if (info.family === \"IPv4\" || info.family === 4) {\n                            return info.address;\n                        }\n                    }\n                }\n                catch (e_6_1) { e_6 = { error: e_6_1 }; }\n                finally {\n                    try {\n                        if (infos_1_1 && !infos_1_1.done && (_a = infos_1.return)) _a.call(infos_1);\n                    }\n                    finally { if (e_6) throw e_6.error; }\n                }\n            }\n            throw new Error(\"Could not find \" + ipVersion + \" address for interface \" + this.networkInterface);\n        }\n        else {\n            var localUniqueAddress = undefined;\n            if (infos) {\n                try {\n                    for (var infos_2 = tslib_1.__values(infos), infos_2_1 = infos_2.next(); !infos_2_1.done; infos_2_1 = infos_2.next()) {\n                        var info = infos_2_1.value;\n                        // @ts-expect-error Nodejs 18+ uses the number 6 instead of the string \"IPv6\"\n                        if (info.family === \"IPv6\" || info.family === 6) {\n                            if (!info.scopeid) {\n                                return info.address;\n                            }\n                            else if (!localUniqueAddress) {\n                                localUniqueAddress = info.address;\n                            }\n                        }\n                    }\n                }\n                catch (e_7_1) { e_7 = { error: e_7_1 }; }\n                finally {\n                    try {\n                        if (infos_2_1 && !infos_2_1.done && (_b = infos_2.return)) _b.call(infos_2);\n                    }\n                    finally { if (e_7) throw e_7.error; }\n                }\n            }\n            if (!localUniqueAddress) {\n                throw new Error(\"Could not find \" + ipVersion + \" address for interface \" + this.networkInterface);\n            }\n            return localUniqueAddress;\n        }\n    };\n    HAPConnection.getLocalNetworkInterface = function (socket) {\n        var e_8, _a, e_9, _b, e_10, _c, e_11, _d;\n        var localAddress = socket.localAddress;\n        if (localAddress.startsWith(\"::ffff:\")) { // IPv4-Mapped IPv6 Address https://tools.ietf.org/html/rfc4291#section-2.5.5.2\n            localAddress = localAddress.substring(7);\n        }\n        else {\n            var index = localAddress.indexOf(\"%\");\n            if (index !== -1) { // link-local ipv6\n                localAddress = localAddress.substring(0, index);\n            }\n        }\n        var interfaces = os_1.default.networkInterfaces();\n        try {\n            for (var _e = tslib_1.__values(Object.entries(interfaces)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                var _g = tslib_1.__read(_f.value, 2), name = _g[0], infos = _g[1];\n                if (infos) {\n                    try {\n                        for (var infos_3 = (e_9 = void 0, tslib_1.__values(infos)), infos_3_1 = infos_3.next(); !infos_3_1.done; infos_3_1 = infos_3.next()) {\n                            var info = infos_3_1.value;\n                            if (info.address === localAddress) {\n                                return name;\n                            }\n                        }\n                    }\n                    catch (e_9_1) { e_9 = { error: e_9_1 }; }\n                    finally {\n                        try {\n                            if (infos_3_1 && !infos_3_1.done && (_b = infos_3.return)) _b.call(infos_3);\n                        }\n                        finally { if (e_9) throw e_9.error; }\n                    }\n                }\n            }\n        }\n        catch (e_8_1) { e_8 = { error: e_8_1 }; }\n        finally {\n            try {\n                if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n            }\n            finally { if (e_8) throw e_8.error; }\n        }\n        // we couldn't map the address from above, we try now to match subnets (see https://github.com/homebridge/HAP-NodeJS/issues/847)\n        var family = net_1.default.isIPv4(localAddress) ? \"IPv4\" : \"IPv6\";\n        try {\n            for (var _h = tslib_1.__values(Object.entries(interfaces)), _j = _h.next(); !_j.done; _j = _h.next()) {\n                var _k = tslib_1.__read(_j.value, 2), name = _k[0], infos = _k[1];\n                if (infos) {\n                    try {\n                        for (var infos_4 = (e_11 = void 0, tslib_1.__values(infos)), infos_4_1 = infos_4.next(); !infos_4_1.done; infos_4_1 = infos_4.next()) {\n                            var info = infos_4_1.value;\n                            if (info.family !== family) {\n                                continue;\n                            }\n                            // check if the localAddress is in the same subnet\n                            if ((0, domain_formatter_1.getNetAddress)(localAddress, info.netmask) === (0, domain_formatter_1.getNetAddress)(info.address, info.netmask)) {\n                                return name;\n                            }\n                        }\n                    }\n                    catch (e_11_1) { e_11 = { error: e_11_1 }; }\n                    finally {\n                        try {\n                            if (infos_4_1 && !infos_4_1.done && (_d = infos_4.return)) _d.call(infos_4);\n                        }\n                        finally { if (e_11) throw e_11.error; }\n                    }\n                }\n            }\n        }\n        catch (e_10_1) { e_10 = { error: e_10_1 }; }\n        finally {\n            try {\n                if (_j && !_j.done && (_c = _h.return)) _c.call(_h);\n            }\n            finally { if (e_10) throw e_10.error; }\n        }\n        console.log(\"WARNING couldn't map socket coming from remote address \".concat(socket.remoteAddress, \":\").concat(socket.remotePort, \"     at local address \").concat(socket.localAddress, \" to a interface!\"));\n        return Object.keys(interfaces)[1]; // just use the first interface after the loopback interface as fallback\n    };\n    return HAPConnection;\n}(events_1.EventEmitter));\nexports.HAPConnection = HAPConnection;\n//# sourceMappingURL=eventedhttp.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.layerDecrypt = exports.layerEncrypt = exports.chacha20_poly1305_encryptAndSeal = exports.chacha20_poly1305_decryptAndVerify = exports.writeUInt64LE = exports.HKDF = exports.generateCurve25519SharedSecKey = exports.generateCurve25519KeyPair = void 0;\nvar tslib_1 = require(\"tslib\");\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar crypto_1 = tslib_1.__importDefault(require(\"crypto\"));\nvar futoin_hkdf_1 = tslib_1.__importDefault(require(\"futoin-hkdf\"));\nvar tweetnacl_1 = tslib_1.__importDefault(require(\"tweetnacl\"));\nif (!crypto_1.default.getCiphers().includes(\"chacha20-poly1305\")) {\n    assert_1.default.fail(\"The cipher 'chacha20-poly1305' is not supported with your current running nodejs version v\" + process.version + \". \" +\n        \"At least a nodejs version of v10.17.0 (excluding v11.0 and v11.1) is required!\");\n}\n/**\n * @group Cryptography\n */\nfunction generateCurve25519KeyPair() {\n    return tweetnacl_1.default.box.keyPair();\n}\nexports.generateCurve25519KeyPair = generateCurve25519KeyPair;\n/**\n * @group Cryptography\n */\nfunction generateCurve25519SharedSecKey(priKey, pubKey) {\n    return tweetnacl_1.default.scalarMult(priKey, pubKey);\n}\nexports.generateCurve25519SharedSecKey = generateCurve25519SharedSecKey;\n/**\n * @group Cryptography\n */\nfunction HKDF(hashAlg, salt, ikm, info, size) {\n    return (0, futoin_hkdf_1.default)(ikm, size, { hash: hashAlg, salt: salt, info: info });\n}\nexports.HKDF = HKDF;\nvar MAX_UINT32 = 0x00000000FFFFFFFF;\nvar MAX_INT53 = 0x001FFFFFFFFFFFFF;\nfunction uintHighLow(number) {\n    (0, assert_1.default)(number > -1 && number <= MAX_INT53, \"number out of range\");\n    (0, assert_1.default)(Math.floor(number) === number, \"number must be an integer\");\n    var high = 0;\n    var signbit = number & 0xFFFFFFFF;\n    var low = signbit < 0 ? (number & 0x7FFFFFFF) + 0x80000000 : signbit;\n    if (number > MAX_UINT32) {\n        high = (number - low) / (MAX_UINT32 + 1);\n    }\n    return [high, low];\n}\n/**\n * @group Utils\n */\nfunction writeUInt64LE(number, buffer, offset) {\n    if (offset === void 0) { offset = 0; }\n    var hl = uintHighLow(number);\n    buffer.writeUInt32LE(hl[1], offset);\n    buffer.writeUInt32LE(hl[0], offset + 4);\n}\nexports.writeUInt64LE = writeUInt64LE;\n//Security Layer Enc/Dec\n/**\n * @group Cryptography\n */\nfunction chacha20_poly1305_decryptAndVerify(key, nonce, aad, ciphertext, authTag) {\n    if (nonce.length < 12) { // openssl 3.x.x requires 98 bits nonce length\n        nonce = Buffer.concat([\n            Buffer.alloc(12 - nonce.length, 0),\n            nonce,\n        ]);\n    }\n    var decipher = crypto_1.default.createDecipheriv(\"chacha20-poly1305\", key, nonce, { authTagLength: 16 });\n    if (aad) {\n        decipher.setAAD(aad, { plaintextLength: ciphertext.length });\n    }\n    decipher.setAuthTag(authTag);\n    var plaintext = decipher.update(ciphertext);\n    decipher.final(); // final call verifies integrity using the auth tag. Throws error if something was manipulated!\n    return plaintext;\n}\nexports.chacha20_poly1305_decryptAndVerify = chacha20_poly1305_decryptAndVerify;\n/**\n * @group Cryptography\n */\nfunction chacha20_poly1305_encryptAndSeal(key, nonce, aad, plaintext) {\n    if (nonce.length < 12) { // openssl 3.x.x requires 98 bits nonce length\n        nonce = Buffer.concat([\n            Buffer.alloc(12 - nonce.length, 0),\n            nonce,\n        ]);\n    }\n    var cipher = crypto_1.default.createCipheriv(\"chacha20-poly1305\", key, nonce, { authTagLength: 16 });\n    if (aad) {\n        cipher.setAAD(aad, { plaintextLength: plaintext.length });\n    }\n    var ciphertext = cipher.update(plaintext);\n    cipher.final(); // final call creates the auth tag\n    var authTag = cipher.getAuthTag();\n    return {\n        ciphertext: ciphertext,\n        authTag: authTag,\n    };\n}\nexports.chacha20_poly1305_encryptAndSeal = chacha20_poly1305_encryptAndSeal;\n/**\n * @group Cryptography\n */\nfunction layerEncrypt(data, encryption) {\n    var result = Buffer.alloc(0);\n    var total = data.length;\n    for (var offset = 0; offset < total;) {\n        var length = Math.min(total - offset, 0x400);\n        var leLength = Buffer.alloc(2);\n        leLength.writeUInt16LE(length, 0);\n        var nonce = Buffer.alloc(8);\n        writeUInt64LE(encryption.accessoryToControllerCount++, nonce, 0);\n        var encrypted = chacha20_poly1305_encryptAndSeal(encryption.accessoryToControllerKey, nonce, leLength, data.slice(offset, offset + length));\n        offset += length;\n        result = Buffer.concat([result, leLength, encrypted.ciphertext, encrypted.authTag]);\n    }\n    return result;\n}\nexports.layerEncrypt = layerEncrypt;\n/**\n * @group Cryptography\n */\nfunction layerDecrypt(packet, encryption) {\n    if (encryption.incompleteFrame) {\n        packet = Buffer.concat([encryption.incompleteFrame, packet]);\n        encryption.incompleteFrame = undefined;\n    }\n    var result = Buffer.alloc(0);\n    var total = packet.length;\n    for (var offset = 0; offset < total;) {\n        var realDataLength = packet.slice(offset, offset + 2).readUInt16LE(0);\n        var availableDataLength = total - offset - 2 - 16;\n        if (realDataLength > availableDataLength) { // Fragmented packet\n            encryption.incompleteFrame = packet.slice(offset);\n            break;\n        }\n        var nonce = Buffer.alloc(8);\n        writeUInt64LE(encryption.controllerToAccessoryCount++, nonce, 0);\n        var plaintext = chacha20_poly1305_decryptAndVerify(encryption.controllerToAccessoryKey, nonce, packet.slice(offset, offset + 2), packet.slice(offset + 2, offset + 2 + realDataLength), packet.slice(offset + 2 + realDataLength, offset + 2 + realDataLength + 16));\n        result = Buffer.concat([result, plaintext]);\n        offset += (18 + realDataLength);\n    }\n    return result;\n}\nexports.layerDecrypt = layerDecrypt;\n//# sourceMappingURL=hapCrypto.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HapStatusError = void 0;\nvar tslib_1 = require(\"tslib\");\nvar HAPServer_1 = require(\"../HAPServer\");\n/**\n * Throws a HAP status error that is sent back to HomeKit.\n *\n * @example\n * ```ts\n * throw new HapStatusError(HAPStatus.OPERATION_TIMED_OUT);\n * ```\n *\n * @group Utils\n */\nvar HapStatusError = /** @class */ (function (_super) {\n    tslib_1.__extends(HapStatusError, _super);\n    function HapStatusError(status) {\n        var _this = _super.call(this, \"HAP Status Error: \" + status) || this;\n        Object.setPrototypeOf(_this, HapStatusError.prototype);\n        if ((0, HAPServer_1.IsKnownHAPStatusError)(status)) {\n            _this.hapStatus = status;\n        }\n        else {\n            _this.hapStatus = -70402 /* HAPStatus.SERVICE_COMMUNICATION_FAILURE */;\n        }\n        return _this;\n    }\n    return HapStatusError;\n}(Error));\nexports.HapStatusError = HapStatusError;\n//# sourceMappingURL=hapStatusError.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getOSLoopbackAddressIfAvailable = exports.getOSLoopbackAddress = exports.findLoopbackAddress = void 0;\nvar tslib_1 = require(\"tslib\");\nvar os_1 = tslib_1.__importDefault(require(\"os\"));\n/**\n * @group Utils\n */\nfunction findLoopbackAddress() {\n    var e_1, _a, e_2, _b;\n    var ipv6 = undefined; // ::1/128\n    var ipv6LinkLocal = undefined; // fe80::/10\n    var ipv4 = undefined; // 127.0.0.1/8\n    try {\n        for (var _c = tslib_1.__values(Object.entries(os_1.default.networkInterfaces())), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var _e = tslib_1.__read(_d.value, 2), name = _e[0], infos = _e[1];\n            var internal = false;\n            if (infos) {\n                try {\n                    for (var infos_1 = (e_2 = void 0, tslib_1.__values(infos)), infos_1_1 = infos_1.next(); !infos_1_1.done; infos_1_1 = infos_1.next()) {\n                        var info = infos_1_1.value;\n                        if (!info.internal) {\n                            continue;\n                        }\n                        internal = true;\n                        // @ts-expect-error Nodejs 18+ uses the number 4 the string \"IPv4\"\n                        if (info.family === \"IPv4\" || info.family === 4) {\n                            if (!ipv4) {\n                                ipv4 = info.address;\n                            }\n                            // @ts-expect-error Nodejs 18+ uses the number 6 the string \"IPv6\"\n                        }\n                        else if (info.family === \"IPv6\" || info.family === 6) {\n                            if (info.scopeid) {\n                                if (!ipv6LinkLocal) {\n                                    ipv6LinkLocal = info.address + \"%\" + name; // ipv6 link local addresses are only valid with a scope\n                                }\n                            }\n                            else if (!ipv6) {\n                                ipv6 = info.address;\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (infos_1_1 && !infos_1_1.done && (_b = infos_1.return)) _b.call(infos_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (internal) {\n                break;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    var address = ipv4 || ipv6 || ipv6LinkLocal;\n    if (!address) {\n        throw new Error(\"Could not find a valid loopback address on the platform!\");\n    }\n    return address;\n}\nexports.findLoopbackAddress = findLoopbackAddress;\nvar loopbackAddress = undefined; // loopback addressed used for the internal http server (::1 or 127.0.0.1)\n/**\n * Returns the loopback address for the machine.\n * Uses IPV4 loopback address by default and falls back to global unique IPv6 loopback and then\n * link local IPv6 loopback address.\n * If no loopback interface could be found a error is thrown.\n *\n * @group Utils\n */\nfunction getOSLoopbackAddress() {\n    return loopbackAddress !== null && loopbackAddress !== void 0 ? loopbackAddress : (loopbackAddress = findLoopbackAddress());\n}\nexports.getOSLoopbackAddress = getOSLoopbackAddress;\n/**\n * Refer to {@link getOSLoopbackAddress}.\n * Instead of throwing an error, undefined is returned if loopback interface couldn't be detected.\n *\n * @group Utils\n */\nfunction getOSLoopbackAddressIfAvailable() {\n    try {\n        return loopbackAddress !== null && loopbackAddress !== void 0 ? loopbackAddress : (loopbackAddress = findLoopbackAddress());\n    }\n    catch (error) {\n        console.log(error.stack);\n        return undefined;\n    }\n}\nexports.getOSLoopbackAddressIfAvailable = getOSLoopbackAddressIfAvailable;\n//# sourceMappingURL=net-utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.once = void 0;\nvar tslib_1 = require(\"tslib\");\n/**\n * Function wrapper to ensure a function/callback is only called once.\n *\n * @group Utils\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction once(func) {\n    var called = false;\n    return (function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (called) {\n            throw new Error(\"This callback function has already been called by someone else; it can only be called one time.\");\n        }\n        else {\n            called = true;\n            return func.apply(void 0, tslib_1.__spreadArray([], tslib_1.__read(args), false));\n        }\n    });\n}\nexports.once = once;\n//# sourceMappingURL=once.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.awaitEventOnce = exports.PromiseTimeout = void 0;\n/**\n * @group Utils\n */\nfunction PromiseTimeout(timeout) {\n    return new Promise(function (resolve) {\n        setTimeout(function () { return resolve(); }, timeout);\n    });\n}\nexports.PromiseTimeout = PromiseTimeout;\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction awaitEventOnce(element, event, timeout) {\n    if (timeout === void 0) { timeout = 5000; }\n    return new Promise(function (resolve, reject) {\n        // eslint-disable-next-line prefer-const\n        var timeoutId;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var resolveListener = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            clearTimeout(timeoutId);\n            resolve(args.length ? (args.length === 1 ? args[0] : args) : undefined);\n        };\n        timeoutId = setTimeout(function () {\n            element.removeListener(event, resolveListener);\n            reject(new Error(\"awaitEvent for event \".concat(event, \" timed out!\")));\n        }, timeout);\n        element.once(event, resolveListener);\n    });\n}\nexports.awaitEventOnce = awaitEventOnce;\n//# sourceMappingURL=promise-utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.numericUpperBound = exports.numericLowerBound = exports.isIntegerNumericFormat = exports.isUnsignedNumericFormat = exports.isNumericFormat = exports.formatOutgoingCharacteristicValue = void 0;\nfunction formatOutgoingCharacteristicValue(value, props) {\n    var _a;\n    if (typeof value === \"boolean\") {\n        return value ? 1 : 0;\n    }\n    else if (typeof value === \"number\") {\n        if (!props.minStep || props.minStep >= 1) {\n            return value;\n        }\n        var base = (_a = props.minValue) !== null && _a !== void 0 ? _a : 0;\n        var inverse = 1 / props.minStep;\n        return Math.round(((Math.round((value - base) * inverse) / inverse) + base) * 10000) / 10000;\n    }\n    return value;\n}\nexports.formatOutgoingCharacteristicValue = formatOutgoingCharacteristicValue;\n/**\n * @group Utils\n */\nfunction isNumericFormat(format) {\n    switch (format) {\n        case \"int\" /* Formats.INT */:\n        case \"float\" /* Formats.FLOAT */:\n        case \"uint8\" /* Formats.UINT8 */:\n        case \"uint16\" /* Formats.UINT16 */:\n        case \"uint32\" /* Formats.UINT32 */:\n        case \"uint64\" /* Formats.UINT64 */:\n            return true;\n        default:\n            return false;\n    }\n}\nexports.isNumericFormat = isNumericFormat;\n/**\n * @group Utils\n */\nfunction isUnsignedNumericFormat(format) {\n    switch (format) {\n        case \"uint8\" /* Formats.UINT8 */:\n        case \"uint16\" /* Formats.UINT16 */:\n        case \"uint32\" /* Formats.UINT32 */:\n        case \"uint64\" /* Formats.UINT64 */:\n            return true;\n        default:\n            return false;\n    }\n}\nexports.isUnsignedNumericFormat = isUnsignedNumericFormat;\n/**\n * @group Utils\n */\nfunction isIntegerNumericFormat(format) {\n    switch (format) {\n        case \"int\" /* Formats.INT */:\n        case \"uint8\" /* Formats.UINT8 */:\n        case \"uint16\" /* Formats.UINT16 */:\n        case \"uint32\" /* Formats.UINT32 */:\n        case \"uint64\" /* Formats.UINT64 */:\n            return true;\n        default:\n            return false;\n    }\n}\nexports.isIntegerNumericFormat = isIntegerNumericFormat;\n/**\n * @group Utils\n */\nfunction numericLowerBound(format) {\n    switch (format) {\n        case \"int\" /* Formats.INT */:\n            return -2147483648;\n        case \"float\" /* Formats.FLOAT */:\n            return -Number.MAX_VALUE;\n        case \"uint8\" /* Formats.UINT8 */:\n        case \"uint16\" /* Formats.UINT16 */:\n        case \"uint32\" /* Formats.UINT32 */:\n        case \"uint64\" /* Formats.UINT64 */:\n            return 0;\n        default:\n            throw new Error(\"Unable to determine numeric lower bound for \" + format);\n    }\n}\nexports.numericLowerBound = numericLowerBound;\n/**\n * @group Utils\n */\nfunction numericUpperBound(format) {\n    switch (format) {\n        case \"int\" /* Formats.INT */:\n            return 2147483647;\n        case \"float\" /* Formats.FLOAT */:\n            return Number.MAX_VALUE;\n        case \"uint8\" /* Formats.UINT8 */:\n            return 255;\n        case \"uint16\" /* Formats.UINT16 */:\n            return 65535;\n        case \"uint32\" /* Formats.UINT32 */:\n            return 4294967295;\n        case \"uint64\" /* Formats.UINT64 */:\n            // eslint-disable-next-line @typescript-eslint/no-loss-of-precision\n            return 18446744073709551615; // don't get fooled, javascript uses 18446744073709552000 here\n        default:\n            throw new Error(\"Unable to determine numeric lower bound for \" + format);\n    }\n}\nexports.numericUpperBound = numericUpperBound;\n//# sourceMappingURL=request-util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.epochMillisFromMillisSince2001_01_01Buffer = exports.epochMillisFromMillisSince2001_01_01 = void 0;\nvar tslib_1 = require(\"tslib\");\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar tlv_1 = require(\"./tlv\");\nvar EPOCH_MILLIS_2001_01_01 = Date.UTC(2001, 0, 1, 0, 0, 0, 0);\n/**\n * @group Utils\n */\nfunction epochMillisFromMillisSince2001_01_01(millis) {\n    return EPOCH_MILLIS_2001_01_01 + millis;\n}\nexports.epochMillisFromMillisSince2001_01_01 = epochMillisFromMillisSince2001_01_01;\n/**\n * @group Utils\n */\nfunction epochMillisFromMillisSince2001_01_01Buffer(millis) {\n    (0, assert_1.default)(millis.length === 8, \"can only parse 64 bit buffers!\");\n    var millisSince2001 = (0, tlv_1.readUInt64LE)(millis);\n    return epochMillisFromMillisSince2001_01_01(millisSince2001);\n}\nexports.epochMillisFromMillisSince2001_01_01Buffer = epochMillisFromMillisSince2001_01_01Buffer;\n//# sourceMappingURL=time.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.writeVariableUIntLE = exports.readVariableUIntLE = exports.readUInt16 = exports.writeUInt16 = exports.writeFloat32LE = exports.readUInt32 = exports.writeUInt32 = exports.readUInt64BE = exports.readUInt64LE = exports.readUInt64 = exports.writeUInt64 = exports.decodeList = exports.decodeWithLists = exports.decode = exports.encode = void 0;\nvar tslib_1 = require(\"tslib\");\nvar assert_1 = tslib_1.__importDefault(require(\"assert\"));\nvar hapCrypto = tslib_1.__importStar(require(\"../util/hapCrypto\"));\n/**\n * Type Length Value encoding/decoding, used by HAP as a wire format.\n * https://en.wikipedia.org/wiki/Type-length-value\n */\nvar EMPTY_TLV_TYPE = 0x00; // and empty tlv with id 0 is usually used as delimiter for tlv lists\n/**\n * @group TLV8\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction encode(type, data) {\n    var e_1, _a;\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    var encodedTLVBuffers = [];\n    // coerce data to Buffer if needed\n    if (typeof data === \"number\") {\n        data = Buffer.from([data]);\n    }\n    else if (typeof data === \"string\") {\n        data = Buffer.from(data);\n    }\n    if (Array.isArray(data)) {\n        var first = true;\n        try {\n            for (var data_1 = tslib_1.__values(data), data_1_1 = data_1.next(); !data_1_1.done; data_1_1 = data_1.next()) {\n                var entry = data_1_1.value;\n                if (!first) {\n                    encodedTLVBuffers.push(Buffer.from([EMPTY_TLV_TYPE, 0])); // push delimiter\n                }\n                first = false;\n                encodedTLVBuffers.push(encode(type, entry));\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (data_1_1 && !data_1_1.done && (_a = data_1.return)) _a.call(data_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        if (first) { // we have a zero length array!\n            encodedTLVBuffers.push(Buffer.from([type, 0]));\n        }\n    }\n    else if (data.length <= 255) {\n        encodedTLVBuffers.push(Buffer.concat([Buffer.from([type, data.length]), data]));\n    }\n    else { // otherwise it doesn't fit into one tlv entry, thus we push multiple\n        var leftBytes = data.length;\n        var currentIndex = 0;\n        for (; leftBytes > 0;) {\n            if (leftBytes >= 255) {\n                encodedTLVBuffers.push(Buffer.concat([Buffer.from([type, 0xFF]), data.slice(currentIndex, currentIndex + 255)]));\n                leftBytes -= 255;\n                currentIndex += 255;\n            }\n            else {\n                encodedTLVBuffers.push(Buffer.concat([Buffer.from([type, leftBytes]), data.slice(currentIndex)]));\n                leftBytes -= leftBytes;\n            }\n        }\n    }\n    // do we have more arguments to encode?\n    if (args.length >= 2) {\n        // chop off the first two arguments which we already processed, and process the rest recursively\n        var _b = tslib_1.__read(args), nextType = _b[0], nextData = _b[1], nextArgs = _b.slice(2);\n        var remainingTLVBuffer = encode.apply(void 0, tslib_1.__spreadArray([nextType, nextData], tslib_1.__read(nextArgs), false));\n        // append the remaining encoded arguments directly to the buffer\n        encodedTLVBuffers.push(remainingTLVBuffer);\n    }\n    return Buffer.concat(encodedTLVBuffers);\n}\nexports.encode = encode;\n/**\n * This method is the legacy way of decoding tlv data.\n * It will not properly decode multiple list of the same id.\n * Should the decoder encounter multiple instances of the same id, it will just concatenate the buffer data.\n *\n * @param buffer - TLV8 data\n *\n * Note: Please use {@link decodeWithLists} which properly decodes list elements.\n *\n * @group TLV8\n */\nfunction decode(buffer) {\n    (0, assert_1.default)(buffer instanceof Buffer, \"Illegal argument. tlv.decode() expects Buffer type!\");\n    var objects = {};\n    var leftLength = buffer.length;\n    var currentIndex = 0;\n    for (; leftLength > 0;) {\n        var type = buffer[currentIndex];\n        var length = buffer[currentIndex + 1];\n        currentIndex += 2;\n        leftLength -= 2;\n        var data = buffer.slice(currentIndex, currentIndex + length);\n        if (objects[type]) {\n            objects[type] = Buffer.concat([objects[type], data]);\n        }\n        else {\n            objects[type] = data;\n        }\n        currentIndex += length;\n        leftLength -= length;\n    }\n    return objects;\n}\nexports.decode = decode;\n/**\n * Decode a buffer coding TLV8 encoded entries.\n *\n * This method decodes multiple entries split by a TLV delimiter properly into Buffer arrays.\n * It properly reassembles tlv entries if they were split across multiple entries due to exceeding the max tlv entry size of 255 bytes.\n * @param buffer - The Buffer containing TLV8 encoded data.\n *\n * @group TLV8\n */\nfunction decodeWithLists(buffer) {\n    var result = {};\n    var leftBytes = buffer.length;\n    var readIndex = 0;\n    var lastType = -1;\n    var lastLength = -1;\n    var lastItemWasDelimiter = false;\n    for (; leftBytes > 0;) {\n        var type = buffer.readUInt8(readIndex++);\n        var length = buffer.readUInt8(readIndex++);\n        leftBytes -= 2;\n        var data = buffer.slice(readIndex, readIndex + length);\n        readIndex += length;\n        leftBytes -= length;\n        if (type === 0 && length === 0) {\n            lastItemWasDelimiter = true;\n            continue;\n        }\n        var existing = result[type];\n        if (existing) { // there is already an item with the same type\n            if (lastItemWasDelimiter && lastType === type) { // list of tlv types\n                if (Array.isArray(existing)) {\n                    existing.push(data);\n                }\n                else {\n                    result[type] = [existing, data];\n                }\n            }\n            else if (lastType === type && lastLength === 255) { // tlv data got split into multiple entries as length exceeded 255\n                if (Array.isArray(existing)) {\n                    // append to the last data blob in the array\n                    var last = existing[existing.length - 1];\n                    existing[existing.length - 1] = Buffer.concat([last, data]);\n                }\n                else {\n                    result[type] = Buffer.concat([existing, data]);\n                }\n            }\n            else {\n                throw new Error(\"Found duplicated tlv entry with type \".concat(type, \" and length \").concat(length, \"         (lastItemWasDelimiter: \").concat(lastItemWasDelimiter, \", lastType: \").concat(lastType, \", lastLength: \").concat(lastLength, \")\"));\n            }\n        }\n        else {\n            result[type] = data;\n        }\n        lastType = type;\n        lastLength = length;\n        lastItemWasDelimiter = false;\n    }\n    return result;\n}\nexports.decodeWithLists = decodeWithLists;\n/**\n * This method can be used to parse a TLV8 encoded list that was concatenated.\n *\n * If you are thinking about using this method, try to refactor the code to use {@link decodeWithLists} instead of {@link decode}.\n * The single reason of this method's existence are the shortcomings {@link decode}, as it concatenates multiple tlv8 list entries\n * into a single Buffer.\n * This method can be used to undo that, by specifying the concatenated buffer and the tlv id of the element that should\n * mark the beginning of a new tlv8 list entry.\n *\n * @param data - The concatenated tlv8 list entries (probably output of {@link decode}).\n * @param entryStartId - The tlv id that marks the beginning of a new tlv8 entry.\n *\n * @group TLV8\n */\nfunction decodeList(data, entryStartId) {\n    var objectsList = [];\n    var leftLength = data.length;\n    var currentIndex = 0;\n    var objects = undefined;\n    for (; leftLength > 0;) {\n        var type = data[currentIndex]; // T\n        var length = data[currentIndex + 1]; // L\n        var value = data.slice(currentIndex + 2, currentIndex + 2 + length); // V\n        if (type === entryStartId) { // we got the start of a new entry\n            if (objects !== undefined) { // save the previous entry\n                objectsList.push(objects);\n            }\n            objects = {};\n        }\n        if (objects === undefined) {\n            throw new Error(\"Error parsing tlv list: Encountered uninitialized storage object\");\n        }\n        if (objects[type]) { // append to buffer if we have already data for this type\n            objects[type] = Buffer.concat([objects[type], value]);\n        }\n        else {\n            objects[type] = value;\n        }\n        currentIndex += 2 + length;\n        leftLength -= 2 + length;\n    }\n    if (objects !== undefined) {\n        objectsList.push(objects);\n    } // push last entry\n    return objectsList;\n}\nexports.decodeList = decodeList;\n/**\n * @deprecated This implementation is considered broken. Don't use it.\n *\n * @group TLV8\n */\nfunction writeUInt64(value) {\n    var float64 = new Float64Array(1);\n    float64[0] = value;\n    var buffer = Buffer.alloc(float64.buffer.byteLength);\n    var view = new Uint8Array(float64.buffer);\n    for (var i = 0; i < buffer.length; i++) {\n        buffer[i] = view[i];\n    }\n    return buffer;\n}\nexports.writeUInt64 = writeUInt64;\n// noinspection JSUnusedGlobalSymbols\n/**\n * @deprecated This implementation is considered broken. Don't use it.\n *\n * @group TLV8\n */\nfunction readUInt64(buffer) {\n    var float64 = new Float64Array(buffer);\n    return float64[0];\n}\nexports.readUInt64 = readUInt64;\n/**\n * @group TLV8\n */\nfunction readUInt64LE(buffer, offset) {\n    if (offset === void 0) { offset = 0; }\n    var low = buffer.readUInt32LE(offset);\n    // javascript doesn't allow to shift by 32(?), therefore we multiply here\n    return buffer.readUInt32LE(offset + 4) * 0x100000000 + low;\n}\nexports.readUInt64LE = readUInt64LE;\n// noinspection JSUnusedGlobalSymbols\n/**\n * @deprecated The method was named wrongfully and actually reads an UInt64 in **little endian** format.\n * @group TLV8\n */\nfunction readUInt64BE(buffer, offset) {\n    if (offset === void 0) { offset = 0; }\n    return readUInt64LE(buffer, offset);\n}\nexports.readUInt64BE = readUInt64BE;\n/**\n * `writeUint32LE`\n * @group TLV8\n */\nfunction writeUInt32(value) {\n    var buffer = Buffer.alloc(4);\n    buffer.writeUInt32LE(value, 0);\n    return buffer;\n}\nexports.writeUInt32 = writeUInt32;\n/**\n * `readUInt32LE`\n * @group TLV8\n */\nfunction readUInt32(buffer) {\n    return buffer.readUInt32LE(0);\n}\nexports.readUInt32 = readUInt32;\n/**\n * @group TLV8\n */\nfunction writeFloat32LE(value) {\n    var buffer = Buffer.alloc(4);\n    buffer.writeFloatLE(value, 0);\n    return buffer;\n}\nexports.writeFloat32LE = writeFloat32LE;\n/**\n * `writeUInt16LE`\n * @group TLV8\n */\nfunction writeUInt16(value) {\n    var buffer = Buffer.alloc(2);\n    buffer.writeUInt16LE(value, 0);\n    return buffer;\n}\nexports.writeUInt16 = writeUInt16;\n/**\n * `readUInt16LE`\n * @group TLV8\n */\nfunction readUInt16(buffer) {\n    return buffer.readUInt16LE(0);\n}\nexports.readUInt16 = readUInt16;\nfunction readVariableUIntLE(buffer, offset) {\n    if (offset === void 0) { offset = 0; }\n    (0, assert_1.default)(offset === 0, \"Can't define a offset different than 0!\");\n    switch (buffer.length) {\n        case 1:\n            return buffer.readUInt8(offset);\n        case 2:\n            return buffer.readUInt16LE(offset);\n        case 4:\n            return buffer.readUInt32LE(offset);\n        case 8:\n            return readUInt64LE(buffer, offset);\n        default:\n            throw new Error(\"Can't read uint LE with length \" + buffer.length);\n    }\n}\nexports.readVariableUIntLE = readVariableUIntLE;\nfunction writeVariableUIntLE(number, offset) {\n    if (offset === void 0) { offset = 0; }\n    (0, assert_1.default)(number >= 0, \"Can't encode a negative integer as unsigned integer\");\n    (0, assert_1.default)(offset === 0, \"Can't define a offset different than 0!\");\n    if (number <= 255) {\n        var buffer = Buffer.alloc(1);\n        buffer.writeUInt8(number, offset);\n        return buffer;\n    }\n    else if (number <= 65535) {\n        return writeUInt16(number);\n    }\n    else if (number <= 4294967295) {\n        return writeUInt32(number);\n    }\n    else {\n        var buffer = Buffer.alloc(8);\n        hapCrypto.writeUInt64LE(number, buffer, offset);\n        return buffer;\n    }\n}\nexports.writeVariableUIntLE = writeVariableUIntLE;\n//# sourceMappingURL=tlv.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toLongForm = exports.toShortForm = exports.write = exports.unparse = exports.isValid = exports.generate = exports.BASE_UUID = void 0;\nvar tslib_1 = require(\"tslib\");\nvar crypto_1 = tslib_1.__importDefault(require(\"crypto\"));\nexports.BASE_UUID = \"-0000-1000-8000-0026BB765291\";\n// http://stackoverflow.com/a/25951500/66673\nfunction generate(data) {\n    var sha1sum = crypto_1.default.createHash(\"sha1\");\n    sha1sum.update(data);\n    var s = sha1sum.digest(\"hex\");\n    var i = -1;\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n        i += 1;\n        switch (c) {\n            case \"y\":\n                return ((parseInt(\"0x\" + s[i], 16) & 0x3) | 0x8).toString(16);\n            case \"x\":\n            default:\n                return s[i];\n        }\n    });\n}\nexports.generate = generate;\nvar VALID_UUID_REGEX = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nfunction isValid(UUID) {\n    return VALID_UUID_REGEX.test(UUID);\n}\nexports.isValid = isValid;\nfunction unparse(buf, offset) {\n    if (offset === void 0) { offset = 0; }\n    if (typeof buf === \"string\" && isValid(buf)) {\n        /*\n          This check was added to fix backwards compatibility with the old style CameraSource API.\n          The old StreamController implementation would not unparse the HAP provided sessionId for the current streaming session.\n          This was changed when the new Controller API was introduced, which now turns the sessionId Buffer into a string\n          and passes it to the implementor of the Camera.\n          Old style CameraSource implementations would use this unparse function to turn the Buffer into a string.\n          As the sessionId is already a string we just return it here.\n    \n          The buf attribute being a also type of \"string\" as actually an error. Also I don't know who decided to\n          not unparse the sessionId. I'm only here to fix things.\n         */\n        return buf;\n    }\n    var i = offset;\n    return buf.toString(\"hex\", i, (i += 4)) + \"-\" +\n        buf.toString(\"hex\", i, (i += 2)) + \"-\" +\n        buf.toString(\"hex\", i, (i += 2)) + \"-\" +\n        buf.toString(\"hex\", i, (i += 2)) + \"-\" +\n        buf.toString(\"hex\", i, i + 6);\n}\nexports.unparse = unparse;\nfunction write(uuid, buf, offset) {\n    if (offset === void 0) { offset = 0; }\n    var buffer = Buffer.from(uuid.replace(/-/g, \"\"), \"hex\");\n    if (buf) {\n        buffer.copy(buf, offset);\n        return buf;\n    }\n    else {\n        return buffer;\n    }\n}\nexports.write = write;\nvar SHORT_FORM_REGEX = /^0*([0-9a-f]{1,8})-([0-9a-f]{4}-){3}[0-9a-f]{12}$/i;\nfunction toShortForm(uuid, base) {\n    if (base === void 0) { base = exports.BASE_UUID; }\n    if (!isValid(uuid)) {\n        throw new TypeError(\"uuid was not a valid UUID or short form UUID\");\n    }\n    if (base && !isValid(\"00000000\" + base)) {\n        throw new TypeError(\"base was not a valid base UUID\");\n    }\n    if (base && !uuid.endsWith(base)) {\n        return uuid.toUpperCase();\n    }\n    return uuid.replace(SHORT_FORM_REGEX, \"$1\").toUpperCase();\n}\nexports.toShortForm = toShortForm;\nvar VALID_SHORT_REGEX = /^[0-9a-f]{1,8}$/i;\nfunction toLongForm(uuid, base) {\n    if (base === void 0) { base = exports.BASE_UUID; }\n    if (isValid(uuid)) {\n        return uuid.toUpperCase();\n    }\n    if (!VALID_SHORT_REGEX.test(uuid)) {\n        throw new TypeError(\"uuid was not a valid UUID or short form UUID\");\n    }\n    if (!isValid(\"00000000\" + base)) {\n        throw new TypeError(\"base was not a valid base UUID\");\n    }\n    return ((\"00000000\" + uuid).substr(-8) + base).toUpperCase();\n}\nexports.toLongForm = toLongForm;\n//# sourceMappingURL=uuid.js.map","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = \"./node_modules/hap-nodejs/dist/lib sync recursive\";\nmodule.exports = webpackEmptyContext;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ResourceRequestType = void 0;\n/**\n * @group HAP Accessory Server\n */\nvar ResourceRequestType;\n(function (ResourceRequestType) {\n    ResourceRequestType[\"IMAGE\"] = \"image\";\n})(ResourceRequestType || (exports.ResourceRequestType = ResourceRequestType = {}));\n//# sourceMappingURL=types.js.map","'use strict';\n\nvar $BigInt = typeof BigInt !== 'undefined' && BigInt;\n\nmodule.exports = function hasNativeBigInts() {\n\treturn typeof $BigInt === 'function'\n\t\t&& typeof BigInt === 'function'\n\t\t&& typeof $BigInt(42) === 'bigint' // eslint-disable-line no-magic-numbers\n\t\t&& typeof BigInt(42) === 'bigint'; // eslint-disable-line no-magic-numbers\n};\n","'use strict';\n\nmodule.exports = (flag, argv = process.argv) => {\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst position = argv.indexOf(prefix + flag);\n\tconst terminatorPosition = argv.indexOf('--');\n\treturn position !== -1 && (terminatorPosition === -1 || position < terminatorPosition);\n};\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar hasPropertyDescriptors = function hasPropertyDescriptors() {\n\treturn !!$defineProperty;\n};\n\nhasPropertyDescriptors.hasArrayLengthDefineBug = function hasArrayLengthDefineBug() {\n\t// node v0.6 has a bug where array lengths can be Set but not Defined\n\tif (!$defineProperty) {\n\t\treturn null;\n\t}\n\ttry {\n\t\treturn $defineProperty([], 'length', { value: 1 }).length !== 1;\n\t} catch (e) {\n\t\t// In Firefox 4-22, defining length on an array throws an exception.\n\t\treturn true;\n\t}\n};\n\nmodule.exports = hasPropertyDescriptors;\n","'use strict';\n\nvar test = {\n\t__proto__: null,\n\tfoo: {}\n};\n\nvar $Object = Object;\n\n/** @type {import('.')} */\nmodule.exports = function hasProto() {\n\t// @ts-expect-error: TS errors on an inherited property for some reason\n\treturn { __proto__: test }.foo === test.foo\n\t\t&& !(test instanceof $Object);\n};\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","'use strict';\n\nvar call = Function.prototype.call;\nvar $hasOwn = Object.prototype.hasOwnProperty;\nvar bind = require('function-bind');\n\n/** @type {import('.')} */\nmodule.exports = bind.call(call, $hasOwn);\n","'use strict';\n\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar callBound = require('call-bind/callBound');\n\nvar $toString = callBound('Object.prototype.toString');\n\nvar isStandardArguments = function isArguments(value) {\n\tif (hasToStringTag && value && typeof value === 'object' && Symbol.toStringTag in value) {\n\t\treturn false;\n\t}\n\treturn $toString(value) === '[object Arguments]';\n};\n\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.length === 'number' &&\n\t\tvalue.length >= 0 &&\n\t\t$toString(value) !== '[object Array]' &&\n\t\t$toString(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","'use strict';\n\nvar callBind = require('call-bind');\nvar callBound = require('call-bind/callBound');\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $ArrayBuffer = GetIntrinsic('%ArrayBuffer%', true);\n/** @type {undefined | ((receiver: ArrayBuffer) => number) | ((receiver: unknown) => never)} */\nvar $byteLength = callBound('ArrayBuffer.prototype.byteLength', true);\nvar $toString = callBound('Object.prototype.toString');\n\n// in node 0.10, ArrayBuffers have no prototype methods, but have an own slot-checking `slice` method\nvar abSlice = !!$ArrayBuffer && !$byteLength && new $ArrayBuffer(0).slice;\nvar $abSlice = !!abSlice && callBind(abSlice);\n\n/** @type {import('.')} */\nmodule.exports = $byteLength || $abSlice\n\t? function isArrayBuffer(obj) {\n\t\tif (!obj || typeof obj !== 'object') {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\tif ($byteLength) {\n\t\t\t\t// @ts-expect-error no idea why TS can't handle the overload\n\t\t\t\t$byteLength(obj);\n\t\t\t} else {\n\t\t\t\t// @ts-expect-error TS chooses not to type-narrow inside a closure\n\t\t\t\t$abSlice(obj, 0);\n\t\t\t}\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\t: $ArrayBuffer\n\t\t// in node 0.8, ArrayBuffers have no prototype or own methods, but also no Symbol.toStringTag\n\t\t? function isArrayBuffer(obj) {\n\t\t\treturn $toString(obj) === '[object ArrayBuffer]';\n\t\t}\n\t\t: function isArrayBuffer(obj) { // eslint-disable-line no-unused-vars\n\t\t\treturn false;\n\t\t};\n","'use strict';\n\nvar hasBigInts = require('has-bigints')();\n\nif (hasBigInts) {\n\tvar bigIntValueOf = BigInt.prototype.valueOf;\n\tvar tryBigInt = function tryBigIntObject(value) {\n\t\ttry {\n\t\t\tbigIntValueOf.call(value);\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t}\n\t\treturn false;\n\t};\n\n\tmodule.exports = function isBigInt(value) {\n\t\tif (\n\t\t\tvalue === null\n\t\t\t|| typeof value === 'undefined'\n\t\t\t|| typeof value === 'boolean'\n\t\t\t|| typeof value === 'string'\n\t\t\t|| typeof value === 'number'\n\t\t\t|| typeof value === 'symbol'\n\t\t\t|| typeof value === 'function'\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\tif (typeof value === 'bigint') {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn tryBigInt(value);\n\t};\n} else {\n\tmodule.exports = function isBigInt(value) {\n\t\treturn false && value;\n\t};\n}\n","'use strict';\n\nvar callBound = require('call-bind/callBound');\nvar $boolToStr = callBound('Boolean.prototype.toString');\nvar $toString = callBound('Object.prototype.toString');\n\nvar tryBooleanObject = function booleanBrandCheck(value) {\n\ttry {\n\t\t$boolToStr(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar boolClass = '[object Boolean]';\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nmodule.exports = function isBoolean(value) {\n\tif (typeof value === 'boolean') {\n\t\treturn true;\n\t}\n\tif (value === null || typeof value !== 'object') {\n\t\treturn false;\n\t}\n\treturn hasToStringTag && Symbol.toStringTag in value ? tryBooleanObject(value) : $toString(value) === boolClass;\n};\n","'use strict';\n\nvar fnToStr = Function.prototype.toString;\nvar reflectApply = typeof Reflect === 'object' && Reflect !== null && Reflect.apply;\nvar badArrayLike;\nvar isCallableMarker;\nif (typeof reflectApply === 'function' && typeof Object.defineProperty === 'function') {\n\ttry {\n\t\tbadArrayLike = Object.defineProperty({}, 'length', {\n\t\t\tget: function () {\n\t\t\t\tthrow isCallableMarker;\n\t\t\t}\n\t\t});\n\t\tisCallableMarker = {};\n\t\t// eslint-disable-next-line no-throw-literal\n\t\treflectApply(function () { throw 42; }, null, badArrayLike);\n\t} catch (_) {\n\t\tif (_ !== isCallableMarker) {\n\t\t\treflectApply = null;\n\t\t}\n\t}\n} else {\n\treflectApply = null;\n}\n\nvar constructorRegex = /^\\s*class\\b/;\nvar isES6ClassFn = function isES6ClassFunction(value) {\n\ttry {\n\t\tvar fnStr = fnToStr.call(value);\n\t\treturn constructorRegex.test(fnStr);\n\t} catch (e) {\n\t\treturn false; // not a function\n\t}\n};\n\nvar tryFunctionObject = function tryFunctionToStr(value) {\n\ttry {\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tfnToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar objectClass = '[object Object]';\nvar fnClass = '[object Function]';\nvar genClass = '[object GeneratorFunction]';\nvar ddaClass = '[object HTMLAllCollection]'; // IE 11\nvar ddaClass2 = '[object HTML document.all class]';\nvar ddaClass3 = '[object HTMLCollection]'; // IE 9-10\nvar hasToStringTag = typeof Symbol === 'function' && !!Symbol.toStringTag; // better: use `has-tostringtag`\n\nvar isIE68 = !(0 in [,]); // eslint-disable-line no-sparse-arrays, comma-spacing\n\nvar isDDA = function isDocumentDotAll() { return false; };\nif (typeof document === 'object') {\n\t// Firefox 3 canonicalizes DDA to undefined when it's not accessed directly\n\tvar all = document.all;\n\tif (toStr.call(all) === toStr.call(document.all)) {\n\t\tisDDA = function isDocumentDotAll(value) {\n\t\t\t/* globals document: false */\n\t\t\t// in IE 6-8, typeof document.all is \"object\" and it's truthy\n\t\t\tif ((isIE68 || !value) && (typeof value === 'undefined' || typeof value === 'object')) {\n\t\t\t\ttry {\n\t\t\t\t\tvar str = toStr.call(value);\n\t\t\t\t\treturn (\n\t\t\t\t\t\tstr === ddaClass\n\t\t\t\t\t\t|| str === ddaClass2\n\t\t\t\t\t\t|| str === ddaClass3 // opera 12.16\n\t\t\t\t\t\t|| str === objectClass // IE 6-8\n\t\t\t\t\t) && value('') == null; // eslint-disable-line eqeqeq\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n}\n\nmodule.exports = reflectApply\n\t? function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\ttry {\n\t\t\treflectApply(value, null, badArrayLike);\n\t\t} catch (e) {\n\t\t\tif (e !== isCallableMarker) { return false; }\n\t\t}\n\t\treturn !isES6ClassFn(value) && tryFunctionObject(value);\n\t}\n\t: function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\tif (hasToStringTag) { return tryFunctionObject(value); }\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tvar strClass = toStr.call(value);\n\t\tif (strClass !== fnClass && strClass !== genClass && !(/^\\[object HTML/).test(strClass)) { return false; }\n\t\treturn tryFunctionObject(value);\n\t};\n","'use strict';\n\nvar getDay = Date.prototype.getDay;\nvar tryDateObject = function tryDateGetDayCall(value) {\n\ttry {\n\t\tgetDay.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nvar toStr = Object.prototype.toString;\nvar dateClass = '[object Date]';\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nmodule.exports = function isDateObject(value) {\n\tif (typeof value !== 'object' || value === null) {\n\t\treturn false;\n\t}\n\treturn hasToStringTag ? tryDateObject(value) : toStr.call(value) === dateClass;\n};\n","'use strict';\n\n/** @const */\nvar $Map = typeof Map === 'function' && Map.prototype ? Map : null;\nvar $Set = typeof Set === 'function' && Set.prototype ? Set : null;\n\nvar exported;\n\nif (!$Map) {\n\t/** @type {import('.')} */\n\t// eslint-disable-next-line no-unused-vars\n\texported = function isMap(x) {\n\t\t// `Map` is not present in this environment.\n\t\treturn false;\n\t};\n}\n\nvar $mapHas = $Map ? Map.prototype.has : null;\nvar $setHas = $Set ? Set.prototype.has : null;\nif (!exported && !$mapHas) {\n\t/** @type {import('.')} */\n\t// eslint-disable-next-line no-unused-vars\n\texported = function isMap(x) {\n\t\t// `Map` does not have a `has` method\n\t\treturn false;\n\t};\n}\n\n/** @type {import('.')} */\nmodule.exports = exported || function isMap(x) {\n\tif (!x || typeof x !== 'object') {\n\t\treturn false;\n\t}\n\ttry {\n\t\t$mapHas.call(x);\n\t\tif ($setHas) {\n\t\t\ttry {\n\t\t\t\t$setHas.call(x);\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t// @ts-expect-error TS can't figure out that $Map is always truthy here\n\t\treturn x instanceof $Map; // core-js workaround, pre-v2.5.0\n\t} catch (e) {}\n\treturn false;\n};\n","'use strict';\n\nvar numToStr = Number.prototype.toString;\nvar tryNumberObject = function tryNumberObject(value) {\n\ttry {\n\t\tnumToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar numClass = '[object Number]';\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nmodule.exports = function isNumberObject(value) {\n\tif (typeof value === 'number') {\n\t\treturn true;\n\t}\n\tif (typeof value !== 'object') {\n\t\treturn false;\n\t}\n\treturn hasToStringTag ? tryNumberObject(value) : toStr.call(value) === numClass;\n};\n","'use strict';\n\nvar callBound = require('call-bind/callBound');\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar has;\nvar $exec;\nvar isRegexMarker;\nvar badStringifier;\n\nif (hasToStringTag) {\n\thas = callBound('Object.prototype.hasOwnProperty');\n\t$exec = callBound('RegExp.prototype.exec');\n\tisRegexMarker = {};\n\n\tvar throwRegexMarker = function () {\n\t\tthrow isRegexMarker;\n\t};\n\tbadStringifier = {\n\t\ttoString: throwRegexMarker,\n\t\tvalueOf: throwRegexMarker\n\t};\n\n\tif (typeof Symbol.toPrimitive === 'symbol') {\n\t\tbadStringifier[Symbol.toPrimitive] = throwRegexMarker;\n\t}\n}\n\nvar $toString = callBound('Object.prototype.toString');\nvar gOPD = Object.getOwnPropertyDescriptor;\nvar regexClass = '[object RegExp]';\n\nmodule.exports = hasToStringTag\n\t// eslint-disable-next-line consistent-return\n\t? function isRegex(value) {\n\t\tif (!value || typeof value !== 'object') {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar descriptor = gOPD(value, 'lastIndex');\n\t\tvar hasLastIndexDataProperty = descriptor && has(descriptor, 'value');\n\t\tif (!hasLastIndexDataProperty) {\n\t\t\treturn false;\n\t\t}\n\n\t\ttry {\n\t\t\t$exec(value, badStringifier);\n\t\t} catch (e) {\n\t\t\treturn e === isRegexMarker;\n\t\t}\n\t}\n\t: function isRegex(value) {\n\t\t// In older browsers, typeof regex incorrectly returns 'function'\n\t\tif (!value || (typeof value !== 'object' && typeof value !== 'function')) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn $toString(value) === regexClass;\n\t};\n","'use strict';\n\nvar $Map = typeof Map === 'function' && Map.prototype ? Map : null;\nvar $Set = typeof Set === 'function' && Set.prototype ? Set : null;\n\nvar exported;\n\nif (!$Set) {\n\t/** @type {import('.')} */\n\t// eslint-disable-next-line no-unused-vars\n\texported = function isSet(x) {\n\t\t// `Set` is not present in this environment.\n\t\treturn false;\n\t};\n}\n\nvar $mapHas = $Map ? Map.prototype.has : null;\nvar $setHas = $Set ? Set.prototype.has : null;\nif (!exported && !$setHas) {\n\t/** @type {import('.')} */\n\t// eslint-disable-next-line no-unused-vars\n\texported = function isSet(x) {\n\t\t// `Set` does not have a `has` method\n\t\treturn false;\n\t};\n}\n\n/** @type {import('.')} */\nmodule.exports = exported || function isSet(x) {\n\tif (!x || typeof x !== 'object') {\n\t\treturn false;\n\t}\n\ttry {\n\t\t$setHas.call(x);\n\t\tif ($mapHas) {\n\t\t\ttry {\n\t\t\t\t$mapHas.call(x);\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t// @ts-expect-error TS can't figure out that $Set is always truthy here\n\t\treturn x instanceof $Set; // core-js workaround, pre-v2.5.0\n\t} catch (e) {}\n\treturn false;\n};\n","'use strict';\n\nvar callBound = require('call-bind/callBound');\n\nvar $byteLength = callBound('SharedArrayBuffer.prototype.byteLength', true);\n\n/** @type {import('.')} */\nmodule.exports = $byteLength\n\t? function isSharedArrayBuffer(obj) {\n\t\tif (!obj || typeof obj !== 'object') {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\t$byteLength(obj);\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\t: function isSharedArrayBuffer(obj) { // eslint-disable-line no-unused-vars\n\t\treturn false;\n\t};\n","'use strict';\n\nvar strValue = String.prototype.valueOf;\nvar tryStringObject = function tryStringObject(value) {\n\ttry {\n\t\tstrValue.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar strClass = '[object String]';\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nmodule.exports = function isString(value) {\n\tif (typeof value === 'string') {\n\t\treturn true;\n\t}\n\tif (typeof value !== 'object') {\n\t\treturn false;\n\t}\n\treturn hasToStringTag ? tryStringObject(value) : toStr.call(value) === strClass;\n};\n","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar hasSymbols = require('has-symbols')();\n\nif (hasSymbols) {\n\tvar symToStr = Symbol.prototype.toString;\n\tvar symStringRegex = /^Symbol\\(.*\\)$/;\n\tvar isSymbolObject = function isRealSymbolObject(value) {\n\t\tif (typeof value.valueOf() !== 'symbol') {\n\t\t\treturn false;\n\t\t}\n\t\treturn symStringRegex.test(symToStr.call(value));\n\t};\n\n\tmodule.exports = function isSymbol(value) {\n\t\tif (typeof value === 'symbol') {\n\t\t\treturn true;\n\t\t}\n\t\tif (toStr.call(value) !== '[object Symbol]') {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\treturn isSymbolObject(value);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n} else {\n\n\tmodule.exports = function isSymbol(value) {\n\t\t// this environment does not support Symbols.\n\t\treturn false && value;\n\t};\n}\n","'use strict';\n\nvar $WeakMap = typeof WeakMap === 'function' && WeakMap.prototype ? WeakMap : null;\nvar $WeakSet = typeof WeakSet === 'function' && WeakSet.prototype ? WeakSet : null;\n\nvar exported;\n\nif (!$WeakMap) {\n\t/** @type {import('.')} */\n\t// eslint-disable-next-line no-unused-vars\n\texported = function isWeakMap(x) {\n\t\t// `WeakMap` is not present in this environment.\n\t\treturn false;\n\t};\n}\n\nvar $mapHas = $WeakMap ? $WeakMap.prototype.has : null;\nvar $setHas = $WeakSet ? $WeakSet.prototype.has : null;\nif (!exported && !$mapHas) {\n\t/** @type {import('.')} */\n\t// eslint-disable-next-line no-unused-vars\n\texported = function isWeakMap(x) {\n\t\t// `WeakMap` does not have a `has` method\n\t\treturn false;\n\t};\n}\n\n/** @type {import('.')} */\nmodule.exports = exported || function isWeakMap(x) {\n\tif (!x || typeof x !== 'object') {\n\t\treturn false;\n\t}\n\ttry {\n\t\t$mapHas.call(x, $mapHas);\n\t\tif ($setHas) {\n\t\t\ttry {\n\t\t\t\t$setHas.call(x, $setHas);\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\t// @ts-expect-error TS can't figure out that $WeakMap is always truthy here\n\t\treturn x instanceof $WeakMap; // core-js workaround, pre-v3\n\t} catch (e) {}\n\treturn false;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar callBound = require('call-bind/callBound');\n\nvar $WeakSet = GetIntrinsic('%WeakSet%', true);\n\nvar $setHas = callBound('WeakSet.prototype.has', true);\n\nif ($setHas) {\n\tvar $mapHas = callBound('WeakMap.prototype.has', true);\n\n\t/** @type {import('.')} */\n\tmodule.exports = function isWeakSet(x) {\n\t\tif (!x || typeof x !== 'object') {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\t$setHas(x, $setHas);\n\t\t\tif ($mapHas) {\n\t\t\t\ttry {\n\t\t\t\t\t$mapHas(x, $mapHas);\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// @ts-expect-error TS can't figure out that $WeakSet is always truthy here\n\t\t\treturn x instanceof $WeakSet; // core-js workaround, pre-v3\n\t\t} catch (e) {}\n\t\treturn false;\n\t};\n} else {\n\t/** @type {import('.')} */\n\t// eslint-disable-next-line no-unused-vars\n\tmodule.exports = function isWeakSet(x) {\n\t\t// `WeakSet` does not exist, or does not have a `has` method\n\t\treturn false;\n\t};\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","//filter will reemit the data if cb(err,pass) pass is truthy\n\n// reduce is more tricky\n// maybe we want to group the reductions or emit progress updates occasionally\n// the most basic reduce just emits one 'data' event after it has recieved 'end'\n\n\nvar Stream = require('stream').Stream\n\n\n//create an event stream and apply function to each .write\n//emitting each response as data\n//unless it's an empty callback\n\nmodule.exports = function (mapper, opts) {\n\n  var stream = new Stream()\n    , inputs = 0\n    , outputs = 0\n    , ended = false\n    , paused = false\n    , destroyed = false\n    , lastWritten = 0\n    , inNext = false\n\n  opts = opts || {};\n  var errorEventName = opts.failures ? 'failure' : 'error';\n\n  // Items that are not ready to be written yet (because they would come out of\n  // order) get stuck in a queue for later.\n  var writeQueue = {}\n\n  stream.writable = true\n  stream.readable = true\n\n  function queueData (data, number) {\n    var nextToWrite = lastWritten + 1\n\n    if (number === nextToWrite) {\n      // If it's next, and its not undefined write it\n      if (data !== undefined) {\n        stream.emit.apply(stream, ['data', data])\n      }\n      lastWritten ++\n      nextToWrite ++\n    } else {\n      // Otherwise queue it for later.\n      writeQueue[number] = data\n    }\n\n    // If the next value is in the queue, write it\n    if (writeQueue.hasOwnProperty(nextToWrite)) {\n      var dataToWrite = writeQueue[nextToWrite]\n      delete writeQueue[nextToWrite]\n      return queueData(dataToWrite, nextToWrite)\n    }\n\n    outputs ++\n    if(inputs === outputs) {\n      if(paused) paused = false, stream.emit('drain') //written all the incoming events\n      if(ended) end()\n    }\n  }\n\n  function next (err, data, number) {\n    if(destroyed) return\n    inNext = true\n\n    if (!err || opts.failures) {\n      queueData(data, number)\n    }\n\n    if (err) {\n      stream.emit.apply(stream, [ errorEventName, err ]);\n    }\n\n    inNext = false;\n  }\n\n  // Wrap the mapper function by calling its callback with the order number of\n  // the item in the stream.\n  function wrappedMapper (input, number, callback) {\n    return mapper.call(null, input, function(err, data){\n      callback(err, data, number)\n    })\n  }\n\n  stream.write = function (data) {\n    if(ended) throw new Error('map stream is not writable')\n    inNext = false\n    inputs ++\n\n    try {\n      //catch sync errors and handle them like async errors\n      var written = wrappedMapper(data, inputs, next)\n      paused = (written === false)\n      return !paused\n    } catch (err) {\n      //if the callback has been called syncronously, and the error\n      //has occured in an listener, throw it again.\n      if(inNext)\n        throw err\n      next(err)\n      return !paused\n    }\n  }\n\n  function end (data) {\n    //if end was called with args, write it, \n    ended = true //write will emit 'end' if ended is true\n    stream.writable = false\n    if(data !== undefined) {\n      return queueData(data, inputs)\n    } else if (inputs == outputs) { //wait for processing \n      stream.readable = false, stream.emit('end'), stream.destroy() \n    }\n  }\n\n  stream.end = function (data) {\n    if(ended) return\n    end(data)\n  }\n\n  stream.destroy = function () {\n    ended = destroyed = true\n    stream.writable = stream.readable = paused = false\n    process.nextTick(function () {\n      stream.emit('close')\n    })\n  }\n  stream.pause = function () {\n    paused = true\n  }\n\n  stream.resume = function () {\n    paused = false\n  }\n\n  return stream\n}\n\n\n\n\n","var path = require('path');\nvar fs = require('fs');\nvar _0777 = parseInt('0777', 8);\n\nmodule.exports = mkdirP.mkdirp = mkdirP.mkdirP = mkdirP;\n\nfunction mkdirP (p, opts, f, made) {\n    if (typeof opts === 'function') {\n        f = opts;\n        opts = {};\n    }\n    else if (!opts || typeof opts !== 'object') {\n        opts = { mode: opts };\n    }\n    \n    var mode = opts.mode;\n    var xfs = opts.fs || fs;\n    \n    if (mode === undefined) {\n        mode = _0777\n    }\n    if (!made) made = null;\n    \n    var cb = f || /* istanbul ignore next */ function () {};\n    p = path.resolve(p);\n    \n    xfs.mkdir(p, mode, function (er) {\n        if (!er) {\n            made = made || p;\n            return cb(null, made);\n        }\n        switch (er.code) {\n            case 'ENOENT':\n                /* istanbul ignore if */\n                if (path.dirname(p) === p) return cb(er);\n                mkdirP(path.dirname(p), opts, function (er, made) {\n                    /* istanbul ignore if */\n                    if (er) cb(er, made);\n                    else mkdirP(p, opts, cb, made);\n                });\n                break;\n\n            // In the case of any other error, just see if there's a dir\n            // there already.  If so, then hooray!  If not, then something\n            // is borked.\n            default:\n                xfs.stat(p, function (er2, stat) {\n                    // if the stat fails, then that's super weird.\n                    // let the original error be the failure reason.\n                    if (er2 || !stat.isDirectory()) cb(er, made)\n                    else cb(null, made);\n                });\n                break;\n        }\n    });\n}\n\nmkdirP.sync = function sync (p, opts, made) {\n    if (!opts || typeof opts !== 'object') {\n        opts = { mode: opts };\n    }\n    \n    var mode = opts.mode;\n    var xfs = opts.fs || fs;\n    \n    if (mode === undefined) {\n        mode = _0777\n    }\n    if (!made) made = null;\n\n    p = path.resolve(p);\n\n    try {\n        xfs.mkdirSync(p, mode);\n        made = made || p;\n    }\n    catch (err0) {\n        switch (err0.code) {\n            case 'ENOENT' :\n                made = sync(path.dirname(p), opts, made);\n                sync(p, opts, made);\n                break;\n\n            // In the case of any other error, just see if there's a dir\n            // there already.  If so, then hooray!  If not, then something\n            // is borked.\n            default:\n                var stat;\n                try {\n                    stat = xfs.statSync(p);\n                }\n                catch (err1) /* istanbul ignore next */ {\n                    throw err0;\n                }\n                /* istanbul ignore if */\n                if (!stat.isDirectory()) throw err0;\n                break;\n        }\n    }\n\n    return made;\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","var prefix = function (name) {\n  return '_' + name\n}\n\nvar defined = function (name) {\n  return name\n}\n\nexports.stringify = function (data) {\n  if (typeof data === 'object' && data && data.name) return exports.stringify(data.name, data.protocol, data.subtypes)\n  return Array.prototype.concat.apply([], arguments).filter(defined).map(prefix).join('.')\n}\n\nexports.parse = function (str) {\n  var parts = str.split('.')\n\n  for (var i = 0; i < parts.length; i++) {\n    if (parts[i][0] !== '_') continue\n    parts[i] = parts[i].slice(1)\n  }\n\n  return {\n    name: parts.shift(),\n    protocol: parts.shift() || null,\n    subtypes: parts\n  }\n}\n\nexports.tcp = function (name) {\n  return exports.stringify(name, 'tcp', Array.prototype.concat.apply([], Array.prototype.slice.call(arguments, 1)))\n}\n\nexports.udp = function (name) {\n  return exports.stringify(name, 'udp', Array.prototype.concat.apply([], Array.prototype.slice.call(arguments, 1)))\n}\n","var packet = require('dns-packet')\nvar dgram = require('dgram')\nvar thunky = require('thunky')\nvar events = require('events')\nvar os = require('os')\n\nvar noop = function () {}\n\nmodule.exports = function (opts) {\n  if (!opts) opts = {}\n\n  var that = new events.EventEmitter()\n  var port = typeof opts.port === 'number' ? opts.port : 5353\n  var type = opts.type || 'udp4'\n  var ip = opts.ip || opts.host || (type === 'udp4' ? '224.0.0.251' : null)\n  var me = {address: ip, port: port}\n  var memberships = {}\n  var destroyed = false\n  var interval = null\n\n  if (type === 'udp6' && (!ip || !opts.interface)) {\n    throw new Error('For IPv6 multicast you must specify `ip` and `interface`')\n  }\n\n  var socket = opts.socket || dgram.createSocket({\n    type: type,\n    reuseAddr: opts.reuseAddr !== false,\n    toString: function () {\n      return type\n    }\n  })\n\n  socket.on('error', function (err) {\n    if (err.code === 'EACCES' || err.code === 'EADDRINUSE') that.emit('error', err)\n    else that.emit('warning', err)\n  })\n\n  socket.on('message', function (message, rinfo) {\n    try {\n      message = packet.decode(message)\n    } catch (err) {\n      that.emit('warning', err)\n      return\n    }\n\n    that.emit('packet', message, rinfo)\n\n    if (message.type === 'query') that.emit('query', message, rinfo)\n    if (message.type === 'response') that.emit('response', message, rinfo)\n  })\n\n  socket.on('listening', function () {\n    if (!port) port = me.port = socket.address().port\n    if (opts.multicast !== false) {\n      that.update()\n      interval = setInterval(that.update, 5000)\n      socket.setMulticastTTL(opts.ttl || 255)\n      socket.setMulticastLoopback(opts.loopback !== false)\n    }\n  })\n\n  var bind = thunky(function (cb) {\n    if (!port || opts.bind === false) return cb(null)\n    socket.once('error', cb)\n    socket.bind(port, opts.bind || opts.interface, function () {\n      socket.removeListener('error', cb)\n      cb(null)\n    })\n  })\n\n  bind(function (err) {\n    if (err) return that.emit('error', err)\n    that.emit('ready')\n  })\n\n  that.send = function (value, rinfo, cb) {\n    if (typeof rinfo === 'function') return that.send(value, null, rinfo)\n    if (!cb) cb = noop\n    if (!rinfo) rinfo = me\n    else if (!rinfo.host && !rinfo.address) rinfo.address = me.address\n\n    bind(onbind)\n\n    function onbind (err) {\n      if (destroyed) return cb()\n      if (err) return cb(err)\n      var message = packet.encode(value)\n      socket.send(message, 0, message.length, rinfo.port, rinfo.address || rinfo.host, cb)\n    }\n  }\n\n  that.response =\n  that.respond = function (res, rinfo, cb) {\n    if (Array.isArray(res)) res = {answers: res}\n\n    res.type = 'response'\n    res.flags = (res.flags || 0) | packet.AUTHORITATIVE_ANSWER\n    that.send(res, rinfo, cb)\n  }\n\n  that.query = function (q, type, rinfo, cb) {\n    if (typeof type === 'function') return that.query(q, null, null, type)\n    if (typeof type === 'object' && type && type.port) return that.query(q, null, type, rinfo)\n    if (typeof rinfo === 'function') return that.query(q, type, null, rinfo)\n    if (!cb) cb = noop\n\n    if (typeof q === 'string') q = [{name: q, type: type || 'ANY'}]\n    if (Array.isArray(q)) q = {type: 'query', questions: q}\n\n    q.type = 'query'\n    that.send(q, rinfo, cb)\n  }\n\n  that.destroy = function (cb) {\n    if (!cb) cb = noop\n    if (destroyed) return process.nextTick(cb)\n    destroyed = true\n    clearInterval(interval)\n\n    // Need to drop memberships by hand and ignore errors.\n    // socket.close() does not cope with errors.\n    for (var iface in memberships) {\n      try {\n        socket.dropMembership(ip, iface)\n      } catch (e) {\n        // eat it\n      }\n    }\n    memberships = {}\n    socket.close(cb)\n  }\n\n  that.update = function () {\n    var ifaces = opts.interface ? [].concat(opts.interface) : allInterfaces()\n    var updated = false\n\n    for (var i = 0; i < ifaces.length; i++) {\n      var addr = ifaces[i]\n      if (memberships[addr]) continue\n\n      try {\n        socket.addMembership(ip, addr)\n        memberships[addr] = true\n        updated = true\n      } catch (err) {\n        that.emit('warning', err)\n      }\n    }\n\n    if (updated) {\n      if (socket.setMulticastInterface) {\n        try {\n          socket.setMulticastInterface(opts.interface || defaultInterface())\n        } catch (err) {\n          that.emit('warning', err)\n        }\n      }\n      that.emit('networkInterface')\n    }\n  }\n\n  return that\n}\n\nfunction defaultInterface () {\n  var networks = os.networkInterfaces()\n  var names = Object.keys(networks)\n\n  for (var i = 0; i < names.length; i++) {\n    var net = networks[names[i]]\n    for (var j = 0; j < net.length; j++) {\n      var iface = net[j]\n      if (isIPv4(iface.family) && !iface.internal) {\n        if (os.platform() === 'darwin' && names[i] === 'en0') return iface.address\n        return '0.0.0.0'\n      }\n    }\n  }\n\n  return '127.0.0.1'\n}\n\nfunction allInterfaces () {\n  var networks = os.networkInterfaces()\n  var names = Object.keys(networks)\n  var res = []\n\n  for (var i = 0; i < names.length; i++) {\n    var net = networks[names[i]]\n    for (var j = 0; j < net.length; j++) {\n      var iface = net[j]\n      if (isIPv4(iface.family)) {\n        res.push(iface.address)\n        // could only addMembership once per interface (https://nodejs.org/api/dgram.html#dgram_socket_addmembership_multicastaddress_multicastinterface)\n        break\n      }\n    }\n  }\n\n  return res\n}\n\nfunction isIPv4 (family) { // for backwards compat\n  return family === 4 || family === 'IPv4'\n}\n","/*\n * Simon Last, Sept 2013\n * http://simonlast.org\n */\n\nvar fs     = require('fs'),\n    path   = require('path'),\n    mkdirp = require(\"mkdirp\"),\n    Q      = require('q'),\n\n    defaults = {\n        dir: 'persist',\n        stringify: JSON.stringify,\n        parse: JSON.parse,\n        encoding: 'utf8',\n        logging: false,\n        continuous: true,\n        interval: false,\n        ttl: false\n    },\n\n    defaultTTL = 24 * 60 * 60 * 1000 /* ttl is truthy but not a number ? 24h default */,\n\n    isNumber = function(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    },\n\n    isFunction = function(fn) {\n        return typeof fn === 'function';\n    },\n\n    noop = function(err) {\n        if (err) throw err;\n    },\n\n    /*\n     * To support backward compatible callbacks,\n     * i.e callback(data) vs callback(err, data);\n     * replace with noop and fix args order, when ready to break backward compatibily for the following API functions\n     * - values()\n     * - valuesWithKeyMatch()\n     * hint: look for 'todo-breaks-backward' in the source\n     */\n    noopWithoutError = function() {};\n\nvar LocalStorage = function (userOptions) {\n    if(!(this instanceof LocalStorage)) {\n        return new LocalStorage(userOptions);\n    }\n    this.data = {};\n    this.ttls = {};\n    this.changes = {};\n    this.setOptions(userOptions);\n\n    // we don't call init in the constructor because we can only so for the initSync\n    // for init async, it returns a promise, and in order to maintain that API, we cannot return the promise in the constructor\n    // so init must be called on the instance of new LocalStorage();\n};\n\nLocalStorage.prototype = {\n\n    setOptions: function (userOptions) {\n        var options = {};\n\n        if (!userOptions) {\n            options = defaults;\n        } else {\n            for (var key in defaults) {\n                if (userOptions.hasOwnProperty(key)) {\n                    options[key] = userOptions[key];\n                } else {\n                    options[key] = defaults[key];\n                }\n            }\n\n            // dir is not absolute\n            options.dir = this.resolveDir(options.dir);\n            options.ttlDir = options.dir + '-ttl';\n            options.ttl = options.ttl ? isNumber(options.ttl) && options.ttl > 0 ? options.ttl : defaultTTL : false;\n        }\n\n        // Check to see if we received an external logging function\n        if (isFunction(options.logging)) {\n            // Overwrite log function with external logging function\n            this.log = options.logging;\n            options.logging = true;\n        }\n\n        this.options = options;\n    },\n\n    init: function (userOptions, callback) {\n        if (isFunction(userOptions)) {\n            callback = userOptions;\n            userOptions = null;\n        }\n        if (userOptions) {\n            this.setOptions(userOptions);\n        }\n        callback = isFunction(callback) ? callback : noop;\n\n        var deferred = Q.defer();\n        var deferreds = [];\n\n        var options = this.options;\n\n        var result = {dir: options.dir};\n        deferreds.push(this.parseDataDir());\n\n        if (options.ttl) {\n            result.ttlDir = options.ttlDir;\n            deferreds.push(this.parseTTLDir());\n        }\n\n        //start persisting\n        if (options.interval && options.interval > 0) {\n            this._persistInterval = setInterval(this.persist.bind(this), options.interval);\n        }\n\n        Q.all(deferreds).then(\n            function() {\n                deferred.resolve(result);\n                callback(null, result);\n            },\n            function(err) {\n                deferred.reject(err);\n                callback(err);\n            });\n\n        return deferred.promise;\n    },\n\n    initSync: function (userOptions) {\n        if (userOptions) {\n            this.setOptions(userOptions);\n        }\n\n        var options = this.options;\n\n        if (options.logging) {\n            this.log(\"options:\");\n            this.log(options.stringify(options));\n        }\n\n        this.parseDataDirSync();\n\n        if (options.ttl) {\n            this.parseTTLDirSync();\n        }\n\n        //start synchronous persisting,\n        if (options.interval && options.interval > 0) {\n            this._persistInterval = setInterval(this.persistSync.bind(this), options.interval);\n        }\n    },\n\n    key: function (n) {\n        // todo-breaks-backward: remove this function\n        // this is fragile, keys are not guaranteed to be in a any order, so 2 calls using the same index could return a different result\n        // http://stackoverflow.com/a/5525820/493756, see the ECMAScript source in that answer\n        var keys = this.keys();\n        if (keys.length <= n) {\n            return null;\n        }\n        return keys[n];\n    },\n\n    keys: function () {\n        return Object.keys(this.data);\n    },\n\n    length: function () {\n        return this.keys().length;\n    },\n\n    forEach: function(callback) {\n        return this.keys().forEach(function(key) {\n            callback(key, this.data[key]);\n        }.bind(this));\n    },\n\n    values: function(callback) {\n\n        // todo-breaks-backward: remove callback option\n        callback = isFunction(callback) ? callback : noopWithoutError;\n\n        var values = this.keys().map(function(k) {\n            return this.data[k];\n        }.bind(this));\n\n        // todo-breaks-backward: remove callback, no need, this is sync\n        callback(values);\n\n        return values;\n    },\n\n\n    valuesWithKeyMatch: function(match, callback) {\n        // todo-breaks-backward: remove callback option\n        callback = isFunction(callback) ? callback : noopWithoutError;\n\n        match = match || /.*/;\n\n        var filter = match instanceof RegExp ?\n            function(key) {\n                return match.test(key);\n            } :\n            function(key) {\n                return key.indexOf(match) !== -1;\n            };\n\n        var values = [];\n        this.keys().forEach(function(k) {\n            if (filter(k)) {\n                values.push(this.data[k]);\n            }\n        }.bind(this));\n\n        // todo-breaks-backward: remove callback, no need this is sync\n        callback(values);\n        return values;\n    },\n\n    setItem: function (key, value, callback) {\n        callback = isFunction(callback) ? callback : noop;\n\n        var options = this.options;\n        var result;\n        var logmsg = \"set (\" + key + \": \" + options.stringify(value) + \")\";\n\n        var deferred = Q.defer();\n        var deferreds = [];\n\n        this.data[key] = value;\n        if (options.ttl) {\n            this.ttls[key] = new Date().getTime() + options.ttl;\n        }\n\n        result = {key: key, value: value, queued: !!options.interval, manual: !options.interval && !options.continuous};\n\n        var onSuccess = function () {\n            callback(null, result);\n            deferred.resolve(result);\n        };\n\n        var onError = function (err) {\n            callback(err);\n            deferred.reject(err);\n        };\n\n        this.log(logmsg);\n\n        if (options.interval || !options.continuous) {\n            this.changes[key] = {onSuccess: onSuccess, onError: onError};\n        } else {\n            deferreds.push(this.persistKey(key));\n\n            Q.all(deferreds).then(\n                function(result) {\n                    deferred.resolve(result);\n                    callback(null, result);\n                }.bind(this),\n                function(err) {\n                    deferred.reject(err);\n                    callback(err);\n                });\n        }\n\n        return deferred.promise;\n    },\n\n    setItemSync: function (key, value) {\n        this.data[key] = value;\n        if (this.options.ttl) {\n            this.ttls[key] = new Date().getTime() + this.options.ttl;\n        }\n        this.persistKeySync(key);\n        this.log(\"set (\" + key + \": \" + this.options.stringify(value) + \")\");\n    },\n\n    getItem: function (key, callback) {\n        callback = isFunction(callback) ? callback : noop;\n        if (this.isExpired(key)) {\n            this.log(key + ' has expired');\n            if (this.options.interval || !this.options.continuous) {\n                callback(null, null);\n                return;\n            }\n            this.removeItem(key, function() {\n                callback(null, null);\n            });\n        } else {\n            callback(null, this.data[key]);\n            return this.data[key];\n        }\n    },\n\n    getItemSync: function (key) {\n        if (this.isExpired(key)) {\n            this.removeItemSync(key);\n        } else {\n            return this.data[key];\n        }\n    },\n\n    removeItem: function (key, callback) {\n        callback = isFunction(callback) ? callback : noop;\n\n        var deferred = Q.defer();\n        var deferreds = [];\n\n        deferreds.push(this.removePersistedKey(key));\n\n        Q.all(deferreds).then(\n            function() {\n                delete this.data[key];\n                delete this.ttls[key];\n                this.log('removed: ' + key);\n                callback(null, this.data);\n                deferred.resolve(this.data);\n            }.bind(this),\n            function(err) {\n                callback(err);\n                deferred.reject(err);\n            }\n        );\n\n        return deferred.promise;\n    },\n\n    removeItemSync: function (key) {\n        this.removePersistedKeySync(key);\n        delete this.data[key];\n        delete this.ttls[key];\n        this.log('removed: ' + key);\n    },\n\n    clear: function (callback) {\n        callback = isFunction(callback) ? callback : noop;\n\n        var deferred = Q.defer();\n        var result;\n        var deferreds = [];\n\n        var keys = this.keys();\n        for (var i = 0; i < keys.length; i++) {\n            deferreds.push(this.removePersistedKey(keys[i]));\n        }\n\n        Q.all(deferreds).then(\n            function(result) {\n                this.data = {};\n                this.ttls = {};\n                this.changes = {};\n                deferred.resolve(result);\n                callback(null, result);\n            }.bind(this),\n            function(err) {\n                deferred.reject(err);\n                callback(err);\n            });\n\n        return deferred.promise;\n    },\n\n    clearSync: function () {\n        var keys = this.keys(true);\n        for (var i = 0; i < keys.length; i++) {\n            this.removePersistedKeySync(keys[i]);\n        }\n        this.data = {};\n        this.ttls = {};\n        this.changes = {};\n    },\n\n    persist: function (callback) {\n        callback = isFunction(callback) ? callback : noop;\n\n        var deferred = Q.defer();\n        var result;\n        var deferreds = [];\n\n        for (var key in this.data) {\n            if (this.changes[key]) {\n                deferreds.push(this.persistKey(key));\n            }\n        }\n\n        Q.all(deferreds).then(\n            function(result) {\n                deferred.resolve(result);\n                callback(null, result);\n                this.log('persist done');\n            }.bind(this),\n            function(err) {\n                deferred.reject(result);\n                callback(err);\n            });\n\n        return deferred.promise;\n    },\n\n    persistSync: function () {\n        for (var key in this.data) {\n            if (this.changes[key]) {\n                this.persistKeySync(key);\n            }\n        }\n        this.log('persistSync done');\n    },\n\n    /*\n     * This function triggers a key within the database to persist asynchronously.\n     */\n    persistKey: function (key, callback) {\n        callback = isFunction(callback) ? callback : noop;\n\n        var self = this;\n        var options = this.options;\n        var json = options.stringify(this.data[key]);\n\n        var file = path.join(options.dir, key);\n        var ttlFile;\n\n        var deferred = Q.defer();\n        var result;\n\n        var fail = function(err) {\n            self.changes[key] && self.changes[key].onError && self.changes[key].onError(err);\n            deferred.reject(err);\n            return callback(err);\n        };\n\n        var done = function() {\n            self.changes[key] && self.changes[key].onSuccess && self.changes[key].onSuccess();\n            delete self.changes[key];\n            self.log(\"wrote: \" + key);\n            result = {key: key, data: json, file: file};\n            deferred.resolve(result);\n            callback(null, result);\n        };\n\n        mkdirp(path.dirname(file), function(err) {\n            if (err) {\n                fail(err);\n            }\n            fs.writeFile(file, json, options.encoding, function(err) {\n                if (err) {\n                    fail(err);\n                }\n                if (options.ttl) {\n                    ttlFile = path.join(options.ttlDir, key);\n                    mkdirp(path.dirname(ttlFile), function(err) {\n                        fs.writeFile(ttlFile, options.stringify(self.ttls[key]), options.encoding, function() {\n                            if (err) {\n                                fail(err);\n                            } else {\n                                done();\n                            }\n                        });\n                    });\n                } else {\n                    done();\n                }\n            }.bind(this));\n        });\n\n        return deferred.promise;\n    },\n\n    persistKeySync: function (key) {\n        var options = this.options;\n        var file = path.join(options.dir, key);\n        try {\n            mkdirp.sync(path.dirname(file));\n            fs.writeFileSync(file, options.stringify(this.data[key]));\n            this.changes[key] && this.changes[key].onSuccess && this.changes[key].onSuccess();\n        } catch (e) {\n            this.changes[key] && this.changes[key].onError && this.changes[key].onError(e);\n            throw e;\n        }\n\n        var ttlFile;\n        if (options.ttl) {\n            ttlFile = path.join(options.ttlDir, key);\n            mkdirp.sync(path.dirname(ttlFile));\n            fs.writeFileSync(ttlFile, options.stringify(this.ttls[key]));\n        }\n\n        delete this.changes[key];\n        this.log(\"wrote: \" + key);\n    },\n\n    removePersistedKey: function (key, callback) {\n        callback = isFunction(callback) ? callback : noop;\n\n        var options = this.options;\n        var deferred = Q.defer();\n        var result;\n\n        //check to see if key has been persisted\n        var file = path.join(options.dir, key);\n        fs.exists(file, function (exists) {\n            if (exists) {\n                fs.unlink(file, function (err) {\n                    result = {key: key, removed: !err, exists: true};\n\n                    var fail = function(err) {\n                        deferred.reject(err);\n                        callback(err);\n                    };\n\n                    var done = function() {\n                        deferred.resolve(result);\n                        callback(null, result);\n                    };\n\n                    if (err) {\n                        return fail(err);\n                    }\n\n                    if (options.ttl) {\n                        var ttlFile = path.join(options.ttlDir, key);\n                        fs.exists(ttlFile, function (exists) {\n                            if (exists) {\n                                fs.unlink(ttlFile, function (err) {\n                                    if (err) {\n                                        fail(err);\n                                    }\n                                    done();\n                                });\n                            } else {\n                                done();\n                            }\n                        });\n                    } else {\n                        done();\n                    }\n                });\n            } else {\n                result = {key: key, removed: false, exists: false};\n                deferred.resolve(result);\n                callback(null, result);\n            }\n        });\n\n        return deferred.promise;\n    },\n\n    parseString: function(str){\n        try {\n            return this.options.parse(str);\n        } catch(e) {\n            this.log(\"parse error: \", this.options.stringify(e));\n            return undefined;\n        }\n    },\n\n    parseTTLDir: function(callback) {\n        return this.parseDir(this.options.ttlDir, this.parseTTLFile.bind(this), callback);\n    },\n\n    parseTTLDirSync: function() {\n        return this.parseDirSync(this.options.ttlDir, this.ttls);\n    },\n\n    parseDataDir: function(callback) {\n        return this.parseDir(this.options.dir, this.parseDataFile.bind(this), callback);\n    },\n\n    parseDataDirSync: function() {\n        return this.parseDirSync(this.options.dir, this.data);\n    },\n\n    parseDir: function(dir, parseFn, callback) {\n        callback = isFunction(callback) ? callback : noop;\n\n        var deferred = Q.defer();\n        var deferreds = [];\n\n        var result = {dir: dir};\n        //check to see if dir is present\n        fs.exists(dir, function (exists) {\n            if (exists) {\n                //load data\n                fs.readdir(dir, function (err, arr) {\n                    if (err) {\n                        deferred.reject(err);\n                        callback(err);\n                    }\n\n                    for (var i in arr) {\n                        var curr = arr[i];\n                        if (curr[0] !== '.') {\n                            deferreds.push(parseFn(curr));\n                        }\n                    }\n\n                    Q.all(deferreds).then(\n                        function() {\n                            deferred.resolve(result);\n                            callback(null, result);\n                        },\n                        function(err) {\n                            deferred.reject(err);\n                            callback(err);\n                        });\n\n                }.bind(this));\n            } else {\n                //create the directory\n                mkdirp(dir, function (err) {\n                    if (err) {\n                        console.error(err);\n                        deferred.reject(err);\n                        callback(err);\n                    } else {\n                        this.log('created ' + dir);\n                        deferred.resolve(result);\n                        callback(null, result);\n                    }\n                }.bind(this));\n            }\n        }.bind(this));\n\n        return deferred.promise;\n    },\n\n    parseDirSync: function(dir, hash) {\n        var exists = fs.existsSync(dir);\n\n        if (exists) { //load data\n            var arr = fs.readdirSync(dir);\n            for (var i = 0; i < arr.length; i++) {\n                var curr = arr[i];\n                if (arr[i] && curr[0] !== '.') {\n                    var json = fs.readFileSync(path.join(dir, curr), this.options.encoding);\n                    hash[curr] = this.parseString(json);\n                }\n            }\n        } else { //create the directory\n            mkdirp.sync(dir);\n        }\n    },\n\n    parseDataFile: function(key, callback) {\n        return this.parseFile(key, this.options.dir, this.data, callback);\n    },\n\n    parseDataFileSync: function(key) {\n        return this.parseFileSync(key, this.options.dir, this.data);\n    },\n\n    parseTTLFile : function(key, callback) {\n        return this.parseFile(key, this.options.ttlDir, this.ttls, callback);\n    },\n\n    parseTTLFileSync: function(key) {\n        return this.parseFileSync(key, this.options.ttlDir, this.ttls);\n    },\n\n    parseFile: function (key, dir, hash, callback) {\n        callback = isFunction(callback) ? callback : noop;\n\n        var deferred = Q.defer();\n        var result;\n        var file = path.join(dir, key);\n        var options = this.options;\n\n        fs.readFile(file, options.encoding, function (err, json) {\n            if (err) {\n                deferred.reject(err);\n                return callback(err);\n            }\n\n            var value = this.parseString(json);\n\n            hash[key] = value;\n\n            this.log(\"loaded: \" + dir + \"/\" + key);\n\n            result = {key: key, value: value, file: file};\n            deferred.resolve(result);\n            callback(null, result);\n\n        }.bind(this));\n\n        return deferred.promise;\n    },\n\n    parseFileSync: function(key, dir, hash) {\n        var file = path.join(dir, key);\n        hash[key] = fs.readFileSync(file, this.options.encoding);\n        this.log(\"loaded: \" + dir + \"/\" + key);\n        return hash[key];\n    },\n\n    isExpired: function (key) {\n        if (!this.options.ttl) return false;\n        return this.ttls[key] < (new Date()).getTime();\n    },\n\n    removePersistedKeySync: function(key) {\n        var options = this.options;\n\n        var file = path.join(options.dir, key);\n        if (fs.existsSync(file)) {\n            fs.unlinkSync(file);\n        }\n        if (options.ttl) {\n            var ttlFile = path.join(options.ttlDir, key);\n            if (fs.existsSync(ttlFile)) {\n                fs.unlinkSync(ttlFile);\n            }\n        }\n    },\n\n    resolveDir: function(dir) {\n        dir = path.normalize(dir);\n        if (dir !== path.resolve(dir)) {\n            dir = path.join(__dirname, \"storage\", dir || \"\");\n            this.log(\"Made dir absolute: \" + dir);\n        }\n        return dir;\n    },\n\n    stopInterval: function () {\n        clearInterval(this._persistInterval);\n    },\n\n    log: function () {\n        this.options && this.options.logging && console.log.apply(console, arguments);\n    }\n};\n\nmodule.exports = LocalStorage;\n","/*\n * Simon Last, Sept 2013\n * http://simonlast.org\n */\n\nvar LocalStorage = require('./local-storage');\n\n(function(nodePersist) {\n    var localStorage;\n\n    /*\n     * This function just creates a localStorage instance, incase you don't plan on using the default one\n     * i.e.\n     * var myStorage = nodePersist.create();\n     * myStorage.init(myOptions);  // you still have to call init or initSync();\n     */\n    nodePersist.create = function (userOptions) {\n        return LocalStorage(userOptions);\n    };\n\n    /*\n     * All functions below are just helpers to use the default storage instance\n     * and to maintain backward compatibility\n     */\n\n\n    /*\n     * This function, (or init) must be called before the library can be used.\n     * An options hash can be optionally passed.\n     */\n    nodePersist.init = function (userOptions, callback) {\n        localStorage = nodePersist.create(userOptions);\n        return localStorage.init(callback);\n    };\n    /*\n     * This function, (or initSync) must be called before the library can be used.\n     * An options hash can be optionally passed.\n     */\n    nodePersist.initSync = function (userOptions) {\n        localStorage = nodePersist.create(userOptions);\n        return localStorage.initSync();\n    };\n\n    /*\n     * This function returns a key with index n in the database, or null if\n     *  it is not present.\n     * This function runs in 0(k), where k is the number of keys in the\n     *  database. You probably shouldn't use it.\n     */\n    nodePersist.key = function (n) {\n        return localStorage.key(n);\n    };\n\n    /*\n     * This function returns an array of all the keys in the database\n     *\n     */\n    nodePersist.keys = function () {\n        return localStorage.keys();\n    };\n\n    /*\n     * This function returns the number of keys stored in the database.\n     */\n    nodePersist.length = function () {\n        return localStorage.length();\n    };\n\n    /*\n     * This function iterates over each key/value pair and executes a callback\n     */\n    nodePersist.forEach = function(callback) {\n        return localStorage.forEach(callback);\n    };\n\n    /*\n     * This function returns all the values in the database.\n     */\n    nodePersist.values = function(callback) {\n        return localStorage.values(callback);\n    };\n\n\n    nodePersist.valuesWithKeyMatch = function(match, callback) {\n        return localStorage.valuesWithKeyMatch(match, callback);\n    };\n\n    /*\n     * This function sets a key to a given value in the database.\n     */\n    nodePersist.setItem = function (key, value, callback) {\n        return localStorage.setItem(key, value, callback);\n    };\n\n    /*\n     * This function sets a key to a given value in the database.\n     */\n    nodePersist.setItemSync = function (key, value) {\n        return localStorage.setItemSync(key, value);\n    };\n\n    /*\n     * This function returns the value associated with a key in the database,\n     *  or undefined if it is not present.\n     */\n    nodePersist.getItem = function (key, callback) {\n        return localStorage.getItem(key, callback);\n    };\n\n    nodePersist.getItemSync = function (key) {\n        return localStorage.getItemSync(key);\n    };\n\n    /*\n     * This function removes key in the database if it is present, and\n     *  immediately deletes it from the file system asynchronously.\n     */\n    nodePersist.removeItem = function (key, callback) {\n        return localStorage.removeItem(key, callback);\n    };\n\n    /*\n     * This function removes key in the database if it is present, and\n     *  immediately deletes it from the file system synchronously.\n     */\n    nodePersist.removeItemSync = function (key) {\n        return localStorage.removeItemSync(key);\n    };\n\n    /*\n     * This function removes all keys in the database, and immediately\n     *  deletes all keys from the file system asynchronously.\n     */\n    nodePersist.clear = function (callback) {\n        return localStorage.clear(callback);\n    };\n\n    /*\n     * This function removes all keys in the database, and immediately\n     *  deletes all keys from the file system synchronously.\n     */\n    nodePersist.clearSync = function () {\n        return localStorage.clearSync();\n    };\n\n    /*\n     * This function triggers the database to persist asynchronously.\n     */\n    nodePersist.persist = function (callback) {\n        return localStorage.persist(callback);\n    };\n\n    /*\n     * This function triggers the database to persist synchronously.\n     */\n    nodePersist.persistSync = function () {\n        return localStorage.persistSync();\n    };\n\n    /*\n     * This function triggers a key within the database to persist asynchronously.\n     */\n    nodePersist.persistKey = function (key, callback) {\n        return localStorage.persistKey(key, callback);\n    };\n\n    /*\n     * This function triggers a key within the database to persist synchronously.\n     */\n    nodePersist.persistKeySync = function (key) {\n        return localStorage.persistKeySync(key);\n    };\n\n}(module.exports));\n","var hasMap = typeof Map === 'function' && Map.prototype;\nvar mapSizeDescriptor = Object.getOwnPropertyDescriptor && hasMap ? Object.getOwnPropertyDescriptor(Map.prototype, 'size') : null;\nvar mapSize = hasMap && mapSizeDescriptor && typeof mapSizeDescriptor.get === 'function' ? mapSizeDescriptor.get : null;\nvar mapForEach = hasMap && Map.prototype.forEach;\nvar hasSet = typeof Set === 'function' && Set.prototype;\nvar setSizeDescriptor = Object.getOwnPropertyDescriptor && hasSet ? Object.getOwnPropertyDescriptor(Set.prototype, 'size') : null;\nvar setSize = hasSet && setSizeDescriptor && typeof setSizeDescriptor.get === 'function' ? setSizeDescriptor.get : null;\nvar setForEach = hasSet && Set.prototype.forEach;\nvar hasWeakMap = typeof WeakMap === 'function' && WeakMap.prototype;\nvar weakMapHas = hasWeakMap ? WeakMap.prototype.has : null;\nvar hasWeakSet = typeof WeakSet === 'function' && WeakSet.prototype;\nvar weakSetHas = hasWeakSet ? WeakSet.prototype.has : null;\nvar hasWeakRef = typeof WeakRef === 'function' && WeakRef.prototype;\nvar weakRefDeref = hasWeakRef ? WeakRef.prototype.deref : null;\nvar booleanValueOf = Boolean.prototype.valueOf;\nvar objectToString = Object.prototype.toString;\nvar functionToString = Function.prototype.toString;\nvar $match = String.prototype.match;\nvar $slice = String.prototype.slice;\nvar $replace = String.prototype.replace;\nvar $toUpperCase = String.prototype.toUpperCase;\nvar $toLowerCase = String.prototype.toLowerCase;\nvar $test = RegExp.prototype.test;\nvar $concat = Array.prototype.concat;\nvar $join = Array.prototype.join;\nvar $arrSlice = Array.prototype.slice;\nvar $floor = Math.floor;\nvar bigIntValueOf = typeof BigInt === 'function' ? BigInt.prototype.valueOf : null;\nvar gOPS = Object.getOwnPropertySymbols;\nvar symToString = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ? Symbol.prototype.toString : null;\nvar hasShammedSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'object';\n// ie, `has-tostringtag/shams\nvar toStringTag = typeof Symbol === 'function' && Symbol.toStringTag && (typeof Symbol.toStringTag === hasShammedSymbols ? 'object' : 'symbol')\n    ? Symbol.toStringTag\n    : null;\nvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\nvar gPO = (typeof Reflect === 'function' ? Reflect.getPrototypeOf : Object.getPrototypeOf) || (\n    [].__proto__ === Array.prototype // eslint-disable-line no-proto\n        ? function (O) {\n            return O.__proto__; // eslint-disable-line no-proto\n        }\n        : null\n);\n\nfunction addNumericSeparator(num, str) {\n    if (\n        num === Infinity\n        || num === -Infinity\n        || num !== num\n        || (num && num > -1000 && num < 1000)\n        || $test.call(/e/, str)\n    ) {\n        return str;\n    }\n    var sepRegex = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;\n    if (typeof num === 'number') {\n        var int = num < 0 ? -$floor(-num) : $floor(num); // trunc(num)\n        if (int !== num) {\n            var intStr = String(int);\n            var dec = $slice.call(str, intStr.length + 1);\n            return $replace.call(intStr, sepRegex, '$&_') + '.' + $replace.call($replace.call(dec, /([0-9]{3})/g, '$&_'), /_$/, '');\n        }\n    }\n    return $replace.call(str, sepRegex, '$&_');\n}\n\nvar utilInspect = require('./util.inspect');\nvar inspectCustom = utilInspect.custom;\nvar inspectSymbol = isSymbol(inspectCustom) ? inspectCustom : null;\n\nmodule.exports = function inspect_(obj, options, depth, seen) {\n    var opts = options || {};\n\n    if (has(opts, 'quoteStyle') && (opts.quoteStyle !== 'single' && opts.quoteStyle !== 'double')) {\n        throw new TypeError('option \"quoteStyle\" must be \"single\" or \"double\"');\n    }\n    if (\n        has(opts, 'maxStringLength') && (typeof opts.maxStringLength === 'number'\n            ? opts.maxStringLength < 0 && opts.maxStringLength !== Infinity\n            : opts.maxStringLength !== null\n        )\n    ) {\n        throw new TypeError('option \"maxStringLength\", if provided, must be a positive integer, Infinity, or `null`');\n    }\n    var customInspect = has(opts, 'customInspect') ? opts.customInspect : true;\n    if (typeof customInspect !== 'boolean' && customInspect !== 'symbol') {\n        throw new TypeError('option \"customInspect\", if provided, must be `true`, `false`, or `\\'symbol\\'`');\n    }\n\n    if (\n        has(opts, 'indent')\n        && opts.indent !== null\n        && opts.indent !== '\\t'\n        && !(parseInt(opts.indent, 10) === opts.indent && opts.indent > 0)\n    ) {\n        throw new TypeError('option \"indent\" must be \"\\\\t\", an integer > 0, or `null`');\n    }\n    if (has(opts, 'numericSeparator') && typeof opts.numericSeparator !== 'boolean') {\n        throw new TypeError('option \"numericSeparator\", if provided, must be `true` or `false`');\n    }\n    var numericSeparator = opts.numericSeparator;\n\n    if (typeof obj === 'undefined') {\n        return 'undefined';\n    }\n    if (obj === null) {\n        return 'null';\n    }\n    if (typeof obj === 'boolean') {\n        return obj ? 'true' : 'false';\n    }\n\n    if (typeof obj === 'string') {\n        return inspectString(obj, opts);\n    }\n    if (typeof obj === 'number') {\n        if (obj === 0) {\n            return Infinity / obj > 0 ? '0' : '-0';\n        }\n        var str = String(obj);\n        return numericSeparator ? addNumericSeparator(obj, str) : str;\n    }\n    if (typeof obj === 'bigint') {\n        var bigIntStr = String(obj) + 'n';\n        return numericSeparator ? addNumericSeparator(obj, bigIntStr) : bigIntStr;\n    }\n\n    var maxDepth = typeof opts.depth === 'undefined' ? 5 : opts.depth;\n    if (typeof depth === 'undefined') { depth = 0; }\n    if (depth >= maxDepth && maxDepth > 0 && typeof obj === 'object') {\n        return isArray(obj) ? '[Array]' : '[Object]';\n    }\n\n    var indent = getIndent(opts, depth);\n\n    if (typeof seen === 'undefined') {\n        seen = [];\n    } else if (indexOf(seen, obj) >= 0) {\n        return '[Circular]';\n    }\n\n    function inspect(value, from, noIndent) {\n        if (from) {\n            seen = $arrSlice.call(seen);\n            seen.push(from);\n        }\n        if (noIndent) {\n            var newOpts = {\n                depth: opts.depth\n            };\n            if (has(opts, 'quoteStyle')) {\n                newOpts.quoteStyle = opts.quoteStyle;\n            }\n            return inspect_(value, newOpts, depth + 1, seen);\n        }\n        return inspect_(value, opts, depth + 1, seen);\n    }\n\n    if (typeof obj === 'function' && !isRegExp(obj)) { // in older engines, regexes are callable\n        var name = nameOf(obj);\n        var keys = arrObjKeys(obj, inspect);\n        return '[Function' + (name ? ': ' + name : ' (anonymous)') + ']' + (keys.length > 0 ? ' { ' + $join.call(keys, ', ') + ' }' : '');\n    }\n    if (isSymbol(obj)) {\n        var symString = hasShammedSymbols ? $replace.call(String(obj), /^(Symbol\\(.*\\))_[^)]*$/, '$1') : symToString.call(obj);\n        return typeof obj === 'object' && !hasShammedSymbols ? markBoxed(symString) : symString;\n    }\n    if (isElement(obj)) {\n        var s = '<' + $toLowerCase.call(String(obj.nodeName));\n        var attrs = obj.attributes || [];\n        for (var i = 0; i < attrs.length; i++) {\n            s += ' ' + attrs[i].name + '=' + wrapQuotes(quote(attrs[i].value), 'double', opts);\n        }\n        s += '>';\n        if (obj.childNodes && obj.childNodes.length) { s += '...'; }\n        s += '</' + $toLowerCase.call(String(obj.nodeName)) + '>';\n        return s;\n    }\n    if (isArray(obj)) {\n        if (obj.length === 0) { return '[]'; }\n        var xs = arrObjKeys(obj, inspect);\n        if (indent && !singleLineValues(xs)) {\n            return '[' + indentedJoin(xs, indent) + ']';\n        }\n        return '[ ' + $join.call(xs, ', ') + ' ]';\n    }\n    if (isError(obj)) {\n        var parts = arrObjKeys(obj, inspect);\n        if (!('cause' in Error.prototype) && 'cause' in obj && !isEnumerable.call(obj, 'cause')) {\n            return '{ [' + String(obj) + '] ' + $join.call($concat.call('[cause]: ' + inspect(obj.cause), parts), ', ') + ' }';\n        }\n        if (parts.length === 0) { return '[' + String(obj) + ']'; }\n        return '{ [' + String(obj) + '] ' + $join.call(parts, ', ') + ' }';\n    }\n    if (typeof obj === 'object' && customInspect) {\n        if (inspectSymbol && typeof obj[inspectSymbol] === 'function' && utilInspect) {\n            return utilInspect(obj, { depth: maxDepth - depth });\n        } else if (customInspect !== 'symbol' && typeof obj.inspect === 'function') {\n            return obj.inspect();\n        }\n    }\n    if (isMap(obj)) {\n        var mapParts = [];\n        if (mapForEach) {\n            mapForEach.call(obj, function (value, key) {\n                mapParts.push(inspect(key, obj, true) + ' => ' + inspect(value, obj));\n            });\n        }\n        return collectionOf('Map', mapSize.call(obj), mapParts, indent);\n    }\n    if (isSet(obj)) {\n        var setParts = [];\n        if (setForEach) {\n            setForEach.call(obj, function (value) {\n                setParts.push(inspect(value, obj));\n            });\n        }\n        return collectionOf('Set', setSize.call(obj), setParts, indent);\n    }\n    if (isWeakMap(obj)) {\n        return weakCollectionOf('WeakMap');\n    }\n    if (isWeakSet(obj)) {\n        return weakCollectionOf('WeakSet');\n    }\n    if (isWeakRef(obj)) {\n        return weakCollectionOf('WeakRef');\n    }\n    if (isNumber(obj)) {\n        return markBoxed(inspect(Number(obj)));\n    }\n    if (isBigInt(obj)) {\n        return markBoxed(inspect(bigIntValueOf.call(obj)));\n    }\n    if (isBoolean(obj)) {\n        return markBoxed(booleanValueOf.call(obj));\n    }\n    if (isString(obj)) {\n        return markBoxed(inspect(String(obj)));\n    }\n    // note: in IE 8, sometimes `global !== window` but both are the prototypes of each other\n    /* eslint-env browser */\n    if (typeof window !== 'undefined' && obj === window) {\n        return '{ [object Window] }';\n    }\n    if (\n        (typeof globalThis !== 'undefined' && obj === globalThis)\n        || (typeof global !== 'undefined' && obj === global)\n    ) {\n        return '{ [object globalThis] }';\n    }\n    if (!isDate(obj) && !isRegExp(obj)) {\n        var ys = arrObjKeys(obj, inspect);\n        var isPlainObject = gPO ? gPO(obj) === Object.prototype : obj instanceof Object || obj.constructor === Object;\n        var protoTag = obj instanceof Object ? '' : 'null prototype';\n        var stringTag = !isPlainObject && toStringTag && Object(obj) === obj && toStringTag in obj ? $slice.call(toStr(obj), 8, -1) : protoTag ? 'Object' : '';\n        var constructorTag = isPlainObject || typeof obj.constructor !== 'function' ? '' : obj.constructor.name ? obj.constructor.name + ' ' : '';\n        var tag = constructorTag + (stringTag || protoTag ? '[' + $join.call($concat.call([], stringTag || [], protoTag || []), ': ') + '] ' : '');\n        if (ys.length === 0) { return tag + '{}'; }\n        if (indent) {\n            return tag + '{' + indentedJoin(ys, indent) + '}';\n        }\n        return tag + '{ ' + $join.call(ys, ', ') + ' }';\n    }\n    return String(obj);\n};\n\nfunction wrapQuotes(s, defaultStyle, opts) {\n    var quoteChar = (opts.quoteStyle || defaultStyle) === 'double' ? '\"' : \"'\";\n    return quoteChar + s + quoteChar;\n}\n\nfunction quote(s) {\n    return $replace.call(String(s), /\"/g, '&quot;');\n}\n\nfunction isArray(obj) { return toStr(obj) === '[object Array]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isDate(obj) { return toStr(obj) === '[object Date]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isRegExp(obj) { return toStr(obj) === '[object RegExp]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isError(obj) { return toStr(obj) === '[object Error]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isString(obj) { return toStr(obj) === '[object String]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isNumber(obj) { return toStr(obj) === '[object Number]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isBoolean(obj) { return toStr(obj) === '[object Boolean]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\n\n// Symbol and BigInt do have Symbol.toStringTag by spec, so that can't be used to eliminate false positives\nfunction isSymbol(obj) {\n    if (hasShammedSymbols) {\n        return obj && typeof obj === 'object' && obj instanceof Symbol;\n    }\n    if (typeof obj === 'symbol') {\n        return true;\n    }\n    if (!obj || typeof obj !== 'object' || !symToString) {\n        return false;\n    }\n    try {\n        symToString.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isBigInt(obj) {\n    if (!obj || typeof obj !== 'object' || !bigIntValueOf) {\n        return false;\n    }\n    try {\n        bigIntValueOf.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty || function (key) { return key in this; };\nfunction has(obj, key) {\n    return hasOwn.call(obj, key);\n}\n\nfunction toStr(obj) {\n    return objectToString.call(obj);\n}\n\nfunction nameOf(f) {\n    if (f.name) { return f.name; }\n    var m = $match.call(functionToString.call(f), /^function\\s*([\\w$]+)/);\n    if (m) { return m[1]; }\n    return null;\n}\n\nfunction indexOf(xs, x) {\n    if (xs.indexOf) { return xs.indexOf(x); }\n    for (var i = 0, l = xs.length; i < l; i++) {\n        if (xs[i] === x) { return i; }\n    }\n    return -1;\n}\n\nfunction isMap(x) {\n    if (!mapSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        mapSize.call(x);\n        try {\n            setSize.call(x);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof Map; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakMap(x) {\n    if (!weakMapHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakMapHas.call(x, weakMapHas);\n        try {\n            weakSetHas.call(x, weakSetHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakMap; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakRef(x) {\n    if (!weakRefDeref || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakRefDeref.call(x);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isSet(x) {\n    if (!setSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        setSize.call(x);\n        try {\n            mapSize.call(x);\n        } catch (m) {\n            return true;\n        }\n        return x instanceof Set; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakSet(x) {\n    if (!weakSetHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakSetHas.call(x, weakSetHas);\n        try {\n            weakMapHas.call(x, weakMapHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakSet; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isElement(x) {\n    if (!x || typeof x !== 'object') { return false; }\n    if (typeof HTMLElement !== 'undefined' && x instanceof HTMLElement) {\n        return true;\n    }\n    return typeof x.nodeName === 'string' && typeof x.getAttribute === 'function';\n}\n\nfunction inspectString(str, opts) {\n    if (str.length > opts.maxStringLength) {\n        var remaining = str.length - opts.maxStringLength;\n        var trailer = '... ' + remaining + ' more character' + (remaining > 1 ? 's' : '');\n        return inspectString($slice.call(str, 0, opts.maxStringLength), opts) + trailer;\n    }\n    // eslint-disable-next-line no-control-regex\n    var s = $replace.call($replace.call(str, /(['\\\\])/g, '\\\\$1'), /[\\x00-\\x1f]/g, lowbyte);\n    return wrapQuotes(s, 'single', opts);\n}\n\nfunction lowbyte(c) {\n    var n = c.charCodeAt(0);\n    var x = {\n        8: 'b',\n        9: 't',\n        10: 'n',\n        12: 'f',\n        13: 'r'\n    }[n];\n    if (x) { return '\\\\' + x; }\n    return '\\\\x' + (n < 0x10 ? '0' : '') + $toUpperCase.call(n.toString(16));\n}\n\nfunction markBoxed(str) {\n    return 'Object(' + str + ')';\n}\n\nfunction weakCollectionOf(type) {\n    return type + ' { ? }';\n}\n\nfunction collectionOf(type, size, entries, indent) {\n    var joinedEntries = indent ? indentedJoin(entries, indent) : $join.call(entries, ', ');\n    return type + ' (' + size + ') {' + joinedEntries + '}';\n}\n\nfunction singleLineValues(xs) {\n    for (var i = 0; i < xs.length; i++) {\n        if (indexOf(xs[i], '\\n') >= 0) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction getIndent(opts, depth) {\n    var baseIndent;\n    if (opts.indent === '\\t') {\n        baseIndent = '\\t';\n    } else if (typeof opts.indent === 'number' && opts.indent > 0) {\n        baseIndent = $join.call(Array(opts.indent + 1), ' ');\n    } else {\n        return null;\n    }\n    return {\n        base: baseIndent,\n        prev: $join.call(Array(depth + 1), baseIndent)\n    };\n}\n\nfunction indentedJoin(xs, indent) {\n    if (xs.length === 0) { return ''; }\n    var lineJoiner = '\\n' + indent.prev + indent.base;\n    return lineJoiner + $join.call(xs, ',' + lineJoiner) + '\\n' + indent.prev;\n}\n\nfunction arrObjKeys(obj, inspect) {\n    var isArr = isArray(obj);\n    var xs = [];\n    if (isArr) {\n        xs.length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            xs[i] = has(obj, i) ? inspect(obj[i], obj) : '';\n        }\n    }\n    var syms = typeof gOPS === 'function' ? gOPS(obj) : [];\n    var symMap;\n    if (hasShammedSymbols) {\n        symMap = {};\n        for (var k = 0; k < syms.length; k++) {\n            symMap['$' + syms[k]] = syms[k];\n        }\n    }\n\n    for (var key in obj) { // eslint-disable-line no-restricted-syntax\n        if (!has(obj, key)) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (isArr && String(Number(key)) === key && key < obj.length) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (hasShammedSymbols && symMap['$' + key] instanceof Symbol) {\n            // this is to prevent shammed Symbols, which are stored as strings, from being included in the string key section\n            continue; // eslint-disable-line no-restricted-syntax, no-continue\n        } else if ($test.call(/[^\\w$]/, key)) {\n            xs.push(inspect(key, obj) + ': ' + inspect(obj[key], obj));\n        } else {\n            xs.push(key + ': ' + inspect(obj[key], obj));\n        }\n    }\n    if (typeof gOPS === 'function') {\n        for (var j = 0; j < syms.length; j++) {\n            if (isEnumerable.call(obj, syms[j])) {\n                xs.push('[' + inspect(syms[j]) + ']: ' + inspect(obj[syms[j]], obj));\n            }\n        }\n    }\n    return xs;\n}\n","module.exports = require('util').inspect;\n","'use strict';\n\nvar numberIsNaN = function (value) {\n\treturn value !== value;\n};\n\nmodule.exports = function is(a, b) {\n\tif (a === 0 && b === 0) {\n\t\treturn 1 / a === 1 / b;\n\t}\n\tif (a === b) {\n\t\treturn true;\n\t}\n\tif (numberIsNaN(a) && numberIsNaN(b)) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n","'use strict';\n\nvar define = require('define-properties');\nvar callBind = require('call-bind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Object);\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\treturn typeof Object.is === 'function' ? Object.is : implementation;\n};\n","'use strict';\n\nvar getPolyfill = require('./polyfill');\nvar define = require('define-properties');\n\nmodule.exports = function shimObjectIs() {\n\tvar polyfill = getPolyfill();\n\tdefine(Object, { is: polyfill }, {\n\t\tis: function testObjectIs() {\n\t\t\treturn Object.is !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","'use strict';\n\nvar keysShim;\nif (!Object.keys) {\n\t// modified from https://github.com/es-shims/es5-shim\n\tvar has = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\tvar isArgs = require('./isArguments'); // eslint-disable-line global-require\n\tvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\tvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\n\tvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\n\tvar dontEnums = [\n\t\t'toString',\n\t\t'toLocaleString',\n\t\t'valueOf',\n\t\t'hasOwnProperty',\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'constructor'\n\t];\n\tvar equalsConstructorPrototype = function (o) {\n\t\tvar ctor = o.constructor;\n\t\treturn ctor && ctor.prototype === o;\n\t};\n\tvar excludedKeys = {\n\t\t$applicationCache: true,\n\t\t$console: true,\n\t\t$external: true,\n\t\t$frame: true,\n\t\t$frameElement: true,\n\t\t$frames: true,\n\t\t$innerHeight: true,\n\t\t$innerWidth: true,\n\t\t$onmozfullscreenchange: true,\n\t\t$onmozfullscreenerror: true,\n\t\t$outerHeight: true,\n\t\t$outerWidth: true,\n\t\t$pageXOffset: true,\n\t\t$pageYOffset: true,\n\t\t$parent: true,\n\t\t$scrollLeft: true,\n\t\t$scrollTop: true,\n\t\t$scrollX: true,\n\t\t$scrollY: true,\n\t\t$self: true,\n\t\t$webkitIndexedDB: true,\n\t\t$webkitStorageInfo: true,\n\t\t$window: true\n\t};\n\tvar hasAutomationEqualityBug = (function () {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined') { return false; }\n\t\tfor (var k in window) {\n\t\t\ttry {\n\t\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}());\n\tvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t}\n\t\ttry {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tkeysShim = function keys(object) {\n\t\tvar isObject = object !== null && typeof object === 'object';\n\t\tvar isFunction = toStr.call(object) === '[object Function]';\n\t\tvar isArguments = isArgs(object);\n\t\tvar isString = isObject && toStr.call(object) === '[object String]';\n\t\tvar theKeys = [];\n\n\t\tif (!isObject && !isFunction && !isArguments) {\n\t\t\tthrow new TypeError('Object.keys called on a non-object');\n\t\t}\n\n\t\tvar skipProto = hasProtoEnumBug && isFunction;\n\t\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\t\ttheKeys.push(String(i));\n\t\t\t}\n\t\t}\n\n\t\tif (isArguments && object.length > 0) {\n\t\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\t\ttheKeys.push(String(j));\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var name in object) {\n\t\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\t\ttheKeys.push(String(name));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theKeys;\n\t};\n}\nmodule.exports = keysShim;\n","'use strict';\n\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\n\nvar origKeys = Object.keys;\nvar keysShim = origKeys ? function keys(o) { return origKeys(o); } : require('./implementation');\n\nvar originalKeys = Object.keys;\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\tvar args = Object.keys(arguments);\n\t\t\treturn args && args.length === arguments.length;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tObject.keys = function keys(object) { // eslint-disable-line func-name-matching\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t}\n\t\t\t\treturn originalKeys(object);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","'use strict';\n\n// modified from https://github.com/es-shims/es6-shim\nvar objectKeys = require('object-keys');\nvar hasSymbols = require('has-symbols/shams')();\nvar callBound = require('call-bind/callBound');\nvar toObject = Object;\nvar $push = callBound('Array.prototype.push');\nvar $propIsEnumerable = callBound('Object.prototype.propertyIsEnumerable');\nvar originalGetSymbols = hasSymbols ? Object.getOwnPropertySymbols : null;\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function assign(target, source1) {\n\tif (target == null) { throw new TypeError('target must be an object'); }\n\tvar to = toObject(target); // step 1\n\tif (arguments.length === 1) {\n\t\treturn to; // step 2\n\t}\n\tfor (var s = 1; s < arguments.length; ++s) {\n\t\tvar from = toObject(arguments[s]); // step 3.a.i\n\n\t\t// step 3.a.ii:\n\t\tvar keys = objectKeys(from);\n\t\tvar getSymbols = hasSymbols && (Object.getOwnPropertySymbols || originalGetSymbols);\n\t\tif (getSymbols) {\n\t\t\tvar syms = getSymbols(from);\n\t\t\tfor (var j = 0; j < syms.length; ++j) {\n\t\t\t\tvar key = syms[j];\n\t\t\t\tif ($propIsEnumerable(from, key)) {\n\t\t\t\t\t$push(keys, key);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// step 3.a.iii:\n\t\tfor (var i = 0; i < keys.length; ++i) {\n\t\t\tvar nextKey = keys[i];\n\t\t\tif ($propIsEnumerable(from, nextKey)) { // step 3.a.iii.2\n\t\t\t\tvar propValue = from[nextKey]; // step 3.a.iii.2.a\n\t\t\t\tto[nextKey] = propValue; // step 3.a.iii.2.b\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to; // step 4\n};\n","'use strict';\n\nvar defineProperties = require('define-properties');\nvar callBind = require('call-bind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind.apply(getPolyfill());\n// eslint-disable-next-line no-unused-vars\nvar bound = function assign(target, source1) {\n\treturn polyfill(Object, arguments);\n};\n\ndefineProperties(bound, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = bound;\n","'use strict';\n\nvar implementation = require('./implementation');\n\nvar lacksProperEnumerationOrder = function () {\n\tif (!Object.assign) {\n\t\treturn false;\n\t}\n\t/*\n\t * v8, specifically in node 4.x, has a bug with incorrect property enumeration order\n\t * note: this does not detect the bug unless there's 20 characters\n\t */\n\tvar str = 'abcdefghijklmnopqrst';\n\tvar letters = str.split('');\n\tvar map = {};\n\tfor (var i = 0; i < letters.length; ++i) {\n\t\tmap[letters[i]] = letters[i];\n\t}\n\tvar obj = Object.assign({}, map);\n\tvar actual = '';\n\tfor (var k in obj) {\n\t\tactual += k;\n\t}\n\treturn str !== actual;\n};\n\nvar assignHasPendingExceptions = function () {\n\tif (!Object.assign || !Object.preventExtensions) {\n\t\treturn false;\n\t}\n\t/*\n\t * Firefox 37 still has \"pending exception\" logic in its Object.assign implementation,\n\t * which is 72% slower than our shim, and Firefox 40's native implementation.\n\t */\n\tvar thrower = Object.preventExtensions({ 1: 2 });\n\ttry {\n\t\tObject.assign(thrower, 'xy');\n\t} catch (e) {\n\t\treturn thrower[1] === 'y';\n\t}\n\treturn false;\n};\n\nmodule.exports = function getPolyfill() {\n\tif (!Object.assign) {\n\t\treturn implementation;\n\t}\n\tif (lacksProperEnumerationOrder()) {\n\t\treturn implementation;\n\t}\n\tif (assignHasPendingExceptions()) {\n\t\treturn implementation;\n\t}\n\treturn Object.assign;\n};\n","'use strict';\n\nvar define = require('define-properties');\nvar getPolyfill = require('./polyfill');\n\nmodule.exports = function shimAssign() {\n\tvar polyfill = getPolyfill();\n\tdefine(\n\t\tObject,\n\t\t{ assign: polyfill },\n\t\t{ assign: function () { return Object.assign !== polyfill; } }\n\t);\n\treturn polyfill;\n};\n","//through@2 handles this by default!\nmodule.exports = require('through')\n\n","const net = require('net');\nconst debug = require('debug')('pick-port');\nconst warn = require('debug')('pick-port:WARN');\nconst tcp = require('./lib/tcp');\nconst udp = require('./lib/udp');\n\n/* eslint-disable no-console */\ndebug.log = console.debug.bind(console);\nwarn.log = console.warn.bind(console);\n/* eslint-enable no-console */\n\n// Store picked ports for the specified reserveTimeout time.\n// This Set stores strings with the form \"type:ip:port\".\nconst reserved = new Set();\n\nmodule.exports = async function(\n\t{\n\t\ttype = 'udp',\n\t\tip = '0.0.0.0',\n\t\tminPort = 10000,\n\t\tmaxPort = 20000,\n\t\treserveTimeout = 5\n\t} = {}\n)\n{\n\tdebug(\n\t\t'called with [type:%s, ip:%s, minPort:%d, maxPort:%d, reserveTimeout:%d]',\n\t\ttype, ip, minPort, maxPort, reserveTimeout);\n\n\t// Sanity checks.\n\ttype = type.toLowerCase();\n\n\tconst family = net.isIP(ip);\n\n\tif (type !== 'udp' && type !== 'tcp')\n\t\tthrow new TypeError('invalid type parameter');\n\n\tif (family !== 4 && family !== 6)\n\t\tthrow new TypeError('invalid ip parameter');\n\n\tif (typeof minPort !== 'number' || typeof maxPort !== 'number' || minPort > maxPort)\n\t\tthrow new TypeError('invalid minPort/maxPort parameter');\n\n\tif (typeof reserveTimeout !== 'number')\n\t\tthrow new TypeError('invalid reserveTimeout parameter');\n\n\tconst handle = type === 'udp'? udp : tcp;\n\n\t// Take a random port in the range.\n\tlet port = Math.floor(Math.random() * ((maxPort + 1) - minPort)) + minPort;\n\tlet retries = maxPort - minPort + 1;\n\n\twhile (--retries >= 0)\n\t{\n\t\t// Keep the port within the range.\n\t\tif (++port > maxPort)\n\t\t\tport = minPort;\n\n\t\t// If current port is reserved, try next one.\n\t\tif (isReserved({ type, ip, port }))\n\t\t\tcontinue;\n\n\t\ttry\n\t\t{\n\t\t\tawait handle({ ip, port, family });\n\n\t\t\treserve({ type, ip, port, reserveTimeout });\n\n\t\t\tdebug('got an available port [type:%s, ip:%s, port:%d]', type, ip, port);\n\n\t\t\treturn port;\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tif (error.code === 'EADDRINUSE')\n\t\t\t{\n\t\t\t\tdebug('port in use [type:%s, ip:%s, port:%d]', type, ip, port);\n\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twarn(\n\t\t\t\t\t'could not get any available port [type:%s, ip:%s, port:%d]: %s',\n\t\t\t\t\ttype, ip, port, error.toString());\n\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow new Error('no port available');\n};\n\nfunction reserve({ type, ip, port, reserveTimeout })\n{\n\tconst value = `${type}:${ip}:${port}`;\n\n\treserved.add(value);\n\n\tsetTimeout(() => reserved.delete(value), reserveTimeout * 1000);\n}\n\nfunction isReserved({ type, ip, port })\n{\n\tconst value = `${type}:${ip}:${port}`;\n\n\treturn reserved.has(value);\n}\n","const net = require('net');\n\nmodule.exports = async function({ ip, port })\n{\n\tconst server = net.createServer();\n\n\treturn new Promise((resolve, reject) =>\n\t{\n\t\tserver.unref();\n\t\tserver.on('error', reject);\n\n\t\tserver.listen({ port, exclusive: true }, ip, () => server.close(resolve));\n\t});\n};\n","const dgram = require('dgram');\n\nmodule.exports = async function({ ip, port, family })\n{\n\tconst server = dgram.createSocket(family === 4 ? 'udp4' : 'udp6');\n\n\treturn new Promise((resolve, reject) =>\n\t{\n\t\tserver.unref();\n\t\tserver.on('error', reject);\n\n\t\tserver.bind({ port, exclusive: true }, ip, () => server.close(resolve));\n\t});\n};\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = [\n\t'Float32Array',\n\t'Float64Array',\n\t'Int8Array',\n\t'Int16Array',\n\t'Int32Array',\n\t'Uint8Array',\n\t'Uint8ClampedArray',\n\t'Uint16Array',\n\t'Uint32Array',\n\t'BigInt64Array',\n\t'BigUint64Array'\n];\n","// vim:ts=4:sts=4:sw=4:\n/*!\n *\n * Copyright 2009-2012 Kris Kowal under the terms of the MIT\n * license found at http://github.com/kriskowal/q/raw/master/LICENSE\n *\n * With parts by Tyler Close\n * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found\n * at http://www.opensource.org/licenses/mit-license.html\n * Forked at ref_send.js version: 2009-05-11\n *\n * With parts by Mark Miller\n * Copyright (C) 2011 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n(function (definition) {\n    \"use strict\";\n\n    // This file will function properly as a <script> tag, or a module\n    // using CommonJS and NodeJS or RequireJS module formats.  In\n    // Common/Node/RequireJS, the module exports the Q API and when\n    // executed as a simple <script>, it creates a Q global instead.\n\n    // Montage Require\n    if (typeof bootstrap === \"function\") {\n        bootstrap(\"promise\", definition);\n\n    // CommonJS\n    } else if (typeof exports === \"object\" && typeof module === \"object\") {\n        module.exports = definition();\n\n    // RequireJS\n    } else if (typeof define === \"function\" && define.amd) {\n        define(definition);\n\n    // SES (Secure EcmaScript)\n    } else if (typeof ses !== \"undefined\") {\n        if (!ses.ok()) {\n            return;\n        } else {\n            ses.makeQ = definition;\n        }\n\n    // <script>\n    } else if (typeof self !== \"undefined\") {\n        self.Q = definition();\n\n    } else {\n        throw new Error(\"This environment was not anticiapted by Q. Please file a bug.\");\n    }\n\n})(function () {\n\"use strict\";\n\nvar hasStacks = false;\ntry {\n    throw new Error();\n} catch (e) {\n    hasStacks = !!e.stack;\n}\n\n// All code after this point will be filtered from stack traces reported\n// by Q.\nvar qStartingLine = captureLine();\nvar qFileName;\n\n// shims\n\n// used for fallback in \"allResolved\"\nvar noop = function () {};\n\n// Use the fastest possible means to execute a task in a future turn\n// of the event loop.\nvar nextTick =(function () {\n    // linked list of tasks (single, with head node)\n    var head = {task: void 0, next: null};\n    var tail = head;\n    var flushing = false;\n    var requestTick = void 0;\n    var isNodeJS = false;\n\n    function flush() {\n        /* jshint loopfunc: true */\n\n        while (head.next) {\n            head = head.next;\n            var task = head.task;\n            head.task = void 0;\n            var domain = head.domain;\n\n            if (domain) {\n                head.domain = void 0;\n                domain.enter();\n            }\n\n            try {\n                task();\n\n            } catch (e) {\n                if (isNodeJS) {\n                    // In node, uncaught exceptions are considered fatal errors.\n                    // Re-throw them synchronously to interrupt flushing!\n\n                    // Ensure continuation if the uncaught exception is suppressed\n                    // listening \"uncaughtException\" events (as domains does).\n                    // Continue in next event to avoid tick recursion.\n                    if (domain) {\n                        domain.exit();\n                    }\n                    setTimeout(flush, 0);\n                    if (domain) {\n                        domain.enter();\n                    }\n\n                    throw e;\n\n                } else {\n                    // In browsers, uncaught exceptions are not fatal.\n                    // Re-throw them asynchronously to avoid slow-downs.\n                    setTimeout(function() {\n                       throw e;\n                    }, 0);\n                }\n            }\n\n            if (domain) {\n                domain.exit();\n            }\n        }\n\n        flushing = false;\n    }\n\n    nextTick = function (task) {\n        tail = tail.next = {\n            task: task,\n            domain: isNodeJS && process.domain,\n            next: null\n        };\n\n        if (!flushing) {\n            flushing = true;\n            requestTick();\n        }\n    };\n\n    if (typeof process !== \"undefined\" && process.nextTick) {\n        // Node.js before 0.9. Note that some fake-Node environments, like the\n        // Mocha test runner, introduce a `process` global without a `nextTick`.\n        isNodeJS = true;\n\n        requestTick = function () {\n            process.nextTick(flush);\n        };\n\n    } else if (typeof setImmediate === \"function\") {\n        // In IE10, Node.js 0.9+, or https://github.com/NobleJS/setImmediate\n        if (typeof window !== \"undefined\") {\n            requestTick = setImmediate.bind(window, flush);\n        } else {\n            requestTick = function () {\n                setImmediate(flush);\n            };\n        }\n\n    } else if (typeof MessageChannel !== \"undefined\") {\n        // modern browsers\n        // http://www.nonblocking.io/2011/06/windownexttick.html\n        var channel = new MessageChannel();\n        // At least Safari Version 6.0.5 (8536.30.1) intermittently cannot create\n        // working message ports the first time a page loads.\n        channel.port1.onmessage = function () {\n            requestTick = requestPortTick;\n            channel.port1.onmessage = flush;\n            flush();\n        };\n        var requestPortTick = function () {\n            // Opera requires us to provide a message payload, regardless of\n            // whether we use it.\n            channel.port2.postMessage(0);\n        };\n        requestTick = function () {\n            setTimeout(flush, 0);\n            requestPortTick();\n        };\n\n    } else {\n        // old browsers\n        requestTick = function () {\n            setTimeout(flush, 0);\n        };\n    }\n\n    return nextTick;\n})();\n\n// Attempt to make generics safe in the face of downstream\n// modifications.\n// There is no situation where this is necessary.\n// If you need a security guarantee, these primordials need to be\n// deeply frozen anyway, and if you dont need a security guarantee,\n// this is just plain paranoid.\n// However, this **might** have the nice side-effect of reducing the size of\n// the minified code by reducing x.call() to merely x()\n// See Mark Millers explanation of what this does.\n// http://wiki.ecmascript.org/doku.php?id=conventions:safe_meta_programming\nvar call = Function.call;\nfunction uncurryThis(f) {\n    return function () {\n        return call.apply(f, arguments);\n    };\n}\n// This is equivalent, but slower:\n// uncurryThis = Function_bind.bind(Function_bind.call);\n// http://jsperf.com/uncurrythis\n\nvar array_slice = uncurryThis(Array.prototype.slice);\n\nvar array_reduce = uncurryThis(\n    Array.prototype.reduce || function (callback, basis) {\n        var index = 0,\n            length = this.length;\n        // concerning the initial value, if one is not provided\n        if (arguments.length === 1) {\n            // seek to the first value in the array, accounting\n            // for the possibility that is is a sparse array\n            do {\n                if (index in this) {\n                    basis = this[index++];\n                    break;\n                }\n                if (++index >= length) {\n                    throw new TypeError();\n                }\n            } while (1);\n        }\n        // reduce\n        for (; index < length; index++) {\n            // account for the possibility that the array is sparse\n            if (index in this) {\n                basis = callback(basis, this[index], index);\n            }\n        }\n        return basis;\n    }\n);\n\nvar array_indexOf = uncurryThis(\n    Array.prototype.indexOf || function (value) {\n        // not a very good shim, but good enough for our one use of it\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] === value) {\n                return i;\n            }\n        }\n        return -1;\n    }\n);\n\nvar array_map = uncurryThis(\n    Array.prototype.map || function (callback, thisp) {\n        var self = this;\n        var collect = [];\n        array_reduce(self, function (undefined, value, index) {\n            collect.push(callback.call(thisp, value, index, self));\n        }, void 0);\n        return collect;\n    }\n);\n\nvar object_create = Object.create || function (prototype) {\n    function Type() { }\n    Type.prototype = prototype;\n    return new Type();\n};\n\nvar object_hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\n\nvar object_keys = Object.keys || function (object) {\n    var keys = [];\n    for (var key in object) {\n        if (object_hasOwnProperty(object, key)) {\n            keys.push(key);\n        }\n    }\n    return keys;\n};\n\nvar object_toString = uncurryThis(Object.prototype.toString);\n\nfunction isObject(value) {\n    return value === Object(value);\n}\n\n// generator related shims\n\n// FIXME: Remove this function once ES6 generators are in SpiderMonkey.\nfunction isStopIteration(exception) {\n    return (\n        object_toString(exception) === \"[object StopIteration]\" ||\n        exception instanceof QReturnValue\n    );\n}\n\n// FIXME: Remove this helper and Q.return once ES6 generators are in\n// SpiderMonkey.\nvar QReturnValue;\nif (typeof ReturnValue !== \"undefined\") {\n    QReturnValue = ReturnValue;\n} else {\n    QReturnValue = function (value) {\n        this.value = value;\n    };\n}\n\n// long stack traces\n\nvar STACK_JUMP_SEPARATOR = \"From previous event:\";\n\nfunction makeStackTraceLong(error, promise) {\n    // If possible, transform the error stack trace by removing Node and Q\n    // cruft, then concatenating with the stack trace of `promise`. See #57.\n    if (hasStacks &&\n        promise.stack &&\n        typeof error === \"object\" &&\n        error !== null &&\n        error.stack &&\n        error.stack.indexOf(STACK_JUMP_SEPARATOR) === -1\n    ) {\n        var stacks = [];\n        for (var p = promise; !!p; p = p.source) {\n            if (p.stack) {\n                stacks.unshift(p.stack);\n            }\n        }\n        stacks.unshift(error.stack);\n\n        var concatedStacks = stacks.join(\"\\n\" + STACK_JUMP_SEPARATOR + \"\\n\");\n        error.stack = filterStackString(concatedStacks);\n    }\n}\n\nfunction filterStackString(stackString) {\n    var lines = stackString.split(\"\\n\");\n    var desiredLines = [];\n    for (var i = 0; i < lines.length; ++i) {\n        var line = lines[i];\n\n        if (!isInternalFrame(line) && !isNodeFrame(line) && line) {\n            desiredLines.push(line);\n        }\n    }\n    return desiredLines.join(\"\\n\");\n}\n\nfunction isNodeFrame(stackLine) {\n    return stackLine.indexOf(\"(module.js:\") !== -1 ||\n           stackLine.indexOf(\"(node.js:\") !== -1;\n}\n\nfunction getFileNameAndLineNumber(stackLine) {\n    // Named functions: \"at functionName (filename:lineNumber:columnNumber)\"\n    // In IE10 function name can have spaces (\"Anonymous function\") O_o\n    var attempt1 = /at .+ \\((.+):(\\d+):(?:\\d+)\\)$/.exec(stackLine);\n    if (attempt1) {\n        return [attempt1[1], Number(attempt1[2])];\n    }\n\n    // Anonymous functions: \"at filename:lineNumber:columnNumber\"\n    var attempt2 = /at ([^ ]+):(\\d+):(?:\\d+)$/.exec(stackLine);\n    if (attempt2) {\n        return [attempt2[1], Number(attempt2[2])];\n    }\n\n    // Firefox style: \"function@filename:lineNumber or @filename:lineNumber\"\n    var attempt3 = /.*@(.+):(\\d+)$/.exec(stackLine);\n    if (attempt3) {\n        return [attempt3[1], Number(attempt3[2])];\n    }\n}\n\nfunction isInternalFrame(stackLine) {\n    var fileNameAndLineNumber = getFileNameAndLineNumber(stackLine);\n\n    if (!fileNameAndLineNumber) {\n        return false;\n    }\n\n    var fileName = fileNameAndLineNumber[0];\n    var lineNumber = fileNameAndLineNumber[1];\n\n    return fileName === qFileName &&\n        lineNumber >= qStartingLine &&\n        lineNumber <= qEndingLine;\n}\n\n// discover own file name and line number range for filtering stack\n// traces\nfunction captureLine() {\n    if (!hasStacks) {\n        return;\n    }\n\n    try {\n        throw new Error();\n    } catch (e) {\n        var lines = e.stack.split(\"\\n\");\n        var firstLine = lines[0].indexOf(\"@\") > 0 ? lines[1] : lines[2];\n        var fileNameAndLineNumber = getFileNameAndLineNumber(firstLine);\n        if (!fileNameAndLineNumber) {\n            return;\n        }\n\n        qFileName = fileNameAndLineNumber[0];\n        return fileNameAndLineNumber[1];\n    }\n}\n\nfunction deprecate(callback, name, alternative) {\n    return function () {\n        if (typeof console !== \"undefined\" &&\n            typeof console.warn === \"function\") {\n            console.warn(name + \" is deprecated, use \" + alternative +\n                         \" instead.\", new Error(\"\").stack);\n        }\n        return callback.apply(callback, arguments);\n    };\n}\n\n// end of shims\n// beginning of real work\n\n/**\n * Constructs a promise for an immediate reference, passes promises through, or\n * coerces promises from different systems.\n * @param value immediate reference or promise\n */\nfunction Q(value) {\n    // If the object is already a Promise, return it directly.  This enables\n    // the resolve function to both be used to created references from objects,\n    // but to tolerably coerce non-promises to promises.\n    if (value instanceof Promise) {\n        return value;\n    }\n\n    // assimilate thenables\n    if (isPromiseAlike(value)) {\n        return coerce(value);\n    } else {\n        return fulfill(value);\n    }\n}\nQ.resolve = Q;\n\n/**\n * Performs a task in a future turn of the event loop.\n * @param {Function} task\n */\nQ.nextTick = nextTick;\n\n/**\n * Controls whether or not long stack traces will be on\n */\nQ.longStackSupport = false;\n\n// enable long stacks if Q_DEBUG is set\nif (typeof process === \"object\" && process && process.env && process.env.Q_DEBUG) {\n    Q.longStackSupport = true;\n}\n\n/**\n * Constructs a {promise, resolve, reject} object.\n *\n * `resolve` is a callback to invoke with a more resolved value for the\n * promise. To fulfill the promise, invoke `resolve` with any value that is\n * not a thenable. To reject the promise, invoke `resolve` with a rejected\n * thenable, or invoke `reject` with the reason directly. To resolve the\n * promise to another thenable, thus putting it in the same state, invoke\n * `resolve` with that other thenable.\n */\nQ.defer = defer;\nfunction defer() {\n    // if \"messages\" is an \"Array\", that indicates that the promise has not yet\n    // been resolved.  If it is \"undefined\", it has been resolved.  Each\n    // element of the messages array is itself an array of complete arguments to\n    // forward to the resolved promise.  We coerce the resolution value to a\n    // promise using the `resolve` function because it handles both fully\n    // non-thenable values and other thenables gracefully.\n    var messages = [], progressListeners = [], resolvedPromise;\n\n    var deferred = object_create(defer.prototype);\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, operands) {\n        var args = array_slice(arguments);\n        if (messages) {\n            messages.push(args);\n            if (op === \"when\" && operands[1]) { // progress operand\n                progressListeners.push(operands[1]);\n            }\n        } else {\n            Q.nextTick(function () {\n                resolvedPromise.promiseDispatch.apply(resolvedPromise, args);\n            });\n        }\n    };\n\n    // XXX deprecated\n    promise.valueOf = function () {\n        if (messages) {\n            return promise;\n        }\n        var nearerValue = nearer(resolvedPromise);\n        if (isPromise(nearerValue)) {\n            resolvedPromise = nearerValue; // shorten chain\n        }\n        return nearerValue;\n    };\n\n    promise.inspect = function () {\n        if (!resolvedPromise) {\n            return { state: \"pending\" };\n        }\n        return resolvedPromise.inspect();\n    };\n\n    if (Q.longStackSupport && hasStacks) {\n        try {\n            throw new Error();\n        } catch (e) {\n            // NOTE: don't try to use `Error.captureStackTrace` or transfer the\n            // accessor around; that causes memory leaks as per GH-111. Just\n            // reify the stack trace as a string ASAP.\n            //\n            // At the same time, cut off the first line; it's always just\n            // \"[object Promise]\\n\", as per the `toString`.\n            promise.stack = e.stack.substring(e.stack.indexOf(\"\\n\") + 1);\n        }\n    }\n\n    // NOTE: we do the checks for `resolvedPromise` in each method, instead of\n    // consolidating them into `become`, since otherwise we'd create new\n    // promises with the lines `become(whatever(value))`. See e.g. GH-252.\n\n    function become(newPromise) {\n        resolvedPromise = newPromise;\n        promise.source = newPromise;\n\n        array_reduce(messages, function (undefined, message) {\n            Q.nextTick(function () {\n                newPromise.promiseDispatch.apply(newPromise, message);\n            });\n        }, void 0);\n\n        messages = void 0;\n        progressListeners = void 0;\n    }\n\n    deferred.promise = promise;\n    deferred.resolve = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(Q(value));\n    };\n\n    deferred.fulfill = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(fulfill(value));\n    };\n    deferred.reject = function (reason) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(reject(reason));\n    };\n    deferred.notify = function (progress) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        array_reduce(progressListeners, function (undefined, progressListener) {\n            Q.nextTick(function () {\n                progressListener(progress);\n            });\n        }, void 0);\n    };\n\n    return deferred;\n}\n\n/**\n * Creates a Node-style callback that will resolve or reject the deferred\n * promise.\n * @returns a nodeback\n */\ndefer.prototype.makeNodeResolver = function () {\n    var self = this;\n    return function (error, value) {\n        if (error) {\n            self.reject(error);\n        } else if (arguments.length > 2) {\n            self.resolve(array_slice(arguments, 1));\n        } else {\n            self.resolve(value);\n        }\n    };\n};\n\n/**\n * @param resolver {Function} a function that returns nothing and accepts\n * the resolve, reject, and notify functions for a deferred.\n * @returns a promise that may be resolved with the given resolve and reject\n * functions, or rejected by a thrown exception in resolver\n */\nQ.Promise = promise; // ES6\nQ.promise = promise;\nfunction promise(resolver) {\n    if (typeof resolver !== \"function\") {\n        throw new TypeError(\"resolver must be a function.\");\n    }\n    var deferred = defer();\n    try {\n        resolver(deferred.resolve, deferred.reject, deferred.notify);\n    } catch (reason) {\n        deferred.reject(reason);\n    }\n    return deferred.promise;\n}\n\npromise.race = race; // ES6\npromise.all = all; // ES6\npromise.reject = reject; // ES6\npromise.resolve = Q; // ES6\n\n// XXX experimental.  This method is a way to denote that a local value is\n// serializable and should be immediately dispatched to a remote upon request,\n// instead of passing a reference.\nQ.passByCopy = function (object) {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return object;\n};\n\nPromise.prototype.passByCopy = function () {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return this;\n};\n\n/**\n * If two promises eventually fulfill to the same value, promises that value,\n * but otherwise rejects.\n * @param x {Any*}\n * @param y {Any*}\n * @returns {Any*} a promise for x and y if they are the same, but a rejection\n * otherwise.\n *\n */\nQ.join = function (x, y) {\n    return Q(x).join(y);\n};\n\nPromise.prototype.join = function (that) {\n    return Q([this, that]).spread(function (x, y) {\n        if (x === y) {\n            // TODO: \"===\" should be Object.is or equiv\n            return x;\n        } else {\n            throw new Error(\"Can't join: not the same: \" + x + \" \" + y);\n        }\n    });\n};\n\n/**\n * Returns a promise for the first of an array of promises to become settled.\n * @param answers {Array[Any*]} promises to race\n * @returns {Any*} the first promise to be settled\n */\nQ.race = race;\nfunction race(answerPs) {\n    return promise(function(resolve, reject) {\n        // Switch to this once we can assume at least ES5\n        // answerPs.forEach(function(answerP) {\n        //     Q(answerP).then(resolve, reject);\n        // });\n        // Use this in the meantime\n        for (var i = 0, len = answerPs.length; i < len; i++) {\n            Q(answerPs[i]).then(resolve, reject);\n        }\n    });\n}\n\nPromise.prototype.race = function () {\n    return this.then(Q.race);\n};\n\n/**\n * Constructs a Promise with a promise descriptor object and optional fallback\n * function.  The descriptor contains methods like when(rejected), get(name),\n * set(name, value), post(name, args), and delete(name), which all\n * return either a value, a promise for a value, or a rejection.  The fallback\n * accepts the operation name, a resolver, and any further arguments that would\n * have been forwarded to the appropriate method above had a method been\n * provided with the proper name.  The API makes no guarantees about the nature\n * of the returned object, apart from that it is usable whereever promises are\n * bought and sold.\n */\nQ.makePromise = Promise;\nfunction Promise(descriptor, fallback, inspect) {\n    if (fallback === void 0) {\n        fallback = function (op) {\n            return reject(new Error(\n                \"Promise does not support operation: \" + op\n            ));\n        };\n    }\n    if (inspect === void 0) {\n        inspect = function () {\n            return {state: \"unknown\"};\n        };\n    }\n\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, args) {\n        var result;\n        try {\n            if (descriptor[op]) {\n                result = descriptor[op].apply(promise, args);\n            } else {\n                result = fallback.call(promise, op, args);\n            }\n        } catch (exception) {\n            result = reject(exception);\n        }\n        if (resolve) {\n            resolve(result);\n        }\n    };\n\n    promise.inspect = inspect;\n\n    // XXX deprecated `valueOf` and `exception` support\n    if (inspect) {\n        var inspected = inspect();\n        if (inspected.state === \"rejected\") {\n            promise.exception = inspected.reason;\n        }\n\n        promise.valueOf = function () {\n            var inspected = inspect();\n            if (inspected.state === \"pending\" ||\n                inspected.state === \"rejected\") {\n                return promise;\n            }\n            return inspected.value;\n        };\n    }\n\n    return promise;\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.then = function (fulfilled, rejected, progressed) {\n    var self = this;\n    var deferred = defer();\n    var done = false;   // ensure the untrusted promise makes at most a\n                        // single call to one of the callbacks\n\n    function _fulfilled(value) {\n        try {\n            return typeof fulfilled === \"function\" ? fulfilled(value) : value;\n        } catch (exception) {\n            return reject(exception);\n        }\n    }\n\n    function _rejected(exception) {\n        if (typeof rejected === \"function\") {\n            makeStackTraceLong(exception, self);\n            try {\n                return rejected(exception);\n            } catch (newException) {\n                return reject(newException);\n            }\n        }\n        return reject(exception);\n    }\n\n    function _progressed(value) {\n        return typeof progressed === \"function\" ? progressed(value) : value;\n    }\n\n    Q.nextTick(function () {\n        self.promiseDispatch(function (value) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_fulfilled(value));\n        }, \"when\", [function (exception) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_rejected(exception));\n        }]);\n    });\n\n    // Progress propagator need to be attached in the current tick.\n    self.promiseDispatch(void 0, \"when\", [void 0, function (value) {\n        var newValue;\n        var threw = false;\n        try {\n            newValue = _progressed(value);\n        } catch (e) {\n            threw = true;\n            if (Q.onerror) {\n                Q.onerror(e);\n            } else {\n                throw e;\n            }\n        }\n\n        if (!threw) {\n            deferred.notify(newValue);\n        }\n    }]);\n\n    return deferred.promise;\n};\n\nQ.tap = function (promise, callback) {\n    return Q(promise).tap(callback);\n};\n\n/**\n * Works almost like \"finally\", but not called for rejections.\n * Original resolution value is passed through callback unaffected.\n * Callback may return a promise that will be awaited for.\n * @param {Function} callback\n * @returns {Q.Promise}\n * @example\n * doSomething()\n *   .then(...)\n *   .tap(console.log)\n *   .then(...);\n */\nPromise.prototype.tap = function (callback) {\n    callback = Q(callback);\n\n    return this.then(function (value) {\n        return callback.fcall(value).thenResolve(value);\n    });\n};\n\n/**\n * Registers an observer on a promise.\n *\n * Guarantees:\n *\n * 1. that fulfilled and rejected will be called only once.\n * 2. that either the fulfilled callback or the rejected callback will be\n *    called, but not both.\n * 3. that fulfilled and rejected will not be called in this turn.\n *\n * @param value      promise or immediate reference to observe\n * @param fulfilled  function to be called with the fulfilled value\n * @param rejected   function to be called with the rejection exception\n * @param progressed function to be called on any progress notifications\n * @return promise for the return value from the invoked callback\n */\nQ.when = when;\nfunction when(value, fulfilled, rejected, progressed) {\n    return Q(value).then(fulfilled, rejected, progressed);\n}\n\nPromise.prototype.thenResolve = function (value) {\n    return this.then(function () { return value; });\n};\n\nQ.thenResolve = function (promise, value) {\n    return Q(promise).thenResolve(value);\n};\n\nPromise.prototype.thenReject = function (reason) {\n    return this.then(function () { throw reason; });\n};\n\nQ.thenReject = function (promise, reason) {\n    return Q(promise).thenReject(reason);\n};\n\n/**\n * If an object is not a promise, it is as \"near\" as possible.\n * If a promise is rejected, it is as \"near\" as possible too.\n * If its a fulfilled promise, the fulfillment value is nearer.\n * If its a deferred promise and the deferred has been resolved, the\n * resolution is \"nearer\".\n * @param object\n * @returns most resolved (nearest) form of the object\n */\n\n// XXX should we re-do this?\nQ.nearer = nearer;\nfunction nearer(value) {\n    if (isPromise(value)) {\n        var inspected = value.inspect();\n        if (inspected.state === \"fulfilled\") {\n            return inspected.value;\n        }\n    }\n    return value;\n}\n\n/**\n * @returns whether the given object is a promise.\n * Otherwise it is a fulfilled value.\n */\nQ.isPromise = isPromise;\nfunction isPromise(object) {\n    return object instanceof Promise;\n}\n\nQ.isPromiseAlike = isPromiseAlike;\nfunction isPromiseAlike(object) {\n    return isObject(object) && typeof object.then === \"function\";\n}\n\n/**\n * @returns whether the given object is a pending promise, meaning not\n * fulfilled or rejected.\n */\nQ.isPending = isPending;\nfunction isPending(object) {\n    return isPromise(object) && object.inspect().state === \"pending\";\n}\n\nPromise.prototype.isPending = function () {\n    return this.inspect().state === \"pending\";\n};\n\n/**\n * @returns whether the given object is a value or fulfilled\n * promise.\n */\nQ.isFulfilled = isFulfilled;\nfunction isFulfilled(object) {\n    return !isPromise(object) || object.inspect().state === \"fulfilled\";\n}\n\nPromise.prototype.isFulfilled = function () {\n    return this.inspect().state === \"fulfilled\";\n};\n\n/**\n * @returns whether the given object is a rejected promise.\n */\nQ.isRejected = isRejected;\nfunction isRejected(object) {\n    return isPromise(object) && object.inspect().state === \"rejected\";\n}\n\nPromise.prototype.isRejected = function () {\n    return this.inspect().state === \"rejected\";\n};\n\n//// BEGIN UNHANDLED REJECTION TRACKING\n\n// This promise library consumes exceptions thrown in handlers so they can be\n// handled by a subsequent promise.  The exceptions get added to this array when\n// they are created, and removed when they are handled.  Note that in ES6 or\n// shimmed environments, this would naturally be a `Set`.\nvar unhandledReasons = [];\nvar unhandledRejections = [];\nvar trackUnhandledRejections = true;\n\nfunction resetUnhandledRejections() {\n    unhandledReasons.length = 0;\n    unhandledRejections.length = 0;\n\n    if (!trackUnhandledRejections) {\n        trackUnhandledRejections = true;\n    }\n}\n\nfunction trackRejection(promise, reason) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n\n    unhandledRejections.push(promise);\n    if (reason && typeof reason.stack !== \"undefined\") {\n        unhandledReasons.push(reason.stack);\n    } else {\n        unhandledReasons.push(\"(no stack) \" + reason);\n    }\n}\n\nfunction untrackRejection(promise) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n\n    var at = array_indexOf(unhandledRejections, promise);\n    if (at !== -1) {\n        unhandledRejections.splice(at, 1);\n        unhandledReasons.splice(at, 1);\n    }\n}\n\nQ.resetUnhandledRejections = resetUnhandledRejections;\n\nQ.getUnhandledReasons = function () {\n    // Make a copy so that consumers can't interfere with our internal state.\n    return unhandledReasons.slice();\n};\n\nQ.stopUnhandledRejectionTracking = function () {\n    resetUnhandledRejections();\n    trackUnhandledRejections = false;\n};\n\nresetUnhandledRejections();\n\n//// END UNHANDLED REJECTION TRACKING\n\n/**\n * Constructs a rejected promise.\n * @param reason value describing the failure\n */\nQ.reject = reject;\nfunction reject(reason) {\n    var rejection = Promise({\n        \"when\": function (rejected) {\n            // note that the error has been handled\n            if (rejected) {\n                untrackRejection(this);\n            }\n            return rejected ? rejected(reason) : this;\n        }\n    }, function fallback() {\n        return this;\n    }, function inspect() {\n        return { state: \"rejected\", reason: reason };\n    });\n\n    // Note that the reason has not been handled.\n    trackRejection(rejection, reason);\n\n    return rejection;\n}\n\n/**\n * Constructs a fulfilled promise for an immediate reference.\n * @param value immediate reference\n */\nQ.fulfill = fulfill;\nfunction fulfill(value) {\n    return Promise({\n        \"when\": function () {\n            return value;\n        },\n        \"get\": function (name) {\n            return value[name];\n        },\n        \"set\": function (name, rhs) {\n            value[name] = rhs;\n        },\n        \"delete\": function (name) {\n            delete value[name];\n        },\n        \"post\": function (name, args) {\n            // Mark Miller proposes that post with no name should apply a\n            // promised function.\n            if (name === null || name === void 0) {\n                return value.apply(void 0, args);\n            } else {\n                return value[name].apply(value, args);\n            }\n        },\n        \"apply\": function (thisp, args) {\n            return value.apply(thisp, args);\n        },\n        \"keys\": function () {\n            return object_keys(value);\n        }\n    }, void 0, function inspect() {\n        return { state: \"fulfilled\", value: value };\n    });\n}\n\n/**\n * Converts thenables to Q promises.\n * @param promise thenable promise\n * @returns a Q promise\n */\nfunction coerce(promise) {\n    var deferred = defer();\n    Q.nextTick(function () {\n        try {\n            promise.then(deferred.resolve, deferred.reject, deferred.notify);\n        } catch (exception) {\n            deferred.reject(exception);\n        }\n    });\n    return deferred.promise;\n}\n\n/**\n * Annotates an object such that it will never be\n * transferred away from this process over any promise\n * communication channel.\n * @param object\n * @returns promise a wrapping of that object that\n * additionally responds to the \"isDef\" message\n * without a rejection.\n */\nQ.master = master;\nfunction master(object) {\n    return Promise({\n        \"isDef\": function () {}\n    }, function fallback(op, args) {\n        return dispatch(object, op, args);\n    }, function () {\n        return Q(object).inspect();\n    });\n}\n\n/**\n * Spreads the values of a promised array of arguments into the\n * fulfillment callback.\n * @param fulfilled callback that receives variadic arguments from the\n * promised array\n * @param rejected callback that receives the exception if the promise\n * is rejected.\n * @returns a promise for the return value or thrown exception of\n * either callback.\n */\nQ.spread = spread;\nfunction spread(value, fulfilled, rejected) {\n    return Q(value).spread(fulfilled, rejected);\n}\n\nPromise.prototype.spread = function (fulfilled, rejected) {\n    return this.all().then(function (array) {\n        return fulfilled.apply(void 0, array);\n    }, rejected);\n};\n\n/**\n * The async function is a decorator for generator functions, turning\n * them into asynchronous generators.  Although generators are only part\n * of the newest ECMAScript 6 drafts, this code does not cause syntax\n * errors in older engines.  This code should continue to work and will\n * in fact improve over time as the language improves.\n *\n * ES6 generators are currently part of V8 version 3.19 with the\n * --harmony-generators runtime flag enabled.  SpiderMonkey has had them\n * for longer, but under an older Python-inspired form.  This function\n * works on both kinds of generators.\n *\n * Decorates a generator function such that:\n *  - it may yield promises\n *  - execution will continue when that promise is fulfilled\n *  - the value of the yield expression will be the fulfilled value\n *  - it returns a promise for the return value (when the generator\n *    stops iterating)\n *  - the decorated function returns a promise for the return value\n *    of the generator or the first rejected promise among those\n *    yielded.\n *  - if an error is thrown in the generator, it propagates through\n *    every following yield until it is caught, or until it escapes\n *    the generator function altogether, and is translated into a\n *    rejection for the promise returned by the decorated generator.\n */\nQ.async = async;\nfunction async(makeGenerator) {\n    return function () {\n        // when verb is \"send\", arg is a value\n        // when verb is \"throw\", arg is an exception\n        function continuer(verb, arg) {\n            var result;\n\n            // Until V8 3.19 / Chromium 29 is released, SpiderMonkey is the only\n            // engine that has a deployed base of browsers that support generators.\n            // However, SM's generators use the Python-inspired semantics of\n            // outdated ES6 drafts.  We would like to support ES6, but we'd also\n            // like to make it possible to use generators in deployed browsers, so\n            // we also support Python-style generators.  At some point we can remove\n            // this block.\n\n            if (typeof StopIteration === \"undefined\") {\n                // ES6 Generators\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    return reject(exception);\n                }\n                if (result.done) {\n                    return Q(result.value);\n                } else {\n                    return when(result.value, callback, errback);\n                }\n            } else {\n                // SpiderMonkey Generators\n                // FIXME: Remove this case when SM does ES6 generators.\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    if (isStopIteration(exception)) {\n                        return Q(exception.value);\n                    } else {\n                        return reject(exception);\n                    }\n                }\n                return when(result, callback, errback);\n            }\n        }\n        var generator = makeGenerator.apply(this, arguments);\n        var callback = continuer.bind(continuer, \"next\");\n        var errback = continuer.bind(continuer, \"throw\");\n        return callback();\n    };\n}\n\n/**\n * The spawn function is a small wrapper around async that immediately\n * calls the generator and also ends the promise chain, so that any\n * unhandled errors are thrown instead of forwarded to the error\n * handler. This is useful because it's extremely common to run\n * generators at the top-level to work with libraries.\n */\nQ.spawn = spawn;\nfunction spawn(makeGenerator) {\n    Q.done(Q.async(makeGenerator)());\n}\n\n// FIXME: Remove this interface once ES6 generators are in SpiderMonkey.\n/**\n * Throws a ReturnValue exception to stop an asynchronous generator.\n *\n * This interface is a stop-gap measure to support generator return\n * values in older Firefox/SpiderMonkey.  In browsers that support ES6\n * generators like Chromium 29, just use \"return\" in your generator\n * functions.\n *\n * @param value the return value for the surrounding generator\n * @throws ReturnValue exception with the value.\n * @example\n * // ES6 style\n * Q.async(function* () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      return foo + bar;\n * })\n * // Older SpiderMonkey style\n * Q.async(function () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      Q.return(foo + bar);\n * })\n */\nQ[\"return\"] = _return;\nfunction _return(value) {\n    throw new QReturnValue(value);\n}\n\n/**\n * The promised function decorator ensures that any promise arguments\n * are settled and passed as values (`this` is also settled and passed\n * as a value).  It will also ensure that the result of a function is\n * always a promise.\n *\n * @example\n * var add = Q.promised(function (a, b) {\n *     return a + b;\n * });\n * add(Q(a), Q(B));\n *\n * @param {function} callback The function to decorate\n * @returns {function} a function that has been decorated.\n */\nQ.promised = promised;\nfunction promised(callback) {\n    return function () {\n        return spread([this, all(arguments)], function (self, args) {\n            return callback.apply(self, args);\n        });\n    };\n}\n\n/**\n * sends a message to a value in a future turn\n * @param object* the recipient\n * @param op the name of the message operation, e.g., \"when\",\n * @param args further arguments to be forwarded to the operation\n * @returns result {Promise} a promise for the result of the operation\n */\nQ.dispatch = dispatch;\nfunction dispatch(object, op, args) {\n    return Q(object).dispatch(op, args);\n}\n\nPromise.prototype.dispatch = function (op, args) {\n    var self = this;\n    var deferred = defer();\n    Q.nextTick(function () {\n        self.promiseDispatch(deferred.resolve, op, args);\n    });\n    return deferred.promise;\n};\n\n/**\n * Gets the value of a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to get\n * @return promise for the property value\n */\nQ.get = function (object, key) {\n    return Q(object).dispatch(\"get\", [key]);\n};\n\nPromise.prototype.get = function (key) {\n    return this.dispatch(\"get\", [key]);\n};\n\n/**\n * Sets the value of a property in a future turn.\n * @param object    promise or immediate reference for object object\n * @param name      name of property to set\n * @param value     new value of property\n * @return promise for the return value\n */\nQ.set = function (object, key, value) {\n    return Q(object).dispatch(\"set\", [key, value]);\n};\n\nPromise.prototype.set = function (key, value) {\n    return this.dispatch(\"set\", [key, value]);\n};\n\n/**\n * Deletes a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to delete\n * @return promise for the return value\n */\nQ.del = // XXX legacy\nQ[\"delete\"] = function (object, key) {\n    return Q(object).dispatch(\"delete\", [key]);\n};\n\nPromise.prototype.del = // XXX legacy\nPromise.prototype[\"delete\"] = function (key) {\n    return this.dispatch(\"delete\", [key]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param value     a value to post, typically an array of\n *                  invocation arguments for promises that\n *                  are ultimately backed with `resolve` values,\n *                  as opposed to those backed with URLs\n *                  wherein the posted value can be any\n *                  JSON serializable object.\n * @return promise for the return value\n */\n// bound locally because it is used by other methods\nQ.mapply = // XXX As proposed by \"Redsandro\"\nQ.post = function (object, name, args) {\n    return Q(object).dispatch(\"post\", [name, args]);\n};\n\nPromise.prototype.mapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.post = function (name, args) {\n    return this.dispatch(\"post\", [name, args]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param ...args   array of invocation arguments\n * @return promise for the return value\n */\nQ.send = // XXX Mark Miller's proposed parlance\nQ.mcall = // XXX As proposed by \"Redsandro\"\nQ.invoke = function (object, name /*...args*/) {\n    return Q(object).dispatch(\"post\", [name, array_slice(arguments, 2)]);\n};\n\nPromise.prototype.send = // XXX Mark Miller's proposed parlance\nPromise.prototype.mcall = // XXX As proposed by \"Redsandro\"\nPromise.prototype.invoke = function (name /*...args*/) {\n    return this.dispatch(\"post\", [name, array_slice(arguments, 1)]);\n};\n\n/**\n * Applies the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param args      array of application arguments\n */\nQ.fapply = function (object, args) {\n    return Q(object).dispatch(\"apply\", [void 0, args]);\n};\n\nPromise.prototype.fapply = function (args) {\n    return this.dispatch(\"apply\", [void 0, args]);\n};\n\n/**\n * Calls the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ[\"try\"] =\nQ.fcall = function (object /* ...args*/) {\n    return Q(object).dispatch(\"apply\", [void 0, array_slice(arguments, 1)]);\n};\n\nPromise.prototype.fcall = function (/*...args*/) {\n    return this.dispatch(\"apply\", [void 0, array_slice(arguments)]);\n};\n\n/**\n * Binds the promised function, transforming return values into a fulfilled\n * promise and thrown errors into a rejected one.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ.fbind = function (object /*...args*/) {\n    var promise = Q(object);\n    var args = array_slice(arguments, 1);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\nPromise.prototype.fbind = function (/*...args*/) {\n    var promise = this;\n    var args = array_slice(arguments);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\n\n/**\n * Requests the names of the owned properties of a promised\n * object in a future turn.\n * @param object    promise or immediate reference for target object\n * @return promise for the keys of the eventually settled object\n */\nQ.keys = function (object) {\n    return Q(object).dispatch(\"keys\", []);\n};\n\nPromise.prototype.keys = function () {\n    return this.dispatch(\"keys\", []);\n};\n\n/**\n * Turns an array of promises into a promise for an array.  If any of\n * the promises gets rejected, the whole array is rejected immediately.\n * @param {Array*} an array (or promise for an array) of values (or\n * promises for values)\n * @returns a promise for an array of the corresponding values\n */\n// By Mark Miller\n// http://wiki.ecmascript.org/doku.php?id=strawman:concurrency&rev=1308776521#allfulfilled\nQ.all = all;\nfunction all(promises) {\n    return when(promises, function (promises) {\n        var countDown = 0;\n        var deferred = defer();\n        array_reduce(promises, function (undefined, promise, index) {\n            var snapshot;\n            if (\n                isPromise(promise) &&\n                (snapshot = promise.inspect()).state === \"fulfilled\"\n            ) {\n                promises[index] = snapshot.value;\n            } else {\n                ++countDown;\n                when(\n                    promise,\n                    function (value) {\n                        promises[index] = value;\n                        if (--countDown === 0) {\n                            deferred.resolve(promises);\n                        }\n                    },\n                    deferred.reject,\n                    function (progress) {\n                        deferred.notify({ index: index, value: progress });\n                    }\n                );\n            }\n        }, void 0);\n        if (countDown === 0) {\n            deferred.resolve(promises);\n        }\n        return deferred.promise;\n    });\n}\n\nPromise.prototype.all = function () {\n    return all(this);\n};\n\n/**\n * Waits for all promises to be settled, either fulfilled or\n * rejected.  This is distinct from `all` since that would stop\n * waiting at the first rejection.  The promise returned by\n * `allResolved` will never be rejected.\n * @param promises a promise for an array (or an array) of promises\n * (or values)\n * @return a promise for an array of promises\n */\nQ.allResolved = deprecate(allResolved, \"allResolved\", \"allSettled\");\nfunction allResolved(promises) {\n    return when(promises, function (promises) {\n        promises = array_map(promises, Q);\n        return when(all(array_map(promises, function (promise) {\n            return when(promise, noop, noop);\n        })), function () {\n            return promises;\n        });\n    });\n}\n\nPromise.prototype.allResolved = function () {\n    return allResolved(this);\n};\n\n/**\n * @see Promise#allSettled\n */\nQ.allSettled = allSettled;\nfunction allSettled(promises) {\n    return Q(promises).allSettled();\n}\n\n/**\n * Turns an array of promises into a promise for an array of their states (as\n * returned by `inspect`) when they have all settled.\n * @param {Array[Any*]} values an array (or promise for an array) of values (or\n * promises for values)\n * @returns {Array[State]} an array of states for the respective values.\n */\nPromise.prototype.allSettled = function () {\n    return this.then(function (promises) {\n        return all(array_map(promises, function (promise) {\n            promise = Q(promise);\n            function regardless() {\n                return promise.inspect();\n            }\n            return promise.then(regardless, regardless);\n        }));\n    });\n};\n\n/**\n * Captures the failure of a promise, giving an oportunity to recover\n * with a callback.  If the given promise is fulfilled, the returned\n * promise is fulfilled.\n * @param {Any*} promise for something\n * @param {Function} callback to fulfill the returned promise if the\n * given promise is rejected\n * @returns a promise for the return value of the callback\n */\nQ.fail = // XXX legacy\nQ[\"catch\"] = function (object, rejected) {\n    return Q(object).then(void 0, rejected);\n};\n\nPromise.prototype.fail = // XXX legacy\nPromise.prototype[\"catch\"] = function (rejected) {\n    return this.then(void 0, rejected);\n};\n\n/**\n * Attaches a listener that can respond to progress notifications from a\n * promise's originating deferred. This listener receives the exact arguments\n * passed to ``deferred.notify``.\n * @param {Any*} promise for something\n * @param {Function} callback to receive any progress notifications\n * @returns the given promise, unchanged\n */\nQ.progress = progress;\nfunction progress(object, progressed) {\n    return Q(object).then(void 0, void 0, progressed);\n}\n\nPromise.prototype.progress = function (progressed) {\n    return this.then(void 0, void 0, progressed);\n};\n\n/**\n * Provides an opportunity to observe the settling of a promise,\n * regardless of whether the promise is fulfilled or rejected.  Forwards\n * the resolution to the returned promise when the callback is done.\n * The callback can return a promise to defer completion.\n * @param {Any*} promise\n * @param {Function} callback to observe the resolution of the given\n * promise, takes no arguments.\n * @returns a promise for the resolution of the given promise when\n * ``fin`` is done.\n */\nQ.fin = // XXX legacy\nQ[\"finally\"] = function (object, callback) {\n    return Q(object)[\"finally\"](callback);\n};\n\nPromise.prototype.fin = // XXX legacy\nPromise.prototype[\"finally\"] = function (callback) {\n    callback = Q(callback);\n    return this.then(function (value) {\n        return callback.fcall().then(function () {\n            return value;\n        });\n    }, function (reason) {\n        // TODO attempt to recycle the rejection with \"this\".\n        return callback.fcall().then(function () {\n            throw reason;\n        });\n    });\n};\n\n/**\n * Terminates a chain of promises, forcing rejections to be\n * thrown as exceptions.\n * @param {Any*} promise at the end of a chain of promises\n * @returns nothing\n */\nQ.done = function (object, fulfilled, rejected, progress) {\n    return Q(object).done(fulfilled, rejected, progress);\n};\n\nPromise.prototype.done = function (fulfilled, rejected, progress) {\n    var onUnhandledError = function (error) {\n        // forward to a future turn so that ``when``\n        // does not catch it and turn it into a rejection.\n        Q.nextTick(function () {\n            makeStackTraceLong(error, promise);\n            if (Q.onerror) {\n                Q.onerror(error);\n            } else {\n                throw error;\n            }\n        });\n    };\n\n    // Avoid unnecessary `nextTick`ing via an unnecessary `when`.\n    var promise = fulfilled || rejected || progress ?\n        this.then(fulfilled, rejected, progress) :\n        this;\n\n    if (typeof process === \"object\" && process && process.domain) {\n        onUnhandledError = process.domain.bind(onUnhandledError);\n    }\n\n    promise.then(void 0, onUnhandledError);\n};\n\n/**\n * Causes a promise to be rejected if it does not get fulfilled before\n * some milliseconds time out.\n * @param {Any*} promise\n * @param {Number} milliseconds timeout\n * @param {Any*} custom error message or Error object (optional)\n * @returns a promise for the resolution of the given promise if it is\n * fulfilled before the timeout, otherwise rejected.\n */\nQ.timeout = function (object, ms, error) {\n    return Q(object).timeout(ms, error);\n};\n\nPromise.prototype.timeout = function (ms, error) {\n    var deferred = defer();\n    var timeoutId = setTimeout(function () {\n        if (!error || \"string\" === typeof error) {\n            error = new Error(error || \"Timed out after \" + ms + \" ms\");\n            error.code = \"ETIMEDOUT\";\n        }\n        deferred.reject(error);\n    }, ms);\n\n    this.then(function (value) {\n        clearTimeout(timeoutId);\n        deferred.resolve(value);\n    }, function (exception) {\n        clearTimeout(timeoutId);\n        deferred.reject(exception);\n    }, deferred.notify);\n\n    return deferred.promise;\n};\n\n/**\n * Returns a promise for the given value (or promised value), some\n * milliseconds after it resolved. Passes rejections immediately.\n * @param {Any*} promise\n * @param {Number} milliseconds\n * @returns a promise for the resolution of the given promise after milliseconds\n * time has elapsed since the resolution of the given promise.\n * If the given promise rejects, that is passed immediately.\n */\nQ.delay = function (object, timeout) {\n    if (timeout === void 0) {\n        timeout = object;\n        object = void 0;\n    }\n    return Q(object).delay(timeout);\n};\n\nPromise.prototype.delay = function (timeout) {\n    return this.then(function (value) {\n        var deferred = defer();\n        setTimeout(function () {\n            deferred.resolve(value);\n        }, timeout);\n        return deferred.promise;\n    });\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided as an array, and returns a promise.\n *\n *      Q.nfapply(FS.readFile, [__filename])\n *      .then(function (content) {\n *      })\n *\n */\nQ.nfapply = function (callback, args) {\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfapply = function (args) {\n    var deferred = defer();\n    var nodeArgs = array_slice(args);\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided individually, and returns a promise.\n * @example\n * Q.nfcall(FS.readFile, __filename)\n * .then(function (content) {\n * })\n *\n */\nQ.nfcall = function (callback /*...args*/) {\n    var args = array_slice(arguments, 1);\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfcall = function (/*...args*/) {\n    var nodeArgs = array_slice(arguments);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Wraps a NodeJS continuation passing function and returns an equivalent\n * version that returns a promise.\n * @example\n * Q.nfbind(FS.readFile, __filename)(\"utf-8\")\n * .then(console.log)\n * .done()\n */\nQ.nfbind =\nQ.denodeify = function (callback /*...args*/) {\n    var baseArgs = array_slice(arguments, 1);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        Q(callback).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nfbind =\nPromise.prototype.denodeify = function (/*...args*/) {\n    var args = array_slice(arguments);\n    args.unshift(this);\n    return Q.denodeify.apply(void 0, args);\n};\n\nQ.nbind = function (callback, thisp /*...args*/) {\n    var baseArgs = array_slice(arguments, 2);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        function bound() {\n            return callback.apply(thisp, arguments);\n        }\n        Q(bound).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nbind = function (/*thisp, ...args*/) {\n    var args = array_slice(arguments, 0);\n    args.unshift(this);\n    return Q.nbind.apply(void 0, args);\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback with a given array of arguments, plus a provided callback.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param {Array} args arguments to pass to the method; the callback\n * will be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nmapply = // XXX As proposed by \"Redsandro\"\nQ.npost = function (object, name, args) {\n    return Q(object).npost(name, args);\n};\n\nPromise.prototype.nmapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.npost = function (name, args) {\n    var nodeArgs = array_slice(args || []);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback, forwarding the given variadic arguments, plus a provided\n * callback argument.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param ...args arguments to pass to the method; the callback will\n * be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nsend = // XXX Based on Mark Miller's proposed \"send\"\nQ.nmcall = // XXX Based on \"Redsandro's\" proposal\nQ.ninvoke = function (object, name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 2);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    Q(object).dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\nPromise.prototype.nsend = // XXX Based on Mark Miller's proposed \"send\"\nPromise.prototype.nmcall = // XXX Based on \"Redsandro's\" proposal\nPromise.prototype.ninvoke = function (name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 1);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * If a function would like to support both Node continuation-passing-style and\n * promise-returning-style, it can end its internal promise chain with\n * `nodeify(nodeback)`, forwarding the optional nodeback argument.  If the user\n * elects to use a nodeback, the result will be sent there.  If they do not\n * pass a nodeback, they will receive the result promise.\n * @param object a result (or a promise for a result)\n * @param {Function} nodeback a Node.js-style callback\n * @returns either the promise or nothing\n */\nQ.nodeify = nodeify;\nfunction nodeify(object, nodeback) {\n    return Q(object).nodeify(nodeback);\n}\n\nPromise.prototype.nodeify = function (nodeback) {\n    if (nodeback) {\n        this.then(function (value) {\n            Q.nextTick(function () {\n                nodeback(null, value);\n            });\n        }, function (error) {\n            Q.nextTick(function () {\n                nodeback(error);\n            });\n        });\n    } else {\n        return this;\n    }\n};\n\n// All code before this point will be filtered from stack traces.\nvar qEndingLine = captureLine();\n\nreturn Q;\n\n});\n","'use strict';\n\nvar setFunctionName = require('set-function-name');\nvar $TypeError = require('es-errors/type');\n\nvar $Object = Object;\n\nmodule.exports = setFunctionName(function flags() {\n\tif (this == null || this !== $Object(this)) {\n\t\tthrow new $TypeError('RegExp.prototype.flags getter called on non-object');\n\t}\n\tvar result = '';\n\tif (this.hasIndices) {\n\t\tresult += 'd';\n\t}\n\tif (this.global) {\n\t\tresult += 'g';\n\t}\n\tif (this.ignoreCase) {\n\t\tresult += 'i';\n\t}\n\tif (this.multiline) {\n\t\tresult += 'm';\n\t}\n\tif (this.dotAll) {\n\t\tresult += 's';\n\t}\n\tif (this.unicode) {\n\t\tresult += 'u';\n\t}\n\tif (this.unicodeSets) {\n\t\tresult += 'v';\n\t}\n\tif (this.sticky) {\n\t\tresult += 'y';\n\t}\n\treturn result;\n}, 'get flags', true);\n\n","'use strict';\n\nvar define = require('define-properties');\nvar callBind = require('call-bind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar flagsBound = callBind(getPolyfill());\n\ndefine(flagsBound, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = flagsBound;\n","'use strict';\n\nvar implementation = require('./implementation');\n\nvar supportsDescriptors = require('define-properties').supportsDescriptors;\nvar $gOPD = Object.getOwnPropertyDescriptor;\n\nmodule.exports = function getPolyfill() {\n\tif (supportsDescriptors && (/a/mig).flags === 'gim') {\n\t\tvar descriptor = $gOPD(RegExp.prototype, 'flags');\n\t\tif (\n\t\t\tdescriptor\n\t\t\t&& typeof descriptor.get === 'function'\n\t\t\t&& typeof RegExp.prototype.dotAll === 'boolean'\n\t\t\t&& typeof RegExp.prototype.hasIndices === 'boolean'\n\t\t) {\n\t\t\t/* eslint getter-return: 0 */\n\t\t\tvar calls = '';\n\t\t\tvar o = {};\n\t\t\tObject.defineProperty(o, 'hasIndices', {\n\t\t\t\tget: function () {\n\t\t\t\t\tcalls += 'd';\n\t\t\t\t}\n\t\t\t});\n\t\t\tObject.defineProperty(o, 'sticky', {\n\t\t\t\tget: function () {\n\t\t\t\t\tcalls += 'y';\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (calls === 'dy') {\n\t\t\t\treturn descriptor.get;\n\t\t\t}\n\t\t}\n\t}\n\treturn implementation;\n};\n","'use strict';\n\nvar supportsDescriptors = require('define-properties').supportsDescriptors;\nvar getPolyfill = require('./polyfill');\nvar gOPD = Object.getOwnPropertyDescriptor;\nvar defineProperty = Object.defineProperty;\nvar TypeErr = TypeError;\nvar getProto = Object.getPrototypeOf;\nvar regex = /a/;\n\nmodule.exports = function shimFlags() {\n\tif (!supportsDescriptors || !getProto) {\n\t\tthrow new TypeErr('RegExp.prototype.flags requires a true ES5 environment that supports property descriptors');\n\t}\n\tvar polyfill = getPolyfill();\n\tvar proto = getProto(regex);\n\tvar descriptor = gOPD(proto, 'flags');\n\tif (!descriptor || descriptor.get !== polyfill) {\n\t\tdefineProperty(proto, 'flags', {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: false,\n\t\t\tget: polyfill\n\t\t});\n\t}\n\treturn polyfill;\n};\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n",";(function (sax) { // wrapper for non-node envs\n  sax.parser = function (strict, opt) { return new SAXParser(strict, opt) }\n  sax.SAXParser = SAXParser\n  sax.SAXStream = SAXStream\n  sax.createStream = createStream\n\n  // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n  // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n  // since that's the earliest that a buffer overrun could occur.  This way, checks are\n  // as rare as required, but as often as necessary to ensure never crossing this bound.\n  // Furthermore, buffers are only tested at most once per write(), so passing a very\n  // large string into write() might have undesirable effects, but this is manageable by\n  // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n  // edge case, result in creating at most one complete copy of the string passed in.\n  // Set to Infinity to have unlimited buffers.\n  sax.MAX_BUFFER_LENGTH = 64 * 1024\n\n  var buffers = [\n    'comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype',\n    'procInstName', 'procInstBody', 'entity', 'attribName',\n    'attribValue', 'cdata', 'script'\n  ]\n\n  sax.EVENTS = [\n    'text',\n    'processinginstruction',\n    'sgmldeclaration',\n    'doctype',\n    'comment',\n    'opentagstart',\n    'attribute',\n    'opentag',\n    'closetag',\n    'opencdata',\n    'cdata',\n    'closecdata',\n    'error',\n    'end',\n    'ready',\n    'script',\n    'opennamespace',\n    'closenamespace'\n  ]\n\n  function SAXParser (strict, opt) {\n    if (!(this instanceof SAXParser)) {\n      return new SAXParser(strict, opt)\n    }\n\n    var parser = this\n    clearBuffers(parser)\n    parser.q = parser.c = ''\n    parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH\n    parser.opt = opt || {}\n    parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags\n    parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase'\n    parser.tags = []\n    parser.closed = parser.closedRoot = parser.sawRoot = false\n    parser.tag = parser.error = null\n    parser.strict = !!strict\n    parser.noscript = !!(strict || parser.opt.noscript)\n    parser.state = S.BEGIN\n    parser.strictEntities = parser.opt.strictEntities\n    parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES)\n    parser.attribList = []\n\n    // namespaces form a prototype chain.\n    // it always points at the current tag,\n    // which protos to its parent tag.\n    if (parser.opt.xmlns) {\n      parser.ns = Object.create(rootNS)\n    }\n\n    // disallow unquoted attribute values if not otherwise configured\n    // and strict mode is true\n    if (parser.opt.unquotedAttributeValues === undefined) {\n      parser.opt.unquotedAttributeValues = !strict;\n    }\n\n    // mostly just for error reporting\n    parser.trackPosition = parser.opt.position !== false\n    if (parser.trackPosition) {\n      parser.position = parser.line = parser.column = 0\n    }\n    emit(parser, 'onready')\n  }\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function F () {}\n      F.prototype = o\n      var newf = new F()\n      return newf\n    }\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = []\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i)\n      return a\n    }\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)\n    var maxActual = 0\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      var len = parser[buffers[i]].length\n      if (len > maxAllowed) {\n        // Text/cdata nodes can get big, and since they're buffered,\n        // we can get here under normal conditions.\n        // Avoid issues by emitting the text node now,\n        // so at least it won't get any bigger.\n        switch (buffers[i]) {\n          case 'textNode':\n            closeText(parser)\n            break\n\n          case 'cdata':\n            emitNode(parser, 'oncdata', parser.cdata)\n            parser.cdata = ''\n            break\n\n          case 'script':\n            emitNode(parser, 'onscript', parser.script)\n            parser.script = ''\n            break\n\n          default:\n            error(parser, 'Max buffer length exceeded: ' + buffers[i])\n        }\n      }\n      maxActual = Math.max(maxActual, len)\n    }\n    // schedule the next check for the earliest possible buffer overrun.\n    var m = sax.MAX_BUFFER_LENGTH - maxActual\n    parser.bufferCheckPosition = m + parser.position\n  }\n\n  function clearBuffers (parser) {\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      parser[buffers[i]] = ''\n    }\n  }\n\n  function flushBuffers (parser) {\n    closeText(parser)\n    if (parser.cdata !== '') {\n      emitNode(parser, 'oncdata', parser.cdata)\n      parser.cdata = ''\n    }\n    if (parser.script !== '') {\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n  }\n\n  SAXParser.prototype = {\n    end: function () { end(this) },\n    write: write,\n    resume: function () { this.error = null; return this },\n    close: function () { return this.write(null) },\n    flush: function () { flushBuffers(this) }\n  }\n\n  var Stream\n  try {\n    Stream = require('stream').Stream\n  } catch (ex) {\n    Stream = function () {}\n  }\n  if (!Stream) Stream = function () {}\n\n  var streamWraps = sax.EVENTS.filter(function (ev) {\n    return ev !== 'error' && ev !== 'end'\n  })\n\n  function createStream (strict, opt) {\n    return new SAXStream(strict, opt)\n  }\n\n  function SAXStream (strict, opt) {\n    if (!(this instanceof SAXStream)) {\n      return new SAXStream(strict, opt)\n    }\n\n    Stream.apply(this)\n\n    this._parser = new SAXParser(strict, opt)\n    this.writable = true\n    this.readable = true\n\n    var me = this\n\n    this._parser.onend = function () {\n      me.emit('end')\n    }\n\n    this._parser.onerror = function (er) {\n      me.emit('error', er)\n\n      // if didn't throw, then means error was handled.\n      // go ahead and clear error, so we can write again.\n      me._parser.error = null\n    }\n\n    this._decoder = null\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, 'on' + ev, {\n        get: function () {\n          return me._parser['on' + ev]\n        },\n        set: function (h) {\n          if (!h) {\n            me.removeAllListeners(ev)\n            me._parser['on' + ev] = h\n            return h\n          }\n          me.on(ev, h)\n        },\n        enumerable: true,\n        configurable: false\n      })\n    })\n  }\n\n  SAXStream.prototype = Object.create(Stream.prototype, {\n    constructor: {\n      value: SAXStream\n    }\n  })\n\n  SAXStream.prototype.write = function (data) {\n    if (typeof Buffer === 'function' &&\n      typeof Buffer.isBuffer === 'function' &&\n      Buffer.isBuffer(data)) {\n      if (!this._decoder) {\n        var SD = require('string_decoder').StringDecoder\n        this._decoder = new SD('utf8')\n      }\n      data = this._decoder.write(data)\n    }\n\n    this._parser.write(data.toString())\n    this.emit('data', data)\n    return true\n  }\n\n  SAXStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) {\n      this.write(chunk)\n    }\n    this._parser.end()\n    return true\n  }\n\n  SAXStream.prototype.on = function (ev, handler) {\n    var me = this\n    if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser['on' + ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments)\n        args.splice(0, 0, ev)\n        me.emit.apply(me, args)\n      }\n    }\n\n    return Stream.prototype.on.call(me, ev, handler)\n  }\n\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n  var CDATA = '[CDATA['\n  var DOCTYPE = 'DOCTYPE'\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace'\n  var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/'\n  var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }\n\n  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n  // This implementation works on strings, a single character at a time\n  // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n  // without a significant breaking change to either this  parser, or the\n  // JavaScript language.  Implementation of an emoji-capable xml parser\n  // is left as an exercise for the reader.\n  var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n\n  var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n  var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\n\n  function isWhitespace (c) {\n    return c === ' ' || c === '\\n' || c === '\\r' || c === '\\t'\n  }\n\n  function isQuote (c) {\n    return c === '\"' || c === '\\''\n  }\n\n  function isAttribEnd (c) {\n    return c === '>' || isWhitespace(c)\n  }\n\n  function isMatch (regex, c) {\n    return regex.test(c)\n  }\n\n  function notMatch (regex, c) {\n    return !isMatch(regex, c)\n  }\n\n  var S = 0\n  sax.STATE = {\n    BEGIN: S++, // leading byte order mark or whitespace\n    BEGIN_WHITESPACE: S++, // leading whitespace\n    TEXT: S++, // general stuff\n    TEXT_ENTITY: S++, // &amp and such.\n    OPEN_WAKA: S++, // <\n    SGML_DECL: S++, // <!BLARG\n    SGML_DECL_QUOTED: S++, // <!BLARG foo \"bar\n    DOCTYPE: S++, // <!DOCTYPE\n    DOCTYPE_QUOTED: S++, // <!DOCTYPE \"//blah\n    DOCTYPE_DTD: S++, // <!DOCTYPE \"//blah\" [ ...\n    DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE \"//blah\" [ \"foo\n    COMMENT_STARTING: S++, // <!-\n    COMMENT: S++, // <!--\n    COMMENT_ENDING: S++, // <!-- blah -\n    COMMENT_ENDED: S++, // <!-- blah --\n    CDATA: S++, // <![CDATA[ something\n    CDATA_ENDING: S++, // ]\n    CDATA_ENDING_2: S++, // ]]\n    PROC_INST: S++, // <?hi\n    PROC_INST_BODY: S++, // <?hi there\n    PROC_INST_ENDING: S++, // <?hi \"there\" ?\n    OPEN_TAG: S++, // <strong\n    OPEN_TAG_SLASH: S++, // <strong /\n    ATTRIB: S++, // <a\n    ATTRIB_NAME: S++, // <a foo\n    ATTRIB_NAME_SAW_WHITE: S++, // <a foo _\n    ATTRIB_VALUE: S++, // <a foo=\n    ATTRIB_VALUE_QUOTED: S++, // <a foo=\"bar\n    ATTRIB_VALUE_CLOSED: S++, // <a foo=\"bar\"\n    ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar\n    ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar=\"&quot;\"\n    ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot\n    CLOSE_TAG: S++, // </a\n    CLOSE_TAG_SAW_WHITE: S++, // </a   >\n    SCRIPT: S++, // <script> ...\n    SCRIPT_ENDING: S++ // <script> ... <\n  }\n\n  sax.XML_ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\"\n  }\n\n  sax.ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\",\n    'AElig': 198,\n    'Aacute': 193,\n    'Acirc': 194,\n    'Agrave': 192,\n    'Aring': 197,\n    'Atilde': 195,\n    'Auml': 196,\n    'Ccedil': 199,\n    'ETH': 208,\n    'Eacute': 201,\n    'Ecirc': 202,\n    'Egrave': 200,\n    'Euml': 203,\n    'Iacute': 205,\n    'Icirc': 206,\n    'Igrave': 204,\n    'Iuml': 207,\n    'Ntilde': 209,\n    'Oacute': 211,\n    'Ocirc': 212,\n    'Ograve': 210,\n    'Oslash': 216,\n    'Otilde': 213,\n    'Ouml': 214,\n    'THORN': 222,\n    'Uacute': 218,\n    'Ucirc': 219,\n    'Ugrave': 217,\n    'Uuml': 220,\n    'Yacute': 221,\n    'aacute': 225,\n    'acirc': 226,\n    'aelig': 230,\n    'agrave': 224,\n    'aring': 229,\n    'atilde': 227,\n    'auml': 228,\n    'ccedil': 231,\n    'eacute': 233,\n    'ecirc': 234,\n    'egrave': 232,\n    'eth': 240,\n    'euml': 235,\n    'iacute': 237,\n    'icirc': 238,\n    'igrave': 236,\n    'iuml': 239,\n    'ntilde': 241,\n    'oacute': 243,\n    'ocirc': 244,\n    'ograve': 242,\n    'oslash': 248,\n    'otilde': 245,\n    'ouml': 246,\n    'szlig': 223,\n    'thorn': 254,\n    'uacute': 250,\n    'ucirc': 251,\n    'ugrave': 249,\n    'uuml': 252,\n    'yacute': 253,\n    'yuml': 255,\n    'copy': 169,\n    'reg': 174,\n    'nbsp': 160,\n    'iexcl': 161,\n    'cent': 162,\n    'pound': 163,\n    'curren': 164,\n    'yen': 165,\n    'brvbar': 166,\n    'sect': 167,\n    'uml': 168,\n    'ordf': 170,\n    'laquo': 171,\n    'not': 172,\n    'shy': 173,\n    'macr': 175,\n    'deg': 176,\n    'plusmn': 177,\n    'sup1': 185,\n    'sup2': 178,\n    'sup3': 179,\n    'acute': 180,\n    'micro': 181,\n    'para': 182,\n    'middot': 183,\n    'cedil': 184,\n    'ordm': 186,\n    'raquo': 187,\n    'frac14': 188,\n    'frac12': 189,\n    'frac34': 190,\n    'iquest': 191,\n    'times': 215,\n    'divide': 247,\n    'OElig': 338,\n    'oelig': 339,\n    'Scaron': 352,\n    'scaron': 353,\n    'Yuml': 376,\n    'fnof': 402,\n    'circ': 710,\n    'tilde': 732,\n    'Alpha': 913,\n    'Beta': 914,\n    'Gamma': 915,\n    'Delta': 916,\n    'Epsilon': 917,\n    'Zeta': 918,\n    'Eta': 919,\n    'Theta': 920,\n    'Iota': 921,\n    'Kappa': 922,\n    'Lambda': 923,\n    'Mu': 924,\n    'Nu': 925,\n    'Xi': 926,\n    'Omicron': 927,\n    'Pi': 928,\n    'Rho': 929,\n    'Sigma': 931,\n    'Tau': 932,\n    'Upsilon': 933,\n    'Phi': 934,\n    'Chi': 935,\n    'Psi': 936,\n    'Omega': 937,\n    'alpha': 945,\n    'beta': 946,\n    'gamma': 947,\n    'delta': 948,\n    'epsilon': 949,\n    'zeta': 950,\n    'eta': 951,\n    'theta': 952,\n    'iota': 953,\n    'kappa': 954,\n    'lambda': 955,\n    'mu': 956,\n    'nu': 957,\n    'xi': 958,\n    'omicron': 959,\n    'pi': 960,\n    'rho': 961,\n    'sigmaf': 962,\n    'sigma': 963,\n    'tau': 964,\n    'upsilon': 965,\n    'phi': 966,\n    'chi': 967,\n    'psi': 968,\n    'omega': 969,\n    'thetasym': 977,\n    'upsih': 978,\n    'piv': 982,\n    'ensp': 8194,\n    'emsp': 8195,\n    'thinsp': 8201,\n    'zwnj': 8204,\n    'zwj': 8205,\n    'lrm': 8206,\n    'rlm': 8207,\n    'ndash': 8211,\n    'mdash': 8212,\n    'lsquo': 8216,\n    'rsquo': 8217,\n    'sbquo': 8218,\n    'ldquo': 8220,\n    'rdquo': 8221,\n    'bdquo': 8222,\n    'dagger': 8224,\n    'Dagger': 8225,\n    'bull': 8226,\n    'hellip': 8230,\n    'permil': 8240,\n    'prime': 8242,\n    'Prime': 8243,\n    'lsaquo': 8249,\n    'rsaquo': 8250,\n    'oline': 8254,\n    'frasl': 8260,\n    'euro': 8364,\n    'image': 8465,\n    'weierp': 8472,\n    'real': 8476,\n    'trade': 8482,\n    'alefsym': 8501,\n    'larr': 8592,\n    'uarr': 8593,\n    'rarr': 8594,\n    'darr': 8595,\n    'harr': 8596,\n    'crarr': 8629,\n    'lArr': 8656,\n    'uArr': 8657,\n    'rArr': 8658,\n    'dArr': 8659,\n    'hArr': 8660,\n    'forall': 8704,\n    'part': 8706,\n    'exist': 8707,\n    'empty': 8709,\n    'nabla': 8711,\n    'isin': 8712,\n    'notin': 8713,\n    'ni': 8715,\n    'prod': 8719,\n    'sum': 8721,\n    'minus': 8722,\n    'lowast': 8727,\n    'radic': 8730,\n    'prop': 8733,\n    'infin': 8734,\n    'ang': 8736,\n    'and': 8743,\n    'or': 8744,\n    'cap': 8745,\n    'cup': 8746,\n    'int': 8747,\n    'there4': 8756,\n    'sim': 8764,\n    'cong': 8773,\n    'asymp': 8776,\n    'ne': 8800,\n    'equiv': 8801,\n    'le': 8804,\n    'ge': 8805,\n    'sub': 8834,\n    'sup': 8835,\n    'nsub': 8836,\n    'sube': 8838,\n    'supe': 8839,\n    'oplus': 8853,\n    'otimes': 8855,\n    'perp': 8869,\n    'sdot': 8901,\n    'lceil': 8968,\n    'rceil': 8969,\n    'lfloor': 8970,\n    'rfloor': 8971,\n    'lang': 9001,\n    'rang': 9002,\n    'loz': 9674,\n    'spades': 9824,\n    'clubs': 9827,\n    'hearts': 9829,\n    'diams': 9830\n  }\n\n  Object.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key]\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e\n    sax.ENTITIES[key] = s\n  })\n\n  for (var s in sax.STATE) {\n    sax.STATE[sax.STATE[s]] = s\n  }\n\n  // shorthand\n  S = sax.STATE\n\n  function emit (parser, event, data) {\n    parser[event] && parser[event](data)\n  }\n\n  function emitNode (parser, nodeType, data) {\n    if (parser.textNode) closeText(parser)\n    emit(parser, nodeType, data)\n  }\n\n  function closeText (parser) {\n    parser.textNode = textopts(parser.opt, parser.textNode)\n    if (parser.textNode) emit(parser, 'ontext', parser.textNode)\n    parser.textNode = ''\n  }\n\n  function textopts (opt, text) {\n    if (opt.trim) text = text.trim()\n    if (opt.normalize) text = text.replace(/\\s+/g, ' ')\n    return text\n  }\n\n  function error (parser, er) {\n    closeText(parser)\n    if (parser.trackPosition) {\n      er += '\\nLine: ' + parser.line +\n        '\\nColumn: ' + parser.column +\n        '\\nChar: ' + parser.c\n    }\n    er = new Error(er)\n    parser.error = er\n    emit(parser, 'onerror', er)\n    return parser\n  }\n\n  function end (parser) {\n    if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag')\n    if ((parser.state !== S.BEGIN) &&\n      (parser.state !== S.BEGIN_WHITESPACE) &&\n      (parser.state !== S.TEXT)) {\n      error(parser, 'Unexpected end')\n    }\n    closeText(parser)\n    parser.c = ''\n    parser.closed = true\n    emit(parser, 'onend')\n    SAXParser.call(parser, parser.strict, parser.opt)\n    return parser\n  }\n\n  function strictFail (parser, message) {\n    if (typeof parser !== 'object' || !(parser instanceof SAXParser)) {\n      throw new Error('bad call to strictFail')\n    }\n    if (parser.strict) {\n      error(parser, message)\n    }\n  }\n\n  function newTag (parser) {\n    if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    var tag = parser.tag = { name: parser.tagName, attributes: {} }\n\n    // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n    if (parser.opt.xmlns) {\n      tag.ns = parent.ns\n    }\n    parser.attribList.length = 0\n    emitNode(parser, 'onopentagstart', tag)\n  }\n\n  function qname (name, attribute) {\n    var i = name.indexOf(':')\n    var qualName = i < 0 ? [ '', name ] : name.split(':')\n    var prefix = qualName[0]\n    var local = qualName[1]\n\n    // <x \"xmlns\"=\"http://foo\">\n    if (attribute && name === 'xmlns') {\n      prefix = 'xmlns'\n      local = ''\n    }\n\n    return { prefix: prefix, local: local }\n  }\n\n  function attrib (parser) {\n    if (!parser.strict) {\n      parser.attribName = parser.attribName[parser.looseCase]()\n    }\n\n    if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n      parser.attribName = parser.attribValue = ''\n      return\n    }\n\n    if (parser.opt.xmlns) {\n      var qn = qname(parser.attribName, true)\n      var prefix = qn.prefix\n      var local = qn.local\n\n      if (prefix === 'xmlns') {\n        // namespace binding attribute. push the binding into scope\n        if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {\n          strictFail(parser,\n            'xml: prefix must be bound to ' + XML_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {\n          strictFail(parser,\n            'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else {\n          var tag = parser.tag\n          var parent = parser.tags[parser.tags.length - 1] || parser\n          if (tag.ns === parent.ns) {\n            tag.ns = Object.create(parent.ns)\n          }\n          tag.ns[local] = parser.attribValue\n        }\n      }\n\n      // defer onattribute events until all attributes have been seen\n      // so any new bindings can take effect. preserve attribute order\n      // so deferred events can be emitted in document order\n      parser.attribList.push([parser.attribName, parser.attribValue])\n    } else {\n      // in non-xmlns mode, we can emit the event right away\n      parser.tag.attributes[parser.attribName] = parser.attribValue\n      emitNode(parser, 'onattribute', {\n        name: parser.attribName,\n        value: parser.attribValue\n      })\n    }\n\n    parser.attribName = parser.attribValue = ''\n  }\n\n  function openTag (parser, selfClosing) {\n    if (parser.opt.xmlns) {\n      // emit namespace binding events\n      var tag = parser.tag\n\n      // add namespace info to tag\n      var qn = qname(parser.tagName)\n      tag.prefix = qn.prefix\n      tag.local = qn.local\n      tag.uri = tag.ns[qn.prefix] || ''\n\n      if (tag.prefix && !tag.uri) {\n        strictFail(parser, 'Unbound namespace prefix: ' +\n          JSON.stringify(parser.tagName))\n        tag.uri = qn.prefix\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (tag.ns && parent.ns !== tag.ns) {\n        Object.keys(tag.ns).forEach(function (p) {\n          emitNode(parser, 'onopennamespace', {\n            prefix: p,\n            uri: tag.ns[p]\n          })\n        })\n      }\n\n      // handle deferred onattribute events\n      // Note: do not apply default ns to attributes:\n      //   http://www.w3.org/TR/REC-xml-names/#defaulting\n      for (var i = 0, l = parser.attribList.length; i < l; i++) {\n        var nv = parser.attribList[i]\n        var name = nv[0]\n        var value = nv[1]\n        var qualName = qname(name, true)\n        var prefix = qualName.prefix\n        var local = qualName.local\n        var uri = prefix === '' ? '' : (tag.ns[prefix] || '')\n        var a = {\n          name: name,\n          value: value,\n          prefix: prefix,\n          local: local,\n          uri: uri\n        }\n\n        // if there's any attributes with an undefined namespace,\n        // then fail on them now.\n        if (prefix && prefix !== 'xmlns' && !uri) {\n          strictFail(parser, 'Unbound namespace prefix: ' +\n            JSON.stringify(prefix))\n          a.uri = prefix\n        }\n        parser.tag.attributes[name] = a\n        emitNode(parser, 'onattribute', a)\n      }\n      parser.attribList.length = 0\n    }\n\n    parser.tag.isSelfClosing = !!selfClosing\n\n    // process the tag\n    parser.sawRoot = true\n    parser.tags.push(parser.tag)\n    emitNode(parser, 'onopentag', parser.tag)\n    if (!selfClosing) {\n      // special case for <script> in non-strict mode.\n      if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {\n        parser.state = S.SCRIPT\n      } else {\n        parser.state = S.TEXT\n      }\n      parser.tag = null\n      parser.tagName = ''\n    }\n    parser.attribName = parser.attribValue = ''\n    parser.attribList.length = 0\n  }\n\n  function closeTag (parser) {\n    if (!parser.tagName) {\n      strictFail(parser, 'Weird empty close tag.')\n      parser.textNode += '</>'\n      parser.state = S.TEXT\n      return\n    }\n\n    if (parser.script) {\n      if (parser.tagName !== 'script') {\n        parser.script += '</' + parser.tagName + '>'\n        parser.tagName = ''\n        parser.state = S.SCRIPT\n        return\n      }\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n\n    // first make sure that the closing tag actually exists.\n    // <a><b></c></b></a> will close everything, otherwise.\n    var t = parser.tags.length\n    var tagName = parser.tagName\n    if (!parser.strict) {\n      tagName = tagName[parser.looseCase]()\n    }\n    var closeTo = tagName\n    while (t--) {\n      var close = parser.tags[t]\n      if (close.name !== closeTo) {\n        // fail the first time in strict mode\n        strictFail(parser, 'Unexpected close tag')\n      } else {\n        break\n      }\n    }\n\n    // didn't find it.  we already failed for strict, so just abort.\n    if (t < 0) {\n      strictFail(parser, 'Unmatched closing tag: ' + parser.tagName)\n      parser.textNode += '</' + parser.tagName + '>'\n      parser.state = S.TEXT\n      return\n    }\n    parser.tagName = tagName\n    var s = parser.tags.length\n    while (s-- > t) {\n      var tag = parser.tag = parser.tags.pop()\n      parser.tagName = parser.tag.name\n      emitNode(parser, 'onclosetag', parser.tagName)\n\n      var x = {}\n      for (var i in tag.ns) {\n        x[i] = tag.ns[i]\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (parser.opt.xmlns && tag.ns !== parent.ns) {\n        // remove namespace bindings introduced by tag\n        Object.keys(tag.ns).forEach(function (p) {\n          var n = tag.ns[p]\n          emitNode(parser, 'onclosenamespace', { prefix: p, uri: n })\n        })\n      }\n    }\n    if (t === 0) parser.closedRoot = true\n    parser.tagName = parser.attribValue = parser.attribName = ''\n    parser.attribList.length = 0\n    parser.state = S.TEXT\n  }\n\n  function parseEntity (parser) {\n    var entity = parser.entity\n    var entityLC = entity.toLowerCase()\n    var num\n    var numStr = ''\n\n    if (parser.ENTITIES[entity]) {\n      return parser.ENTITIES[entity]\n    }\n    if (parser.ENTITIES[entityLC]) {\n      return parser.ENTITIES[entityLC]\n    }\n    entity = entityLC\n    if (entity.charAt(0) === '#') {\n      if (entity.charAt(1) === 'x') {\n        entity = entity.slice(2)\n        num = parseInt(entity, 16)\n        numStr = num.toString(16)\n      } else {\n        entity = entity.slice(1)\n        num = parseInt(entity, 10)\n        numStr = num.toString(10)\n      }\n    }\n    entity = entity.replace(/^0+/, '')\n    if (isNaN(num) || numStr.toLowerCase() !== entity) {\n      strictFail(parser, 'Invalid character entity')\n      return '&' + parser.entity + ';'\n    }\n\n    return String.fromCodePoint(num)\n  }\n\n  function beginWhiteSpace (parser, c) {\n    if (c === '<') {\n      parser.state = S.OPEN_WAKA\n      parser.startTagPosition = parser.position\n    } else if (!isWhitespace(c)) {\n      // have to process this as a text node.\n      // weird, but happens.\n      strictFail(parser, 'Non-whitespace before first tag.')\n      parser.textNode = c\n      parser.state = S.TEXT\n    }\n  }\n\n  function charAt (chunk, i) {\n    var result = ''\n    if (i < chunk.length) {\n      result = chunk.charAt(i)\n    }\n    return result\n  }\n\n  function write (chunk) {\n    var parser = this\n    if (this.error) {\n      throw this.error\n    }\n    if (parser.closed) {\n      return error(parser,\n        'Cannot write after close. Assign an onready handler.')\n    }\n    if (chunk === null) {\n      return end(parser)\n    }\n    if (typeof chunk === 'object') {\n      chunk = chunk.toString()\n    }\n    var i = 0\n    var c = ''\n    while (true) {\n      c = charAt(chunk, i++)\n      parser.c = c\n\n      if (!c) {\n        break\n      }\n\n      if (parser.trackPosition) {\n        parser.position++\n        if (c === '\\n') {\n          parser.line++\n          parser.column = 0\n        } else {\n          parser.column++\n        }\n      }\n\n      switch (parser.state) {\n        case S.BEGIN:\n          parser.state = S.BEGIN_WHITESPACE\n          if (c === '\\uFEFF') {\n            continue\n          }\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.BEGIN_WHITESPACE:\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.TEXT:\n          if (parser.sawRoot && !parser.closedRoot) {\n            var starti = i - 1\n            while (c && c !== '<' && c !== '&') {\n              c = charAt(chunk, i++)\n              if (c && parser.trackPosition) {\n                parser.position++\n                if (c === '\\n') {\n                  parser.line++\n                  parser.column = 0\n                } else {\n                  parser.column++\n                }\n              }\n            }\n            parser.textNode += chunk.substring(starti, i - 1)\n          }\n          if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n            parser.state = S.OPEN_WAKA\n            parser.startTagPosition = parser.position\n          } else {\n            if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\n              strictFail(parser, 'Text data outside of root node.')\n            }\n            if (c === '&') {\n              parser.state = S.TEXT_ENTITY\n            } else {\n              parser.textNode += c\n            }\n          }\n          continue\n\n        case S.SCRIPT:\n          // only non-strict\n          if (c === '<') {\n            parser.state = S.SCRIPT_ENDING\n          } else {\n            parser.script += c\n          }\n          continue\n\n        case S.SCRIPT_ENDING:\n          if (c === '/') {\n            parser.state = S.CLOSE_TAG\n          } else {\n            parser.script += '<' + c\n            parser.state = S.SCRIPT\n          }\n          continue\n\n        case S.OPEN_WAKA:\n          // either a /, ?, !, or text is coming next.\n          if (c === '!') {\n            parser.state = S.SGML_DECL\n            parser.sgmlDecl = ''\n          } else if (isWhitespace(c)) {\n            // wait for it...\n          } else if (isMatch(nameStart, c)) {\n            parser.state = S.OPEN_TAG\n            parser.tagName = c\n          } else if (c === '/') {\n            parser.state = S.CLOSE_TAG\n            parser.tagName = ''\n          } else if (c === '?') {\n            parser.state = S.PROC_INST\n            parser.procInstName = parser.procInstBody = ''\n          } else {\n            strictFail(parser, 'Unencoded <')\n            // if there was some whitespace, then add that in.\n            if (parser.startTagPosition + 1 < parser.position) {\n              var pad = parser.position - parser.startTagPosition\n              c = new Array(pad).join(' ') + c\n            }\n            parser.textNode += '<' + c\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.SGML_DECL:\n          if (parser.sgmlDecl + c === '--') {\n            parser.state = S.COMMENT\n            parser.comment = ''\n            parser.sgmlDecl = ''\n            continue;\n          }\n\n          if (parser.doctype && parser.doctype !== true && parser.sgmlDecl) {\n            parser.state = S.DOCTYPE_DTD\n            parser.doctype += '<!' + parser.sgmlDecl + c\n            parser.sgmlDecl = ''\n          } else if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n            emitNode(parser, 'onopencdata')\n            parser.state = S.CDATA\n            parser.sgmlDecl = ''\n            parser.cdata = ''\n          } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n            parser.state = S.DOCTYPE\n            if (parser.doctype || parser.sawRoot) {\n              strictFail(parser,\n                'Inappropriately located doctype declaration')\n            }\n            parser.doctype = ''\n            parser.sgmlDecl = ''\n          } else if (c === '>') {\n            emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl)\n            parser.sgmlDecl = ''\n            parser.state = S.TEXT\n          } else if (isQuote(c)) {\n            parser.state = S.SGML_DECL_QUOTED\n            parser.sgmlDecl += c\n          } else {\n            parser.sgmlDecl += c\n          }\n          continue\n\n        case S.SGML_DECL_QUOTED:\n          if (c === parser.q) {\n            parser.state = S.SGML_DECL\n            parser.q = ''\n          }\n          parser.sgmlDecl += c\n          continue\n\n        case S.DOCTYPE:\n          if (c === '>') {\n            parser.state = S.TEXT\n            emitNode(parser, 'ondoctype', parser.doctype)\n            parser.doctype = true // just remember that we saw it.\n          } else {\n            parser.doctype += c\n            if (c === '[') {\n              parser.state = S.DOCTYPE_DTD\n            } else if (isQuote(c)) {\n              parser.state = S.DOCTYPE_QUOTED\n              parser.q = c\n            }\n          }\n          continue\n\n        case S.DOCTYPE_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.q = ''\n            parser.state = S.DOCTYPE\n          }\n          continue\n\n        case S.DOCTYPE_DTD:\n          if (c === ']') {\n            parser.doctype += c\n            parser.state = S.DOCTYPE\n          } else if (c === '<') {\n            parser.state = S.OPEN_WAKA\n            parser.startTagPosition = parser.position\n          } else if (isQuote(c)) {\n            parser.doctype += c\n            parser.state = S.DOCTYPE_DTD_QUOTED\n            parser.q = c\n          } else {\n            parser.doctype += c\n          }\n          continue\n\n        case S.DOCTYPE_DTD_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.state = S.DOCTYPE_DTD\n            parser.q = ''\n          }\n          continue\n\n        case S.COMMENT:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDING\n          } else {\n            parser.comment += c\n          }\n          continue\n\n        case S.COMMENT_ENDING:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDED\n            parser.comment = textopts(parser.opt, parser.comment)\n            if (parser.comment) {\n              emitNode(parser, 'oncomment', parser.comment)\n            }\n            parser.comment = ''\n          } else {\n            parser.comment += '-' + c\n            parser.state = S.COMMENT\n          }\n          continue\n\n        case S.COMMENT_ENDED:\n          if (c !== '>') {\n            strictFail(parser, 'Malformed comment')\n            // allow <!-- blah -- bloo --> in non-strict mode,\n            // which is a comment of \" blah -- bloo \"\n            parser.comment += '--' + c\n            parser.state = S.COMMENT\n          } else if (parser.doctype && parser.doctype !== true) {\n            parser.state = S.DOCTYPE_DTD\n          } else {\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.CDATA:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING\n          } else {\n            parser.cdata += c\n          }\n          continue\n\n        case S.CDATA_ENDING:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING_2\n          } else {\n            parser.cdata += ']' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.CDATA_ENDING_2:\n          if (c === '>') {\n            if (parser.cdata) {\n              emitNode(parser, 'oncdata', parser.cdata)\n            }\n            emitNode(parser, 'onclosecdata')\n            parser.cdata = ''\n            parser.state = S.TEXT\n          } else if (c === ']') {\n            parser.cdata += ']'\n          } else {\n            parser.cdata += ']]' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.PROC_INST:\n          if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else if (isWhitespace(c)) {\n            parser.state = S.PROC_INST_BODY\n          } else {\n            parser.procInstName += c\n          }\n          continue\n\n        case S.PROC_INST_BODY:\n          if (!parser.procInstBody && isWhitespace(c)) {\n            continue\n          } else if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else {\n            parser.procInstBody += c\n          }\n          continue\n\n        case S.PROC_INST_ENDING:\n          if (c === '>') {\n            emitNode(parser, 'onprocessinginstruction', {\n              name: parser.procInstName,\n              body: parser.procInstBody\n            })\n            parser.procInstName = parser.procInstBody = ''\n            parser.state = S.TEXT\n          } else {\n            parser.procInstBody += '?' + c\n            parser.state = S.PROC_INST_BODY\n          }\n          continue\n\n        case S.OPEN_TAG:\n          if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else {\n            newTag(parser)\n            if (c === '>') {\n              openTag(parser)\n            } else if (c === '/') {\n              parser.state = S.OPEN_TAG_SLASH\n            } else {\n              if (!isWhitespace(c)) {\n                strictFail(parser, 'Invalid character in tag name')\n              }\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.OPEN_TAG_SLASH:\n          if (c === '>') {\n            openTag(parser, true)\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Forward-slash in opening tag not followed by >')\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.ATTRIB:\n          // haven't read the attribute name yet.\n          if (isWhitespace(c)) {\n            continue\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (c === '>') {\n            strictFail(parser, 'Attribute without value')\n            parser.attribValue = parser.attribName\n            attrib(parser)\n            openTag(parser)\n          } else if (isWhitespace(c)) {\n            parser.state = S.ATTRIB_NAME_SAW_WHITE\n          } else if (isMatch(nameBody, c)) {\n            parser.attribName += c\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME_SAW_WHITE:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (isWhitespace(c)) {\n            continue\n          } else {\n            strictFail(parser, 'Attribute without value')\n            parser.tag.attributes[parser.attribName] = ''\n            parser.attribValue = ''\n            emitNode(parser, 'onattribute', {\n              name: parser.attribName,\n              value: ''\n            })\n            parser.attribName = ''\n            if (c === '>') {\n              openTag(parser)\n            } else if (isMatch(nameStart, c)) {\n              parser.attribName = c\n              parser.state = S.ATTRIB_NAME\n            } else {\n              strictFail(parser, 'Invalid attribute name')\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.ATTRIB_VALUE:\n          if (isWhitespace(c)) {\n            continue\n          } else if (isQuote(c)) {\n            parser.q = c\n            parser.state = S.ATTRIB_VALUE_QUOTED\n          } else {\n            if (!parser.opt.unquotedAttributeValues) {\n              error(parser, 'Unquoted attribute value')\n            }\n            parser.state = S.ATTRIB_VALUE_UNQUOTED\n            parser.attribValue = c\n          }\n          continue\n\n        case S.ATTRIB_VALUE_QUOTED:\n          if (c !== parser.q) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_Q\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          parser.q = ''\n          parser.state = S.ATTRIB_VALUE_CLOSED\n          continue\n\n        case S.ATTRIB_VALUE_CLOSED:\n          if (isWhitespace(c)) {\n            parser.state = S.ATTRIB\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (isMatch(nameStart, c)) {\n            strictFail(parser, 'No whitespace between attributes')\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_VALUE_UNQUOTED:\n          if (!isAttribEnd(c)) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_U\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          if (c === '>') {\n            openTag(parser)\n          } else {\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.CLOSE_TAG:\n          if (!parser.tagName) {\n            if (isWhitespace(c)) {\n              continue\n            } else if (notMatch(nameStart, c)) {\n              if (parser.script) {\n                parser.script += '</' + c\n                parser.state = S.SCRIPT\n              } else {\n                strictFail(parser, 'Invalid tagname in closing tag.')\n              }\n            } else {\n              parser.tagName = c\n            }\n          } else if (c === '>') {\n            closeTag(parser)\n          } else if (isMatch(nameBody, c)) {\n            parser.tagName += c\n          } else if (parser.script) {\n            parser.script += '</' + parser.tagName\n            parser.tagName = ''\n            parser.state = S.SCRIPT\n          } else {\n            if (!isWhitespace(c)) {\n              strictFail(parser, 'Invalid tagname in closing tag')\n            }\n            parser.state = S.CLOSE_TAG_SAW_WHITE\n          }\n          continue\n\n        case S.CLOSE_TAG_SAW_WHITE:\n          if (isWhitespace(c)) {\n            continue\n          }\n          if (c === '>') {\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Invalid characters in closing tag')\n          }\n          continue\n\n        case S.TEXT_ENTITY:\n        case S.ATTRIB_VALUE_ENTITY_Q:\n        case S.ATTRIB_VALUE_ENTITY_U:\n          var returnState\n          var buffer\n          switch (parser.state) {\n            case S.TEXT_ENTITY:\n              returnState = S.TEXT\n              buffer = 'textNode'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_Q:\n              returnState = S.ATTRIB_VALUE_QUOTED\n              buffer = 'attribValue'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_U:\n              returnState = S.ATTRIB_VALUE_UNQUOTED\n              buffer = 'attribValue'\n              break\n          }\n\n          if (c === ';') {\n            var parsedEntity = parseEntity(parser)\n            if (parser.opt.unparsedEntities && !Object.values(sax.XML_ENTITIES).includes(parsedEntity)) {\n              parser.entity = ''\n              parser.state = returnState\n              parser.write(parsedEntity)\n            } else {\n              parser[buffer] += parsedEntity\n              parser.entity = ''\n              parser.state = returnState\n            }\n          } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n            parser.entity += c\n          } else {\n            strictFail(parser, 'Invalid character in entity name')\n            parser[buffer] += '&' + parser.entity + c\n            parser.entity = ''\n            parser.state = returnState\n          }\n\n          continue\n\n        default: /* istanbul ignore next */ {\n          throw new Error(parser, 'Unknown state: ' + parser.state)\n        }\n      }\n    } // while\n\n    if (parser.position >= parser.bufferCheckPosition) {\n      checkBufferLength(parser)\n    }\n    return parser\n  }\n\n  /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n  /* istanbul ignore next */\n  if (!String.fromCodePoint) {\n    (function () {\n      var stringFromCharCode = String.fromCharCode\n      var floor = Math.floor\n      var fromCodePoint = function () {\n        var MAX_SIZE = 0x4000\n        var codeUnits = []\n        var highSurrogate\n        var lowSurrogate\n        var index = -1\n        var length = arguments.length\n        if (!length) {\n          return ''\n        }\n        var result = ''\n        while (++index < length) {\n          var codePoint = Number(arguments[index])\n          if (\n            !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n            codePoint < 0 || // not a valid Unicode code point\n            codePoint > 0x10FFFF || // not a valid Unicode code point\n            floor(codePoint) !== codePoint // not an integer\n          ) {\n            throw RangeError('Invalid code point: ' + codePoint)\n          }\n          if (codePoint <= 0xFFFF) { // BMP code point\n            codeUnits.push(codePoint)\n          } else { // Astral code point; split in surrogate halves\n            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n            codePoint -= 0x10000\n            highSurrogate = (codePoint >> 10) + 0xD800\n            lowSurrogate = (codePoint % 0x400) + 0xDC00\n            codeUnits.push(highSurrogate, lowSurrogate)\n          }\n          if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n            result += stringFromCharCode.apply(null, codeUnits)\n            codeUnits.length = 0\n          }\n        }\n        return result\n      }\n      /* istanbul ignore next */\n      if (Object.defineProperty) {\n        Object.defineProperty(String, 'fromCodePoint', {\n          value: fromCodePoint,\n          configurable: true,\n          writable: true\n        })\n      } else {\n        String.fromCodePoint = fromCodePoint\n      }\n    }())\n  }\n})(typeof exports === 'undefined' ? this.sax = {} : exports)\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar define = require('define-data-property');\nvar hasDescriptors = require('has-property-descriptors')();\nvar gOPD = require('gopd');\n\nvar $TypeError = require('es-errors/type');\nvar $floor = GetIntrinsic('%Math.floor%');\n\n/** @type {import('.')} */\nmodule.exports = function setFunctionLength(fn, length) {\n\tif (typeof fn !== 'function') {\n\t\tthrow new $TypeError('`fn` is not a function');\n\t}\n\tif (typeof length !== 'number' || length < 0 || length > 0xFFFFFFFF || $floor(length) !== length) {\n\t\tthrow new $TypeError('`length` must be a positive 32-bit integer');\n\t}\n\n\tvar loose = arguments.length > 2 && !!arguments[2];\n\n\tvar functionLengthIsConfigurable = true;\n\tvar functionLengthIsWritable = true;\n\tif ('length' in fn && gOPD) {\n\t\tvar desc = gOPD(fn, 'length');\n\t\tif (desc && !desc.configurable) {\n\t\t\tfunctionLengthIsConfigurable = false;\n\t\t}\n\t\tif (desc && !desc.writable) {\n\t\t\tfunctionLengthIsWritable = false;\n\t\t}\n\t}\n\n\tif (functionLengthIsConfigurable || functionLengthIsWritable || !loose) {\n\t\tif (hasDescriptors) {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length, true, true);\n\t\t} else {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length);\n\t\t}\n\t}\n\treturn fn;\n};\n","'use strict';\n\nvar define = require('define-data-property');\nvar hasDescriptors = require('has-property-descriptors')();\nvar functionsHaveConfigurableNames = require('functions-have-names').functionsHaveConfigurableNames();\n\nvar $TypeError = require('es-errors/type');\n\n/** @type {import('.')} */\nmodule.exports = function setFunctionName(fn, name) {\n\tif (typeof fn !== 'function') {\n\t\tthrow new $TypeError('`fn` is not a function');\n\t}\n\tvar loose = arguments.length > 2 && !!arguments[2];\n\tif (!loose || functionsHaveConfigurableNames) {\n\t\tif (hasDescriptors) {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'name', name, true, true);\n\t\t} else {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'name', name);\n\t\t}\n\t}\n\treturn fn;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar callBound = require('call-bind/callBound');\nvar inspect = require('object-inspect');\n\nvar $TypeError = require('es-errors/type');\nvar $WeakMap = GetIntrinsic('%WeakMap%', true);\nvar $Map = GetIntrinsic('%Map%', true);\n\nvar $weakMapGet = callBound('WeakMap.prototype.get', true);\nvar $weakMapSet = callBound('WeakMap.prototype.set', true);\nvar $weakMapHas = callBound('WeakMap.prototype.has', true);\nvar $mapGet = callBound('Map.prototype.get', true);\nvar $mapSet = callBound('Map.prototype.set', true);\nvar $mapHas = callBound('Map.prototype.has', true);\n\n/*\n* This function traverses the list returning the node corresponding to the given key.\n*\n* That node is also moved to the head of the list, so that if it's accessed again we don't need to traverse the whole list. By doing so, all the recently used nodes can be accessed relatively quickly.\n*/\n/** @type {import('.').listGetNode} */\nvar listGetNode = function (list, key) { // eslint-disable-line consistent-return\n\t/** @type {typeof list | NonNullable<(typeof list)['next']>} */\n\tvar prev = list;\n\t/** @type {(typeof list)['next']} */\n\tvar curr;\n\tfor (; (curr = prev.next) !== null; prev = curr) {\n\t\tif (curr.key === key) {\n\t\t\tprev.next = curr.next;\n\t\t\t// eslint-disable-next-line no-extra-parens\n\t\t\tcurr.next = /** @type {NonNullable<typeof list.next>} */ (list.next);\n\t\t\tlist.next = curr; // eslint-disable-line no-param-reassign\n\t\t\treturn curr;\n\t\t}\n\t}\n};\n\n/** @type {import('.').listGet} */\nvar listGet = function (objects, key) {\n\tvar node = listGetNode(objects, key);\n\treturn node && node.value;\n};\n/** @type {import('.').listSet} */\nvar listSet = function (objects, key, value) {\n\tvar node = listGetNode(objects, key);\n\tif (node) {\n\t\tnode.value = value;\n\t} else {\n\t\t// Prepend the new node to the beginning of the list\n\t\tobjects.next = /** @type {import('.').ListNode<typeof value>} */ ({ // eslint-disable-line no-param-reassign, no-extra-parens\n\t\t\tkey: key,\n\t\t\tnext: objects.next,\n\t\t\tvalue: value\n\t\t});\n\t}\n};\n/** @type {import('.').listHas} */\nvar listHas = function (objects, key) {\n\treturn !!listGetNode(objects, key);\n};\n\n/** @type {import('.')} */\nmodule.exports = function getSideChannel() {\n\t/** @type {WeakMap<object, unknown>} */ var $wm;\n\t/** @type {Map<object, unknown>} */ var $m;\n\t/** @type {import('.').RootNode<unknown>} */ var $o;\n\n\t/** @type {import('.').Channel} */\n\tvar channel = {\n\t\tassert: function (key) {\n\t\t\tif (!channel.has(key)) {\n\t\t\t\tthrow new $TypeError('Side channel does not contain ' + inspect(key));\n\t\t\t}\n\t\t},\n\t\tget: function (key) { // eslint-disable-line consistent-return\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapGet($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapGet($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listGet($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thas: function (key) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapHas($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapHas($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listHas($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tset: function (key, value) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif (!$wm) {\n\t\t\t\t\t$wm = new $WeakMap();\n\t\t\t\t}\n\t\t\t\t$weakMapSet($wm, key, value);\n\t\t\t} else if ($Map) {\n\t\t\t\tif (!$m) {\n\t\t\t\t\t$m = new $Map();\n\t\t\t\t}\n\t\t\t\t$mapSet($m, key, value);\n\t\t\t} else {\n\t\t\t\tif (!$o) {\n\t\t\t\t\t// Initialize the linked list as an empty node, so that we don't have to special-case handling of the first node: we can always refer to it as (previous node).next, instead of something like (list).head\n\t\t\t\t\t$o = { key: {}, next: null };\n\t\t\t\t}\n\t\t\t\tlistSet($o, key, value);\n\t\t\t}\n\t\t}\n\t};\n\treturn channel;\n};\n","require('./').install();\n","var SourceMapConsumer = require('source-map').SourceMapConsumer;\nvar path = require('path');\n\nvar fs;\ntry {\n  fs = require('fs');\n  if (!fs.existsSync || !fs.readFileSync) {\n    // fs doesn't have all methods we need\n    fs = null;\n  }\n} catch (err) {\n  /* nop */\n}\n\nvar bufferFrom = require('buffer-from');\n\n/**\n * Requires a module which is protected against bundler minification.\n *\n * @param {NodeModule} mod\n * @param {string} request\n */\nfunction dynamicRequire(mod, request) {\n  return mod.require(request);\n}\n\n// Only install once if called multiple times\nvar errorFormatterInstalled = false;\nvar uncaughtShimInstalled = false;\n\n// If true, the caches are reset before a stack trace formatting operation\nvar emptyCacheBetweenOperations = false;\n\n// Supports {browser, node, auto}\nvar environment = \"auto\";\n\n// Maps a file path to a string containing the file contents\nvar fileContentsCache = {};\n\n// Maps a file path to a source map for that file\nvar sourceMapCache = {};\n\n// Regex for detecting source maps\nvar reSourceMap = /^data:application\\/json[^,]+base64,/;\n\n// Priority list of retrieve handlers\nvar retrieveFileHandlers = [];\nvar retrieveMapHandlers = [];\n\nfunction isInBrowser() {\n  if (environment === \"browser\")\n    return true;\n  if (environment === \"node\")\n    return false;\n  return ((typeof window !== 'undefined') && (typeof XMLHttpRequest === 'function') && !(window.require && window.module && window.process && window.process.type === \"renderer\"));\n}\n\nfunction hasGlobalProcessEventEmitter() {\n  return ((typeof process === 'object') && (process !== null) && (typeof process.on === 'function'));\n}\n\nfunction globalProcessVersion() {\n  if ((typeof process === 'object') && (process !== null)) {\n    return process.version;\n  } else {\n    return '';\n  }\n}\n\nfunction globalProcessStderr() {\n  if ((typeof process === 'object') && (process !== null)) {\n    return process.stderr;\n  }\n}\n\nfunction globalProcessExit(code) {\n  if ((typeof process === 'object') && (process !== null) && (typeof process.exit === 'function')) {\n    return process.exit(code);\n  }\n}\n\nfunction handlerExec(list) {\n  return function(arg) {\n    for (var i = 0; i < list.length; i++) {\n      var ret = list[i](arg);\n      if (ret) {\n        return ret;\n      }\n    }\n    return null;\n  };\n}\n\nvar retrieveFile = handlerExec(retrieveFileHandlers);\n\nretrieveFileHandlers.push(function(path) {\n  // Trim the path to make sure there is no extra whitespace.\n  path = path.trim();\n  if (/^file:/.test(path)) {\n    // existsSync/readFileSync can't handle file protocol, but once stripped, it works\n    path = path.replace(/file:\\/\\/\\/(\\w:)?/, function(protocol, drive) {\n      return drive ?\n        '' : // file:///C:/dir/file -> C:/dir/file\n        '/'; // file:///root-dir/file -> /root-dir/file\n    });\n  }\n  if (path in fileContentsCache) {\n    return fileContentsCache[path];\n  }\n\n  var contents = '';\n  try {\n    if (!fs) {\n      // Use SJAX if we are in the browser\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', path, /** async */ false);\n      xhr.send(null);\n      if (xhr.readyState === 4 && xhr.status === 200) {\n        contents = xhr.responseText;\n      }\n    } else if (fs.existsSync(path)) {\n      // Otherwise, use the filesystem\n      contents = fs.readFileSync(path, 'utf8');\n    }\n  } catch (er) {\n    /* ignore any errors */\n  }\n\n  return fileContentsCache[path] = contents;\n});\n\n// Support URLs relative to a directory, but be careful about a protocol prefix\n// in case we are in the browser (i.e. directories may start with \"http://\" or \"file:///\")\nfunction supportRelativeURL(file, url) {\n  if (!file) return url;\n  var dir = path.dirname(file);\n  var match = /^\\w+:\\/\\/[^\\/]*/.exec(dir);\n  var protocol = match ? match[0] : '';\n  var startPath = dir.slice(protocol.length);\n  if (protocol && /^\\/\\w\\:/.test(startPath)) {\n    // handle file:///C:/ paths\n    protocol += '/';\n    return protocol + path.resolve(dir.slice(protocol.length), url).replace(/\\\\/g, '/');\n  }\n  return protocol + path.resolve(dir.slice(protocol.length), url);\n}\n\nfunction retrieveSourceMapURL(source) {\n  var fileData;\n\n  if (isInBrowser()) {\n     try {\n       var xhr = new XMLHttpRequest();\n       xhr.open('GET', source, false);\n       xhr.send(null);\n       fileData = xhr.readyState === 4 ? xhr.responseText : null;\n\n       // Support providing a sourceMappingURL via the SourceMap header\n       var sourceMapHeader = xhr.getResponseHeader(\"SourceMap\") ||\n                             xhr.getResponseHeader(\"X-SourceMap\");\n       if (sourceMapHeader) {\n         return sourceMapHeader;\n       }\n     } catch (e) {\n     }\n  }\n\n  // Get the URL of the source map\n  fileData = retrieveFile(source);\n  var re = /(?:\\/\\/[@#][\\s]*sourceMappingURL=([^\\s'\"]+)[\\s]*$)|(?:\\/\\*[@#][\\s]*sourceMappingURL=([^\\s*'\"]+)[\\s]*(?:\\*\\/)[\\s]*$)/mg;\n  // Keep executing the search to find the *last* sourceMappingURL to avoid\n  // picking up sourceMappingURLs from comments, strings, etc.\n  var lastMatch, match;\n  while (match = re.exec(fileData)) lastMatch = match;\n  if (!lastMatch) return null;\n  return lastMatch[1];\n};\n\n// Can be overridden by the retrieveSourceMap option to install. Takes a\n// generated source filename; returns a {map, optional url} object, or null if\n// there is no source map.  The map field may be either a string or the parsed\n// JSON object (ie, it must be a valid argument to the SourceMapConsumer\n// constructor).\nvar retrieveSourceMap = handlerExec(retrieveMapHandlers);\nretrieveMapHandlers.push(function(source) {\n  var sourceMappingURL = retrieveSourceMapURL(source);\n  if (!sourceMappingURL) return null;\n\n  // Read the contents of the source map\n  var sourceMapData;\n  if (reSourceMap.test(sourceMappingURL)) {\n    // Support source map URL as a data url\n    var rawData = sourceMappingURL.slice(sourceMappingURL.indexOf(',') + 1);\n    sourceMapData = bufferFrom(rawData, \"base64\").toString();\n    sourceMappingURL = source;\n  } else {\n    // Support source map URLs relative to the source URL\n    sourceMappingURL = supportRelativeURL(source, sourceMappingURL);\n    sourceMapData = retrieveFile(sourceMappingURL);\n  }\n\n  if (!sourceMapData) {\n    return null;\n  }\n\n  return {\n    url: sourceMappingURL,\n    map: sourceMapData\n  };\n});\n\nfunction mapSourcePosition(position) {\n  var sourceMap = sourceMapCache[position.source];\n  if (!sourceMap) {\n    // Call the (overrideable) retrieveSourceMap function to get the source map.\n    var urlAndMap = retrieveSourceMap(position.source);\n    if (urlAndMap) {\n      sourceMap = sourceMapCache[position.source] = {\n        url: urlAndMap.url,\n        map: new SourceMapConsumer(urlAndMap.map)\n      };\n\n      // Load all sources stored inline with the source map into the file cache\n      // to pretend like they are already loaded. They may not exist on disk.\n      if (sourceMap.map.sourcesContent) {\n        sourceMap.map.sources.forEach(function(source, i) {\n          var contents = sourceMap.map.sourcesContent[i];\n          if (contents) {\n            var url = supportRelativeURL(sourceMap.url, source);\n            fileContentsCache[url] = contents;\n          }\n        });\n      }\n    } else {\n      sourceMap = sourceMapCache[position.source] = {\n        url: null,\n        map: null\n      };\n    }\n  }\n\n  // Resolve the source URL relative to the URL of the source map\n  if (sourceMap && sourceMap.map && typeof sourceMap.map.originalPositionFor === 'function') {\n    var originalPosition = sourceMap.map.originalPositionFor(position);\n\n    // Only return the original position if a matching line was found. If no\n    // matching line is found then we return position instead, which will cause\n    // the stack trace to print the path and line for the compiled file. It is\n    // better to give a precise location in the compiled file than a vague\n    // location in the original file.\n    if (originalPosition.source !== null) {\n      originalPosition.source = supportRelativeURL(\n        sourceMap.url, originalPosition.source);\n      return originalPosition;\n    }\n  }\n\n  return position;\n}\n\n// Parses code generated by FormatEvalOrigin(), a function inside V8:\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js\nfunction mapEvalOrigin(origin) {\n  // Most eval() calls are in this format\n  var match = /^eval at ([^(]+) \\((.+):(\\d+):(\\d+)\\)$/.exec(origin);\n  if (match) {\n    var position = mapSourcePosition({\n      source: match[2],\n      line: +match[3],\n      column: match[4] - 1\n    });\n    return 'eval at ' + match[1] + ' (' + position.source + ':' +\n      position.line + ':' + (position.column + 1) + ')';\n  }\n\n  // Parse nested eval() calls using recursion\n  match = /^eval at ([^(]+) \\((.+)\\)$/.exec(origin);\n  if (match) {\n    return 'eval at ' + match[1] + ' (' + mapEvalOrigin(match[2]) + ')';\n  }\n\n  // Make sure we still return useful information if we didn't find anything\n  return origin;\n}\n\n// This is copied almost verbatim from the V8 source code at\n// https://code.google.com/p/v8/source/browse/trunk/src/messages.js. The\n// implementation of wrapCallSite() used to just forward to the actual source\n// code of CallSite.prototype.toString but unfortunately a new release of V8\n// did something to the prototype chain and broke the shim. The only fix I\n// could find was copy/paste.\nfunction CallSiteToString() {\n  var fileName;\n  var fileLocation = \"\";\n  if (this.isNative()) {\n    fileLocation = \"native\";\n  } else {\n    fileName = this.getScriptNameOrSourceURL();\n    if (!fileName && this.isEval()) {\n      fileLocation = this.getEvalOrigin();\n      fileLocation += \", \";  // Expecting source position to follow.\n    }\n\n    if (fileName) {\n      fileLocation += fileName;\n    } else {\n      // Source code does not originate from a file and is not native, but we\n      // can still get the source position inside the source string, e.g. in\n      // an eval string.\n      fileLocation += \"<anonymous>\";\n    }\n    var lineNumber = this.getLineNumber();\n    if (lineNumber != null) {\n      fileLocation += \":\" + lineNumber;\n      var columnNumber = this.getColumnNumber();\n      if (columnNumber) {\n        fileLocation += \":\" + columnNumber;\n      }\n    }\n  }\n\n  var line = \"\";\n  var functionName = this.getFunctionName();\n  var addSuffix = true;\n  var isConstructor = this.isConstructor();\n  var isMethodCall = !(this.isToplevel() || isConstructor);\n  if (isMethodCall) {\n    var typeName = this.getTypeName();\n    // Fixes shim to be backward compatable with Node v0 to v4\n    if (typeName === \"[object Object]\") {\n      typeName = \"null\";\n    }\n    var methodName = this.getMethodName();\n    if (functionName) {\n      if (typeName && functionName.indexOf(typeName) != 0) {\n        line += typeName + \".\";\n      }\n      line += functionName;\n      if (methodName && functionName.indexOf(\".\" + methodName) != functionName.length - methodName.length - 1) {\n        line += \" [as \" + methodName + \"]\";\n      }\n    } else {\n      line += typeName + \".\" + (methodName || \"<anonymous>\");\n    }\n  } else if (isConstructor) {\n    line += \"new \" + (functionName || \"<anonymous>\");\n  } else if (functionName) {\n    line += functionName;\n  } else {\n    line += fileLocation;\n    addSuffix = false;\n  }\n  if (addSuffix) {\n    line += \" (\" + fileLocation + \")\";\n  }\n  return line;\n}\n\nfunction cloneCallSite(frame) {\n  var object = {};\n  Object.getOwnPropertyNames(Object.getPrototypeOf(frame)).forEach(function(name) {\n    object[name] = /^(?:is|get)/.test(name) ? function() { return frame[name].call(frame); } : frame[name];\n  });\n  object.toString = CallSiteToString;\n  return object;\n}\n\nfunction wrapCallSite(frame, state) {\n  // provides interface backward compatibility\n  if (state === undefined) {\n    state = { nextPosition: null, curPosition: null }\n  }\n  if(frame.isNative()) {\n    state.curPosition = null;\n    return frame;\n  }\n\n  // Most call sites will return the source file from getFileName(), but code\n  // passed to eval() ending in \"//# sourceURL=...\" will return the source file\n  // from getScriptNameOrSourceURL() instead\n  var source = frame.getFileName() || frame.getScriptNameOrSourceURL();\n  if (source) {\n    var line = frame.getLineNumber();\n    var column = frame.getColumnNumber() - 1;\n\n    // Fix position in Node where some (internal) code is prepended.\n    // See https://github.com/evanw/node-source-map-support/issues/36\n    // Header removed in node at ^10.16 || >=11.11.0\n    // v11 is not an LTS candidate, we can just test the one version with it.\n    // Test node versions for: 10.16-19, 10.20+, 12-19, 20-99, 100+, or 11.11\n    var noHeader = /^v(10\\.1[6-9]|10\\.[2-9][0-9]|10\\.[0-9]{3,}|1[2-9]\\d*|[2-9]\\d|\\d{3,}|11\\.11)/;\n    var headerLength = noHeader.test(globalProcessVersion()) ? 0 : 62;\n    if (line === 1 && column > headerLength && !isInBrowser() && !frame.isEval()) {\n      column -= headerLength;\n    }\n\n    var position = mapSourcePosition({\n      source: source,\n      line: line,\n      column: column\n    });\n    state.curPosition = position;\n    frame = cloneCallSite(frame);\n    var originalFunctionName = frame.getFunctionName;\n    frame.getFunctionName = function() {\n      if (state.nextPosition == null) {\n        return originalFunctionName();\n      }\n      return state.nextPosition.name || originalFunctionName();\n    };\n    frame.getFileName = function() { return position.source; };\n    frame.getLineNumber = function() { return position.line; };\n    frame.getColumnNumber = function() { return position.column + 1; };\n    frame.getScriptNameOrSourceURL = function() { return position.source; };\n    return frame;\n  }\n\n  // Code called using eval() needs special handling\n  var origin = frame.isEval() && frame.getEvalOrigin();\n  if (origin) {\n    origin = mapEvalOrigin(origin);\n    frame = cloneCallSite(frame);\n    frame.getEvalOrigin = function() { return origin; };\n    return frame;\n  }\n\n  // If we get here then we were unable to change the source position\n  return frame;\n}\n\n// This function is part of the V8 stack trace API, for more info see:\n// https://v8.dev/docs/stack-trace-api\nfunction prepareStackTrace(error, stack) {\n  if (emptyCacheBetweenOperations) {\n    fileContentsCache = {};\n    sourceMapCache = {};\n  }\n\n  var name = error.name || 'Error';\n  var message = error.message || '';\n  var errorString = name + \": \" + message;\n\n  var state = { nextPosition: null, curPosition: null };\n  var processedStack = [];\n  for (var i = stack.length - 1; i >= 0; i--) {\n    processedStack.push('\\n    at ' + wrapCallSite(stack[i], state));\n    state.nextPosition = state.curPosition;\n  }\n  state.curPosition = state.nextPosition = null;\n  return errorString + processedStack.reverse().join('');\n}\n\n// Generate position and snippet of original source with pointer\nfunction getErrorSource(error) {\n  var match = /\\n    at [^(]+ \\((.*):(\\d+):(\\d+)\\)/.exec(error.stack);\n  if (match) {\n    var source = match[1];\n    var line = +match[2];\n    var column = +match[3];\n\n    // Support the inline sourceContents inside the source map\n    var contents = fileContentsCache[source];\n\n    // Support files on disk\n    if (!contents && fs && fs.existsSync(source)) {\n      try {\n        contents = fs.readFileSync(source, 'utf8');\n      } catch (er) {\n        contents = '';\n      }\n    }\n\n    // Format the line from the original source code like node does\n    if (contents) {\n      var code = contents.split(/(?:\\r\\n|\\r|\\n)/)[line - 1];\n      if (code) {\n        return source + ':' + line + '\\n' + code + '\\n' +\n          new Array(column).join(' ') + '^';\n      }\n    }\n  }\n  return null;\n}\n\nfunction printErrorAndExit (error) {\n  var source = getErrorSource(error);\n\n  // Ensure error is printed synchronously and not truncated\n  var stderr = globalProcessStderr();\n  if (stderr && stderr._handle && stderr._handle.setBlocking) {\n    stderr._handle.setBlocking(true);\n  }\n\n  if (source) {\n    console.error();\n    console.error(source);\n  }\n\n  console.error(error.stack);\n  globalProcessExit(1);\n}\n\nfunction shimEmitUncaughtException () {\n  var origEmit = process.emit;\n\n  process.emit = function (type) {\n    if (type === 'uncaughtException') {\n      var hasStack = (arguments[1] && arguments[1].stack);\n      var hasListeners = (this.listeners(type).length > 0);\n\n      if (hasStack && !hasListeners) {\n        return printErrorAndExit(arguments[1]);\n      }\n    }\n\n    return origEmit.apply(this, arguments);\n  };\n}\n\nvar originalRetrieveFileHandlers = retrieveFileHandlers.slice(0);\nvar originalRetrieveMapHandlers = retrieveMapHandlers.slice(0);\n\nexports.wrapCallSite = wrapCallSite;\nexports.getErrorSource = getErrorSource;\nexports.mapSourcePosition = mapSourcePosition;\nexports.retrieveSourceMap = retrieveSourceMap;\n\nexports.install = function(options) {\n  options = options || {};\n\n  if (options.environment) {\n    environment = options.environment;\n    if ([\"node\", \"browser\", \"auto\"].indexOf(environment) === -1) {\n      throw new Error(\"environment \" + environment + \" was unknown. Available options are {auto, browser, node}\")\n    }\n  }\n\n  // Allow sources to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveFile) {\n    if (options.overrideRetrieveFile) {\n      retrieveFileHandlers.length = 0;\n    }\n\n    retrieveFileHandlers.unshift(options.retrieveFile);\n  }\n\n  // Allow source maps to be found by methods other than reading the files\n  // directly from disk.\n  if (options.retrieveSourceMap) {\n    if (options.overrideRetrieveSourceMap) {\n      retrieveMapHandlers.length = 0;\n    }\n\n    retrieveMapHandlers.unshift(options.retrieveSourceMap);\n  }\n\n  // Support runtime transpilers that include inline source maps\n  if (options.hookRequire && !isInBrowser()) {\n    // Use dynamicRequire to avoid including in browser bundles\n    var Module = dynamicRequire(module, 'module');\n    var $compile = Module.prototype._compile;\n\n    if (!$compile.__sourceMapSupport) {\n      Module.prototype._compile = function(content, filename) {\n        fileContentsCache[filename] = content;\n        sourceMapCache[filename] = undefined;\n        return $compile.call(this, content, filename);\n      };\n\n      Module.prototype._compile.__sourceMapSupport = true;\n    }\n  }\n\n  // Configure options\n  if (!emptyCacheBetweenOperations) {\n    emptyCacheBetweenOperations = 'emptyCacheBetweenOperations' in options ?\n      options.emptyCacheBetweenOperations : false;\n  }\n\n  // Install the error reformatter\n  if (!errorFormatterInstalled) {\n    errorFormatterInstalled = true;\n    Error.prepareStackTrace = prepareStackTrace;\n  }\n\n  if (!uncaughtShimInstalled) {\n    var installHandler = 'handleUncaughtExceptions' in options ?\n      options.handleUncaughtExceptions : true;\n\n    // Do not override 'uncaughtException' with our own handler in Node.js\n    // Worker threads. Workers pass the error to the main thread as an event,\n    // rather than printing something to stderr and exiting.\n    try {\n      // We need to use `dynamicRequire` because `require` on it's own will be optimized by WebPack/Browserify.\n      var worker_threads = dynamicRequire(module, 'worker_threads');\n      if (worker_threads.isMainThread === false) {\n        installHandler = false;\n      }\n    } catch(e) {}\n\n    // Provide the option to not install the uncaught exception handler. This is\n    // to support other uncaught exception handlers (in test frameworks, for\n    // example). If this handler is not installed and there are no other uncaught\n    // exception handlers, uncaught exceptions will be caught by node's built-in\n    // exception handler and the process will still be terminated. However, the\n    // generated JavaScript code will be shown above the stack trace instead of\n    // the original source code.\n    if (installHandler && hasGlobalProcessEventEmitter()) {\n      uncaughtShimInstalled = true;\n      shimEmitUncaughtException();\n    }\n  }\n};\n\nexports.resetRetrieveHandlers = function() {\n  retrieveFileHandlers.length = 0;\n  retrieveMapHandlers.length = 0;\n\n  retrieveFileHandlers = originalRetrieveFileHandlers.slice(0);\n  retrieveMapHandlers = originalRetrieveMapHandlers.slice(0);\n\n  retrieveSourceMap = handlerExec(retrieveMapHandlers);\n  retrieveFile = handlerExec(retrieveFileHandlers);\n}\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar has = Object.prototype.hasOwnProperty;\nvar hasNativeMap = typeof Map !== \"undefined\";\n\n/**\n * A data structure which is a combination of an array and a set. Adding a new\n * member is O(1), testing for membership is O(1), and finding the index of an\n * element is O(1). Removing elements from the set is not supported. Only\n * strings are supported for membership.\n */\nfunction ArraySet() {\n  this._array = [];\n  this._set = hasNativeMap ? new Map() : Object.create(null);\n}\n\n/**\n * Static method for creating ArraySet instances from an existing array.\n */\nArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\n  var set = new ArraySet();\n  for (var i = 0, len = aArray.length; i < len; i++) {\n    set.add(aArray[i], aAllowDuplicates);\n  }\n  return set;\n};\n\n/**\n * Return how many unique items are in this ArraySet. If duplicates have been\n * added, than those do not count towards the size.\n *\n * @returns Number\n */\nArraySet.prototype.size = function ArraySet_size() {\n  return hasNativeMap ? this._set.size : Object.getOwnPropertyNames(this._set).length;\n};\n\n/**\n * Add the given string to this set.\n *\n * @param String aStr\n */\nArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\n  var sStr = hasNativeMap ? aStr : util.toSetString(aStr);\n  var isDuplicate = hasNativeMap ? this.has(aStr) : has.call(this._set, sStr);\n  var idx = this._array.length;\n  if (!isDuplicate || aAllowDuplicates) {\n    this._array.push(aStr);\n  }\n  if (!isDuplicate) {\n    if (hasNativeMap) {\n      this._set.set(aStr, idx);\n    } else {\n      this._set[sStr] = idx;\n    }\n  }\n};\n\n/**\n * Is the given string a member of this set?\n *\n * @param String aStr\n */\nArraySet.prototype.has = function ArraySet_has(aStr) {\n  if (hasNativeMap) {\n    return this._set.has(aStr);\n  } else {\n    var sStr = util.toSetString(aStr);\n    return has.call(this._set, sStr);\n  }\n};\n\n/**\n * What is the index of the given string in the array?\n *\n * @param String aStr\n */\nArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\n  if (hasNativeMap) {\n    var idx = this._set.get(aStr);\n    if (idx >= 0) {\n        return idx;\n    }\n  } else {\n    var sStr = util.toSetString(aStr);\n    if (has.call(this._set, sStr)) {\n      return this._set[sStr];\n    }\n  }\n\n  throw new Error('\"' + aStr + '\" is not in the set.');\n};\n\n/**\n * What is the element at the given index?\n *\n * @param Number aIdx\n */\nArraySet.prototype.at = function ArraySet_at(aIdx) {\n  if (aIdx >= 0 && aIdx < this._array.length) {\n    return this._array[aIdx];\n  }\n  throw new Error('No element indexed by ' + aIdx);\n};\n\n/**\n * Returns the array representation of this set (which has the proper indices\n * indicated by indexOf). Note that this is a copy of the internal array used\n * for storing the members so that no one can mess with internal state.\n */\nArraySet.prototype.toArray = function ArraySet_toArray() {\n  return this._array.slice();\n};\n\nexports.ArraySet = ArraySet;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n *\n * Based on the Base 64 VLQ implementation in Closure Compiler:\n * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\n *\n * Copyright 2011 The Closure Compiler Authors. All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *  * Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar base64 = require('./base64');\n\n// A single base 64 digit can contain 6 bits of data. For the base 64 variable\n// length quantities we use in the source map spec, the first bit is the sign,\n// the next four bits are the actual value, and the 6th bit is the\n// continuation bit. The continuation bit tells us whether there are more\n// digits in this value following this digit.\n//\n//   Continuation\n//   |    Sign\n//   |    |\n//   V    V\n//   101011\n\nvar VLQ_BASE_SHIFT = 5;\n\n// binary: 100000\nvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\n\n// binary: 011111\nvar VLQ_BASE_MASK = VLQ_BASE - 1;\n\n// binary: 100000\nvar VLQ_CONTINUATION_BIT = VLQ_BASE;\n\n/**\n * Converts from a two-complement value to a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\n *   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\n */\nfunction toVLQSigned(aValue) {\n  return aValue < 0\n    ? ((-aValue) << 1) + 1\n    : (aValue << 1) + 0;\n}\n\n/**\n * Converts to a two-complement value from a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\n *   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\n */\nfunction fromVLQSigned(aValue) {\n  var isNegative = (aValue & 1) === 1;\n  var shifted = aValue >> 1;\n  return isNegative\n    ? -shifted\n    : shifted;\n}\n\n/**\n * Returns the base 64 VLQ encoded value.\n */\nexports.encode = function base64VLQ_encode(aValue) {\n  var encoded = \"\";\n  var digit;\n\n  var vlq = toVLQSigned(aValue);\n\n  do {\n    digit = vlq & VLQ_BASE_MASK;\n    vlq >>>= VLQ_BASE_SHIFT;\n    if (vlq > 0) {\n      // There are still more digits in this value, so we must make sure the\n      // continuation bit is marked.\n      digit |= VLQ_CONTINUATION_BIT;\n    }\n    encoded += base64.encode(digit);\n  } while (vlq > 0);\n\n  return encoded;\n};\n\n/**\n * Decodes the next base 64 VLQ value from the given string and returns the\n * value and the rest of the string via the out parameter.\n */\nexports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\n  var strLen = aStr.length;\n  var result = 0;\n  var shift = 0;\n  var continuation, digit;\n\n  do {\n    if (aIndex >= strLen) {\n      throw new Error(\"Expected more digits in base 64 VLQ value.\");\n    }\n\n    digit = base64.decode(aStr.charCodeAt(aIndex++));\n    if (digit === -1) {\n      throw new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\n    }\n\n    continuation = !!(digit & VLQ_CONTINUATION_BIT);\n    digit &= VLQ_BASE_MASK;\n    result = result + (digit << shift);\n    shift += VLQ_BASE_SHIFT;\n  } while (continuation);\n\n  aOutParam.value = fromVLQSigned(result);\n  aOutParam.rest = aIndex;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n/**\n * Encode an integer in the range of 0 to 63 to a single base 64 digit.\n */\nexports.encode = function (number) {\n  if (0 <= number && number < intToCharMap.length) {\n    return intToCharMap[number];\n  }\n  throw new TypeError(\"Must be between 0 and 63: \" + number);\n};\n\n/**\n * Decode a single base 64 character code digit to an integer. Returns -1 on\n * failure.\n */\nexports.decode = function (charCode) {\n  var bigA = 65;     // 'A'\n  var bigZ = 90;     // 'Z'\n\n  var littleA = 97;  // 'a'\n  var littleZ = 122; // 'z'\n\n  var zero = 48;     // '0'\n  var nine = 57;     // '9'\n\n  var plus = 43;     // '+'\n  var slash = 47;    // '/'\n\n  var littleOffset = 26;\n  var numberOffset = 52;\n\n  // 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\n  if (bigA <= charCode && charCode <= bigZ) {\n    return (charCode - bigA);\n  }\n\n  // 26 - 51: abcdefghijklmnopqrstuvwxyz\n  if (littleA <= charCode && charCode <= littleZ) {\n    return (charCode - littleA + littleOffset);\n  }\n\n  // 52 - 61: 0123456789\n  if (zero <= charCode && charCode <= nine) {\n    return (charCode - zero + numberOffset);\n  }\n\n  // 62: +\n  if (charCode == plus) {\n    return 62;\n  }\n\n  // 63: /\n  if (charCode == slash) {\n    return 63;\n  }\n\n  // Invalid base64 digit.\n  return -1;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nexports.GREATEST_LOWER_BOUND = 1;\nexports.LEAST_UPPER_BOUND = 2;\n\n/**\n * Recursive implementation of binary search.\n *\n * @param aLow Indices here and lower do not contain the needle.\n * @param aHigh Indices here and higher do not contain the needle.\n * @param aNeedle The element being searched for.\n * @param aHaystack The non-empty array being searched.\n * @param aCompare Function which takes two elements and returns -1, 0, or 1.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n */\nfunction recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\n  // This function terminates when one of the following is true:\n  //\n  //   1. We find the exact element we are looking for.\n  //\n  //   2. We did not find the exact element, but we can return the index of\n  //      the next-closest element.\n  //\n  //   3. We did not find the exact element, and there is no next-closest\n  //      element than the one we are searching for, so we return -1.\n  var mid = Math.floor((aHigh - aLow) / 2) + aLow;\n  var cmp = aCompare(aNeedle, aHaystack[mid], true);\n  if (cmp === 0) {\n    // Found the element we are looking for.\n    return mid;\n  }\n  else if (cmp > 0) {\n    // Our needle is greater than aHaystack[mid].\n    if (aHigh - mid > 1) {\n      // The element is in the upper half.\n      return recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // The exact needle element was not found in this haystack. Determine if\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return aHigh < aHaystack.length ? aHigh : -1;\n    } else {\n      return mid;\n    }\n  }\n  else {\n    // Our needle is less than aHaystack[mid].\n    if (mid - aLow > 1) {\n      // The element is in the lower half.\n      return recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return mid;\n    } else {\n      return aLow < 0 ? -1 : aLow;\n    }\n  }\n}\n\n/**\n * This is an implementation of binary search which will always try and return\n * the index of the closest element if there is no exact hit. This is because\n * mappings between original and generated line/col pairs are single points,\n * and there is an implicit region between each of them, so a miss just means\n * that you aren't on the very start of a region.\n *\n * @param aNeedle The element you are looking for.\n * @param aHaystack The array that is being searched.\n * @param aCompare A function which takes the needle and an element in the\n *     array and returns -1, 0, or 1 depending on whether the needle is less\n *     than, equal to, or greater than the element, respectively.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\n */\nexports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\n  if (aHaystack.length === 0) {\n    return -1;\n  }\n\n  var index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack,\n                              aCompare, aBias || exports.GREATEST_LOWER_BOUND);\n  if (index < 0) {\n    return -1;\n  }\n\n  // We have found either the exact element, or the next-closest element than\n  // the one we are searching for. However, there may be more than one such\n  // element. Make sure we always return the smallest of these.\n  while (index - 1 >= 0) {\n    if (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\n      break;\n    }\n    --index;\n  }\n\n  return index;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2014 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\n\n/**\n * Determine whether mappingB is after mappingA with respect to generated\n * position.\n */\nfunction generatedPositionAfter(mappingA, mappingB) {\n  // Optimized for most common case\n  var lineA = mappingA.generatedLine;\n  var lineB = mappingB.generatedLine;\n  var columnA = mappingA.generatedColumn;\n  var columnB = mappingB.generatedColumn;\n  return lineB > lineA || lineB == lineA && columnB >= columnA ||\n         util.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\n}\n\n/**\n * A data structure to provide a sorted view of accumulated mappings in a\n * performance conscious manner. It trades a neglibable overhead in general\n * case for a large speedup in case of mappings being added in order.\n */\nfunction MappingList() {\n  this._array = [];\n  this._sorted = true;\n  // Serves as infimum\n  this._last = {generatedLine: -1, generatedColumn: 0};\n}\n\n/**\n * Iterate through internal items. This method takes the same arguments that\n * `Array.prototype.forEach` takes.\n *\n * NOTE: The order of the mappings is NOT guaranteed.\n */\nMappingList.prototype.unsortedForEach =\n  function MappingList_forEach(aCallback, aThisArg) {\n    this._array.forEach(aCallback, aThisArg);\n  };\n\n/**\n * Add the given source mapping.\n *\n * @param Object aMapping\n */\nMappingList.prototype.add = function MappingList_add(aMapping) {\n  if (generatedPositionAfter(this._last, aMapping)) {\n    this._last = aMapping;\n    this._array.push(aMapping);\n  } else {\n    this._sorted = false;\n    this._array.push(aMapping);\n  }\n};\n\n/**\n * Returns the flat, sorted array of mappings. The mappings are sorted by\n * generated position.\n *\n * WARNING: This method returns internal data without copying, for\n * performance. The return value must NOT be mutated, and should be treated as\n * an immutable borrow. If you want to take ownership, you must make your own\n * copy.\n */\nMappingList.prototype.toArray = function MappingList_toArray() {\n  if (!this._sorted) {\n    this._array.sort(util.compareByGeneratedPositionsInflated);\n    this._sorted = true;\n  }\n  return this._array;\n};\n\nexports.MappingList = MappingList;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n// It turns out that some (most?) JavaScript engines don't self-host\n// `Array.prototype.sort`. This makes sense because C++ will likely remain\n// faster than JS when doing raw CPU-intensive sorting. However, when using a\n// custom comparator function, calling back and forth between the VM's C++ and\n// JIT'd JS is rather slow *and* loses JIT type information, resulting in\n// worse generated code for the comparator function than would be optimal. In\n// fact, when sorting with a comparator, these costs outweigh the benefits of\n// sorting in C++. By using our own JS-implemented Quick Sort (below), we get\n// a ~3500ms mean speed-up in `bench/bench.html`.\n\n/**\n * Swap the elements indexed by `x` and `y` in the array `ary`.\n *\n * @param {Array} ary\n *        The array.\n * @param {Number} x\n *        The index of the first item.\n * @param {Number} y\n *        The index of the second item.\n */\nfunction swap(ary, x, y) {\n  var temp = ary[x];\n  ary[x] = ary[y];\n  ary[y] = temp;\n}\n\n/**\n * Returns a random integer within the range `low .. high` inclusive.\n *\n * @param {Number} low\n *        The lower bound on the range.\n * @param {Number} high\n *        The upper bound on the range.\n */\nfunction randomIntInRange(low, high) {\n  return Math.round(low + (Math.random() * (high - low)));\n}\n\n/**\n * The Quick Sort algorithm.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n * @param {Number} p\n *        Start index of the array\n * @param {Number} r\n *        End index of the array\n */\nfunction doQuickSort(ary, comparator, p, r) {\n  // If our lower bound is less than our upper bound, we (1) partition the\n  // array into two pieces and (2) recurse on each half. If it is not, this is\n  // the empty array and our base case.\n\n  if (p < r) {\n    // (1) Partitioning.\n    //\n    // The partitioning chooses a pivot between `p` and `r` and moves all\n    // elements that are less than or equal to the pivot to the before it, and\n    // all the elements that are greater than it after it. The effect is that\n    // once partition is done, the pivot is in the exact place it will be when\n    // the array is put in sorted order, and it will not need to be moved\n    // again. This runs in O(n) time.\n\n    // Always choose a random pivot so that an input array which is reverse\n    // sorted does not cause O(n^2) running time.\n    var pivotIndex = randomIntInRange(p, r);\n    var i = p - 1;\n\n    swap(ary, pivotIndex, r);\n    var pivot = ary[r];\n\n    // Immediately after `j` is incremented in this loop, the following hold\n    // true:\n    //\n    //   * Every element in `ary[p .. i]` is less than or equal to the pivot.\n    //\n    //   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\n    for (var j = p; j < r; j++) {\n      if (comparator(ary[j], pivot) <= 0) {\n        i += 1;\n        swap(ary, i, j);\n      }\n    }\n\n    swap(ary, i + 1, j);\n    var q = i + 1;\n\n    // (2) Recurse on each half.\n\n    doQuickSort(ary, comparator, p, q - 1);\n    doQuickSort(ary, comparator, q + 1, r);\n  }\n}\n\n/**\n * Sort the given array in-place with the given comparator function.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n */\nexports.quickSort = function (ary, comparator) {\n  doQuickSort(ary, comparator, 0, ary.length - 1);\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar binarySearch = require('./binary-search');\nvar ArraySet = require('./array-set').ArraySet;\nvar base64VLQ = require('./base64-vlq');\nvar quickSort = require('./quick-sort').quickSort;\n\nfunction SourceMapConsumer(aSourceMap, aSourceMapURL) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = util.parseSourceMapInput(aSourceMap);\n  }\n\n  return sourceMap.sections != null\n    ? new IndexedSourceMapConsumer(sourceMap, aSourceMapURL)\n    : new BasicSourceMapConsumer(sourceMap, aSourceMapURL);\n}\n\nSourceMapConsumer.fromSourceMap = function(aSourceMap, aSourceMapURL) {\n  return BasicSourceMapConsumer.fromSourceMap(aSourceMap, aSourceMapURL);\n}\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nSourceMapConsumer.prototype._version = 3;\n\n// `__generatedMappings` and `__originalMappings` are arrays that hold the\n// parsed mapping coordinates from the source map's \"mappings\" attribute. They\n// are lazily instantiated, accessed via the `_generatedMappings` and\n// `_originalMappings` getters respectively, and we only parse the mappings\n// and create these arrays once queried for a source location. We jump through\n// these hoops because there can be many thousands of mappings, and parsing\n// them is expensive, so we only want to do it if we must.\n//\n// Each object in the arrays is of the form:\n//\n//     {\n//       generatedLine: The line number in the generated code,\n//       generatedColumn: The column number in the generated code,\n//       source: The path to the original source file that generated this\n//               chunk of code,\n//       originalLine: The line number in the original source that\n//                     corresponds to this chunk of generated code,\n//       originalColumn: The column number in the original source that\n//                       corresponds to this chunk of generated code,\n//       name: The name of the original symbol which generated this chunk of\n//             code.\n//     }\n//\n// All properties except for `generatedLine` and `generatedColumn` can be\n// `null`.\n//\n// `_generatedMappings` is ordered by the generated positions.\n//\n// `_originalMappings` is ordered by the original positions.\n\nSourceMapConsumer.prototype.__generatedMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_generatedMappings', {\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    if (!this.__generatedMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__generatedMappings;\n  }\n});\n\nSourceMapConsumer.prototype.__originalMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_originalMappings', {\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    if (!this.__originalMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__originalMappings;\n  }\n});\n\nSourceMapConsumer.prototype._charIsMappingSeparator =\n  function SourceMapConsumer_charIsMappingSeparator(aStr, index) {\n    var c = aStr.charAt(index);\n    return c === \";\" || c === \",\";\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    throw new Error(\"Subclasses must implement _parseMappings\");\n  };\n\nSourceMapConsumer.GENERATED_ORDER = 1;\nSourceMapConsumer.ORIGINAL_ORDER = 2;\n\nSourceMapConsumer.GREATEST_LOWER_BOUND = 1;\nSourceMapConsumer.LEAST_UPPER_BOUND = 2;\n\n/**\n * Iterate over each mapping between an original source/line/column and a\n * generated line/column in this source map.\n *\n * @param Function aCallback\n *        The function that is called with each mapping.\n * @param Object aContext\n *        Optional. If specified, this object will be the value of `this` every\n *        time that `aCallback` is called.\n * @param aOrder\n *        Either `SourceMapConsumer.GENERATED_ORDER` or\n *        `SourceMapConsumer.ORIGINAL_ORDER`. Specifies whether you want to\n *        iterate over the mappings sorted by the generated file's line/column\n *        order or the original's source/line/column order, respectively. Defaults to\n *        `SourceMapConsumer.GENERATED_ORDER`.\n */\nSourceMapConsumer.prototype.eachMapping =\n  function SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {\n    var context = aContext || null;\n    var order = aOrder || SourceMapConsumer.GENERATED_ORDER;\n\n    var mappings;\n    switch (order) {\n    case SourceMapConsumer.GENERATED_ORDER:\n      mappings = this._generatedMappings;\n      break;\n    case SourceMapConsumer.ORIGINAL_ORDER:\n      mappings = this._originalMappings;\n      break;\n    default:\n      throw new Error(\"Unknown order of iteration.\");\n    }\n\n    var sourceRoot = this.sourceRoot;\n    mappings.map(function (mapping) {\n      var source = mapping.source === null ? null : this._sources.at(mapping.source);\n      source = util.computeSourceURL(sourceRoot, source, this._sourceMapURL);\n      return {\n        source: source,\n        generatedLine: mapping.generatedLine,\n        generatedColumn: mapping.generatedColumn,\n        originalLine: mapping.originalLine,\n        originalColumn: mapping.originalColumn,\n        name: mapping.name === null ? null : this._names.at(mapping.name)\n      };\n    }, this).forEach(aCallback, context);\n  };\n\n/**\n * Returns all generated line and column information for the original source,\n * line, and column provided. If no column is provided, returns all mappings\n * corresponding to a either the line we are searching for or the next\n * closest line that has any mappings. Otherwise, returns all mappings\n * corresponding to the given line and either the column we are searching for\n * or the next closest column that has any offsets.\n *\n * The only argument is an object with the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number is 1-based.\n *   - column: Optional. the column number in the original source.\n *    The column number is 0-based.\n *\n * and an array of objects is returned, each with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *    line number is 1-based.\n *   - column: The column number in the generated source, or null.\n *    The column number is 0-based.\n */\nSourceMapConsumer.prototype.allGeneratedPositionsFor =\n  function SourceMapConsumer_allGeneratedPositionsFor(aArgs) {\n    var line = util.getArg(aArgs, 'line');\n\n    // When there is no exact match, BasicSourceMapConsumer.prototype._findMapping\n    // returns the index of the closest mapping less than the needle. By\n    // setting needle.originalColumn to 0, we thus find the last mapping for\n    // the given line, provided such a mapping exists.\n    var needle = {\n      source: util.getArg(aArgs, 'source'),\n      originalLine: line,\n      originalColumn: util.getArg(aArgs, 'column', 0)\n    };\n\n    needle.source = this._findSourceIndex(needle.source);\n    if (needle.source < 0) {\n      return [];\n    }\n\n    var mappings = [];\n\n    var index = this._findMapping(needle,\n                                  this._originalMappings,\n                                  \"originalLine\",\n                                  \"originalColumn\",\n                                  util.compareByOriginalPositions,\n                                  binarySearch.LEAST_UPPER_BOUND);\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (aArgs.column === undefined) {\n        var originalLine = mapping.originalLine;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we found. Since\n        // mappings are sorted, this is guaranteed to find all mappings for\n        // the line we found.\n        while (mapping && mapping.originalLine === originalLine) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      } else {\n        var originalColumn = mapping.originalColumn;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we were searching for.\n        // Since mappings are sorted, this is guaranteed to find all mappings for\n        // the line we are searching for.\n        while (mapping &&\n               mapping.originalLine === line &&\n               mapping.originalColumn == originalColumn) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      }\n    }\n\n    return mappings;\n  };\n\nexports.SourceMapConsumer = SourceMapConsumer;\n\n/**\n * A BasicSourceMapConsumer instance represents a parsed source map which we can\n * query for information about the original file positions by giving it a file\n * position in the generated source.\n *\n * The first parameter is the raw source map (either as a JSON string, or\n * already parsed to an object). According to the spec, source maps have the\n * following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - sources: An array of URLs to the original source files.\n *   - names: An array of identifiers which can be referrenced by individual mappings.\n *   - sourceRoot: Optional. The URL root from which all sources are relative.\n *   - sourcesContent: Optional. An array of contents of the original source files.\n *   - mappings: A string of base64 VLQs which contain the actual mappings.\n *   - file: Optional. The generated file this source map is associated with.\n *\n * Here is an example source map, taken from the source map spec[0]:\n *\n *     {\n *       version : 3,\n *       file: \"out.js\",\n *       sourceRoot : \"\",\n *       sources: [\"foo.js\", \"bar.js\"],\n *       names: [\"src\", \"maps\", \"are\", \"fun\"],\n *       mappings: \"AA,AB;;ABCDE;\"\n *     }\n *\n * The second parameter, if given, is a string whose value is the URL\n * at which the source map was found.  This URL is used to compute the\n * sources array.\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1#\n */\nfunction BasicSourceMapConsumer(aSourceMap, aSourceMapURL) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = util.parseSourceMapInput(aSourceMap);\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sources = util.getArg(sourceMap, 'sources');\n  // Sass 3.3 leaves out the 'names' array, so we deviate from the spec (which\n  // requires the array) to play nice here.\n  var names = util.getArg(sourceMap, 'names', []);\n  var sourceRoot = util.getArg(sourceMap, 'sourceRoot', null);\n  var sourcesContent = util.getArg(sourceMap, 'sourcesContent', null);\n  var mappings = util.getArg(sourceMap, 'mappings');\n  var file = util.getArg(sourceMap, 'file', null);\n\n  // Once again, Sass deviates from the spec and supplies the version as a\n  // string rather than a number, so we use loose equality checking here.\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  if (sourceRoot) {\n    sourceRoot = util.normalize(sourceRoot);\n  }\n\n  sources = sources\n    .map(String)\n    // Some source maps produce relative source paths like \"./foo.js\" instead of\n    // \"foo.js\".  Normalize these first so that future comparisons will succeed.\n    // See bugzil.la/1090768.\n    .map(util.normalize)\n    // Always ensure that absolute sources are internally stored relative to\n    // the source root, if the source root is absolute. Not doing this would\n    // be particularly problematic when the source root is a prefix of the\n    // source (valid, but why??). See github issue #199 and bugzil.la/1188982.\n    .map(function (source) {\n      return sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source)\n        ? util.relative(sourceRoot, source)\n        : source;\n    });\n\n  // Pass `true` below to allow duplicate names and sources. While source maps\n  // are intended to be compressed and deduplicated, the TypeScript compiler\n  // sometimes generates source maps with duplicates in them. See Github issue\n  // #72 and bugzil.la/889492.\n  this._names = ArraySet.fromArray(names.map(String), true);\n  this._sources = ArraySet.fromArray(sources, true);\n\n  this._absoluteSources = this._sources.toArray().map(function (s) {\n    return util.computeSourceURL(sourceRoot, s, aSourceMapURL);\n  });\n\n  this.sourceRoot = sourceRoot;\n  this.sourcesContent = sourcesContent;\n  this._mappings = mappings;\n  this._sourceMapURL = aSourceMapURL;\n  this.file = file;\n}\n\nBasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nBasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;\n\n/**\n * Utility function to find the index of a source.  Returns -1 if not\n * found.\n */\nBasicSourceMapConsumer.prototype._findSourceIndex = function(aSource) {\n  var relativeSource = aSource;\n  if (this.sourceRoot != null) {\n    relativeSource = util.relative(this.sourceRoot, relativeSource);\n  }\n\n  if (this._sources.has(relativeSource)) {\n    return this._sources.indexOf(relativeSource);\n  }\n\n  // Maybe aSource is an absolute URL as returned by |sources|.  In\n  // this case we can't simply undo the transform.\n  var i;\n  for (i = 0; i < this._absoluteSources.length; ++i) {\n    if (this._absoluteSources[i] == aSource) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\n/**\n * Create a BasicSourceMapConsumer from a SourceMapGenerator.\n *\n * @param SourceMapGenerator aSourceMap\n *        The source map that will be consumed.\n * @param String aSourceMapURL\n *        The URL at which the source map can be found (optional)\n * @returns BasicSourceMapConsumer\n */\nBasicSourceMapConsumer.fromSourceMap =\n  function SourceMapConsumer_fromSourceMap(aSourceMap, aSourceMapURL) {\n    var smc = Object.create(BasicSourceMapConsumer.prototype);\n\n    var names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);\n    var sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);\n    smc.sourceRoot = aSourceMap._sourceRoot;\n    smc.sourcesContent = aSourceMap._generateSourcesContent(smc._sources.toArray(),\n                                                            smc.sourceRoot);\n    smc.file = aSourceMap._file;\n    smc._sourceMapURL = aSourceMapURL;\n    smc._absoluteSources = smc._sources.toArray().map(function (s) {\n      return util.computeSourceURL(smc.sourceRoot, s, aSourceMapURL);\n    });\n\n    // Because we are modifying the entries (by converting string sources and\n    // names to indices into the sources and names ArraySets), we have to make\n    // a copy of the entry or else bad things happen. Shared mutable state\n    // strikes again! See github issue #191.\n\n    var generatedMappings = aSourceMap._mappings.toArray().slice();\n    var destGeneratedMappings = smc.__generatedMappings = [];\n    var destOriginalMappings = smc.__originalMappings = [];\n\n    for (var i = 0, length = generatedMappings.length; i < length; i++) {\n      var srcMapping = generatedMappings[i];\n      var destMapping = new Mapping;\n      destMapping.generatedLine = srcMapping.generatedLine;\n      destMapping.generatedColumn = srcMapping.generatedColumn;\n\n      if (srcMapping.source) {\n        destMapping.source = sources.indexOf(srcMapping.source);\n        destMapping.originalLine = srcMapping.originalLine;\n        destMapping.originalColumn = srcMapping.originalColumn;\n\n        if (srcMapping.name) {\n          destMapping.name = names.indexOf(srcMapping.name);\n        }\n\n        destOriginalMappings.push(destMapping);\n      }\n\n      destGeneratedMappings.push(destMapping);\n    }\n\n    quickSort(smc.__originalMappings, util.compareByOriginalPositions);\n\n    return smc;\n  };\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nBasicSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(BasicSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    return this._absoluteSources.slice();\n  }\n});\n\n/**\n * Provide the JIT with a nice shape / hidden class.\n */\nfunction Mapping() {\n  this.generatedLine = 0;\n  this.generatedColumn = 0;\n  this.source = null;\n  this.originalLine = null;\n  this.originalColumn = null;\n  this.name = null;\n}\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nBasicSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    var generatedLine = 1;\n    var previousGeneratedColumn = 0;\n    var previousOriginalLine = 0;\n    var previousOriginalColumn = 0;\n    var previousSource = 0;\n    var previousName = 0;\n    var length = aStr.length;\n    var index = 0;\n    var cachedSegments = {};\n    var temp = {};\n    var originalMappings = [];\n    var generatedMappings = [];\n    var mapping, str, segment, end, value;\n\n    while (index < length) {\n      if (aStr.charAt(index) === ';') {\n        generatedLine++;\n        index++;\n        previousGeneratedColumn = 0;\n      }\n      else if (aStr.charAt(index) === ',') {\n        index++;\n      }\n      else {\n        mapping = new Mapping();\n        mapping.generatedLine = generatedLine;\n\n        // Because each offset is encoded relative to the previous one,\n        // many segments often have the same encoding. We can exploit this\n        // fact by caching the parsed variable length fields of each segment,\n        // allowing us to avoid a second parse if we encounter the same\n        // segment again.\n        for (end = index; end < length; end++) {\n          if (this._charIsMappingSeparator(aStr, end)) {\n            break;\n          }\n        }\n        str = aStr.slice(index, end);\n\n        segment = cachedSegments[str];\n        if (segment) {\n          index += str.length;\n        } else {\n          segment = [];\n          while (index < end) {\n            base64VLQ.decode(aStr, index, temp);\n            value = temp.value;\n            index = temp.rest;\n            segment.push(value);\n          }\n\n          if (segment.length === 2) {\n            throw new Error('Found a source, but no line and column');\n          }\n\n          if (segment.length === 3) {\n            throw new Error('Found a source and line, but no column');\n          }\n\n          cachedSegments[str] = segment;\n        }\n\n        // Generated column.\n        mapping.generatedColumn = previousGeneratedColumn + segment[0];\n        previousGeneratedColumn = mapping.generatedColumn;\n\n        if (segment.length > 1) {\n          // Original source.\n          mapping.source = previousSource + segment[1];\n          previousSource += segment[1];\n\n          // Original line.\n          mapping.originalLine = previousOriginalLine + segment[2];\n          previousOriginalLine = mapping.originalLine;\n          // Lines are stored 0-based\n          mapping.originalLine += 1;\n\n          // Original column.\n          mapping.originalColumn = previousOriginalColumn + segment[3];\n          previousOriginalColumn = mapping.originalColumn;\n\n          if (segment.length > 4) {\n            // Original name.\n            mapping.name = previousName + segment[4];\n            previousName += segment[4];\n          }\n        }\n\n        generatedMappings.push(mapping);\n        if (typeof mapping.originalLine === 'number') {\n          originalMappings.push(mapping);\n        }\n      }\n    }\n\n    quickSort(generatedMappings, util.compareByGeneratedPositionsDeflated);\n    this.__generatedMappings = generatedMappings;\n\n    quickSort(originalMappings, util.compareByOriginalPositions);\n    this.__originalMappings = originalMappings;\n  };\n\n/**\n * Find the mapping that best matches the hypothetical \"needle\" mapping that\n * we are searching for in the given \"haystack\" of mappings.\n */\nBasicSourceMapConsumer.prototype._findMapping =\n  function SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName,\n                                         aColumnName, aComparator, aBias) {\n    // To return the position we are searching for, we must first find the\n    // mapping for the given position and then return the opposite position it\n    // points to. Because the mappings are sorted, we can use binary search to\n    // find the best mapping.\n\n    if (aNeedle[aLineName] <= 0) {\n      throw new TypeError('Line must be greater than or equal to 1, got '\n                          + aNeedle[aLineName]);\n    }\n    if (aNeedle[aColumnName] < 0) {\n      throw new TypeError('Column must be greater than or equal to 0, got '\n                          + aNeedle[aColumnName]);\n    }\n\n    return binarySearch.search(aNeedle, aMappings, aComparator, aBias);\n  };\n\n/**\n * Compute the last column for each generated mapping. The last column is\n * inclusive.\n */\nBasicSourceMapConsumer.prototype.computeColumnSpans =\n  function SourceMapConsumer_computeColumnSpans() {\n    for (var index = 0; index < this._generatedMappings.length; ++index) {\n      var mapping = this._generatedMappings[index];\n\n      // Mappings do not contain a field for the last generated columnt. We\n      // can come up with an optimistic estimate, however, by assuming that\n      // mappings are contiguous (i.e. given two consecutive mappings, the\n      // first mapping ends where the second one starts).\n      if (index + 1 < this._generatedMappings.length) {\n        var nextMapping = this._generatedMappings[index + 1];\n\n        if (mapping.generatedLine === nextMapping.generatedLine) {\n          mapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;\n          continue;\n        }\n      }\n\n      // The last mapping for each line spans the entire line.\n      mapping.lastGeneratedColumn = Infinity;\n    }\n  };\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.  The line number\n *     is 1-based.\n *   - column: The column number in the generated source.  The column\n *     number is 0-based.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the original source, or null.  The\n *     column number is 0-based.\n *   - name: The original identifier, or null.\n */\nBasicSourceMapConsumer.prototype.originalPositionFor =\n  function SourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._generatedMappings,\n      \"generatedLine\",\n      \"generatedColumn\",\n      util.compareByGeneratedPositionsDeflated,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._generatedMappings[index];\n\n      if (mapping.generatedLine === needle.generatedLine) {\n        var source = util.getArg(mapping, 'source', null);\n        if (source !== null) {\n          source = this._sources.at(source);\n          source = util.computeSourceURL(this.sourceRoot, source, this._sourceMapURL);\n        }\n        var name = util.getArg(mapping, 'name', null);\n        if (name !== null) {\n          name = this._names.at(name);\n        }\n        return {\n          source: source,\n          line: util.getArg(mapping, 'originalLine', null),\n          column: util.getArg(mapping, 'originalColumn', null),\n          name: name\n        };\n      }\n    }\n\n    return {\n      source: null,\n      line: null,\n      column: null,\n      name: null\n    };\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nBasicSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function BasicSourceMapConsumer_hasContentsOfAllSources() {\n    if (!this.sourcesContent) {\n      return false;\n    }\n    return this.sourcesContent.length >= this._sources.size() &&\n      !this.sourcesContent.some(function (sc) { return sc == null; });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nBasicSourceMapConsumer.prototype.sourceContentFor =\n  function SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    if (!this.sourcesContent) {\n      return null;\n    }\n\n    var index = this._findSourceIndex(aSource);\n    if (index >= 0) {\n      return this.sourcesContent[index];\n    }\n\n    var relativeSource = aSource;\n    if (this.sourceRoot != null) {\n      relativeSource = util.relative(this.sourceRoot, relativeSource);\n    }\n\n    var url;\n    if (this.sourceRoot != null\n        && (url = util.urlParse(this.sourceRoot))) {\n      // XXX: file:// URIs and absolute paths lead to unexpected behavior for\n      // many users. We can help them out when they expect file:// URIs to\n      // behave like it would if they were running a local HTTP server. See\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=885597.\n      var fileUriAbsPath = relativeSource.replace(/^file:\\/\\//, \"\");\n      if (url.scheme == \"file\"\n          && this._sources.has(fileUriAbsPath)) {\n        return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]\n      }\n\n      if ((!url.path || url.path == \"/\")\n          && this._sources.has(\"/\" + relativeSource)) {\n        return this.sourcesContent[this._sources.indexOf(\"/\" + relativeSource)];\n      }\n    }\n\n    // This function is used recursively from\n    // IndexedSourceMapConsumer.prototype.sourceContentFor. In that case, we\n    // don't want to throw if we can't find the source - we just want to\n    // return null, so we provide a flag to exit gracefully.\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + relativeSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number\n *     is 1-based.\n *   - column: The column number in the original source.  The column\n *     number is 0-based.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the generated source, or null.\n *     The column number is 0-based.\n */\nBasicSourceMapConsumer.prototype.generatedPositionFor =\n  function SourceMapConsumer_generatedPositionFor(aArgs) {\n    var source = util.getArg(aArgs, 'source');\n    source = this._findSourceIndex(source);\n    if (source < 0) {\n      return {\n        line: null,\n        column: null,\n        lastColumn: null\n      };\n    }\n\n    var needle = {\n      source: source,\n      originalLine: util.getArg(aArgs, 'line'),\n      originalColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._originalMappings,\n      \"originalLine\",\n      \"originalColumn\",\n      util.compareByOriginalPositions,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (mapping.source === needle.source) {\n        return {\n          line: util.getArg(mapping, 'generatedLine', null),\n          column: util.getArg(mapping, 'generatedColumn', null),\n          lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n        };\n      }\n    }\n\n    return {\n      line: null,\n      column: null,\n      lastColumn: null\n    };\n  };\n\nexports.BasicSourceMapConsumer = BasicSourceMapConsumer;\n\n/**\n * An IndexedSourceMapConsumer instance represents a parsed source map which\n * we can query for information. It differs from BasicSourceMapConsumer in\n * that it takes \"indexed\" source maps (i.e. ones with a \"sections\" field) as\n * input.\n *\n * The first parameter is a raw source map (either as a JSON string, or already\n * parsed to an object). According to the spec for indexed source maps, they\n * have the following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - file: Optional. The generated file this source map is associated with.\n *   - sections: A list of section definitions.\n *\n * Each value under the \"sections\" field has two fields:\n *   - offset: The offset into the original specified at which this section\n *       begins to apply, defined as an object with a \"line\" and \"column\"\n *       field.\n *   - map: A source map definition. This source map could also be indexed,\n *       but doesn't have to be.\n *\n * Instead of the \"map\" field, it's also possible to have a \"url\" field\n * specifying a URL to retrieve a source map from, but that's currently\n * unsupported.\n *\n * Here's an example source map, taken from the source map spec[0], but\n * modified to omit a section which uses the \"url\" field.\n *\n *  {\n *    version : 3,\n *    file: \"app.js\",\n *    sections: [{\n *      offset: {line:100, column:10},\n *      map: {\n *        version : 3,\n *        file: \"section.js\",\n *        sources: [\"foo.js\", \"bar.js\"],\n *        names: [\"src\", \"maps\", \"are\", \"fun\"],\n *        mappings: \"AAAA,E;;ABCDE;\"\n *      }\n *    }],\n *  }\n *\n * The second parameter, if given, is a string whose value is the URL\n * at which the source map was found.  This URL is used to compute the\n * sources array.\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit#heading=h.535es3xeprgt\n */\nfunction IndexedSourceMapConsumer(aSourceMap, aSourceMapURL) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = util.parseSourceMapInput(aSourceMap);\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sections = util.getArg(sourceMap, 'sections');\n\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n\n  var lastOffset = {\n    line: -1,\n    column: 0\n  };\n  this._sections = sections.map(function (s) {\n    if (s.url) {\n      // The url field will require support for asynchronicity.\n      // See https://github.com/mozilla/source-map/issues/16\n      throw new Error('Support for url field in sections not implemented.');\n    }\n    var offset = util.getArg(s, 'offset');\n    var offsetLine = util.getArg(offset, 'line');\n    var offsetColumn = util.getArg(offset, 'column');\n\n    if (offsetLine < lastOffset.line ||\n        (offsetLine === lastOffset.line && offsetColumn < lastOffset.column)) {\n      throw new Error('Section offsets must be ordered and non-overlapping.');\n    }\n    lastOffset = offset;\n\n    return {\n      generatedOffset: {\n        // The offset fields are 0-based, but we use 1-based indices when\n        // encoding/decoding from VLQ.\n        generatedLine: offsetLine + 1,\n        generatedColumn: offsetColumn + 1\n      },\n      consumer: new SourceMapConsumer(util.getArg(s, 'map'), aSourceMapURL)\n    }\n  });\n}\n\nIndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nIndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nIndexedSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(IndexedSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    var sources = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      for (var j = 0; j < this._sections[i].consumer.sources.length; j++) {\n        sources.push(this._sections[i].consumer.sources[j]);\n      }\n    }\n    return sources;\n  }\n});\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.  The line number\n *     is 1-based.\n *   - column: The column number in the generated source.  The column\n *     number is 0-based.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the original source, or null.  The\n *     column number is 0-based.\n *   - name: The original identifier, or null.\n */\nIndexedSourceMapConsumer.prototype.originalPositionFor =\n  function IndexedSourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    // Find the section containing the generated position we're trying to map\n    // to an original position.\n    var sectionIndex = binarySearch.search(needle, this._sections,\n      function(needle, section) {\n        var cmp = needle.generatedLine - section.generatedOffset.generatedLine;\n        if (cmp) {\n          return cmp;\n        }\n\n        return (needle.generatedColumn -\n                section.generatedOffset.generatedColumn);\n      });\n    var section = this._sections[sectionIndex];\n\n    if (!section) {\n      return {\n        source: null,\n        line: null,\n        column: null,\n        name: null\n      };\n    }\n\n    return section.consumer.originalPositionFor({\n      line: needle.generatedLine -\n        (section.generatedOffset.generatedLine - 1),\n      column: needle.generatedColumn -\n        (section.generatedOffset.generatedLine === needle.generatedLine\n         ? section.generatedOffset.generatedColumn - 1\n         : 0),\n      bias: aArgs.bias\n    });\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nIndexedSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function IndexedSourceMapConsumer_hasContentsOfAllSources() {\n    return this._sections.every(function (s) {\n      return s.consumer.hasContentsOfAllSources();\n    });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nIndexedSourceMapConsumer.prototype.sourceContentFor =\n  function IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      var content = section.consumer.sourceContentFor(aSource, true);\n      if (content) {\n        return content;\n      }\n    }\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + aSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number\n *     is 1-based.\n *   - column: The column number in the original source.  The column\n *     number is 0-based.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *     line number is 1-based. \n *   - column: The column number in the generated source, or null.\n *     The column number is 0-based.\n */\nIndexedSourceMapConsumer.prototype.generatedPositionFor =\n  function IndexedSourceMapConsumer_generatedPositionFor(aArgs) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      // Only consider this section if the requested source is in the list of\n      // sources of the consumer.\n      if (section.consumer._findSourceIndex(util.getArg(aArgs, 'source')) === -1) {\n        continue;\n      }\n      var generatedPosition = section.consumer.generatedPositionFor(aArgs);\n      if (generatedPosition) {\n        var ret = {\n          line: generatedPosition.line +\n            (section.generatedOffset.generatedLine - 1),\n          column: generatedPosition.column +\n            (section.generatedOffset.generatedLine === generatedPosition.line\n             ? section.generatedOffset.generatedColumn - 1\n             : 0)\n        };\n        return ret;\n      }\n    }\n\n    return {\n      line: null,\n      column: null\n    };\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nIndexedSourceMapConsumer.prototype._parseMappings =\n  function IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    this.__generatedMappings = [];\n    this.__originalMappings = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n      var sectionMappings = section.consumer._generatedMappings;\n      for (var j = 0; j < sectionMappings.length; j++) {\n        var mapping = sectionMappings[j];\n\n        var source = section.consumer._sources.at(mapping.source);\n        source = util.computeSourceURL(section.consumer.sourceRoot, source, this._sourceMapURL);\n        this._sources.add(source);\n        source = this._sources.indexOf(source);\n\n        var name = null;\n        if (mapping.name) {\n          name = section.consumer._names.at(mapping.name);\n          this._names.add(name);\n          name = this._names.indexOf(name);\n        }\n\n        // The mappings coming from the consumer for the section have\n        // generated positions relative to the start of the section, so we\n        // need to offset them to be relative to the start of the concatenated\n        // generated file.\n        var adjustedMapping = {\n          source: source,\n          generatedLine: mapping.generatedLine +\n            (section.generatedOffset.generatedLine - 1),\n          generatedColumn: mapping.generatedColumn +\n            (section.generatedOffset.generatedLine === mapping.generatedLine\n            ? section.generatedOffset.generatedColumn - 1\n            : 0),\n          originalLine: mapping.originalLine,\n          originalColumn: mapping.originalColumn,\n          name: name\n        };\n\n        this.__generatedMappings.push(adjustedMapping);\n        if (typeof adjustedMapping.originalLine === 'number') {\n          this.__originalMappings.push(adjustedMapping);\n        }\n      }\n    }\n\n    quickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);\n    quickSort(this.__originalMappings, util.compareByOriginalPositions);\n  };\n\nexports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar base64VLQ = require('./base64-vlq');\nvar util = require('./util');\nvar ArraySet = require('./array-set').ArraySet;\nvar MappingList = require('./mapping-list').MappingList;\n\n/**\n * An instance of the SourceMapGenerator represents a source map which is\n * being built incrementally. You may pass an object with the following\n * properties:\n *\n *   - file: The filename of the generated source.\n *   - sourceRoot: A root for all relative URLs in this source map.\n */\nfunction SourceMapGenerator(aArgs) {\n  if (!aArgs) {\n    aArgs = {};\n  }\n  this._file = util.getArg(aArgs, 'file', null);\n  this._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\n  this._skipValidation = util.getArg(aArgs, 'skipValidation', false);\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n  this._mappings = new MappingList();\n  this._sourcesContents = null;\n}\n\nSourceMapGenerator.prototype._version = 3;\n\n/**\n * Creates a new SourceMapGenerator based on a SourceMapConsumer\n *\n * @param aSourceMapConsumer The SourceMap.\n */\nSourceMapGenerator.fromSourceMap =\n  function SourceMapGenerator_fromSourceMap(aSourceMapConsumer) {\n    var sourceRoot = aSourceMapConsumer.sourceRoot;\n    var generator = new SourceMapGenerator({\n      file: aSourceMapConsumer.file,\n      sourceRoot: sourceRoot\n    });\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      var newMapping = {\n        generated: {\n          line: mapping.generatedLine,\n          column: mapping.generatedColumn\n        }\n      };\n\n      if (mapping.source != null) {\n        newMapping.source = mapping.source;\n        if (sourceRoot != null) {\n          newMapping.source = util.relative(sourceRoot, newMapping.source);\n        }\n\n        newMapping.original = {\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        };\n\n        if (mapping.name != null) {\n          newMapping.name = mapping.name;\n        }\n      }\n\n      generator.addMapping(newMapping);\n    });\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var sourceRelative = sourceFile;\n      if (sourceRoot !== null) {\n        sourceRelative = util.relative(sourceRoot, sourceFile);\n      }\n\n      if (!generator._sources.has(sourceRelative)) {\n        generator._sources.add(sourceRelative);\n      }\n\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        generator.setSourceContent(sourceFile, content);\n      }\n    });\n    return generator;\n  };\n\n/**\n * Add a single mapping from original source line and column to the generated\n * source's line and column for this source map being created. The mapping\n * object should have the following properties:\n *\n *   - generated: An object with the generated line and column positions.\n *   - original: An object with the original line and column positions.\n *   - source: The original source file (relative to the sourceRoot).\n *   - name: An optional original token name for this mapping.\n */\nSourceMapGenerator.prototype.addMapping =\n  function SourceMapGenerator_addMapping(aArgs) {\n    var generated = util.getArg(aArgs, 'generated');\n    var original = util.getArg(aArgs, 'original', null);\n    var source = util.getArg(aArgs, 'source', null);\n    var name = util.getArg(aArgs, 'name', null);\n\n    if (!this._skipValidation) {\n      this._validateMapping(generated, original, source, name);\n    }\n\n    if (source != null) {\n      source = String(source);\n      if (!this._sources.has(source)) {\n        this._sources.add(source);\n      }\n    }\n\n    if (name != null) {\n      name = String(name);\n      if (!this._names.has(name)) {\n        this._names.add(name);\n      }\n    }\n\n    this._mappings.add({\n      generatedLine: generated.line,\n      generatedColumn: generated.column,\n      originalLine: original != null && original.line,\n      originalColumn: original != null && original.column,\n      source: source,\n      name: name\n    });\n  };\n\n/**\n * Set the source content for a source file.\n */\nSourceMapGenerator.prototype.setSourceContent =\n  function SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\n    var source = aSourceFile;\n    if (this._sourceRoot != null) {\n      source = util.relative(this._sourceRoot, source);\n    }\n\n    if (aSourceContent != null) {\n      // Add the source content to the _sourcesContents map.\n      // Create a new _sourcesContents map if the property is null.\n      if (!this._sourcesContents) {\n        this._sourcesContents = Object.create(null);\n      }\n      this._sourcesContents[util.toSetString(source)] = aSourceContent;\n    } else if (this._sourcesContents) {\n      // Remove the source file from the _sourcesContents map.\n      // If the _sourcesContents map is empty, set the property to null.\n      delete this._sourcesContents[util.toSetString(source)];\n      if (Object.keys(this._sourcesContents).length === 0) {\n        this._sourcesContents = null;\n      }\n    }\n  };\n\n/**\n * Applies the mappings of a sub-source-map for a specific source file to the\n * source map being generated. Each mapping to the supplied source file is\n * rewritten using the supplied source map. Note: The resolution for the\n * resulting mappings is the minimium of this map and the supplied map.\n *\n * @param aSourceMapConsumer The source map to be applied.\n * @param aSourceFile Optional. The filename of the source file.\n *        If omitted, SourceMapConsumer's file property will be used.\n * @param aSourceMapPath Optional. The dirname of the path to the source map\n *        to be applied. If relative, it is relative to the SourceMapConsumer.\n *        This parameter is needed when the two source maps aren't in the same\n *        directory, and the source map to be applied contains relative source\n *        paths. If so, those relative source paths need to be rewritten\n *        relative to the SourceMapGenerator.\n */\nSourceMapGenerator.prototype.applySourceMap =\n  function SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\n    var sourceFile = aSourceFile;\n    // If aSourceFile is omitted, we will use the file property of the SourceMap\n    if (aSourceFile == null) {\n      if (aSourceMapConsumer.file == null) {\n        throw new Error(\n          'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\n          'or the source map\\'s \"file\" property. Both were omitted.'\n        );\n      }\n      sourceFile = aSourceMapConsumer.file;\n    }\n    var sourceRoot = this._sourceRoot;\n    // Make \"sourceFile\" relative if an absolute Url is passed.\n    if (sourceRoot != null) {\n      sourceFile = util.relative(sourceRoot, sourceFile);\n    }\n    // Applying the SourceMap can add and remove items from the sources and\n    // the names array.\n    var newSources = new ArraySet();\n    var newNames = new ArraySet();\n\n    // Find mappings for the \"sourceFile\"\n    this._mappings.unsortedForEach(function (mapping) {\n      if (mapping.source === sourceFile && mapping.originalLine != null) {\n        // Check if it can be mapped by the source map, then update the mapping.\n        var original = aSourceMapConsumer.originalPositionFor({\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        });\n        if (original.source != null) {\n          // Copy mapping\n          mapping.source = original.source;\n          if (aSourceMapPath != null) {\n            mapping.source = util.join(aSourceMapPath, mapping.source)\n          }\n          if (sourceRoot != null) {\n            mapping.source = util.relative(sourceRoot, mapping.source);\n          }\n          mapping.originalLine = original.line;\n          mapping.originalColumn = original.column;\n          if (original.name != null) {\n            mapping.name = original.name;\n          }\n        }\n      }\n\n      var source = mapping.source;\n      if (source != null && !newSources.has(source)) {\n        newSources.add(source);\n      }\n\n      var name = mapping.name;\n      if (name != null && !newNames.has(name)) {\n        newNames.add(name);\n      }\n\n    }, this);\n    this._sources = newSources;\n    this._names = newNames;\n\n    // Copy sourcesContents of applied map.\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aSourceMapPath != null) {\n          sourceFile = util.join(aSourceMapPath, sourceFile);\n        }\n        if (sourceRoot != null) {\n          sourceFile = util.relative(sourceRoot, sourceFile);\n        }\n        this.setSourceContent(sourceFile, content);\n      }\n    }, this);\n  };\n\n/**\n * A mapping can have one of the three levels of data:\n *\n *   1. Just the generated position.\n *   2. The Generated position, original position, and original source.\n *   3. Generated and original position, original source, as well as a name\n *      token.\n *\n * To maintain consistency, we validate that any new mapping being added falls\n * in to one of these categories.\n */\nSourceMapGenerator.prototype._validateMapping =\n  function SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\n                                              aName) {\n    // When aOriginal is truthy but has empty values for .line and .column,\n    // it is most likely a programmer error. In this case we throw a very\n    // specific error message to try to guide them the right way.\n    // For example: https://github.com/Polymer/polymer-bundler/pull/519\n    if (aOriginal && typeof aOriginal.line !== 'number' && typeof aOriginal.column !== 'number') {\n        throw new Error(\n            'original.line and original.column are not numbers -- you probably meant to omit ' +\n            'the original mapping entirely and only map the generated position. If so, pass ' +\n            'null for the original mapping instead of an object with empty or null values.'\n        );\n    }\n\n    if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n        && aGenerated.line > 0 && aGenerated.column >= 0\n        && !aOriginal && !aSource && !aName) {\n      // Case 1.\n      return;\n    }\n    else if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n             && aOriginal && 'line' in aOriginal && 'column' in aOriginal\n             && aGenerated.line > 0 && aGenerated.column >= 0\n             && aOriginal.line > 0 && aOriginal.column >= 0\n             && aSource) {\n      // Cases 2 and 3.\n      return;\n    }\n    else {\n      throw new Error('Invalid mapping: ' + JSON.stringify({\n        generated: aGenerated,\n        source: aSource,\n        original: aOriginal,\n        name: aName\n      }));\n    }\n  };\n\n/**\n * Serialize the accumulated mappings in to the stream of base 64 VLQs\n * specified by the source map format.\n */\nSourceMapGenerator.prototype._serializeMappings =\n  function SourceMapGenerator_serializeMappings() {\n    var previousGeneratedColumn = 0;\n    var previousGeneratedLine = 1;\n    var previousOriginalColumn = 0;\n    var previousOriginalLine = 0;\n    var previousName = 0;\n    var previousSource = 0;\n    var result = '';\n    var next;\n    var mapping;\n    var nameIdx;\n    var sourceIdx;\n\n    var mappings = this._mappings.toArray();\n    for (var i = 0, len = mappings.length; i < len; i++) {\n      mapping = mappings[i];\n      next = ''\n\n      if (mapping.generatedLine !== previousGeneratedLine) {\n        previousGeneratedColumn = 0;\n        while (mapping.generatedLine !== previousGeneratedLine) {\n          next += ';';\n          previousGeneratedLine++;\n        }\n      }\n      else {\n        if (i > 0) {\n          if (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\n            continue;\n          }\n          next += ',';\n        }\n      }\n\n      next += base64VLQ.encode(mapping.generatedColumn\n                                 - previousGeneratedColumn);\n      previousGeneratedColumn = mapping.generatedColumn;\n\n      if (mapping.source != null) {\n        sourceIdx = this._sources.indexOf(mapping.source);\n        next += base64VLQ.encode(sourceIdx - previousSource);\n        previousSource = sourceIdx;\n\n        // lines are stored 0-based in SourceMap spec version 3\n        next += base64VLQ.encode(mapping.originalLine - 1\n                                   - previousOriginalLine);\n        previousOriginalLine = mapping.originalLine - 1;\n\n        next += base64VLQ.encode(mapping.originalColumn\n                                   - previousOriginalColumn);\n        previousOriginalColumn = mapping.originalColumn;\n\n        if (mapping.name != null) {\n          nameIdx = this._names.indexOf(mapping.name);\n          next += base64VLQ.encode(nameIdx - previousName);\n          previousName = nameIdx;\n        }\n      }\n\n      result += next;\n    }\n\n    return result;\n  };\n\nSourceMapGenerator.prototype._generateSourcesContent =\n  function SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\n    return aSources.map(function (source) {\n      if (!this._sourcesContents) {\n        return null;\n      }\n      if (aSourceRoot != null) {\n        source = util.relative(aSourceRoot, source);\n      }\n      var key = util.toSetString(source);\n      return Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\n        ? this._sourcesContents[key]\n        : null;\n    }, this);\n  };\n\n/**\n * Externalize the source map.\n */\nSourceMapGenerator.prototype.toJSON =\n  function SourceMapGenerator_toJSON() {\n    var map = {\n      version: this._version,\n      sources: this._sources.toArray(),\n      names: this._names.toArray(),\n      mappings: this._serializeMappings()\n    };\n    if (this._file != null) {\n      map.file = this._file;\n    }\n    if (this._sourceRoot != null) {\n      map.sourceRoot = this._sourceRoot;\n    }\n    if (this._sourcesContents) {\n      map.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\n    }\n\n    return map;\n  };\n\n/**\n * Render the source map being generated to a string.\n */\nSourceMapGenerator.prototype.toString =\n  function SourceMapGenerator_toString() {\n    return JSON.stringify(this.toJSON());\n  };\n\nexports.SourceMapGenerator = SourceMapGenerator;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar SourceMapGenerator = require('./source-map-generator').SourceMapGenerator;\nvar util = require('./util');\n\n// Matches a Windows-style `\\r\\n` newline or a `\\n` newline used by all other\n// operating systems these days (capturing the result).\nvar REGEX_NEWLINE = /(\\r?\\n)/;\n\n// Newline character code for charCodeAt() comparisons\nvar NEWLINE_CODE = 10;\n\n// Private symbol for identifying `SourceNode`s when multiple versions of\n// the source-map library are loaded. This MUST NOT CHANGE across\n// versions!\nvar isSourceNode = \"$$$isSourceNode$$$\";\n\n/**\n * SourceNodes provide a way to abstract over interpolating/concatenating\n * snippets of generated JavaScript source code while maintaining the line and\n * column information associated with the original source code.\n *\n * @param aLine The original line number.\n * @param aColumn The original column number.\n * @param aSource The original source's filename.\n * @param aChunks Optional. An array of strings which are snippets of\n *        generated JS, or other SourceNodes.\n * @param aName The original identifier.\n */\nfunction SourceNode(aLine, aColumn, aSource, aChunks, aName) {\n  this.children = [];\n  this.sourceContents = {};\n  this.line = aLine == null ? null : aLine;\n  this.column = aColumn == null ? null : aColumn;\n  this.source = aSource == null ? null : aSource;\n  this.name = aName == null ? null : aName;\n  this[isSourceNode] = true;\n  if (aChunks != null) this.add(aChunks);\n}\n\n/**\n * Creates a SourceNode from generated code and a SourceMapConsumer.\n *\n * @param aGeneratedCode The generated code\n * @param aSourceMapConsumer The SourceMap for the generated code\n * @param aRelativePath Optional. The path that relative sources in the\n *        SourceMapConsumer should be relative to.\n */\nSourceNode.fromStringWithSourceMap =\n  function SourceNode_fromStringWithSourceMap(aGeneratedCode, aSourceMapConsumer, aRelativePath) {\n    // The SourceNode we want to fill with the generated code\n    // and the SourceMap\n    var node = new SourceNode();\n\n    // All even indices of this array are one line of the generated code,\n    // while all odd indices are the newlines between two adjacent lines\n    // (since `REGEX_NEWLINE` captures its match).\n    // Processed fragments are accessed by calling `shiftNextLine`.\n    var remainingLines = aGeneratedCode.split(REGEX_NEWLINE);\n    var remainingLinesIndex = 0;\n    var shiftNextLine = function() {\n      var lineContents = getNextLine();\n      // The last line of a file might not have a newline.\n      var newLine = getNextLine() || \"\";\n      return lineContents + newLine;\n\n      function getNextLine() {\n        return remainingLinesIndex < remainingLines.length ?\n            remainingLines[remainingLinesIndex++] : undefined;\n      }\n    };\n\n    // We need to remember the position of \"remainingLines\"\n    var lastGeneratedLine = 1, lastGeneratedColumn = 0;\n\n    // The generate SourceNodes we need a code range.\n    // To extract it current and last mapping is used.\n    // Here we store the last mapping.\n    var lastMapping = null;\n\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      if (lastMapping !== null) {\n        // We add the code from \"lastMapping\" to \"mapping\":\n        // First check if there is a new line in between.\n        if (lastGeneratedLine < mapping.generatedLine) {\n          // Associate first line with \"lastMapping\"\n          addMappingWithCode(lastMapping, shiftNextLine());\n          lastGeneratedLine++;\n          lastGeneratedColumn = 0;\n          // The remaining code is added without mapping\n        } else {\n          // There is no new line in between.\n          // Associate the code between \"lastGeneratedColumn\" and\n          // \"mapping.generatedColumn\" with \"lastMapping\"\n          var nextLine = remainingLines[remainingLinesIndex] || '';\n          var code = nextLine.substr(0, mapping.generatedColumn -\n                                        lastGeneratedColumn);\n          remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn -\n                                              lastGeneratedColumn);\n          lastGeneratedColumn = mapping.generatedColumn;\n          addMappingWithCode(lastMapping, code);\n          // No more remaining code, continue\n          lastMapping = mapping;\n          return;\n        }\n      }\n      // We add the generated code until the first mapping\n      // to the SourceNode without any mapping.\n      // Each line is added as separate string.\n      while (lastGeneratedLine < mapping.generatedLine) {\n        node.add(shiftNextLine());\n        lastGeneratedLine++;\n      }\n      if (lastGeneratedColumn < mapping.generatedColumn) {\n        var nextLine = remainingLines[remainingLinesIndex] || '';\n        node.add(nextLine.substr(0, mapping.generatedColumn));\n        remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn);\n        lastGeneratedColumn = mapping.generatedColumn;\n      }\n      lastMapping = mapping;\n    }, this);\n    // We have processed all mappings.\n    if (remainingLinesIndex < remainingLines.length) {\n      if (lastMapping) {\n        // Associate the remaining code in the current line with \"lastMapping\"\n        addMappingWithCode(lastMapping, shiftNextLine());\n      }\n      // and add the remaining lines without any mapping\n      node.add(remainingLines.splice(remainingLinesIndex).join(\"\"));\n    }\n\n    // Copy sourcesContent into SourceNode\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aRelativePath != null) {\n          sourceFile = util.join(aRelativePath, sourceFile);\n        }\n        node.setSourceContent(sourceFile, content);\n      }\n    });\n\n    return node;\n\n    function addMappingWithCode(mapping, code) {\n      if (mapping === null || mapping.source === undefined) {\n        node.add(code);\n      } else {\n        var source = aRelativePath\n          ? util.join(aRelativePath, mapping.source)\n          : mapping.source;\n        node.add(new SourceNode(mapping.originalLine,\n                                mapping.originalColumn,\n                                source,\n                                code,\n                                mapping.name));\n      }\n    }\n  };\n\n/**\n * Add a chunk of generated JS to this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.add = function SourceNode_add(aChunk) {\n  if (Array.isArray(aChunk)) {\n    aChunk.forEach(function (chunk) {\n      this.add(chunk);\n    }, this);\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    if (aChunk) {\n      this.children.push(aChunk);\n    }\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Add a chunk of generated JS to the beginning of this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.prepend = function SourceNode_prepend(aChunk) {\n  if (Array.isArray(aChunk)) {\n    for (var i = aChunk.length-1; i >= 0; i--) {\n      this.prepend(aChunk[i]);\n    }\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    this.children.unshift(aChunk);\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Walk over the tree of JS snippets in this node and its children. The\n * walking function is called once for each snippet of JS and is passed that\n * snippet and the its original associated source's line/column location.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walk = function SourceNode_walk(aFn) {\n  var chunk;\n  for (var i = 0, len = this.children.length; i < len; i++) {\n    chunk = this.children[i];\n    if (chunk[isSourceNode]) {\n      chunk.walk(aFn);\n    }\n    else {\n      if (chunk !== '') {\n        aFn(chunk, { source: this.source,\n                     line: this.line,\n                     column: this.column,\n                     name: this.name });\n      }\n    }\n  }\n};\n\n/**\n * Like `String.prototype.join` except for SourceNodes. Inserts `aStr` between\n * each of `this.children`.\n *\n * @param aSep The separator.\n */\nSourceNode.prototype.join = function SourceNode_join(aSep) {\n  var newChildren;\n  var i;\n  var len = this.children.length;\n  if (len > 0) {\n    newChildren = [];\n    for (i = 0; i < len-1; i++) {\n      newChildren.push(this.children[i]);\n      newChildren.push(aSep);\n    }\n    newChildren.push(this.children[i]);\n    this.children = newChildren;\n  }\n  return this;\n};\n\n/**\n * Call String.prototype.replace on the very right-most source snippet. Useful\n * for trimming whitespace from the end of a source node, etc.\n *\n * @param aPattern The pattern to replace.\n * @param aReplacement The thing to replace the pattern with.\n */\nSourceNode.prototype.replaceRight = function SourceNode_replaceRight(aPattern, aReplacement) {\n  var lastChild = this.children[this.children.length - 1];\n  if (lastChild[isSourceNode]) {\n    lastChild.replaceRight(aPattern, aReplacement);\n  }\n  else if (typeof lastChild === 'string') {\n    this.children[this.children.length - 1] = lastChild.replace(aPattern, aReplacement);\n  }\n  else {\n    this.children.push(''.replace(aPattern, aReplacement));\n  }\n  return this;\n};\n\n/**\n * Set the source content for a source file. This will be added to the SourceMapGenerator\n * in the sourcesContent field.\n *\n * @param aSourceFile The filename of the source file\n * @param aSourceContent The content of the source file\n */\nSourceNode.prototype.setSourceContent =\n  function SourceNode_setSourceContent(aSourceFile, aSourceContent) {\n    this.sourceContents[util.toSetString(aSourceFile)] = aSourceContent;\n  };\n\n/**\n * Walk over the tree of SourceNodes. The walking function is called for each\n * source file content and is passed the filename and source content.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walkSourceContents =\n  function SourceNode_walkSourceContents(aFn) {\n    for (var i = 0, len = this.children.length; i < len; i++) {\n      if (this.children[i][isSourceNode]) {\n        this.children[i].walkSourceContents(aFn);\n      }\n    }\n\n    var sources = Object.keys(this.sourceContents);\n    for (var i = 0, len = sources.length; i < len; i++) {\n      aFn(util.fromSetString(sources[i]), this.sourceContents[sources[i]]);\n    }\n  };\n\n/**\n * Return the string representation of this source node. Walks over the tree\n * and concatenates all the various snippets together to one string.\n */\nSourceNode.prototype.toString = function SourceNode_toString() {\n  var str = \"\";\n  this.walk(function (chunk) {\n    str += chunk;\n  });\n  return str;\n};\n\n/**\n * Returns the string representation of this source node along with a source\n * map.\n */\nSourceNode.prototype.toStringWithSourceMap = function SourceNode_toStringWithSourceMap(aArgs) {\n  var generated = {\n    code: \"\",\n    line: 1,\n    column: 0\n  };\n  var map = new SourceMapGenerator(aArgs);\n  var sourceMappingActive = false;\n  var lastOriginalSource = null;\n  var lastOriginalLine = null;\n  var lastOriginalColumn = null;\n  var lastOriginalName = null;\n  this.walk(function (chunk, original) {\n    generated.code += chunk;\n    if (original.source !== null\n        && original.line !== null\n        && original.column !== null) {\n      if(lastOriginalSource !== original.source\n         || lastOriginalLine !== original.line\n         || lastOriginalColumn !== original.column\n         || lastOriginalName !== original.name) {\n        map.addMapping({\n          source: original.source,\n          original: {\n            line: original.line,\n            column: original.column\n          },\n          generated: {\n            line: generated.line,\n            column: generated.column\n          },\n          name: original.name\n        });\n      }\n      lastOriginalSource = original.source;\n      lastOriginalLine = original.line;\n      lastOriginalColumn = original.column;\n      lastOriginalName = original.name;\n      sourceMappingActive = true;\n    } else if (sourceMappingActive) {\n      map.addMapping({\n        generated: {\n          line: generated.line,\n          column: generated.column\n        }\n      });\n      lastOriginalSource = null;\n      sourceMappingActive = false;\n    }\n    for (var idx = 0, length = chunk.length; idx < length; idx++) {\n      if (chunk.charCodeAt(idx) === NEWLINE_CODE) {\n        generated.line++;\n        generated.column = 0;\n        // Mappings end at eol\n        if (idx + 1 === length) {\n          lastOriginalSource = null;\n          sourceMappingActive = false;\n        } else if (sourceMappingActive) {\n          map.addMapping({\n            source: original.source,\n            original: {\n              line: original.line,\n              column: original.column\n            },\n            generated: {\n              line: generated.line,\n              column: generated.column\n            },\n            name: original.name\n          });\n        }\n      } else {\n        generated.column++;\n      }\n    }\n  });\n  this.walkSourceContents(function (sourceFile, sourceContent) {\n    map.setSourceContent(sourceFile, sourceContent);\n  });\n\n  return { code: generated.code, map: map };\n};\n\nexports.SourceNode = SourceNode;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n/**\n * This is a helper function for getting values from parameter/options\n * objects.\n *\n * @param args The object we are extracting values from\n * @param name The name of the property we are getting.\n * @param defaultValue An optional value to return if the property is missing\n * from the object. If this is not specified and the property is missing, an\n * error will be thrown.\n */\nfunction getArg(aArgs, aName, aDefaultValue) {\n  if (aName in aArgs) {\n    return aArgs[aName];\n  } else if (arguments.length === 3) {\n    return aDefaultValue;\n  } else {\n    throw new Error('\"' + aName + '\" is a required argument.');\n  }\n}\nexports.getArg = getArg;\n\nvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.-]*)(?::(\\d+))?(.*)$/;\nvar dataUrlRegexp = /^data:.+\\,.+$/;\n\nfunction urlParse(aUrl) {\n  var match = aUrl.match(urlRegexp);\n  if (!match) {\n    return null;\n  }\n  return {\n    scheme: match[1],\n    auth: match[2],\n    host: match[3],\n    port: match[4],\n    path: match[5]\n  };\n}\nexports.urlParse = urlParse;\n\nfunction urlGenerate(aParsedUrl) {\n  var url = '';\n  if (aParsedUrl.scheme) {\n    url += aParsedUrl.scheme + ':';\n  }\n  url += '//';\n  if (aParsedUrl.auth) {\n    url += aParsedUrl.auth + '@';\n  }\n  if (aParsedUrl.host) {\n    url += aParsedUrl.host;\n  }\n  if (aParsedUrl.port) {\n    url += \":\" + aParsedUrl.port\n  }\n  if (aParsedUrl.path) {\n    url += aParsedUrl.path;\n  }\n  return url;\n}\nexports.urlGenerate = urlGenerate;\n\n/**\n * Normalizes a path, or the path portion of a URL:\n *\n * - Replaces consecutive slashes with one slash.\n * - Removes unnecessary '.' parts.\n * - Removes unnecessary '<dir>/..' parts.\n *\n * Based on code in the Node.js 'path' core module.\n *\n * @param aPath The path or url to normalize.\n */\nfunction normalize(aPath) {\n  var path = aPath;\n  var url = urlParse(aPath);\n  if (url) {\n    if (!url.path) {\n      return aPath;\n    }\n    path = url.path;\n  }\n  var isAbsolute = exports.isAbsolute(path);\n\n  var parts = path.split(/\\/+/);\n  for (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\n    part = parts[i];\n    if (part === '.') {\n      parts.splice(i, 1);\n    } else if (part === '..') {\n      up++;\n    } else if (up > 0) {\n      if (part === '') {\n        // The first part is blank if the path is absolute. Trying to go\n        // above the root is a no-op. Therefore we can remove all '..' parts\n        // directly after the root.\n        parts.splice(i + 1, up);\n        up = 0;\n      } else {\n        parts.splice(i, 2);\n        up--;\n      }\n    }\n  }\n  path = parts.join('/');\n\n  if (path === '') {\n    path = isAbsolute ? '/' : '.';\n  }\n\n  if (url) {\n    url.path = path;\n    return urlGenerate(url);\n  }\n  return path;\n}\nexports.normalize = normalize;\n\n/**\n * Joins two paths/URLs.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be joined with the root.\n *\n * - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\n *   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\n *   first.\n * - Otherwise aPath is a path. If aRoot is a URL, then its path portion\n *   is updated with the result and aRoot is returned. Otherwise the result\n *   is returned.\n *   - If aPath is absolute, the result is aPath.\n *   - Otherwise the two paths are joined with a slash.\n * - Joining for example 'http://' and 'www.example.com' is also supported.\n */\nfunction join(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n  if (aPath === \"\") {\n    aPath = \".\";\n  }\n  var aPathUrl = urlParse(aPath);\n  var aRootUrl = urlParse(aRoot);\n  if (aRootUrl) {\n    aRoot = aRootUrl.path || '/';\n  }\n\n  // `join(foo, '//www.example.org')`\n  if (aPathUrl && !aPathUrl.scheme) {\n    if (aRootUrl) {\n      aPathUrl.scheme = aRootUrl.scheme;\n    }\n    return urlGenerate(aPathUrl);\n  }\n\n  if (aPathUrl || aPath.match(dataUrlRegexp)) {\n    return aPath;\n  }\n\n  // `join('http://', 'www.example.com')`\n  if (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\n    aRootUrl.host = aPath;\n    return urlGenerate(aRootUrl);\n  }\n\n  var joined = aPath.charAt(0) === '/'\n    ? aPath\n    : normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\n\n  if (aRootUrl) {\n    aRootUrl.path = joined;\n    return urlGenerate(aRootUrl);\n  }\n  return joined;\n}\nexports.join = join;\n\nexports.isAbsolute = function (aPath) {\n  return aPath.charAt(0) === '/' || urlRegexp.test(aPath);\n};\n\n/**\n * Make a path relative to a URL or another path.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be made relative to aRoot.\n */\nfunction relative(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n\n  aRoot = aRoot.replace(/\\/$/, '');\n\n  // It is possible for the path to be above the root. In this case, simply\n  // checking whether the root is a prefix of the path won't work. Instead, we\n  // need to remove components from the root one by one, until either we find\n  // a prefix that fits, or we run out of components to remove.\n  var level = 0;\n  while (aPath.indexOf(aRoot + '/') !== 0) {\n    var index = aRoot.lastIndexOf(\"/\");\n    if (index < 0) {\n      return aPath;\n    }\n\n    // If the only part of the root that is left is the scheme (i.e. http://,\n    // file:///, etc.), one or more slashes (/), or simply nothing at all, we\n    // have exhausted all components, so the path is not relative to the root.\n    aRoot = aRoot.slice(0, index);\n    if (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\n      return aPath;\n    }\n\n    ++level;\n  }\n\n  // Make sure we add a \"../\" for each component we removed from the root.\n  return Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\n}\nexports.relative = relative;\n\nvar supportsNullProto = (function () {\n  var obj = Object.create(null);\n  return !('__proto__' in obj);\n}());\n\nfunction identity (s) {\n  return s;\n}\n\n/**\n * Because behavior goes wacky when you set `__proto__` on objects, we\n * have to prefix all the strings in our set with an arbitrary character.\n *\n * See https://github.com/mozilla/source-map/pull/31 and\n * https://github.com/mozilla/source-map/issues/30\n *\n * @param String aStr\n */\nfunction toSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return '$' + aStr;\n  }\n\n  return aStr;\n}\nexports.toSetString = supportsNullProto ? identity : toSetString;\n\nfunction fromSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return aStr.slice(1);\n  }\n\n  return aStr;\n}\nexports.fromSetString = supportsNullProto ? identity : fromSetString;\n\nfunction isProtoString(s) {\n  if (!s) {\n    return false;\n  }\n\n  var length = s.length;\n\n  if (length < 9 /* \"__proto__\".length */) {\n    return false;\n  }\n\n  if (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 2) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 3) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 4) !== 116 /* 't' */ ||\n      s.charCodeAt(length - 5) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 6) !== 114 /* 'r' */ ||\n      s.charCodeAt(length - 7) !== 112 /* 'p' */ ||\n      s.charCodeAt(length - 8) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 9) !== 95  /* '_' */) {\n    return false;\n  }\n\n  for (var i = length - 10; i >= 0; i--) {\n    if (s.charCodeAt(i) !== 36 /* '$' */) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Comparator between two mappings where the original positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same original source/line/column, but different generated\n * line and column the same. Useful when searching for a mapping with a\n * stubbed out mapping.\n */\nfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\n  var cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0 || onlyCompareOriginal) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByOriginalPositions = compareByOriginalPositions;\n\n/**\n * Comparator between two mappings with deflated source and name indices where\n * the generated positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same generated line and column, but different\n * source/name/original line and column the same. Useful when searching for a\n * mapping with a stubbed out mapping.\n */\nfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0 || onlyCompareGenerated) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\n\nfunction strcmp(aStr1, aStr2) {\n  if (aStr1 === aStr2) {\n    return 0;\n  }\n\n  if (aStr1 === null) {\n    return 1; // aStr2 !== null\n  }\n\n  if (aStr2 === null) {\n    return -1; // aStr1 !== null\n  }\n\n  if (aStr1 > aStr2) {\n    return 1;\n  }\n\n  return -1;\n}\n\n/**\n * Comparator between two mappings with inflated source and name strings where\n * the generated positions are compared.\n */\nfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\n\n/**\n * Strip any JSON XSSI avoidance prefix from the string (as documented\n * in the source maps specification), and then parse the string as\n * JSON.\n */\nfunction parseSourceMapInput(str) {\n  return JSON.parse(str.replace(/^\\)]}'[^\\n]*\\n/, ''));\n}\nexports.parseSourceMapInput = parseSourceMapInput;\n\n/**\n * Compute the URL of a source given the the source root, the source's\n * URL, and the source map's URL.\n */\nfunction computeSourceURL(sourceRoot, sourceURL, sourceMapURL) {\n  sourceURL = sourceURL || '';\n\n  if (sourceRoot) {\n    // This follows what Chrome does.\n    if (sourceRoot[sourceRoot.length - 1] !== '/' && sourceURL[0] !== '/') {\n      sourceRoot += '/';\n    }\n    // The spec says:\n    //   Line 4: An optional source root, useful for relocating source\n    //   files on a server or removing repeated values in the\n    //   sources entry.  This value is prepended to the individual\n    //   entries in the source field.\n    sourceURL = sourceRoot + sourceURL;\n  }\n\n  // Historically, SourceMapConsumer did not take the sourceMapURL as\n  // a parameter.  This mode is still somewhat supported, which is why\n  // this code block is conditional.  However, it's preferable to pass\n  // the source map URL to SourceMapConsumer, so that this function\n  // can implement the source URL resolution algorithm as outlined in\n  // the spec.  This block is basically the equivalent of:\n  //    new URL(sourceURL, sourceMapURL).toString()\n  // ... except it avoids using URL, which wasn't available in the\n  // older releases of node still supported by this library.\n  //\n  // The spec says:\n  //   If the sources are not absolute URLs after prepending of the\n  //   sourceRoot, the sources are resolved relative to the\n  //   SourceMap (like resolving script src in a html document).\n  if (sourceMapURL) {\n    var parsed = urlParse(sourceMapURL);\n    if (!parsed) {\n      throw new Error(\"sourceMapURL could not be parsed\");\n    }\n    if (parsed.path) {\n      // Strip the last path component, but keep the \"/\".\n      var index = parsed.path.lastIndexOf('/');\n      if (index >= 0) {\n        parsed.path = parsed.path.substring(0, index + 1);\n      }\n    }\n    sourceURL = join(urlGenerate(parsed), sourceURL);\n  }\n\n  return normalize(sourceURL);\n}\nexports.computeSourceURL = computeSourceURL;\n","/*\n * Copyright 2009-2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE.txt or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\nexports.SourceMapGenerator = require('./lib/source-map-generator').SourceMapGenerator;\nexports.SourceMapConsumer = require('./lib/source-map-consumer').SourceMapConsumer;\nexports.SourceNode = require('./lib/source-node').SourceNode;\n","//filter will reemit the data if cb(err,pass) pass is truthy\n\n// reduce is more tricky\n// maybe we want to group the reductions or emit progress updates occasionally\n// the most basic reduce just emits one 'data' event after it has recieved 'end'\n\n\nvar through = require('through')\nvar Decoder = require('string_decoder').StringDecoder\n\nmodule.exports = split\n\n//TODO pass in a function to map across the lines.\n\nfunction split (matcher, mapper, options) {\n  var decoder = new Decoder()\n  var soFar = ''\n  var maxLength = options && options.maxLength;\n  var trailing = options && options.trailing === false ? false : true\n  if('function' === typeof matcher)\n    mapper = matcher, matcher = null\n  if (!matcher)\n    matcher = /\\r?\\n/\n\n  function emit(stream, piece) {\n    if(mapper) {\n      try {\n        piece = mapper(piece)\n      }\n      catch (err) {\n        return stream.emit('error', err)\n      }\n      if('undefined' !== typeof piece)\n        stream.queue(piece)\n    }\n    else\n      stream.queue(piece)\n  }\n\n  function next (stream, buffer) {\n    var pieces = ((soFar != null ? soFar : '') + buffer).split(matcher)\n    soFar = pieces.pop()\n\n    if (maxLength && soFar.length > maxLength)\n      return stream.emit('error', new Error('maximum buffer reached'))\n\n    for (var i = 0; i < pieces.length; i++) {\n      var piece = pieces[i]\n      emit(stream, piece)\n    }\n  }\n\n  return through(function (b) {\n    next(this, decoder.write(b))\n  },\n  function () {\n    if(decoder.end)\n      next(this, decoder.end())\n    if(trailing && soFar != null)\n      emit(this, soFar)\n    this.queue(null)\n  })\n}\n","var duplexer = require('duplexer')\nvar through = require('through')\n\nmodule.exports = function () {\n  var streams\n\n  if(arguments.length == 1 && Array.isArray(arguments[0])) {\n    streams = arguments[0]\n  } else {\n    streams = [].slice.call(arguments)\n  }\n\n  if(streams.length == 0)\n    return through()\n  else if(streams.length == 1)\n    return streams[0]\n\n  var first = streams[0]\n    , last = streams[streams.length - 1]\n    , thepipe = duplexer(first, last)\n\n  //pipe all the streams together\n\n  function recurse (streams) {\n    if(streams.length < 2)\n      return\n    streams[0].pipe(streams[1])\n    recurse(streams.slice(1))\n  }\n\n  recurse(streams)\n\n  function onerror () {\n    var args = [].slice.call(arguments)\n    args.unshift('error')\n    thepipe.emit.apply(thepipe, args)\n  }\n\n  //es.duplex already reemits the error from the first and last stream.\n  //add a listener for the inner streams in the pipeline.\n  for(var i = 1; i < streams.length - 1; i ++)\n    streams[i].on('error', onerror)\n\n  return thepipe\n}\n","'use strict';\nconst os = require('os');\nconst tty = require('tty');\nconst hasFlag = require('has-flag');\n\nconst {env} = process;\n\nlet flagForceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false') ||\n\thasFlag('color=never')) {\n\tflagForceColor = 0;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tflagForceColor = 1;\n}\n\nfunction envForceColor() {\n\tif ('FORCE_COLOR' in env) {\n\t\tif (env.FORCE_COLOR === 'true') {\n\t\t\treturn 1;\n\t\t}\n\n\t\tif (env.FORCE_COLOR === 'false') {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn env.FORCE_COLOR.length === 0 ? 1 : Math.min(Number.parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(haveStream, {streamIsTTY, sniffFlags = true} = {}) {\n\tconst noFlagForceColor = envForceColor();\n\tif (noFlagForceColor !== undefined) {\n\t\tflagForceColor = noFlagForceColor;\n\t}\n\n\tconst forceColor = sniffFlags ? flagForceColor : noFlagForceColor;\n\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (sniffFlags) {\n\t\tif (hasFlag('color=16m') ||\n\t\t\thasFlag('color=full') ||\n\t\t\thasFlag('color=truecolor')) {\n\t\t\treturn 3;\n\t\t}\n\n\t\tif (hasFlag('color=256')) {\n\t\t\treturn 2;\n\t\t}\n\t}\n\n\tif (haveStream && !streamIsTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Windows 10 build 10586 is the first Windows release that supports 256 colors.\n\t\t// Windows 10 build 14931 is the first release that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI', 'GITHUB_ACTIONS', 'BUILDKITE', 'DRONE'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = Number.parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream, options = {}) {\n\tconst level = supportsColor(stream, {\n\t\tstreamIsTTY: stream && stream.isTTY,\n\t\t...options\n\t});\n\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: getSupportLevel({isTTY: tty.isatty(1)}),\n\tstderr: getSupportLevel({isTTY: tty.isatty(2)})\n};\n","var Stream = require('stream')\n\n// through\n//\n// a stream that does nothing but re-emit the input.\n// useful for aggregating a series of changing but not ending streams into one stream)\n\nexports = module.exports = through\nthrough.through = through\n\n//create a readable writable stream.\n\nfunction through (write, end, opts) {\n  write = write || function (data) { this.queue(data) }\n  end = end || function () { this.queue(null) }\n\n  var ended = false, destroyed = false, buffer = [], _ended = false\n  var stream = new Stream()\n  stream.readable = stream.writable = true\n  stream.paused = false\n\n//  stream.autoPause   = !(opts && opts.autoPause   === false)\n  stream.autoDestroy = !(opts && opts.autoDestroy === false)\n\n  stream.write = function (data) {\n    write.call(this, data)\n    return !stream.paused\n  }\n\n  function drain() {\n    while(buffer.length && !stream.paused) {\n      var data = buffer.shift()\n      if(null === data)\n        return stream.emit('end')\n      else\n        stream.emit('data', data)\n    }\n  }\n\n  stream.queue = stream.push = function (data) {\n//    console.error(ended)\n    if(_ended) return stream\n    if(data === null) _ended = true\n    buffer.push(data)\n    drain()\n    return stream\n  }\n\n  //this will be registered as the first 'end' listener\n  //must call destroy next tick, to make sure we're after any\n  //stream piped from here.\n  //this is only a problem if end is not emitted synchronously.\n  //a nicer way to do this is to make sure this is the last listener for 'end'\n\n  stream.on('end', function () {\n    stream.readable = false\n    if(!stream.writable && stream.autoDestroy)\n      process.nextTick(function () {\n        stream.destroy()\n      })\n  })\n\n  function _end () {\n    stream.writable = false\n    end.call(stream)\n    if(!stream.readable && stream.autoDestroy)\n      stream.destroy()\n  }\n\n  stream.end = function (data) {\n    if(ended) return\n    ended = true\n    if(arguments.length) stream.write(data)\n    _end() // will emit or queue\n    return stream\n  }\n\n  stream.destroy = function () {\n    if(destroyed) return\n    destroyed = true\n    ended = true\n    buffer.length = 0\n    stream.writable = stream.readable = false\n    stream.emit('close')\n    return stream\n  }\n\n  stream.pause = function () {\n    if(stream.paused) return\n    stream.paused = true\n    return stream\n  }\n\n  stream.resume = function () {\n    if(stream.paused) {\n      stream.paused = false\n      stream.emit('resume')\n    }\n    drain()\n    //may have become paused again,\n    //as drain emits 'data'.\n    if(!stream.paused)\n      stream.emit('drain')\n    return stream\n  }\n  return stream\n}\n\n","'use strict'\n\nvar nextTick = nextTickArgs\nprocess.nextTick(upgrade, 42) // pass 42 and see if upgrade is called with it\n\nmodule.exports = thunky\n\nfunction thunky (fn) {\n  var state = run\n  return thunk\n\n  function thunk (callback) {\n    state(callback || noop)\n  }\n\n  function run (callback) {\n    var stack = [callback]\n    state = wait\n    fn(done)\n\n    function wait (callback) {\n      stack.push(callback)\n    }\n\n    function done (err) {\n      var args = arguments\n      state = isError(err) ? run : finished\n      while (stack.length) finished(stack.shift())\n\n      function finished (callback) {\n        nextTick(apply, callback, args)\n      }\n    }\n  }\n}\n\nfunction isError (err) { // inlined from util so this works in the browser\n  return Object.prototype.toString.call(err) === '[object Error]'\n}\n\nfunction noop () {}\n\nfunction apply (callback, args) {\n  callback.apply(null, args)\n}\n\nfunction upgrade (val) {\n  if (val === 42) nextTick = process.nextTick\n}\n\nfunction nextTickArgs (fn, a, b) {\n  process.nextTick(function () {\n    fn(a, b)\n  })\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FfmpegProcess = void 0;\nexports.sleep = sleep;\nexports.fetchFffmpeg = fetchFffmpeg;\nexports.safeKillFFmpeg = safeKillFFmpeg;\n// Adapted from https://github.com/Sunoo/homebridge-camera-ffmpeg/blob/master/src/ffmpeg.ts\nconst child_process_1 = __importStar(require(\"child_process\"));\nconst os_1 = __importDefault(require(\"os\"));\nconst fs_1 = __importDefault(require(\"fs\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst readline_1 = __importDefault(require(\"readline\"));\nconst https_1 = __importDefault(require(\"https\"));\nconst requestOptions = {\n    timeout: 2000,\n    rejectUnauthorized: false,\n};\nconst url = \"https://github.com/slyoldfox/ffmpeg-for-bticino/releases/download/v2024.5.1/ffmpeg-\";\nfunction get(url, writeStream, callback) {\n    https_1.default.get(url, requestOptions, (res) => {\n        // if any other status codes are returned, those needed to be added here\n        if (res.statusCode === 301 || res.statusCode === 302) {\n            return get(res.headers.location, writeStream, callback);\n        }\n        console.log(\"[FFMPEG] File size is: \" + res.headers[\"content-length\"]);\n        res.pipe(writeStream);\n        let filesize = Number(res.headers[\"content-length\"]);\n        let fetched = 0;\n        let lastReport = new Date();\n        res.on(\"data\", (chunk) => {\n            fetched += chunk.length;\n            if (new Date().getTime() - lastReport.getTime() > 500) {\n                let pct = Math.round(fetched / filesize * 100);\n                console.log(`[FFMPEG] Downloaded ${fetched}/${filesize} (${pct}%)`);\n                lastReport = new Date();\n            }\n        });\n        res.on(\"end\", () => {\n            writeStream.close(() => {\n                callback();\n            });\n            writeStream.end(() => {\n                console.log(\"[FFMPEG] Download ended.\");\n            });\n        });\n    });\n}\nfunction checkAndFixPermissions(ffmpeg) {\n    const perms = fs_1.default.constants.S_IROTH | fs_1.default.constants.S_IXOTH | fs_1.default.constants.S_IRUSR | fs_1.default.constants.S_IXUSR | fs_1.default.constants.S_IRGRP | fs_1.default.constants.S_IXGRP;\n    try {\n        fs_1.default.accessSync(ffmpeg, fs_1.default.constants.R_OK | fs_1.default.constants.X_OK);\n    }\n    catch (e) {\n        fs_1.default.chmodSync(ffmpeg, perms);\n    }\n}\nfunction checkCorrupted(ffmpeg) {\n    try {\n        const stat = fs_1.default.statSync(ffmpeg);\n        if (stat.size == 0) {\n            fs_1.default.rmSync(ffmpeg);\n        }\n        else {\n            const response = child_process_1.default.execSync(ffmpeg + \" -version\").toString();\n            console.log(`[FFMPEG] valid binary file at: ${ffmpeg}`);\n        }\n    }\n    catch (e) {\n        console.error(\"[FFMPEG] binary file corrupt? Removing it. Error: \" + e);\n        fs_1.default.rmSync(ffmpeg);\n    }\n}\nasync function sleep(ms) {\n    await new Promise(resolve => setTimeout(resolve, ms));\n}\nfunction fetchFffmpeg(pathName) {\n    const platform_arch = process.platform + '-' + process.arch;\n    const ffmpeg = path_1.default.join(pathName, \"ffmpeg\");\n    if (fs_1.default.existsSync(ffmpeg)) {\n        checkAndFixPermissions(ffmpeg);\n        checkCorrupted(ffmpeg);\n    }\n    if (!fs_1.default.existsSync(ffmpeg)) {\n        console.info(`Could not find ffmpeg at ${ffmpeg}, installing ...`);\n        const download_url = url + platform_arch;\n        let writeStream = fs_1.default.createWriteStream(ffmpeg);\n        switch (platform_arch) {\n            case \"darwin-x64\":\n            case \"linux-x64\":\n            case \"linux-arm\": //BTicino\n                get(download_url, writeStream, () => {\n                    checkAndFixPermissions(ffmpeg);\n                    checkCorrupted(ffmpeg);\n                });\n                break;\n            default:\n                console.error(`Unsupported platform, install your own 'ffmpeg' binary at this path: ${ffmpeg}`);\n        }\n    }\n    return ffmpeg;\n}\nasync function safeKillFFmpeg(cp) {\n    if (!cp)\n        return;\n    if (cp.exitCode != null)\n        return;\n    await new Promise(async (resolve) => {\n        cp.on('exit', resolve);\n        // this will allow ffmpeg to send rtsp TEARDOWN etc\n        try {\n            cp.stdin.on('error', () => { });\n            cp.stdin.write('q\\n');\n        }\n        catch (e) {\n        }\n        await sleep(2000);\n        for (const f of cp.stdio) {\n            try {\n                f?.destroy();\n            }\n            catch (e) {\n            }\n        }\n        cp.kill();\n        await sleep(2000);\n        cp.kill('SIGKILL');\n    });\n}\nclass FfmpegProcess {\n    constructor(cameraName, sessionId, videoProcessor, ffmpegArgs, log, debug = false, delegate, callback) {\n        log.debug('Stream command: ' + videoProcessor + ' ' + ffmpegArgs, cameraName, debug);\n        let started = false;\n        const startTime = Date.now();\n        this.process = (0, child_process_1.spawn)(videoProcessor, ffmpegArgs.split(/\\s+/), { env: process.env });\n        this.stdin = this.process.stdin;\n        this.process.stdout.on('data', (data) => {\n            const progress = this.parseProgress(data);\n            if (progress) {\n                if (!started && progress.frame > 0) {\n                    started = true;\n                    const runtime = (Date.now() - startTime) / 1000;\n                    const message = 'Getting the first frames took ' + runtime + ' seconds.';\n                    if (runtime < 5) {\n                        log.debug(message, cameraName, debug);\n                    }\n                    else if (runtime < 22) {\n                        log.warn(message, cameraName);\n                    }\n                    else {\n                        log.error(message, cameraName);\n                    }\n                }\n            }\n        });\n        const stderr = readline_1.default.createInterface({\n            input: this.process.stderr,\n            terminal: false\n        });\n        stderr.on('line', (line) => {\n            if (callback) {\n                callback();\n                callback = undefined;\n            }\n            if (debug && line.match(/\\[(panic|fatal|error)\\]/)) { // For now only write anything out when debug is set\n                log.error(line, cameraName);\n            }\n            else if (debug) {\n                log.debug(line, cameraName, true);\n            }\n        });\n        this.process.on('error', (error) => {\n            log.error('FFmpeg process creation failed: ' + error.message, cameraName);\n            if (callback) {\n                callback(new Error('FFmpeg process creation failed'));\n            }\n            delegate.stopStream(sessionId);\n        });\n        this.process.on('exit', (code, signal) => {\n            if (this.killTimeout) {\n                clearTimeout(this.killTimeout);\n            }\n            const message = 'FFmpeg exited with code: ' + code + ' and signal: ' + signal;\n            if (this.killTimeout && code === 0) {\n                log.debug(message + ' (Expected)', cameraName, debug);\n            }\n            else if (code == null || code === 255) {\n                if (this.process.killed) {\n                    log.debug(message + ' (Forced)', cameraName, debug);\n                }\n                else {\n                    log.error(message + ' (Unexpected)', cameraName);\n                }\n            }\n            else {\n                log.error(message + ' (Error)', cameraName);\n                delegate.stopStream(sessionId);\n                if (!started && callback) {\n                    callback(new Error(message));\n                }\n                else {\n                    delegate.controller.forceStopStreamingSession(sessionId);\n                }\n            }\n        });\n    }\n    parseProgress(data) {\n        const input = data.toString();\n        if (input.indexOf('frame=') == 0) {\n            try {\n                const progress = new Map();\n                input.split(/\\r?\\n/).forEach((line) => {\n                    const split = line.split('=', 2);\n                    progress.set(split[0], split[1]);\n                });\n                return {\n                    frame: parseInt(progress.get('frame')),\n                    fps: parseFloat(progress.get('fps')),\n                    stream_q: parseFloat(progress.get('stream_0_0_q')),\n                    bitrate: parseFloat(progress.get('bitrate')),\n                    total_size: parseInt(progress.get('total_size')),\n                    out_time_us: parseInt(progress.get('out_time_us')),\n                    out_time: progress.get('out_time').trim(),\n                    dup_frames: parseInt(progress.get('dup_frames')),\n                    drop_frames: parseInt(progress.get('drop_frames')),\n                    speed: parseFloat(progress.get('speed')),\n                    progress: progress.get('progress').trim()\n                };\n            }\n            catch {\n                return undefined;\n            }\n        }\n        else {\n            return undefined;\n        }\n    }\n    stop() {\n        this.process.stdin.write('q' + os_1.default.EOL);\n        this.killTimeout = setTimeout(() => {\n            this.process.kill('SIGKILL');\n        }, 2 * 1000);\n    }\n}\nexports.FfmpegProcess = FfmpegProcess;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RecordingDelegate = void 0;\nconst hap_nodejs_1 = require(\"hap-nodejs\");\nconst homekit_logger_1 = require(\"./homekit-logger\");\nconst events_1 = require(\"events\");\nconst net_1 = require(\"net\");\nconst child_process_1 = require(\"child_process\");\nconst assert_1 = __importDefault(require(\"assert\"));\nconst ffmpeg_1 = require(\"./ffmpeg\");\nclass MP4StreamingServer {\n    constructor(debugMode, ffmpegPath, ffmpegInput, audioOutputArgs, videoOutputArgs) {\n        /**\n         * This can be configured to output ffmpeg debug output!\n         */\n        this.debugMode = false;\n        this.destroyed = false;\n        this.debugMode = debugMode;\n        this.connectPromise = new Promise(resolve => this.connectResolve = resolve);\n        this.server = (0, net_1.createServer)(this.handleConnection.bind(this));\n        this.ffmpegPath = ffmpegPath;\n        this.args = [];\n        this.args.push(...ffmpegInput);\n        this.args.push(...audioOutputArgs);\n        this.args.push(\"-f\", \"mp4\");\n        this.args.push(...videoOutputArgs);\n        this.args.push(\"-fflags\", \"+genpts\", \"-reset_timestamps\", \"1\");\n        this.args.push(\n        //\"-movflags\", \"frag_keyframe+empty_moov+default_base_moof\",\n        \"-movflags\", \"frag_keyframe+empty_moov+default_base_moof+skip_sidx+skip_trailer\");\n    }\n    async start() {\n        const promise = (0, events_1.once)(this.server, \"listening\");\n        this.server.listen(); // listen on random port\n        await promise;\n        if (this.destroyed) {\n            return;\n        }\n        const port = this.server.address().port;\n        this.args.push(\"tcp://127.0.0.1:\" + port);\n        console.log(this.ffmpegPath + \" \" + this.args.join(\" \"));\n        this.childProcess = (0, child_process_1.spawn)(this.ffmpegPath, this.args, { env: process.env, stdio: this.debugMode ? \"pipe\" : \"ignore\" });\n        if (!this.childProcess) {\n            console.error(\"ChildProcess is undefined directly after the init!\");\n        }\n        if (this.debugMode) {\n            this.childProcess.stdout?.on(\"data\", data => console.log(data.toString()));\n            this.childProcess.stderr?.on(\"data\", data => console.log(data.toString()));\n        }\n    }\n    destroy() {\n        (0, ffmpeg_1.safeKillFFmpeg)(this.childProcess);\n        this.socket?.destroy();\n        //this.childProcess?.kill();\n        this.socket = undefined;\n        this.childProcess = undefined;\n        this.destroyed = true;\n    }\n    handleConnection(socket) {\n        this.server.close(); // don't accept any further clients\n        this.socket = socket;\n        this.connectResolve?.();\n    }\n    /**\n     * Generator for `MP4Atom`s.\n     * Throws error to signal EOF when socket is closed.\n     */\n    async *generator() {\n        await this.connectPromise;\n        if (!this.socket || !this.childProcess) {\n            console.log(\"Socket undefined \" + !!this.socket + \" childProcess undefined \" + !!this.childProcess);\n            throw new Error(\"Unexpected state!\");\n        }\n        while (true) {\n            const header = await this.read(8);\n            const length = header.readInt32BE(0) - 8;\n            const type = header.slice(4).toString();\n            const data = await this.read(length);\n            yield {\n                header: header,\n                length: length,\n                type: type,\n                data: data,\n            };\n        }\n    }\n    async read(length) {\n        if (!this.socket) {\n            throw Error(\"FFMPEG tried reading from closed socket!\");\n        }\n        if (!length) {\n            return Buffer.alloc(0);\n        }\n        const value = this.socket.read(length);\n        if (value) {\n            return value;\n        }\n        return new Promise((resolve, reject) => {\n            const readHandler = () => {\n                const value = this.socket.read(length);\n                if (value) {\n                    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                    cleanup();\n                    resolve(value);\n                }\n            };\n            const endHandler = () => {\n                // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                cleanup();\n                reject(new Error(`FFMPEG socket closed during read for ${length} bytes!`));\n            };\n            const cleanup = () => {\n                this.socket?.removeListener(\"readable\", readHandler);\n                this.socket?.removeListener(\"close\", endHandler);\n            };\n            if (!this.socket) {\n                throw new Error(\"FFMPEG socket is closed now!\");\n            }\n            this.socket.on(\"readable\", readHandler);\n            this.socket.on(\"close\", endHandler);\n        });\n    }\n}\nclass RecordingDelegate {\n    constructor(videoConfig, camera) {\n        this.videoConfig = videoConfig;\n        this.camera = camera;\n        this.log = new homekit_logger_1.Logger();\n        this.handlingStreamingRequest = false;\n    }\n    updateRecordingActive(active) {\n        this.log.debug(`Recording: ${active}`, this.videoConfig.displayName);\n    }\n    updateRecordingConfiguration(newConfiguration) {\n        this.configuration = newConfiguration;\n    }\n    async *handleRecordingStreamRequest(streamId) {\n        (0, assert_1.default)(!!this.configuration);\n        /**\n         * With this flag you can control how the generator reacts to a reset to the motion trigger.\n         * If set to true, the generator will send a proper endOfStream if the motion stops.\n         * If set to false, the generator will run till the HomeKit Controller closes the stream.\n         *\n         * Note: In a real implementation you would most likely introduce a bit of a delay.\n         */\n        const STOP_AFTER_MOTION_STOP = false;\n        this.handlingStreamingRequest = true;\n        (0, assert_1.default)(this.configuration.videoCodec.type === 0 /* VideoCodecType.H264 */);\n        const profile = this.configuration.videoCodec.parameters.profile === 2 /* H264Profile.HIGH */ ? \"high\"\n            : this.configuration.videoCodec.parameters.profile === 1 /* H264Profile.MAIN */ ? \"main\" : \"baseline\";\n        const level = this.configuration.videoCodec.parameters.level === 2 /* H264Level.LEVEL4_0 */ ? \"4.0\"\n            : this.configuration.videoCodec.parameters.level === 1 /* H264Level.LEVEL3_2 */ ? \"3.2\" : \"3.1\";\n        /*\n        const videoArgs: Array<string> = [\n          \"-an\",\n          \"-sn\",\n          \"-dn\",\n          \"-codec:v\",\n          \"libx264\",\n          \"-pix_fmt\",\n          \"yuv420p\",\n    \n          \"-profile:v\", profile,\n          \"-level:v\", level,\n          \"-preset\", \"ultrafast\",\n          \"-g\", \"15\",\n          \"-b:v\", `${this.configuration.videoCodec.parameters.bitRate}k`,\n          //\"-force_key_frames\", `expr:eq(t,n_forced*${this.configuration.videoCodec.parameters.iFrameInterval / 1000})`,\n          \"-r\", this.configuration.videoCodec.resolution[2].toString(),\n          //\"-r\", \"15\"\n        ];\n        */\n        //const videoArgs : Array<string> = [ \"-sn\", \"-dn\", \"-codec:v\", \"libx264\", \"-preset\", \"ultrafast\", \"-g\", \"60\" ]\n        const videoArgs = [\"-sn\", \"-dn\", \"-codec:v\", \"copy\"];\n        let samplerate;\n        switch (this.configuration.audioCodec.samplerate) {\n            case 0 /* AudioRecordingSamplerate.KHZ_8 */:\n                samplerate = \"8\";\n                break;\n            case 1 /* AudioRecordingSamplerate.KHZ_16 */:\n                samplerate = \"16\";\n                break;\n            case 2 /* AudioRecordingSamplerate.KHZ_24 */:\n                samplerate = \"24\";\n                break;\n            case 3 /* AudioRecordingSamplerate.KHZ_32 */:\n                samplerate = \"32\";\n                break;\n            case 4 /* AudioRecordingSamplerate.KHZ_44_1 */:\n                samplerate = \"44.1\";\n                break;\n            case 5 /* AudioRecordingSamplerate.KHZ_48 */:\n                samplerate = \"48\";\n                break;\n            default:\n                throw new Error(\"Unsupported audio samplerate: \" + this.configuration.audioCodec.samplerate);\n        }\n        const audioArgs = this.controller?.recordingManagement?.recordingManagementService.getCharacteristic(hap_nodejs_1.Characteristic.RecordingAudioActive)\n            ? [\n                \"-acodec\", \"libfdk_aac\",\n                ...(this.configuration.audioCodec.type === 0 /* AudioRecordingCodecType.AAC_LC */ ?\n                    [\"-profile:a\", \"aac_low\"] :\n                    [\"-profile:a\", \"aac_eld\"]),\n                \"-ar\", `${samplerate}k`,\n                \"-b:a\", `${this.configuration.audioCodec.bitrate}k`,\n                \"-ac\", `${this.configuration.audioCodec.audioChannels}`,\n            ]\n            : [];\n        this.server = new MP4StreamingServer(this.videoConfig.debug, this.videoConfig.$internalVideoProcessor, ('-f rtsp ' + this.videoConfig.source + '-recorder').split(/\\s+/g), audioArgs, videoArgs);\n        await this.server.start();\n        if (!this.server || this.server.destroyed) {\n            return; // early exit\n        }\n        const pending = [];\n        try {\n            for await (const box of this.server.generator()) {\n                pending.push(box.header, box.data);\n                const motionDetected = this.camera.getService(hap_nodejs_1.Service.MotionSensor)?.getCharacteristic(hap_nodejs_1.Characteristic.MotionDetected).value;\n                console.log(\"mp4 box type \" + box.type + \" and length \" + box.length + \" motion: \" + motionDetected);\n                if (box.type === \"moov\" || box.type === \"mdat\") {\n                    const fragment = Buffer.concat(pending);\n                    pending.splice(0, pending.length);\n                    const isLast = STOP_AFTER_MOTION_STOP && !motionDetected;\n                    yield {\n                        data: fragment,\n                        isLast: isLast,\n                    };\n                    if (isLast) {\n                        console.log(\"Ending session due to motion stopped!\");\n                        break;\n                    }\n                }\n            }\n        }\n        catch (error) {\n            if (!error.message.startsWith(\"FFMPEG\")) { // cheap way of identifying our own emitted errors\n                console.error(\"Encountered unexpected error on generator \" + error.stack);\n            }\n        }\n    }\n    acknowledgeStream(streamId) {\n        this.closeRecordingStream(streamId);\n    }\n    closeRecordingStream(streamId, reason) {\n        if (this.server) {\n            this.server.destroy();\n            this.server = undefined;\n        }\n        this.handlingStreamingRequest = false;\n    }\n    setController(controller) {\n        this.controller = controller;\n    }\n}\nexports.RecordingDelegate = RecordingDelegate;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StreamingDelegate = void 0;\nconst child_process_1 = require(\"child_process\");\nconst hap_nodejs_1 = require(\"hap-nodejs\");\nconst pick_port_1 = __importDefault(require(\"pick-port\"));\nconst dgram_1 = require(\"dgram\");\nconst ffmpeg_1 = require(\"./ffmpeg\");\nconst homekit_logger_1 = require(\"./homekit-logger\");\nclass StreamingDelegate {\n    constructor(videoConfig) {\n        this.log = new homekit_logger_1.Logger();\n        // keep track of sessions\n        this.pendingSessions = new Map();\n        this.ongoingSessions = new Map();\n        this.timeouts = new Map();\n        this.cameraName = videoConfig.displayName;\n        this.unbridge = true;\n        this.videoConfig = videoConfig;\n        this.videoProcessor = videoConfig.videoProcessor || videoConfig.$internalVideoProcessor;\n    }\n    setController(controller) {\n        this.controller = controller;\n    }\n    determineResolution(request, isSnapshot) {\n        const resInfo = {\n            width: request.width,\n            height: request.height\n        };\n        if (!isSnapshot) {\n            if (this.videoConfig.maxWidth !== undefined &&\n                (this.videoConfig.forceMax || request.width > this.videoConfig.maxWidth)) {\n                resInfo.width = this.videoConfig.maxWidth;\n            }\n            if (this.videoConfig.maxHeight !== undefined &&\n                (this.videoConfig.forceMax || request.height > this.videoConfig.maxHeight)) {\n                resInfo.height = this.videoConfig.maxHeight;\n            }\n        }\n        const filters = this.videoConfig.videoFilter?.split(',') || [];\n        const noneFilter = filters.indexOf('none');\n        if (noneFilter >= 0) {\n            filters.splice(noneFilter, 1);\n        }\n        resInfo.snapFilter = filters.join(',');\n        if ((noneFilter < 0) && (resInfo.width > 0 || resInfo.height > 0)) {\n            resInfo.resizeFilter = 'scale=' + (resInfo.width > 0 ? '\\'min(' + resInfo.width + ',iw)\\'' : 'iw') + ':' +\n                (resInfo.height > 0 ? '\\'min(' + resInfo.height + ',ih)\\'' : 'ih') +\n                ':force_original_aspect_ratio=decrease';\n            filters.push(resInfo.resizeFilter);\n            filters.push('scale=trunc(iw/2)*2:trunc(ih/2)*2'); // Force to fit encoder restrictions\n        }\n        if (filters.length > 0) {\n            resInfo.videoFilter = filters.join(',');\n        }\n        return resInfo;\n    }\n    fetchSnapshot(snapFilter) {\n        const stillImageSourceCacheTime = this.videoConfig.stillImageSourceCacheTime || (5 * 60 * 1000);\n        this.snapshotPromise = new Promise((resolve, reject) => {\n            const startTime = Date.now();\n            const ffmpegArgs = (this.videoConfig.stillImageSource || this.videoConfig.source) + // Still\n                ' -frames:v 1' +\n                (snapFilter ? ' -filter:v ' + snapFilter : '') +\n                ' -f image2 -' +\n                ' -hide_banner' +\n                ' -loglevel error';\n            this.log.debug('Snapshot command: ' + this.videoProcessor + ' ' + ffmpegArgs, this.cameraName, this.videoConfig.debug);\n            const ffmpeg = (0, child_process_1.spawn)(this.videoProcessor, ffmpegArgs.split(/\\s+/), { env: process.env });\n            const t = setTimeout(() => {\n                (0, ffmpeg_1.safeKillFFmpeg)(ffmpeg);\n                reject(new Error(\"Operation timed out creating snapshot\"));\n            }, 6000);\n            let snapshotBuffer = Buffer.alloc(0);\n            ffmpeg.stdout.on('data', (data) => {\n                snapshotBuffer = Buffer.concat([snapshotBuffer, data]);\n            });\n            ffmpeg.on('error', (error) => {\n                clearTimeout(t);\n                reject('FFmpeg process creation failed: ' + error.message);\n            });\n            ffmpeg.stderr.on('data', (data) => {\n                data.toString().split('\\n').forEach((line) => {\n                    if (this.videoConfig.debug && line.length > 0) { // For now only write anything out when debug is set\n                        this.log.error(line, this.cameraName + '] [Snapshot');\n                    }\n                });\n            });\n            ffmpeg.on('close', () => {\n                if (snapshotBuffer.length > 0) {\n                    clearTimeout(t);\n                    resolve(snapshotBuffer);\n                }\n                else {\n                    clearTimeout(t);\n                    reject('Failed to fetch snapshot.');\n                }\n                setTimeout(() => {\n                    this.snapshotPromise = undefined;\n                }, stillImageSourceCacheTime); // Expire cached snapshot after 5 minutes\n                const runtime = (Date.now() - startTime) / 1000;\n                let message = 'Fetching snapshot took ' + runtime + ' seconds.';\n                if (runtime < 5) {\n                    //this.log.debug(message, this.cameraName, this.videoConfig.debug);\n                }\n                else {\n                    if (!this.unbridge) {\n                        message += ' It is highly recommended you switch to unbridge mode.';\n                    }\n                    if (runtime < 22) {\n                        this.log.warn(message, this.cameraName);\n                    }\n                    else {\n                        message += ' The request has timed out and the snapshot has not been refreshed in HomeKit.';\n                        this.log.error(message, this.cameraName);\n                    }\n                }\n            });\n        });\n        return this.snapshotPromise;\n    }\n    resizeSnapshot(snapshot, resizeFilter) {\n        return new Promise((resolve, reject) => {\n            const ffmpegArgs = '-i pipe:' + // Resize\n                ' -frames:v 1' +\n                (resizeFilter ? ' -filter:v ' + resizeFilter : '') +\n                ' -f image2 -';\n            //this.log.debug('Resize command: ' + this.videoProcessor + ' ' + ffmpegArgs, this.cameraName, this.videoConfig.debug);\n            const ffmpeg = (0, child_process_1.spawn)(this.videoProcessor, ffmpegArgs.split(/\\s+/), { env: process.env });\n            let resizeBuffer = Buffer.alloc(0);\n            ffmpeg.stdout.on('data', (data) => {\n                resizeBuffer = Buffer.concat([resizeBuffer, data]);\n            });\n            ffmpeg.on('error', (error) => {\n                reject('FFmpeg process creation failed: ' + error.message);\n            });\n            ffmpeg.on('close', () => {\n                resolve(resizeBuffer);\n            });\n            ffmpeg.stdin.end(snapshot);\n        });\n    }\n    async handleSnapshotRequest(request, callback) {\n        const resolution = this.determineResolution(request, true);\n        try {\n            const reason = request.reason === 1 /* ResourceRequestReason.EVENT */ ? 'event' : 'periodic';\n            if (reason === 'event') {\n                this.snapshotPromise = undefined;\n            }\n            const cachedSnapshot = !!this.snapshotPromise;\n            const now = Date.now();\n            //this.log.debug('Snapshot requested: ' + request.width + ' x ' + request.height,\n            //  this.cameraName, this.videoConfig.debug);\n            const snapshot = await (this.snapshotPromise || this.fetchSnapshot(resolution.snapFilter));\n            //this.log.debug('Sending snapshot: ' + (resolution.width > 0 ? resolution.width : 'native') + ' x ' +\n            //  (resolution.height > 0 ? resolution.height : 'native') +\n            //  (cachedSnapshot ? ' (cached)' : ''), this.cameraName, this.videoConfig.debug);\n            //const resized = await this.resizeSnapshot(snapshot, resolution.resizeFilter);\n            if (!cachedSnapshot)\n                this.log.debug(\"Snapshot took: \" + (Date.now() - now) + \"ms\", this.cameraName, this.videoConfig.debug);\n            callback(undefined, snapshot);\n        }\n        catch (err) {\n            this.snapshotPromise = undefined;\n            this.log.error(err, this.cameraName);\n            callback();\n        }\n    }\n    async prepareStream(request, callback) {\n        const ipv6 = request.addressVersion === 'ipv6';\n        const options = {\n            type: 'udp',\n            ip: ipv6 ? '::' : '0.0.0.0',\n            reserveTimeout: 15\n        };\n        const videoReturnPort = await (0, pick_port_1.default)(options);\n        const videoSSRC = hap_nodejs_1.CameraController.generateSynchronisationSource();\n        const audioReturnPort = await (0, pick_port_1.default)(options);\n        const audioSSRC = hap_nodejs_1.CameraController.generateSynchronisationSource();\n        const sessionInfo = {\n            address: request.targetAddress,\n            ipv6: ipv6,\n            videoPort: request.video.port,\n            videoReturnPort: videoReturnPort,\n            videoCryptoSuite: request.video.srtpCryptoSuite,\n            videoSRTP: Buffer.concat([request.video.srtp_key, request.video.srtp_salt]),\n            videoSSRC: videoSSRC,\n            audioPort: request.audio.port,\n            audioReturnPort: audioReturnPort,\n            audioCryptoSuite: request.audio.srtpCryptoSuite,\n            audioSRTP: Buffer.concat([request.audio.srtp_key, request.audio.srtp_salt]),\n            audioSSRC: audioSSRC\n        };\n        const response = {\n            video: {\n                port: videoReturnPort,\n                ssrc: videoSSRC,\n                srtp_key: request.video.srtp_key,\n                srtp_salt: request.video.srtp_salt\n            },\n            audio: {\n                port: audioReturnPort,\n                ssrc: audioSSRC,\n                srtp_key: request.audio.srtp_key,\n                srtp_salt: request.audio.srtp_salt\n            }\n        };\n        this.pendingSessions.set(request.sessionID, sessionInfo);\n        callback(undefined, response);\n    }\n    startStream(request, callback) {\n        const sessionInfo = this.pendingSessions.get(request.sessionID);\n        if (sessionInfo) {\n            const vcodec = this.videoConfig.vcodec || 'libx264';\n            const mtu = this.videoConfig.packetSize || 1316; // request.video.mtu is not used\n            let encoderOptions = this.videoConfig.encoderOptions;\n            if (!encoderOptions && vcodec === 'libx264') {\n                encoderOptions = '-preset ultrafast -tune zerolatency';\n            }\n            const resolution = this.determineResolution(request.video, false);\n            let fps = (this.videoConfig.maxFPS !== undefined &&\n                (this.videoConfig.forceMax || request.video.fps > this.videoConfig.maxFPS)) ?\n                this.videoConfig.maxFPS : request.video.fps;\n            let videoBitrate = (this.videoConfig.maxBitrate !== undefined &&\n                (this.videoConfig.forceMax || request.video.max_bit_rate > this.videoConfig.maxBitrate)) ?\n                this.videoConfig.maxBitrate : request.video.max_bit_rate;\n            if (vcodec === 'copy') {\n                resolution.width = 0;\n                resolution.height = 0;\n                resolution.videoFilter = undefined;\n                fps = 0;\n                videoBitrate = 0;\n            }\n            this.log.debug('Video stream requested: ' + request.video.width + ' x ' + request.video.height + ', ' +\n                request.video.fps + ' fps, ' + request.video.max_bit_rate + ' kbps', this.cameraName, this.videoConfig.debug);\n            this.log.info('Starting video stream: ' + (resolution.width > 0 ? resolution.width : 'native') + ' x ' +\n                (resolution.height > 0 ? resolution.height : 'native') + ', ' + (fps > 0 ? fps : 'native') +\n                ' fps, ' + (videoBitrate > 0 ? videoBitrate : '???') + ' kbps' +\n                (this.videoConfig.audio ? (' (' + request.audio.codec + ')') : ''), this.cameraName);\n            let ffmpegArgs = this.videoConfig.source;\n            ffmpegArgs += // Video\n                (this.videoConfig.mapvideo ? ' -map ' + this.videoConfig.mapvideo : ' -an -sn -dn') +\n                    ' -codec:v ' + vcodec +\n                    ' -pix_fmt yuv420p' +\n                    ' -color_range mpeg' +\n                    (fps > 0 ? ' -r ' + fps : '') +\n                    ' -f rawvideo' +\n                    (encoderOptions ? ' ' + encoderOptions : '') +\n                    (resolution.videoFilter ? ' -filter:v ' + resolution.videoFilter : '') +\n                    (videoBitrate > 0 ? ' -b:v ' + videoBitrate + 'k' : '') +\n                    ' -payload_type ' + request.video.pt;\n            ffmpegArgs += // Video Stream\n                ' -ssrc ' + sessionInfo.videoSSRC +\n                    ' -f rtp' +\n                    ' -srtp_out_suite AES_CM_128_HMAC_SHA1_80' +\n                    ' -srtp_out_params ' + sessionInfo.videoSRTP.toString('base64') +\n                    ' srtp://' + sessionInfo.address + ':' + sessionInfo.videoPort +\n                    '?rtcpport=' + sessionInfo.videoPort + '&pkt_size=' + mtu;\n            if (this.videoConfig.audio) {\n                if (request.audio.codec === \"OPUS\" /* AudioStreamingCodecType.OPUS */ || request.audio.codec === \"AAC-eld\" /* AudioStreamingCodecType.AAC_ELD */) {\n                    ffmpegArgs += // Audio\n                        (this.videoConfig.mapaudio ? ' -map ' + this.videoConfig.mapaudio : ' -vn -sn -dn') +\n                            (request.audio.codec === \"OPUS\" /* AudioStreamingCodecType.OPUS */ ?\n                                ' -codec:a libopus' +\n                                    ' -application lowdelay' :\n                                ' -codec:a libfdk_aac' +\n                                    ' -profile:a aac_eld') +\n                            ' -flags +global_header' +\n                            ' -f null' +\n                            ' -ar ' + request.audio.sample_rate + 'k' +\n                            ' -b:a ' + request.audio.max_bit_rate + 'k' +\n                            ' -bufsize ' + (request.audio.sample_rate * 4) + 'k' +\n                            ' -ac ' + request.audio.channel +\n                            ' -payload_type ' + request.audio.pt;\n                    ffmpegArgs += // Audio Stream\n                        ' -ssrc ' + sessionInfo.audioSSRC +\n                            ' -f rtp' +\n                            ' -srtp_out_suite AES_CM_128_HMAC_SHA1_80' +\n                            ' -srtp_out_params ' + sessionInfo.audioSRTP.toString('base64') +\n                            ' srtp://' + sessionInfo.address + ':' + sessionInfo.audioPort +\n                            '?rtcpport=' + sessionInfo.audioPort + '&pkt_size=188';\n                }\n                else {\n                    this.log.error('Unsupported audio codec requested: ' + request.audio.codec, this.cameraName);\n                }\n            }\n            ffmpegArgs += ' -loglevel level' + (this.videoConfig.debug ? '+verbose' : '') +\n                ' -progress pipe:1';\n            const activeSession = {};\n            activeSession.socket = (0, dgram_1.createSocket)(sessionInfo.ipv6 ? 'udp6' : 'udp4');\n            activeSession.socket.on('error', (err) => {\n                this.log.error('Socket error: ' + err.message, this.cameraName);\n                this.stopStream(request.sessionID);\n            });\n            activeSession.socket.on('message', () => {\n                if (activeSession.timeout) {\n                    clearTimeout(activeSession.timeout);\n                }\n                activeSession.timeout = setTimeout(() => {\n                    this.log.info('Device appears to be inactive. Stopping stream.', this.cameraName);\n                    this.controller.forceStopStreamingSession(request.sessionID);\n                    this.stopStream(request.sessionID);\n                }, request.video.rtcp_interval * 5 * 1000);\n            });\n            activeSession.socket.bind(sessionInfo.videoReturnPort);\n            activeSession.mainProcess = new ffmpeg_1.FfmpegProcess(this.cameraName, request.sessionID, this.videoProcessor, ffmpegArgs, this.log, this.videoConfig.debug, this, callback);\n            if (this.videoConfig.returnAudioTarget) {\n                const ffmpegReturnArgs = '-hide_banner' +\n                    ' -protocol_whitelist pipe,udp,rtp,file,crypto' +\n                    ' -f sdp' +\n                    ' -c:a libfdk_aac' +\n                    ' -i pipe:' +\n                    ' ' + this.videoConfig.returnAudioTarget +\n                    ' -loglevel level' + (this.videoConfig.debugReturn ? '+verbose' : '');\n                const ipVer = sessionInfo.ipv6 ? 'IP6' : 'IP4';\n                const sdpReturnAudio = 'v=0\\r\\n' +\n                    'o=- 0 0 IN ' + ipVer + ' ' + sessionInfo.address + '\\r\\n' +\n                    's=Talk\\r\\n' +\n                    'c=IN ' + ipVer + ' ' + sessionInfo.address + '\\r\\n' +\n                    't=0 0\\r\\n' +\n                    'm=audio ' + sessionInfo.audioReturnPort + ' RTP/AVP 110\\r\\n' +\n                    'b=AS:24\\r\\n' +\n                    'a=rtpmap:110 MPEG4-GENERIC/16000/1\\r\\n' +\n                    'a=rtcp-mux\\r\\n' + // FFmpeg ignores this, but might as well\n                    'a=fmtp:110 ' +\n                    'profile-level-id=1;mode=AAC-hbr;sizelength=13;indexlength=3;indexdeltalength=3; ' +\n                    'config=F8F0212C00BC00\\r\\n' +\n                    'a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:' + sessionInfo.audioSRTP.toString('base64') + '\\r\\n';\n                activeSession.returnProcess = new ffmpeg_1.FfmpegProcess(this.cameraName + '] [Two-way', request.sessionID, this.videoProcessor, ffmpegReturnArgs, this.log, this.videoConfig.debugReturn, this);\n                activeSession.returnProcess.stdin.end(sdpReturnAudio);\n            }\n            this.ongoingSessions.set(request.sessionID, activeSession);\n            this.pendingSessions.delete(request.sessionID);\n        }\n        else {\n            this.log.error('Error finding session information.', this.cameraName);\n            callback(new Error('Error finding session information'));\n        }\n    }\n    handleStreamRequest(request, callback) {\n        switch (request.type) {\n            case \"start\" /* StreamRequestTypes.START */:\n                this.startStream(request, callback);\n                break;\n            case \"reconfigure\" /* StreamRequestTypes.RECONFIGURE */:\n                this.log.debug('Received request to reconfigure: ' + request.video.width + ' x ' + request.video.height + ', ' +\n                    request.video.fps + ' fps, ' + request.video.max_bit_rate + ' kbps (Ignored)', this.cameraName, this.videoConfig.debug);\n                callback();\n                break;\n            case \"stop\" /* StreamRequestTypes.STOP */:\n                this.stopStream(request.sessionID);\n                callback();\n                break;\n        }\n    }\n    stopStream(sessionId) {\n        const session = this.ongoingSessions.get(sessionId);\n        if (session) {\n            if (session.timeout) {\n                clearTimeout(session.timeout);\n            }\n            try {\n                session.socket?.close();\n            }\n            catch (err) {\n                this.log.error('Error occurred closing socket: ' + err, this.cameraName);\n            }\n            try {\n                session.mainProcess?.stop();\n            }\n            catch (err) {\n                this.log.error('Error occurred terminating main FFmpeg process: ' + err, this.cameraName);\n            }\n            try {\n                session.returnProcess?.stop();\n            }\n            catch (err) {\n                this.log.error('Error occurred terminating two-way FFmpeg process: ' + err, this.cameraName);\n            }\n        }\n        this.ongoingSessions.delete(sessionId);\n        this.log.info('Stopped video stream.', this.cameraName);\n    }\n}\nexports.StreamingDelegate = StreamingDelegate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Logger = void 0;\n// Adapted from https://github.com/Sunoo/homebridge-camera-ffmpeg/blob/master/src/logger.ts\nclass Logger {\n    formatMessage(message, device) {\n        let formatted = '';\n        if (device) {\n            formatted += '[' + device + '] ';\n        }\n        formatted += message;\n        return formatted;\n    }\n    info(message, device) {\n        console.info(this.formatMessage(message, device));\n    }\n    warn(message, device) {\n        console.warn(this.formatMessage(message, device));\n    }\n    error(message, device) {\n        console.error(this.formatMessage(message, device));\n    }\n    debug(message, device, alwaysLog = false) {\n        console.debug(this.formatMessage(message, device));\n    }\n}\nexports.Logger = Logger;\n","\"use strict\";\n//\n// This file contains an abstraction of all the functionality needed for the intercom to talk to hap-nodejs, the code is restricted to Homekit functionality\n// \n// A static homekit-bundle.js is then be generated with $ npm run build:homekitbundle:dev or npm run build:homekitbundle:prod to use it within the c300-controller\n//\n// This file is subjected to change without backwards compatibility and probably needs heavy refactoring\n//\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _SwitchAccesory_instances, _SwitchAccesory_updateSwitchState, _LockAccessory_locked;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HomekitManager = void 0;\nexports.createHAPUsername = createHAPUsername;\nexports.randomPinCode = randomPinCode;\nconst hap_nodejs_1 = require(\"hap-nodejs\");\nconst crypto_1 = require(\"crypto\");\nconst homekit_camera_1 = require(\"./homekit-camera\");\nconst ffmpeg_1 = require(\"./ffmpeg\");\nconst homekit_camera_recording_1 = require(\"./homekit-camera-recording\");\nconst MANUFACTURER = \"c300x-controller\";\nlet BUILDNUMBER = \"0.0.0\";\nlet FIRMWAREVERSION = \"0.0.0\";\nlet MODEL = \"C100X/C300X\";\nfunction setAccessoryInformation(accessory) {\n    const accessoryInformationService = accessory.getService(hap_nodejs_1.Service.AccessoryInformation);\n    accessoryInformationService.setCharacteristic(hap_nodejs_1.Characteristic.Manufacturer, MANUFACTURER);\n    accessoryInformationService.setCharacteristic(hap_nodejs_1.Characteristic.Model, MODEL);\n    accessoryInformationService.setCharacteristic(hap_nodejs_1.Characteristic.SerialNumber, 'v' + BUILDNUMBER);\n    accessoryInformationService.setCharacteristic(hap_nodejs_1.Characteristic.FirmwareRevision, FIRMWAREVERSION);\n}\nfunction randomBetween(min, max) {\n    return Math.round(Math.random() * (max - min) + min);\n}\nclass SwitchAccesory {\n    constructor(name, eventbus) {\n        _SwitchAccesory_instances.add(this);\n        this.name = name;\n        this.eventbus = eventbus;\n        const _uuid = hap_nodejs_1.uuid.generate('hap-nodejs:accessories:switch:' + name);\n        this.accessory = new hap_nodejs_1.Accessory(name, _uuid);\n        setAccessoryInformation(this.accessory);\n        this.switchService = this.accessory.addService(hap_nodejs_1.Service.Switch, name);\n        this.switchService.getCharacteristic(hap_nodejs_1.Characteristic.On)\n            .on(\"set\" /* CharacteristicEventTypes.SET */, (value, callback) => {\n            if (value) {\n                eventbus.emit('homekit:switch:on:' + name, this);\n            }\n            else {\n                eventbus.emit('homekit:switch:off:' + name, this);\n            }\n            callback(null);\n        });\n        const initialDelay = randomBetween(1000, 10000);\n        setTimeout(() => {\n            __classPrivateFieldGet(this, _SwitchAccesory_instances, \"m\", _SwitchAccesory_updateSwitchState).call(this);\n        }, initialDelay);\n    }\n    switchedOn(callback) {\n        this.eventbus.on('homekit:switch:on:' + this.name, () => {\n            callback(this);\n        });\n        return this;\n    }\n    switchedOff(callback) {\n        this.eventbus.on('homekit:switch:off:' + this.name, () => {\n            callback(this);\n        });\n        return this;\n    }\n    updateState(callback) {\n        this.eventbus.on('homekit:switch:update:' + this.name, () => {\n            callback().then((value) => {\n                this.switchService.getCharacteristic(hap_nodejs_1.Characteristic.On).updateValue(value);\n            }).finally(() => {\n                setTimeout(() => {\n                    __classPrivateFieldGet(this, _SwitchAccesory_instances, \"m\", _SwitchAccesory_updateSwitchState).call(this);\n                }, 60000);\n            });\n        });\n        return this;\n    }\n}\n_SwitchAccesory_instances = new WeakSet(), _SwitchAccesory_updateSwitchState = function _SwitchAccesory_updateSwitchState() {\n    this.eventbus.emit('homekit:switch:update:' + this.name);\n};\nclass LockAccessory {\n    constructor(id, name, eventbus) {\n        this.id = id;\n        this.eventbus = eventbus;\n        _LockAccessory_locked.set(this, true);\n        const _uuid = hap_nodejs_1.uuid.generate('hap-nodejs:accessories:lock:' + name);\n        this.accessory = new hap_nodejs_1.Accessory(name, _uuid);\n        setAccessoryInformation(this.accessory);\n        this.lockService = this.accessory.addService(hap_nodejs_1.Service.LockMechanism, name);\n        this.lockService\n            .getCharacteristic(hap_nodejs_1.Characteristic.LockTargetState)\n            .on(\"set\" /* CharacteristicEventTypes.SET */, (value, callback) => {\n            if (value === hap_nodejs_1.Characteristic.LockTargetState.UNSECURED) {\n                __classPrivateFieldSet(this, _LockAccessory_locked, false, \"f\");\n                eventbus.emit('homekit:lock:unlock:' + id, this);\n                callback();\n                setTimeout(() => {\n                    __classPrivateFieldSet(this, _LockAccessory_locked, true, \"f\");\n                    eventbus.emit('homekit:lock:lock:' + id, this);\n                }, 3000);\n            }\n            else if (value === hap_nodejs_1.Characteristic.LockTargetState.SECURED) {\n                // Probably shouldn't happen, since the locks auto-secure\n                callback();\n                this.lockService.updateCharacteristic(hap_nodejs_1.Characteristic.LockCurrentState, hap_nodejs_1.Characteristic.LockCurrentState.SECURED);\n            }\n        });\n        this.lockService\n            .getCharacteristic(hap_nodejs_1.Characteristic.LockCurrentState)\n            .on(\"get\" /* CharacteristicEventTypes.GET */, callback => {\n            if (__classPrivateFieldGet(this, _LockAccessory_locked, \"f\")) {\n                callback(undefined, hap_nodejs_1.Characteristic.LockCurrentState.SECURED);\n            }\n            else {\n                callback(undefined, hap_nodejs_1.Characteristic.LockCurrentState.UNSECURED);\n            }\n        });\n        this.lockService.updateCharacteristic(hap_nodejs_1.Characteristic.LockTargetState, hap_nodejs_1.Characteristic.LockCurrentState.SECURED);\n    }\n    unlocked(callback) {\n        this.eventbus.on('homekit:lock:unlock:' + this.id, () => {\n            callback(this);\n        });\n        return this;\n    }\n}\n_LockAccessory_locked = new WeakMap();\nfunction createHAPUsername() {\n    const buffers = [];\n    for (let i = 0; i < 6; i++) {\n        buffers.push((0, crypto_1.randomBytes)(1).toString('hex'));\n    }\n    return buffers.join(':');\n}\nfunction rd() {\n    return Math.round(Math.random() * 100000) % 10;\n}\nfunction randomPinCode() {\n    return `${rd()}${rd()}${rd()}-${rd()}${rd()}-${rd()}${rd()}${rd()}`;\n}\nclass HomekitManager {\n    constructor(eventbus, base_path, config, videoConfig, buildNumber, model) {\n        this.eventbus = eventbus;\n        hap_nodejs_1.HAPStorage.setCustomStoragePath(base_path + \"/storage\");\n        if (!videoConfig.videoProcessor) {\n            videoConfig.$internalVideoProcessor = (0, ffmpeg_1.fetchFffmpeg)(base_path);\n        }\n        MODEL = model;\n        BUILDNUMBER = buildNumber;\n        this.bridge = new hap_nodejs_1.Bridge(config.displayName, hap_nodejs_1.uuid.generate('hap-nodejs:bridges:homebridge'));\n        setAccessoryInformation(this.bridge);\n        console.log(\"Bridge pairing code: \" + config.pinCode);\n        this.bridge.publish({\n            advertiser: videoConfig.advertiser || \"ciao\" /* MDNSAdvertiser.CIAO */,\n            username: config.username,\n            pincode: config.pinCode,\n            category: 2 /* Categories.BRIDGE */,\n            addIdentifyingMaterial: false\n        });\n    }\n    addDoorbell(videoConfig) {\n        this.doorbell = new hap_nodejs_1.Accessory(videoConfig.displayName, hap_nodejs_1.uuid.generate('hap-nodejs:accessories:doorbell:' + videoConfig.displayName));\n        setAccessoryInformation(this.doorbell);\n        const streamingDelegate = new homekit_camera_1.StreamingDelegate(videoConfig);\n        const recordingDelegate = new homekit_camera_recording_1.RecordingDelegate(videoConfig, this.doorbell);\n        const motionSensor = this.doorbell.addService(hap_nodejs_1.Service.MotionSensor);\n        const controller = new hap_nodejs_1.DoorbellController(this.getCameraControllerOptions(videoConfig, this.doorbell, streamingDelegate, recordingDelegate));\n        streamingDelegate.setController(controller);\n        recordingDelegate.setController(controller);\n        this.doorbell.configureController(controller);\n        const doorbellService = this.doorbell.getService(hap_nodejs_1.Service.Doorbell);\n        this.eventbus.on('homekit:pressed', () => {\n            console.log(\"HOMEKIT PRESSED EVENT AT: \" + Date());\n            doorbellService.getCharacteristic(hap_nodejs_1.Characteristic.ProgrammableSwitchEvent).updateValue(hap_nodejs_1.Characteristic.ProgrammableSwitchEvent.SINGLE_PRESS);\n        });\n        this.eventbus.on('homekit:motion', (motionTime) => {\n            console.log(\"HOMEKIT MOTION EVENT AT: \" + Date());\n            motionSensor.getCharacteristic(hap_nodejs_1.Characteristic.MotionDetected).updateValue(true);\n            setTimeout(() => {\n                console.log(\"SET FALSE AT: \" + Date());\n                motionSensor.getCharacteristic(hap_nodejs_1.Characteristic.MotionDetected).updateValue(false);\n            }, motionTime || 20000);\n        });\n        this.doorbell.publish({\n            advertiser: videoConfig.advertiser || \"ciao\" /* MDNSAdvertiser.CIAO */,\n            username: videoConfig.username,\n            pincode: videoConfig.pinCode,\n            category: 18 /* Categories.VIDEO_DOORBELL */,\n        });\n        console.log('Camera pairing code: ' + videoConfig.pinCode);\n        return {\n            doorbell: this.doorbell,\n            streamingDelegate\n        };\n    }\n    addLock(id, name) {\n        const lock = new LockAccessory(id, name, this.eventbus);\n        this.eventbus.on('homekit:locked:' + id, (value) => {\n            if (value === true) {\n                lock.lockService.updateCharacteristic(hap_nodejs_1.Characteristic.LockCurrentState, hap_nodejs_1.Characteristic.LockTargetState.SECURED);\n                lock.lockService.updateCharacteristic(hap_nodejs_1.Characteristic.LockTargetState, hap_nodejs_1.Characteristic.LockTargetState.SECURED);\n            }\n            else if (value === false) {\n                lock.lockService.updateCharacteristic(hap_nodejs_1.Characteristic.LockCurrentState, hap_nodejs_1.Characteristic.LockTargetState.UNSECURED);\n                lock.lockService.updateCharacteristic(hap_nodejs_1.Characteristic.LockTargetState, hap_nodejs_1.Characteristic.LockTargetState.UNSECURED);\n            }\n        });\n        this.bridge.addBridgedAccessory(lock.accessory);\n        return lock;\n    }\n    addSwitch(name) {\n        const accessory = new SwitchAccesory(name, this.eventbus);\n        this.bridge.addBridgedAccessory(accessory.accessory);\n        return accessory;\n    }\n    updateFirmwareVersion(version) {\n        FIRMWAREVERSION = version;\n        setAccessoryInformation(this.bridge);\n        setAccessoryInformation(this.doorbell);\n        this.bridge.bridgedAccessories.forEach((accessory) => {\n            setAccessoryInformation(accessory);\n        });\n    }\n    getCameraControllerOptions(videoConfig, accesorry, streamingDelegate, recordingDelegate) {\n        const hksv = videoConfig.hksv || true;\n        const resolutions = [\n            [320, 180, 30],\n            [320, 240, 15], // Apple Watch requires this configuration\n            [320, 240, 30],\n            [480, 270, 30],\n            [480, 360, 30],\n            [640, 360, 30],\n            [640, 480, 30],\n            [1280, 720, 30],\n            [1280, 960, 30],\n            [1920, 1080, 30],\n            [1600, 1200, 30]\n        ];\n        const options = {\n            cameraStreamCount: videoConfig.maxStreams || 2, // HomeKit requires at least 2 streams, but 1 is also just fine\n            delegate: streamingDelegate,\n            streamingOptions: {\n                supportedCryptoSuites: [0 /* SRTPCryptoSuites.AES_CM_128_HMAC_SHA1_80 */],\n                video: {\n                    resolutions: resolutions,\n                    codec: {\n                        profiles: [0 /* H264Profile.BASELINE */, 1 /* H264Profile.MAIN */, 2 /* H264Profile.HIGH */],\n                        levels: [0 /* H264Level.LEVEL3_1 */, 1 /* H264Level.LEVEL3_2 */, 2 /* H264Level.LEVEL4_0 */]\n                    }\n                },\n                audio: {\n                    twoWayAudio: !!videoConfig.returnAudioTarget,\n                    codecs: [\n                        {\n                            type: \"AAC-eld\" /* AudioStreamingCodecType.AAC_ELD */,\n                            samplerate: 16 /* AudioStreamingSamplerate.KHZ_16 */\n                            //type: AudioStreamingCodecType.OPUS,\n                            //samplerate: AudioStreamingSamplerate.KHZ_24\n                        }\n                    ]\n                }\n            },\n            recording: hksv\n                ? {\n                    options: {\n                        prebufferLength: 4000,\n                        mediaContainerConfiguration: [\n                            {\n                                type: 0 /* MediaContainerType.FRAGMENTED_MP4 */,\n                                fragmentLength: 4000,\n                            },\n                        ],\n                        video: {\n                            type: 0 /* VideoCodecType.H264 */,\n                            parameters: {\n                                profiles: [0 /* H264Profile.BASELINE */, 1 /* H264Profile.MAIN */, 2 /* H264Profile.HIGH */],\n                                levels: [0 /* H264Level.LEVEL3_1 */, 1 /* H264Level.LEVEL3_2 */, 2 /* H264Level.LEVEL4_0 */],\n                            },\n                            resolutions: resolutions,\n                        },\n                        audio: {\n                            codecs: {\n                                type: 0 /* AudioRecordingCodecType.AAC_LC */,\n                                samplerate: 2 /* AudioRecordingSamplerate.KHZ_24 */,\n                                bitrateMode: 0,\n                                audioChannels: 1,\n                            },\n                        },\n                    },\n                    delegate: recordingDelegate,\n                }\n                : undefined,\n            sensors: hksv\n                ? {\n                    motion: accesorry.getService(hap_nodejs_1.Service.MotionSensor),\n                    occupancy: undefined,\n                }\n                : undefined,\n        };\n        return options;\n    }\n}\nexports.HomekitManager = HomekitManager;\n","(function(nacl) {\n'use strict';\n\n// Ported in 2014 by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n//\n// Implementation derived from TweetNaCl version 20140427.\n// See for details: http://tweetnacl.cr.yp.to/\n\nvar gf = function(init) {\n  var i, r = new Float64Array(16);\n  if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n  return r;\n};\n\n//  Pluggable, initialized in high-level API below.\nvar randombytes = function(/* x, n */) { throw new Error('no PRNG'); };\n\nvar _0 = new Uint8Array(16);\nvar _9 = new Uint8Array(32); _9[0] = 9;\n\nvar gf0 = gf(),\n    gf1 = gf([1]),\n    _121665 = gf([0xdb41, 1]),\n    D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]),\n    D2 = gf([0xf159, 0x26b2, 0x9b94, 0xebd6, 0xb156, 0x8283, 0x149a, 0x00e0, 0xd130, 0xeef3, 0x80f2, 0x198e, 0xfce7, 0x56df, 0xd9dc, 0x2406]),\n    X = gf([0xd51a, 0x8f25, 0x2d60, 0xc956, 0xa7b2, 0x9525, 0xc760, 0x692c, 0xdc5c, 0xfdd6, 0xe231, 0xc0a4, 0x53fe, 0xcd6e, 0x36d3, 0x2169]),\n    Y = gf([0x6658, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666]),\n    I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n\nfunction ts64(x, i, h, l) {\n  x[i]   = (h >> 24) & 0xff;\n  x[i+1] = (h >> 16) & 0xff;\n  x[i+2] = (h >>  8) & 0xff;\n  x[i+3] = h & 0xff;\n  x[i+4] = (l >> 24)  & 0xff;\n  x[i+5] = (l >> 16)  & 0xff;\n  x[i+6] = (l >>  8)  & 0xff;\n  x[i+7] = l & 0xff;\n}\n\nfunction vn(x, xi, y, yi, n) {\n  var i,d = 0;\n  for (i = 0; i < n; i++) d |= x[xi+i]^y[yi+i];\n  return (1 & ((d - 1) >>> 8)) - 1;\n}\n\nfunction crypto_verify_16(x, xi, y, yi) {\n  return vn(x,xi,y,yi,16);\n}\n\nfunction crypto_verify_32(x, xi, y, yi) {\n  return vn(x,xi,y,yi,32);\n}\n\nfunction core_salsa20(o, p, k, c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n   x0 =  x0 +  j0 | 0;\n   x1 =  x1 +  j1 | 0;\n   x2 =  x2 +  j2 | 0;\n   x3 =  x3 +  j3 | 0;\n   x4 =  x4 +  j4 | 0;\n   x5 =  x5 +  j5 | 0;\n   x6 =  x6 +  j6 | 0;\n   x7 =  x7 +  j7 | 0;\n   x8 =  x8 +  j8 | 0;\n   x9 =  x9 +  j9 | 0;\n  x10 = x10 + j10 | 0;\n  x11 = x11 + j11 | 0;\n  x12 = x12 + j12 | 0;\n  x13 = x13 + j13 | 0;\n  x14 = x14 + j14 | 0;\n  x15 = x15 + j15 | 0;\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x1 >>>  0 & 0xff;\n  o[ 5] = x1 >>>  8 & 0xff;\n  o[ 6] = x1 >>> 16 & 0xff;\n  o[ 7] = x1 >>> 24 & 0xff;\n\n  o[ 8] = x2 >>>  0 & 0xff;\n  o[ 9] = x2 >>>  8 & 0xff;\n  o[10] = x2 >>> 16 & 0xff;\n  o[11] = x2 >>> 24 & 0xff;\n\n  o[12] = x3 >>>  0 & 0xff;\n  o[13] = x3 >>>  8 & 0xff;\n  o[14] = x3 >>> 16 & 0xff;\n  o[15] = x3 >>> 24 & 0xff;\n\n  o[16] = x4 >>>  0 & 0xff;\n  o[17] = x4 >>>  8 & 0xff;\n  o[18] = x4 >>> 16 & 0xff;\n  o[19] = x4 >>> 24 & 0xff;\n\n  o[20] = x5 >>>  0 & 0xff;\n  o[21] = x5 >>>  8 & 0xff;\n  o[22] = x5 >>> 16 & 0xff;\n  o[23] = x5 >>> 24 & 0xff;\n\n  o[24] = x6 >>>  0 & 0xff;\n  o[25] = x6 >>>  8 & 0xff;\n  o[26] = x6 >>> 16 & 0xff;\n  o[27] = x6 >>> 24 & 0xff;\n\n  o[28] = x7 >>>  0 & 0xff;\n  o[29] = x7 >>>  8 & 0xff;\n  o[30] = x7 >>> 16 & 0xff;\n  o[31] = x7 >>> 24 & 0xff;\n\n  o[32] = x8 >>>  0 & 0xff;\n  o[33] = x8 >>>  8 & 0xff;\n  o[34] = x8 >>> 16 & 0xff;\n  o[35] = x8 >>> 24 & 0xff;\n\n  o[36] = x9 >>>  0 & 0xff;\n  o[37] = x9 >>>  8 & 0xff;\n  o[38] = x9 >>> 16 & 0xff;\n  o[39] = x9 >>> 24 & 0xff;\n\n  o[40] = x10 >>>  0 & 0xff;\n  o[41] = x10 >>>  8 & 0xff;\n  o[42] = x10 >>> 16 & 0xff;\n  o[43] = x10 >>> 24 & 0xff;\n\n  o[44] = x11 >>>  0 & 0xff;\n  o[45] = x11 >>>  8 & 0xff;\n  o[46] = x11 >>> 16 & 0xff;\n  o[47] = x11 >>> 24 & 0xff;\n\n  o[48] = x12 >>>  0 & 0xff;\n  o[49] = x12 >>>  8 & 0xff;\n  o[50] = x12 >>> 16 & 0xff;\n  o[51] = x12 >>> 24 & 0xff;\n\n  o[52] = x13 >>>  0 & 0xff;\n  o[53] = x13 >>>  8 & 0xff;\n  o[54] = x13 >>> 16 & 0xff;\n  o[55] = x13 >>> 24 & 0xff;\n\n  o[56] = x14 >>>  0 & 0xff;\n  o[57] = x14 >>>  8 & 0xff;\n  o[58] = x14 >>> 16 & 0xff;\n  o[59] = x14 >>> 24 & 0xff;\n\n  o[60] = x15 >>>  0 & 0xff;\n  o[61] = x15 >>>  8 & 0xff;\n  o[62] = x15 >>> 16 & 0xff;\n  o[63] = x15 >>> 24 & 0xff;\n}\n\nfunction core_hsalsa20(o,p,k,c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x5 >>>  0 & 0xff;\n  o[ 5] = x5 >>>  8 & 0xff;\n  o[ 6] = x5 >>> 16 & 0xff;\n  o[ 7] = x5 >>> 24 & 0xff;\n\n  o[ 8] = x10 >>>  0 & 0xff;\n  o[ 9] = x10 >>>  8 & 0xff;\n  o[10] = x10 >>> 16 & 0xff;\n  o[11] = x10 >>> 24 & 0xff;\n\n  o[12] = x15 >>>  0 & 0xff;\n  o[13] = x15 >>>  8 & 0xff;\n  o[14] = x15 >>> 16 & 0xff;\n  o[15] = x15 >>> 24 & 0xff;\n\n  o[16] = x6 >>>  0 & 0xff;\n  o[17] = x6 >>>  8 & 0xff;\n  o[18] = x6 >>> 16 & 0xff;\n  o[19] = x6 >>> 24 & 0xff;\n\n  o[20] = x7 >>>  0 & 0xff;\n  o[21] = x7 >>>  8 & 0xff;\n  o[22] = x7 >>> 16 & 0xff;\n  o[23] = x7 >>> 24 & 0xff;\n\n  o[24] = x8 >>>  0 & 0xff;\n  o[25] = x8 >>>  8 & 0xff;\n  o[26] = x8 >>> 16 & 0xff;\n  o[27] = x8 >>> 24 & 0xff;\n\n  o[28] = x9 >>>  0 & 0xff;\n  o[29] = x9 >>>  8 & 0xff;\n  o[30] = x9 >>> 16 & 0xff;\n  o[31] = x9 >>> 24 & 0xff;\n}\n\nfunction crypto_core_salsa20(out,inp,k,c) {\n  core_salsa20(out,inp,k,c);\n}\n\nfunction crypto_core_hsalsa20(out,inp,k,c) {\n  core_hsalsa20(out,inp,k,c);\n}\n\nvar sigma = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);\n            // \"expand 32-byte k\"\n\nfunction crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n    mpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream_salsa20(c,cpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream(c,cpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20(c,cpos,d,sn,s);\n}\n\nfunction crypto_stream_xor(c,cpos,m,mpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);\n}\n\n/*\n* Port of Andrew Moon's Poly1305-donna-16. Public domain.\n* https://github.com/floodyberry/poly1305-donna\n*/\n\nvar poly1305 = function(key) {\n  this.buffer = new Uint8Array(16);\n  this.r = new Uint16Array(10);\n  this.h = new Uint16Array(10);\n  this.pad = new Uint16Array(8);\n  this.leftover = 0;\n  this.fin = 0;\n\n  var t0, t1, t2, t3, t4, t5, t6, t7;\n\n  t0 = key[ 0] & 0xff | (key[ 1] & 0xff) << 8; this.r[0] = ( t0                     ) & 0x1fff;\n  t1 = key[ 2] & 0xff | (key[ 3] & 0xff) << 8; this.r[1] = ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n  t2 = key[ 4] & 0xff | (key[ 5] & 0xff) << 8; this.r[2] = ((t1 >>> 10) | (t2 <<  6)) & 0x1f03;\n  t3 = key[ 6] & 0xff | (key[ 7] & 0xff) << 8; this.r[3] = ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n  t4 = key[ 8] & 0xff | (key[ 9] & 0xff) << 8; this.r[4] = ((t3 >>>  4) | (t4 << 12)) & 0x00ff;\n  this.r[5] = ((t4 >>>  1)) & 0x1ffe;\n  t5 = key[10] & 0xff | (key[11] & 0xff) << 8; this.r[6] = ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n  t6 = key[12] & 0xff | (key[13] & 0xff) << 8; this.r[7] = ((t5 >>> 11) | (t6 <<  5)) & 0x1f81;\n  t7 = key[14] & 0xff | (key[15] & 0xff) << 8; this.r[8] = ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n  this.r[9] = ((t7 >>>  5)) & 0x007f;\n\n  this.pad[0] = key[16] & 0xff | (key[17] & 0xff) << 8;\n  this.pad[1] = key[18] & 0xff | (key[19] & 0xff) << 8;\n  this.pad[2] = key[20] & 0xff | (key[21] & 0xff) << 8;\n  this.pad[3] = key[22] & 0xff | (key[23] & 0xff) << 8;\n  this.pad[4] = key[24] & 0xff | (key[25] & 0xff) << 8;\n  this.pad[5] = key[26] & 0xff | (key[27] & 0xff) << 8;\n  this.pad[6] = key[28] & 0xff | (key[29] & 0xff) << 8;\n  this.pad[7] = key[30] & 0xff | (key[31] & 0xff) << 8;\n};\n\npoly1305.prototype.blocks = function(m, mpos, bytes) {\n  var hibit = this.fin ? 0 : (1 << 11);\n  var t0, t1, t2, t3, t4, t5, t6, t7, c;\n  var d0, d1, d2, d3, d4, d5, d6, d7, d8, d9;\n\n  var h0 = this.h[0],\n      h1 = this.h[1],\n      h2 = this.h[2],\n      h3 = this.h[3],\n      h4 = this.h[4],\n      h5 = this.h[5],\n      h6 = this.h[6],\n      h7 = this.h[7],\n      h8 = this.h[8],\n      h9 = this.h[9];\n\n  var r0 = this.r[0],\n      r1 = this.r[1],\n      r2 = this.r[2],\n      r3 = this.r[3],\n      r4 = this.r[4],\n      r5 = this.r[5],\n      r6 = this.r[6],\n      r7 = this.r[7],\n      r8 = this.r[8],\n      r9 = this.r[9];\n\n  while (bytes >= 16) {\n    t0 = m[mpos+ 0] & 0xff | (m[mpos+ 1] & 0xff) << 8; h0 += ( t0                     ) & 0x1fff;\n    t1 = m[mpos+ 2] & 0xff | (m[mpos+ 3] & 0xff) << 8; h1 += ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n    t2 = m[mpos+ 4] & 0xff | (m[mpos+ 5] & 0xff) << 8; h2 += ((t1 >>> 10) | (t2 <<  6)) & 0x1fff;\n    t3 = m[mpos+ 6] & 0xff | (m[mpos+ 7] & 0xff) << 8; h3 += ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n    t4 = m[mpos+ 8] & 0xff | (m[mpos+ 9] & 0xff) << 8; h4 += ((t3 >>>  4) | (t4 << 12)) & 0x1fff;\n    h5 += ((t4 >>>  1)) & 0x1fff;\n    t5 = m[mpos+10] & 0xff | (m[mpos+11] & 0xff) << 8; h6 += ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n    t6 = m[mpos+12] & 0xff | (m[mpos+13] & 0xff) << 8; h7 += ((t5 >>> 11) | (t6 <<  5)) & 0x1fff;\n    t7 = m[mpos+14] & 0xff | (m[mpos+15] & 0xff) << 8; h8 += ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n    h9 += ((t7 >>> 5)) | hibit;\n\n    c = 0;\n\n    d0 = c;\n    d0 += h0 * r0;\n    d0 += h1 * (5 * r9);\n    d0 += h2 * (5 * r8);\n    d0 += h3 * (5 * r7);\n    d0 += h4 * (5 * r6);\n    c = (d0 >>> 13); d0 &= 0x1fff;\n    d0 += h5 * (5 * r5);\n    d0 += h6 * (5 * r4);\n    d0 += h7 * (5 * r3);\n    d0 += h8 * (5 * r2);\n    d0 += h9 * (5 * r1);\n    c += (d0 >>> 13); d0 &= 0x1fff;\n\n    d1 = c;\n    d1 += h0 * r1;\n    d1 += h1 * r0;\n    d1 += h2 * (5 * r9);\n    d1 += h3 * (5 * r8);\n    d1 += h4 * (5 * r7);\n    c = (d1 >>> 13); d1 &= 0x1fff;\n    d1 += h5 * (5 * r6);\n    d1 += h6 * (5 * r5);\n    d1 += h7 * (5 * r4);\n    d1 += h8 * (5 * r3);\n    d1 += h9 * (5 * r2);\n    c += (d1 >>> 13); d1 &= 0x1fff;\n\n    d2 = c;\n    d2 += h0 * r2;\n    d2 += h1 * r1;\n    d2 += h2 * r0;\n    d2 += h3 * (5 * r9);\n    d2 += h4 * (5 * r8);\n    c = (d2 >>> 13); d2 &= 0x1fff;\n    d2 += h5 * (5 * r7);\n    d2 += h6 * (5 * r6);\n    d2 += h7 * (5 * r5);\n    d2 += h8 * (5 * r4);\n    d2 += h9 * (5 * r3);\n    c += (d2 >>> 13); d2 &= 0x1fff;\n\n    d3 = c;\n    d3 += h0 * r3;\n    d3 += h1 * r2;\n    d3 += h2 * r1;\n    d3 += h3 * r0;\n    d3 += h4 * (5 * r9);\n    c = (d3 >>> 13); d3 &= 0x1fff;\n    d3 += h5 * (5 * r8);\n    d3 += h6 * (5 * r7);\n    d3 += h7 * (5 * r6);\n    d3 += h8 * (5 * r5);\n    d3 += h9 * (5 * r4);\n    c += (d3 >>> 13); d3 &= 0x1fff;\n\n    d4 = c;\n    d4 += h0 * r4;\n    d4 += h1 * r3;\n    d4 += h2 * r2;\n    d4 += h3 * r1;\n    d4 += h4 * r0;\n    c = (d4 >>> 13); d4 &= 0x1fff;\n    d4 += h5 * (5 * r9);\n    d4 += h6 * (5 * r8);\n    d4 += h7 * (5 * r7);\n    d4 += h8 * (5 * r6);\n    d4 += h9 * (5 * r5);\n    c += (d4 >>> 13); d4 &= 0x1fff;\n\n    d5 = c;\n    d5 += h0 * r5;\n    d5 += h1 * r4;\n    d5 += h2 * r3;\n    d5 += h3 * r2;\n    d5 += h4 * r1;\n    c = (d5 >>> 13); d5 &= 0x1fff;\n    d5 += h5 * r0;\n    d5 += h6 * (5 * r9);\n    d5 += h7 * (5 * r8);\n    d5 += h8 * (5 * r7);\n    d5 += h9 * (5 * r6);\n    c += (d5 >>> 13); d5 &= 0x1fff;\n\n    d6 = c;\n    d6 += h0 * r6;\n    d6 += h1 * r5;\n    d6 += h2 * r4;\n    d6 += h3 * r3;\n    d6 += h4 * r2;\n    c = (d6 >>> 13); d6 &= 0x1fff;\n    d6 += h5 * r1;\n    d6 += h6 * r0;\n    d6 += h7 * (5 * r9);\n    d6 += h8 * (5 * r8);\n    d6 += h9 * (5 * r7);\n    c += (d6 >>> 13); d6 &= 0x1fff;\n\n    d7 = c;\n    d7 += h0 * r7;\n    d7 += h1 * r6;\n    d7 += h2 * r5;\n    d7 += h3 * r4;\n    d7 += h4 * r3;\n    c = (d7 >>> 13); d7 &= 0x1fff;\n    d7 += h5 * r2;\n    d7 += h6 * r1;\n    d7 += h7 * r0;\n    d7 += h8 * (5 * r9);\n    d7 += h9 * (5 * r8);\n    c += (d7 >>> 13); d7 &= 0x1fff;\n\n    d8 = c;\n    d8 += h0 * r8;\n    d8 += h1 * r7;\n    d8 += h2 * r6;\n    d8 += h3 * r5;\n    d8 += h4 * r4;\n    c = (d8 >>> 13); d8 &= 0x1fff;\n    d8 += h5 * r3;\n    d8 += h6 * r2;\n    d8 += h7 * r1;\n    d8 += h8 * r0;\n    d8 += h9 * (5 * r9);\n    c += (d8 >>> 13); d8 &= 0x1fff;\n\n    d9 = c;\n    d9 += h0 * r9;\n    d9 += h1 * r8;\n    d9 += h2 * r7;\n    d9 += h3 * r6;\n    d9 += h4 * r5;\n    c = (d9 >>> 13); d9 &= 0x1fff;\n    d9 += h5 * r4;\n    d9 += h6 * r3;\n    d9 += h7 * r2;\n    d9 += h8 * r1;\n    d9 += h9 * r0;\n    c += (d9 >>> 13); d9 &= 0x1fff;\n\n    c = (((c << 2) + c)) | 0;\n    c = (c + d0) | 0;\n    d0 = c & 0x1fff;\n    c = (c >>> 13);\n    d1 += c;\n\n    h0 = d0;\n    h1 = d1;\n    h2 = d2;\n    h3 = d3;\n    h4 = d4;\n    h5 = d5;\n    h6 = d6;\n    h7 = d7;\n    h8 = d8;\n    h9 = d9;\n\n    mpos += 16;\n    bytes -= 16;\n  }\n  this.h[0] = h0;\n  this.h[1] = h1;\n  this.h[2] = h2;\n  this.h[3] = h3;\n  this.h[4] = h4;\n  this.h[5] = h5;\n  this.h[6] = h6;\n  this.h[7] = h7;\n  this.h[8] = h8;\n  this.h[9] = h9;\n};\n\npoly1305.prototype.finish = function(mac, macpos) {\n  var g = new Uint16Array(10);\n  var c, mask, f, i;\n\n  if (this.leftover) {\n    i = this.leftover;\n    this.buffer[i++] = 1;\n    for (; i < 16; i++) this.buffer[i] = 0;\n    this.fin = 1;\n    this.blocks(this.buffer, 0, 16);\n  }\n\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  for (i = 2; i < 10; i++) {\n    this.h[i] += c;\n    c = this.h[i] >>> 13;\n    this.h[i] &= 0x1fff;\n  }\n  this.h[0] += (c * 5);\n  c = this.h[0] >>> 13;\n  this.h[0] &= 0x1fff;\n  this.h[1] += c;\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  this.h[2] += c;\n\n  g[0] = this.h[0] + 5;\n  c = g[0] >>> 13;\n  g[0] &= 0x1fff;\n  for (i = 1; i < 10; i++) {\n    g[i] = this.h[i] + c;\n    c = g[i] >>> 13;\n    g[i] &= 0x1fff;\n  }\n  g[9] -= (1 << 13);\n\n  mask = (c ^ 1) - 1;\n  for (i = 0; i < 10; i++) g[i] &= mask;\n  mask = ~mask;\n  for (i = 0; i < 10; i++) this.h[i] = (this.h[i] & mask) | g[i];\n\n  this.h[0] = ((this.h[0]       ) | (this.h[1] << 13)                    ) & 0xffff;\n  this.h[1] = ((this.h[1] >>>  3) | (this.h[2] << 10)                    ) & 0xffff;\n  this.h[2] = ((this.h[2] >>>  6) | (this.h[3] <<  7)                    ) & 0xffff;\n  this.h[3] = ((this.h[3] >>>  9) | (this.h[4] <<  4)                    ) & 0xffff;\n  this.h[4] = ((this.h[4] >>> 12) | (this.h[5] <<  1) | (this.h[6] << 14)) & 0xffff;\n  this.h[5] = ((this.h[6] >>>  2) | (this.h[7] << 11)                    ) & 0xffff;\n  this.h[6] = ((this.h[7] >>>  5) | (this.h[8] <<  8)                    ) & 0xffff;\n  this.h[7] = ((this.h[8] >>>  8) | (this.h[9] <<  5)                    ) & 0xffff;\n\n  f = this.h[0] + this.pad[0];\n  this.h[0] = f & 0xffff;\n  for (i = 1; i < 8; i++) {\n    f = (((this.h[i] + this.pad[i]) | 0) + (f >>> 16)) | 0;\n    this.h[i] = f & 0xffff;\n  }\n\n  mac[macpos+ 0] = (this.h[0] >>> 0) & 0xff;\n  mac[macpos+ 1] = (this.h[0] >>> 8) & 0xff;\n  mac[macpos+ 2] = (this.h[1] >>> 0) & 0xff;\n  mac[macpos+ 3] = (this.h[1] >>> 8) & 0xff;\n  mac[macpos+ 4] = (this.h[2] >>> 0) & 0xff;\n  mac[macpos+ 5] = (this.h[2] >>> 8) & 0xff;\n  mac[macpos+ 6] = (this.h[3] >>> 0) & 0xff;\n  mac[macpos+ 7] = (this.h[3] >>> 8) & 0xff;\n  mac[macpos+ 8] = (this.h[4] >>> 0) & 0xff;\n  mac[macpos+ 9] = (this.h[4] >>> 8) & 0xff;\n  mac[macpos+10] = (this.h[5] >>> 0) & 0xff;\n  mac[macpos+11] = (this.h[5] >>> 8) & 0xff;\n  mac[macpos+12] = (this.h[6] >>> 0) & 0xff;\n  mac[macpos+13] = (this.h[6] >>> 8) & 0xff;\n  mac[macpos+14] = (this.h[7] >>> 0) & 0xff;\n  mac[macpos+15] = (this.h[7] >>> 8) & 0xff;\n};\n\npoly1305.prototype.update = function(m, mpos, bytes) {\n  var i, want;\n\n  if (this.leftover) {\n    want = (16 - this.leftover);\n    if (want > bytes)\n      want = bytes;\n    for (i = 0; i < want; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    bytes -= want;\n    mpos += want;\n    this.leftover += want;\n    if (this.leftover < 16)\n      return;\n    this.blocks(this.buffer, 0, 16);\n    this.leftover = 0;\n  }\n\n  if (bytes >= 16) {\n    want = bytes - (bytes % 16);\n    this.blocks(m, mpos, want);\n    mpos += want;\n    bytes -= want;\n  }\n\n  if (bytes) {\n    for (i = 0; i < bytes; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    this.leftover += bytes;\n  }\n};\n\nfunction crypto_onetimeauth(out, outpos, m, mpos, n, k) {\n  var s = new poly1305(k);\n  s.update(m, mpos, n);\n  s.finish(out, outpos);\n  return 0;\n}\n\nfunction crypto_onetimeauth_verify(h, hpos, m, mpos, n, k) {\n  var x = new Uint8Array(16);\n  crypto_onetimeauth(x,0,m,mpos,n,k);\n  return crypto_verify_16(h,hpos,x,0);\n}\n\nfunction crypto_secretbox(c,m,d,n,k) {\n  var i;\n  if (d < 32) return -1;\n  crypto_stream_xor(c,0,m,0,d,n,k);\n  crypto_onetimeauth(c, 16, c, 32, d - 32, c);\n  for (i = 0; i < 16; i++) c[i] = 0;\n  return 0;\n}\n\nfunction crypto_secretbox_open(m,c,d,n,k) {\n  var i;\n  var x = new Uint8Array(32);\n  if (d < 32) return -1;\n  crypto_stream(x,0,32,n,k);\n  if (crypto_onetimeauth_verify(c, 16,c, 32,d - 32,x) !== 0) return -1;\n  crypto_stream_xor(m,0,c,0,d,n,k);\n  for (i = 0; i < 32; i++) m[i] = 0;\n  return 0;\n}\n\nfunction set25519(r, a) {\n  var i;\n  for (i = 0; i < 16; i++) r[i] = a[i]|0;\n}\n\nfunction car25519(o) {\n  var i, v, c = 1;\n  for (i = 0; i < 16; i++) {\n    v = o[i] + c + 65535;\n    c = Math.floor(v / 65536);\n    o[i] = v - c * 65536;\n  }\n  o[0] += c-1 + 37 * (c-1);\n}\n\nfunction sel25519(p, q, b) {\n  var t, c = ~(b-1);\n  for (var i = 0; i < 16; i++) {\n    t = c & (p[i] ^ q[i]);\n    p[i] ^= t;\n    q[i] ^= t;\n  }\n}\n\nfunction pack25519(o, n) {\n  var i, j, b;\n  var m = gf(), t = gf();\n  for (i = 0; i < 16; i++) t[i] = n[i];\n  car25519(t);\n  car25519(t);\n  car25519(t);\n  for (j = 0; j < 2; j++) {\n    m[0] = t[0] - 0xffed;\n    for (i = 1; i < 15; i++) {\n      m[i] = t[i] - 0xffff - ((m[i-1]>>16) & 1);\n      m[i-1] &= 0xffff;\n    }\n    m[15] = t[15] - 0x7fff - ((m[14]>>16) & 1);\n    b = (m[15]>>16) & 1;\n    m[14] &= 0xffff;\n    sel25519(t, m, 1-b);\n  }\n  for (i = 0; i < 16; i++) {\n    o[2*i] = t[i] & 0xff;\n    o[2*i+1] = t[i]>>8;\n  }\n}\n\nfunction neq25519(a, b) {\n  var c = new Uint8Array(32), d = new Uint8Array(32);\n  pack25519(c, a);\n  pack25519(d, b);\n  return crypto_verify_32(c, 0, d, 0);\n}\n\nfunction par25519(a) {\n  var d = new Uint8Array(32);\n  pack25519(d, a);\n  return d[0] & 1;\n}\n\nfunction unpack25519(o, n) {\n  var i;\n  for (i = 0; i < 16; i++) o[i] = n[2*i] + (n[2*i+1] << 8);\n  o[15] &= 0x7fff;\n}\n\nfunction A(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] + b[i];\n}\n\nfunction Z(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] - b[i];\n}\n\nfunction M(o, a, b) {\n  var v, c,\n     t0 = 0,  t1 = 0,  t2 = 0,  t3 = 0,  t4 = 0,  t5 = 0,  t6 = 0,  t7 = 0,\n     t8 = 0,  t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0,\n    t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0,\n    t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0,\n    b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11],\n    b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n\n  v = a[0];\n  t0 += v * b0;\n  t1 += v * b1;\n  t2 += v * b2;\n  t3 += v * b3;\n  t4 += v * b4;\n  t5 += v * b5;\n  t6 += v * b6;\n  t7 += v * b7;\n  t8 += v * b8;\n  t9 += v * b9;\n  t10 += v * b10;\n  t11 += v * b11;\n  t12 += v * b12;\n  t13 += v * b13;\n  t14 += v * b14;\n  t15 += v * b15;\n  v = a[1];\n  t1 += v * b0;\n  t2 += v * b1;\n  t3 += v * b2;\n  t4 += v * b3;\n  t5 += v * b4;\n  t6 += v * b5;\n  t7 += v * b6;\n  t8 += v * b7;\n  t9 += v * b8;\n  t10 += v * b9;\n  t11 += v * b10;\n  t12 += v * b11;\n  t13 += v * b12;\n  t14 += v * b13;\n  t15 += v * b14;\n  t16 += v * b15;\n  v = a[2];\n  t2 += v * b0;\n  t3 += v * b1;\n  t4 += v * b2;\n  t5 += v * b3;\n  t6 += v * b4;\n  t7 += v * b5;\n  t8 += v * b6;\n  t9 += v * b7;\n  t10 += v * b8;\n  t11 += v * b9;\n  t12 += v * b10;\n  t13 += v * b11;\n  t14 += v * b12;\n  t15 += v * b13;\n  t16 += v * b14;\n  t17 += v * b15;\n  v = a[3];\n  t3 += v * b0;\n  t4 += v * b1;\n  t5 += v * b2;\n  t6 += v * b3;\n  t7 += v * b4;\n  t8 += v * b5;\n  t9 += v * b6;\n  t10 += v * b7;\n  t11 += v * b8;\n  t12 += v * b9;\n  t13 += v * b10;\n  t14 += v * b11;\n  t15 += v * b12;\n  t16 += v * b13;\n  t17 += v * b14;\n  t18 += v * b15;\n  v = a[4];\n  t4 += v * b0;\n  t5 += v * b1;\n  t6 += v * b2;\n  t7 += v * b3;\n  t8 += v * b4;\n  t9 += v * b5;\n  t10 += v * b6;\n  t11 += v * b7;\n  t12 += v * b8;\n  t13 += v * b9;\n  t14 += v * b10;\n  t15 += v * b11;\n  t16 += v * b12;\n  t17 += v * b13;\n  t18 += v * b14;\n  t19 += v * b15;\n  v = a[5];\n  t5 += v * b0;\n  t6 += v * b1;\n  t7 += v * b2;\n  t8 += v * b3;\n  t9 += v * b4;\n  t10 += v * b5;\n  t11 += v * b6;\n  t12 += v * b7;\n  t13 += v * b8;\n  t14 += v * b9;\n  t15 += v * b10;\n  t16 += v * b11;\n  t17 += v * b12;\n  t18 += v * b13;\n  t19 += v * b14;\n  t20 += v * b15;\n  v = a[6];\n  t6 += v * b0;\n  t7 += v * b1;\n  t8 += v * b2;\n  t9 += v * b3;\n  t10 += v * b4;\n  t11 += v * b5;\n  t12 += v * b6;\n  t13 += v * b7;\n  t14 += v * b8;\n  t15 += v * b9;\n  t16 += v * b10;\n  t17 += v * b11;\n  t18 += v * b12;\n  t19 += v * b13;\n  t20 += v * b14;\n  t21 += v * b15;\n  v = a[7];\n  t7 += v * b0;\n  t8 += v * b1;\n  t9 += v * b2;\n  t10 += v * b3;\n  t11 += v * b4;\n  t12 += v * b5;\n  t13 += v * b6;\n  t14 += v * b7;\n  t15 += v * b8;\n  t16 += v * b9;\n  t17 += v * b10;\n  t18 += v * b11;\n  t19 += v * b12;\n  t20 += v * b13;\n  t21 += v * b14;\n  t22 += v * b15;\n  v = a[8];\n  t8 += v * b0;\n  t9 += v * b1;\n  t10 += v * b2;\n  t11 += v * b3;\n  t12 += v * b4;\n  t13 += v * b5;\n  t14 += v * b6;\n  t15 += v * b7;\n  t16 += v * b8;\n  t17 += v * b9;\n  t18 += v * b10;\n  t19 += v * b11;\n  t20 += v * b12;\n  t21 += v * b13;\n  t22 += v * b14;\n  t23 += v * b15;\n  v = a[9];\n  t9 += v * b0;\n  t10 += v * b1;\n  t11 += v * b2;\n  t12 += v * b3;\n  t13 += v * b4;\n  t14 += v * b5;\n  t15 += v * b6;\n  t16 += v * b7;\n  t17 += v * b8;\n  t18 += v * b9;\n  t19 += v * b10;\n  t20 += v * b11;\n  t21 += v * b12;\n  t22 += v * b13;\n  t23 += v * b14;\n  t24 += v * b15;\n  v = a[10];\n  t10 += v * b0;\n  t11 += v * b1;\n  t12 += v * b2;\n  t13 += v * b3;\n  t14 += v * b4;\n  t15 += v * b5;\n  t16 += v * b6;\n  t17 += v * b7;\n  t18 += v * b8;\n  t19 += v * b9;\n  t20 += v * b10;\n  t21 += v * b11;\n  t22 += v * b12;\n  t23 += v * b13;\n  t24 += v * b14;\n  t25 += v * b15;\n  v = a[11];\n  t11 += v * b0;\n  t12 += v * b1;\n  t13 += v * b2;\n  t14 += v * b3;\n  t15 += v * b4;\n  t16 += v * b5;\n  t17 += v * b6;\n  t18 += v * b7;\n  t19 += v * b8;\n  t20 += v * b9;\n  t21 += v * b10;\n  t22 += v * b11;\n  t23 += v * b12;\n  t24 += v * b13;\n  t25 += v * b14;\n  t26 += v * b15;\n  v = a[12];\n  t12 += v * b0;\n  t13 += v * b1;\n  t14 += v * b2;\n  t15 += v * b3;\n  t16 += v * b4;\n  t17 += v * b5;\n  t18 += v * b6;\n  t19 += v * b7;\n  t20 += v * b8;\n  t21 += v * b9;\n  t22 += v * b10;\n  t23 += v * b11;\n  t24 += v * b12;\n  t25 += v * b13;\n  t26 += v * b14;\n  t27 += v * b15;\n  v = a[13];\n  t13 += v * b0;\n  t14 += v * b1;\n  t15 += v * b2;\n  t16 += v * b3;\n  t17 += v * b4;\n  t18 += v * b5;\n  t19 += v * b6;\n  t20 += v * b7;\n  t21 += v * b8;\n  t22 += v * b9;\n  t23 += v * b10;\n  t24 += v * b11;\n  t25 += v * b12;\n  t26 += v * b13;\n  t27 += v * b14;\n  t28 += v * b15;\n  v = a[14];\n  t14 += v * b0;\n  t15 += v * b1;\n  t16 += v * b2;\n  t17 += v * b3;\n  t18 += v * b4;\n  t19 += v * b5;\n  t20 += v * b6;\n  t21 += v * b7;\n  t22 += v * b8;\n  t23 += v * b9;\n  t24 += v * b10;\n  t25 += v * b11;\n  t26 += v * b12;\n  t27 += v * b13;\n  t28 += v * b14;\n  t29 += v * b15;\n  v = a[15];\n  t15 += v * b0;\n  t16 += v * b1;\n  t17 += v * b2;\n  t18 += v * b3;\n  t19 += v * b4;\n  t20 += v * b5;\n  t21 += v * b6;\n  t22 += v * b7;\n  t23 += v * b8;\n  t24 += v * b9;\n  t25 += v * b10;\n  t26 += v * b11;\n  t27 += v * b12;\n  t28 += v * b13;\n  t29 += v * b14;\n  t30 += v * b15;\n\n  t0  += 38 * t16;\n  t1  += 38 * t17;\n  t2  += 38 * t18;\n  t3  += 38 * t19;\n  t4  += 38 * t20;\n  t5  += 38 * t21;\n  t6  += 38 * t22;\n  t7  += 38 * t23;\n  t8  += 38 * t24;\n  t9  += 38 * t25;\n  t10 += 38 * t26;\n  t11 += 38 * t27;\n  t12 += 38 * t28;\n  t13 += 38 * t29;\n  t14 += 38 * t30;\n  // t15 left as is\n\n  // first car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  // second car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  o[ 0] = t0;\n  o[ 1] = t1;\n  o[ 2] = t2;\n  o[ 3] = t3;\n  o[ 4] = t4;\n  o[ 5] = t5;\n  o[ 6] = t6;\n  o[ 7] = t7;\n  o[ 8] = t8;\n  o[ 9] = t9;\n  o[10] = t10;\n  o[11] = t11;\n  o[12] = t12;\n  o[13] = t13;\n  o[14] = t14;\n  o[15] = t15;\n}\n\nfunction S(o, a) {\n  M(o, a, a);\n}\n\nfunction inv25519(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 253; a >= 0; a--) {\n    S(c, c);\n    if(a !== 2 && a !== 4) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction pow2523(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 250; a >= 0; a--) {\n      S(c, c);\n      if(a !== 1) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction crypto_scalarmult(q, n, p) {\n  var z = new Uint8Array(32);\n  var x = new Float64Array(80), r, i;\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf();\n  for (i = 0; i < 31; i++) z[i] = n[i];\n  z[31]=(n[31]&127)|64;\n  z[0]&=248;\n  unpack25519(x,p);\n  for (i = 0; i < 16; i++) {\n    b[i]=x[i];\n    d[i]=a[i]=c[i]=0;\n  }\n  a[0]=d[0]=1;\n  for (i=254; i>=0; --i) {\n    r=(z[i>>>3]>>>(i&7))&1;\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n    A(e,a,c);\n    Z(a,a,c);\n    A(c,b,d);\n    Z(b,b,d);\n    S(d,e);\n    S(f,a);\n    M(a,c,a);\n    M(c,b,e);\n    A(e,a,c);\n    Z(a,a,c);\n    S(b,a);\n    Z(c,d,f);\n    M(a,c,_121665);\n    A(a,a,d);\n    M(c,c,a);\n    M(a,d,f);\n    M(d,b,x);\n    S(b,e);\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n  }\n  for (i = 0; i < 16; i++) {\n    x[i+16]=a[i];\n    x[i+32]=c[i];\n    x[i+48]=b[i];\n    x[i+64]=d[i];\n  }\n  var x32 = x.subarray(32);\n  var x16 = x.subarray(16);\n  inv25519(x32,x32);\n  M(x16,x16,x32);\n  pack25519(q,x16);\n  return 0;\n}\n\nfunction crypto_scalarmult_base(q, n) {\n  return crypto_scalarmult(q, n, _9);\n}\n\nfunction crypto_box_keypair(y, x) {\n  randombytes(x, 32);\n  return crypto_scalarmult_base(y, x);\n}\n\nfunction crypto_box_beforenm(k, y, x) {\n  var s = new Uint8Array(32);\n  crypto_scalarmult(s, x, y);\n  return crypto_core_hsalsa20(k, _0, s, sigma);\n}\n\nvar crypto_box_afternm = crypto_secretbox;\nvar crypto_box_open_afternm = crypto_secretbox_open;\n\nfunction crypto_box(c, m, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_afternm(c, m, d, n, k);\n}\n\nfunction crypto_box_open(m, c, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_open_afternm(m, c, d, n, k);\n}\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction crypto_hashblocks_hl(hh, hl, m, n) {\n  var wh = new Int32Array(16), wl = new Int32Array(16),\n      bh0, bh1, bh2, bh3, bh4, bh5, bh6, bh7,\n      bl0, bl1, bl2, bl3, bl4, bl5, bl6, bl7,\n      th, tl, i, j, h, l, a, b, c, d;\n\n  var ah0 = hh[0],\n      ah1 = hh[1],\n      ah2 = hh[2],\n      ah3 = hh[3],\n      ah4 = hh[4],\n      ah5 = hh[5],\n      ah6 = hh[6],\n      ah7 = hh[7],\n\n      al0 = hl[0],\n      al1 = hl[1],\n      al2 = hl[2],\n      al3 = hl[3],\n      al4 = hl[4],\n      al5 = hl[5],\n      al6 = hl[6],\n      al7 = hl[7];\n\n  var pos = 0;\n  while (n >= 128) {\n    for (i = 0; i < 16; i++) {\n      j = 8 * i + pos;\n      wh[i] = (m[j+0] << 24) | (m[j+1] << 16) | (m[j+2] << 8) | m[j+3];\n      wl[i] = (m[j+4] << 24) | (m[j+5] << 16) | (m[j+6] << 8) | m[j+7];\n    }\n    for (i = 0; i < 80; i++) {\n      bh0 = ah0;\n      bh1 = ah1;\n      bh2 = ah2;\n      bh3 = ah3;\n      bh4 = ah4;\n      bh5 = ah5;\n      bh6 = ah6;\n      bh7 = ah7;\n\n      bl0 = al0;\n      bl1 = al1;\n      bl2 = al2;\n      bl3 = al3;\n      bl4 = al4;\n      bl5 = al5;\n      bl6 = al6;\n      bl7 = al7;\n\n      // add\n      h = ah7;\n      l = al7;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma1\n      h = ((ah4 >>> 14) | (al4 << (32-14))) ^ ((ah4 >>> 18) | (al4 << (32-18))) ^ ((al4 >>> (41-32)) | (ah4 << (32-(41-32))));\n      l = ((al4 >>> 14) | (ah4 << (32-14))) ^ ((al4 >>> 18) | (ah4 << (32-18))) ^ ((ah4 >>> (41-32)) | (al4 << (32-(41-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Ch\n      h = (ah4 & ah5) ^ (~ah4 & ah6);\n      l = (al4 & al5) ^ (~al4 & al6);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // K\n      h = K[i*2];\n      l = K[i*2+1];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // w\n      h = wh[i%16];\n      l = wl[i%16];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      th = c & 0xffff | d << 16;\n      tl = a & 0xffff | b << 16;\n\n      // add\n      h = th;\n      l = tl;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma0\n      h = ((ah0 >>> 28) | (al0 << (32-28))) ^ ((al0 >>> (34-32)) | (ah0 << (32-(34-32)))) ^ ((al0 >>> (39-32)) | (ah0 << (32-(39-32))));\n      l = ((al0 >>> 28) | (ah0 << (32-28))) ^ ((ah0 >>> (34-32)) | (al0 << (32-(34-32)))) ^ ((ah0 >>> (39-32)) | (al0 << (32-(39-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Maj\n      h = (ah0 & ah1) ^ (ah0 & ah2) ^ (ah1 & ah2);\n      l = (al0 & al1) ^ (al0 & al2) ^ (al1 & al2);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh7 = (c & 0xffff) | (d << 16);\n      bl7 = (a & 0xffff) | (b << 16);\n\n      // add\n      h = bh3;\n      l = bl3;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      h = th;\n      l = tl;\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh3 = (c & 0xffff) | (d << 16);\n      bl3 = (a & 0xffff) | (b << 16);\n\n      ah1 = bh0;\n      ah2 = bh1;\n      ah3 = bh2;\n      ah4 = bh3;\n      ah5 = bh4;\n      ah6 = bh5;\n      ah7 = bh6;\n      ah0 = bh7;\n\n      al1 = bl0;\n      al2 = bl1;\n      al3 = bl2;\n      al4 = bl3;\n      al5 = bl4;\n      al6 = bl5;\n      al7 = bl6;\n      al0 = bl7;\n\n      if (i%16 === 15) {\n        for (j = 0; j < 16; j++) {\n          // add\n          h = wh[j];\n          l = wl[j];\n\n          a = l & 0xffff; b = l >>> 16;\n          c = h & 0xffff; d = h >>> 16;\n\n          h = wh[(j+9)%16];\n          l = wl[(j+9)%16];\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma0\n          th = wh[(j+1)%16];\n          tl = wl[(j+1)%16];\n          h = ((th >>> 1) | (tl << (32-1))) ^ ((th >>> 8) | (tl << (32-8))) ^ (th >>> 7);\n          l = ((tl >>> 1) | (th << (32-1))) ^ ((tl >>> 8) | (th << (32-8))) ^ ((tl >>> 7) | (th << (32-7)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma1\n          th = wh[(j+14)%16];\n          tl = wl[(j+14)%16];\n          h = ((th >>> 19) | (tl << (32-19))) ^ ((tl >>> (61-32)) | (th << (32-(61-32)))) ^ (th >>> 6);\n          l = ((tl >>> 19) | (th << (32-19))) ^ ((th >>> (61-32)) | (tl << (32-(61-32)))) ^ ((tl >>> 6) | (th << (32-6)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          b += a >>> 16;\n          c += b >>> 16;\n          d += c >>> 16;\n\n          wh[j] = (c & 0xffff) | (d << 16);\n          wl[j] = (a & 0xffff) | (b << 16);\n        }\n      }\n    }\n\n    // add\n    h = ah0;\n    l = al0;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[0];\n    l = hl[0];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[0] = ah0 = (c & 0xffff) | (d << 16);\n    hl[0] = al0 = (a & 0xffff) | (b << 16);\n\n    h = ah1;\n    l = al1;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[1];\n    l = hl[1];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[1] = ah1 = (c & 0xffff) | (d << 16);\n    hl[1] = al1 = (a & 0xffff) | (b << 16);\n\n    h = ah2;\n    l = al2;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[2];\n    l = hl[2];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[2] = ah2 = (c & 0xffff) | (d << 16);\n    hl[2] = al2 = (a & 0xffff) | (b << 16);\n\n    h = ah3;\n    l = al3;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[3];\n    l = hl[3];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[3] = ah3 = (c & 0xffff) | (d << 16);\n    hl[3] = al3 = (a & 0xffff) | (b << 16);\n\n    h = ah4;\n    l = al4;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[4];\n    l = hl[4];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[4] = ah4 = (c & 0xffff) | (d << 16);\n    hl[4] = al4 = (a & 0xffff) | (b << 16);\n\n    h = ah5;\n    l = al5;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[5];\n    l = hl[5];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[5] = ah5 = (c & 0xffff) | (d << 16);\n    hl[5] = al5 = (a & 0xffff) | (b << 16);\n\n    h = ah6;\n    l = al6;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[6];\n    l = hl[6];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[6] = ah6 = (c & 0xffff) | (d << 16);\n    hl[6] = al6 = (a & 0xffff) | (b << 16);\n\n    h = ah7;\n    l = al7;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[7];\n    l = hl[7];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[7] = ah7 = (c & 0xffff) | (d << 16);\n    hl[7] = al7 = (a & 0xffff) | (b << 16);\n\n    pos += 128;\n    n -= 128;\n  }\n\n  return n;\n}\n\nfunction crypto_hash(out, m, n) {\n  var hh = new Int32Array(8),\n      hl = new Int32Array(8),\n      x = new Uint8Array(256),\n      i, b = n;\n\n  hh[0] = 0x6a09e667;\n  hh[1] = 0xbb67ae85;\n  hh[2] = 0x3c6ef372;\n  hh[3] = 0xa54ff53a;\n  hh[4] = 0x510e527f;\n  hh[5] = 0x9b05688c;\n  hh[6] = 0x1f83d9ab;\n  hh[7] = 0x5be0cd19;\n\n  hl[0] = 0xf3bcc908;\n  hl[1] = 0x84caa73b;\n  hl[2] = 0xfe94f82b;\n  hl[3] = 0x5f1d36f1;\n  hl[4] = 0xade682d1;\n  hl[5] = 0x2b3e6c1f;\n  hl[6] = 0xfb41bd6b;\n  hl[7] = 0x137e2179;\n\n  crypto_hashblocks_hl(hh, hl, m, n);\n  n %= 128;\n\n  for (i = 0; i < n; i++) x[i] = m[b-n+i];\n  x[n] = 128;\n\n  n = 256-128*(n<112?1:0);\n  x[n-9] = 0;\n  ts64(x, n-8,  (b / 0x20000000) | 0, b << 3);\n  crypto_hashblocks_hl(hh, hl, x, n);\n\n  for (i = 0; i < 8; i++) ts64(out, 8*i, hh[i], hl[i]);\n\n  return 0;\n}\n\nfunction add(p, q) {\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf(),\n      g = gf(), h = gf(), t = gf();\n\n  Z(a, p[1], p[0]);\n  Z(t, q[1], q[0]);\n  M(a, a, t);\n  A(b, p[0], p[1]);\n  A(t, q[0], q[1]);\n  M(b, b, t);\n  M(c, p[3], q[3]);\n  M(c, c, D2);\n  M(d, p[2], q[2]);\n  A(d, d, d);\n  Z(e, b, a);\n  Z(f, d, c);\n  A(g, d, c);\n  A(h, b, a);\n\n  M(p[0], e, f);\n  M(p[1], h, g);\n  M(p[2], g, f);\n  M(p[3], e, h);\n}\n\nfunction cswap(p, q, b) {\n  var i;\n  for (i = 0; i < 4; i++) {\n    sel25519(p[i], q[i], b);\n  }\n}\n\nfunction pack(r, p) {\n  var tx = gf(), ty = gf(), zi = gf();\n  inv25519(zi, p[2]);\n  M(tx, p[0], zi);\n  M(ty, p[1], zi);\n  pack25519(r, ty);\n  r[31] ^= par25519(tx) << 7;\n}\n\nfunction scalarmult(p, q, s) {\n  var b, i;\n  set25519(p[0], gf0);\n  set25519(p[1], gf1);\n  set25519(p[2], gf1);\n  set25519(p[3], gf0);\n  for (i = 255; i >= 0; --i) {\n    b = (s[(i/8)|0] >> (i&7)) & 1;\n    cswap(p, q, b);\n    add(q, p);\n    add(p, p);\n    cswap(p, q, b);\n  }\n}\n\nfunction scalarbase(p, s) {\n  var q = [gf(), gf(), gf(), gf()];\n  set25519(q[0], X);\n  set25519(q[1], Y);\n  set25519(q[2], gf1);\n  M(q[3], X, Y);\n  scalarmult(p, q, s);\n}\n\nfunction crypto_sign_keypair(pk, sk, seeded) {\n  var d = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n  var i;\n\n  if (!seeded) randombytes(sk, 32);\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  scalarbase(p, d);\n  pack(pk, p);\n\n  for (i = 0; i < 32; i++) sk[i+32] = pk[i];\n  return 0;\n}\n\nvar L = new Float64Array([0xed, 0xd3, 0xf5, 0x5c, 0x1a, 0x63, 0x12, 0x58, 0xd6, 0x9c, 0xf7, 0xa2, 0xde, 0xf9, 0xde, 0x14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x10]);\n\nfunction modL(r, x) {\n  var carry, i, j, k;\n  for (i = 63; i >= 32; --i) {\n    carry = 0;\n    for (j = i - 32, k = i - 12; j < k; ++j) {\n      x[j] += carry - 16 * x[i] * L[j - (i - 32)];\n      carry = Math.floor((x[j] + 128) / 256);\n      x[j] -= carry * 256;\n    }\n    x[j] += carry;\n    x[i] = 0;\n  }\n  carry = 0;\n  for (j = 0; j < 32; j++) {\n    x[j] += carry - (x[31] >> 4) * L[j];\n    carry = x[j] >> 8;\n    x[j] &= 255;\n  }\n  for (j = 0; j < 32; j++) x[j] -= carry * L[j];\n  for (i = 0; i < 32; i++) {\n    x[i+1] += x[i] >> 8;\n    r[i] = x[i] & 255;\n  }\n}\n\nfunction reduce(r) {\n  var x = new Float64Array(64), i;\n  for (i = 0; i < 64; i++) x[i] = r[i];\n  for (i = 0; i < 64; i++) r[i] = 0;\n  modL(r, x);\n}\n\n// Note: difference from C - smlen returned, not passed as argument.\nfunction crypto_sign(sm, m, n, sk) {\n  var d = new Uint8Array(64), h = new Uint8Array(64), r = new Uint8Array(64);\n  var i, j, x = new Float64Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  var smlen = n + 64;\n  for (i = 0; i < n; i++) sm[64 + i] = m[i];\n  for (i = 0; i < 32; i++) sm[32 + i] = d[32 + i];\n\n  crypto_hash(r, sm.subarray(32), n+32);\n  reduce(r);\n  scalarbase(p, r);\n  pack(sm, p);\n\n  for (i = 32; i < 64; i++) sm[i] = sk[i];\n  crypto_hash(h, sm, n + 64);\n  reduce(h);\n\n  for (i = 0; i < 64; i++) x[i] = 0;\n  for (i = 0; i < 32; i++) x[i] = r[i];\n  for (i = 0; i < 32; i++) {\n    for (j = 0; j < 32; j++) {\n      x[i+j] += h[i] * d[j];\n    }\n  }\n\n  modL(sm.subarray(32), x);\n  return smlen;\n}\n\nfunction unpackneg(r, p) {\n  var t = gf(), chk = gf(), num = gf(),\n      den = gf(), den2 = gf(), den4 = gf(),\n      den6 = gf();\n\n  set25519(r[2], gf1);\n  unpack25519(r[1], p);\n  S(num, r[1]);\n  M(den, num, D);\n  Z(num, num, r[2]);\n  A(den, r[2], den);\n\n  S(den2, den);\n  S(den4, den2);\n  M(den6, den4, den2);\n  M(t, den6, num);\n  M(t, t, den);\n\n  pow2523(t, t);\n  M(t, t, num);\n  M(t, t, den);\n  M(t, t, den);\n  M(r[0], t, den);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) M(r[0], r[0], I);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) return -1;\n\n  if (par25519(r[0]) === (p[31]>>7)) Z(r[0], gf0, r[0]);\n\n  M(r[3], r[0], r[1]);\n  return 0;\n}\n\nfunction crypto_sign_open(m, sm, n, pk) {\n  var i;\n  var t = new Uint8Array(32), h = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()],\n      q = [gf(), gf(), gf(), gf()];\n\n  if (n < 64) return -1;\n\n  if (unpackneg(q, pk)) return -1;\n\n  for (i = 0; i < n; i++) m[i] = sm[i];\n  for (i = 0; i < 32; i++) m[i+32] = pk[i];\n  crypto_hash(h, m, n);\n  reduce(h);\n  scalarmult(p, q, h);\n\n  scalarbase(q, sm.subarray(32));\n  add(p, q);\n  pack(t, p);\n\n  n -= 64;\n  if (crypto_verify_32(sm, 0, t, 0)) {\n    for (i = 0; i < n; i++) m[i] = 0;\n    return -1;\n  }\n\n  for (i = 0; i < n; i++) m[i] = sm[i + 64];\n  return n;\n}\n\nvar crypto_secretbox_KEYBYTES = 32,\n    crypto_secretbox_NONCEBYTES = 24,\n    crypto_secretbox_ZEROBYTES = 32,\n    crypto_secretbox_BOXZEROBYTES = 16,\n    crypto_scalarmult_BYTES = 32,\n    crypto_scalarmult_SCALARBYTES = 32,\n    crypto_box_PUBLICKEYBYTES = 32,\n    crypto_box_SECRETKEYBYTES = 32,\n    crypto_box_BEFORENMBYTES = 32,\n    crypto_box_NONCEBYTES = crypto_secretbox_NONCEBYTES,\n    crypto_box_ZEROBYTES = crypto_secretbox_ZEROBYTES,\n    crypto_box_BOXZEROBYTES = crypto_secretbox_BOXZEROBYTES,\n    crypto_sign_BYTES = 64,\n    crypto_sign_PUBLICKEYBYTES = 32,\n    crypto_sign_SECRETKEYBYTES = 64,\n    crypto_sign_SEEDBYTES = 32,\n    crypto_hash_BYTES = 64;\n\nnacl.lowlevel = {\n  crypto_core_hsalsa20: crypto_core_hsalsa20,\n  crypto_stream_xor: crypto_stream_xor,\n  crypto_stream: crypto_stream,\n  crypto_stream_salsa20_xor: crypto_stream_salsa20_xor,\n  crypto_stream_salsa20: crypto_stream_salsa20,\n  crypto_onetimeauth: crypto_onetimeauth,\n  crypto_onetimeauth_verify: crypto_onetimeauth_verify,\n  crypto_verify_16: crypto_verify_16,\n  crypto_verify_32: crypto_verify_32,\n  crypto_secretbox: crypto_secretbox,\n  crypto_secretbox_open: crypto_secretbox_open,\n  crypto_scalarmult: crypto_scalarmult,\n  crypto_scalarmult_base: crypto_scalarmult_base,\n  crypto_box_beforenm: crypto_box_beforenm,\n  crypto_box_afternm: crypto_box_afternm,\n  crypto_box: crypto_box,\n  crypto_box_open: crypto_box_open,\n  crypto_box_keypair: crypto_box_keypair,\n  crypto_hash: crypto_hash,\n  crypto_sign: crypto_sign,\n  crypto_sign_keypair: crypto_sign_keypair,\n  crypto_sign_open: crypto_sign_open,\n\n  crypto_secretbox_KEYBYTES: crypto_secretbox_KEYBYTES,\n  crypto_secretbox_NONCEBYTES: crypto_secretbox_NONCEBYTES,\n  crypto_secretbox_ZEROBYTES: crypto_secretbox_ZEROBYTES,\n  crypto_secretbox_BOXZEROBYTES: crypto_secretbox_BOXZEROBYTES,\n  crypto_scalarmult_BYTES: crypto_scalarmult_BYTES,\n  crypto_scalarmult_SCALARBYTES: crypto_scalarmult_SCALARBYTES,\n  crypto_box_PUBLICKEYBYTES: crypto_box_PUBLICKEYBYTES,\n  crypto_box_SECRETKEYBYTES: crypto_box_SECRETKEYBYTES,\n  crypto_box_BEFORENMBYTES: crypto_box_BEFORENMBYTES,\n  crypto_box_NONCEBYTES: crypto_box_NONCEBYTES,\n  crypto_box_ZEROBYTES: crypto_box_ZEROBYTES,\n  crypto_box_BOXZEROBYTES: crypto_box_BOXZEROBYTES,\n  crypto_sign_BYTES: crypto_sign_BYTES,\n  crypto_sign_PUBLICKEYBYTES: crypto_sign_PUBLICKEYBYTES,\n  crypto_sign_SECRETKEYBYTES: crypto_sign_SECRETKEYBYTES,\n  crypto_sign_SEEDBYTES: crypto_sign_SEEDBYTES,\n  crypto_hash_BYTES: crypto_hash_BYTES,\n\n  gf: gf,\n  D: D,\n  L: L,\n  pack25519: pack25519,\n  unpack25519: unpack25519,\n  M: M,\n  A: A,\n  S: S,\n  Z: Z,\n  pow2523: pow2523,\n  add: add,\n  set25519: set25519,\n  modL: modL,\n  scalarmult: scalarmult,\n  scalarbase: scalarbase,\n};\n\n/* High-level API */\n\nfunction checkLengths(k, n) {\n  if (k.length !== crypto_secretbox_KEYBYTES) throw new Error('bad key size');\n  if (n.length !== crypto_secretbox_NONCEBYTES) throw new Error('bad nonce size');\n}\n\nfunction checkBoxLengths(pk, sk) {\n  if (pk.length !== crypto_box_PUBLICKEYBYTES) throw new Error('bad public key size');\n  if (sk.length !== crypto_box_SECRETKEYBYTES) throw new Error('bad secret key size');\n}\n\nfunction checkArrayTypes() {\n  for (var i = 0; i < arguments.length; i++) {\n    if (!(arguments[i] instanceof Uint8Array))\n      throw new TypeError('unexpected type, use Uint8Array');\n  }\n}\n\nfunction cleanup(arr) {\n  for (var i = 0; i < arr.length; i++) arr[i] = 0;\n}\n\nnacl.randomBytes = function(n) {\n  var b = new Uint8Array(n);\n  randombytes(b, n);\n  return b;\n};\n\nnacl.secretbox = function(msg, nonce, key) {\n  checkArrayTypes(msg, nonce, key);\n  checkLengths(key, nonce);\n  var m = new Uint8Array(crypto_secretbox_ZEROBYTES + msg.length);\n  var c = new Uint8Array(m.length);\n  for (var i = 0; i < msg.length; i++) m[i+crypto_secretbox_ZEROBYTES] = msg[i];\n  crypto_secretbox(c, m, m.length, nonce, key);\n  return c.subarray(crypto_secretbox_BOXZEROBYTES);\n};\n\nnacl.secretbox.open = function(box, nonce, key) {\n  checkArrayTypes(box, nonce, key);\n  checkLengths(key, nonce);\n  var c = new Uint8Array(crypto_secretbox_BOXZEROBYTES + box.length);\n  var m = new Uint8Array(c.length);\n  for (var i = 0; i < box.length; i++) c[i+crypto_secretbox_BOXZEROBYTES] = box[i];\n  if (c.length < 32) return null;\n  if (crypto_secretbox_open(m, c, c.length, nonce, key) !== 0) return null;\n  return m.subarray(crypto_secretbox_ZEROBYTES);\n};\n\nnacl.secretbox.keyLength = crypto_secretbox_KEYBYTES;\nnacl.secretbox.nonceLength = crypto_secretbox_NONCEBYTES;\nnacl.secretbox.overheadLength = crypto_secretbox_BOXZEROBYTES;\n\nnacl.scalarMult = function(n, p) {\n  checkArrayTypes(n, p);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  if (p.length !== crypto_scalarmult_BYTES) throw new Error('bad p size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult(q, n, p);\n  return q;\n};\n\nnacl.scalarMult.base = function(n) {\n  checkArrayTypes(n);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult_base(q, n);\n  return q;\n};\n\nnacl.scalarMult.scalarLength = crypto_scalarmult_SCALARBYTES;\nnacl.scalarMult.groupElementLength = crypto_scalarmult_BYTES;\n\nnacl.box = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox(msg, nonce, k);\n};\n\nnacl.box.before = function(publicKey, secretKey) {\n  checkArrayTypes(publicKey, secretKey);\n  checkBoxLengths(publicKey, secretKey);\n  var k = new Uint8Array(crypto_box_BEFORENMBYTES);\n  crypto_box_beforenm(k, publicKey, secretKey);\n  return k;\n};\n\nnacl.box.after = nacl.secretbox;\n\nnacl.box.open = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox.open(msg, nonce, k);\n};\n\nnacl.box.open.after = nacl.secretbox.open;\n\nnacl.box.keyPair = function() {\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_box_SECRETKEYBYTES);\n  crypto_box_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.box.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_box_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  crypto_scalarmult_base(pk, secretKey);\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.box.publicKeyLength = crypto_box_PUBLICKEYBYTES;\nnacl.box.secretKeyLength = crypto_box_SECRETKEYBYTES;\nnacl.box.sharedKeyLength = crypto_box_BEFORENMBYTES;\nnacl.box.nonceLength = crypto_box_NONCEBYTES;\nnacl.box.overheadLength = nacl.secretbox.overheadLength;\n\nnacl.sign = function(msg, secretKey) {\n  checkArrayTypes(msg, secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var signedMsg = new Uint8Array(crypto_sign_BYTES+msg.length);\n  crypto_sign(signedMsg, msg, msg.length, secretKey);\n  return signedMsg;\n};\n\nnacl.sign.open = function(signedMsg, publicKey) {\n  checkArrayTypes(signedMsg, publicKey);\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var tmp = new Uint8Array(signedMsg.length);\n  var mlen = crypto_sign_open(tmp, signedMsg, signedMsg.length, publicKey);\n  if (mlen < 0) return null;\n  var m = new Uint8Array(mlen);\n  for (var i = 0; i < m.length; i++) m[i] = tmp[i];\n  return m;\n};\n\nnacl.sign.detached = function(msg, secretKey) {\n  var signedMsg = nacl.sign(msg, secretKey);\n  var sig = new Uint8Array(crypto_sign_BYTES);\n  for (var i = 0; i < sig.length; i++) sig[i] = signedMsg[i];\n  return sig;\n};\n\nnacl.sign.detached.verify = function(msg, sig, publicKey) {\n  checkArrayTypes(msg, sig, publicKey);\n  if (sig.length !== crypto_sign_BYTES)\n    throw new Error('bad signature size');\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var sm = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var m = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var i;\n  for (i = 0; i < crypto_sign_BYTES; i++) sm[i] = sig[i];\n  for (i = 0; i < msg.length; i++) sm[i+crypto_sign_BYTES] = msg[i];\n  return (crypto_sign_open(m, sm, sm.length, publicKey) >= 0);\n};\n\nnacl.sign.keyPair = function() {\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  crypto_sign_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  for (var i = 0; i < pk.length; i++) pk[i] = secretKey[32+i];\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.sign.keyPair.fromSeed = function(seed) {\n  checkArrayTypes(seed);\n  if (seed.length !== crypto_sign_SEEDBYTES)\n    throw new Error('bad seed size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  for (var i = 0; i < 32; i++) sk[i] = seed[i];\n  crypto_sign_keypair(pk, sk, true);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.publicKeyLength = crypto_sign_PUBLICKEYBYTES;\nnacl.sign.secretKeyLength = crypto_sign_SECRETKEYBYTES;\nnacl.sign.seedLength = crypto_sign_SEEDBYTES;\nnacl.sign.signatureLength = crypto_sign_BYTES;\n\nnacl.hash = function(msg) {\n  checkArrayTypes(msg);\n  var h = new Uint8Array(crypto_hash_BYTES);\n  crypto_hash(h, msg, msg.length);\n  return h;\n};\n\nnacl.hash.hashLength = crypto_hash_BYTES;\n\nnacl.verify = function(x, y) {\n  checkArrayTypes(x, y);\n  // Zero length arguments are considered not equal.\n  if (x.length === 0 || y.length === 0) return false;\n  if (x.length !== y.length) return false;\n  return (vn(x, 0, y, 0, x.length) === 0) ? true : false;\n};\n\nnacl.setPRNG = function(fn) {\n  randombytes = fn;\n};\n\n(function() {\n  // Initialize PRNG if environment provides CSPRNG.\n  // If not, methods calling randombytes will throw.\n  var crypto = typeof self !== 'undefined' ? (self.crypto || self.msCrypto) : null;\n  if (crypto && crypto.getRandomValues) {\n    // Browsers.\n    var QUOTA = 65536;\n    nacl.setPRNG(function(x, n) {\n      var i, v = new Uint8Array(n);\n      for (i = 0; i < n; i += QUOTA) {\n        crypto.getRandomValues(v.subarray(i, i + Math.min(n - i, QUOTA)));\n      }\n      for (i = 0; i < n; i++) x[i] = v[i];\n      cleanup(v);\n    });\n  } else if (typeof require !== 'undefined') {\n    // Node.js.\n    crypto = require('crypto');\n    if (crypto && crypto.randomBytes) {\n      nacl.setPRNG(function(x, n) {\n        var i, v = crypto.randomBytes(n);\n        for (i = 0; i < n; i++) x[i] = v[i];\n        cleanup(v);\n      });\n    }\n  }\n})();\n\n})(typeof module !== 'undefined' && module.exports ? module.exports : (self.nacl = self.nacl || {}));\n","'use strict';\n\nvar isString = require('is-string');\nvar isNumber = require('is-number-object');\nvar isBoolean = require('is-boolean-object');\nvar isSymbol = require('is-symbol');\nvar isBigInt = require('is-bigint');\n\n// eslint-disable-next-line consistent-return\nmodule.exports = function whichBoxedPrimitive(value) {\n\t// eslint-disable-next-line eqeqeq\n\tif (value == null || (typeof value !== 'object' && typeof value !== 'function')) {\n\t\treturn null;\n\t}\n\tif (isString(value)) {\n\t\treturn 'String';\n\t}\n\tif (isNumber(value)) {\n\t\treturn 'Number';\n\t}\n\tif (isBoolean(value)) {\n\t\treturn 'Boolean';\n\t}\n\tif (isSymbol(value)) {\n\t\treturn 'Symbol';\n\t}\n\tif (isBigInt(value)) {\n\t\treturn 'BigInt';\n\t}\n};\n","'use strict';\n\nvar isMap = require('is-map');\nvar isSet = require('is-set');\nvar isWeakMap = require('is-weakmap');\nvar isWeakSet = require('is-weakset');\n\n/** @type {import('.')} */\nmodule.exports = function whichCollection(/** @type {unknown} */ value) {\n\tif (value && typeof value === 'object') {\n\t\tif (isMap(value)) {\n\t\t\treturn 'Map';\n\t\t}\n\t\tif (isSet(value)) {\n\t\t\treturn 'Set';\n\t\t}\n\t\tif (isWeakMap(value)) {\n\t\t\treturn 'WeakMap';\n\t\t}\n\t\tif (isWeakSet(value)) {\n\t\t\treturn 'WeakSet';\n\t\t}\n\t}\n\treturn false;\n};\n","'use strict';\n\nvar forEach = require('for-each');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBind = require('call-bind');\nvar callBound = require('call-bind/callBound');\nvar gOPD = require('gopd');\n\n/** @type {(O: object) => string} */\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $slice = callBound('String.prototype.slice');\nvar getPrototypeOf = Object.getPrototypeOf; // require('getprototypeof');\n\n/** @type {<T = unknown>(array: readonly T[], value: unknown) => number} */\nvar $indexOf = callBound('Array.prototype.indexOf', true) || function indexOf(array, value) {\n\tfor (var i = 0; i < array.length; i += 1) {\n\t\tif (array[i] === value) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n/** @typedef {(receiver: import('.').TypedArray) => string | typeof Uint8Array.prototype.slice.call | typeof Uint8Array.prototype.set.call} Getter */\n/** @type {{ [k in `\\$${import('.').TypedArrayName}`]?: Getter } & { __proto__: null }} */\nvar cache = { __proto__: null };\nif (hasToStringTag && gOPD && getPrototypeOf) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tif (Symbol.toStringTag in arr) {\n\t\t\tvar proto = getPrototypeOf(arr);\n\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\tif (!descriptor) {\n\t\t\t\tvar superProto = getPrototypeOf(proto);\n\t\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t}\n\t\t\t// @ts-expect-error TODO: fix\n\t\t\tcache['$' + typedArray] = callBind(descriptor.get);\n\t\t}\n\t});\n} else {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tvar fn = arr.slice || arr.set;\n\t\tif (fn) {\n\t\t\t// @ts-expect-error TODO: fix\n\t\t\tcache['$' + typedArray] = callBind(fn);\n\t\t}\n\t});\n}\n\n/** @type {(value: object) => false | import('.').TypedArrayName} */\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\t/** @type {ReturnType<typeof tryAllTypedArrays>} */ var found = false;\n\tforEach(\n\t\t// eslint-disable-next-line no-extra-parens\n\t\t/** @type {Record<`\\$${TypedArrayName}`, Getter>} */ /** @type {any} */ (cache),\n\t\t/** @type {(getter: Getter, name: `\\$${import('.').TypedArrayName}`) => void} */\n\t\tfunction (getter, typedArray) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t// @ts-expect-error TODO: fix\n\t\t\t\t\tif ('$' + getter(value) === typedArray) {\n\t\t\t\t\t\tfound = $slice(typedArray, 1);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {(value: object) => false | import('.').TypedArrayName} */\nvar trySlices = function tryAllSlices(value) {\n\t/** @type {ReturnType<typeof tryAllSlices>} */ var found = false;\n\tforEach(\n\t\t// eslint-disable-next-line no-extra-parens\n\t\t/** @type {Record<`\\$${TypedArrayName}`, Getter>} */ /** @type {any} */ (cache),\n\t\t/** @type {(getter: typeof cache, name: `\\$${import('.').TypedArrayName}`) => void} */ function (getter, name) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t\t// @ts-expect-error TODO: fix\n\t\t\t\t\tgetter(value);\n\t\t\t\t\tfound = $slice(name, 1);\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {import('.')} */\nmodule.exports = function whichTypedArray(value) {\n\tif (!value || typeof value !== 'object') { return false; }\n\tif (!hasToStringTag) {\n\t\t/** @type {string} */\n\t\tvar tag = $slice($toString(value), 8, -1);\n\t\tif ($indexOf(typedArrays, tag) > -1) {\n\t\t\treturn tag;\n\t\t}\n\t\tif (tag !== 'Object') {\n\t\t\treturn false;\n\t\t}\n\t\t// node < 0.6 hits here on real Typed Arrays\n\t\treturn trySlices(value);\n\t}\n\tif (!gOPD) { return null; } // unknown engine\n\treturn tryTypedArrays(value);\n};\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  exports.stripBOM = function(str) {\n    if (str[0] === '\\uFEFF') {\n      return str.substring(1);\n    } else {\n      return str;\n    }\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var builder, defaults, escapeCDATA, requiresCDATA, wrapCDATA,\n    hasProp = {}.hasOwnProperty;\n\n  builder = require('xmlbuilder');\n\n  defaults = require('./defaults').defaults;\n\n  requiresCDATA = function(entry) {\n    return typeof entry === \"string\" && (entry.indexOf('&') >= 0 || entry.indexOf('>') >= 0 || entry.indexOf('<') >= 0);\n  };\n\n  wrapCDATA = function(entry) {\n    return \"<![CDATA[\" + (escapeCDATA(entry)) + \"]]>\";\n  };\n\n  escapeCDATA = function(entry) {\n    return entry.replace(']]>', ']]]]><![CDATA[>');\n  };\n\n  exports.Builder = (function() {\n    function Builder(opts) {\n      var key, ref, value;\n      this.options = {};\n      ref = defaults[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n    }\n\n    Builder.prototype.buildObject = function(rootObj) {\n      var attrkey, charkey, render, rootElement, rootName;\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      if ((Object.keys(rootObj).length === 1) && (this.options.rootName === defaults['0.2'].rootName)) {\n        rootName = Object.keys(rootObj)[0];\n        rootObj = rootObj[rootName];\n      } else {\n        rootName = this.options.rootName;\n      }\n      render = (function(_this) {\n        return function(element, obj) {\n          var attr, child, entry, index, key, value;\n          if (typeof obj !== 'object') {\n            if (_this.options.cdata && requiresCDATA(obj)) {\n              element.raw(wrapCDATA(obj));\n            } else {\n              element.txt(obj);\n            }\n          } else if (Array.isArray(obj)) {\n            for (index in obj) {\n              if (!hasProp.call(obj, index)) continue;\n              child = obj[index];\n              for (key in child) {\n                entry = child[key];\n                element = render(element.ele(key), entry).up();\n              }\n            }\n          } else {\n            for (key in obj) {\n              if (!hasProp.call(obj, key)) continue;\n              child = obj[key];\n              if (key === attrkey) {\n                if (typeof child === \"object\") {\n                  for (attr in child) {\n                    value = child[attr];\n                    element = element.att(attr, value);\n                  }\n                }\n              } else if (key === charkey) {\n                if (_this.options.cdata && requiresCDATA(child)) {\n                  element = element.raw(wrapCDATA(child));\n                } else {\n                  element = element.txt(child);\n                }\n              } else if (Array.isArray(child)) {\n                for (index in child) {\n                  if (!hasProp.call(child, index)) continue;\n                  entry = child[index];\n                  if (typeof entry === 'string') {\n                    if (_this.options.cdata && requiresCDATA(entry)) {\n                      element = element.ele(key).raw(wrapCDATA(entry)).up();\n                    } else {\n                      element = element.ele(key, entry).up();\n                    }\n                  } else {\n                    element = render(element.ele(key), entry).up();\n                  }\n                }\n              } else if (typeof child === \"object\") {\n                element = render(element.ele(key), child).up();\n              } else {\n                if (typeof child === 'string' && _this.options.cdata && requiresCDATA(child)) {\n                  element = element.ele(key).raw(wrapCDATA(child)).up();\n                } else {\n                  if (child == null) {\n                    child = '';\n                  }\n                  element = element.ele(key, child.toString()).up();\n                }\n              }\n            }\n          }\n          return element;\n        };\n      })(this);\n      rootElement = builder.create(rootName, this.options.xmldec, this.options.doctype, {\n        headless: this.options.headless,\n        allowSurrogateChars: this.options.allowSurrogateChars\n      });\n      return render(rootElement, rootObj).end(this.options.renderOpts);\n    };\n\n    return Builder;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  exports.defaults = {\n    \"0.1\": {\n      explicitCharkey: false,\n      trim: true,\n      normalize: true,\n      normalizeTags: false,\n      attrkey: \"@\",\n      charkey: \"#\",\n      explicitArray: false,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: false,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      childkey: '@@',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      emptyTag: ''\n    },\n    \"0.2\": {\n      explicitCharkey: false,\n      trim: false,\n      normalize: false,\n      normalizeTags: false,\n      attrkey: \"$\",\n      charkey: \"_\",\n      explicitArray: true,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: true,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      preserveChildrenOrder: false,\n      childkey: '$$',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      rootName: 'root',\n      xmldec: {\n        'version': '1.0',\n        'encoding': 'UTF-8',\n        'standalone': true\n      },\n      doctype: null,\n      renderOpts: {\n        'pretty': true,\n        'indent': '  ',\n        'newline': '\\n'\n      },\n      headless: false,\n      chunkSize: 10000,\n      emptyTag: '',\n      cdata: false\n    }\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var bom, defaults, defineProperty, events, isEmpty, processItem, processors, sax, setImmediate,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  sax = require('sax');\n\n  events = require('events');\n\n  bom = require('./bom');\n\n  processors = require('./processors');\n\n  setImmediate = require('timers').setImmediate;\n\n  defaults = require('./defaults').defaults;\n\n  isEmpty = function(thing) {\n    return typeof thing === \"object\" && (thing != null) && Object.keys(thing).length === 0;\n  };\n\n  processItem = function(processors, item, key) {\n    var i, len, process;\n    for (i = 0, len = processors.length; i < len; i++) {\n      process = processors[i];\n      item = process(item, key);\n    }\n    return item;\n  };\n\n  defineProperty = function(obj, key, value) {\n    var descriptor;\n    descriptor = Object.create(null);\n    descriptor.value = value;\n    descriptor.writable = true;\n    descriptor.enumerable = true;\n    descriptor.configurable = true;\n    return Object.defineProperty(obj, key, descriptor);\n  };\n\n  exports.Parser = (function(superClass) {\n    extend(Parser, superClass);\n\n    function Parser(opts) {\n      this.parseStringPromise = bind(this.parseStringPromise, this);\n      this.parseString = bind(this.parseString, this);\n      this.reset = bind(this.reset, this);\n      this.assignOrPush = bind(this.assignOrPush, this);\n      this.processAsync = bind(this.processAsync, this);\n      var key, ref, value;\n      if (!(this instanceof exports.Parser)) {\n        return new exports.Parser(opts);\n      }\n      this.options = {};\n      ref = defaults[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n      if (this.options.xmlns) {\n        this.options.xmlnskey = this.options.attrkey + \"ns\";\n      }\n      if (this.options.normalizeTags) {\n        if (!this.options.tagNameProcessors) {\n          this.options.tagNameProcessors = [];\n        }\n        this.options.tagNameProcessors.unshift(processors.normalize);\n      }\n      this.reset();\n    }\n\n    Parser.prototype.processAsync = function() {\n      var chunk, err;\n      try {\n        if (this.remaining.length <= this.options.chunkSize) {\n          chunk = this.remaining;\n          this.remaining = '';\n          this.saxParser = this.saxParser.write(chunk);\n          return this.saxParser.close();\n        } else {\n          chunk = this.remaining.substr(0, this.options.chunkSize);\n          this.remaining = this.remaining.substr(this.options.chunkSize, this.remaining.length);\n          this.saxParser = this.saxParser.write(chunk);\n          return setImmediate(this.processAsync);\n        }\n      } catch (error1) {\n        err = error1;\n        if (!this.saxParser.errThrown) {\n          this.saxParser.errThrown = true;\n          return this.emit(err);\n        }\n      }\n    };\n\n    Parser.prototype.assignOrPush = function(obj, key, newValue) {\n      if (!(key in obj)) {\n        if (!this.options.explicitArray) {\n          return defineProperty(obj, key, newValue);\n        } else {\n          return defineProperty(obj, key, [newValue]);\n        }\n      } else {\n        if (!(obj[key] instanceof Array)) {\n          defineProperty(obj, key, [obj[key]]);\n        }\n        return obj[key].push(newValue);\n      }\n    };\n\n    Parser.prototype.reset = function() {\n      var attrkey, charkey, ontext, stack;\n      this.removeAllListeners();\n      this.saxParser = sax.parser(this.options.strict, {\n        trim: false,\n        normalize: false,\n        xmlns: this.options.xmlns\n      });\n      this.saxParser.errThrown = false;\n      this.saxParser.onerror = (function(_this) {\n        return function(error) {\n          _this.saxParser.resume();\n          if (!_this.saxParser.errThrown) {\n            _this.saxParser.errThrown = true;\n            return _this.emit(\"error\", error);\n          }\n        };\n      })(this);\n      this.saxParser.onend = (function(_this) {\n        return function() {\n          if (!_this.saxParser.ended) {\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      this.saxParser.ended = false;\n      this.EXPLICIT_CHARKEY = this.options.explicitCharkey;\n      this.resultObject = null;\n      stack = [];\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      this.saxParser.onopentag = (function(_this) {\n        return function(node) {\n          var key, newValue, obj, processedKey, ref;\n          obj = {};\n          obj[charkey] = \"\";\n          if (!_this.options.ignoreAttrs) {\n            ref = node.attributes;\n            for (key in ref) {\n              if (!hasProp.call(ref, key)) continue;\n              if (!(attrkey in obj) && !_this.options.mergeAttrs) {\n                obj[attrkey] = {};\n              }\n              newValue = _this.options.attrValueProcessors ? processItem(_this.options.attrValueProcessors, node.attributes[key], key) : node.attributes[key];\n              processedKey = _this.options.attrNameProcessors ? processItem(_this.options.attrNameProcessors, key) : key;\n              if (_this.options.mergeAttrs) {\n                _this.assignOrPush(obj, processedKey, newValue);\n              } else {\n                defineProperty(obj[attrkey], processedKey, newValue);\n              }\n            }\n          }\n          obj[\"#name\"] = _this.options.tagNameProcessors ? processItem(_this.options.tagNameProcessors, node.name) : node.name;\n          if (_this.options.xmlns) {\n            obj[_this.options.xmlnskey] = {\n              uri: node.uri,\n              local: node.local\n            };\n          }\n          return stack.push(obj);\n        };\n      })(this);\n      this.saxParser.onclosetag = (function(_this) {\n        return function() {\n          var cdata, emptyStr, key, node, nodeName, obj, objClone, old, s, xpath;\n          obj = stack.pop();\n          nodeName = obj[\"#name\"];\n          if (!_this.options.explicitChildren || !_this.options.preserveChildrenOrder) {\n            delete obj[\"#name\"];\n          }\n          if (obj.cdata === true) {\n            cdata = obj.cdata;\n            delete obj.cdata;\n          }\n          s = stack[stack.length - 1];\n          if (obj[charkey].match(/^\\s*$/) && !cdata) {\n            emptyStr = obj[charkey];\n            delete obj[charkey];\n          } else {\n            if (_this.options.trim) {\n              obj[charkey] = obj[charkey].trim();\n            }\n            if (_this.options.normalize) {\n              obj[charkey] = obj[charkey].replace(/\\s{2,}/g, \" \").trim();\n            }\n            obj[charkey] = _this.options.valueProcessors ? processItem(_this.options.valueProcessors, obj[charkey], nodeName) : obj[charkey];\n            if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n              obj = obj[charkey];\n            }\n          }\n          if (isEmpty(obj)) {\n            if (typeof _this.options.emptyTag === 'function') {\n              obj = _this.options.emptyTag();\n            } else {\n              obj = _this.options.emptyTag !== '' ? _this.options.emptyTag : emptyStr;\n            }\n          }\n          if (_this.options.validator != null) {\n            xpath = \"/\" + ((function() {\n              var i, len, results;\n              results = [];\n              for (i = 0, len = stack.length; i < len; i++) {\n                node = stack[i];\n                results.push(node[\"#name\"]);\n              }\n              return results;\n            })()).concat(nodeName).join(\"/\");\n            (function() {\n              var err;\n              try {\n                return obj = _this.options.validator(xpath, s && s[nodeName], obj);\n              } catch (error1) {\n                err = error1;\n                return _this.emit(\"error\", err);\n              }\n            })();\n          }\n          if (_this.options.explicitChildren && !_this.options.mergeAttrs && typeof obj === 'object') {\n            if (!_this.options.preserveChildrenOrder) {\n              node = {};\n              if (_this.options.attrkey in obj) {\n                node[_this.options.attrkey] = obj[_this.options.attrkey];\n                delete obj[_this.options.attrkey];\n              }\n              if (!_this.options.charsAsChildren && _this.options.charkey in obj) {\n                node[_this.options.charkey] = obj[_this.options.charkey];\n                delete obj[_this.options.charkey];\n              }\n              if (Object.getOwnPropertyNames(obj).length > 0) {\n                node[_this.options.childkey] = obj;\n              }\n              obj = node;\n            } else if (s) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              objClone = {};\n              for (key in obj) {\n                if (!hasProp.call(obj, key)) continue;\n                defineProperty(objClone, key, obj[key]);\n              }\n              s[_this.options.childkey].push(objClone);\n              delete obj[\"#name\"];\n              if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n                obj = obj[charkey];\n              }\n            }\n          }\n          if (stack.length > 0) {\n            return _this.assignOrPush(s, nodeName, obj);\n          } else {\n            if (_this.options.explicitRoot) {\n              old = obj;\n              obj = {};\n              defineProperty(obj, nodeName, old);\n            }\n            _this.resultObject = obj;\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      ontext = (function(_this) {\n        return function(text) {\n          var charChild, s;\n          s = stack[stack.length - 1];\n          if (s) {\n            s[charkey] += text;\n            if (_this.options.explicitChildren && _this.options.preserveChildrenOrder && _this.options.charsAsChildren && (_this.options.includeWhiteChars || text.replace(/\\\\n/g, '').trim() !== '')) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              charChild = {\n                '#name': '__text__'\n              };\n              charChild[charkey] = text;\n              if (_this.options.normalize) {\n                charChild[charkey] = charChild[charkey].replace(/\\s{2,}/g, \" \").trim();\n              }\n              s[_this.options.childkey].push(charChild);\n            }\n            return s;\n          }\n        };\n      })(this);\n      this.saxParser.ontext = ontext;\n      return this.saxParser.oncdata = (function(_this) {\n        return function(text) {\n          var s;\n          s = ontext(text);\n          if (s) {\n            return s.cdata = true;\n          }\n        };\n      })(this);\n    };\n\n    Parser.prototype.parseString = function(str, cb) {\n      var err;\n      if ((cb != null) && typeof cb === \"function\") {\n        this.on(\"end\", function(result) {\n          this.reset();\n          return cb(null, result);\n        });\n        this.on(\"error\", function(err) {\n          this.reset();\n          return cb(err);\n        });\n      }\n      try {\n        str = str.toString();\n        if (str.trim() === '') {\n          this.emit(\"end\", null);\n          return true;\n        }\n        str = bom.stripBOM(str);\n        if (this.options.async) {\n          this.remaining = str;\n          setImmediate(this.processAsync);\n          return this.saxParser;\n        }\n        return this.saxParser.write(str).close();\n      } catch (error1) {\n        err = error1;\n        if (!(this.saxParser.errThrown || this.saxParser.ended)) {\n          this.emit('error', err);\n          return this.saxParser.errThrown = true;\n        } else if (this.saxParser.ended) {\n          throw err;\n        }\n      }\n    };\n\n    Parser.prototype.parseStringPromise = function(str) {\n      return new Promise((function(_this) {\n        return function(resolve, reject) {\n          return _this.parseString(str, function(err, value) {\n            if (err) {\n              return reject(err);\n            } else {\n              return resolve(value);\n            }\n          });\n        };\n      })(this));\n    };\n\n    return Parser;\n\n  })(events);\n\n  exports.parseString = function(str, a, b) {\n    var cb, options, parser;\n    if (b != null) {\n      if (typeof b === 'function') {\n        cb = b;\n      }\n      if (typeof a === 'object') {\n        options = a;\n      }\n    } else {\n      if (typeof a === 'function') {\n        cb = a;\n      }\n      options = {};\n    }\n    parser = new exports.Parser(options);\n    return parser.parseString(str, cb);\n  };\n\n  exports.parseStringPromise = function(str, a) {\n    var options, parser;\n    if (typeof a === 'object') {\n      options = a;\n    }\n    parser = new exports.Parser(options);\n    return parser.parseStringPromise(str);\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var prefixMatch;\n\n  prefixMatch = new RegExp(/(?!xmlns)^.*:/);\n\n  exports.normalize = function(str) {\n    return str.toLowerCase();\n  };\n\n  exports.firstCharLowerCase = function(str) {\n    return str.charAt(0).toLowerCase() + str.slice(1);\n  };\n\n  exports.stripPrefix = function(str) {\n    return str.replace(prefixMatch, '');\n  };\n\n  exports.parseNumbers = function(str) {\n    if (!isNaN(str)) {\n      str = str % 1 === 0 ? parseInt(str, 10) : parseFloat(str);\n    }\n    return str;\n  };\n\n  exports.parseBooleans = function(str) {\n    if (/^(?:true|false)$/i.test(str)) {\n      str = str.toLowerCase() === 'true';\n    }\n    return str;\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var builder, defaults, parser, processors,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  defaults = require('./defaults');\n\n  builder = require('./builder');\n\n  parser = require('./parser');\n\n  processors = require('./processors');\n\n  exports.defaults = defaults.defaults;\n\n  exports.processors = processors;\n\n  exports.ValidationError = (function(superClass) {\n    extend(ValidationError, superClass);\n\n    function ValidationError(message) {\n      this.message = message;\n    }\n\n    return ValidationError;\n\n  })(Error);\n\n  exports.Builder = builder.Builder;\n\n  exports.Parser = parser.Parser;\n\n  exports.parseString = parser.parseString;\n\n  exports.parseStringPromise = parser.parseStringPromise;\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  module.exports = {\n    Disconnected: 1,\n    Preceding: 2,\n    Following: 4,\n    Contains: 8,\n    ContainedBy: 16,\n    ImplementationSpecific: 32\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  module.exports = {\n    Element: 1,\n    Attribute: 2,\n    Text: 3,\n    CData: 4,\n    EntityReference: 5,\n    EntityDeclaration: 6,\n    ProcessingInstruction: 7,\n    Comment: 8,\n    Document: 9,\n    DocType: 10,\n    DocumentFragment: 11,\n    NotationDeclaration: 12,\n    Declaration: 201,\n    Raw: 202,\n    AttributeDeclaration: 203,\n    ElementDeclaration: 204,\n    Dummy: 205\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var assign, getValue, isArray, isEmpty, isFunction, isObject, isPlainObject,\n    slice = [].slice,\n    hasProp = {}.hasOwnProperty;\n\n  assign = function() {\n    var i, key, len, source, sources, target;\n    target = arguments[0], sources = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    if (isFunction(Object.assign)) {\n      Object.assign.apply(null, arguments);\n    } else {\n      for (i = 0, len = sources.length; i < len; i++) {\n        source = sources[i];\n        if (source != null) {\n          for (key in source) {\n            if (!hasProp.call(source, key)) continue;\n            target[key] = source[key];\n          }\n        }\n      }\n    }\n    return target;\n  };\n\n  isFunction = function(val) {\n    return !!val && Object.prototype.toString.call(val) === '[object Function]';\n  };\n\n  isObject = function(val) {\n    var ref;\n    return !!val && ((ref = typeof val) === 'function' || ref === 'object');\n  };\n\n  isArray = function(val) {\n    if (isFunction(Array.isArray)) {\n      return Array.isArray(val);\n    } else {\n      return Object.prototype.toString.call(val) === '[object Array]';\n    }\n  };\n\n  isEmpty = function(val) {\n    var key;\n    if (isArray(val)) {\n      return !val.length;\n    } else {\n      for (key in val) {\n        if (!hasProp.call(val, key)) continue;\n        return false;\n      }\n      return true;\n    }\n  };\n\n  isPlainObject = function(val) {\n    var ctor, proto;\n    return isObject(val) && (proto = Object.getPrototypeOf(val)) && (ctor = proto.constructor) && (typeof ctor === 'function') && (ctor instanceof ctor) && (Function.prototype.toString.call(ctor) === Function.prototype.toString.call(Object));\n  };\n\n  getValue = function(obj) {\n    if (isFunction(obj.valueOf)) {\n      return obj.valueOf();\n    } else {\n      return obj;\n    }\n  };\n\n  module.exports.assign = assign;\n\n  module.exports.isFunction = isFunction;\n\n  module.exports.isObject = isObject;\n\n  module.exports.isArray = isArray;\n\n  module.exports.isEmpty = isEmpty;\n\n  module.exports.isPlainObject = isPlainObject;\n\n  module.exports.getValue = getValue;\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  module.exports = {\n    None: 0,\n    OpenTag: 1,\n    InsideTag: 2,\n    CloseTag: 3\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLAttribute, XMLNode;\n\n  NodeType = require('./NodeType');\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLAttribute = (function() {\n    function XMLAttribute(parent, name, value) {\n      this.parent = parent;\n      if (this.parent) {\n        this.options = this.parent.options;\n        this.stringify = this.parent.stringify;\n      }\n      if (name == null) {\n        throw new Error(\"Missing attribute name. \" + this.debugInfo(name));\n      }\n      this.name = this.stringify.name(name);\n      this.value = this.stringify.attValue(value);\n      this.type = NodeType.Attribute;\n      this.isId = false;\n      this.schemaTypeInfo = null;\n    }\n\n    Object.defineProperty(XMLAttribute.prototype, 'nodeType', {\n      get: function() {\n        return this.type;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'ownerElement', {\n      get: function() {\n        return this.parent;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'textContent', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'namespaceURI', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'prefix', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'localName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLAttribute.prototype, 'specified', {\n      get: function() {\n        return true;\n      }\n    });\n\n    XMLAttribute.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLAttribute.prototype.toString = function(options) {\n      return this.options.writer.attribute(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLAttribute.prototype.debugInfo = function(name) {\n      name = name || this.name;\n      if (name == null) {\n        return \"parent: <\" + this.parent.name + \">\";\n      } else {\n        return \"attribute: {\" + name + \"}, parent: <\" + this.parent.name + \">\";\n      }\n    };\n\n    XMLAttribute.prototype.isEqualNode = function(node) {\n      if (node.namespaceURI !== this.namespaceURI) {\n        return false;\n      }\n      if (node.prefix !== this.prefix) {\n        return false;\n      }\n      if (node.localName !== this.localName) {\n        return false;\n      }\n      if (node.value !== this.value) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLAttribute;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCData, XMLCharacterData,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLCData = (function(superClass) {\n    extend(XMLCData, superClass);\n\n    function XMLCData(parent, text) {\n      XMLCData.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing CDATA text. \" + this.debugInfo());\n      }\n      this.name = \"#cdata-section\";\n      this.type = NodeType.CData;\n      this.value = this.stringify.cdata(text);\n    }\n\n    XMLCData.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLCData.prototype.toString = function(options) {\n      return this.options.writer.cdata(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLCData;\n\n  })(XMLCharacterData);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLCharacterData, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLCharacterData = (function(superClass) {\n    extend(XMLCharacterData, superClass);\n\n    function XMLCharacterData(parent) {\n      XMLCharacterData.__super__.constructor.call(this, parent);\n      this.value = '';\n    }\n\n    Object.defineProperty(XMLCharacterData.prototype, 'data', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    Object.defineProperty(XMLCharacterData.prototype, 'length', {\n      get: function() {\n        return this.value.length;\n      }\n    });\n\n    Object.defineProperty(XMLCharacterData.prototype, 'textContent', {\n      get: function() {\n        return this.value;\n      },\n      set: function(value) {\n        return this.value = value || '';\n      }\n    });\n\n    XMLCharacterData.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLCharacterData.prototype.substringData = function(offset, count) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.appendData = function(arg) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.insertData = function(offset, arg) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.deleteData = function(offset, count) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.replaceData = function(offset, count, arg) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLCharacterData.prototype.isEqualNode = function(node) {\n      if (!XMLCharacterData.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.data !== this.data) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLCharacterData;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCharacterData, XMLComment,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLComment = (function(superClass) {\n    extend(XMLComment, superClass);\n\n    function XMLComment(parent, text) {\n      XMLComment.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing comment text. \" + this.debugInfo());\n      }\n      this.name = \"#comment\";\n      this.type = NodeType.Comment;\n      this.value = this.stringify.comment(text);\n    }\n\n    XMLComment.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLComment.prototype.toString = function(options) {\n      return this.options.writer.comment(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLComment;\n\n  })(XMLCharacterData);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMConfiguration, XMLDOMErrorHandler, XMLDOMStringList;\n\n  XMLDOMErrorHandler = require('./XMLDOMErrorHandler');\n\n  XMLDOMStringList = require('./XMLDOMStringList');\n\n  module.exports = XMLDOMConfiguration = (function() {\n    function XMLDOMConfiguration() {\n      var clonedSelf;\n      this.defaultParams = {\n        \"canonical-form\": false,\n        \"cdata-sections\": false,\n        \"comments\": false,\n        \"datatype-normalization\": false,\n        \"element-content-whitespace\": true,\n        \"entities\": true,\n        \"error-handler\": new XMLDOMErrorHandler(),\n        \"infoset\": true,\n        \"validate-if-schema\": false,\n        \"namespaces\": true,\n        \"namespace-declarations\": true,\n        \"normalize-characters\": false,\n        \"schema-location\": '',\n        \"schema-type\": '',\n        \"split-cdata-sections\": true,\n        \"validate\": false,\n        \"well-formed\": true\n      };\n      this.params = clonedSelf = Object.create(this.defaultParams);\n    }\n\n    Object.defineProperty(XMLDOMConfiguration.prototype, 'parameterNames', {\n      get: function() {\n        return new XMLDOMStringList(Object.keys(this.defaultParams));\n      }\n    });\n\n    XMLDOMConfiguration.prototype.getParameter = function(name) {\n      if (this.params.hasOwnProperty(name)) {\n        return this.params[name];\n      } else {\n        return null;\n      }\n    };\n\n    XMLDOMConfiguration.prototype.canSetParameter = function(name, value) {\n      return true;\n    };\n\n    XMLDOMConfiguration.prototype.setParameter = function(name, value) {\n      if (value != null) {\n        return this.params[name] = value;\n      } else {\n        return delete this.params[name];\n      }\n    };\n\n    return XMLDOMConfiguration;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMErrorHandler;\n\n  module.exports = XMLDOMErrorHandler = (function() {\n    function XMLDOMErrorHandler() {}\n\n    XMLDOMErrorHandler.prototype.handleError = function(error) {\n      throw new Error(error);\n    };\n\n    return XMLDOMErrorHandler;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMImplementation;\n\n  module.exports = XMLDOMImplementation = (function() {\n    function XMLDOMImplementation() {}\n\n    XMLDOMImplementation.prototype.hasFeature = function(feature, version) {\n      return true;\n    };\n\n    XMLDOMImplementation.prototype.createDocumentType = function(qualifiedName, publicId, systemId) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLDOMImplementation.prototype.createDocument = function(namespaceURI, qualifiedName, doctype) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLDOMImplementation.prototype.createHTMLDocument = function(title) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLDOMImplementation.prototype.getFeature = function(feature, version) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    return XMLDOMImplementation;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDOMStringList;\n\n  module.exports = XMLDOMStringList = (function() {\n    function XMLDOMStringList(arr) {\n      this.arr = arr || [];\n    }\n\n    Object.defineProperty(XMLDOMStringList.prototype, 'length', {\n      get: function() {\n        return this.arr.length;\n      }\n    });\n\n    XMLDOMStringList.prototype.item = function(index) {\n      return this.arr[index] || null;\n    };\n\n    XMLDOMStringList.prototype.contains = function(str) {\n      return this.arr.indexOf(str) !== -1;\n    };\n\n    return XMLDOMStringList;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDAttList, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDAttList = (function(superClass) {\n    extend(XMLDTDAttList, superClass);\n\n    function XMLDTDAttList(parent, elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      XMLDTDAttList.__super__.constructor.call(this, parent);\n      if (elementName == null) {\n        throw new Error(\"Missing DTD element name. \" + this.debugInfo());\n      }\n      if (attributeName == null) {\n        throw new Error(\"Missing DTD attribute name. \" + this.debugInfo(elementName));\n      }\n      if (!attributeType) {\n        throw new Error(\"Missing DTD attribute type. \" + this.debugInfo(elementName));\n      }\n      if (!defaultValueType) {\n        throw new Error(\"Missing DTD attribute default. \" + this.debugInfo(elementName));\n      }\n      if (defaultValueType.indexOf('#') !== 0) {\n        defaultValueType = '#' + defaultValueType;\n      }\n      if (!defaultValueType.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. \" + this.debugInfo(elementName));\n      }\n      if (defaultValue && !defaultValueType.match(/^(#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Default value only applies to #FIXED or #DEFAULT. \" + this.debugInfo(elementName));\n      }\n      this.elementName = this.stringify.name(elementName);\n      this.type = NodeType.AttributeDeclaration;\n      this.attributeName = this.stringify.name(attributeName);\n      this.attributeType = this.stringify.dtdAttType(attributeType);\n      if (defaultValue) {\n        this.defaultValue = this.stringify.dtdAttDefault(defaultValue);\n      }\n      this.defaultValueType = defaultValueType;\n    }\n\n    XMLDTDAttList.prototype.toString = function(options) {\n      return this.options.writer.dtdAttList(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDAttList;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDElement, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDElement = (function(superClass) {\n    extend(XMLDTDElement, superClass);\n\n    function XMLDTDElement(parent, name, value) {\n      XMLDTDElement.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD element name. \" + this.debugInfo());\n      }\n      if (!value) {\n        value = '(#PCDATA)';\n      }\n      if (Array.isArray(value)) {\n        value = '(' + value.join(',') + ')';\n      }\n      this.name = this.stringify.name(name);\n      this.type = NodeType.ElementDeclaration;\n      this.value = this.stringify.dtdElementValue(value);\n    }\n\n    XMLDTDElement.prototype.toString = function(options) {\n      return this.options.writer.dtdElement(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDElement;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDEntity, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDEntity = (function(superClass) {\n    extend(XMLDTDEntity, superClass);\n\n    function XMLDTDEntity(parent, pe, name, value) {\n      XMLDTDEntity.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD entity name. \" + this.debugInfo(name));\n      }\n      if (value == null) {\n        throw new Error(\"Missing DTD entity value. \" + this.debugInfo(name));\n      }\n      this.pe = !!pe;\n      this.name = this.stringify.name(name);\n      this.type = NodeType.EntityDeclaration;\n      if (!isObject(value)) {\n        this.value = this.stringify.dtdEntityValue(value);\n        this.internal = true;\n      } else {\n        if (!value.pubID && !value.sysID) {\n          throw new Error(\"Public and/or system identifiers are required for an external entity. \" + this.debugInfo(name));\n        }\n        if (value.pubID && !value.sysID) {\n          throw new Error(\"System identifier is required for a public external entity. \" + this.debugInfo(name));\n        }\n        this.internal = false;\n        if (value.pubID != null) {\n          this.pubID = this.stringify.dtdPubID(value.pubID);\n        }\n        if (value.sysID != null) {\n          this.sysID = this.stringify.dtdSysID(value.sysID);\n        }\n        if (value.nData != null) {\n          this.nData = this.stringify.dtdNData(value.nData);\n        }\n        if (this.pe && this.nData) {\n          throw new Error(\"Notation declaration is not allowed in a parameter entity. \" + this.debugInfo(name));\n        }\n      }\n    }\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'notationName', {\n      get: function() {\n        return this.nData || null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'inputEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'xmlEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDTDEntity.prototype, 'xmlVersion', {\n      get: function() {\n        return null;\n      }\n    });\n\n    XMLDTDEntity.prototype.toString = function(options) {\n      return this.options.writer.dtdEntity(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDEntity;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDNotation, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDTDNotation = (function(superClass) {\n    extend(XMLDTDNotation, superClass);\n\n    function XMLDTDNotation(parent, name, value) {\n      XMLDTDNotation.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD notation name. \" + this.debugInfo(name));\n      }\n      if (!value.pubID && !value.sysID) {\n        throw new Error(\"Public or system identifiers are required for an external entity. \" + this.debugInfo(name));\n      }\n      this.name = this.stringify.name(name);\n      this.type = NodeType.NotationDeclaration;\n      if (value.pubID != null) {\n        this.pubID = this.stringify.dtdPubID(value.pubID);\n      }\n      if (value.sysID != null) {\n        this.sysID = this.stringify.dtdSysID(value.sysID);\n      }\n    }\n\n    Object.defineProperty(XMLDTDNotation.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDTDNotation.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    XMLDTDNotation.prototype.toString = function(options) {\n      return this.options.writer.dtdNotation(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDTDNotation;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDeclaration, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDeclaration = (function(superClass) {\n    extend(XMLDeclaration, superClass);\n\n    function XMLDeclaration(parent, version, encoding, standalone) {\n      var ref;\n      XMLDeclaration.__super__.constructor.call(this, parent);\n      if (isObject(version)) {\n        ref = version, version = ref.version, encoding = ref.encoding, standalone = ref.standalone;\n      }\n      if (!version) {\n        version = '1.0';\n      }\n      this.type = NodeType.Declaration;\n      this.version = this.stringify.xmlVersion(version);\n      if (encoding != null) {\n        this.encoding = this.stringify.xmlEncoding(encoding);\n      }\n      if (standalone != null) {\n        this.standalone = this.stringify.xmlStandalone(standalone);\n      }\n    }\n\n    XMLDeclaration.prototype.toString = function(options) {\n      return this.options.writer.declaration(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLDeclaration;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDocType, XMLNamedNodeMap, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLNamedNodeMap = require('./XMLNamedNodeMap');\n\n  module.exports = XMLDocType = (function(superClass) {\n    extend(XMLDocType, superClass);\n\n    function XMLDocType(parent, pubID, sysID) {\n      var child, i, len, ref, ref1, ref2;\n      XMLDocType.__super__.constructor.call(this, parent);\n      this.type = NodeType.DocType;\n      if (parent.children) {\n        ref = parent.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.Element) {\n            this.name = child.name;\n            break;\n          }\n        }\n      }\n      this.documentObject = parent;\n      if (isObject(pubID)) {\n        ref1 = pubID, pubID = ref1.pubID, sysID = ref1.sysID;\n      }\n      if (sysID == null) {\n        ref2 = [pubID, sysID], sysID = ref2[0], pubID = ref2[1];\n      }\n      if (pubID != null) {\n        this.pubID = this.stringify.dtdPubID(pubID);\n      }\n      if (sysID != null) {\n        this.sysID = this.stringify.dtdSysID(sysID);\n      }\n    }\n\n    Object.defineProperty(XMLDocType.prototype, 'entities', {\n      get: function() {\n        var child, i, len, nodes, ref;\n        nodes = {};\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if ((child.type === NodeType.EntityDeclaration) && !child.pe) {\n            nodes[child.name] = child;\n          }\n        }\n        return new XMLNamedNodeMap(nodes);\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'notations', {\n      get: function() {\n        var child, i, len, nodes, ref;\n        nodes = {};\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.NotationDeclaration) {\n            nodes[child.name] = child;\n          }\n        }\n        return new XMLNamedNodeMap(nodes);\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'publicId', {\n      get: function() {\n        return this.pubID;\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'systemId', {\n      get: function() {\n        return this.sysID;\n      }\n    });\n\n    Object.defineProperty(XMLDocType.prototype, 'internalSubset', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    XMLDocType.prototype.element = function(name, value) {\n      var child;\n      child = new XMLDTDElement(this, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var child;\n      child = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.entity = function(name, value) {\n      var child;\n      child = new XMLDTDEntity(this, false, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.pEntity = function(name, value) {\n      var child;\n      child = new XMLDTDEntity(this, true, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.notation = function(name, value) {\n      var child;\n      child = new XMLDTDNotation(this, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.toString = function(options) {\n      return this.options.writer.docType(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLDocType.prototype.ele = function(name, value) {\n      return this.element(name, value);\n    };\n\n    XMLDocType.prototype.att = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      return this.attList(elementName, attributeName, attributeType, defaultValueType, defaultValue);\n    };\n\n    XMLDocType.prototype.ent = function(name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocType.prototype.pent = function(name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocType.prototype.not = function(name, value) {\n      return this.notation(name, value);\n    };\n\n    XMLDocType.prototype.up = function() {\n      return this.root() || this.documentObject;\n    };\n\n    XMLDocType.prototype.isEqualNode = function(node) {\n      if (!XMLDocType.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.name !== this.name) {\n        return false;\n      }\n      if (node.publicId !== this.publicId) {\n        return false;\n      }\n      if (node.systemId !== this.systemId) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLDocType;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDOMConfiguration, XMLDOMImplementation, XMLDocument, XMLNode, XMLStringWriter, XMLStringifier, isPlainObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isPlainObject = require('./Utility').isPlainObject;\n\n  XMLDOMImplementation = require('./XMLDOMImplementation');\n\n  XMLDOMConfiguration = require('./XMLDOMConfiguration');\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  module.exports = XMLDocument = (function(superClass) {\n    extend(XMLDocument, superClass);\n\n    function XMLDocument(options) {\n      XMLDocument.__super__.constructor.call(this, null);\n      this.name = \"#document\";\n      this.type = NodeType.Document;\n      this.documentURI = null;\n      this.domConfig = new XMLDOMConfiguration();\n      options || (options = {});\n      if (!options.writer) {\n        options.writer = new XMLStringWriter();\n      }\n      this.options = options;\n      this.stringify = new XMLStringifier(options);\n    }\n\n    Object.defineProperty(XMLDocument.prototype, 'implementation', {\n      value: new XMLDOMImplementation()\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'doctype', {\n      get: function() {\n        var child, i, len, ref;\n        ref = this.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          if (child.type === NodeType.DocType) {\n            return child;\n          }\n        }\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'documentElement', {\n      get: function() {\n        return this.rootObject || null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'inputEncoding', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'strictErrorChecking', {\n      get: function() {\n        return false;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlEncoding', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].encoding;\n        } else {\n          return null;\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlStandalone', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].standalone === 'yes';\n        } else {\n          return false;\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'xmlVersion', {\n      get: function() {\n        if (this.children.length !== 0 && this.children[0].type === NodeType.Declaration) {\n          return this.children[0].version;\n        } else {\n          return \"1.0\";\n        }\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'URL', {\n      get: function() {\n        return this.documentURI;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'origin', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'compatMode', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'characterSet', {\n      get: function() {\n        return null;\n      }\n    });\n\n    Object.defineProperty(XMLDocument.prototype, 'contentType', {\n      get: function() {\n        return null;\n      }\n    });\n\n    XMLDocument.prototype.end = function(writer) {\n      var writerOptions;\n      writerOptions = {};\n      if (!writer) {\n        writer = this.options.writer;\n      } else if (isPlainObject(writer)) {\n        writerOptions = writer;\n        writer = this.options.writer;\n      }\n      return writer.document(this, writer.filterOptions(writerOptions));\n    };\n\n    XMLDocument.prototype.toString = function(options) {\n      return this.options.writer.document(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLDocument.prototype.createElement = function(tagName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createDocumentFragment = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createTextNode = function(data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createComment = function(data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createCDATASection = function(data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createProcessingInstruction = function(target, data) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createAttribute = function(name) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createEntityReference = function(name) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementsByTagName = function(tagname) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.importNode = function(importedNode, deep) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createElementNS = function(namespaceURI, qualifiedName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createAttributeNS = function(namespaceURI, qualifiedName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementById = function(elementId) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.adoptNode = function(source) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.normalizeDocument = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.renameNode = function(node, namespaceURI, qualifiedName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.getElementsByClassName = function(classNames) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createEvent = function(eventInterface) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createRange = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createNodeIterator = function(root, whatToShow, filter) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLDocument.prototype.createTreeWalker = function(root, whatToShow, filter) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    return XMLDocument;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLAttribute, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDocument, XMLDocumentCB, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStringWriter, XMLStringifier, XMLText, getValue, isFunction, isObject, isPlainObject, ref,\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, isPlainObject = ref.isPlainObject, getValue = ref.getValue;\n\n  NodeType = require('./NodeType');\n\n  XMLDocument = require('./XMLDocument');\n\n  XMLElement = require('./XMLElement');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  WriterState = require('./WriterState');\n\n  module.exports = XMLDocumentCB = (function() {\n    function XMLDocumentCB(options, onData, onEnd) {\n      var writerOptions;\n      this.name = \"?xml\";\n      this.type = NodeType.Document;\n      options || (options = {});\n      writerOptions = {};\n      if (!options.writer) {\n        options.writer = new XMLStringWriter();\n      } else if (isPlainObject(options.writer)) {\n        writerOptions = options.writer;\n        options.writer = new XMLStringWriter();\n      }\n      this.options = options;\n      this.writer = options.writer;\n      this.writerOptions = this.writer.filterOptions(writerOptions);\n      this.stringify = new XMLStringifier(options);\n      this.onDataCallback = onData || function() {};\n      this.onEndCallback = onEnd || function() {};\n      this.currentNode = null;\n      this.currentLevel = -1;\n      this.openTags = {};\n      this.documentStarted = false;\n      this.documentCompleted = false;\n      this.root = null;\n    }\n\n    XMLDocumentCB.prototype.createChildNode = function(node) {\n      var att, attName, attributes, child, i, len, ref1, ref2;\n      switch (node.type) {\n        case NodeType.CData:\n          this.cdata(node.value);\n          break;\n        case NodeType.Comment:\n          this.comment(node.value);\n          break;\n        case NodeType.Element:\n          attributes = {};\n          ref1 = node.attribs;\n          for (attName in ref1) {\n            if (!hasProp.call(ref1, attName)) continue;\n            att = ref1[attName];\n            attributes[attName] = att.value;\n          }\n          this.node(node.name, attributes);\n          break;\n        case NodeType.Dummy:\n          this.dummy();\n          break;\n        case NodeType.Raw:\n          this.raw(node.value);\n          break;\n        case NodeType.Text:\n          this.text(node.value);\n          break;\n        case NodeType.ProcessingInstruction:\n          this.instruction(node.target, node.value);\n          break;\n        default:\n          throw new Error(\"This XML node type is not supported in a JS object: \" + node.constructor.name);\n      }\n      ref2 = node.children;\n      for (i = 0, len = ref2.length; i < len; i++) {\n        child = ref2[i];\n        this.createChildNode(child);\n        if (child.type === NodeType.Element) {\n          this.up();\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.dummy = function() {\n      return this;\n    };\n\n    XMLDocumentCB.prototype.node = function(name, attributes, text) {\n      var ref1;\n      if (name == null) {\n        throw new Error(\"Missing node name.\");\n      }\n      if (this.root && this.currentLevel === -1) {\n        throw new Error(\"Document can only have one root node. \" + this.debugInfo(name));\n      }\n      this.openCurrent();\n      name = getValue(name);\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = getValue(attributes);\n      if (!isObject(attributes)) {\n        ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];\n      }\n      this.currentNode = new XMLElement(this, name, attributes);\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      if (text != null) {\n        this.text(text);\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.element = function(name, attributes, text) {\n      var child, i, len, oldValidationFlag, ref1, root;\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        this.dtdElement.apply(this, arguments);\n      } else {\n        if (Array.isArray(name) || isObject(name) || isFunction(name)) {\n          oldValidationFlag = this.options.noValidation;\n          this.options.noValidation = true;\n          root = new XMLDocument(this.options).element('TEMP_ROOT');\n          root.element(name);\n          this.options.noValidation = oldValidationFlag;\n          ref1 = root.children;\n          for (i = 0, len = ref1.length; i < len; i++) {\n            child = ref1[i];\n            this.createChildNode(child);\n            if (child.type === NodeType.Element) {\n              this.up();\n            }\n          }\n        } else {\n          this.node(name, attributes, text);\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.attribute = function(name, value) {\n      var attName, attValue;\n      if (!this.currentNode || this.currentNode.children) {\n        throw new Error(\"att() can only be used immediately after an ele() call in callback mode. \" + this.debugInfo(name));\n      }\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (this.options.keepNullAttributes && (value == null)) {\n          this.currentNode.attribs[name] = new XMLAttribute(this, name, \"\");\n        } else if (value != null) {\n          this.currentNode.attribs[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.text = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLText(this, value);\n      this.onData(this.writer.text(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.cdata = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLCData(this, value);\n      this.onData(this.writer.cdata(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.comment = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLComment(this, value);\n      this.onData(this.writer.comment(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.raw = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLRaw(this, value);\n      this.onData(this.writer.raw(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.instruction = function(target, value) {\n      var i, insTarget, insValue, len, node;\n      this.openCurrent();\n      if (target != null) {\n        target = getValue(target);\n      }\n      if (value != null) {\n        value = getValue(value);\n      }\n      if (Array.isArray(target)) {\n        for (i = 0, len = target.length; i < len; i++) {\n          insTarget = target[i];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        node = new XMLProcessingInstruction(this, target, value);\n        this.onData(this.writer.processingInstruction(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.declaration = function(version, encoding, standalone) {\n      var node;\n      this.openCurrent();\n      if (this.documentStarted) {\n        throw new Error(\"declaration() must be the first node.\");\n      }\n      node = new XMLDeclaration(this, version, encoding, standalone);\n      this.onData(this.writer.declaration(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.doctype = function(root, pubID, sysID) {\n      this.openCurrent();\n      if (root == null) {\n        throw new Error(\"Missing root node name.\");\n      }\n      if (this.root) {\n        throw new Error(\"dtd() must come before the root node.\");\n      }\n      this.currentNode = new XMLDocType(this, pubID, sysID);\n      this.currentNode.rootNodeName = root;\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.dtdElement = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDElement(this, name, value);\n      this.onData(this.writer.dtdElement(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.onData(this.writer.dtdAttList(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.entity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, false, name, value);\n      this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.pEntity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, true, name, value);\n      this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.notation = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDNotation(this, name, value);\n      this.onData(this.writer.dtdNotation(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);\n      return this;\n    };\n\n    XMLDocumentCB.prototype.up = function() {\n      if (this.currentLevel < 0) {\n        throw new Error(\"The document node has no parent.\");\n      }\n      if (this.currentNode) {\n        if (this.currentNode.children) {\n          this.closeNode(this.currentNode);\n        } else {\n          this.openNode(this.currentNode);\n        }\n        this.currentNode = null;\n      } else {\n        this.closeNode(this.openTags[this.currentLevel]);\n      }\n      delete this.openTags[this.currentLevel];\n      this.currentLevel--;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.end = function() {\n      while (this.currentLevel >= 0) {\n        this.up();\n      }\n      return this.onEnd();\n    };\n\n    XMLDocumentCB.prototype.openCurrent = function() {\n      if (this.currentNode) {\n        this.currentNode.children = true;\n        return this.openNode(this.currentNode);\n      }\n    };\n\n    XMLDocumentCB.prototype.openNode = function(node) {\n      var att, chunk, name, ref1;\n      if (!node.isOpen) {\n        if (!this.root && this.currentLevel === 0 && node.type === NodeType.Element) {\n          this.root = node;\n        }\n        chunk = '';\n        if (node.type === NodeType.Element) {\n          this.writerOptions.state = WriterState.OpenTag;\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '<' + node.name;\n          ref1 = node.attribs;\n          for (name in ref1) {\n            if (!hasProp.call(ref1, name)) continue;\n            att = ref1[name];\n            chunk += this.writer.attribute(att, this.writerOptions, this.currentLevel);\n          }\n          chunk += (node.children ? '>' : '/>') + this.writer.endline(node, this.writerOptions, this.currentLevel);\n          this.writerOptions.state = WriterState.InsideTag;\n        } else {\n          this.writerOptions.state = WriterState.OpenTag;\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '<!DOCTYPE ' + node.rootNodeName;\n          if (node.pubID && node.sysID) {\n            chunk += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n          } else if (node.sysID) {\n            chunk += ' SYSTEM \"' + node.sysID + '\"';\n          }\n          if (node.children) {\n            chunk += ' [';\n            this.writerOptions.state = WriterState.InsideTag;\n          } else {\n            this.writerOptions.state = WriterState.CloseTag;\n            chunk += '>';\n          }\n          chunk += this.writer.endline(node, this.writerOptions, this.currentLevel);\n        }\n        this.onData(chunk, this.currentLevel);\n        return node.isOpen = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.closeNode = function(node) {\n      var chunk;\n      if (!node.isClosed) {\n        chunk = '';\n        this.writerOptions.state = WriterState.CloseTag;\n        if (node.type === NodeType.Element) {\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '</' + node.name + '>' + this.writer.endline(node, this.writerOptions, this.currentLevel);\n        } else {\n          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + ']>' + this.writer.endline(node, this.writerOptions, this.currentLevel);\n        }\n        this.writerOptions.state = WriterState.None;\n        this.onData(chunk, this.currentLevel);\n        return node.isClosed = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.onData = function(chunk, level) {\n      this.documentStarted = true;\n      return this.onDataCallback(chunk, level + 1);\n    };\n\n    XMLDocumentCB.prototype.onEnd = function() {\n      this.documentCompleted = true;\n      return this.onEndCallback();\n    };\n\n    XMLDocumentCB.prototype.debugInfo = function(name) {\n      if (name == null) {\n        return \"\";\n      } else {\n        return \"node: <\" + name + \">\";\n      }\n    };\n\n    XMLDocumentCB.prototype.ele = function() {\n      return this.element.apply(this, arguments);\n    };\n\n    XMLDocumentCB.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.ins = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLDocumentCB.prototype.dtd = function(root, pubID, sysID) {\n      return this.doctype(root, pubID, sysID);\n    };\n\n    XMLDocumentCB.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLDocumentCB.prototype.i = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.att = function() {\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.a = function() {\n      if (this.currentNode && this.currentNode.type === NodeType.DocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.ent = function(name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocumentCB.prototype.pent = function(name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocumentCB.prototype.not = function(name, value) {\n      return this.notation(name, value);\n    };\n\n    return XMLDocumentCB;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLDummy, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  module.exports = XMLDummy = (function(superClass) {\n    extend(XMLDummy, superClass);\n\n    function XMLDummy(parent) {\n      XMLDummy.__super__.constructor.call(this, parent);\n      this.type = NodeType.Dummy;\n    }\n\n    XMLDummy.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLDummy.prototype.toString = function(options) {\n      return '';\n    };\n\n    return XMLDummy;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLAttribute, XMLElement, XMLNamedNodeMap, XMLNode, getValue, isFunction, isObject, ref,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, getValue = ref.getValue;\n\n  XMLNode = require('./XMLNode');\n\n  NodeType = require('./NodeType');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  XMLNamedNodeMap = require('./XMLNamedNodeMap');\n\n  module.exports = XMLElement = (function(superClass) {\n    extend(XMLElement, superClass);\n\n    function XMLElement(parent, name, attributes) {\n      var child, j, len, ref1;\n      XMLElement.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing element name. \" + this.debugInfo());\n      }\n      this.name = this.stringify.name(name);\n      this.type = NodeType.Element;\n      this.attribs = {};\n      this.schemaTypeInfo = null;\n      if (attributes != null) {\n        this.attribute(attributes);\n      }\n      if (parent.type === NodeType.Document) {\n        this.isRoot = true;\n        this.documentObject = parent;\n        parent.rootObject = this;\n        if (parent.children) {\n          ref1 = parent.children;\n          for (j = 0, len = ref1.length; j < len; j++) {\n            child = ref1[j];\n            if (child.type === NodeType.DocType) {\n              child.name = this.name;\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    Object.defineProperty(XMLElement.prototype, 'tagName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'namespaceURI', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'prefix', {\n      get: function() {\n        return '';\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'localName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'id', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'className', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'classList', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLElement.prototype, 'attributes', {\n      get: function() {\n        if (!this.attributeMap || !this.attributeMap.nodes) {\n          this.attributeMap = new XMLNamedNodeMap(this.attribs);\n        }\n        return this.attributeMap;\n      }\n    });\n\n    XMLElement.prototype.clone = function() {\n      var att, attName, clonedSelf, ref1;\n      clonedSelf = Object.create(this);\n      if (clonedSelf.isRoot) {\n        clonedSelf.documentObject = null;\n      }\n      clonedSelf.attribs = {};\n      ref1 = this.attribs;\n      for (attName in ref1) {\n        if (!hasProp.call(ref1, attName)) continue;\n        att = ref1[attName];\n        clonedSelf.attribs[attName] = att.clone();\n      }\n      clonedSelf.children = [];\n      this.children.forEach(function(child) {\n        var clonedChild;\n        clonedChild = child.clone();\n        clonedChild.parent = clonedSelf;\n        return clonedSelf.children.push(clonedChild);\n      });\n      return clonedSelf;\n    };\n\n    XMLElement.prototype.attribute = function(name, value) {\n      var attName, attValue;\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (this.options.keepNullAttributes && (value == null)) {\n          this.attribs[name] = new XMLAttribute(this, name, \"\");\n        } else if (value != null) {\n          this.attribs[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    };\n\n    XMLElement.prototype.removeAttribute = function(name) {\n      var attName, j, len;\n      if (name == null) {\n        throw new Error(\"Missing attribute name. \" + this.debugInfo());\n      }\n      name = getValue(name);\n      if (Array.isArray(name)) {\n        for (j = 0, len = name.length; j < len; j++) {\n          attName = name[j];\n          delete this.attribs[attName];\n        }\n      } else {\n        delete this.attribs[name];\n      }\n      return this;\n    };\n\n    XMLElement.prototype.toString = function(options) {\n      return this.options.writer.element(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLElement.prototype.att = function(name, value) {\n      return this.attribute(name, value);\n    };\n\n    XMLElement.prototype.a = function(name, value) {\n      return this.attribute(name, value);\n    };\n\n    XMLElement.prototype.getAttribute = function(name) {\n      if (this.attribs.hasOwnProperty(name)) {\n        return this.attribs[name].value;\n      } else {\n        return null;\n      }\n    };\n\n    XMLElement.prototype.setAttribute = function(name, value) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getAttributeNode = function(name) {\n      if (this.attribs.hasOwnProperty(name)) {\n        return this.attribs[name];\n      } else {\n        return null;\n      }\n    };\n\n    XMLElement.prototype.setAttributeNode = function(newAttr) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.removeAttributeNode = function(oldAttr) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagName = function(name) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getAttributeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setAttributeNS = function(namespaceURI, qualifiedName, value) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.removeAttributeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getAttributeNodeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setAttributeNodeNS = function(newAttr) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.hasAttribute = function(name) {\n      return this.attribs.hasOwnProperty(name);\n    };\n\n    XMLElement.prototype.hasAttributeNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setIdAttribute = function(name, isId) {\n      if (this.attribs.hasOwnProperty(name)) {\n        return this.attribs[name].isId;\n      } else {\n        return isId;\n      }\n    };\n\n    XMLElement.prototype.setIdAttributeNS = function(namespaceURI, localName, isId) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.setIdAttributeNode = function(idAttr, isId) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagName = function(tagname) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByTagNameNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.getElementsByClassName = function(classNames) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLElement.prototype.isEqualNode = function(node) {\n      var i, j, ref1;\n      if (!XMLElement.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.namespaceURI !== this.namespaceURI) {\n        return false;\n      }\n      if (node.prefix !== this.prefix) {\n        return false;\n      }\n      if (node.localName !== this.localName) {\n        return false;\n      }\n      if (node.attribs.length !== this.attribs.length) {\n        return false;\n      }\n      for (i = j = 0, ref1 = this.attribs.length - 1; 0 <= ref1 ? j <= ref1 : j >= ref1; i = 0 <= ref1 ? ++j : --j) {\n        if (!this.attribs[i].isEqualNode(node.attribs[i])) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    return XMLElement;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNamedNodeMap;\n\n  module.exports = XMLNamedNodeMap = (function() {\n    function XMLNamedNodeMap(nodes) {\n      this.nodes = nodes;\n    }\n\n    Object.defineProperty(XMLNamedNodeMap.prototype, 'length', {\n      get: function() {\n        return Object.keys(this.nodes).length || 0;\n      }\n    });\n\n    XMLNamedNodeMap.prototype.clone = function() {\n      return this.nodes = null;\n    };\n\n    XMLNamedNodeMap.prototype.getNamedItem = function(name) {\n      return this.nodes[name];\n    };\n\n    XMLNamedNodeMap.prototype.setNamedItem = function(node) {\n      var oldNode;\n      oldNode = this.nodes[node.nodeName];\n      this.nodes[node.nodeName] = node;\n      return oldNode || null;\n    };\n\n    XMLNamedNodeMap.prototype.removeNamedItem = function(name) {\n      var oldNode;\n      oldNode = this.nodes[name];\n      delete this.nodes[name];\n      return oldNode || null;\n    };\n\n    XMLNamedNodeMap.prototype.item = function(index) {\n      return this.nodes[Object.keys(this.nodes)[index]] || null;\n    };\n\n    XMLNamedNodeMap.prototype.getNamedItemNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLNamedNodeMap.prototype.setNamedItemNS = function(node) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    XMLNamedNodeMap.prototype.removeNamedItemNS = function(namespaceURI, localName) {\n      throw new Error(\"This DOM method is not implemented.\");\n    };\n\n    return XMLNamedNodeMap;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var DocumentPosition, NodeType, XMLCData, XMLComment, XMLDeclaration, XMLDocType, XMLDummy, XMLElement, XMLNamedNodeMap, XMLNode, XMLNodeList, XMLProcessingInstruction, XMLRaw, XMLText, getValue, isEmpty, isFunction, isObject, ref1,\n    hasProp = {}.hasOwnProperty;\n\n  ref1 = require('./Utility'), isObject = ref1.isObject, isFunction = ref1.isFunction, isEmpty = ref1.isEmpty, getValue = ref1.getValue;\n\n  XMLElement = null;\n\n  XMLCData = null;\n\n  XMLComment = null;\n\n  XMLDeclaration = null;\n\n  XMLDocType = null;\n\n  XMLRaw = null;\n\n  XMLText = null;\n\n  XMLProcessingInstruction = null;\n\n  XMLDummy = null;\n\n  NodeType = null;\n\n  XMLNodeList = null;\n\n  XMLNamedNodeMap = null;\n\n  DocumentPosition = null;\n\n  module.exports = XMLNode = (function() {\n    function XMLNode(parent1) {\n      this.parent = parent1;\n      if (this.parent) {\n        this.options = this.parent.options;\n        this.stringify = this.parent.stringify;\n      }\n      this.value = null;\n      this.children = [];\n      this.baseURI = null;\n      if (!XMLElement) {\n        XMLElement = require('./XMLElement');\n        XMLCData = require('./XMLCData');\n        XMLComment = require('./XMLComment');\n        XMLDeclaration = require('./XMLDeclaration');\n        XMLDocType = require('./XMLDocType');\n        XMLRaw = require('./XMLRaw');\n        XMLText = require('./XMLText');\n        XMLProcessingInstruction = require('./XMLProcessingInstruction');\n        XMLDummy = require('./XMLDummy');\n        NodeType = require('./NodeType');\n        XMLNodeList = require('./XMLNodeList');\n        XMLNamedNodeMap = require('./XMLNamedNodeMap');\n        DocumentPosition = require('./DocumentPosition');\n      }\n    }\n\n    Object.defineProperty(XMLNode.prototype, 'nodeName', {\n      get: function() {\n        return this.name;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nodeType', {\n      get: function() {\n        return this.type;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nodeValue', {\n      get: function() {\n        return this.value;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'parentNode', {\n      get: function() {\n        return this.parent;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'childNodes', {\n      get: function() {\n        if (!this.childNodeList || !this.childNodeList.nodes) {\n          this.childNodeList = new XMLNodeList(this.children);\n        }\n        return this.childNodeList;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'firstChild', {\n      get: function() {\n        return this.children[0] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'lastChild', {\n      get: function() {\n        return this.children[this.children.length - 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'previousSibling', {\n      get: function() {\n        var i;\n        i = this.parent.children.indexOf(this);\n        return this.parent.children[i - 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'nextSibling', {\n      get: function() {\n        var i;\n        i = this.parent.children.indexOf(this);\n        return this.parent.children[i + 1] || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'ownerDocument', {\n      get: function() {\n        return this.document() || null;\n      }\n    });\n\n    Object.defineProperty(XMLNode.prototype, 'textContent', {\n      get: function() {\n        var child, j, len, ref2, str;\n        if (this.nodeType === NodeType.Element || this.nodeType === NodeType.DocumentFragment) {\n          str = '';\n          ref2 = this.children;\n          for (j = 0, len = ref2.length; j < len; j++) {\n            child = ref2[j];\n            if (child.textContent) {\n              str += child.textContent;\n            }\n          }\n          return str;\n        } else {\n          return null;\n        }\n      },\n      set: function(value) {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    XMLNode.prototype.setParent = function(parent) {\n      var child, j, len, ref2, results;\n      this.parent = parent;\n      if (parent) {\n        this.options = parent.options;\n        this.stringify = parent.stringify;\n      }\n      ref2 = this.children;\n      results = [];\n      for (j = 0, len = ref2.length; j < len; j++) {\n        child = ref2[j];\n        results.push(child.setParent(this));\n      }\n      return results;\n    };\n\n    XMLNode.prototype.element = function(name, attributes, text) {\n      var childNode, item, j, k, key, lastChild, len, len1, ref2, ref3, val;\n      lastChild = null;\n      if (attributes === null && (text == null)) {\n        ref2 = [{}, null], attributes = ref2[0], text = ref2[1];\n      }\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = getValue(attributes);\n      if (!isObject(attributes)) {\n        ref3 = [attributes, text], text = ref3[0], attributes = ref3[1];\n      }\n      if (name != null) {\n        name = getValue(name);\n      }\n      if (Array.isArray(name)) {\n        for (j = 0, len = name.length; j < len; j++) {\n          item = name[j];\n          lastChild = this.element(item);\n        }\n      } else if (isFunction(name)) {\n        lastChild = this.element(name.apply());\n      } else if (isObject(name)) {\n        for (key in name) {\n          if (!hasProp.call(name, key)) continue;\n          val = name[key];\n          if (isFunction(val)) {\n            val = val.apply();\n          }\n          if (!this.options.ignoreDecorators && this.stringify.convertAttKey && key.indexOf(this.stringify.convertAttKey) === 0) {\n            lastChild = this.attribute(key.substr(this.stringify.convertAttKey.length), val);\n          } else if (!this.options.separateArrayItems && Array.isArray(val) && isEmpty(val)) {\n            lastChild = this.dummy();\n          } else if (isObject(val) && isEmpty(val)) {\n            lastChild = this.element(key);\n          } else if (!this.options.keepNullNodes && (val == null)) {\n            lastChild = this.dummy();\n          } else if (!this.options.separateArrayItems && Array.isArray(val)) {\n            for (k = 0, len1 = val.length; k < len1; k++) {\n              item = val[k];\n              childNode = {};\n              childNode[key] = item;\n              lastChild = this.element(childNode);\n            }\n          } else if (isObject(val)) {\n            if (!this.options.ignoreDecorators && this.stringify.convertTextKey && key.indexOf(this.stringify.convertTextKey) === 0) {\n              lastChild = this.element(val);\n            } else {\n              lastChild = this.element(key);\n              lastChild.element(val);\n            }\n          } else {\n            lastChild = this.element(key, val);\n          }\n        }\n      } else if (!this.options.keepNullNodes && text === null) {\n        lastChild = this.dummy();\n      } else {\n        if (!this.options.ignoreDecorators && this.stringify.convertTextKey && name.indexOf(this.stringify.convertTextKey) === 0) {\n          lastChild = this.text(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCDataKey && name.indexOf(this.stringify.convertCDataKey) === 0) {\n          lastChild = this.cdata(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCommentKey && name.indexOf(this.stringify.convertCommentKey) === 0) {\n          lastChild = this.comment(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertRawKey && name.indexOf(this.stringify.convertRawKey) === 0) {\n          lastChild = this.raw(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertPIKey && name.indexOf(this.stringify.convertPIKey) === 0) {\n          lastChild = this.instruction(name.substr(this.stringify.convertPIKey.length), text);\n        } else {\n          lastChild = this.node(name, attributes, text);\n        }\n      }\n      if (lastChild == null) {\n        throw new Error(\"Could not create any elements with: \" + name + \". \" + this.debugInfo());\n      }\n      return lastChild;\n    };\n\n    XMLNode.prototype.insertBefore = function(name, attributes, text) {\n      var child, i, newChild, refChild, removed;\n      if (name != null ? name.type : void 0) {\n        newChild = name;\n        refChild = attributes;\n        newChild.setParent(this);\n        if (refChild) {\n          i = children.indexOf(refChild);\n          removed = children.splice(i);\n          children.push(newChild);\n          Array.prototype.push.apply(children, removed);\n        } else {\n          children.push(newChild);\n        }\n        return newChild;\n      } else {\n        if (this.isRoot) {\n          throw new Error(\"Cannot insert elements at root level. \" + this.debugInfo(name));\n        }\n        i = this.parent.children.indexOf(this);\n        removed = this.parent.children.splice(i);\n        child = this.parent.element(name, attributes, text);\n        Array.prototype.push.apply(this.parent.children, removed);\n        return child;\n      }\n    };\n\n    XMLNode.prototype.insertAfter = function(name, attributes, text) {\n      var child, i, removed;\n      if (this.isRoot) {\n        throw new Error(\"Cannot insert elements at root level. \" + this.debugInfo(name));\n      }\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.element(name, attributes, text);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return child;\n    };\n\n    XMLNode.prototype.remove = function() {\n      var i, ref2;\n      if (this.isRoot) {\n        throw new Error(\"Cannot remove the root element. \" + this.debugInfo());\n      }\n      i = this.parent.children.indexOf(this);\n      [].splice.apply(this.parent.children, [i, i - i + 1].concat(ref2 = [])), ref2;\n      return this.parent;\n    };\n\n    XMLNode.prototype.node = function(name, attributes, text) {\n      var child, ref2;\n      if (name != null) {\n        name = getValue(name);\n      }\n      attributes || (attributes = {});\n      attributes = getValue(attributes);\n      if (!isObject(attributes)) {\n        ref2 = [attributes, text], text = ref2[0], attributes = ref2[1];\n      }\n      child = new XMLElement(this, name, attributes);\n      if (text != null) {\n        child.text(text);\n      }\n      this.children.push(child);\n      return child;\n    };\n\n    XMLNode.prototype.text = function(value) {\n      var child;\n      if (isObject(value)) {\n        this.element(value);\n      }\n      child = new XMLText(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.cdata = function(value) {\n      var child;\n      child = new XMLCData(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.comment = function(value) {\n      var child;\n      child = new XMLComment(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.commentBefore = function(value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.comment(value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.commentAfter = function(value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.comment(value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.raw = function(value) {\n      var child;\n      child = new XMLRaw(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.dummy = function() {\n      var child;\n      child = new XMLDummy(this);\n      return child;\n    };\n\n    XMLNode.prototype.instruction = function(target, value) {\n      var insTarget, insValue, instruction, j, len;\n      if (target != null) {\n        target = getValue(target);\n      }\n      if (value != null) {\n        value = getValue(value);\n      }\n      if (Array.isArray(target)) {\n        for (j = 0, len = target.length; j < len; j++) {\n          insTarget = target[j];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        instruction = new XMLProcessingInstruction(this, target, value);\n        this.children.push(instruction);\n      }\n      return this;\n    };\n\n    XMLNode.prototype.instructionBefore = function(target, value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.instruction(target, value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.instructionAfter = function(target, value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.instruction(target, value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.declaration = function(version, encoding, standalone) {\n      var doc, xmldec;\n      doc = this.document();\n      xmldec = new XMLDeclaration(doc, version, encoding, standalone);\n      if (doc.children.length === 0) {\n        doc.children.unshift(xmldec);\n      } else if (doc.children[0].type === NodeType.Declaration) {\n        doc.children[0] = xmldec;\n      } else {\n        doc.children.unshift(xmldec);\n      }\n      return doc.root() || doc;\n    };\n\n    XMLNode.prototype.dtd = function(pubID, sysID) {\n      var child, doc, doctype, i, j, k, len, len1, ref2, ref3;\n      doc = this.document();\n      doctype = new XMLDocType(doc, pubID, sysID);\n      ref2 = doc.children;\n      for (i = j = 0, len = ref2.length; j < len; i = ++j) {\n        child = ref2[i];\n        if (child.type === NodeType.DocType) {\n          doc.children[i] = doctype;\n          return doctype;\n        }\n      }\n      ref3 = doc.children;\n      for (i = k = 0, len1 = ref3.length; k < len1; i = ++k) {\n        child = ref3[i];\n        if (child.isRoot) {\n          doc.children.splice(i, 0, doctype);\n          return doctype;\n        }\n      }\n      doc.children.push(doctype);\n      return doctype;\n    };\n\n    XMLNode.prototype.up = function() {\n      if (this.isRoot) {\n        throw new Error(\"The root node has no parent. Use doc() if you need to get the document object.\");\n      }\n      return this.parent;\n    };\n\n    XMLNode.prototype.root = function() {\n      var node;\n      node = this;\n      while (node) {\n        if (node.type === NodeType.Document) {\n          return node.rootObject;\n        } else if (node.isRoot) {\n          return node;\n        } else {\n          node = node.parent;\n        }\n      }\n    };\n\n    XMLNode.prototype.document = function() {\n      var node;\n      node = this;\n      while (node) {\n        if (node.type === NodeType.Document) {\n          return node;\n        } else {\n          node = node.parent;\n        }\n      }\n    };\n\n    XMLNode.prototype.end = function(options) {\n      return this.document().end(options);\n    };\n\n    XMLNode.prototype.prev = function() {\n      var i;\n      i = this.parent.children.indexOf(this);\n      if (i < 1) {\n        throw new Error(\"Already at the first node. \" + this.debugInfo());\n      }\n      return this.parent.children[i - 1];\n    };\n\n    XMLNode.prototype.next = function() {\n      var i;\n      i = this.parent.children.indexOf(this);\n      if (i === -1 || i === this.parent.children.length - 1) {\n        throw new Error(\"Already at the last node. \" + this.debugInfo());\n      }\n      return this.parent.children[i + 1];\n    };\n\n    XMLNode.prototype.importDocument = function(doc) {\n      var clonedRoot;\n      clonedRoot = doc.root().clone();\n      clonedRoot.parent = this;\n      clonedRoot.isRoot = false;\n      this.children.push(clonedRoot);\n      return this;\n    };\n\n    XMLNode.prototype.debugInfo = function(name) {\n      var ref2, ref3;\n      name = name || this.name;\n      if ((name == null) && !((ref2 = this.parent) != null ? ref2.name : void 0)) {\n        return \"\";\n      } else if (name == null) {\n        return \"parent: <\" + this.parent.name + \">\";\n      } else if (!((ref3 = this.parent) != null ? ref3.name : void 0)) {\n        return \"node: <\" + name + \">\";\n      } else {\n        return \"node: <\" + name + \">, parent: <\" + this.parent.name + \">\";\n      }\n    };\n\n    XMLNode.prototype.ele = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.ins = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLNode.prototype.doc = function() {\n      return this.document();\n    };\n\n    XMLNode.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLNode.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLNode.prototype.i = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLNode.prototype.u = function() {\n      return this.up();\n    };\n\n    XMLNode.prototype.importXMLBuilder = function(doc) {\n      return this.importDocument(doc);\n    };\n\n    XMLNode.prototype.replaceChild = function(newChild, oldChild) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.removeChild = function(oldChild) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.appendChild = function(newChild) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.hasChildNodes = function() {\n      return this.children.length !== 0;\n    };\n\n    XMLNode.prototype.cloneNode = function(deep) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.normalize = function() {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.isSupported = function(feature, version) {\n      return true;\n    };\n\n    XMLNode.prototype.hasAttributes = function() {\n      return this.attribs.length !== 0;\n    };\n\n    XMLNode.prototype.compareDocumentPosition = function(other) {\n      var ref, res;\n      ref = this;\n      if (ref === other) {\n        return 0;\n      } else if (this.document() !== other.document()) {\n        res = DocumentPosition.Disconnected | DocumentPosition.ImplementationSpecific;\n        if (Math.random() < 0.5) {\n          res |= DocumentPosition.Preceding;\n        } else {\n          res |= DocumentPosition.Following;\n        }\n        return res;\n      } else if (ref.isAncestor(other)) {\n        return DocumentPosition.Contains | DocumentPosition.Preceding;\n      } else if (ref.isDescendant(other)) {\n        return DocumentPosition.Contains | DocumentPosition.Following;\n      } else if (ref.isPreceding(other)) {\n        return DocumentPosition.Preceding;\n      } else {\n        return DocumentPosition.Following;\n      }\n    };\n\n    XMLNode.prototype.isSameNode = function(other) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.lookupPrefix = function(namespaceURI) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.isDefaultNamespace = function(namespaceURI) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.lookupNamespaceURI = function(prefix) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.isEqualNode = function(node) {\n      var i, j, ref2;\n      if (node.nodeType !== this.nodeType) {\n        return false;\n      }\n      if (node.children.length !== this.children.length) {\n        return false;\n      }\n      for (i = j = 0, ref2 = this.children.length - 1; 0 <= ref2 ? j <= ref2 : j >= ref2; i = 0 <= ref2 ? ++j : --j) {\n        if (!this.children[i].isEqualNode(node.children[i])) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    XMLNode.prototype.getFeature = function(feature, version) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.setUserData = function(key, data, handler) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.getUserData = function(key) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLNode.prototype.contains = function(other) {\n      if (!other) {\n        return false;\n      }\n      return other === this || this.isDescendant(other);\n    };\n\n    XMLNode.prototype.isDescendant = function(node) {\n      var child, isDescendantChild, j, len, ref2;\n      ref2 = this.children;\n      for (j = 0, len = ref2.length; j < len; j++) {\n        child = ref2[j];\n        if (node === child) {\n          return true;\n        }\n        isDescendantChild = child.isDescendant(node);\n        if (isDescendantChild) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    XMLNode.prototype.isAncestor = function(node) {\n      return node.isDescendant(this);\n    };\n\n    XMLNode.prototype.isPreceding = function(node) {\n      var nodePos, thisPos;\n      nodePos = this.treePosition(node);\n      thisPos = this.treePosition(this);\n      if (nodePos === -1 || thisPos === -1) {\n        return false;\n      } else {\n        return nodePos < thisPos;\n      }\n    };\n\n    XMLNode.prototype.isFollowing = function(node) {\n      var nodePos, thisPos;\n      nodePos = this.treePosition(node);\n      thisPos = this.treePosition(this);\n      if (nodePos === -1 || thisPos === -1) {\n        return false;\n      } else {\n        return nodePos > thisPos;\n      }\n    };\n\n    XMLNode.prototype.treePosition = function(node) {\n      var found, pos;\n      pos = 0;\n      found = false;\n      this.foreachTreeNode(this.document(), function(childNode) {\n        pos++;\n        if (!found && childNode === node) {\n          return found = true;\n        }\n      });\n      if (found) {\n        return pos;\n      } else {\n        return -1;\n      }\n    };\n\n    XMLNode.prototype.foreachTreeNode = function(node, func) {\n      var child, j, len, ref2, res;\n      node || (node = this.document());\n      ref2 = node.children;\n      for (j = 0, len = ref2.length; j < len; j++) {\n        child = ref2[j];\n        if (res = func(child)) {\n          return res;\n        } else {\n          res = this.foreachTreeNode(child, func);\n          if (res) {\n            return res;\n          }\n        }\n      }\n    };\n\n    return XMLNode;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNodeList;\n\n  module.exports = XMLNodeList = (function() {\n    function XMLNodeList(nodes) {\n      this.nodes = nodes;\n    }\n\n    Object.defineProperty(XMLNodeList.prototype, 'length', {\n      get: function() {\n        return this.nodes.length || 0;\n      }\n    });\n\n    XMLNodeList.prototype.clone = function() {\n      return this.nodes = null;\n    };\n\n    XMLNodeList.prototype.item = function(index) {\n      return this.nodes[index] || null;\n    };\n\n    return XMLNodeList;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCharacterData, XMLProcessingInstruction,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLProcessingInstruction = (function(superClass) {\n    extend(XMLProcessingInstruction, superClass);\n\n    function XMLProcessingInstruction(parent, target, value) {\n      XMLProcessingInstruction.__super__.constructor.call(this, parent);\n      if (target == null) {\n        throw new Error(\"Missing instruction target. \" + this.debugInfo());\n      }\n      this.type = NodeType.ProcessingInstruction;\n      this.target = this.stringify.insTarget(target);\n      this.name = this.target;\n      if (value) {\n        this.value = this.stringify.insValue(value);\n      }\n    }\n\n    XMLProcessingInstruction.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLProcessingInstruction.prototype.toString = function(options) {\n      return this.options.writer.processingInstruction(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLProcessingInstruction.prototype.isEqualNode = function(node) {\n      if (!XMLProcessingInstruction.__super__.isEqualNode.apply(this, arguments).isEqualNode(node)) {\n        return false;\n      }\n      if (node.target !== this.target) {\n        return false;\n      }\n      return true;\n    };\n\n    return XMLProcessingInstruction;\n\n  })(XMLCharacterData);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLNode, XMLRaw,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLRaw = (function(superClass) {\n    extend(XMLRaw, superClass);\n\n    function XMLRaw(parent, text) {\n      XMLRaw.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing raw text. \" + this.debugInfo());\n      }\n      this.type = NodeType.Raw;\n      this.value = this.stringify.raw(text);\n    }\n\n    XMLRaw.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLRaw.prototype.toString = function(options) {\n      return this.options.writer.raw(this, this.options.writer.filterOptions(options));\n    };\n\n    return XMLRaw;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLStreamWriter, XMLWriterBase,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  WriterState = require('./WriterState');\n\n  module.exports = XMLStreamWriter = (function(superClass) {\n    extend(XMLStreamWriter, superClass);\n\n    function XMLStreamWriter(stream, options) {\n      this.stream = stream;\n      XMLStreamWriter.__super__.constructor.call(this, options);\n    }\n\n    XMLStreamWriter.prototype.endline = function(node, options, level) {\n      if (node.isLastRootNode && options.state === WriterState.CloseTag) {\n        return '';\n      } else {\n        return XMLStreamWriter.__super__.endline.call(this, node, options, level);\n      }\n    };\n\n    XMLStreamWriter.prototype.document = function(doc, options) {\n      var child, i, j, k, len, len1, ref, ref1, results;\n      ref = doc.children;\n      for (i = j = 0, len = ref.length; j < len; i = ++j) {\n        child = ref[i];\n        child.isLastRootNode = i === doc.children.length - 1;\n      }\n      options = this.filterOptions(options);\n      ref1 = doc.children;\n      results = [];\n      for (k = 0, len1 = ref1.length; k < len1; k++) {\n        child = ref1[k];\n        results.push(this.writeChildNode(child, options, 0));\n      }\n      return results;\n    };\n\n    XMLStreamWriter.prototype.attribute = function(att, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.attribute.call(this, att, options, level));\n    };\n\n    XMLStreamWriter.prototype.cdata = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.cdata.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.comment = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.comment.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.declaration = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.declaration.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.docType = function(node, options, level) {\n      var child, j, len, ref;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      this.stream.write(this.indent(node, options, level));\n      this.stream.write('<!DOCTYPE ' + node.root().name);\n      if (node.pubID && node.sysID) {\n        this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\n      } else if (node.sysID) {\n        this.stream.write(' SYSTEM \"' + node.sysID + '\"');\n      }\n      if (node.children.length > 0) {\n        this.stream.write(' [');\n        this.stream.write(this.endline(node, options, level));\n        options.state = WriterState.InsideTag;\n        ref = node.children;\n        for (j = 0, len = ref.length; j < len; j++) {\n          child = ref[j];\n          this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        this.stream.write(']');\n      }\n      options.state = WriterState.CloseTag;\n      this.stream.write(options.spaceBeforeSlash + '>');\n      this.stream.write(this.endline(node, options, level));\n      options.state = WriterState.None;\n      return this.closeNode(node, options, level);\n    };\n\n    XMLStreamWriter.prototype.element = function(node, options, level) {\n      var att, child, childNodeCount, firstChildNode, j, len, name, prettySuppressed, ref, ref1;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      this.stream.write(this.indent(node, options, level) + '<' + node.name);\n      ref = node.attribs;\n      for (name in ref) {\n        if (!hasProp.call(ref, name)) continue;\n        att = ref[name];\n        this.attribute(att, options, level);\n      }\n      childNodeCount = node.children.length;\n      firstChildNode = childNodeCount === 0 ? null : node.children[0];\n      if (childNodeCount === 0 || node.children.every(function(e) {\n        return (e.type === NodeType.Text || e.type === NodeType.Raw) && e.value === '';\n      })) {\n        if (options.allowEmpty) {\n          this.stream.write('>');\n          options.state = WriterState.CloseTag;\n          this.stream.write('</' + node.name + '>');\n        } else {\n          options.state = WriterState.CloseTag;\n          this.stream.write(options.spaceBeforeSlash + '/>');\n        }\n      } else if (options.pretty && childNodeCount === 1 && (firstChildNode.type === NodeType.Text || firstChildNode.type === NodeType.Raw) && (firstChildNode.value != null)) {\n        this.stream.write('>');\n        options.state = WriterState.InsideTag;\n        options.suppressPrettyCount++;\n        prettySuppressed = true;\n        this.writeChildNode(firstChildNode, options, level + 1);\n        options.suppressPrettyCount--;\n        prettySuppressed = false;\n        options.state = WriterState.CloseTag;\n        this.stream.write('</' + node.name + '>');\n      } else {\n        this.stream.write('>' + this.endline(node, options, level));\n        options.state = WriterState.InsideTag;\n        ref1 = node.children;\n        for (j = 0, len = ref1.length; j < len; j++) {\n          child = ref1[j];\n          this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        this.stream.write(this.indent(node, options, level) + '</' + node.name + '>');\n      }\n      this.stream.write(this.endline(node, options, level));\n      options.state = WriterState.None;\n      return this.closeNode(node, options, level);\n    };\n\n    XMLStreamWriter.prototype.processingInstruction = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.processingInstruction.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.raw = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.raw.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.text = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.text.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdAttList = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdAttList.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdElement = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdElement.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdEntity = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdEntity.call(this, node, options, level));\n    };\n\n    XMLStreamWriter.prototype.dtdNotation = function(node, options, level) {\n      return this.stream.write(XMLStreamWriter.__super__.dtdNotation.call(this, node, options, level));\n    };\n\n    return XMLStreamWriter;\n\n  })(XMLWriterBase);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLStringWriter, XMLWriterBase,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  module.exports = XMLStringWriter = (function(superClass) {\n    extend(XMLStringWriter, superClass);\n\n    function XMLStringWriter(options) {\n      XMLStringWriter.__super__.constructor.call(this, options);\n    }\n\n    XMLStringWriter.prototype.document = function(doc, options) {\n      var child, i, len, r, ref;\n      options = this.filterOptions(options);\n      r = '';\n      ref = doc.children;\n      for (i = 0, len = ref.length; i < len; i++) {\n        child = ref[i];\n        r += this.writeChildNode(child, options, 0);\n      }\n      if (options.pretty && r.slice(-options.newline.length) === options.newline) {\n        r = r.slice(0, -options.newline.length);\n      }\n      return r;\n    };\n\n    return XMLStringWriter;\n\n  })(XMLWriterBase);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLStringifier,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    hasProp = {}.hasOwnProperty;\n\n  module.exports = XMLStringifier = (function() {\n    function XMLStringifier(options) {\n      this.assertLegalName = bind(this.assertLegalName, this);\n      this.assertLegalChar = bind(this.assertLegalChar, this);\n      var key, ref, value;\n      options || (options = {});\n      this.options = options;\n      if (!this.options.version) {\n        this.options.version = '1.0';\n      }\n      ref = options.stringify || {};\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this[key] = value;\n      }\n    }\n\n    XMLStringifier.prototype.name = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalName('' + val || '');\n    };\n\n    XMLStringifier.prototype.text = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar(this.textEscape('' + val || ''));\n    };\n\n    XMLStringifier.prototype.cdata = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      val = val.replace(']]>', ']]]]><![CDATA[>');\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.comment = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (val.match(/--/)) {\n        throw new Error(\"Comment text cannot contain double-hypen: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.raw = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.attValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar(this.attEscape(val = '' + val || ''));\n    };\n\n    XMLStringifier.prototype.insTarget = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.insValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (val.match(/\\?>/)) {\n        throw new Error(\"Invalid processing instruction value: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.xmlVersion = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (!val.match(/1\\.[0-9]+/)) {\n        throw new Error(\"Invalid version number: \" + val);\n      }\n      return val;\n    };\n\n    XMLStringifier.prototype.xmlEncoding = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      val = '' + val || '';\n      if (!val.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/)) {\n        throw new Error(\"Invalid encoding: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.xmlStandalone = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      if (val) {\n        return \"yes\";\n      } else {\n        return \"no\";\n      }\n    };\n\n    XMLStringifier.prototype.dtdPubID = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdSysID = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdElementValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdAttType = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdAttDefault = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdEntityValue = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.dtdNData = function(val) {\n      if (this.options.noValidation) {\n        return val;\n      }\n      return this.assertLegalChar('' + val || '');\n    };\n\n    XMLStringifier.prototype.convertAttKey = '@';\n\n    XMLStringifier.prototype.convertPIKey = '?';\n\n    XMLStringifier.prototype.convertTextKey = '#text';\n\n    XMLStringifier.prototype.convertCDataKey = '#cdata';\n\n    XMLStringifier.prototype.convertCommentKey = '#comment';\n\n    XMLStringifier.prototype.convertRawKey = '#raw';\n\n    XMLStringifier.prototype.assertLegalChar = function(str) {\n      var regex, res;\n      if (this.options.noValidation) {\n        return str;\n      }\n      regex = '';\n      if (this.options.version === '1.0') {\n        regex = /[\\0-\\x08\\x0B\\f\\x0E-\\x1F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n        if (res = str.match(regex)) {\n          throw new Error(\"Invalid character in string: \" + str + \" at index \" + res.index);\n        }\n      } else if (this.options.version === '1.1') {\n        regex = /[\\0\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\n        if (res = str.match(regex)) {\n          throw new Error(\"Invalid character in string: \" + str + \" at index \" + res.index);\n        }\n      }\n      return str;\n    };\n\n    XMLStringifier.prototype.assertLegalName = function(str) {\n      var regex;\n      if (this.options.noValidation) {\n        return str;\n      }\n      this.assertLegalChar(str);\n      regex = /^([:A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])([\\x2D\\.0-:A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])*$/;\n      if (!str.match(regex)) {\n        throw new Error(\"Invalid character in name\");\n      }\n      return str;\n    };\n\n    XMLStringifier.prototype.textEscape = function(str) {\n      var ampregex;\n      if (this.options.noValidation) {\n        return str;\n      }\n      ampregex = this.options.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\r/g, '&#xD;');\n    };\n\n    XMLStringifier.prototype.attEscape = function(str) {\n      var ampregex;\n      if (this.options.noValidation) {\n        return str;\n      }\n      ampregex = this.options.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/\\t/g, '&#x9;').replace(/\\n/g, '&#xA;').replace(/\\r/g, '&#xD;');\n    };\n\n    return XMLStringifier;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, XMLCharacterData, XMLText,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NodeType = require('./NodeType');\n\n  XMLCharacterData = require('./XMLCharacterData');\n\n  module.exports = XMLText = (function(superClass) {\n    extend(XMLText, superClass);\n\n    function XMLText(parent, text) {\n      XMLText.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing element text. \" + this.debugInfo());\n      }\n      this.name = \"#text\";\n      this.type = NodeType.Text;\n      this.value = this.stringify.text(text);\n    }\n\n    Object.defineProperty(XMLText.prototype, 'isElementContentWhitespace', {\n      get: function() {\n        throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n      }\n    });\n\n    Object.defineProperty(XMLText.prototype, 'wholeText', {\n      get: function() {\n        var next, prev, str;\n        str = '';\n        prev = this.previousSibling;\n        while (prev) {\n          str = prev.data + str;\n          prev = prev.previousSibling;\n        }\n        str += this.data;\n        next = this.nextSibling;\n        while (next) {\n          str = str + next.data;\n          next = next.nextSibling;\n        }\n        return str;\n      }\n    });\n\n    XMLText.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLText.prototype.toString = function(options) {\n      return this.options.writer.text(this, this.options.writer.filterOptions(options));\n    };\n\n    XMLText.prototype.splitText = function(offset) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    XMLText.prototype.replaceWholeText = function(content) {\n      throw new Error(\"This DOM method is not implemented.\" + this.debugInfo());\n    };\n\n    return XMLText;\n\n  })(XMLCharacterData);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDummy, XMLElement, XMLProcessingInstruction, XMLRaw, XMLText, XMLWriterBase, assign,\n    hasProp = {}.hasOwnProperty;\n\n  assign = require('./Utility').assign;\n\n  NodeType = require('./NodeType');\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLElement = require('./XMLElement');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDummy = require('./XMLDummy');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  WriterState = require('./WriterState');\n\n  module.exports = XMLWriterBase = (function() {\n    function XMLWriterBase(options) {\n      var key, ref, value;\n      options || (options = {});\n      this.options = options;\n      ref = options.writer || {};\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this[\"_\" + key] = this[key];\n        this[key] = value;\n      }\n    }\n\n    XMLWriterBase.prototype.filterOptions = function(options) {\n      var filteredOptions, ref, ref1, ref2, ref3, ref4, ref5, ref6;\n      options || (options = {});\n      options = assign({}, this.options, options);\n      filteredOptions = {\n        writer: this\n      };\n      filteredOptions.pretty = options.pretty || false;\n      filteredOptions.allowEmpty = options.allowEmpty || false;\n      filteredOptions.indent = (ref = options.indent) != null ? ref : '  ';\n      filteredOptions.newline = (ref1 = options.newline) != null ? ref1 : '\\n';\n      filteredOptions.offset = (ref2 = options.offset) != null ? ref2 : 0;\n      filteredOptions.dontPrettyTextNodes = (ref3 = (ref4 = options.dontPrettyTextNodes) != null ? ref4 : options.dontprettytextnodes) != null ? ref3 : 0;\n      filteredOptions.spaceBeforeSlash = (ref5 = (ref6 = options.spaceBeforeSlash) != null ? ref6 : options.spacebeforeslash) != null ? ref5 : '';\n      if (filteredOptions.spaceBeforeSlash === true) {\n        filteredOptions.spaceBeforeSlash = ' ';\n      }\n      filteredOptions.suppressPrettyCount = 0;\n      filteredOptions.user = {};\n      filteredOptions.state = WriterState.None;\n      return filteredOptions;\n    };\n\n    XMLWriterBase.prototype.indent = function(node, options, level) {\n      var indentLevel;\n      if (!options.pretty || options.suppressPrettyCount) {\n        return '';\n      } else if (options.pretty) {\n        indentLevel = (level || 0) + options.offset + 1;\n        if (indentLevel > 0) {\n          return new Array(indentLevel).join(options.indent);\n        }\n      }\n      return '';\n    };\n\n    XMLWriterBase.prototype.endline = function(node, options, level) {\n      if (!options.pretty || options.suppressPrettyCount) {\n        return '';\n      } else {\n        return options.newline;\n      }\n    };\n\n    XMLWriterBase.prototype.attribute = function(att, options, level) {\n      var r;\n      this.openAttribute(att, options, level);\n      r = ' ' + att.name + '=\"' + att.value + '\"';\n      this.closeAttribute(att, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.cdata = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<![CDATA[';\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += ']]>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.comment = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!-- ';\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += ' -->' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.declaration = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<?xml';\n      options.state = WriterState.InsideTag;\n      r += ' version=\"' + node.version + '\"';\n      if (node.encoding != null) {\n        r += ' encoding=\"' + node.encoding + '\"';\n      }\n      if (node.standalone != null) {\n        r += ' standalone=\"' + node.standalone + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '?>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.docType = function(node, options, level) {\n      var child, i, len, r, ref;\n      level || (level = 0);\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      r += '<!DOCTYPE ' + node.root().name;\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      if (node.children.length > 0) {\n        r += ' [';\n        r += this.endline(node, options, level);\n        options.state = WriterState.InsideTag;\n        ref = node.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          r += this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        r += ']';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.element = function(node, options, level) {\n      var att, child, childNodeCount, firstChildNode, i, j, len, len1, name, prettySuppressed, r, ref, ref1, ref2;\n      level || (level = 0);\n      prettySuppressed = false;\n      r = '';\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r += this.indent(node, options, level) + '<' + node.name;\n      ref = node.attribs;\n      for (name in ref) {\n        if (!hasProp.call(ref, name)) continue;\n        att = ref[name];\n        r += this.attribute(att, options, level);\n      }\n      childNodeCount = node.children.length;\n      firstChildNode = childNodeCount === 0 ? null : node.children[0];\n      if (childNodeCount === 0 || node.children.every(function(e) {\n        return (e.type === NodeType.Text || e.type === NodeType.Raw) && e.value === '';\n      })) {\n        if (options.allowEmpty) {\n          r += '>';\n          options.state = WriterState.CloseTag;\n          r += '</' + node.name + '>' + this.endline(node, options, level);\n        } else {\n          options.state = WriterState.CloseTag;\n          r += options.spaceBeforeSlash + '/>' + this.endline(node, options, level);\n        }\n      } else if (options.pretty && childNodeCount === 1 && (firstChildNode.type === NodeType.Text || firstChildNode.type === NodeType.Raw) && (firstChildNode.value != null)) {\n        r += '>';\n        options.state = WriterState.InsideTag;\n        options.suppressPrettyCount++;\n        prettySuppressed = true;\n        r += this.writeChildNode(firstChildNode, options, level + 1);\n        options.suppressPrettyCount--;\n        prettySuppressed = false;\n        options.state = WriterState.CloseTag;\n        r += '</' + node.name + '>' + this.endline(node, options, level);\n      } else {\n        if (options.dontPrettyTextNodes) {\n          ref1 = node.children;\n          for (i = 0, len = ref1.length; i < len; i++) {\n            child = ref1[i];\n            if ((child.type === NodeType.Text || child.type === NodeType.Raw) && (child.value != null)) {\n              options.suppressPrettyCount++;\n              prettySuppressed = true;\n              break;\n            }\n          }\n        }\n        r += '>' + this.endline(node, options, level);\n        options.state = WriterState.InsideTag;\n        ref2 = node.children;\n        for (j = 0, len1 = ref2.length; j < len1; j++) {\n          child = ref2[j];\n          r += this.writeChildNode(child, options, level + 1);\n        }\n        options.state = WriterState.CloseTag;\n        r += this.indent(node, options, level) + '</' + node.name + '>';\n        if (prettySuppressed) {\n          options.suppressPrettyCount--;\n        }\n        r += this.endline(node, options, level);\n        options.state = WriterState.None;\n      }\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.writeChildNode = function(node, options, level) {\n      switch (node.type) {\n        case NodeType.CData:\n          return this.cdata(node, options, level);\n        case NodeType.Comment:\n          return this.comment(node, options, level);\n        case NodeType.Element:\n          return this.element(node, options, level);\n        case NodeType.Raw:\n          return this.raw(node, options, level);\n        case NodeType.Text:\n          return this.text(node, options, level);\n        case NodeType.ProcessingInstruction:\n          return this.processingInstruction(node, options, level);\n        case NodeType.Dummy:\n          return '';\n        case NodeType.Declaration:\n          return this.declaration(node, options, level);\n        case NodeType.DocType:\n          return this.docType(node, options, level);\n        case NodeType.AttributeDeclaration:\n          return this.dtdAttList(node, options, level);\n        case NodeType.ElementDeclaration:\n          return this.dtdElement(node, options, level);\n        case NodeType.EntityDeclaration:\n          return this.dtdEntity(node, options, level);\n        case NodeType.NotationDeclaration:\n          return this.dtdNotation(node, options, level);\n        default:\n          throw new Error(\"Unknown XML node type: \" + node.constructor.name);\n      }\n    };\n\n    XMLWriterBase.prototype.processingInstruction = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<?';\n      options.state = WriterState.InsideTag;\n      r += node.target;\n      if (node.value) {\n        r += ' ' + node.value;\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '?>';\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.raw = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.text = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level);\n      options.state = WriterState.InsideTag;\n      r += node.value;\n      options.state = WriterState.CloseTag;\n      r += this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdAttList = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ATTLIST';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.elementName + ' ' + node.attributeName + ' ' + node.attributeType;\n      if (node.defaultValueType !== '#DEFAULT') {\n        r += ' ' + node.defaultValueType;\n      }\n      if (node.defaultValue) {\n        r += ' \"' + node.defaultValue + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdElement = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ELEMENT';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.name + ' ' + node.value;\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdEntity = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!ENTITY';\n      options.state = WriterState.InsideTag;\n      if (node.pe) {\n        r += ' %';\n      }\n      r += ' ' + node.name;\n      if (node.value) {\n        r += ' \"' + node.value + '\"';\n      } else {\n        if (node.pubID && node.sysID) {\n          r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n        } else if (node.sysID) {\n          r += ' SYSTEM \"' + node.sysID + '\"';\n        }\n        if (node.nData) {\n          r += ' NDATA ' + node.nData;\n        }\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.dtdNotation = function(node, options, level) {\n      var r;\n      this.openNode(node, options, level);\n      options.state = WriterState.OpenTag;\n      r = this.indent(node, options, level) + '<!NOTATION';\n      options.state = WriterState.InsideTag;\n      r += ' ' + node.name;\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.pubID) {\n        r += ' PUBLIC \"' + node.pubID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      options.state = WriterState.CloseTag;\n      r += options.spaceBeforeSlash + '>' + this.endline(node, options, level);\n      options.state = WriterState.None;\n      this.closeNode(node, options, level);\n      return r;\n    };\n\n    XMLWriterBase.prototype.openNode = function(node, options, level) {};\n\n    XMLWriterBase.prototype.closeNode = function(node, options, level) {};\n\n    XMLWriterBase.prototype.openAttribute = function(att, options, level) {};\n\n    XMLWriterBase.prototype.closeAttribute = function(att, options, level) {};\n\n    return XMLWriterBase;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var NodeType, WriterState, XMLDOMImplementation, XMLDocument, XMLDocumentCB, XMLStreamWriter, XMLStringWriter, assign, isFunction, ref;\n\n  ref = require('./Utility'), assign = ref.assign, isFunction = ref.isFunction;\n\n  XMLDOMImplementation = require('./XMLDOMImplementation');\n\n  XMLDocument = require('./XMLDocument');\n\n  XMLDocumentCB = require('./XMLDocumentCB');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  XMLStreamWriter = require('./XMLStreamWriter');\n\n  NodeType = require('./NodeType');\n\n  WriterState = require('./WriterState');\n\n  module.exports.create = function(name, xmldec, doctype, options) {\n    var doc, root;\n    if (name == null) {\n      throw new Error(\"Root element needs a name.\");\n    }\n    options = assign({}, xmldec, doctype, options);\n    doc = new XMLDocument(options);\n    root = doc.element(name);\n    if (!options.headless) {\n      doc.declaration(options);\n      if ((options.pubID != null) || (options.sysID != null)) {\n        doc.dtd(options);\n      }\n    }\n    return root;\n  };\n\n  module.exports.begin = function(options, onData, onEnd) {\n    var ref1;\n    if (isFunction(options)) {\n      ref1 = [options, onData], onData = ref1[0], onEnd = ref1[1];\n      options = {};\n    }\n    if (onData) {\n      return new XMLDocumentCB(options, onData, onEnd);\n    } else {\n      return new XMLDocument(options);\n    }\n  };\n\n  module.exports.stringWriter = function(options) {\n    return new XMLStringWriter(options);\n  };\n\n  module.exports.streamWriter = function(stream, options) {\n    return new XMLStreamWriter(stream, options);\n  };\n\n  module.exports.implementation = new XMLDOMImplementation();\n\n  module.exports.nodeType = NodeType;\n\n  module.exports.writerState = WriterState;\n\n}).call(this);\n","module.exports = require(\"assert\");","module.exports = require(\"buffer\");","module.exports = require(\"child_process\");","module.exports = require(\"crypto\");","module.exports = require(\"dgram\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"readline\");","module.exports = require(\"stream\");","module.exports = require(\"string_decoder\");","module.exports = require(\"timers\");","module.exports = require(\"tty\");","module.exports = require(\"url\");","module.exports = require(\"util\");","// GENERATED FILE. DO NOT EDIT.\nvar Long = (function(exports) {\n  \"use strict\";\n  \n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  \n  /**\n   * @license\n   * Copyright 2009 The Closure Library Authors\n   * Copyright 2020 Daniel Wirtz / The long.js Authors.\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *     http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   *\n   * SPDX-License-Identifier: Apache-2.0\n   */\n  // WebAssembly optimizations to do native i64 multiplication and divide\n  var wasm = null;\n  \n  try {\n    if (require(\"os\").cpus().find(cpu => cpus.model.toLowerCase().includes(\"armv6\"))) {\n      throw new Error(\"Workaround for V8 crashing on ARMv6 platform when using WASM\");\n    }\n  \n    wasm = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports;\n  } catch (e) {// no wasm support :(\n  }\n  /**\n   * Constructs a 64 bit two's-complement integer, given its low and high 32 bit values as *signed* integers.\n   *  See the from* functions below for more convenient ways of constructing Longs.\n   * @exports Long\n   * @class A Long class for representing a 64 bit two's-complement integer value.\n   * @param {number} low The low (signed) 32 bits of the long\n   * @param {number} high The high (signed) 32 bits of the long\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @constructor\n   */\n  \n  \n  function Long(low, high, unsigned) {\n    /**\n     * The low 32 bits as a signed value.\n     * @type {number}\n     */\n    this.low = low | 0;\n    /**\n     * The high 32 bits as a signed value.\n     * @type {number}\n     */\n  \n    this.high = high | 0;\n    /**\n     * Whether unsigned or not.\n     * @type {boolean}\n     */\n  \n    this.unsigned = !!unsigned;\n  } // The internal representation of a long is the two given signed, 32-bit values.\n  // We use 32-bit pieces because these are the size of integers on which\n  // Javascript performs bit-operations.  For operations like addition and\n  // multiplication, we split each number into 16 bit pieces, which can easily be\n  // multiplied within Javascript's floating-point representation without overflow\n  // or change in sign.\n  //\n  // In the algorithms below, we frequently reduce the negative case to the\n  // positive case by negating the input(s) and then post-processing the result.\n  // Note that we must ALWAYS check specially whether those values are MIN_VALUE\n  // (-2^63) because -MIN_VALUE == MIN_VALUE (since 2^63 cannot be represented as\n  // a positive number, it overflows back into a negative).  Not handling this\n  // case would often result in infinite recursion.\n  //\n  // Common constant values ZERO, ONE, NEG_ONE, etc. are defined below the from*\n  // methods on which they depend.\n  \n  /**\n   * An indicator used to reliably determine if an object is a Long or not.\n   * @type {boolean}\n   * @const\n   * @private\n   */\n  \n  \n  Long.prototype.__isLong__;\n  Object.defineProperty(Long.prototype, \"__isLong__\", {\n    value: true\n  });\n  /**\n   * @function\n   * @param {*} obj Object\n   * @returns {boolean}\n   * @inner\n   */\n  \n  function isLong(obj) {\n    return (obj && obj[\"__isLong__\"]) === true;\n  }\n  /**\n   * @function\n   * @param {*} value number\n   * @returns {number}\n   * @inner\n   */\n  \n  \n  function ctz32(value) {\n    var c = Math.clz32(value & -value);\n    return value ? 31 - c : c;\n  }\n  /**\n   * Tests if the specified object is a Long.\n   * @function\n   * @param {*} obj Object\n   * @returns {boolean}\n   */\n  \n  \n  Long.isLong = isLong;\n  /**\n   * A cache of the Long representations of small integer values.\n   * @type {!Object}\n   * @inner\n   */\n  \n  var INT_CACHE = {};\n  /**\n   * A cache of the Long representations of small unsigned integer values.\n   * @type {!Object}\n   * @inner\n   */\n  \n  var UINT_CACHE = {};\n  /**\n   * @param {number} value\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromInt(value, unsigned) {\n    var obj, cachedObj, cache;\n  \n    if (unsigned) {\n      value >>>= 0;\n  \n      if (cache = 0 <= value && value < 256) {\n        cachedObj = UINT_CACHE[value];\n        if (cachedObj) return cachedObj;\n      }\n  \n      obj = fromBits(value, 0, true);\n      if (cache) UINT_CACHE[value] = obj;\n      return obj;\n    } else {\n      value |= 0;\n  \n      if (cache = -128 <= value && value < 128) {\n        cachedObj = INT_CACHE[value];\n        if (cachedObj) return cachedObj;\n      }\n  \n      obj = fromBits(value, value < 0 ? -1 : 0, false);\n      if (cache) INT_CACHE[value] = obj;\n      return obj;\n    }\n  }\n  /**\n   * Returns a Long representing the given 32 bit integer value.\n   * @function\n   * @param {number} value The 32 bit integer in question\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromInt = fromInt;\n  /**\n   * @param {number} value\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromNumber(value, unsigned) {\n    if (isNaN(value)) return unsigned ? UZERO : ZERO;\n  \n    if (unsigned) {\n      if (value < 0) return UZERO;\n      if (value >= TWO_PWR_64_DBL) return MAX_UNSIGNED_VALUE;\n    } else {\n      if (value <= -TWO_PWR_63_DBL) return MIN_VALUE;\n      if (value + 1 >= TWO_PWR_63_DBL) return MAX_VALUE;\n    }\n  \n    if (value < 0) return fromNumber(-value, unsigned).neg();\n    return fromBits(value % TWO_PWR_32_DBL | 0, value / TWO_PWR_32_DBL | 0, unsigned);\n  }\n  /**\n   * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.\n   * @function\n   * @param {number} value The number in question\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromNumber = fromNumber;\n  /**\n   * @param {number} lowBits\n   * @param {number} highBits\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromBits(lowBits, highBits, unsigned) {\n    return new Long(lowBits, highBits, unsigned);\n  }\n  /**\n   * Returns a Long representing the 64 bit integer that comes by concatenating the given low and high bits. Each is\n   *  assumed to use 32 bits.\n   * @function\n   * @param {number} lowBits The low 32 bits\n   * @param {number} highBits The high 32 bits\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBits = fromBits;\n  /**\n   * @function\n   * @param {number} base\n   * @param {number} exponent\n   * @returns {number}\n   * @inner\n   */\n  \n  var pow_dbl = Math.pow; // Used 4 times (4*8 to 15+4)\n  \n  /**\n   * @param {string} str\n   * @param {(boolean|number)=} unsigned\n   * @param {number=} radix\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromString(str, unsigned, radix) {\n    if (str.length === 0) throw Error('empty string');\n  \n    if (typeof unsigned === 'number') {\n      // For goog.math.long compatibility\n      radix = unsigned;\n      unsigned = false;\n    } else {\n      unsigned = !!unsigned;\n    }\n  \n    if (str === \"NaN\" || str === \"Infinity\" || str === \"+Infinity\" || str === \"-Infinity\") return unsigned ? UZERO : ZERO;\n    radix = radix || 10;\n    if (radix < 2 || 36 < radix) throw RangeError('radix');\n    var p;\n    if ((p = str.indexOf('-')) > 0) throw Error('interior hyphen');else if (p === 0) {\n      return fromString(str.substring(1), unsigned, radix).neg();\n    } // Do several (8) digits each time through the loop, so as to\n    // minimize the calls to the very expensive emulated div.\n  \n    var radixToPower = fromNumber(pow_dbl(radix, 8));\n    var result = ZERO;\n  \n    for (var i = 0; i < str.length; i += 8) {\n      var size = Math.min(8, str.length - i),\n          value = parseInt(str.substring(i, i + size), radix);\n  \n      if (size < 8) {\n        var power = fromNumber(pow_dbl(radix, size));\n        result = result.mul(power).add(fromNumber(value));\n      } else {\n        result = result.mul(radixToPower);\n        result = result.add(fromNumber(value));\n      }\n    }\n  \n    result.unsigned = unsigned;\n    return result;\n  }\n  /**\n   * Returns a Long representation of the given string, written using the specified radix.\n   * @function\n   * @param {string} str The textual representation of the Long\n   * @param {(boolean|number)=} unsigned Whether unsigned or not, defaults to signed\n   * @param {number=} radix The radix in which the text is written (2-36), defaults to 10\n   * @returns {!Long} The corresponding Long value\n   */\n  \n  \n  Long.fromString = fromString;\n  /**\n   * @function\n   * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val\n   * @param {boolean=} unsigned\n   * @returns {!Long}\n   * @inner\n   */\n  \n  function fromValue(val, unsigned) {\n    if (typeof val === 'number') return fromNumber(val, unsigned);\n    if (typeof val === 'string') return fromString(val, unsigned); // Throws for non-objects, converts non-instanceof Long:\n  \n    return fromBits(val.low, val.high, typeof unsigned === 'boolean' ? unsigned : val.unsigned);\n  }\n  /**\n   * Converts the specified value to a Long using the appropriate from* function for its type.\n   * @function\n   * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val Value\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {!Long}\n   */\n  \n  \n  Long.fromValue = fromValue; // NOTE: the compiler should inline these constant values below and then remove these variables, so there should be\n  // no runtime penalty for these.\n  \n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_16_DBL = 1 << 16;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_24_DBL = 1 << 24;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;\n  /**\n   * @type {number}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_63_DBL = TWO_PWR_64_DBL / 2;\n  /**\n   * @type {!Long}\n   * @const\n   * @inner\n   */\n  \n  var TWO_PWR_24 = fromInt(TWO_PWR_24_DBL);\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var ZERO = fromInt(0);\n  /**\n   * Signed zero.\n   * @type {!Long}\n   */\n  \n  Long.ZERO = ZERO;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var UZERO = fromInt(0, true);\n  /**\n   * Unsigned zero.\n   * @type {!Long}\n   */\n  \n  Long.UZERO = UZERO;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var ONE = fromInt(1);\n  /**\n   * Signed one.\n   * @type {!Long}\n   */\n  \n  Long.ONE = ONE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var UONE = fromInt(1, true);\n  /**\n   * Unsigned one.\n   * @type {!Long}\n   */\n  \n  Long.UONE = UONE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var NEG_ONE = fromInt(-1);\n  /**\n   * Signed negative one.\n   * @type {!Long}\n   */\n  \n  Long.NEG_ONE = NEG_ONE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var MAX_VALUE = fromBits(0xFFFFFFFF | 0, 0x7FFFFFFF | 0, false);\n  /**\n   * Maximum signed value.\n   * @type {!Long}\n   */\n  \n  Long.MAX_VALUE = MAX_VALUE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var MAX_UNSIGNED_VALUE = fromBits(0xFFFFFFFF | 0, 0xFFFFFFFF | 0, true);\n  /**\n   * Maximum unsigned value.\n   * @type {!Long}\n   */\n  \n  Long.MAX_UNSIGNED_VALUE = MAX_UNSIGNED_VALUE;\n  /**\n   * @type {!Long}\n   * @inner\n   */\n  \n  var MIN_VALUE = fromBits(0, 0x80000000 | 0, false);\n  /**\n   * Minimum signed value.\n   * @type {!Long}\n   */\n  \n  Long.MIN_VALUE = MIN_VALUE;\n  /**\n   * @alias Long.prototype\n   * @inner\n   */\n  \n  var LongPrototype = Long.prototype;\n  /**\n   * Converts the Long to a 32 bit integer, assuming it is a 32 bit integer.\n   * @this {!Long}\n   * @returns {number}\n   */\n  \n  LongPrototype.toInt = function toInt() {\n    return this.unsigned ? this.low >>> 0 : this.low;\n  };\n  /**\n   * Converts the Long to a the nearest floating-point representation of this value (double, 53 bit mantissa).\n   * @this {!Long}\n   * @returns {number}\n   */\n  \n  \n  LongPrototype.toNumber = function toNumber() {\n    if (this.unsigned) return (this.high >>> 0) * TWO_PWR_32_DBL + (this.low >>> 0);\n    return this.high * TWO_PWR_32_DBL + (this.low >>> 0);\n  };\n  /**\n   * Converts the Long to a string written in the specified radix.\n   * @this {!Long}\n   * @param {number=} radix Radix (2-36), defaults to 10\n   * @returns {string}\n   * @override\n   * @throws {RangeError} If `radix` is out of range\n   */\n  \n  \n  LongPrototype.toString = function toString(radix) {\n    radix = radix || 10;\n    if (radix < 2 || 36 < radix) throw RangeError('radix');\n    if (this.isZero()) return '0';\n  \n    if (this.isNegative()) {\n      // Unsigned Longs are never negative\n      if (this.eq(MIN_VALUE)) {\n        // We need to change the Long value before it can be negated, so we remove\n        // the bottom-most digit in this base and then recurse to do the rest.\n        var radixLong = fromNumber(radix),\n            div = this.div(radixLong),\n            rem1 = div.mul(radixLong).sub(this);\n        return div.toString(radix) + rem1.toInt().toString(radix);\n      } else return '-' + this.neg().toString(radix);\n    } // Do several (6) digits each time through the loop, so as to\n    // minimize the calls to the very expensive emulated div.\n  \n  \n    var radixToPower = fromNumber(pow_dbl(radix, 6), this.unsigned),\n        rem = this;\n    var result = '';\n  \n    while (true) {\n      var remDiv = rem.div(radixToPower),\n          intval = rem.sub(remDiv.mul(radixToPower)).toInt() >>> 0,\n          digits = intval.toString(radix);\n      rem = remDiv;\n      if (rem.isZero()) return digits + result;else {\n        while (digits.length < 6) digits = '0' + digits;\n  \n        result = '' + digits + result;\n      }\n    }\n  };\n  /**\n   * Gets the high 32 bits as a signed integer.\n   * @this {!Long}\n   * @returns {number} Signed high bits\n   */\n  \n  \n  LongPrototype.getHighBits = function getHighBits() {\n    return this.high;\n  };\n  /**\n   * Gets the high 32 bits as an unsigned integer.\n   * @this {!Long}\n   * @returns {number} Unsigned high bits\n   */\n  \n  \n  LongPrototype.getHighBitsUnsigned = function getHighBitsUnsigned() {\n    return this.high >>> 0;\n  };\n  /**\n   * Gets the low 32 bits as a signed integer.\n   * @this {!Long}\n   * @returns {number} Signed low bits\n   */\n  \n  \n  LongPrototype.getLowBits = function getLowBits() {\n    return this.low;\n  };\n  /**\n   * Gets the low 32 bits as an unsigned integer.\n   * @this {!Long}\n   * @returns {number} Unsigned low bits\n   */\n  \n  \n  LongPrototype.getLowBitsUnsigned = function getLowBitsUnsigned() {\n    return this.low >>> 0;\n  };\n  /**\n   * Gets the number of bits needed to represent the absolute value of this Long.\n   * @this {!Long}\n   * @returns {number}\n   */\n  \n  \n  LongPrototype.getNumBitsAbs = function getNumBitsAbs() {\n    if (this.isNegative()) // Unsigned Longs are never negative\n      return this.eq(MIN_VALUE) ? 64 : this.neg().getNumBitsAbs();\n    var val = this.high != 0 ? this.high : this.low;\n  \n    for (var bit = 31; bit > 0; bit--) if ((val & 1 << bit) != 0) break;\n  \n    return this.high != 0 ? bit + 33 : bit + 1;\n  };\n  /**\n   * Tests if this Long's value equals zero.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isZero = function isZero() {\n    return this.high === 0 && this.low === 0;\n  };\n  /**\n   * Tests if this Long's value equals zero. This is an alias of {@link Long#isZero}.\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.eqz = LongPrototype.isZero;\n  /**\n   * Tests if this Long's value is negative.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  LongPrototype.isNegative = function isNegative() {\n    return !this.unsigned && this.high < 0;\n  };\n  /**\n   * Tests if this Long's value is positive or zero.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isPositive = function isPositive() {\n    return this.unsigned || this.high >= 0;\n  };\n  /**\n   * Tests if this Long's value is odd.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isOdd = function isOdd() {\n    return (this.low & 1) === 1;\n  };\n  /**\n   * Tests if this Long's value is even.\n   * @this {!Long}\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.isEven = function isEven() {\n    return (this.low & 1) === 0;\n  };\n  /**\n   * Tests if this Long's value equals the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.equals = function equals(other) {\n    if (!isLong(other)) other = fromValue(other);\n    if (this.unsigned !== other.unsigned && this.high >>> 31 === 1 && other.high >>> 31 === 1) return false;\n    return this.high === other.high && this.low === other.low;\n  };\n  /**\n   * Tests if this Long's value equals the specified's. This is an alias of {@link Long#equals}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.eq = LongPrototype.equals;\n  /**\n   * Tests if this Long's value differs from the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.notEquals = function notEquals(other) {\n    return !this.eq(\n    /* validates */\n    other);\n  };\n  /**\n   * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.neq = LongPrototype.notEquals;\n  /**\n   * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.ne = LongPrototype.notEquals;\n  /**\n   * Tests if this Long's value is less than the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.lessThan = function lessThan(other) {\n    return this.comp(\n    /* validates */\n    other) < 0;\n  };\n  /**\n   * Tests if this Long's value is less than the specified's. This is an alias of {@link Long#lessThan}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.lt = LongPrototype.lessThan;\n  /**\n   * Tests if this Long's value is less than or equal the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.lessThanOrEqual = function lessThanOrEqual(other) {\n    return this.comp(\n    /* validates */\n    other) <= 0;\n  };\n  /**\n   * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.lte = LongPrototype.lessThanOrEqual;\n  /**\n   * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.le = LongPrototype.lessThanOrEqual;\n  /**\n   * Tests if this Long's value is greater than the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.greaterThan = function greaterThan(other) {\n    return this.comp(\n    /* validates */\n    other) > 0;\n  };\n  /**\n   * Tests if this Long's value is greater than the specified's. This is an alias of {@link Long#greaterThan}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.gt = LongPrototype.greaterThan;\n  /**\n   * Tests if this Long's value is greater than or equal the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.greaterThanOrEqual = function greaterThanOrEqual(other) {\n    return this.comp(\n    /* validates */\n    other) >= 0;\n  };\n  /**\n   * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  \n  LongPrototype.gte = LongPrototype.greaterThanOrEqual;\n  /**\n   * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {boolean}\n   */\n  \n  LongPrototype.ge = LongPrototype.greaterThanOrEqual;\n  /**\n   * Compares this Long's value with the specified's.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other value\n   * @returns {number} 0 if they are the same, 1 if the this is greater and -1\n   *  if the given one is greater\n   */\n  \n  LongPrototype.compare = function compare(other) {\n    if (!isLong(other)) other = fromValue(other);\n    if (this.eq(other)) return 0;\n    var thisNeg = this.isNegative(),\n        otherNeg = other.isNegative();\n    if (thisNeg && !otherNeg) return -1;\n    if (!thisNeg && otherNeg) return 1; // At this point the sign bits are the same\n  \n    if (!this.unsigned) return this.sub(other).isNegative() ? -1 : 1; // Both are positive if at least one is unsigned\n  \n    return other.high >>> 0 > this.high >>> 0 || other.high === this.high && other.low >>> 0 > this.low >>> 0 ? -1 : 1;\n  };\n  /**\n   * Compares this Long's value with the specified's. This is an alias of {@link Long#compare}.\n   * @function\n   * @param {!Long|number|string} other Other value\n   * @returns {number} 0 if they are the same, 1 if the this is greater and -1\n   *  if the given one is greater\n   */\n  \n  \n  LongPrototype.comp = LongPrototype.compare;\n  /**\n   * Negates this Long's value.\n   * @this {!Long}\n   * @returns {!Long} Negated Long\n   */\n  \n  LongPrototype.negate = function negate() {\n    if (!this.unsigned && this.eq(MIN_VALUE)) return MIN_VALUE;\n    return this.not().add(ONE);\n  };\n  /**\n   * Negates this Long's value. This is an alias of {@link Long#negate}.\n   * @function\n   * @returns {!Long} Negated Long\n   */\n  \n  \n  LongPrototype.neg = LongPrototype.negate;\n  /**\n   * Returns the sum of this and the specified Long.\n   * @this {!Long}\n   * @param {!Long|number|string} addend Addend\n   * @returns {!Long} Sum\n   */\n  \n  LongPrototype.add = function add(addend) {\n    if (!isLong(addend)) addend = fromValue(addend); // Divide each number into 4 chunks of 16 bits, and then sum the chunks.\n  \n    var a48 = this.high >>> 16;\n    var a32 = this.high & 0xFFFF;\n    var a16 = this.low >>> 16;\n    var a00 = this.low & 0xFFFF;\n    var b48 = addend.high >>> 16;\n    var b32 = addend.high & 0xFFFF;\n    var b16 = addend.low >>> 16;\n    var b00 = addend.low & 0xFFFF;\n    var c48 = 0,\n        c32 = 0,\n        c16 = 0,\n        c00 = 0;\n    c00 += a00 + b00;\n    c16 += c00 >>> 16;\n    c00 &= 0xFFFF;\n    c16 += a16 + b16;\n    c32 += c16 >>> 16;\n    c16 &= 0xFFFF;\n    c32 += a32 + b32;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c48 += a48 + b48;\n    c48 &= 0xFFFF;\n    return fromBits(c16 << 16 | c00, c48 << 16 | c32, this.unsigned);\n  };\n  /**\n   * Returns the difference of this and the specified Long.\n   * @this {!Long}\n   * @param {!Long|number|string} subtrahend Subtrahend\n   * @returns {!Long} Difference\n   */\n  \n  \n  LongPrototype.subtract = function subtract(subtrahend) {\n    if (!isLong(subtrahend)) subtrahend = fromValue(subtrahend);\n    return this.add(subtrahend.neg());\n  };\n  /**\n   * Returns the difference of this and the specified Long. This is an alias of {@link Long#subtract}.\n   * @function\n   * @param {!Long|number|string} subtrahend Subtrahend\n   * @returns {!Long} Difference\n   */\n  \n  \n  LongPrototype.sub = LongPrototype.subtract;\n  /**\n   * Returns the product of this and the specified Long.\n   * @this {!Long}\n   * @param {!Long|number|string} multiplier Multiplier\n   * @returns {!Long} Product\n   */\n  \n  LongPrototype.multiply = function multiply(multiplier) {\n    if (this.isZero()) return this;\n    if (!isLong(multiplier)) multiplier = fromValue(multiplier); // use wasm support if present\n  \n    if (wasm) {\n      var low = wasm[\"mul\"](this.low, this.high, multiplier.low, multiplier.high);\n      return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n    }\n  \n    if (multiplier.isZero()) return this.unsigned ? UZERO : ZERO;\n    if (this.eq(MIN_VALUE)) return multiplier.isOdd() ? MIN_VALUE : ZERO;\n    if (multiplier.eq(MIN_VALUE)) return this.isOdd() ? MIN_VALUE : ZERO;\n  \n    if (this.isNegative()) {\n      if (multiplier.isNegative()) return this.neg().mul(multiplier.neg());else return this.neg().mul(multiplier).neg();\n    } else if (multiplier.isNegative()) return this.mul(multiplier.neg()).neg(); // If both longs are small, use float multiplication\n  \n  \n    if (this.lt(TWO_PWR_24) && multiplier.lt(TWO_PWR_24)) return fromNumber(this.toNumber() * multiplier.toNumber(), this.unsigned); // Divide each long into 4 chunks of 16 bits, and then add up 4x4 products.\n    // We can skip products that would overflow.\n  \n    var a48 = this.high >>> 16;\n    var a32 = this.high & 0xFFFF;\n    var a16 = this.low >>> 16;\n    var a00 = this.low & 0xFFFF;\n    var b48 = multiplier.high >>> 16;\n    var b32 = multiplier.high & 0xFFFF;\n    var b16 = multiplier.low >>> 16;\n    var b00 = multiplier.low & 0xFFFF;\n    var c48 = 0,\n        c32 = 0,\n        c16 = 0,\n        c00 = 0;\n    c00 += a00 * b00;\n    c16 += c00 >>> 16;\n    c00 &= 0xFFFF;\n    c16 += a16 * b00;\n    c32 += c16 >>> 16;\n    c16 &= 0xFFFF;\n    c16 += a00 * b16;\n    c32 += c16 >>> 16;\n    c16 &= 0xFFFF;\n    c32 += a32 * b00;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c32 += a16 * b16;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c32 += a00 * b32;\n    c48 += c32 >>> 16;\n    c32 &= 0xFFFF;\n    c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;\n    c48 &= 0xFFFF;\n    return fromBits(c16 << 16 | c00, c48 << 16 | c32, this.unsigned);\n  };\n  /**\n   * Returns the product of this and the specified Long. This is an alias of {@link Long#multiply}.\n   * @function\n   * @param {!Long|number|string} multiplier Multiplier\n   * @returns {!Long} Product\n   */\n  \n  \n  LongPrototype.mul = LongPrototype.multiply;\n  /**\n   * Returns this Long divided by the specified. The result is signed if this Long is signed or\n   *  unsigned if this Long is unsigned.\n   * @this {!Long}\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Quotient\n   */\n  \n  LongPrototype.divide = function divide(divisor) {\n    if (!isLong(divisor)) divisor = fromValue(divisor);\n    if (divisor.isZero()) throw Error('division by zero'); // use wasm support if present\n  \n    if (wasm) {\n      // guard against signed division overflow: the largest\n      // negative number / -1 would be 1 larger than the largest\n      // positive number, due to two's complement.\n      if (!this.unsigned && this.high === -0x80000000 && divisor.low === -1 && divisor.high === -1) {\n        // be consistent with non-wasm code path\n        return this;\n      }\n  \n      var low = (this.unsigned ? wasm[\"div_u\"] : wasm[\"div_s\"])(this.low, this.high, divisor.low, divisor.high);\n      return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n    }\n  \n    if (this.isZero()) return this.unsigned ? UZERO : ZERO;\n    var approx, rem, res;\n  \n    if (!this.unsigned) {\n      // This section is only relevant for signed longs and is derived from the\n      // closure library as a whole.\n      if (this.eq(MIN_VALUE)) {\n        if (divisor.eq(ONE) || divisor.eq(NEG_ONE)) return MIN_VALUE; // recall that -MIN_VALUE == MIN_VALUE\n        else if (divisor.eq(MIN_VALUE)) return ONE;else {\n          // At this point, we have |other| >= 2, so |this/other| < |MIN_VALUE|.\n          var halfThis = this.shr(1);\n          approx = halfThis.div(divisor).shl(1);\n  \n          if (approx.eq(ZERO)) {\n            return divisor.isNegative() ? ONE : NEG_ONE;\n          } else {\n            rem = this.sub(divisor.mul(approx));\n            res = approx.add(rem.div(divisor));\n            return res;\n          }\n        }\n      } else if (divisor.eq(MIN_VALUE)) return this.unsigned ? UZERO : ZERO;\n  \n      if (this.isNegative()) {\n        if (divisor.isNegative()) return this.neg().div(divisor.neg());\n        return this.neg().div(divisor).neg();\n      } else if (divisor.isNegative()) return this.div(divisor.neg()).neg();\n  \n      res = ZERO;\n    } else {\n      // The algorithm below has not been made for unsigned longs. It's therefore\n      // required to take special care of the MSB prior to running it.\n      if (!divisor.unsigned) divisor = divisor.toUnsigned();\n      if (divisor.gt(this)) return UZERO;\n      if (divisor.gt(this.shru(1))) // 15 >>> 1 = 7 ; with divisor = 8 ; true\n        return UONE;\n      res = UZERO;\n    } // Repeat the following until the remainder is less than other:  find a\n    // floating-point that approximates remainder / other *from below*, add this\n    // into the result, and subtract it from the remainder.  It is critical that\n    // the approximate value is less than or equal to the real value so that the\n    // remainder never becomes negative.\n  \n  \n    rem = this;\n  \n    while (rem.gte(divisor)) {\n      // Approximate the result of division. This may be a little greater or\n      // smaller than the actual value.\n      approx = Math.max(1, Math.floor(rem.toNumber() / divisor.toNumber())); // We will tweak the approximate result by changing it in the 48-th digit or\n      // the smallest non-fractional digit, whichever is larger.\n  \n      var log2 = Math.ceil(Math.log(approx) / Math.LN2),\n          delta = log2 <= 48 ? 1 : pow_dbl(2, log2 - 48),\n          // Decrease the approximation until it is smaller than the remainder.  Note\n      // that if it is too large, the product overflows and is negative.\n      approxRes = fromNumber(approx),\n          approxRem = approxRes.mul(divisor);\n  \n      while (approxRem.isNegative() || approxRem.gt(rem)) {\n        approx -= delta;\n        approxRes = fromNumber(approx, this.unsigned);\n        approxRem = approxRes.mul(divisor);\n      } // We know the answer can't be zero... and actually, zero would cause\n      // infinite recursion since we would make no progress.\n  \n  \n      if (approxRes.isZero()) approxRes = ONE;\n      res = res.add(approxRes);\n      rem = rem.sub(approxRem);\n    }\n  \n    return res;\n  };\n  /**\n   * Returns this Long divided by the specified. This is an alias of {@link Long#divide}.\n   * @function\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Quotient\n   */\n  \n  \n  LongPrototype.div = LongPrototype.divide;\n  /**\n   * Returns this Long modulo the specified.\n   * @this {!Long}\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Remainder\n   */\n  \n  LongPrototype.modulo = function modulo(divisor) {\n    if (!isLong(divisor)) divisor = fromValue(divisor); // use wasm support if present\n  \n    if (wasm) {\n      var low = (this.unsigned ? wasm[\"rem_u\"] : wasm[\"rem_s\"])(this.low, this.high, divisor.low, divisor.high);\n      return fromBits(low, wasm[\"get_high\"](), this.unsigned);\n    }\n  \n    return this.sub(this.div(divisor).mul(divisor));\n  };\n  /**\n   * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\n   * @function\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Remainder\n   */\n  \n  \n  LongPrototype.mod = LongPrototype.modulo;\n  /**\n   * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\n   * @function\n   * @param {!Long|number|string} divisor Divisor\n   * @returns {!Long} Remainder\n   */\n  \n  LongPrototype.rem = LongPrototype.modulo;\n  /**\n   * Returns the bitwise NOT of this Long.\n   * @this {!Long}\n   * @returns {!Long}\n   */\n  \n  LongPrototype.not = function not() {\n    return fromBits(~this.low, ~this.high, this.unsigned);\n  };\n  /**\n   * Returns count leading zeros of this Long.\n   * @this {!Long}\n   * @returns {!number}\n   */\n  \n  \n  LongPrototype.countLeadingZeros = function countLeadingZeros() {\n    return this.high ? Math.clz32(this.high) : Math.clz32(this.low) + 32;\n  };\n  /**\n   * Returns count leading zeros. This is an alias of {@link Long#countLeadingZeros}.\n   * @function\n   * @param {!Long}\n   * @returns {!number}\n   */\n  \n  \n  LongPrototype.clz = LongPrototype.countLeadingZeros;\n  /**\n   * Returns count trailing zeros of this Long.\n   * @this {!Long}\n   * @returns {!number}\n   */\n  \n  LongPrototype.countTrailingZeros = function countTrailingZeros() {\n    return this.low ? ctz32(this.low) : ctz32(this.high) + 32;\n  };\n  /**\n   * Returns count trailing zeros. This is an alias of {@link Long#countTrailingZeros}.\n   * @function\n   * @param {!Long}\n   * @returns {!number}\n   */\n  \n  \n  LongPrototype.ctz = LongPrototype.countTrailingZeros;\n  /**\n   * Returns the bitwise AND of this Long and the specified.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other Long\n   * @returns {!Long}\n   */\n  \n  LongPrototype.and = function and(other) {\n    if (!isLong(other)) other = fromValue(other);\n    return fromBits(this.low & other.low, this.high & other.high, this.unsigned);\n  };\n  /**\n   * Returns the bitwise OR of this Long and the specified.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other Long\n   * @returns {!Long}\n   */\n  \n  \n  LongPrototype.or = function or(other) {\n    if (!isLong(other)) other = fromValue(other);\n    return fromBits(this.low | other.low, this.high | other.high, this.unsigned);\n  };\n  /**\n   * Returns the bitwise XOR of this Long and the given one.\n   * @this {!Long}\n   * @param {!Long|number|string} other Other Long\n   * @returns {!Long}\n   */\n  \n  \n  LongPrototype.xor = function xor(other) {\n    if (!isLong(other)) other = fromValue(other);\n    return fromBits(this.low ^ other.low, this.high ^ other.high, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits shifted to the left by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shiftLeft = function shiftLeft(numBits) {\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;else if (numBits < 32) return fromBits(this.low << numBits, this.high << numBits | this.low >>> 32 - numBits, this.unsigned);else return fromBits(0, this.low << numBits - 32, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits shifted to the left by the given amount. This is an alias of {@link Long#shiftLeft}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shl = LongPrototype.shiftLeft;\n  /**\n   * Returns this Long with bits arithmetically shifted to the right by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  LongPrototype.shiftRight = function shiftRight(numBits) {\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;else if (numBits < 32) return fromBits(this.low >>> numBits | this.high << 32 - numBits, this.high >> numBits, this.unsigned);else return fromBits(this.high >> numBits - 32, this.high >= 0 ? 0 : -1, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits arithmetically shifted to the right by the given amount. This is an alias of {@link Long#shiftRight}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shr = LongPrototype.shiftRight;\n  /**\n   * Returns this Long with bits logically shifted to the right by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  LongPrototype.shiftRightUnsigned = function shiftRightUnsigned(numBits) {\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    if (numBits < 32) return fromBits(this.low >>> numBits | this.high << 32 - numBits, this.high >>> numBits, this.unsigned);\n    if (numBits === 32) return fromBits(this.high, 0, this.unsigned);\n    return fromBits(this.high >>> numBits - 32, 0, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  \n  LongPrototype.shru = LongPrototype.shiftRightUnsigned;\n  /**\n   * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Shifted Long\n   */\n  \n  LongPrototype.shr_u = LongPrototype.shiftRightUnsigned;\n  /**\n   * Returns this Long with bits rotated to the left by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  LongPrototype.rotateLeft = function rotateLeft(numBits) {\n    var b;\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    if (numBits === 32) return fromBits(this.high, this.low, this.unsigned);\n  \n    if (numBits < 32) {\n      b = 32 - numBits;\n      return fromBits(this.low << numBits | this.high >>> b, this.high << numBits | this.low >>> b, this.unsigned);\n    }\n  \n    numBits -= 32;\n    b = 32 - numBits;\n    return fromBits(this.high << numBits | this.low >>> b, this.low << numBits | this.high >>> b, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits rotated to the left by the given amount. This is an alias of {@link Long#rotateLeft}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  \n  LongPrototype.rotl = LongPrototype.rotateLeft;\n  /**\n   * Returns this Long with bits rotated to the right by the given amount.\n   * @this {!Long}\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  LongPrototype.rotateRight = function rotateRight(numBits) {\n    var b;\n    if (isLong(numBits)) numBits = numBits.toInt();\n    if ((numBits &= 63) === 0) return this;\n    if (numBits === 32) return fromBits(this.high, this.low, this.unsigned);\n  \n    if (numBits < 32) {\n      b = 32 - numBits;\n      return fromBits(this.high << b | this.low >>> numBits, this.low << b | this.high >>> numBits, this.unsigned);\n    }\n  \n    numBits -= 32;\n    b = 32 - numBits;\n    return fromBits(this.low << b | this.high >>> numBits, this.high << b | this.low >>> numBits, this.unsigned);\n  };\n  /**\n   * Returns this Long with bits rotated to the right by the given amount. This is an alias of {@link Long#rotateRight}.\n   * @function\n   * @param {number|!Long} numBits Number of bits\n   * @returns {!Long} Rotated Long\n   */\n  \n  \n  LongPrototype.rotr = LongPrototype.rotateRight;\n  /**\n   * Converts this Long to signed.\n   * @this {!Long}\n   * @returns {!Long} Signed long\n   */\n  \n  LongPrototype.toSigned = function toSigned() {\n    if (!this.unsigned) return this;\n    return fromBits(this.low, this.high, false);\n  };\n  /**\n   * Converts this Long to unsigned.\n   * @this {!Long}\n   * @returns {!Long} Unsigned long\n   */\n  \n  \n  LongPrototype.toUnsigned = function toUnsigned() {\n    if (this.unsigned) return this;\n    return fromBits(this.low, this.high, true);\n  };\n  /**\n   * Converts this Long to its byte representation.\n   * @param {boolean=} le Whether little or big endian, defaults to big endian\n   * @this {!Long}\n   * @returns {!Array.<number>} Byte representation\n   */\n  \n  \n  LongPrototype.toBytes = function toBytes(le) {\n    return le ? this.toBytesLE() : this.toBytesBE();\n  };\n  /**\n   * Converts this Long to its little endian byte representation.\n   * @this {!Long}\n   * @returns {!Array.<number>} Little endian byte representation\n   */\n  \n  \n  LongPrototype.toBytesLE = function toBytesLE() {\n    var hi = this.high,\n        lo = this.low;\n    return [lo & 0xff, lo >>> 8 & 0xff, lo >>> 16 & 0xff, lo >>> 24, hi & 0xff, hi >>> 8 & 0xff, hi >>> 16 & 0xff, hi >>> 24];\n  };\n  /**\n   * Converts this Long to its big endian byte representation.\n   * @this {!Long}\n   * @returns {!Array.<number>} Big endian byte representation\n   */\n  \n  \n  LongPrototype.toBytesBE = function toBytesBE() {\n    var hi = this.high,\n        lo = this.low;\n    return [hi >>> 24, hi >>> 16 & 0xff, hi >>> 8 & 0xff, hi & 0xff, lo >>> 24, lo >>> 16 & 0xff, lo >>> 8 & 0xff, lo & 0xff];\n  };\n  /**\n   * Creates a Long from its byte representation.\n   * @param {!Array.<number>} bytes Byte representation\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @param {boolean=} le Whether little or big endian, defaults to big endian\n   * @returns {Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBytes = function fromBytes(bytes, unsigned, le) {\n    return le ? Long.fromBytesLE(bytes, unsigned) : Long.fromBytesBE(bytes, unsigned);\n  };\n  /**\n   * Creates a Long from its little endian byte representation.\n   * @param {!Array.<number>} bytes Little endian byte representation\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBytesLE = function fromBytesLE(bytes, unsigned) {\n    return new Long(bytes[0] | bytes[1] << 8 | bytes[2] << 16 | bytes[3] << 24, bytes[4] | bytes[5] << 8 | bytes[6] << 16 | bytes[7] << 24, unsigned);\n  };\n  /**\n   * Creates a Long from its big endian byte representation.\n   * @param {!Array.<number>} bytes Big endian byte representation\n   * @param {boolean=} unsigned Whether unsigned or not, defaults to signed\n   * @returns {Long} The corresponding Long value\n   */\n  \n  \n  Long.fromBytesBE = function fromBytesBE(bytes, unsigned) {\n    return new Long(bytes[4] << 24 | bytes[5] << 16 | bytes[6] << 8 | bytes[7], bytes[0] << 24 | bytes[1] << 16 | bytes[2] << 8 | bytes[3], unsigned);\n  };\n  \n  var _default = Long;\n  exports.default = _default;\n  return \"default\" in exports ? exports.default : exports;\n})({});\nif (typeof define === 'function' && define.amd) define([], function() { return Long; });\nelse if (typeof module === 'object' && typeof exports==='object') module.exports = Long;\n","// GENERATED FILE. DO NOT EDIT.\nvar ipCodec = (function(exports) {\n  \"use strict\";\n  \n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.decode = decode;\n  exports.encode = encode;\n  exports.familyOf = familyOf;\n  exports.name = void 0;\n  exports.sizeOf = sizeOf;\n  exports.v6 = exports.v4 = void 0;\n  const v4Regex = /^(\\d{1,3}\\.){3,3}\\d{1,3}$/;\n  const v4Size = 4;\n  const v6Regex = /^(::)?(((\\d{1,3}\\.){3}(\\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;\n  const v6Size = 16;\n  const v4 = {\n    name: 'v4',\n    size: v4Size,\n    isFormat: ip => v4Regex.test(ip),\n  \n    encode(ip, buff, offset) {\n      offset = ~~offset;\n      buff = buff || new Uint8Array(offset + v4Size);\n      const max = ip.length;\n      let n = 0;\n  \n      for (let i = 0; i < max;) {\n        const c = ip.charCodeAt(i++);\n  \n        if (c === 46) {\n          // \".\"\n          buff[offset++] = n;\n          n = 0;\n        } else {\n          n = n * 10 + (c - 48);\n        }\n      }\n  \n      buff[offset] = n;\n      return buff;\n    },\n  \n    decode(buff, offset) {\n      offset = ~~offset;\n      return `${buff[offset++]}.${buff[offset++]}.${buff[offset++]}.${buff[offset]}`;\n    }\n  \n  };\n  exports.v4 = v4;\n  const v6 = {\n    name: 'v6',\n    size: v6Size,\n    isFormat: ip => ip.length > 0 && v6Regex.test(ip),\n  \n    encode(ip, buff, offset) {\n      offset = ~~offset;\n      let end = offset + v6Size;\n      let fill = -1;\n      let hexN = 0;\n      let decN = 0;\n      let prevColon = true;\n      let useDec = false;\n      buff = buff || new Uint8Array(offset + v6Size); // Note: This algorithm needs to check if the offset\n      // could exceed the buffer boundaries as it supports\n      // non-standard compliant encodings that may go beyond\n      // the boundary limits. if (offset < end) checks should\n      // not be necessary...\n  \n      for (let i = 0; i < ip.length; i++) {\n        let c = ip.charCodeAt(i);\n  \n        if (c === 58) {\n          // :\n          if (prevColon) {\n            if (fill !== -1) {\n              // Not Standard! (standard doesn't allow multiple ::)\n              // We need to treat\n              if (offset < end) buff[offset] = 0;\n              if (offset < end - 1) buff[offset + 1] = 0;\n              offset += 2;\n            } else if (offset < end) {\n              // :: in the middle\n              fill = offset;\n            }\n          } else {\n            // : ends the previous number\n            if (useDec === true) {\n              // Non-standard! (ipv4 should be at end only)\n              // A ipv4 address should not be found anywhere else but at\n              // the end. This codec also support putting characters\n              // after the ipv4 address..\n              if (offset < end) buff[offset] = decN;\n              offset++;\n            } else {\n              if (offset < end) buff[offset] = hexN >> 8;\n              if (offset < end - 1) buff[offset + 1] = hexN & 0xff;\n              offset += 2;\n            }\n  \n            hexN = 0;\n            decN = 0;\n          }\n  \n          prevColon = true;\n          useDec = false;\n        } else if (c === 46) {\n          // . indicates IPV4 notation\n          if (offset < end) buff[offset] = decN;\n          offset++;\n          decN = 0;\n          hexN = 0;\n          prevColon = false;\n          useDec = true;\n        } else {\n          prevColon = false;\n  \n          if (c >= 97) {\n            c -= 87; // a-f ... 97~102 -87 => 10~15\n          } else if (c >= 65) {\n            c -= 55; // A-F ... 65~70 -55 => 10~15\n          } else {\n            c -= 48; // 0-9 ... starting from charCode 48\n  \n            decN = decN * 10 + c;\n          } // We don't know yet if its a dec or hex number\n  \n  \n          hexN = (hexN << 4) + c;\n        }\n      }\n  \n      if (prevColon === false) {\n        // Commiting last number\n        if (useDec === true) {\n          if (offset < end) buff[offset] = decN;\n          offset++;\n        } else {\n          if (offset < end) buff[offset] = hexN >> 8;\n          if (offset < end - 1) buff[offset + 1] = hexN & 0xff;\n          offset += 2;\n        }\n      } else if (fill === 0) {\n        // Not Standard! (standard doesn't allow multiple ::)\n        // This means that a : was found at the start AND end which means the\n        // end needs to be treated as 0 entry...\n        if (offset < end) buff[offset] = 0;\n        if (offset < end - 1) buff[offset + 1] = 0;\n        offset += 2;\n      } else if (fill !== -1) {\n        // Non-standard! (standard doens't allow multiple ::)\n        // Here we find that there has been a :: somewhere in the middle\n        // and the end. To treat the end with priority we need to move all\n        // written data two bytes to the right.\n        offset += 2;\n  \n        for (let i = Math.min(offset - 1, end - 1); i >= fill + 2; i--) {\n          buff[i] = buff[i - 2];\n        }\n  \n        buff[fill] = 0;\n        buff[fill + 1] = 0;\n        fill = offset;\n      }\n  \n      if (fill !== offset && fill !== -1) {\n        // Move the written numbers to the end while filling the everything\n        // \"fill\" to the bytes with zeros.\n        if (offset > end - 2) {\n          // Non Standard support, when the cursor exceeds bounds.\n          offset = end - 2;\n        }\n  \n        while (end > fill) {\n          buff[--end] = offset < end && offset > fill ? buff[--offset] : 0;\n        }\n      } else {\n        // Fill the rest with zeros\n        while (offset < end) {\n          buff[offset++] = 0;\n        }\n      }\n  \n      return buff;\n    },\n  \n    decode(buff, offset) {\n      offset = ~~offset;\n      let result = '';\n  \n      for (let i = 0; i < v6Size; i += 2) {\n        if (i !== 0) {\n          result += ':';\n        }\n  \n        result += (buff[offset + i] << 8 | buff[offset + i + 1]).toString(16);\n      }\n  \n      return result.replace(/(^|:)0(:0)*:0(:|$)/, '$1::$3').replace(/:{3,4}/, '::');\n    }\n  \n  };\n  exports.v6 = v6;\n  const name = 'ip';\n  exports.name = name;\n  \n  function sizeOf(ip) {\n    if (v4.isFormat(ip)) return v4.size;\n    if (v6.isFormat(ip)) return v6.size;\n    throw Error(`Invalid ip address: ${ip}`);\n  }\n  \n  function familyOf(string) {\n    return sizeOf(string) === v4.size ? 1 : 2;\n  }\n  \n  function encode(ip, buff, offset) {\n    offset = ~~offset;\n    const size = sizeOf(ip);\n  \n    if (typeof buff === 'function') {\n      buff = buff(offset + size);\n    }\n  \n    if (size === v4.size) {\n      return v4.encode(ip, buff, offset);\n    }\n  \n    return v6.encode(ip, buff, offset);\n  }\n  \n  function decode(buff, offset, length) {\n    offset = ~~offset;\n    length = length || buff.length - offset;\n  \n    if (length === v4.size) {\n      return v4.decode(buff, offset, length);\n    }\n  \n    if (length === v6.size) {\n      return v6.decode(buff, offset, length);\n    }\n  \n    throw Error(`Invalid buffer size needs to be ${v4.size} for v4 or ${v6.size} for v6.`);\n  }\n  return \"default\" in exports ? exports.default : exports;\n})({});\nif (typeof define === 'function' && define.amd) define([], function() { return ipCodec; });\nelse if (typeof module === 'object' && typeof exports==='object') module.exports = ipCodec;\n","'use strict';\n\nvar possibleNames = require('possible-typed-array-names');\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\n\n/** @type {import('.')} */\nmodule.exports = function availableTypedArrays() {\n\tvar /** @type {ReturnType<typeof availableTypedArrays>} */ out = [];\n\tfor (var i = 0; i < possibleNames.length; i++) {\n\t\tif (typeof g[possibleNames[i]] === 'function') {\n\t\t\t// @ts-expect-error\n\t\t\tout[out.length] = possibleNames[i];\n\t\t}\n\t}\n\treturn out;\n};\n","'use strict';\n\n// this should only run in node >= 13.2, so it\n// does not need any of the intense fallbacks that old node/browsers do\n\nvar $iterator = Symbol.iterator;\nmodule.exports = function getIterator(iterable) {\n\t// alternatively, `iterable[$iterator]?.()`\n\tif (iterable != null && typeof iterable[$iterator] !== 'undefined') {\n\t\treturn iterable[$iterator]();\n\t}\n};\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./bundles/homekit-manager.ts\");\n",""],"names":[],"sourceRoot":""}